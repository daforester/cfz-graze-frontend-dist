import{p as Fe,an as tl,n as Le,ae as cl,r as $,s as Ce,u as ke,e as Q,w as H,E as Te,v as o,H as R,x as ue,N as W,aA as vl,ah as ml,y as fl,k as pl,f as gl,j as hl,ax as al,aa as je,ad as Ul,aB as Vl,ay as Il,m as yl,I as Ve,a1 as te,a2 as Ie,a5 as ze,K as d,R as O,U as j,O as z,M as f,Z as J,L as S,S as m,Q as L,a3 as be,P as nl,ar as Ge,$ as ol,Y as bl,ac as Ze,a as Dl,aC as re}from"./index-089eeb66.js";import{F as he}from"./form-aee596e2.js";import{V as Ue,u as Ke}from"./VCheckbox-74ee2a41.js";import{s as Se}from"./index-71069b21.js";import{f as Cl,V as ce,a as ee,c as ul,d as Pe,e as we}from"./VList-c97e0157.js";import{a as de,V as Y}from"./VRow-fdf481a1.js";import{m as kl,u as Tl,a as Sl,b as El,V as Ye}from"./VSelect-20ab341a.js";import{d as Al,u as Rl,e as He,T as $l,s as Qe}from"./filter-da0d55c8.js";import{C as Ol,a as Me,l as Ee,G as Pl,V as ve,n as wl}from"./VContainer-5ba3e8b8.js";import{c as xl}from"./copyToClipboard-54de8978.js";import{a as Fl,e as Ll,_ as Ml}from"./VChip-6da9e95e.js";import{k as ql,l as Nl,j as il,V as De,m as sl,e as Bl,u as Gl,f as xe,g as Hl,h as _l,i as Yl,n as zl}from"./VTextField-10597256.js";import{m as Kl,I as Xl}from"./index-b8419a13.js";import{V as Jl,m as jl,a as rl,b as Zl,c as Ql}from"./VCheckboxBtn-22a333af.js";import{G as Wl}from"./userData-bc539620.js";import{v as _e}from"./v4-a960c1f4.js";import{V as et}from"./VForm-c85fa672.js";const We=(e,D,s)=>{if(s>=e.length){let P=s-e.length+1;for(;P--;)e.push(void 0)}e.splice(s,0,e.splice(D,1)[0])};var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const Xt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function lt(e,D,s){if(D==null)return e;if(Array.isArray(D))throw new Error("Multiple matches is not implemented");return typeof D=="number"&&~D?o(R,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,D)]),o("span",{class:"v-autocomplete__mask"},[e.substr(D,s)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(D+s)])]):e}const tt=Fe({autoSelectFirst:{type:[Boolean,String]},search:String,...Al({filterKeys:["title"]}),...kl(),...tl(ql({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Kl({transition:!1})},"VAutocomplete"),el=Le()({name:"VAutocomplete",props:tt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,D){let{slots:s}=D;const{t:P}=cl(),I=$(),p=Ce(!1),b=Ce(!0),V=$(!1),u=$(),U=ke(e,"menu"),l=Q({get:()=>U.value,set:h=>{var N;U.value&&!h&&((N=u.value)!=null&&N.ΨopenChildren)||(U.value=h)}}),t=Ce(-1),y=Q(()=>{var h;return(h=I.value)==null?void 0:h.color}),{items:r,transformIn:c,transformOut:v}=Cl(e),{textColorClasses:a,textColorStyles:i}=Ol(y),n=ke(e,"search",""),A=ke(e,"modelValue",[],h=>c(h===null?[null]:ml(h)),h=>{const N=v(h);return e.multiple?N:N[0]??null}),E=Nl(),{filteredItems:w,getMatches:ae}=Rl(e,r,()=>b.value?"":n.value),g=Q(()=>A.value.map(h=>r.value.find(N=>e.valueComparator(N.value,h.value))||h)),q=Q(()=>e.hideSelected?w.value.filter(h=>!g.value.some(N=>N.value===h.value)):w.value),B=Q(()=>g.value.map(h=>h.props.value)),le=Q(()=>g.value[t.value]),x=Q(()=>{var N;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&n.value===((N=q.value[0])==null?void 0:N.title))&&q.value.length>0&&!b.value&&!V.value}),G=Q(()=>e.hideNoData&&!r.value.length||e.readonly||(E==null?void 0:E.isReadonly.value)),C=$(),{onListScroll:T,onListKeydown:k}=Tl(C,I);function F(h){e.openOnClear&&(l.value=!0),n.value=""}function ie(){G.value||(l.value=!0)}function se(h){G.value||(p.value&&(h.preventDefault(),h.stopPropagation()),l.value=!l.value)}function fe(h){var ye,M,Z;if(e.readonly||E!=null&&E.isReadonly.value)return;const N=I.value.selectionStart,K=B.value.length;if((t.value>-1||["Enter","ArrowDown","ArrowUp"].includes(h.key))&&h.preventDefault(),["Enter","ArrowDown"].includes(h.key)&&(l.value=!0),["Escape"].includes(h.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(h.key)&&(x.value&&["Enter","Tab"].includes(h.key)&&me(w.value[0]),b.value=!0),h.key==="ArrowDown"&&x.value&&((ye=C.value)==null||ye.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(h.key)){if(t.value<0){h.key==="Backspace"&&!n.value&&(t.value=K-1);return}const _=t.value;le.value&&me(le.value),t.value=_>=K-1?K-2:_}if(h.key==="ArrowLeft"){if(t.value<0&&N>0)return;const _=t.value>-1?t.value-1:K-1;g.value[_]?t.value=_:(t.value=-1,I.value.setSelectionRange((M=n.value)==null?void 0:M.length,(Z=n.value)==null?void 0:Z.length))}if(h.key==="ArrowRight"){if(t.value<0)return;const _=t.value+1;g.value[_]?t.value=_:(t.value=-1,I.value.setSelectionRange(0,0))}}}function Ae(h){n.value=h.target.value}function qe(){var h;p.value&&(b.value=!0,(h=I.value)==null||h.focus())}function Ne(h){p.value=!0,setTimeout(()=>{V.value=!0})}function Be(h){V.value=!1}function Re(h){(h==null||h===""&&!e.multiple)&&(A.value=[])}const pe=Ce(!1);function me(h){if(e.multiple){const N=B.value.findIndex(K=>e.valueComparator(K,h.value));if(N===-1)A.value=[...A.value,h];else{const K=[...A.value];K.splice(N,1),A.value=K}}else A.value=[h],pe.value=!0,n.value=h.title,l.value=!1,b.value=!0,Te(()=>pe.value=!1)}return H(p,(h,N)=>{var K;h!==N&&(h?(pe.value=!0,n.value=e.multiple?"":String(((K=g.value.at(-1))==null?void 0:K.props.title)??""),b.value=!0,Te(()=>pe.value=!1)):(!e.multiple&&!n.value?A.value=[]:x.value&&!V.value&&!g.value.some(ye=>{let{value:M}=ye;return M===q.value[0].value})&&me(q.value[0]),l.value=!1,n.value="",t.value=-1))}),H(n,h=>{!p.value||pe.value||(h&&(l.value=!0),b.value=!h)}),Me(()=>{const h=!!(e.chips||s.chip),N=!!(!e.hideNoData||q.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),K=A.value.length>0,[ye]=De.filterProps(e);return o(De,ue({ref:I},ye,{modelValue:n.value,"onUpdate:modelValue":Re,focused:p.value,"onUpdate:focused":M=>p.value=M,validationValue:A.externalValue,dirty:K,onInput:Ae,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!s.selection,"v-autocomplete--selecting-index":t.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:K?void 0:e.placeholder,"onClick:clear":F,"onMousedown:control":ie,onKeydown:fe}),{...s,default:()=>o(R,null,[o(Sl,ue({ref:u,modelValue:l.value,"onUpdate:modelValue":M=>l.value=M,activator:"parent",contentClass:"v-autocomplete__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:qe},e.menuProps),{default:()=>[N&&o(ce,{ref:C,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:M=>M.preventDefault(),onKeydown:k,onFocusin:Ne,onFocusout:Be,onScrollPassive:T,tabindex:"-1"},{default:()=>{var M,Z,_;return[(M=s["prepend-item"])==null?void 0:M.call(s),!q.value.length&&!e.hideNoData&&(((Z=s["no-data"])==null?void 0:Z.call(s))??o(ee,{title:P(e.noDataText)},null)),o(El,{renderless:!0,items:q.value},{default:ge=>{var Je;let{item:ne,index:oe,itemRef:dl}=ge;const Xe=ue(ne.props,{ref:dl,key:oe,active:x.value&&oe===0?!0:void 0,onClick:()=>me(ne)});return((Je=s.item)==null?void 0:Je.call(s,{item:ne,index:oe,props:Xe}))??o(ee,Xe,{prepend:$e=>{let{isSelected:Oe}=$e;return o(R,null,[e.multiple&&!e.hideSelected?o(Jl,{key:ne.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ne.props.prependIcon&&o(Ee,{icon:ne.props.prependIcon},null)])},title:()=>{var $e,Oe;return b.value?ne.title:lt(ne.title,($e=ae(ne))==null?void 0:$e.title,((Oe=n.value)==null?void 0:Oe.length)??0)}})}}),(_=s["append-item"])==null?void 0:_.call(s)]}})]}),g.value.map((M,Z)=>{var ne;function _(oe){oe.stopPropagation(),oe.preventDefault(),me(M)}const ge={"onClick:close":_,onMousedown(oe){oe.preventDefault(),oe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:M.value,class:["v-autocomplete__selection",Z===t.value&&["v-autocomplete__selection--selected",a.value]],style:Z===t.value?i.value:{}},[h?s.chip?o(Pl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:M.title}}},{default:()=>{var oe;return[(oe=s.chip)==null?void 0:oe.call(s,{item:M,index:Z,props:ge})]}}):o(Fl,ue({key:"chip",closable:e.closableChips,size:"small",text:M.title},ge),null):((ne=s.selection)==null?void 0:ne.call(s,{item:M,index:Z}))??o("span",{class:"v-autocomplete__selection-text"},[M.title,e.multiple&&Z<g.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[W(",")])])])})]),"append-inner":function(){var ge;for(var M=arguments.length,Z=new Array(M),_=0;_<M;_++)Z[_]=arguments[_];return o(R,null,[(ge=s["append-inner"])==null?void 0:ge.call(s,...Z),e.menuIcon?o(Ee,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:se,onClick:vl},null):void 0])}})}),il({isFocused:p,isPristine:b,menu:l,search:n,filteredItems:w,select:me},I)}});const at=Fe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...sl(),...Bl()},"VTextarea"),nt=Le()({name:"VTextarea",directives:{Intersect:Xl},inheritAttrs:!1,props:at(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,D){let{attrs:s,emit:P,slots:I}=D;const p=ke(e,"modelValue"),{isFocused:b,focus:V,blur:u}=Gl(e),U=Q(()=>typeof e.counterValue=="function"?e.counterValue(p.value):(p.value||"").toString().length),l=Q(()=>{if(s.maxlength)return s.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function t(x,G){var C,T;!e.autofocus||!x||(T=(C=G[0].target)==null?void 0:C.focus)==null||T.call(C)}const y=$(),r=$(),c=Ce(""),v=$(),a=Q(()=>e.persistentPlaceholder||b.value||e.active);function i(){var x;v.value!==document.activeElement&&((x=v.value)==null||x.focus()),b.value||V()}function n(x){i(),P("click:control",x)}function A(x){P("mousedown:control",x)}function E(x){x.stopPropagation(),i(),Te(()=>{p.value="",Il(e["onClick:clear"],x)})}function w(x){var C;const G=x.target;if(p.value=G.value,(C=e.modelModifiers)!=null&&C.trim){const T=[G.selectionStart,G.selectionEnd];Te(()=>{G.selectionStart=T[0],G.selectionEnd=T[1]})}}const ae=$(),g=$(+e.rows),q=Q(()=>["plain","underlined"].includes(e.variant));fl(()=>{e.autoGrow||(g.value=+e.rows)});function B(){e.autoGrow&&Te(()=>{if(!ae.value||!r.value)return;const x=getComputedStyle(ae.value),G=getComputedStyle(r.value.$el),C=parseFloat(x.getPropertyValue("--v-field-padding-top"))+parseFloat(x.getPropertyValue("--v-input-padding-top"))+parseFloat(x.getPropertyValue("--v-field-padding-bottom")),T=ae.value.scrollHeight,k=parseFloat(x.lineHeight),F=Math.max(parseFloat(e.rows)*k+C,parseFloat(G.getPropertyValue("--v-input-control-height"))),ie=parseFloat(e.maxRows)*k+C||1/0,se=yl(T??0,F,ie);g.value=Math.floor((se-C)/k),c.value=hl(se)})}pl(B),H(p,B),H(()=>e.rows,B),H(()=>e.maxRows,B),H(()=>e.density,B);let le;return H(ae,x=>{x?(le=new ResizeObserver(B),le.observe(ae.value)):le==null||le.disconnect()}),gl(()=>{le==null||le.disconnect()}),Me(()=>{const x=!!(I.counter||e.counter||e.counterValue),G=!!(x||I.details),[C,T]=al(s),[{modelValue:k,...F}]=xe.filterProps(e),[ie]=Hl(e);return o(xe,ue({ref:y,modelValue:p.value,"onUpdate:modelValue":se=>p.value=se,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":q.value},e.class],style:e.style},C,F,{centerAffix:g.value===1&&!q.value,focused:b.value}),{...I,default:se=>{let{isDisabled:fe,isDirty:Ae,isReadonly:qe,isValid:Ne}=se;return o(_l,ue({ref:r,style:{"--v-textarea-control-height":c.value},onClick:n,onMousedown:A,"onClick:clear":E,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ie,{active:a.value||Ae.value,centerAffix:g.value===1&&!q.value,dirty:Ae.value||e.dirty,disabled:fe.value,focused:b.value,error:Ne.value===!1}),{...I,default:Be=>{let{props:{class:Re,...pe}}=Be;return o(R,null,[e.prefix&&o("span",{class:"v-text-field__prefix"},[e.prefix]),je(o("textarea",ue({ref:v,class:Re,value:p.value,onInput:w,autofocus:e.autofocus,readonly:qe.value,disabled:fe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:i,onBlur:u},pe,T),null),[[Ul("intersect"),{handler:t},null,{once:!0}]]),e.autoGrow&&je(o("textarea",{class:[Re,"v-textarea__sizer"],"onUpdate:modelValue":me=>p.value=me,ref:ae,readonly:!0,"aria-hidden":"true"},null),[[Vl,p.value]]),e.suffix&&o("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:G?se=>{var fe;return o(R,null,[(fe=I.details)==null?void 0:fe.call(I,se),x&&o(R,null,[o("span",null,null),o(Yl,{active:e.persistentCounter||b.value,value:U.value,max:l.value},I.counter)])])}:void 0})}),il({},y,r,v)}}),ot=Ve({__name:"Extras",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:P,disabled:I=!1}=s,p=Ie(e,"modelValue"),b=ze.getInstance(),V=$({});try{V.value=JSON.parse(p.value)}catch{}const u=$([]),U=$([]);H(s,()=>{t()}),H(V.value,r=>{for(const c in r)if(r[c].checked){const v=u.value.map(a=>{var i;return(i=a.Options)==null?void 0:i.find(n=>n.OptionUUID===c)});if(v&&v.length>0)try{const a=v[0];r[c].choiceId===""&&a&&a.Choices&&a.Choices.length>0&&(r[c].choiceId=a.Choices[0].TagUUID),r[c].price=a==null?void 0:a.Price}catch{}}else r[c].choiceId="",r[c].price=0;p.value=JSON.stringify(r),y()});const l=Q({get:()=>u.value.map(r=>r.ExtraUUID),set:()=>{}}),t=()=>{var c;const r=((c=s.items.find(v=>v.Title==="SelectedExtras"))==null?void 0:c.Value)||"[]";try{const v=JSON.parse(r);u.value=U.value.filter(a=>v.find(i=>i===a.ExtraUUID))||[],l.value=[...u.value.map(a=>a.ExtraUUID)],u.value.forEach(a=>{var i;(i=a.Options)==null||i.forEach(n=>{V.value[n.OptionUUID]||(V.value[n.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in P&&(b==null||b.getAvailableConventionExtras(P.ConventionUUID).then(r=>{r&&(U.value=r,t())}));const y=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,c)=>(d(),O(R,null,[j("h4",null,z(r.label),1),o(ce,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=v=>l.value=v)},{default:f(()=>[(d(!0),O(R,null,J(u.value,v=>(d(),S(ul,{key:v.ExtraUUID,value:v.ExtraUUID},{activator:f(({props:a})=>[o(ee,ue({"prepend-icon":"mdi:mdi-group","append-icon":"",title:v.Name},a),null,16,["title"])]),default:f(()=>[v.Options?(d(!0),O(R,{key:0},J(v.Options,a=>(d(),S(ee,{key:a.OptionUUID},{default:f(()=>[o(de,null,{default:f(()=>[o(Y,{cols:"12",sm:"6"},{default:f(()=>[o(Ue,{label:`${a.Name} ${a.Price&&a.Price>0?`(${m(Se).currencySymbol}${a.Price})`:""}`,modelValue:V.value[a.OptionUUID].checked,"onUpdate:modelValue":i=>V.value[a.OptionUUID].checked=i,disabled:m(I),"hide-details":"",onChange:y},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),a.Choices&&a.Choices.length>1&&V.value[a.OptionUUID].checked?(d(),S(Y,{key:0,cols:"12",sm:"6"},{default:f(()=>[o(Ye,{items:a.Choices.map(i=>({value:i.TagUUID,title:i.Title})),modelValue:V.value[a.OptionUUID].choiceId,"onUpdate:modelValue":i=>V.value[a.OptionUUID].choiceId=i,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(I),"hide-details":"",onChange:y},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ut=Ve({__name:"Interests",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:P,disabled:I=!1}=s,p=Ie(e,"modelValue"),b=ze.getInstance(),V=$({});try{V.value=JSON.parse(p.value)}catch{}const u=$([]),U=$([]);H(V.value,r=>{p.value=JSON.stringify(r)});const l=$([]),t=()=>{var c;const r=((c=s.items.find(v=>v.Title==="SelectedInterests"))==null?void 0:c.Value)||"[]";try{const v=JSON.parse(r);u.value=U.value.filter(a=>v.find(i=>i===a.InterestUUID))||[],l.value=[...u.value.map(a=>a.InterestUUID)]}catch{}};"ConventionUUID"in P&&(b==null||b.getConventionInterests(P.ConventionUUID).then(r=>{r&&(U.value=r,t())})),H(s,()=>{t()});const y=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,c)=>(d(),O(R,null,[j("h4",null,z(r.label),1),o(ce,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=v=>l.value=v)},{default:f(()=>[(d(!0),O(R,null,J(u.value,v=>(d(),S(ee,{key:v.InterestUUID},{default:f(()=>[o(de,null,{default:f(()=>[o(Y,null,{default:f(()=>[o(Ue,{label:`${v.Name} ${v.Price&&v.Price>0?`(${m(Se).currencySymbol}${v.Price})`:""}`,modelValue:V.value[v.InterestUUID],"onUpdate:modelValue":a=>V.value[v.InterestUUID]=a,disabled:m(I),"hide-details":"",onChange:y},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),it={key:0,class:"text-orange-darken-1"},st=Ve({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:P=!1,convention:I,disabled:p=!1}=s,b=Ie(e,"modelValue"),V=ze.getInstance(),u=$({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{u.value=JSON.parse(b.value),"ticket"in u.value&&(u.value.Ticket=u.value.ticket),"addonsChecked"in u.value&&(u.value.AddonsChecked=u.value.addonsChecked),"componentsChecked"in u.value&&(u.value.ComponentsChecked=u.value.componentsChecked)}catch{}const U=$([]),l=$([]);H(u.value,i=>{b.value=JSON.stringify(i)});const t=$([]),y=$({required:(i,n=void 0)=>()=>{if(n==null){if(u.value.Ticket.length===0&&s.required)return"Must select at least one ticket option.";if(i&&i.ComponentsRequired>0&&u.value.Ticket.includes(i.TicketUUID||"")){let A=0;if(i.TicketComponents.forEach(E=>{u.value.ComponentsChecked.forEach(w=>{E.TicketUUID===w&&(A+=1)})}),A<i.ComponentsRequired)return`Must select ticket ${i.ComponentsRequired} component${i.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var n;const i=((n=s.items.find(A=>A.Title==="SelectedTickets"))==null?void 0:n.Value)||"[]";try{const A=JSON.parse(i);U.value=l.value.filter(E=>E.Type==="TICKET_TYPE_GROUP"&&A.find(w=>w===E.TicketUUID))||[],t.value=[...U.value.filter(E=>E.Type==="TICKET_TYPE_GROUP").map(E=>E.TicketUUID)]}catch{}};if("ConventionUUID"in I)if(P)V==null||V.getConventionTickets(I.ConventionUUID).then(i=>{i&&(l.value=i,r())});else{const i=s.items.find(n=>n.Title==="SelectedTickets");i&&(V==null||V.getFieldTickets(i.FieldUUID).then(n=>{n&&(l.value=n,r())}))}H(s,()=>{r()});const c=i=>{u.value.Ticket.length>1&&u.value.Ticket.shift(),u.value.ComponentsChecked=[];const n=[];U.value.forEach(A=>{(u.value.Ticket.includes(A.TicketUUID)||u.value.ComponentsChecked.includes(A.TicketUUID))&&n.push(...A.AddonTickets.map(E=>E.TicketUUID))}),u.value.AddonsChecked=u.value.AddonsChecked.filter(A=>n.includes(A)),a(i)},v=i=>{const n=l.value.find(A=>A.TicketUUID===u.value.Ticket[0]);if(n)for(;u.value.ComponentsChecked.length>n.ComponentsRequired;)u.value.ComponentsChecked.shift();a(i)},a=(i=void 0)=>{setTimeout(()=>D("change",i),100)};return(i,n)=>{var A;return d(),O(R,null,[j("h4",null,[W(z(i.label)+" ",1),(A=i.registrationGroup)!=null&&A.Registration.Leader?L("",!0):(d(),O("small",it,"(controlled by group leader)"))]),o(ce,{opened:t.value,"onUpdate:opened":n[4]||(n[4]=E=>t.value=E)},{default:f(()=>[(d(!0),O(R,null,J(m(He)(U.value.filter(E=>E.Type===m($l).TICKET_TYPE_GROUP)),E=>(d(),O(R,{key:E.TicketUUID},[E.Tickets.length>0?(d(),S(ul,{key:0,value:E.TicketUUID},{activator:f(({props:w})=>[o(ee,ue(w,{"prepend-icon":"mdi:mdi-group",title:E.Name}),{default:f(()=>[o(Pe,{title:E.Description},null,8,["title"])]),_:2},1040,["title"])]),default:f(()=>[(d(!0),O(R,null,J(E.Tickets,w=>(d(),S(ee,{key:w.TicketUUID},{default:f(()=>{var ae;return[o(Pe,null,{default:f(()=>[W(z(w.Description),1)]),_:2},1024),o(Ue,{modelValue:u.value.Ticket,"onUpdate:modelValue":n[0]||(n[0]=g=>u.value.Ticket=g),value:w.TicketUUID,onChange:c,rules:[y.value.required(w)],"validate-on":"submit",disabled:m(p)||!((ae=i.registrationGroup)!=null&&ae.Registration.Leader)},{label:f(()=>[o(Ee,{icon:w.RequiresAccommodation?"mdi:mdi-home":w.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+z(`${w.Name} ${w.Price>0?`(${m(Se).currencySymbol}${w.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),u.value.Ticket.length>0&&w.TicketUUID===u.value.Ticket[0]?(d(),O(R,{key:0},[w.AddonTickets.length?(d(),S(ce,{key:0},{default:f(()=>[(d(!0),O(R,null,J(m(He)(w.AddonTickets),g=>(d(),O(R,{key:g==null?void 0:g.TicketUUID},[g?(d(),S(ee,{key:0},{default:f(()=>[o(we,null,{default:f(()=>{var q;return[o(Ue,{modelValue:u.value.AddonsChecked,"onUpdate:modelValue":n[1]||(n[1]=B=>u.value.AddonsChecked=B),value:g.TicketUUID,onChange:n[2]||(n[2]=B=>{u.value.ComponentsChecked=[],a(B)}),disabled:m(p)||!((q=i.registrationGroup)!=null&&q.Registration.Leader)},{label:f(()=>[o(Ee,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+z(`${g.Name} ${g.Price>0?`(${m(Se).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),o(Pe,null,{default:f(()=>[W(z(g.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),w.TicketComponents.length?(d(),S(ce,{key:1},{default:f(()=>[(d(!0),O(R,null,J(m(He)(w.TicketComponents),g=>(d(),O(R,{key:g==null?void 0:g.TicketUUID},[g?(d(),S(ee,{key:0},{default:f(()=>[o(we,null,{default:f(()=>{var q;return[o(Ue,{modelValue:u.value.ComponentsChecked,"onUpdate:modelValue":n[3]||(n[3]=B=>u.value.ComponentsChecked=B),value:g.TicketUUID,onChange:v,rules:[y.value.required(w,g)],"validate-on":"submit",disabled:m(p)||!((q=i.registrationGroup)!=null&&q.Registration.Leader)},{label:f(()=>[o(Ee,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+z(`${g.Name} ${g.Price>0?`(${m(Se).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),o(Pe,null,{default:f(()=>[W(z(g.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])],64)}}}),rt={key:0},dt=j("strong",null,"Your Sharing Group",-1),ct=["href","onClick"],vt=j("br",null,null,-1),mt=j("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ft=j("strong",null,"Your Groups Accommodation",-1),pt=j("br",null,null,-1),gt=j("small",null,"(in order of preference, controlled by group leader)",-1),ht=j("strong",null,"Accommodation Options",-1),Ut=j("br",null,null,-1),Vt=j("strong",null,"Your Chosen Accommodation",-1),It=j("small",null,"(in order of preference)",-1),yt=Ve({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:P=!1,convention:I}=s,p=Ie(e,"modelValue"),b=Ke(s,D,void 0,void 0,"items"),V=ol(),u=bl.getInstance(),U=$(be(p.value)),l=$([]),t=$(),y=$({sharing:!1}),r=()=>{try{const C=JSON.parse(s.data);C&&(y.value=C)}catch{}};r(),H(s,()=>{r(),s.registrationGroup&&(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration)}),H(U,C=>{p.value=be(C)},{deep:!0});const c=$(""),v=$(!1),a=()=>{var C;(C=t.value)!=null&&C.Leader&&V.getRegistrationInvite(I.ConventionUUID).then(T=>{if(T){const k=new URL(location.href);k.searchParams.set("token",T),c.value=k.toString()}})},i=()=>{xl(c.value),a(),v.value=!0,setTimeout(()=>v.value=!1,2200)},n=()=>{u.emit("registration.group.leave")},A=C=>{u.emit("registration.group.remove.member",C)},E=$([]);H(b,()=>{w()});const w=()=>{P?V.getConventionAccommodation(I.ConventionUUID).then(C=>{E.value=C.filter(T=>!!(b!=null&&b.value.find(k=>k.Value===T.AccommodationUUID)))||[]}):b.value.length>0&&V.getFieldAccommodation(b.value[0].FieldUUID).then(C=>{E.value=C.filter(T=>!!(b!=null&&b.value.find(k=>k.Value===T.AccommodationUUID)))||[]})};w(),(()=>{var C;if(s.registrationGroup)if(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration,(C=t.value)!=null&&C.Leader)a();else try{U.value=JSON.parse(s.registrationGroup.AccommodationData)}catch{}})();const g=$({column:0,id:""}),q=()=>{U.value.includes(g.value.id)||(g.value.column===0&&g.value.id!==""&&U.value.push(g.value.id),G())},B=()=>{const C=U.value.findIndex(T=>T===g.value.id);C>=0&&(U.value.splice(C,1),G())},le=()=>{if(g.value.column!==1)return;const C=U.value.findIndex(T=>T===g.value.id);C<=0||(We(U.value,C,C-1),G())},x=()=>{if(g.value.column!==1)return;const C=U.value.findIndex(T=>T===g.value.id);C>=U.value.length-1||(We(U.value,C,C+1),G())},G=(C=void 0)=>{setTimeout(()=>D("change",C),100)};return(C,T)=>(d(),O(R,null,[j("h4",null,z(C.label),1),o(de,null,{default:f(()=>[o(Y,{cols:"12"},{default:f(()=>{var k;return[l.value&&t.value&&y.value.sharing?(d(),O("div",rt,[dt,((k=l.value.find(F=>F.IsLeader))==null?void 0:k.UUID)!==t.value.RegistrationUUID?(d(),S(ve,{key:0,color:"red",variant:"text",onClick:n},{default:f(()=>[W("(leave group)")]),_:1})):L("",!0),o(ce,null,{default:f(()=>[o(ee,null,{default:f(()=>{var F;return[o(we,{class:"float-left pr-2 font-weight-bold"},{default:f(()=>[W(" Leader: ")]),_:1}),W(" "+z((F=l.value.find(ie=>ie.IsLeader))==null?void 0:F.Name),1)]}),_:1}),(d(!0),O(R,null,J(l.value,F=>(d(),O(R,{key:F.UUID},[F.IsLeader?L("",!0):(d(),S(ee,{key:0},{append:f(()=>[t.value.Leader?(d(),S(ve,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:ie=>A(F.UUID)},null,8,["onClick"])):L("",!0)]),default:f(()=>[o(we,{class:"float-left pr-2"},{default:f(()=>[W(" Member: ")]),_:1}),W(" "+z(F.Name),1)]),_:2},1024))],64))),128))]),_:1}),o(Ll,{modelValue:v.value,"onUpdate:modelValue":T[0]||(T[0]=F=>v.value=F),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),c.value&&t.value.Leader?(d(),O(R,{key:1},[o(ve,{color:"blue"},{default:f(()=>[j("a",{href:c.value,onClick:nl(i,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,ct)]),_:1}),vt,mt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),t.value&&!t.value.Leader?(d(),S(de,{key:0},{default:f(()=>[o(Y,{cols:"10",md:"5"},{default:f(()=>[ft,pt,gt,o(ce,null,{default:f(()=>[(d(!0),O(R,null,J(U.value.map(k=>E.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(d(),O(R,null,[k?(d(),S(ee,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ge(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(d(),S(de,{key:1},{default:f(()=>[o(Y,{cols:"12",md:"5"},{default:f(()=>[ht,Ut,o(ce,null,{default:f(()=>[(d(!0),O(R,null,J(E.value,k=>(d(),S(ee,{key:k.AccommodationUUID,title:k.Name,class:Ge(g.value.column===0&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:F=>g.value={column:0,id:k.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:T[1]||(T[1]=F=>q())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),o(Y,{cols:"12",md:"1"},{default:f(()=>[o(de,{class:"d-md-none"},{default:f(()=>[o(Y,{cols:"12",class:"text-center"},{default:f(()=>[o(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:T[2]||(T[2]=k=>q()),color:"primary",title:"Select"}),W("   "),o(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:T[3]||(T[3]=k=>B()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),o(de,{class:"d-none d-md-flex h-100 align-content-center"},{default:f(()=>[o(Y,{cols:"12"},{default:f(()=>[o(ve,{icon:"mdi:mdi-arrow-right",size:"small",onClick:T[4]||(T[4]=k=>q()),color:"primary",title:"Select"})]),_:1}),o(Y,{cols:"12"},{default:f(()=>[o(ve,{icon:"mdi:mdi-arrow-left",size:"small",onClick:T[5]||(T[5]=k=>B()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),o(Y,{cols:"10",md:"5"},{default:f(()=>[Vt,o(ce,null,{default:f(()=>[(d(!0),O(R,null,J(U.value.map(k=>E.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(d(),O(R,null,[k?(d(),S(ee,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ge(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ie=>g.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:T[6]||(T[6]=ie=>B())},null,8,["title","class","onClick"])):L("",!0)],64))),256))]),_:1}),It]),_:1}),o(Y,{cols:"2",md:"1"},{default:f(()=>[o(de,{class:"d-flex h-100 align-content-center mt-3"},{default:f(()=>[o(Y,{cols:"12"},{default:f(()=>[o(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:T[7]||(T[7]=k=>le()),color:"primary",title:"Higher Priority"})]),_:1}),o(Y,{cols:"12"},{default:f(()=>[o(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:T[8]||(T[8]=k=>x()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),bt=Ve({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,P=Ke(s,D,void 0,void 0,"items"),I=Ie(e,"modelValue"),p=$({required:l=>!s.required||!!l||"Required.",min:l=>{var n,A;const t=new Date,y=t.getFullYear(),r=(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),c=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),v=((n=P.value.find(E=>E.Title=="MIN_AGE"))==null?void 0:n.Value)||"18",a=((A=P.value.find(E=>E.Title=="BEFORE_DATE"))==null?void 0:A.Value)||`${y}-${r}-${c}`,i=u(a);return V(l,a,parseInt(v))||`You must be at least ${v} years old by ${i.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),b=()=>(D("blur"),!(p.value.min(I.value||"")!==!0||p.value.required(I.value||"")!==!0)),V=(l,t,y)=>{if(l>=t)return!1;const r=u(l),v=u(t).getTime()-r.getTime(),a=1e3*60*60*24*365.25;return v/a>=y},u=l=>{const[t,y,r]=l.split("-");return new Date(parseInt(t),parseInt(y)-1,parseInt(r))},U=(l=void 0)=>{setTimeout(()=>D("change",l),100)};return(l,t)=>(d(),S(De,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=y=>I.value=y),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[p.value.required,p.value.min],onBlur:b,onChange:U},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Dt=Fe({...jl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ct=Le()({name:"VRadio",props:Dt(),setup(e,D){let{slots:s}=D;return Me(()=>o(rl,ue(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),s)),{}}});const kt=Fe({height:{type:[Number,String],default:"auto"},...sl(),...tl(Zl(),["multiple"]),trueIcon:{type:Ze,default:"$radioOn"},falseIcon:{type:Ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Tt=Le()({name:"VRadioGroup",inheritAttrs:!1,props:kt(),emits:{"update:modelValue":e=>!0},setup(e,D){let{attrs:s,slots:P}=D;const I=Dl(),p=Q(()=>e.id||`radio-group-${I}`),b=ke(e,"modelValue");return Me(()=>{const[V,u]=al(s),[U,l]=xe.filterProps(e),[t,y]=rl.filterProps(e),r=P.label?P.label({label:e.label,props:{for:p.value}}):e.label;return o(xe,ue({class:["v-radio-group",e.class],style:e.style},V,U,{modelValue:b.value,"onUpdate:modelValue":c=>b.value=c,id:p.value}),{...P,default:c=>{let{id:v,messagesId:a,isDisabled:i,isReadonly:n}=c;return o(R,null,[r&&o(zl,{id:v.value},{default:()=>[r]}),o(Ql,ue(t,{id:v.value,"aria-describedby":a.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:i.value,readonly:n.value,"aria-labelledby":r?v.value:void 0,multiple:!1},u,{modelValue:b.value,"onUpdate:modelValue":A=>b.value=A}),P)])}})}),{}}}),ll=Ve({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:P=!1,disabled:I=!1,persistentHint:p=!1,required:b=!1}=s,V=$(""),u=Ie(e,"modelValue"),U=Ke(s,D,void 0,void 0,"field"),l=$(be(U.value)),t=$({maxlength:a=>!s.maxLength||a.length<=s.maxLength||`Maximum length is ${s.maxLength} characters. (Current length: ${a.length})`,minlength:a=>!s.minLength||a.length>=s.minLength||`Minimum length is ${s.minLength} characters. (Current length: ${a.length})`,required:a=>!s.required||!!a||"Required field."}),y=$(!1),r=$([]),c=$("");try{const a=JSON.parse(u.value);Array.isArray(a)?r.value=a:typeof a=="boolean"?y.value=a:c.value=u.value}catch{y.value=!1,r.value=[],c.value=u.value}H(y,()=>{u.value=JSON.stringify(y.value),D("input")}),H(r,()=>{u.value=JSON.stringify(r.value),D("input"),l.value.Type===X.SELECT&&D("change")},{deep:!0}),H(c,()=>{u.value=c.value,D("input"),l.value.Type===X.SELECT&&D("change")}),H(U.value,()=>{l.value.Type!==U.value.Type?(l.value=be(U.value),y.value=!1,r.value=[],c.value=""):l.value=be(U.value)});const v=(a=void 0)=>{D("change",a)};return(a,i)=>l.value.Type===m(X).TEXT?(d(),S(De,{key:0,modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:`${l.value.Label}${m(b)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).DATE?(d(),S(De,{key:1,modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=n=>c.value=n),type:"date",name:a.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).NUMBER?(d(),S(De,{key:2,modelValue:c.value,"onUpdate:modelValue":i[2]||(i[2]=n=>c.value=n),type:"number",name:a.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).TEXTAREA?(d(),S(nt,{key:3,modelValue:c.value,"onUpdate:modelValue":i[3]||(i[3]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).CHECKBOX?(d(),O(R,{key:4},[l.value.Multiple?(d(!0),O(R,{key:0},J(l.value.Values,n=>(d(),S(Ue,{key:n.ID,modelValue:r.value,"onUpdate:modelValue":i[4]||(i[4]=A=>r.value=A),name:a.name,hint:l.value.Hint,label:n.Title,value:n.Value,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,rules:[t.value.required],onChange:v},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(d(),S(Ue,{key:1,modelValue:y.value,"onUpdate:modelValue":i[5]||(i[5]=n=>y.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(b),rules:[n=>!m(b)||!!n||"You must tick to continue!"],onChange:v},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===m(X).SELECT?(d(),O(R,{key:5},[!l.value.Autofill&&l.value.Multiple?(d(),S(Ye,{key:0,modelValue:r.value,"onUpdate:modelValue":i[6]||(i[6]=n=>r.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(d(),S(el,{key:1,modelValue:r.value,"onUpdate:modelValue":i[7]||(i[7]=n=>r.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(d(),S(el,{key:3,modelValue:c.value,"onUpdate:modelValue":i[9]||(i[9]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(d(),S(Ye,{key:2,modelValue:c.value,"onUpdate:modelValue":i[8]||(i[8]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===m(X).RADIO?(d(),S(Tt,{key:6,modelValue:c.value,"onUpdate:modelValue":i[10]||(i[10]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,rules:[t.value.required],onChange:v},{default:f(()=>[(d(!0),O(R,null,J(l.value.Values,n=>(d(),S(Ct,{key:n.Value,label:n.Title,value:n.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).ACCOMMODATION?(d(),S(yt,{key:7,modelValue:r.value,"onUpdate:modelValue":i[11]||(i[11]=n=>r.value=n),name:a.name,admin:m(P),convention:a.convention,"registration-group":a.registrationGroup,data:a.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,onChange:v},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(X).AGE?(d(),S(bt,{key:8,modelValue:c.value,"onUpdate:modelValue":i[12]||(i[12]=n=>c.value=n),name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,onChange:v},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(X).EXTRAS?(d(),S(ot,{key:9,modelValue:c.value,"onUpdate:modelValue":i[13]||(i[13]=n=>c.value=n),convention:a.convention,name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(b),onChange:v},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(X).INTERESTS?(d(),S(ut,{key:10,modelValue:c.value,"onUpdate:modelValue":i[14]||(i[14]=n=>c.value=n),convention:a.convention,name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(b),onChange:v},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(X).TICKET?(d(),S(st,{key:11,modelValue:c.value,"onUpdate:modelValue":i[15]||(i[15]=n=>c.value=n),admin:m(P),convention:a.convention,name:a.name,"registration-group":a.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(b),onChange:v},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),St={key:0,class:"my-2"},Et={key:1,class:"my-2"},At={key:0,class:"my-2"},Rt={key:1,class:"my-2"},Jt=Ve({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const D=Ie(e,"modelValue");Qe(D.value.Sections),D.value.Sections.forEach(u=>{u.Fields&&Qe(u.Fields)});const s=$(),P=Wl(),I=ol(),p=$((()=>{if(e.data!==void 0){const U=be(e.data);return D.value.Sections.forEach(l=>{l.Fields&&l.Fields.forEach(t=>{const y=e.data.Data.find(r=>r.SectionFieldUUID===t.SectionFieldUUID&&r.SectionFieldUUID==t.SectionFieldUUID);if(y)t.Value=y.Data;else{const r={ID:0,SubmissionDataUUID:_e(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:l.ID,SectionUUID:l.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:t.Value};U.Data.push(r)}})}),U}const u={ID:0,SubmissionUUID:_e(),FormID:D.value.ID,FormUUID:D.value.FormUUID,UserID:(P==null?void 0:P.ID)||0,UserUUID:(P==null?void 0:P.UserUUID)||"",Data:[]};return u.Data=D.value.Sections.map(U=>U.Fields?U.Fields.map(l=>({ID:0,SubmissionDataUUID:_e(),SubmissionID:u.ID,SubmissionUUID:u.SubmissionUUID,SectionID:U.ID,SectionUUID:U.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value})):[]).flat(),u})()),b=(u,U,l)=>{const t=p.value.Data.find(y=>y.SectionUUID===u&&y.SectionFieldUUID===U);t&&(t.Data=l)},V=({callback:u})=>{var U;(U=s.value)==null||U.validate().then(l=>{l.valid?I.saveSubmission(p.value).then(t=>{if(t){if(p.value=t.Submission,u&&u("Saved"),t.Forms&&t.Forms.length>0){const y=t.Forms.find(a=>a.FormUUID===p.value.FormUUID),r=t.Forms.find(a=>a.Type===he.FORM_TYPE_ACCOMMODATION),c=t.Forms.find(a=>a.Type===he.FORM_TYPE_DEALER),v=t.Forms.find(a=>a.Type===he.FORM_TYPE_BADGE);y&&y.Type===he.FORM_TYPE_REGISTRATION?r?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`):c?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):v?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`):re.push("/"):y&&y.Type===he.FORM_TYPE_ACCOMMODATION?c?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):v?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):y&&y.Type===he.FORM_TYPE_DEALER?v?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):y&&y.Type===he.FORM_TYPE_BADGE&&re.push("/")}}else u&&u("Failed to process request")}).catch(()=>{u&&u("Failed to process request")}):u&&u("Errors in form detected, please review and try again.")})};return(u,U)=>(d(),S(wl,null,{default:f(()=>[o(et,{ref_key:"formValidator",ref:s,onSubmit:U[0]||(U[0]=nl(()=>{},["prevent"]))},{default:f(()=>[D.value.Heading?(d(),O("h2",St,z(D.value.Heading),1)):L("",!0),D.value.Description?(d(),O("p",Et,z(D.value.Description),1)):L("",!0),(d(!0),O(R,null,J(D.value.Sections,l=>(d(),O(R,{key:`section_${D.value.ID}.${l.ID}`},[l.Heading?(d(),O("h3",At,z(l.Heading),1)):L("",!0),l.Description?(d(),O("p",Rt,z(l.Description),1)):L("",!0),l.Fields?(d(!0),O(R,{key:2},J(l.Fields,t=>(d(),O(R,{key:`field_${D.value.ID}.${l.ID}.${t.ID}`},[t.Field?(d(),S(de,{key:0},{default:f(()=>[o(Y,null,{default:f(()=>[u.editable?(d(),S(ll,{key:0,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":y=>t.Value=y,admin:u.admin,convention:u.convention,"registration-group":u.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,onChange:y=>b(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(d(),S(ll,{key:1,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":y=>t.Value=y,admin:u.admin,convention:u.convention,"registration-group":u.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:"",onChange:y=>b(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128)):L("",!0)],64))),128)),u.editable&&!u.preview?(d(),S(de,{key:2},{default:f(()=>[o(Y,{class:"text-center"},{default:f(()=>[o(Ml,{onClick:V,type:"submit"})]),_:1})]),_:1})):L("",!0)]),_:1},512)]),_:1}))}});export{Xt as F,el as V,ll as _,nt as a,X as b,Jt as c};
