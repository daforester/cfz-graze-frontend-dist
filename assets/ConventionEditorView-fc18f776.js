var Ft=Object.defineProperty;var At=(n,r,e)=>r in n?Ft(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var Ue=(n,r,e)=>(At(n,typeof r!="symbol"?r+"":r,e),e);import{s as B}from"./index-ba0d422e.js";import{d as z,X as O,Y as G,y as C,R as Z,o as U,b as y,w as l,c as t,e as D,L as T,K as P,h as R,N as b,F as E,O as H,G as L,f as Y,H as re,m as ge,V as vt,D as wt,M as ft,k as de,$ as he,Z as we,a0 as Oe,z as je,p as Ce,a1 as Lt,a as be,s as j,a2 as it,u as pt,v as Ot,a3 as Rt,a4 as Nt,I as Mt,x as qt,t as ce,B as Bt,i as Xe,a5 as Ut,n as zt,q as Yt,a6 as Gt,a7 as Kt,a8 as It,a9 as Ht,aa as jt,ab as Xt,W as Wt,ac as Jt}from"./index-e64203a3.js";import{m as qe,a as Be,s as Re,u as Ne,F as Zt,V as We,_ as Qt,b as el}from"./FormField.vue_vue_type_script_setup_true_lang-61fbf103.js";import{u as J}from"./useGrazeAPI-d03a471c.js";import{_ as Ve,N as st}from"./SelectTags.vue_vue_type_script_setup_true_lang-fa9c6165.js";import{_ as _e}from"./SaveButton.vue_vue_type_script_setup_true_lang-17310d42.js";import{e as ve,c as Te}from"./VCard-078febd6.js";import{V as _,a as W,m as tl,b as ll,c as gt,d as nl,e as ol,f as al,g as il}from"./VBtn-6e5dd02f.js";import{V as me,b as oe}from"./VToolbar-0bad7a63.js";import{V as ae}from"./VSpacer-9c65a709.js";import{V as De,a as sl}from"./VSheet-ad9e8706.js";import{V as ee}from"./VContainer-1e78ef63.js";import{V as N,a as ul,s as rl}from"./VTextField-3a4cc6ea.js";import{V as Se}from"./VDialog-4dcdb8a4.js";import{V as ze,d as ne,a as ue,e as Je,b as Vt}from"./VList-07fd4c68.js";import{a as M,V as h}from"./VRow-c3f1c0bf.js";import{v as K}from"./v4-a960c1f4.js";import{V as ke,a as Ee,b as Pe,c as xe}from"./VExpansionPanel-8050dcd7.js";import{V as Tt}from"./VImg-3f31abb1.js";import{V as dl}from"./VForm-f4ac5fc9.js";import{V as ml}from"./VFileInput-dd2f1ef6.js";import{V as Ze}from"./VTextarea-ac164a2c.js";import{T as F,a as cl}from"./ticket-b671e8ba.js";import{V as vl}from"./VAutocomplete-5d9b0f27.js";import{V as se}from"./VSelect-3a0c81c0.js";import{V as fl,a as pl}from"./VChip-4da44c7e.js";import{_ as Ul}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-8c498edb.js";import{_ as Il}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-6563a3be.js";import{_ as Qe,a as gl,V as Dt,b as Vl}from"./FieldEditor.vue_vue_type_script_setup_true_lang-f7572b92.js";import{_ as Tl}from"./FormRenderer.vue_vue_type_script_setup_true_lang-f4598805.js";import{V as Dl,a as ut}from"./index-8754a589.js";import{i as yl,u as $e,m as et,d as tt,j as rt,f as hl}from"./rounded-45c96fbd.js";import{m as Cl,u as bl}from"./VOverlay-2d543717.js";import{u as _l}from"./ssrBoot-610bd96f.js";import{M as Sl}from"./index-e6f54349.js";import"./scopeId-2e1e9f71.js";import"./createSimpleFunctional-cd033a8e.js";import"./VAvatar-0c53fbcd.js";import"./VTable-71d7a01e.js";import"./userData-d733b0cf.js";const kl=[{ID:1,AdminLayoutUUID:"",ConventionID:1,ConventionUUID:"97d5c243-674f-47f3-abc0-9eb5dca4316f",Name:"Registration Table",Type:"TABLE",Panels:[{ID:1,LayoutPanelUUID:"",AdminLayoutID:1,AdminLayoutUUID:"",Name:"Row",Order:1,Items:[{ID:1,LayoutItemUUID:"a",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Date of Birth",SourceType:"FORM",SectionFieldID:13,SectionFieldUUID:"8a14640f-d443-4b9c-8a5b-3afbd9e6c2b9",Align:"start",Order:1},{ID:2,LayoutItemUUID:"b",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Legal Name",SourceType:"FORM",SectionFieldID:19,SectionFieldUUID:"9b9b40ba-7e88-4456-9bfa-63a7db70012f",Align:"start",Order:2},{ID:3,LayoutItemUUID:"c",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Furry Name",SourceType:"FORM",SectionFieldID:23,SectionFieldUUID:"229f72c6-a3c2-4f18-8c23-edbe8b7eae78",Align:"start",Order:3}]}]}],El=(n,r)=>{const e=new Map;n.forEach(d=>{const i=r(d);i&&e.set(i.toString(),[...e.get(i.toString())||[],d])});const o={};return e.forEach((d,i)=>{o[i]=d}),o},Pl=[],xl=kl,$l=[],Fl=[],Ie=class extends Object{constructor(){super();Ue(this,"accommodation");Ue(this,"adminLayouts");Ue(this,"conventions");Ue(this,"conventionTags");this.accommodation=Pl,this.adminLayouts=xl,this.conventions=$l,this.conventionTags=Fl}static getInstance(){return Ie.instance===void 0&&(Ie.instance=new Ie),Ie.instance}deleteCredential(e){return Promise.resolve(!1)}getConvention(e){return console.warn(`StubAPI: getConvention("${e}")`),new Promise(o=>{const d=this.conventions.find(i=>i.ConventionUUID===e||i.Slug===e);d&&(d.Accommodation=this.accommodation.filter(i=>i.ConventionUUID===d.ConventionUUID),o(d)),o(void 0)})}getConventionAccommodation(e){return console.warn(`StubAPI: getConventionAccommodation("${e}")`),new Promise(o=>{o(this.accommodation.filter(d=>d.ConventionUUID===e))})}getConventionAdminLayout(e,o){return new Promise(d=>{d(this.adminLayouts.find(i=>i.Name===o))})}getConventionExtras(e){return console.warn(`StubAPI: getConventionExtras("${e}")`),new Promise(o=>{const d=this.conventions.flatMap(i=>i.ConventionUUID===e?i.Extras||[]:[]);d.forEach(i=>{var m;(m=i.Options)==null||m.forEach(u=>{var s,a;(((s=u.Choices)==null?void 0:s.length)||0)>(((a=u.Choices)==null?void 0:a.length)||0)&&(u.Choices=this.conventionTags.filter(v=>{var c;return(c=u.Choices)==null?void 0:c.find(f=>f.TagUUID===v.TagUUID)}))})}),o(d)})}getConventionInterests(e){return console.warn(`StubAPI: getConventionInterests("${e}")`),new Promise(o=>{o(this.conventions.flatMap(d=>d.ConventionUUID===e?d.Interests||[]:[]))})}getConventionList(e){return console.warn(`StubAPI: getConventionList("${e}")`),new Promise(o=>{o(this.conventions.filter(d=>d.OrganisationUUID===e))})}getInterestsByUUID(e,o){return console.warn(`StubAPI: getInterestsById(["${o.join('","')}"])`),new Promise(d=>{d(this.conventions.flatMap(i=>i.Interests||[]).filter(i=>o.includes(i.InterestUUID)))})}getLoginURLs(e){throw new Error("Method not implemented.")}getProfile(){throw new Error("Method not implemented.")}oAuthLogin(e,o,d,i,m){throw console.warn(`StubAPI: oAuthLogin("${e}", "${o}", "${d}", "${i}")`),new Error("Method not implemented.")}registerAccount(e,o){throw console.warn(`StubAPI: registerAccount("${e}", "${o}")`),new Error("Method not implemented.")}saveInterest(e){return console.warn(`StubAPI: saveInterest({${e}})`),new Promise((o,d)=>{const i=this.conventions.find(m=>m.ConventionUUID===e.ConventionUUID);if(!i)d("convention not found");else if(!i.Interests)i.Interests=[e];else{let m;(m=i.Interests.findIndex(u=>u.InterestUUID===e.InterestUUID))>-1&&i.Interests.splice(m,1),i.Interests.push(e)}o(e)})}saveExtras(e,o=!1,d=""){return console.warn(`StubAPI: saveExtras("${d}")`),this.saveCollection("Extras",e,o,d)}saveInterests(e,o=!1,d=""){return console.warn(`StubAPI: saveInterests("${d}")`),this.saveCollection("Interests",e,o,d)}saveTickets(e,o=!1,d=""){return console.warn(`StubAPI: saveTickets("${d}")`),this.saveCollection("Tickets",e,o,d)}saveCollection(e,o,d=!1,i=""){return console.warn(`StubAPI: saveCollection("${e}", [{${o.map(m=>m.Name)}.join("},{")}], ${d?"true":"false"}, "${i}")`),new Promise((m,u)=>{o.forEach(a=>{a.ConventionUUID===""&&(i!==""?a.ConventionUUID=i:u("missing convention id on interest and no default specified"))});const s=El(o,a=>a.ConventionUUID);Object.keys(s).forEach(a=>{const v=s[a],c=this.conventions.find(f=>f.ConventionUUID===a);c&&(d?c[e]=v:v.forEach(f=>{if(c[e]===void 0)c[e]=[f];else{const p=c[e].findIndex(V=>V.ConventionUUID===f.ConventionUUID);if(p&&p>=0){c[e][p]=f;return}c[e].push(f)}}))}),m(o)})}saveProfile(e,o,d){throw new Error("Method not implemented.")}validateAccount(e){throw console.warn(`StubAPI: validateAccount("${e}")`),new Error("Method not implemented.")}deleteExtra(e){return Promise.resolve(!1)}deleteField(e){return Promise.resolve(!1)}deleteForm(e){return Promise.resolve(!1)}deleteInterest(e){return Promise.resolve(!1)}deleteRoom(e){return Promise.resolve(!1)}deleteTicket(e){return Promise.resolve(!1)}getConventionFields(e){return Promise.resolve([])}getConventionForms(e){return Promise.resolve([])}getConventionTags(e){return Promise.resolve([])}getConventionTickets(e){return Promise.resolve([])}getConventionVenues(e){return Promise.resolve([])}getOrganisation(e){return Promise.resolve(void 0)}getOrganisationTags(e){return Promise.resolve([])}getOrganisations(){return Promise.resolve([])}getVenueRooms(e){return Promise.resolve([])}saveAccommodation(e){return Promise.resolve(void 0)}saveConvention(e){return Promise.resolve(void 0)}saveExtra(e){return Promise.resolve(void 0)}saveField(e){return Promise.resolve(void 0)}saveForm(e){return Promise.resolve(void 0)}saveOrganisation(e){return Promise.resolve(void 0)}saveRoom(e){return Promise.resolve(void 0)}saveTag(e){return Promise.resolve(void 0)}saveTicket(e){return Promise.resolve(void 0)}saveVenue(e){return Promise.resolve(void 0)}deleteAccommodation(e){return Promise.resolve(!1)}deleteVenue(e){return Promise.resolve(!1)}deleteConvention(e){return Promise.resolve(!1)}deleteOrganisation(e){return Promise.resolve(!1)}deleteSubmission(e){return Promise.resolve(!1)}getConventionSubmissions(e){return Promise.resolve(void 0)}getSubmission(e){return Promise.resolve(void 0)}getUserConventionSubmissions(e,o){return Promise.resolve(void 0)}getUserSubmissions(e){return Promise.resolve(void 0)}saveSubmission(e){return Promise.resolve(void 0)}};let Le=Ie;Ue(Le,"instance");var yt=(n=>(n.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",n.FORM_TYPE_BADGE="BADGE",n.FORM_TYPE_DEALER="DEALER",n.FORM_TYPE_REGISTRATION="REGISTRATION",n.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",n))(yt||{});const Al=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],wl=z({__name:"EditConventionExtraOptions",props:O({convention:{}},{modelValue:{}}),emits:O(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=C(Z(e.value)),d=()=>{e.value=o.value,r("close")};return(i,m)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(_,{icon:"",dark:"",onClick:m[0]||(m[0]=u=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Option Choice")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(_,{variant:"text",onClick:d},{default:l(()=>[D(" Apply ")]),_:1})]),_:1})]),_:1}),t(Te,{class:"pa-0"},{default:l(()=>[t(ee,null,{default:l(()=>[t(N,{label:T(B).formLabelName,type:"text",variant:"outlined",modelValue:o.value.Name,"onUpdate:modelValue":m[1]||(m[1]=u=>o.value.Name=u)},null,8,["label","modelValue"]),t(N,{label:T(B).formLabelDescription,type:"text",variant:"outlined",modelValue:o.value.Description,"onUpdate:modelValue":m[2]||(m[2]=u=>o.value.Description=u)},null,8,["label","modelValue"]),t(N,{label:T(B).formLabelPrice,type:"text",variant:"outlined","prepend-icon":T(B).currencyIcon,modelValue:o.value.Price,"onUpdate:modelValue":m[3]||(m[3]=u=>o.value.Price=u),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),o.value.Choices?(U(),y(Ve,{key:0,modelValue:o.value.Choices,"onUpdate:modelValue":m[4]||(m[4]=u=>o.value.Choices=u),convention:i.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):P("",!0)]),_:1})]),_:1})]),_:1}))}}),Ll=Y("h3",null,"Options",-1),Ol=z({__name:"EditConventionExtra",props:O({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=C(Z(r.value)),o=C(!1),d=C(0),i=J(),m=C([""]),u=C([]),s=C([]);n.convention&&(i.getConventionTags(n.convention.ConventionUUID).then(V=>{s.value=V.sort((I,g)=>I.Title.localeCompare(g.Title))}),i.getOrganisationTags(n.convention.OrganisationUUID).then(V=>{u.value=V.sort((I,g)=>I.Title.localeCompare(g.Title))}));const a=R(()=>[...u.value,...s.value]),v=({callback:V})=>{i.saveExtra(e.value).then(I=>{I?(r.value=I,V&&V("Extra Saved")):V&&V("Failed to Save Extra")}).catch(()=>{V&&V("Failed to Save Extra")})},c=V=>{var I;V.Options||(V.Options=[]),V.Options.push({ID:0,OptionUUID:K(),ExtraID:V.ID,ExtraUUID:V.ExtraUUID,Order:((I=V.Options)==null?void 0:I.length)+1,Name:"",Description:"",Price:0,Choices:[]})},f=(V,I)=>{V.Options&&V.Options.splice(I,1)},p=V=>{if(V.Choices&&V.Choices.length>0)return V.Choices.map(I=>{const g=a.value.find(x=>x.TagUUID===I.TagUUID);if(g)return g.Title}).join(", ")};return(V,I)=>(U(),b(E,null,[t(ee,{class:"px-0"},{default:l(()=>[t(N,{label:T(B).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":I[0]||(I[0]=g=>e.value.Name=g)},null,8,["label","modelValue"]),t(N,{label:T(B).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":I[1]||(I[1]=g=>e.value.Description=g)},null,8,["label","modelValue"]),t(Ve,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":I[2]||(I[2]=g=>e.value.AppliesTags=g),convention:V.convention,organisation:V.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),Ll,t(ze,{opened:m.value,"onUpdate:opened":I[3]||(I[3]=g=>m.value=g)},{default:l(()=>[(U(!0),b(E,null,H(e.value.Options,(g,x)=>(U(),b(E,{key:g.ID},[g?(U(),y(ue,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${g.Name} ${g.Price&&g.Price>0?`(${T(B).currencySymbol}${g.Price})`:""}`},{append:l(()=>[t(_,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:$=>f(e.value,x)},null,8,["onClick"]),t(_,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:$=>{o.value=!0,d.value=x}},null,8,["onClick"])]),default:l(()=>[g.Choices&&g.Choices.length>0?(U(),y(ne,{key:0},{default:l(()=>[D(" Options: "+L(p(g)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:1},8,["opened"]),t(_,{color:"primary",onClick:I[4]||(I[4]=g=>c(e.value))},{default:l(()=>[D("Add Option")]),_:1}),t(M,null,{default:l(()=>[t(h,{class:"text-right"},{default:l(()=>[t(_e,{onClick:v})]),_:1})]),_:1})]),_:1}),t(Se,{modelValue:o.value,"onUpdate:modelValue":I[7]||(I[7]=g=>o.value=g),scrollable:""},{default:l(()=>[t(wl,{modelValue:e.value.Options[d.value],"onUpdate:modelValue":I[5]||(I[5]=g=>e.value.Options[d.value]=g),convention:V.convention,onClose:I[6]||(I[6]=g=>o.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Rl=z({__name:"EditConventionExtras",props:O({convention:{}},{modelValue:{required:!0}}),emits:O(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{const u={ID:0,ExtraUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};o.saveExtra(u).then(s=>{s&&e.value.push(s)})},i=u=>{o.deleteExtra(e.value[u].ExtraUUID).then(s=>{s&&e.value.splice(u,1)})},m=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveExtra(e.value[s])})};return(u,s)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Extras")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(_,{variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})]),_:1})]),_:1}),t(Te,{class:"pa-0"},{default:l(()=>[t(ke,null,{default:l(()=>[(U(!0),b(E,null,H(e.value,(a,v)=>(U(),y(Ee,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:c})=>[t(_,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>{T(qe)(a,e.value),m(v,v-1)},["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>{T(Be)(a,e.value),m(v,v+1)},["stop"])},null,8,["onClick"]),D(" "+L(a.Name)+" ",1)]),_:2},1024),t(xe,{class:"px-0"},{default:l(()=>[t(Ol,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Nl=Y("h3",null,"Additional Purchases",-1),Ml=Y("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),ql=z({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=C([]),o=J(),d=C([""]),i=C(!1),m=s=>{if(s.Choices&&s.Choices.length>0)return s.Choices.map(a=>a.Title).join(", ")},u=()=>{i.value=!1};return o==null||o.getConventionExtras(r.value.ConventionUUID||"").then(s=>{s&&(e.value=s)}),(s,a)=>(U(),b(E,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[Nl]),_:1}),t(h,{class:"text-right"},{default:l(()=>[t(_,{color:"primary",onClick:a[0]||(a[0]=v=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ml,t(ze,{opened:d.value,"onUpdate:opened":a[1]||(a[1]=v=>d.value=v)},{default:l(()=>[(U(!0),b(E,null,H(e.value,v=>(U(),y(Je,{key:v.ID,value:v.ID},{activator:l(({props:c})=>[t(ue,ge(c,{"prepend-icon":"mdi:mdi-group",title:v.Name}),null,16,["title"])]),default:l(()=>[v.Options?(U(!0),b(E,{key:0},H(v.Options,c=>(U(),y(ue,{key:c.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${c.Name} ${c.Price&&c.Price>0?`(${T(B).currencySymbol}${c.Price})`:""}`},{default:l(()=>[c.Choices&&c.Choices.length>0?(U(),y(ne,{key:0},{default:l(()=>[D(" Options: "+L(m(c)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(Se,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=v=>i.value=v),scrollable:!0},{default:l(()=>[t(Rl,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=v=>e.value=v),convention:r.value,onClose:u},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Bl=z({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:O(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=J(),o=ft(),d=G(n,"modelValue"),i=C(Z(d.value)),m=C(`${o.GetConventionLogoURL(i.value.ConventionUUID)}?${new Date().getTime()}`),u=C(),s=C(),a=vt(),v=wt(),c=()=>{i.value=JSON.parse(JSON.stringify(d.value))},f=async()=>{var g;const I=new FormData((g=s.value)==null?void 0:g.$el);if(I.get("Image")&&I.get("Image").size>0)return I.set("ConventionUUID",i.value.ConventionUUID),await o.SaveConventionLogo(I)},p=()=>{f(),e.saveConvention(i.value).then(()=>{const I=d.value.Slug,g=i.value.Slug;d.value=i.value,I!==g&&v.push(`/dashboard/admin/${a.params.organisation.toString()}/convention/${i.value.Slug}`),r("close")})},V=()=>{m.value=URL.createObjectURL(u.value.files[0])};return(I,g)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(_,{icon:"",dark:"",onClick:g[0]||(g[0]=x=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Convention Settings")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(_,{variant:"text",onClick:c},{default:l(()=>[D(" Reset ")]),_:1}),t(_,{variant:"text",onClick:p},{default:l(()=>[D(" Save ")]),_:1})]),_:1})]),_:1}),t(Te,null,{default:l(()=>[t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(Tt,{class:"imgLogo mx-auto",src:m.value||""},null,8,["src"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(N,{label:T(B).formLabelName,name:"Name",variant:"outlined",modelValue:i.value.Name,"onUpdate:modelValue":g[1]||(g[1]=x=>i.value.Name=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(N,{label:T(B).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:i.value.Description,"onUpdate:modelValue":g[2]||(g[2]=x=>i.value.Description=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(N,{label:T(B).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:i.value.DetailLink,"onUpdate:modelValue":g[3]||(g[3]=x=>i.value.DetailLink=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(N,{label:T(B).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:i.value.Slug,"onUpdate:modelValue":g[4]||(g[4]=x=>i.value.Slug=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[t(dl,{ref_key:"conventionImageForm",ref:s,enctype:"multipart/form-data"},{default:l(()=>[t(ml,{label:T(B).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:u,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:V},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const zl=Y("h3",null,"General Details",-1),Yl=["href"],Gl=z({__name:"General",props:{modelValue:{required:!0}},emits:O(["refresh"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=ft(),d=R(()=>e.value.ConventionUUID?o.GetConventionLogoURL(e.value.ConventionUUID):""),i=C(!1),m=()=>{i.value=!1,r("refresh")};return(u,s)=>(U(),b(E,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[zl]),_:1}),t(h,{class:"text-right"},{default:l(()=>[t(_,{color:"primary",onClick:s[0]||(s[0]=a=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Y("p",null,[d.value?(U(),y(Tt,{key:0,src:d.value,title:e.value.Name},null,8,["src","title"])):P("",!0)]),Y("h3",null,L(e.value.Name),1),Y("p",null,L(e.value.Description),1),Y("p",null,[e.value.DetailLink?(U(),b("a",{key:0,href:e.value.DetailLink},"More Details",8,Yl)):P("",!0)]),t(Se,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=a=>i.value=a),scrollable:!0},{default:l(()=>[t(Bl,{onClose:m,modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value=a)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),Kl=z({__name:"EditConventionInterest",props:O({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=C(Z(r.value)),o=J(),d=({callback:i})=>{o.saveInterest(e.value).then(m=>{m?(r.value=m,i&&i("Interest Saved")):i&&i("Failed to Save Interest")}).catch(()=>{i&&i("Failed to Save Interest")})};return(i,m)=>(U(),y(ee,{class:"px-0"},{default:l(()=>[t(N,{label:T(B).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":m[0]||(m[0]=u=>e.value.Name=u)},null,8,["label","modelValue"]),t(Ze,{label:T(B).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":m[1]||(m[1]=u=>e.value.Description=u)},null,8,["label","modelValue"]),P("",!0),t(Ve,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":m[3]||(m[3]=u=>e.value.AppliesTags=u),convention:i.convention,organisation:i.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),t(M,null,{default:l(()=>[t(h,{class:"text-right"},{default:l(()=>[t(_e,{onClick:d})]),_:1})]),_:1})]),_:1}))}}),Hl=z({__name:"EditConventionInterests",props:O({convention:{}},{modelValue:{required:!0}}),emits:O(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{const u={ID:0,InterestUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};o.saveInterest(u).then(s=>{s&&e.value.push(s)})},i=u=>{o.deleteInterest(e.value[u].InterestUUID).then(s=>{s&&e.value.splice(u,1)})},m=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveInterest(e.value[s])})};return(u,s)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Interests")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(_,{variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})]),_:1})]),_:1}),t(Te,{class:"pa-0"},{default:l(()=>[t(ke,null,{default:l(()=>[(U(!0),b(E,null,H(e.value,(a,v)=>(U(),y(Ee,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:c})=>[t(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>{T(qe)(a,e.value),m(v,v-1)},["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>{T(Be)(a,e.value),m(v,v+1)},["stop"])},null,8,["onClick"]),D(" "+L(a.Name)+" ",1)]),_:2},1024),t(xe,{class:"px-0"},{default:l(()=>[t(Kl,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),jl=Y("h3",null,"Interests",-1),Xl=Y("p",null,"Attendees can tag themselves for particular things.",-1),Wl=z({__name:"Interests",props:{modelValue:{required:!0}},emits:O(["refresh"],["update:modelValue"]),setup(n){const r=G(n,"modelValue"),e=J(),o=C([]);e.getConventionInterests(r.value.ConventionUUID).then(m=>{Re(m),o.value=m});const d=C([""]),i=C(!1);return(m,u)=>(U(),b(E,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[jl]),_:1}),t(h,{class:"text-right"},{default:l(()=>[t(_,{color:"primary",onClick:u[0]||(u[0]=s=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Xl,t(ze,{opened:d.value,"onUpdate:opened":u[1]||(u[1]=s=>d.value=s)},{default:l(()=>[(U(!0),b(E,null,H(o.value,s=>(U(),y(ue,{key:s.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${s.Name} ${s.Price&&s.Price>0?`(${T(B).currencySymbol}${s.Price})`:""}`},{default:l(()=>[s.Description?(U(),y(ne,{key:0},{default:l(()=>[D(L(s.Description),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),t(Se,{modelValue:i.value,"onUpdate:modelValue":u[4]||(u[4]=s=>i.value=s),scrollable:!0},{default:l(()=>[t(Hl,{onClose:u[2]||(u[2]=s=>i.value=!1),convention:r.value,modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=s=>o.value=s)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),Ae=z({__name:"SelectTickets",props:O({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=d=>d.Type===F.TICKET_TYPE_GROUP?"mdi:mdi-group":d.Type===F.TICKET_TYPE_TICKET?d.RequiresAccommodation?"mdi:mdi-home":d.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":d.Type===F.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":d.Type===F.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",o=R(()=>n.tickets.map(d=>({title:d.Name,value:r.value.find(i=>i&&i.TicketUUID===d.TicketUUID)||d,props:{appendIcon:e(d)}})));return(d,i)=>(U(),b("div",null,[t(vl,{label:d.label,variant:d.variant||"filled",items:o.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=m=>r.value=m),hint:d.hint,chips:d.chips,clearable:d.clearable,multiple:"","persistent-hint":d.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),Jl=Y("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),Zl=z({__name:"EditConventionTicket",props:O({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=C(Z(r.value)),o=J(),d=R(()=>n.tickets.filter(a=>a.Type===F.TICKET_TYPE_TICKET)),i=R(()=>n.tickets.filter(a=>a.Type===F.TICKET_TYPE_ADD_ON)),m=R(()=>n.tickets.filter(a=>a.Type===F.TICKET_TYPE_TICKET_COMPONENT)),u=a=>n.accommodation.filter(v=>v.Costs.find(c=>c.DateStart===a.DateStart&&c.DateEnd===a.DateEnd)),s=({callback:a})=>{o.saveTicket(e.value).then(v=>{v?(e.value.ID=v.ID,e.value.TicketUUID=v.TicketUUID,r.value=e.value,a&&a("Ticket Saved")):a&&a("Failed to Save Ticket")}).catch(()=>{a&&a("Failed to Save Ticket")})};return(a,v)=>(U(),y(ee,{class:"px-0",fluid:""},{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(se,{label:"Ticket Type",variant:"outlined",modelValue:e.value.Type,"onUpdate:modelValue":v[0]||(v[0]=c=>e.value.Type=c),items:T(cl),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(N,{label:T(B).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":v[1]||(v[1]=c=>e.value.Name=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(N,{label:T(B).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":v[2]||(v[2]=c=>e.value.Description=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e.value.Type!==T(F).TICKET_TYPE_GROUP?(U(),b(E,{key:0},[t(h,{cols:"12"},{default:l(()=>[t(N,{label:T(B).formLabelDateStart,type:"date",variant:"outlined",modelValue:e.value.DateStart,"onUpdate:modelValue":v[3]||(v[3]=c=>e.value.DateStart=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(N,{label:T(B).formLabelDateEnd,type:"date",variant:"outlined",modelValue:e.value.DateEnd,"onUpdate:modelValue":v[4]||(v[4]=c=>e.value.DateEnd=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(N,{label:T(B).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":T(B).currencyIcon,modelValue:e.value.Price,"onUpdate:modelValue":v[5]||(v[5]=c=>e.value.Price=c),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(U(),y(h,{key:1,cols:"12"},{default:l(()=>[t(Ae,{label:"Tickets",variant:"outlined",tickets:d.value,modelValue:e.value.Tickets,"onUpdate:modelValue":v[6]||(v[6]=c=>e.value.Tickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),t(h,{cols:"12"},{default:l(()=>[t(Ve,{label:"Applied Tags",variant:"outlined",modelValue:e.value.AppliesTags,"onUpdate:modelValue":v[7]||(v[7]=c=>e.value.AppliesTags=c),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(Ve,{label:"Required Tags",variant:"outlined",modelValue:e.value.RequiredTags,"onUpdate:modelValue":v[8]||(v[8]=c=>e.value.RequiredTags=c),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e.value.Type===T(F).TICKET_TYPE_TICKET?(U(),b(E,{key:2},[t(h,{cols:"12"},{default:l(()=>[t(N,{label:"Components Required",type:"number",variant:"outlined",modelValue:e.value.ComponentsRequired,"onUpdate:modelValue":v[9]||(v[9]=c=>e.value.ComponentsRequired=c),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(Ae,{label:"Components",variant:"outlined",tickets:m.value,modelValue:e.value.TicketComponents,"onUpdate:modelValue":v[10]||(v[10]=c=>e.value.TicketComponents=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(Ae,{label:"Addons",variant:"outlined",tickets:i.value,modelValue:e.value.AddonTickets,"onUpdate:modelValue":v[11]||(v[11]=c=>e.value.AddonTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):P("",!0),t(h,{cols:"12"},{default:l(()=>[t(Ae,{label:"Disables Tickets",variant:"outlined",tickets:a.tickets,modelValue:e.value.DisablesTickets,"onUpdate:modelValue":v[12]||(v[12]=c=>e.value.DisablesTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),u(e.value).length?(U(),y(M,{key:0,class:"align-center",dense:!0},{default:l(()=>[t(h,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>[Jl]),_:1}),t(h,{class:"flex-grow-1"},{default:l(()=>[t(fl,null,{default:l(()=>[(U(!0),b(E,null,H(u(e.value),c=>(U(),y(pl,{key:c.ID,title:"Automatically calculated",disabled:!0},{default:l(()=>[D(L(c.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):P("",!0),t(M,null,{default:l(()=>[t(h,{class:"text-right"},{default:l(()=>[t(_e,{onClick:s})]),_:1})]),_:1})]),_:1}))}}),Ql={class:"pr-2"},en={class:"mb-2"},tn={key:0,class:"text-grey-darken-1 font-italic"},ln={key:1,class:"text-red"},nn={key:0,class:"text-grey-darken-1 font-italic"},on={key:1,class:"text-red"},an={key:0,class:"text-grey-darken-1 font-italic"},sn={key:1,class:"text-red"},un={class:"text-grey-darken-1"},rn=z({__name:"EditConventionTickets",props:O({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:O(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{e.value.push({ID:0,TicketUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Ticket",Type:F.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},i=u=>{o.deleteTicket(e.value[u].TicketUUID).then(s=>{s&&e.value.splice(u,1)})},m=u=>u.Type===F.TICKET_TYPE_GROUP?"mdi:mdi-group":u.Type===F.TICKET_TYPE_TICKET?u.RequiresAccommodation?"mdi:mdi-home":u.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":u.Type===F.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":u.Type===F.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(u,s)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Tickets")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(_,{variant:"text",onClick:d},{default:l(()=>[D(" Add Ticket ")]),_:1})]),_:1})]),_:1}),t(Te,{class:"pa-0"},{default:l(()=>[t(ke,null,{default:l(()=>[(U(!0),b(E,null,H(e.value,(a,v)=>(U(),y(Ee,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,{class:"py-2"},{actions:l(({expanded:c})=>[t(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>T(qe)(a,e.value),["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>T(Be)(a,e.value),["stop"])},null,8,["onClick"]),Y("div",Ql,[t(W,{icon:m(a)},null,8,["icon"])]),Y("div",null,[Y("p",en,[D(L(a.Name)+" ",1),a.Type===T(F).TICKET_TYPE_TICKET?(U(),b(E,{key:0},[e.value.find(c=>c.Type===T(F).TICKET_TYPE_GROUP&&c.Tickets.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),b("span",tn," ("+L(e.value.filter(c=>c.Type===T(F).TICKET_TYPE_GROUP&&c.Tickets.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),b("span",ln," (Ticket does not belong to any categories.) "))],64)):P("",!0),a.Type===T(F).TICKET_TYPE_ADD_ON?(U(),b(E,{key:1},[e.value.find(c=>c.Type===T(F).TICKET_TYPE_TICKET&&c.AddonTickets.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),b("span",nn," ("+L(e.value.filter(c=>c.Type===T(F).TICKET_TYPE_TICKET&&c.AddonTickets.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),b("span",on," (Ticket addon must be associated to at least one ticket.) "))],64)):P("",!0),a.Type===T(F).TICKET_TYPE_TICKET_COMPONENT?(U(),b(E,{key:2},[e.value.find(c=>c.Type===T(F).TICKET_TYPE_TICKET&&c.TicketComponents.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),b("span",an," ("+L(e.value.filter(c=>c.Type===T(F).TICKET_TYPE_TICKET&&c.TicketComponents.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),b("span",sn," (Component has not been assigned to any tickets.) "))],64)):P("",!0)]),Y("p",un,[a.Type===T(F).TICKET_TYPE_GROUP?(U(),b(E,{key:0},[D("Category")],64)):a.Type===T(F).TICKET_TYPE_TICKET?(U(),b(E,{key:1},[D(" Ticket "),a.ComponentsRequired>0?(U(),b(E,{key:0},[D(" ("+L(a.ComponentsRequired)+" component"+L(a.ComponentsRequired>1?"s":"")+" required) ",1)],64)):P("",!0)],64)):P("",!0),a.Type===T(F).TICKET_TYPE_TICKET_COMPONENT?(U(),b(E,{key:2},[D("Component")],64)):P("",!0),a.Type===T(F).TICKET_TYPE_ADD_ON?(U(),b(E,{key:3},[D("Addon")],64)):P("",!0)])])]),_:2},1024),t(xe,{class:"px-0"},{default:l(()=>[t(Zl,{accommodation:u.accommodation,convention:u.convention,tickets:e.value,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),dn=Y("h3",null,"Tickets",-1),mn=Y("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),cn=z({__name:"Tickets",props:{modelValue:{required:!0}},emits:O(["refresh"],["update:modelValue"]),setup(n){var c;const r=G(n,"modelValue"),e=J(),o=C([]),d=C([]);e.getConventionTickets(((c=r.value)==null?void 0:c.ConventionUUID)||"").then(f=>{Re(f),o.value=f});const i=C([""]),m=C(!1),u=f=>f.AddonTickets&&f.AddonTickets.map(p=>o.value&&o.value.find(V=>V.ID===p.ID)),s=f=>f.TicketComponents&&f.TicketComponents.map(p=>o.value&&o.value.find(V=>V.ID===p.ID)),a=f=>"",v=f=>d.value.filter(p=>p.Costs.find(V=>V.DateStart===f.DateStart&&V.DateEnd===f.DateEnd)).map(p=>p.Name).join(", ");return(f,p)=>(U(),b(E,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(h,null,{default:l(()=>[dn]),_:1}),t(h,{class:"text-right"},{default:l(()=>[t(_,{color:"primary",onClick:p[0]||(p[0]=V=>m.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),mn,t(ze,{opened:i.value,"onUpdate:opened":p[1]||(p[1]=V=>i.value=V)},{default:l(()=>[(U(!0),b(E,null,H(o.value.filter(V=>V.Type===T(F).TICKET_TYPE_GROUP),V=>(U(),y(Je,{key:V.ID,value:V.ID},{activator:l(({props:I})=>[t(ue,ge(I,{"prepend-icon":"mdi:mdi-group",title:V.Name}),null,16,["title"])]),default:l(()=>[(U(!0),b(E,null,H(o.value.filter(I=>V.Tickets.find(g=>g&&I&&g.TicketUUID===I.TicketUUID)),I=>(U(),b(E,{key:I.ID},[I.AddonTickets&&I.AddonTickets.length?(U(),y(Je,{key:0,value:I.ID},{activator:l(({props:g})=>[t(ue,ge(g,{"prepend-icon":I.RequiresAccommodation?"mdi:mdi-home":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${I.Name} ${I.Price>0?`(${T(B).currencySymbol}${I.Price})`:""}`}),{default:l(()=>[I.ComponentsRequired>0?(U(),y(ne,{key:0},{default:l(()=>[D(" Options: "+L(s(I).map(x=>x&&x.Name).join(", ")),1)]),_:2},1024)):P("",!0),I.RequiresAccommodation&&v(I)?(U(),y(ne,{key:1},{default:l(()=>[D(" Accommodation: "+L(v(I)),1)]),_:2},1024)):P("",!0)]),_:2},1040,["prepend-icon","title"])]),default:l(()=>[(U(!0),b(E,null,H(u(I),g=>(U(),b(E,{key:g},[g?(U(),y(ue,{key:0,title:`${g.Name} ${g.Price>0?`(${T(B).currencySymbol}${g.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:l(()=>[g.RequiredTags&&g.RequiredTags.length>0?(U(),y(ne,{key:0},{default:l(()=>[D(" Required Tags: "+L(g.RequiredTags.join(", ")),1)]),_:2},1024)):P("",!0),g.RequiredGroupMemberships&&g.RequiredGroupMemberships.length>0?(U(),y(ne,{key:1},{default:l(()=>[D(" Required Groups: "+L(a(g.RequiredGroupMemberships)),1)]),_:2},1024)):P("",!0),v(g)?(U(),y(ne,{key:2},{default:l(()=>[D(" Accommodation: "+L(v(g)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:2},1032,["value"])):(U(),y(ue,{key:1,"prepend-icon":I.RequiresAccommodation?"mdi:mdi-home":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${I.Name} ${I.Price>0?`(${T(B).currencySymbol}${I.Price})`:""}`},{default:l(()=>[I.ComponentsRequired>0?(U(),y(ne,{key:0},{default:l(()=>[D(" Options: "+L(s(I).map(g=>g&&g.Name).join(", ")),1)]),_:2},1024)):P("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(Se,{modelValue:m.value,"onUpdate:modelValue":p[4]||(p[4]=V=>m.value=V),scrollable:!0},{default:l(()=>[t(rn,{onClose:p[2]||(p[2]=V=>m.value=!1),modelValue:o.value,"onUpdate:modelValue":p[3]||(p[3]=V=>o.value=V),accommodation:d.value,convention:r.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),vn=(n,r)=>{const e=Ne(n,r),o=Ne(n,r,void 0,void 0,"item"),d=C(Z(o.value));return de(o,()=>{d.value=Z(o.value)}),{state:e,model:o,close:()=>{e.value=!1},reset:()=>{o.value=Z(d.value)},save:()=>{r("save")}}},fn=z({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(n,{emit:r}){const e=n,{state:o,model:d,close:i,reset:m,save:u}=vn(e,r);return(s,a)=>(U(),y(Qe,{modelValue:T(o),"onUpdate:modelValue":a[0]||(a[0]=v=>we(o)?o.value=v:null),onReset:T(m),onSave:T(u),title:s.title,color:"primary","card-class":s.cardClass},{toolbarButtons:l(()=>[he(s.$slots,"toolbarButtons")]),actions:l(()=>[t(_,{color:"blue-darken-1",variant:"text",onClick:T(i)},{default:l(()=>[D(" Cancel ")]),_:1},8,["onClick"]),t(_,{color:"blue-darken-1",variant:"text",onClick:T(m)},{default:l(()=>[D(" Reset ")]),_:1},8,["onClick"]),t(ae),t(_,{color:"blue-darken-1",variant:"text",onClick:T(u)},{default:l(()=>[D(" Save ")]),_:1},8,["onClick"])]),default:l(()=>[he(s.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Me=z({__name:"EditOrderedItems",props:O({closeable:{type:Boolean,default:!1},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:O(["add","save","close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=()=>{r("save"),r("close")},d=()=>{if(n.newItem){const a=n.newItem();a.Order=e.value.length+1,e.value.push(a)}else e.value.push({Order:e.value.length+1})},i=a=>{e.value.splice(a,1)},m=a=>{Be(a,e.value)},u=a=>{qe(a,e.value)},s=a=>n.labelParent&&a[n.labelParent]?a[n.labelParent][n.label]:a[n.label];return e.value.find(a=>a.Order===0)&&Re(e.value),e.value.find(a=>e.value.find(v=>v.Order===a.Order&&v!==a))&&Re(e.value),(a,v)=>(U(),y(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[a.closeable?(U(),y(_,{key:0,icon:"",dark:"",onClick:v[0]||(v[0]=c=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1})):P("",!0),t(me,null,{default:l(()=>[D(L(a.title),1)]),_:1}),t(ae),t(De,null,{default:l(()=>[a.newItem!==void 0?(U(),y(_,{key:0,variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})):P("",!0),a.showSave?(U(),y(_,{key:1,variant:"text",onClick:o},{default:l(()=>[D(" Save ")]),_:1})):P("",!0)]),_:1})]),_:1}),t(Te,{class:"pa-0"},{default:l(()=>[t(ke,null,{default:l(()=>[(U(!0),b(E,null,H(e.value,(c,f)=>(U(),y(Ee,{key:c.Order,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:p})=>[t(_,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:V=>i(f)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:p?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(p=>u(c),["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(p=>m(c),["stop"])},null,8,["onClick"]),he(a.$slots,`${a.slotNamePrefix}_${f}_title`,{},()=>[D(L(s(c)),1)])]),_:2},1024),t(xe,{class:"px-0"},{default:l(()=>[he(a.$slots,`${a.slotNamePrefix}_${f}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),pn={class:"pa-0 border-0 ma-0"},Un=Y("legend",{class:"mb-2"},"Field Settings",-1),In={class:"pa-0 border-0 ma-0"},gn=Y("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),Vn=z({__name:"EditFormField",props:O({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=J(),o=C([]),d=C([]),i=C(""),m=u=>{var s;r.value.Field=(s=d.value.find(a=>a.value===u))==null?void 0:s.field};return e.getConventionFields(n.convention.ConventionUUID).then(u=>{u&&(o.value=u,d.value=u.map(s=>({title:`${s.Label} (${(Zt.find(a=>a.value===s.Type)||{title:""}).title})`,value:s.FieldUUID,field:s})),m(r.value.FieldUUID))}),(u,s)=>(U(),y(M,null,{default:l(()=>[t(h,{cols:"12",md:"6"},{default:l(()=>[Y("fieldset",pn,[Un,t(M,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(se,{modelValue:r.value.FieldUUID,"onUpdate:modelValue":[s[0]||(s[0]=a=>r.value.FieldUUID=a),m],items:d.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(h,{cols:"6",sm:"4"},{default:l(()=>[t(N,{modelValue:r.value.MinLength,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value.MinLength=a),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"6",sm:"4"},{default:l(()=>[t(N,{modelValue:r.value.MaxLength,"onUpdate:modelValue":s[2]||(s[2]=a=>r.value.MaxLength=a),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",sm:"4"},{default:l(()=>[t(We,{modelValue:r.value.Required,"onUpdate:modelValue":s[3]||(s[3]=a=>r.value.Required=a),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),r.value.FieldUUID&&r.value.Field?(U(),y(h,{key:0,cols:"12",md:"6"},{default:l(()=>[Y("fieldset",In,[gn,r.value.Field?(U(),y(Qt,{key:0,field:r.value.Field,"persistent-hint":!0,required:r.value.Required,convention:u.convention,modelValue:i.value,"onUpdate:modelValue":s[4]||(s[4]=a=>i.value=a)},null,8,["field","required","convention","modelValue"])):P("",!0)])]),_:1})):P("",!0)]),_:1}))}}),Tn={class:"d-none d-sm-block"},Dn=z({__name:"EditFormSectionFields",props:O({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=()=>{var o;return{ID:0,SectionFieldUUID:K(),SectionID:r.value.ID,SectionUUID:r.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((o=r.value.Fields)==null?void 0:o.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(o,d)=>r.value.Fields!==void 0?(U(),y(Me,{key:0,modelValue:r.value.Fields,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value.Fields=i),closeable:!1,title:"Fields","new-item":e,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},Oe({_:2},[H(r.value.Fields,(i,m)=>({name:`field_${m}_title`,fn:l(()=>[i.Field?(U(),b(E,{key:0},[D(L(i.Field.Label)+" ("+L(i.Field.Name)+") ",1),Y("template",Tn,[D("  ["+L(i.Field.Type)+"] ",1)])],64)):(U(),b(E,{key:1},[D("New Field")],64))])})),H(r.value.Fields,(i,m)=>({name:`field_${m}`,fn:l(()=>[t(Vn,{modelValue:r.value.Fields[m],"onUpdate:modelValue":u=>r.value.Fields[m]=u,convention:o.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):P("",!0)}}),yn=z({__name:"EditFormSections",props:O({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=()=>{const o={ID:0,SectionUUID:K(),FormID:r.value.ID,FormUUID:r.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:K(),SectionID:0,SectionUUID:"",Edit:!0}};return o.State.SectionID=o.ID,o.State.SectionUUID=o.SectionUUID,o};return(o,d)=>(U(),y(Me,{modelValue:r.value.Sections,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value.Sections=i),"new-item":e,closeable:!1,title:"Sections","slot-name-prefix":"section"},Oe({_:2},[H(r.value.Sections,(i,m)=>({name:`section_${m}`,fn:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:i.Name,"onUpdate:modelValue":u=>i.Name=u,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:i.Heading,"onUpdate:modelValue":u=>i.Heading=u,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(M,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(Ze,{modelValue:i.Description,"onUpdate:modelValue":u=>i.Description=u,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i.Fields?(U(),y(Dn,{key:0,modelValue:r.value.Sections[m],"onUpdate:modelValue":u=>r.value.Sections[m]=u,convention:o.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):P("",!0)])}))]),1032,["modelValue"]))}}),hn=z({__name:"FormRendererPopup",props:O({convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:O(["update:form"],["update:modelValue"]),setup(n,{emit:r}){const e=n,{convention:o,title:d="",cardClass:i=""}=e,m=G(n,"modelValue"),u=Ne(e,r,void 0,void 0,"form"),s=C(Z(u.value));de(u,()=>{s.value=Z(u.value)});const a=()=>{m.value=!1};return(v,c)=>(U(),y(Qe,{modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=f=>m.value=f),title:T(d),color:"primary","card-class":T(i)},{toolbarButtons:l(()=>[he(v.$slots,"toolbarButtons")]),actions:l(()=>[t(_,{color:"blue-darken-1",variant:"text",onClick:a},{default:l(()=>[D(" Close ")]),_:1})]),default:l(()=>[t(Tl,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f),convention:T(o),preview:v.preview},null,8,["modelValue","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),Cn=Y("template",{class:"d-none d-sm-inline"},[D("Preview")],-1),bn=z({__name:"EditFormDialog",props:O({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:O(["update:form"],["update:modelValue"]),setup(n,{emit:r}){const e=n,{convention:o}=e,d=G(n,"modelValue"),i=J(),m=Ne(e,r,void 0,void 0,"form"),u=C(!1),s=C(Z(m.value));de(m,()=>{s.value=Z(m.value)});const a=()=>{i.saveForm(s.value).then(c=>{c&&(m.value=c,d.value=!1)})},v=()=>{u.value=!0};return(c,f)=>(U(),y(fn,{modelValue:d.value,"onUpdate:modelValue":f[11]||(f[11]=p=>d.value=p),item:s.value,"onUpdate:item":f[12]||(f[12]=p=>s.value=p),onSave:a,"card-class":"pa-0"},{toolbarButtons:l(()=>[t(Dl,null,{default:l(()=>[t(_,{"prepend-icon":"mdi:mdi-developer-board",onClick:v},{default:l(()=>[Cn]),_:1})]),_:1})]),default:l(()=>[t(ke,null,{default:l(()=>[t(Ee,{class:"mt-0"},{default:l(()=>[t(Pe,null,{default:l(()=>[D("General Settings")]),_:1}),t(xe,null,{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(ee,{class:"pa-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.Name,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value.Name=p),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.Heading,"onUpdate:modelValue":f[1]||(f[1]=p=>s.value.Heading=p),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"12"},{default:l(()=>[t(Ze,{modelValue:s.value.Description,"onUpdate:modelValue":f[2]||(f[2]=p=>s.value.Description=p),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:s.value.Type,"onUpdate:modelValue":f[3]||(f[3]=p=>s.value.Type=p),label:"Type",variant:"outlined",items:T(Al),"hide-details":""},null,8,["modelValue","items"])]),_:1}),t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.State.Stage,"onUpdate:modelValue":f[4]||(f[4]=p=>s.value.State.Stage=p),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),t(h,{cols:"6"},{default:l(()=>[t(We,{modelValue:s.value.State.New,"onUpdate:modelValue":f[5]||(f[5]=p=>s.value.State.New=p),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),t(h,{cols:"6"},{default:l(()=>[t(We,{modelValue:s.value.State.Edit,"onUpdate:modelValue":f[6]||(f[6]=p=>s.value.State.Edit=p),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(h,{cols:"12"},{default:l(()=>[t(Ve,{label:"Required Tags",variant:"outlined",modelValue:s.value.RequiredTags,"onUpdate:modelValue":f[7]||(f[7]=p=>s.value.RequiredTags=p),convention:T(o),organisation:T(o).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.value?(U(),y(yn,{key:0,modelValue:s.value,"onUpdate:modelValue":f[8]||(f[8]=p=>s.value=p),convention:T(o),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):P("",!0),u.value?(U(),y(hn,{key:1,modelValue:u.value,"onUpdate:modelValue":f[9]||(f[9]=p=>u.value=p),form:s.value,"onUpdate:form":f[10]||(f[10]=p=>s.value=p),convention:T(o),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):P("",!0)]),_:1},8,["modelValue","item"]))}}),_n=(n,r)=>{const e=C(!1),o=C(!1),d=C(n),i=C(-1),m=C(r),u=C(r),s=R(()=>i.value===-1?"New Form":"Edit Form"),a=()=>{d.value=n},v=g=>{i.value=d.value.indexOf(g),m.value=Object.assign({},g),e.value=!0},c=g=>{i.value=d.value.indexOf(g),m.value=Object.assign({},g),o.value=!0},f=()=>{o.value=!1,je(()=>{m.value=Object.assign({},u.value),i.value=-1}).then()},p=()=>{d.value.splice(i.value,1),f()},V=()=>{e.value=!1,je(()=>{m.value=Object.assign({},u.value),i.value=-1}).then()},I=()=>{i.value>-1?Object.assign(d.value[i.value],m.value):d.value.push(m.value),V()};return de(e,g=>{g||V()}),de(o,g=>{g||f()}),{collection:d,defaultItem:u,dialog:e,dialogDelete:o,editedItem:m,formTitle:s,reset:a,editItem:v,deleteItem:c,deleteItemConfirm:p,close:V,save:I}},Sn=z({__name:"FormEditor",props:{modelValue:{required:!0}},emits:O(["refresh"],["update:modelValue"]),setup(n){const r=G(n,"modelValue"),e=J(),o=C([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),d=C([]),i=C([]);e.getConventionFields(r.value.ConventionUUID).then($=>{d.value=$}),e.getConventionForms(r.value.ConventionUUID).then($=>{i.value=$});const m={ID:0,FormUUID:K(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,ParentID:0,ParentUUID:st,Name:"",Heading:"",Description:"",Type:yt.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:K(),FormID:0,FormUUID:st,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};m.State.FormUUID=m.FormUUID;const{collection:u,defaultItem:s,dialog:a,dialogDelete:v,editedItem:c,formTitle:f,editItem:p,deleteItem:V,deleteItemConfirm:I,save:g}=_n(i,m);u.value.forEach($=>{$.Sections.forEach(A=>{var S;(S=A.Fields)==null||S.forEach(q=>{q.Field=d.value.find(X=>X.ID===q.FieldID)})})});const x=$=>{e.deleteForm($.FormUUID).then(A=>{A&&V($)})};return($,A)=>(U(),y(T(Dt),{headers:o.value,items:T(u),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[t(oe,{color:"primary"},{default:l(()=>[t(me,null,{default:l(()=>[D("Form Editor")]),_:1}),t(Vt,{class:"mx-4",inset:!0,vertical:!0}),t(ae),t(_,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:A[0]||(A[0]=S=>{c.value=Object.assign({},T(s)),a.value=!0})},{default:l(()=>[D(" New Item ")]),_:1}),t(gl,{modelValue:T(v),"onUpdate:modelValue":A[1]||(A[1]=S=>we(v)?v.value=S:null),onDelete:T(I)},null,8,["modelValue","onDelete"])]),_:1}),T(a)?(U(),y(bn,{key:0,modelValue:T(a),"onUpdate:modelValue":A[2]||(A[2]=S=>we(a)?a.value=S:null),form:T(c),"onUpdate:form":[A[3]||(A[3]=S=>we(c)?c.value=S:null),T(g)],convention:r.value},null,8,["modelValue","form","onUpdate:form","convention"])):P("",!0)]),"item.actions":l(({item:S})=>[t(W,{size:"small",class:"me-2",onClick:q=>T(p)(S.raw)},{default:l(()=>[D(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(W,{size:"small",onClick:q=>x(S.raw)},{default:l(()=>[D(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}});var ht=(n=>(n.PANELS="PANELS",n.TABLE="TABLE",n))(ht||{});const kn=[{title:"Panel Layout",value:"PANELS"},{title:"Table Layout",value:"TABLE"}];var Ct=(n=>(n.FORM="FORM",n.META="META",n.USER="USER",n))(Ct||{});const En=[{title:"Form Field Submission Data",value:"FORM"},{title:"Miscellaneous Data",value:"META"},{title:"User Profile Data",value:"USER"}],Pn=[{title:"Submission Date",value:"SUBMISSION_DATE"},{title:"Submission Status",value:"SUBMISSION_STATUS"}],xn=[{title:"Display Name",value:"DISPLAY_NAME"},{title:"Handle",value:"HANDLE"},{title:"Avatar",value:"AVATAR"},{title:"First Name",value:"FIRST_NAME"},{title:"Last Name",value:"LAST_NAME"},{title:"Date of Birth",value:"DATE_OF_BIRTH"},{title:"Email Address",value:"EMAIL"},{title:"Telegram Username",value:"TELEGRAM"}],$n=z({__name:"EditAdminLayout",props:O({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=C(Z(n.layout)),o=C([]),d=J(),i=()=>{},m=()=>({ID:0,LayoutPanelUUID:K(),AdminLayoutID:e.value.ID,AdminLayoutUUID:e.value.AdminLayoutUUID,Name:"",Order:e.value.Panels.length+1,Items:[]}),u=a=>()=>({ID:0,LayoutItemUUID:K(),LayoutPanelID:a.ID,LayoutPanelUUID:a.LayoutPanelUUID,Label:"",SourceType:Ct.FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:a.Items.length+1}),s=a=>{const v=o.value.find(c=>c.value===a.SectionFieldUUID);v&&(a.SectionFieldID=v.object.ID,a.SectionField=v.object)};return d.getConventionForms(n.layout.ConventionUUID).then(a=>{a.forEach(v=>v.Sections.forEach(c=>c.Fields&&o.value.push(...c.Fields.map(f=>{var V;return{title:`${v.Name} - ${c.Name} - ${(V=f.Field)==null?void 0:V.Name}`,value:f.SectionFieldUUID,object:f}})))),o.value.sort(el("title"))}),(a,v)=>(U(),y(Qe,{modelValue:r.value,"onUpdate:modelValue":v[3]||(v[3]=c=>r.value=c),onSave:i,title:a.title,color:"primary"},{default:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:e.value.Name,"onUpdate:modelValue":v[0]||(v[0]=c=>e.value.Name=c),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(h,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:e.value.Type,"onUpdate:modelValue":v[1]||(v[1]=c=>e.value.Type=c),label:"Layout Type",items:T(kn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(Me,{modelValue:e.value.Panels,"onUpdate:modelValue":v[2]||(v[2]=c=>e.value.Panels=c),"new-item":m,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Oe({_:2},[H(e.value.Panels,(c,f)=>({name:`panel_${f}`,fn:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:c.Name,"onUpdate:modelValue":p=>c.Name=p,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Me,{modelValue:c.Items,"onUpdate:modelValue":p=>c.Items=p,"new-item":u(c),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Oe({_:2},[H(c.Items,(p,V)=>({name:`item_${V}`,fn:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:p.Label,"onUpdate:modelValue":I=>p.Label=I,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(M,null,{default:l(()=>[t(h,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:p.SourceType,"onUpdate:modelValue":I=>p.SourceType=I,label:"Source Type",items:T(En),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(h,{cols:"12",sm:"6"},{default:l(()=>[p.SourceType==="FORM"?(U(),y(se,{key:0,modelValue:p.SectionFieldUUID,"onUpdate:modelValue":I=>p.SectionFieldUUID=I,label:"Form Data",items:o.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:I=>s(p)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):p.SourceType==="META"?(U(),y(se,{key:1,modelValue:p.MetaField,"onUpdate:modelValue":I=>p.MetaField=I,label:"Miscellaneous Data",items:T(Pn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):p.SourceType==="USER"?(U(),y(se,{key:2,modelValue:p.UserField,"onUpdate:modelValue":I=>p.UserField=I,label:"User Profile Data",items:T(xn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):P("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),Fn=z({__name:"RegList",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=J(),o=Le.getInstance(),d=C({ID:0,AdminLayoutUUID:"",ConventionID:0,ConventionUUID:"",Name:"",Type:ht.PANELS,Panels:[]}),i=C([]),m=C([]),u=C([]),s=C(!1);return(async()=>{const v=await o.getConventionAdminLayout(r.value.ConventionUUID,"Registration Table");if(!v)return;const c=await e.getConventionSubmissions(r.value.ConventionUUID);if(!c)return;const f=await e.getConventionForms(r.value.ConventionUUID);f&&(d.value=v,m.value=c,i.value=f,d.value.Panels.forEach(p=>{p.Items.forEach(V=>{V.SectionField==null&&i.value.find(I=>{I.Sections.find(g=>{if(g.Fields){const x=g.Fields.find($=>$.SectionFieldUUID===V.SectionFieldUUID);if(x)return V.SectionField=x,!0}})})})}),d.value.Panels.length>0&&d.value.Panels.forEach(p=>{const V={name:p.Name,headers:[],items:[]};V.headers=d.value.Panels[0].Items.map(I=>{var g,x;return{key:I.LayoutItemUUID,title:I.Label||((x=(g=I.SectionField)==null?void 0:g.Field)==null?void 0:x.Label)||"",align:I.Align==="end"?"end":"start",sortable:!0}}),V.items=m.value.map(I=>{const g={};return V.headers.forEach(x=>{var A;const $=d.value.Panels[0].Items.find(S=>S.LayoutItemUUID===x.key);$&&$.SectionField&&(g[$.LayoutItemUUID]=((A=I.Data.find(S=>S.SectionFieldUUID===$.SectionFieldUUID))==null?void 0:A.Data)||"")}),g}),u.value.push(V)}))})(),(v,c)=>(U(),y(sl,null,{default:l(()=>[t(oe,{color:"primary"},{default:l(()=>[t(me,null,{default:l(()=>[D("Registration Manager")]),_:1}),t(Vt,{class:"mx-4",inset:!0,vertical:!0}),t(ae),t(_,{icon:"mdi:mdi-cog-outline",onClick:c[0]||(c[0]=f=>s.value=!0)})]),_:1}),(U(!0),b(E,null,H(u.value,f=>(U(),b(E,{key:f},[D(L(f.name)+" ",1),t(T(Dt),{headers:f.headers,items:f.items,"item-value":"LayoutItemUUID"},{"item.actions":l(({item:p})=>[t(W,{size:"small",class:"me-2"},{default:l(()=>[D(" mdi:mdi-pencil ")]),_:1})]),_:2},1032,["headers","items"])],64))),128)),s.value?(U(),y($n,{key:0,title:"Edit Layout",modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=f=>s.value=f),layout:d.value},null,8,["modelValue","layout"])):P("",!0)]),_:1}))}});const bt=Symbol.for("vuetify:v-tabs"),An=Ce({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Lt(tl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_t=be()({name:"VTab",props:An(),setup(n,r){let{slots:e,attrs:o}=r;const{textColorClasses:d,textColorStyles:i}=yl(n,"sliderColor"),m=R(()=>n.direction==="horizontal"),u=j(!1),s=C(),a=C();function v(c){var p,V;let{value:f}=c;if(u.value=f,f){const I=(V=(p=s.value)==null?void 0:p.$el.parentElement)==null?void 0:V.querySelector(".v-tab--selected .v-tab__slider"),g=a.value;if(!I||!g)return;const x=getComputedStyle(I).color,$=I.getBoundingClientRect(),A=g.getBoundingClientRect(),S=m.value?"x":"y",q=m.value?"X":"Y",X=m.value?"right":"bottom",te=m.value?"width":"height",fe=$[S],Ye=A[S],ie=fe>Ye?$[X]-A[X]:$[S]-A[S],Ge=Math.sign(ie)>0?m.value?"right":"bottom":Math.sign(ie)<0?m.value?"left":"top":"center",Q=(Math.abs(ie)+(Math.sign(ie)<0?$[te]:A[te]))/Math.max($[te],A[te]),ye=$[te]/A[te],Fe=1.5;ul(g,{backgroundColor:[x,""],transform:[`translate${q}(${ie}px) scale${q}(${ye})`,`translate${q}(${ie/Fe}px) scale${q}(${(Q-1)/Fe+1})`,""],transformOrigin:Array(3).fill(Ge)},{duration:225,easing:rl})}}return $e(()=>{const[c]=_.filterProps(n);return t(_,ge({symbol:bt,ref:s,class:["v-tab",n.class],style:n.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1,block:n.fixed,maxWidth:n.fixed?300:void 0,rounded:0},c,o,{"onGroup:selected":v}),{default:()=>{var f;return[((f=e.default)==null?void 0:f.call(e))??n.text,!n.hideSlider&&t("div",{ref:a,class:["v-tab__slider",d.value],style:i.value},null)]}})}),{}}});function dt(n){const e=Math.abs(n);return Math.sign(n)*(e/((1/.501-2)*(1-e)+1))}function mt(n){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,currentScrollOffset:i,isHorizontal:m}=n;const u=m?r.clientWidth:r.clientHeight,s=m?r.offsetLeft:r.offsetTop,a=d&&m?o-s-u:s,v=e+i,c=u+a,f=u*.4;return a<=i?i=Math.max(a-f,0):v<=c&&(i=Math.min(i-(v-c-f),o-e)),i}function wn(n){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,isHorizontal:i}=n;const m=i?r.clientWidth:r.clientHeight,u=i?r.offsetLeft:r.offsetTop,s=d&&i?o-u-m/2-e/2:u+m/2-e/2;return Math.min(o-e,Math.max(0,s))}const Ln=Symbol.for("vuetify:v-slide-group"),St=Ce({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Ln},nextIcon:{type:it,default:"$next"},prevIcon:{type:it,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...et(),...tt(),...ll({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ct=be()({name:"VSlideGroup",props:St(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const{isRtl:o}=pt(),{mobile:d}=Ot(),i=gt(n,n.symbol),m=j(!1),u=j(0),s=j(0),a=j(0),v=R(()=>n.direction==="horizontal"),{resizeRef:c,contentRect:f}=rt(),{resizeRef:p,contentRect:V}=rt(),I=R(()=>i.selected.value.length?i.items.value.findIndex(k=>k.id===i.selected.value[0]):-1),g=R(()=>i.selected.value.length?i.items.value.findIndex(k=>k.id===i.selected.value[i.selected.value.length-1]):-1);if(Rt){let k=-1;de(()=>[i.selected.value,f.value,V.value,v.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(f.value&&V.value){const w=v.value?"width":"height";s.value=f.value[w],a.value=V.value[w],m.value=s.value+1<a.value}if(I.value>=0&&p.value){const w=p.value.children[g.value];I.value===0||!m.value?u.value=0:n.centerActive?u.value=wn({selectedElement:w,containerSize:s.value,contentSize:a.value,isRtl:o.value,isHorizontal:v.value}):m.value&&(u.value=mt({selectedElement:w,containerSize:s.value,contentSize:a.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value}))}})})}const x=j(!1);let $=0,A=0;function S(k){const w=v.value?"clientX":"clientY";A=(o.value&&v.value?-1:1)*u.value,$=k.touches[0][w],x.value=!0}function q(k){if(!m.value)return;const w=v.value?"clientX":"clientY",le=o.value&&v.value?-1:1;u.value=le*(A+$-k.touches[0][w])}function X(k){const w=a.value-s.value;u.value<0||!m.value?u.value=0:u.value>=w&&(u.value=w),x.value=!1}function te(){c.value&&(c.value[v.value?"scrollLeft":"scrollTop"]=0)}const fe=j(!1);function Ye(k){if(fe.value=!0,!(!m.value||!p.value)){for(const w of k.composedPath())for(const le of p.value.children)if(le===w){u.value=mt({selectedElement:le,containerSize:s.value,contentSize:a.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value});return}}}function ie(k){fe.value=!1}function Ge(k){var w;!fe.value&&!(k.relatedTarget&&((w=p.value)!=null&&w.contains(k.relatedTarget)))&&Q()}function lt(k){p.value&&(v.value?k.key==="ArrowRight"?Q(o.value?"prev":"next"):k.key==="ArrowLeft"&&Q(o.value?"next":"prev"):k.key==="ArrowDown"?Q("next"):k.key==="ArrowUp"&&Q("prev"),k.key==="Home"?Q("first"):k.key==="End"&&Q("last"))}function Q(k){var w,le,nt,ot,at;if(p.value)if(!k)(w=Nt(p.value)[0])==null||w.focus();else if(k==="next"){const pe=(le=p.value.querySelector(":focus"))==null?void 0:le.nextElementSibling;pe?pe.focus():Q("first")}else if(k==="prev"){const pe=(nt=p.value.querySelector(":focus"))==null?void 0:nt.previousElementSibling;pe?pe.focus():Q("last")}else k==="first"?(ot=p.value.firstElementChild)==null||ot.focus():k==="last"&&((at=p.value.lastElementChild)==null||at.focus())}function ye(k){const w=u.value+(k==="prev"?-1:1)*s.value;u.value=Mt(w,0,a.value-s.value)}const Fe=R(()=>{let k=u.value>a.value-s.value?-(a.value-s.value)+dt(a.value-s.value-u.value):-u.value;u.value<=0&&(k=dt(-u.value));const w=o.value&&v.value?-1:1;return{transform:`translate${v.value?"X":"Y"}(${w*k}px)`,transition:x.value?"none":"",willChange:x.value?"transform":""}}),Ke=R(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),He=R(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return m.value||Math.abs(u.value)>0;case"mobile":return d.value||m.value||Math.abs(u.value)>0;default:return!d.value&&(m.value||Math.abs(u.value)>0)}}),xt=R(()=>Math.abs(u.value)>0),$t=R(()=>a.value>Math.abs(u.value)+s.value);return $e(()=>t(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!v.value,"v-slide-group--has-affixes":He.value,"v-slide-group--is-overflowing":m.value},n.class],style:n.style,tabindex:fe.value||i.selected.value.length?-1:0,onFocus:Ge},{default:()=>{var k,w,le;return[He.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!xt.value}],onClick:()=>ye("prev")},[((k=e.prev)==null?void 0:k.call(e,Ke.value))??t(ut,null,{default:()=>[t(W,{icon:o.value?n.nextIcon:n.prevIcon},null)]})]),t("div",{key:"container",ref:c,class:"v-slide-group__container",onScroll:te},[t("div",{ref:p,class:"v-slide-group__content",style:Fe.value,onTouchstartPassive:S,onTouchmovePassive:q,onTouchendPassive:X,onFocusin:Ye,onFocusout:ie,onKeydown:lt},[(w=e.default)==null?void 0:w.call(e,Ke.value)])]),He.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!$t.value}],onClick:()=>ye("next")},[((le=e.next)==null?void 0:le.call(e,Ke.value))??t(ut,null,{default:()=>[t(W,{icon:o.value?n.prevIcon:n.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:ye,scrollOffset:u,focus:Q}}});function On(n){return n?n.map(r=>typeof r=="string"?{title:r,value:r}:r):[]}const Rn=Ce({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...St({mandatory:"force"}),...nl(),...tt()},"VTabs"),Nn=be()({name:"VTabs",props:Rn(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const o=qt(n,"modelValue"),d=R(()=>On(n.items)),{densityClasses:i}=ol(n),{backgroundColorClasses:m,backgroundColorStyles:u}=hl(ce(n,"bgColor"));return Bt({VTab:{color:ce(n,"color"),direction:ce(n,"direction"),stacked:ce(n,"stacked"),fixed:ce(n,"fixedTabs"),sliderColor:ce(n,"sliderColor"),hideSlider:ce(n,"hideSlider")}}),$e(()=>{const[s]=ct.filterProps(n);return t(ct,ge(s,{modelValue:o.value,"onUpdate:modelValue":a=>o.value=a,class:["v-tabs",`v-tabs--${n.direction}`,`v-tabs--align-tabs-${n.alignTabs}`,{"v-tabs--fixed-tabs":n.fixedTabs,"v-tabs--grow":n.grow,"v-tabs--stacked":n.stacked},i.value,m.value,n.class],style:[{"--v-tabs-height":Xe(n.height)},u.value,n.style],role:"tablist",symbol:bt}),{default:()=>[e.default?e.default():d.value.map(a=>t(_t,ge(a,{key:a.title}),null))]})}),{}}});const Mn=n=>{const{touchstartX:r,touchendX:e,touchstartY:o,touchendY:d}=n,i=.5,m=16;n.offsetX=e-r,n.offsetY=d-o,Math.abs(n.offsetY)<i*Math.abs(n.offsetX)&&(n.left&&e<r-m&&n.left(n),n.right&&e>r+m&&n.right(n)),Math.abs(n.offsetX)<i*Math.abs(n.offsetY)&&(n.up&&d<o-m&&n.up(n),n.down&&d>o+m&&n.down(n))};function qn(n,r){var o;const e=n.changedTouches[0];r.touchstartX=e.clientX,r.touchstartY=e.clientY,(o=r.start)==null||o.call(r,{originalEvent:n,...r})}function Bn(n,r){var o;const e=n.changedTouches[0];r.touchendX=e.clientX,r.touchendY=e.clientY,(o=r.end)==null||o.call(r,{originalEvent:n,...r}),Mn(r)}function zn(n,r){var o;const e=n.changedTouches[0];r.touchmoveX=e.clientX,r.touchmoveY=e.clientY,(o=r.move)==null||o.call(r,{originalEvent:n,...r})}function Yn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:e=>qn(e,r),touchend:e=>Bn(e,r),touchmove:e=>zn(e,r)}}function Gn(n,r){var u;const e=r.value,o=e!=null&&e.parent?n.parentElement:n,d=(e==null?void 0:e.options)??{passive:!0},i=(u=r.instance)==null?void 0:u.$.uid;if(!o||!i)return;const m=Yn(r.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=m,Ut(m).forEach(s=>{o.addEventListener(s,m[s],d)})}function Kn(n,r){var i,m;const e=(i=r.value)!=null&&i.parent?n.parentElement:n,o=(m=r.instance)==null?void 0:m.$.uid;if(!(e!=null&&e._touchHandlers)||!o)return;const d=e._touchHandlers[o];Ut(d).forEach(u=>{e.removeEventListener(u,d[u])}),delete e._touchHandlers[o]}const kt={mounted:Gn,unmounted:Kn},Hn=kt,Et=Symbol.for("vuetify:v-window"),Pt=Symbol.for("vuetify:v-window-group"),jn=Ce({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...et(),...tt(),...zt()},"VWindow"),Xn=be()({name:"VWindow",directives:{Touch:kt},props:jn(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const{themeClasses:o}=Yt(n),{isRtl:d}=pt(),{t:i}=Gt(),m=gt(n,Pt),u=C(),s=R(()=>d.value?!n.reverse:n.reverse),a=j(!1),v=R(()=>{const S=n.direction==="vertical"?"y":"x",X=(s.value?!a.value:a.value)?"-reverse":"";return`v-window-${S}${X}-transition`}),c=j(0),f=C(void 0),p=R(()=>m.items.value.findIndex(S=>m.selected.value.includes(S.id)));de(p,(S,q)=>{const X=m.items.value.length,te=X-1;X<=2?a.value=S<q:S===te&&q===0?a.value=!0:S===0&&q===te?a.value=!1:a.value=S<q}),Kt(Et,{transition:v,isReversed:a,transitionCount:c,transitionHeight:f,rootRef:u});const V=R(()=>n.continuous||p.value!==0),I=R(()=>n.continuous||p.value!==m.items.value.length-1);function g(){V.value&&m.prev()}function x(){I.value&&m.next()}const $=R(()=>{const S=[],q={icon:d.value?n.nextIcon:n.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:m.prev,ariaLabel:i("$vuetify.carousel.prev")};S.push(V.value?e.prev?e.prev({props:q}):t(_,q,null):t("div",null,null));const X={icon:d.value?n.prevIcon:n.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:m.next,ariaLabel:i("$vuetify.carousel.next")};return S.push(I.value?e.next?e.next({props:X}):t(_,X,null):t("div",null,null)),S}),A=R(()=>n.touch===!1?n.touch:{...{left:()=>{s.value?g():x()},right:()=>{s.value?x():g()},start:q=>{let{originalEvent:X}=q;X.stopPropagation()}},...n.touch===!0?{}:n.touch});return $e(()=>It(t(n.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},o.value,n.class],style:n.style},{default:()=>{var S,q;return[t("div",{class:"v-window__container",style:{height:f.value}},[(S=e.default)==null?void 0:S.call(e,{group:m}),n.showArrows!==!1&&t("div",{class:"v-window__controls"},[$.value])]),(q=e.additional)==null?void 0:q.call(e,{group:m})]}}),[[Ht("touch"),A.value]])),{group:m}}}),Wn=Ce({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...et(),...al(),...Cl()},"VWindowItem"),Jn=be()({name:"VWindowItem",directives:{Touch:Hn},props:Wn(),emits:{"group:selected":n=>!0},setup(n,r){let{slots:e}=r;const o=jt(Et),d=il(n,Pt),{isBooted:i}=_l();if(!o||!d)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const m=j(!1),u=R(()=>i.value&&(o.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function s(){!m.value||!o||(m.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function a(){var V;m.value||!o||(m.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Xe((V=o.rootRef.value)==null?void 0:V.clientHeight)),o.transitionCount.value+=1)}function v(){s()}function c(V){m.value&&je(()=>{!u.value||!m.value||!o||(o.transitionHeight.value=Xe(V.clientHeight))})}const f=R(()=>{const V=o.isReversed.value?n.reverseTransition:n.transition;return u.value?{name:typeof V!="string"?o.transition.value:V,onBeforeEnter:a,onAfterEnter:s,onEnterCancelled:v,onBeforeLeave:a,onAfterLeave:s,onLeaveCancelled:v,onEnter:c}:!1}),{hasContent:p}=bl(n,d.isSelected);return $e(()=>t(Sl,{transition:f.value,disabled:!i.value},{default:()=>{var V;return[It(t("div",{class:["v-window-item",d.selectedClass.value,n.class],style:n.style},[p.value&&((V=e.default)==null?void 0:V.call(e))]),[[Xt,d.isSelected.value]])]}})),{}}}),Mo=z({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(n,{emit:r}){const e=vt(),o=Wt.getInstance(),d=C({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),i=C(),m=C([]);de(i,()=>{m.value.find(a=>a.id===i.value&&a.title==="General")&&u()});const u=()=>{o==null||o.getConvention(e.params.convention.toString()).then(s=>{s?(d.value=s,r("pageTitle",`Convention Editor - ${d.value.Name}`)):r("pageTitle","Convention Editor - New Convention")})};return m.value=[{id:K(),title:"General",component:j(Gl),model:d},{id:K(),title:"Accommodation",component:j(Il),model:d},{id:K(),title:"Additional Purchases",component:j(ql),model:d},{id:K(),title:"Fields",component:j(Vl),model:d},{id:K(),title:"Forms",component:j(Sn),model:d},{id:K(),title:"Interests",component:j(Wl),model:d},{id:K(),title:"Registrations",component:j(Fn),model:d},{id:K(),title:"Tickets",component:j(cn),model:d},{id:K(),title:"Venues",component:j(Ul),model:d}],r("pageTitle","Convention Editor"),u(),(s,a)=>d.value?(U(),b(E,{key:0},[t(oe,{color:"blue-darken-4"},{default:l(()=>[t(Nn,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=v=>i.value=v),"show-arrows":""},{default:l(()=>[(U(!0),b(E,null,H(m.value,v=>(U(),y(_t,{key:v.id,value:v.id},{default:l(()=>[D(L(v.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Xn,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=v=>i.value=v)},{default:l(()=>[(U(!0),b(E,null,H(m.value,v=>(U(),y(Jn,{key:v.id,value:v.id},{default:l(()=>[v.id===i.value?(U(),y(ve,{key:0,class:"pa-2"},{default:l(()=>[(U(),y(Jt(v.component),{modelValue:v.model,"onUpdate:modelValue":c=>v.model=c},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(U(),b(E,{key:1},[D(" Convention Not Found ")],64))}});export{Mo as default};
