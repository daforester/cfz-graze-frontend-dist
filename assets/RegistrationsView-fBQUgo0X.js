import{p as ct,d as ft,c as He,t as Re,a0 as vt,a1 as Ut,f as e,F as B,m as Xe,i as ue,M as ae,N as fe,r as T,n as u,B as V,q as E,v as t,y as M,x,Q as oe,A as N,P as ye,D as G,C as S,a2 as pt,k as Ze,w as pe,G as La,H as wa,_ as Na,Z as Ke,a3 as Fa,a4 as Pa,O as ea,U as $a,a5 as gt,b as Tt,E as Ya,z as aa,V as yt}from"./index-D5mmRHTR.js";import{_ as _t,D as It,a as Dt,b as At,c as St,d as Et,e as bt,f as ht,g as Vt,h as Rt,A as ce,i as kt,P as Ct,j as Sa,L as Ot,M as Mt,U as Lt,k as Y,l as Ce,u as wt,m as Nt,n as J}from"./useTokenManager-tt8J-r30.js";import{d as Ft,b as Ga,c as Pt}from"./FormRenderer.vue_vue_type_style_index_0_lang-GcC7ijAo.js";import{F as ie,a as $t}from"./form-0fJbSFPv.js";import{b as Yt,c as Ba,d as Ea,S as Gt}from"./submission-40fey8Hx.js";import{G as fa}from"./group-7fhbY6WJ.js";import{C as va}from"./canDo-yWCfI_4r.js";import{_ as Ua}from"./ModelDialog.vue_vue_type_script_setup_true_lang-OJtZaVej.js";import{a as Pe,c as xa,V as pa,b as Bt}from"./VList-KIeAWoVE.js";import{V as Q}from"./VBtn-rdS5lROB.js";import{V as xt}from"./VAvatar-WSCH3toI.js";import{s as qt}from"./sortSubmissions-NKScr9xj.js";import{V as da,a as Ht}from"./scopeId-36lxKlMl.js";import{u as qa}from"./VCheckboxBtn-zi59nfoZ.js";import{b as Ha,c as Ka,_ as za,d as ke,V as Ja,a as ma}from"./VWindowItem-H45wv0w9.js";import{u as Kt,P as zt}from"./useDisplayTransactions-syBDexyT.js";import{G as ta}from"./userData-QYtcK0Js.js";import{a as ga,V as Ta,c as la,e as ze,d as Jt}from"./VCard-i8T9d1aE.js";import{V as Z,a as h}from"./VRow-XlwVPSau.js";import{_ as ca,b as Qt}from"./SaveButton.vue_vue_type_script_setup_true_lang-hVOA7QIZ.js";import{V as ee}from"./VSelect-1FQt1Od3.js";import{u as jt,V as Qa,a as re}from"./VContainer-9TGMTfPR.js";import{V as Wt,a as Xt}from"./VAlert-UQ4qzzV8.js";import{V as qe}from"./VCheckbox-GF6sNOGJ.js";import{S as Zt}from"./setupLogin-qyG1C0Ln.js";import{m as el,e as al,f as tl,g as ll,h as ol,i as nl,j as sl,u as il,p as ul,k as rl,l as dl,n as ml,o as cl,q as fl,r as vl,s as ba,t as ha,v as Va,_ as Ul,V as pl,a as gl,b as Tl,c as yl,w as _l}from"./VDataTable-eV28VNCG.js";import{_ as Il}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-GY94EK39.js";import{V as X}from"./VTextField--cSoDXvw.js";import{v as Te}from"./v4-yQnnJER4.js";import{V as ja}from"./VDialog-ch8GZfti.js";import{c as Dl}from"./copyToClipboard-aCoRGJiH.js";import{V as Al}from"./forwardRefs-17_Eu96_.js";import{u as We}from"./nil-rxyd0N8M.js";import{V as Ra,a as Sl}from"./VTable-mIqhc-tJ.js";import{V as ka,a as El}from"./VToolbar-3K2xJ1Sk.js";import"./canEditRegistrations-A1ez9bSf.js";import"./VAutocomplete-25hjliVP.js";import"./VChip-81vgRRgY.js";import"./VDivider-owgJKfvf.js";import"./VTextarea-SWtf3pW0.js";import"./VForm-h814H9Ke.js";import"./VNavigationDrawer-qYsexcm-.js";import"./index-OKsbKlsK.js";import"./VFileInput-tQ_-MthG.js";import"./createSimpleFunctional-tO58eGx8.js";import"./VToolbarItems-BN3UdJJ6.js";const bl=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),hl=c=>c===void 0?!1:va(c,fa.GROUP_TYPE_SYSTEM).ManageUsers,ra=c=>`${c.charAt(0).toUpperCase()}${c.slice(1)}`,Vl=ct({itemsLength:{type:[Number,String],required:!0},...el(),...al(),...tl()},"VDataTableServer"),Rl=ft()({name:"VDataTableServer",props:Vl(),emits:{"update:modelValue":c=>!0,"update:page":c=>!0,"update:itemsPerPage":c=>!0,"update:sortBy":c=>!0,"update:options":c=>!0,"update:expanded":c=>!0,"update:groupBy":c=>!0},setup(c,L){let{attrs:v,slots:r}=L;const{groupBy:f}=ll(c),{sortBy:_,multiSort:U,mustSort:a}=ol(c),{page:i,itemsPerPage:d}=nl(c),k=He(()=>parseInt(c.itemsLength,10)),{columns:I,headers:D}=sl(c,{groupBy:f,showSelect:Re(c,"showSelect"),showExpand:Re(c,"showExpand")}),{items:A}=il(c,I),{toggleSort:q}=ul({sortBy:_,multiSort:U,mustSort:a,page:i}),{opened:j,isGroupOpen:w,toggleGroup:g,extractRows:s}=rl({groupBy:f,sortBy:_}),{pageCount:y,setItemsPerPage:o}=dl({page:i,itemsPerPage:d,itemsLength:k}),{flatItems:F}=ml(A,f,j),{isSelected:te,select:de,selectAll:b,toggleSelect:ge,someSelected:_e,allSelected:$e}=cl(c,{allItems:A,currentPage:A}),{isExpanded:Ie,toggleExpand:Ye}=fl(c),Oe=He(()=>s(A.value));vl({page:i,itemsPerPage:d,sortBy:_,groupBy:f,search:Re(c,"search")}),vt("v-data-table",{toggleSort:q,sortBy:_}),Ut({VDataTableRows:{hideNoData:Re(c,"hideNoData"),noDataText:Re(c,"noDataText"),loading:Re(c,"loading"),loadingText:Re(c,"loadingText")}});const ne=He(()=>({page:i.value,itemsPerPage:d.value,sortBy:_.value,pageCount:y.value,toggleSort:q,setItemsPerPage:o,someSelected:_e.value,allSelected:$e.value,isSelected:te,select:de,selectAll:b,toggleSelect:ge,isExpanded:Ie,toggleExpand:Ye,isGroupOpen:w,toggleGroup:g,items:Oe.value.map(Ge=>Ge.raw),internalItems:Oe.value,groupedItems:F.value,columns:I.value,headers:D.value}));jt(()=>{const Ge=ba.filterProps(c),Me=ha.filterProps(c),Le=Va.filterProps(c),we=Ra.filterProps(c);return e(Ra,Xe({class:["v-data-table",{"v-data-table--loading":c.loading},c.class],style:c.style},we),{top:()=>{var me;return(me=r.top)==null?void 0:me.call(r,ne.value)},default:()=>{var me,De,Ae,Se,Ee,se;return r.default?r.default(ne.value):e(B,null,[(me=r.colgroup)==null?void 0:me.call(r,ne.value),e("thead",{class:"v-data-table__thead",role:"rowgroup"},[e(ha,Xe(Me,{sticky:c.fixedHeader}),r)]),(De=r.thead)==null?void 0:De.call(r,ne.value),e("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Ae=r["body.prepend"])==null?void 0:Ae.call(r,ne.value),r.body?r.body(ne.value):e(Va,Xe(v,Le,{items:F.value}),r),(Se=r["body.append"])==null?void 0:Se.call(r,ne.value)]),(Ee=r.tbody)==null?void 0:Ee.call(r,ne.value),(se=r.tfoot)==null?void 0:se.call(r,ne.value)])},bottom:()=>r.bottom?r.bottom(ne.value):e(ba,Ge,{prepend:r["footer.prepend"]})})})}}),kl=ue({__name:"DataTableItemPanel",props:ae({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ae(["openActions","showForm"],["update:modelValue"]),setup(c,{emit:L}){const v=L,r=fe(c,"modelValue"),f=T(),_=ye(),U=T(),a=T(!1),i=I=>{const D={AdminLayoutUUID:I.AdminLayoutUUID,Limit:1,RegistrationUUID:r.value.RegistrationUUID};_.searchConventionRegistrations(r.value.ConventionUUID,D).then(A=>{A&&A.Total>0&&(f.value=A.Registrations[0],U.value=I,a.value=!0)})},d=I=>{v("openActions",I)},k=(I,D,A)=>{v("showForm",I,D,A)};return(I,D)=>(u(),V("div",null,[I.layouts?(u(),E(pa,{key:0},{default:t(()=>[(u(!0),V(B,null,oe(I.layouts,A=>(u(),E(Pe,{key:A.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:t(()=>[e(xa,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:t(()=>[e(Q,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:q=>i(A)},{default:t(()=>[x(M(A.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):N("",!0),a.value&&U.value&&f.value?(u(),E(Ua,{key:1,modelValue:a.value,"onUpdate:modelValue":D[2]||(D[2]=A=>a.value=A),"hide-extension":!0,fullscreen:!0,title:`#${f.value.Reference} ${f.value.User.DisplayName} - ${U.value.Name} `,scrollable:!0,"card-class":"pa-0","card-style":"margin-bottom: -52px"},{default:t(()=>[e(_t,{accommodations:I.accommodations,convention:I.convention,extras:I.extras,forms:I.forms,interests:I.interests,tickets:I.tickets,venues:I.venues,layout:U.value,"onUpdate:layout":D[0]||(D[0]=A=>U.value=A),modelValue:f.value,"onUpdate:modelValue":D[1]||(D[1]=A=>f.value=A),onOpenActions:d,onShowForm:k},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):N("",!0)]))}}),Cl={class:"text-grey-lighten-1"},Ol={key:0,class:"mb-2"},Ml=G("strong",null,"Email",-1),Ll=G("br",null,null,-1),wl={key:1,class:"mb-2"},Nl=G("strong",null,"Telegram",-1),Fl=G("br",null,null,-1),Pl={key:0,class:"text-blue text-center"},$l={key:1,class:"text-red text-center"},Yl={key:2,class:"text-orange text-center"},Gl={key:3,class:"text-orange text-center"},Bl={key:4,class:"text-orange text-center"},xl={key:5,class:"text-orange text-center"},ql={key:6,class:"text-green text-center"},Hl={key:0},Kl={key:0},zl=G("strong",null,"Total:",-1),Jl=ue({__name:"RegListRow",props:ae({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ae(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(c,{emit:L}){const v=L,r=fe(c,"modelValue"),f=(a,i)=>{v("showForm",{registration:a,form:i})},_=a=>{v("openActions",a)},U=a=>{v("switchUser",a)};return(a,i)=>a.header.type==="ACCOMMODATION"&&a.accommodations.length>0&&a.item.raw[a.header.key]?(u(),E(It,{key:0,value:a.item.raw[a.header.key].Data,accommodations:a.accommodations,convention:a.convention,forms:a.forms,tickets:a.tickets,venues:a.venues,registration:a.item.raw[a.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):a.header.type==="EXTRAS"&&a.extras.length>0?(u(),E(Dt,{key:1,value:a.item.raw[a.header.key],extras:a.extras},null,8,["value","extras"])):a.header.type==="INTERESTS"&&a.interests.length>0?(u(),E(At,{key:2,value:a.item.raw[a.header.key],interests:a.interests},null,8,["value","interests"])):a.header.type==="TICKET"&&a.tickets.length>0?(u(),E(St,{key:3,value:a.item.raw[a.header.key],tickets:a.tickets},null,8,["value","tickets"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(u(),E(Et,{key:4,convention:a.convention,"show-controls":!1,modelValue:a.item.raw.registration,"onUpdate:modelValue":i[0]||(i[0]=d=>a.item.raw.registration=d)},null,8,["convention","modelValue"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(u(),V(B,{key:5},[G("ul",null,[(u(!0),V(B,null,oe(a.forms.filter(d=>d.Type===S(ie).FORM_TYPE_ADMIN&&a.item.raw[a.header.key].findIndex(k=>k.Form.ID===d.ID)<0),d=>(u(),V("li",{key:d.Heading},[G("strong",Cl,M(d.Heading),1),e(Q,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:k=>f(a.item.raw.registration,d)},null,8,["onClick"])]))),128))]),G("ul",null,[(u(!0),V(B,null,oe(a.item.raw[a.header.key],d=>(u(),V("li",{key:d.Heading},[G("strong",null,[x(M(d.Heading),1),d.Form.Type!==S(ie).FORM_TYPE_ADMIN?(u(),V(B,{key:0},[x(": ")],64)):N("",!0)]),d.Form.Type!==S(ie).FORM_TYPE_ADMIN?(u(),V("span",{key:0,class:pt(S(Yt)(d.Submission.Status))},M(S(Ba)(d.Submission.Status)),3)):N("",!0),e(Q,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:k=>f(d.Registration,d.Form)},null,8,["onClick"])]))),128))])],64)):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(u(),E(xt,{key:6,class:"rounded-circle",src:a.item.raw[a.header.key],height:"32",width:"32"},null,8,["src"])):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(u(),V(B,{key:7},[a.item.raw[a.header.key].email?(u(),V("p",Ol,[Ml,Ll,x(M(a.item.raw[a.header.key].email),1)])):N("",!0),a.item.raw[a.header.key].telegram?(u(),V("p",wl,[Nl,Fl,x(M(a.item.raw[a.header.key].telegram),1)])):N("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(u(),V(B,{key:8},[a.item.raw[a.header.key]=="NOT_REQUIRED"?(u(),V("div",Pl,"No Payment Requested")):a.item.raw[a.header.key]=="MISSING_REQUIRED"?(u(),V("div",$l,"Partner Payment Not Requested")):a.item.raw[a.header.key]=="AWAITING_PARTNER"?(u(),V("div",Yl,"Awaiting Partner Payment")):a.item.raw[a.header.key]=="ALL_REQUIRED"?(u(),V("div",Gl,"Awaiting Payments")):a.item.raw[a.header.key]=="REQUIRED"?(u(),V("div",Bl,"Awaiting Payment")):a.item.raw[a.header.key]=="ADDITIONAL_REQUIRED"?(u(),V("div",xl,"Awaiting Additional Payments")):(u(),V("div",ql,"Completed"))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(u(),V(B,{key:9},[e(Q,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:i[1]||(i[1]=d=>_(a.item.raw[a.header.key]))}),S(hl)(a.user)?(u(),E(Q,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:i[2]||(i[2]=d=>U(a.item.raw[a.header.key]))})):N("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(u(),V(B,{key:10},[a.item.raw[a.header.key].length===1?(u(),V("em",Hl," Not in a group ")):(u(),V(B,{key:1},[G("ul",null,[(u(!0),V(B,null,oe(a.item.raw[a.header.key],d=>(u(),V("li",{key:d.UUID,class:"ml-0"},[x(" #"+M(d.Reference)+" : "+M(d.Name)+" ",1),d.IsLeader?(u(),V("strong",Kl,"(Leader)")):N("",!0)]))),128))]),zl,x(" "+M(a.item.raw[a.header.key].length),1)],64))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(u(),V(B,{key:11},[r.value.registration?(u(),E(kl,{key:0,accommodations:a.accommodations,convention:a.convention,extras:a.extras,forms:a.forms,interests:a.interests,tickets:a.tickets,venues:a.venues,layouts:a.item.raw[a.header.key].Layouts,modelValue:r.value.registration,"onUpdate:modelValue":i[3]||(i[3]=d=>r.value.registration=d),onOpenActions:_,onShowForm:f},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):N("",!0)],64)):(u(),V(B,{key:12},[x(M(a.item.raw[a.header.key]),1)],64))}}),Ca=ue({__name:"RegistrationActionTabs",props:ae({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const L=c,v=fe(c,"modelValue");return(r,f)=>(u(),E(Ha,Xe({modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=_=>v.value=_)},L),{default:t(()=>[(u(!0),V(B,null,oe(r.tabs,_=>(u(),E(Ka,{value:_.value,key:_.value},{default:t(()=>[x(M(_.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),Ql=(c=void 0,L)=>c===void 0?!1:va(c,fa.GROUP_TYPE_CONVENTION,L.ConventionUUID,L).EditPaymentTransactions,oa=c=>(La("data-v-8af8174d"),c=c(),wa(),c),jl={class:"mb-4"},Wl={class:"v-row"},Xl={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Zl={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},eo={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ao={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},to=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),lo={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},oo=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),no={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},so=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),io={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},uo=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ro={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},mo=ue({__name:"PaymentActions",props:ae({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const L=T(!1),v=T(),r=T([]),f=T(new Date().getTime()),_=T(!1),U=fe(c,"modelValue"),a=T(Ze(U.value));pe(U,()=>{a.value=Ze(U.value)});const i=ye();i.getConvention(U.value.ConventionUUID).then(D=>{D&&(_.value=Ql(ta(),D))});const d=()=>{i.generateRegistrationCharges(U.value.RegistrationUUID,!1).then(D=>{D&&(r.value=D.PaymentTransactions,v.value=D.Registration,f.value=new Date().getTime())}).catch(()=>{})};d();const k=()=>{i.generateRegistrationCharges(U.value.RegistrationUUID,!0).then(D=>{D&&(r.value=D.PaymentTransactions,v.value=D.Registration,f.value=new Date().getTime())})},{totalCharges:I}=Kt();return(D,A)=>(u(),E(ze,null,{default:t(()=>[e(Ta,null,{default:t(()=>[e(ga,null,{default:t(()=>[x(" Payments (#"+M(U.value.Reference)+" "+M(U.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),e(la,null,{default:t(()=>[v.value?(u(),V(B,{key:0},[G("h3",jl,"#"+M(v.value.Reference)+" "+M(v.value.User.DisplayName),1),G("dl",Wl,[(u(!0),V(B,null,oe(r.value,q=>(u(),V(B,{key:q.PaymentTransactionUUID},[q.Type===S(zt).PAYMENT_TRANSACTION_TYPE_CHARGE?(u(),V("dt",Xl,[G("div",Zl,M(q.Description.split(":")[0])+": ",1),G("div",eo,M(q.Description.split(":")[1]),1)])):N("",!0),G("dd",ao," £"+M(q.Amount),1)],64))),128)),to,G("dd",lo," £"+M(S(I)(r.value)),1),oo,G("dd",no," £"+M(v.value.Total),1),so,G("dd",io," £"+M(v.value.Paid),1),uo,G("dd",ro," £"+M(v.value.Total-v.value.Paid),1)]),e(Z,{class:"flex-row-reverse"},{default:t(()=>[e(h,{class:"text-right"},{default:t(()=>[e(Q,{color:"primary",onClick:k},{default:t(()=>[x("Apply Charges")]),_:1})]),_:1}),!L.value&&_.value?(u(),E(h,{key:0},{default:t(()=>[e(Q,{color:"secondary",onClick:A[0]||(A[0]=q=>L.value=!0)},{default:t(()=>[x("Transaction Entry")]),_:1})]),_:1})):N("",!0)]),_:1})],64)):N("",!0),e(bt,{"can-edit":_.value,registration:U.value,"show-editor":L.value,onCloseEditor:A[1]||(A[1]=q=>L.value=!1),updated:f.value,onChange:d},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),co=Na(mo,[["__scopeId","data-v-8af8174d"]]),fo=ue({__name:"RegistrationFormStatus",props:ae({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const L=ye(),v=fe(c,"modelValue"),r=(f,_)=>{const U=v.value.Submissions.find(a=>a.SubmissionUUID==_);if(!U){f&&f("Submission not found");return}L.setSubmissionStatus(_,U.Status).then(a=>{a?(v.value.Submissions.forEach((i,d)=>{v.value.Submissions[d].Status=i.Status}),f&&f("Status Saved")):f&&f("Status not saved")}).catch(()=>{f&&f("Status not saved")})};return(f,_)=>(u(),E(ze,null,{default:t(()=>[e(Ta,null,{default:t(()=>[e(ga,null,{default:t(()=>[x("Status (#"+M(v.value.Reference)+" "+M(v.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(la,null,{default:t(()=>[e(pa,null,{default:t(()=>[(u(!0),V(B,null,oe(v.value.Submissions,U=>(u(),E(Pe,{key:U.SubmissionUUID,class:"pa-0"},{default:t(()=>[e(Z,{class:"py-2 align-center"},{default:t(()=>[e(h,{cols:"9",sm:"10",md:"10",lg:"9"},{default:t(()=>{var a;return[e(ee,{modelValue:U.Status,"onUpdate:modelValue":i=>U.Status=i,items:S(Ea),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((a=f.forms.find(i=>i.FormUUID==U.FormUUID))==null?void 0:a.Name)||""},{selection:t(()=>[e(Qa,{class:"mr-4 d-none d-sm-inline"},{default:t(()=>{var i;return[x(M((i=S(Ea).find(d=>d.value===U.Status))==null?void 0:i.icon),1)]}),_:2},1024),x(" "+M(S(Ba)(U.Status)),1)]),item:t(({item:i,props:{onClick:d}})=>[e(Pe,{title:i.title,"prepend-icon":i.raw.icon,onClick:d},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),e(h,{cols:"3",sm:"2",md:"2",lg:"1"},{default:t(()=>[e(ca,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:a=>r(a.callback,U.SubmissionUUID)},null,8,["onClick"]),e(ca,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:a=>r(a.callback,U.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),vo=c=>(La("data-v-7d39acf0"),c=c(),wa(),c),Uo=vo(()=>G("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),po={class:"mb-4"},go=ue({__name:"RegistrationTags",props:ae({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const L=ye(),v=fe(c,"modelValue"),r=T(Ze(v.value)),f=T(!1),_=T(r.value.Tags);pe(v,()=>{r.value=Ze(v.value)});const U=({callback:a})=>{const i=[],d=[];r.value.Tags.forEach(k=>{_.value.find(D=>D.TagUUID===k.TagUUID)||i.push(k.TagUUID)}),_.value.forEach(k=>{r.value.Tags.find(D=>k.TagUUID===D.TagUUID)||d.push(k.TagUUID)}),L.updateRegistrationTags(i,d,r.value.RegistrationUUID).then(k=>{k?a&&(a("Tags Saved"),v.value.Tags=k.Tags):a&&a("Error Saving Tags")}).catch(()=>{a&&a("Error Saving Tags")})};return(a,i)=>(u(),E(ze,null,{default:t(()=>[e(Ta,null,{default:t(()=>[e(ga,null,{default:t(()=>[x("Tags (#"+M(r.value.Reference)+" "+M(r.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(la,null,{default:t(()=>[e(Wt,{class:"my-4"},{default:t(()=>[e(Xt,null,{default:t(()=>[x("Caution")]),_:1}),Uo]),_:1}),G("h3",po,"#"+M(r.value.Reference)+" "+M(r.value.User.DisplayName),1),e(za,{modelValue:r.value.Tags,"onUpdate:modelValue":i[0]||(i[0]=d=>r.value.Tags=d),convention:r.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":f.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),e(Jt,{class:"px-4 align-start"},{default:t(()=>[e(qe,{label:"Show UUID",modelValue:f.value,"onUpdate:modelValue":i[1]||(i[1]=d=>f.value=d)},null,8,["modelValue"]),e(ca,{onClick:U,variant:"flat"})]),_:1})]),_:1}))}}),To=Na(go,[["__scopeId","data-v-7d39acf0"]]),Oa=ue({__name:"RegistrationActionWindows",props:ae({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ae(["update:registration"],["update:modelValue"]),setup(c,{emit:L}){const v=c,r=fe(c,"modelValue"),_=qa(v,L,void 0,void 0,"registration");return(U,a)=>(u(),E(Ja,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=i=>r.value=i),disabled:!0,touch:!1},{default:t(()=>[e(ke,{value:"badges"},{default:t(()=>[r.value=="badges"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(ht,{convention:U.convention,registration:S(_)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),e(ke,{value:"emails"},{default:t(()=>[r.value=="emails"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Vt,{registration:S(_)},null,8,["registration"])]),_:1})):N("",!0)]),_:1}),e(ke,{value:"notes"},{default:t(()=>[r.value=="notes"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Rt,{convention:U.convention,expanded:!1,registration:S(_)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),e(ke,{value:"payments"},{default:t(()=>[r.value=="payments"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(co,{modelValue:S(_),"onUpdate:modelValue":a[0]||(a[0]=i=>Ke(_)?_.value=i:null),forms:U.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),e(ke,{value:"status"},{default:t(()=>[r.value=="status"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(fo,{modelValue:S(_),"onUpdate:modelValue":a[1]||(a[1]=i=>Ke(_)?_.value=i:null),forms:U.forms},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),e(ke,{value:"tags"},{default:t(()=>[r.value=="tags"?(u(),E(re,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(To,{modelValue:S(_),"onUpdate:modelValue":a[2]||(a[2]=i=>Ke(_)?_.value=i:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):N("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),yo=(c,L)=>c===void 0?!1:va(c,fa.GROUP_TYPE_CONVENTION,L.ConventionUUID,L).ViewPaymentTransactions,_o={key:0},Io={key:1},Ma=ue({__name:"RegistrationActions",props:ae({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ae(["update:registration"],["update:modelValue"]),setup(c,{emit:L}){const v=c,r=fe(c,"modelValue"),_=qa(v,L,void 0,void 0,"registration"),U=T("notes"),a=ta(),i=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return yo(a,v.convention)&&i.splice(2,0,{label:"Payments",value:"payments"}),(d,k)=>d.useDialog?(u(),V("div",_o,[e(Ua,{modelValue:r.value,"onUpdate:modelValue":k[3]||(k[3]=I=>r.value=I),title:d.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:t(()=>[e(Ca,{modelValue:U.value,"onUpdate:modelValue":k[0]||(k[0]=I=>U.value=I),tabs:i,"show-arrows":!0},null,8,["modelValue"])]),default:t(()=>[e(Oa,{modelValue:U.value,"onUpdate:modelValue":k[1]||(k[1]=I=>U.value=I),registration:S(_),"onUpdate:registration":k[2]||(k[2]=I=>Ke(_)?_.value=I:null),accommodations:d.accommodations,convention:d.convention,extras:d.extras,forms:d.forms,interests:d.interests,tabs:i,tickets:d.tickets,venues:d.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(u(),V("div",Io,[e(Ca,{modelValue:U.value,"onUpdate:modelValue":k[4]||(k[4]=I=>U.value=I),tabs:i,"show-arrows":!0},null,8,["modelValue"]),e(Oa,{modelValue:U.value,"onUpdate:modelValue":k[5]||(k[5]=I=>U.value=I),registration:S(_),"onUpdate:registration":k[6]||(k[6]=I=>Ke(_)?_.value=I:null),accommodations:d.accommodations,convention:d.convention,extras:d.extras,forms:d.forms,interests:d.interests,tabs:i,tickets:d.tickets,venues:d.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Do=(c,L=500,v=!1)=>{let r;return(...f)=>{const U=function(){r=void 0,v||c.apply(void 0,f)},a=v&&!r;clearTimeout(r),r=setTimeout(U,L),a&&c.apply(void 0,f)}},Wa=(c,L)=>{c.forEach(v=>{v.Items.forEach(r=>{(r.SectionField==null||r.SectionField.Field==null)&&L.find(f=>{f.Sections.find(_=>{if(_.Fields){const U=_.Fields.find(a=>a.SectionFieldUUID===r.SectionFieldUUID);if(U)return r.SectionField=U,!0}})})})})},Ao={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},So={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Eo={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},bo={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},ho={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Vo={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Ro={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},ko={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Co={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Oo={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Mo={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Lo={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},wo={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},No={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Fo={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Po={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},$o={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Yo={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Go={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Bo={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},xo={red:Ao,pink:So,purple:Eo,deepPurple:bo,indigo:ho,blue:Vo,lightBlue:Ro,cyan:ko,teal:Co,green:Oo,lightGreen:Mo,lime:Lo,yellow:wo,amber:No,orange:Fo,deepOrange:Po,brown:$o,blueGrey:Yo,grey:Go,shades:Bo},qo=G("h4",null,"Grid Size (Max 12)",-1),Ho={key:0,class:"text-warning text-right pl-1"},Ko=ue({__name:"EditAdminLayout",props:ae({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ae(["change","delete"],["update:modelValue"]),setup(c,{emit:L}){const v=fe(c,"modelValue"),r=T([]),f=ye(),_=L,U=T(Object.assign({},...c.layouts.map(w=>w.Panels.map(g=>g.Items.map(s=>{if(!s.Meta)return{};const y={};return Object.entries(s.Meta).forEach(o=>{Array.isArray(o[1])?(y[`${s.LayoutItemUUID}.${o[0]}`]=[],o[1].forEach(F=>{y[`${s.LayoutItemUUID}.${o[0]}`].push(F.toString())})):o[1]!==void 0&&o[1]!==null&&(y[`${s.LayoutItemUUID}.${o[0]}`]=[o[1].toString()])}),y}))).flat(2))),a=T(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),i=T(!1),d=T([]);f.getConventionTags(c.convention.ConventionUUID).then(w=>{w&&(d.value=w)}).catch(()=>{});const k=()=>({ID:0,LayoutPanelUUID:Te(),AdminLayoutID:v.value.ID,AdminLayoutUUID:v.value.AdminLayoutUUID,Name:"",Order:v.value.Panels.length+1,Items:[],PanelStyle:Sa.PANEL_STYLE_FLEX,RequiredFormType:ie.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),I=w=>()=>({ID:0,LayoutItemUUID:Te(),LayoutPanelID:w.ID,LayoutPanelUUID:w.LayoutPanelUUID,Label:"",SourceType:Ce.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:w.Items.length+1,DefaultSort:!1,Meta:{}}),D=(w,g)=>{w.Meta[g]=U.value[`${w.LayoutItemUUID}.${g}`]},A=w=>{const g=r.value.find(s=>s.value===w.SectionFieldUUID);g&&(w.SectionFieldID=g.object.ID,w.SectionField=g.object)};f.getConventionForms(v.value.ConventionUUID).then(w=>{w&&(w.forEach(g=>g.Sections.forEach(s=>s.Fields&&r.value.push(...s.Fields.map(y=>{var F;return{title:`${g.Name} - ${s.Name} - ${(F=y.Field)==null?void 0:F.Name}`,value:y.SectionFieldUUID,object:y}})))),r.value.sort(Ft("title")),Wa(v.value.Panels,w))});const q=He(()=>{switch(v.value.Type){case ce.ADMIN_LAYOUT_PANELS:return"Panels";case ce.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});pe(v,()=>{_("change")},{deep:!0});const j=He(()=>{const w=/([a-zA-Z]+)(\d+)/;return Object.entries(xo).map(([g,s])=>Object.entries(s).map(([y,o])=>{const F=w.exec(y);return!F||F.length<3?void 0:{Title:`${ra(g).split(/(?=[A-Z])/).join(" ")} ${ra(F[1])} ${ra(F[2])}`,CSSName:`${g}-${F[1]}-${F[2]}`,Value:o}})).flat().filter(g=>!!g).sort((g,s)=>g.Title>s.Title?1:g.Title==s.Title?0:-1)});return(w,g)=>(u(),E(re,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(Z,null,{default:t(()=>[e(h,{cols:"12",sm:"6"},{default:t(()=>[e(X,{modelValue:v.value.Name,"onUpdate:modelValue":g[0]||(g[0]=s=>v.value.Name=s),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(h,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:v.value.Type,"onUpdate:modelValue":g[1]||(g[1]=s=>v.value.Type=s),label:"Layout Type",items:S(kt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),v.value.Type==S(ce).ADMIN_LAYOUT_PANELS?(u(),E(h,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:v.value.RunnerLayoutUUID,"onUpdate:modelValue":g[2]||(g[2]=s=>v.value.RunnerLayoutUUID=s),clearable:!0,items:w.layouts.filter(s=>s.Type===S(ce).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):N("",!0)]),_:1}),e(Z,null,{default:t(()=>[e(h,null,{default:t(()=>[e(ma,{modelValue:v.value.Panels,"onUpdate:modelValue":g[3]||(g[3]=s=>v.value.Panels=s),"new-item":k,closeable:!1,title:q.value,label:"Name","slot-name-prefix":"panel"},ea({_:2},[oe(v.value.Panels,(s,y)=>({name:`panel_${y}`,fn:t(()=>[e(re,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(Z,null,{default:t(()=>[e(h,{cols:"12",sm:"6"},{default:t(()=>[e(X,{modelValue:s.Name,"onUpdate:modelValue":o=>s.Name=o,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),v.value.Type===S(ce).ADMIN_LAYOUT_PANELS?(u(),E(h,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:s.PanelStyle,"onUpdate:modelValue":o=>s.PanelStyle=o,items:S(Ct),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):N("",!0),e(h,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:s.RequiredFormType,"onUpdate:modelValue":o=>s.RequiredFormType=o,items:S($t),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:t(()=>[e(Ul,{label:"Required Groups",variant:"outlined",modelValue:s.RequiredGroupMemberships,"onUpdate:modelValue":o=>s.RequiredGroupMemberships=o,convention:v.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:t(()=>[e(za,{label:"Registration Tags",variant:"outlined",modelValue:s.RequiredRegistrationTags,"onUpdate:modelValue":o=>s.RequiredRegistrationTags=o,convention:v.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),v.value.Type===S(ce).ADMIN_LAYOUT_PANELS&&s.PanelStyle===S(Sa).PANEL_STYLE_FLEX?(u(),E(Z,{key:0},{default:t(()=>[e(h,{cols:"12",class:"py-0 my-0"},{default:t(()=>[qo]),_:1}),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols,"onUpdate:modelValue":o=>s.Meta.cols=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols_xs,"onUpdate:modelValue":o=>s.Meta.cols_xs=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols_sm,"onUpdate:modelValue":o=>s.Meta.cols_sm=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols_md,"onUpdate:modelValue":o=>s.Meta.cols_md=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols_lg,"onUpdate:modelValue":o=>s.Meta.cols_lg=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(X,{modelValue:s.Meta.cols_xl,"onUpdate:modelValue":o=>s.Meta.cols_xl=o,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:2},1024),e(ma,{modelValue:s.Items,"onUpdate:modelValue":o=>s.Items=o,"new-item":I(s),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},ea({_:2},[oe(s.Items,(o,F)=>({name:`item_${F}`,fn:t(()=>[e(re,{class:"px-0 mx-0",fluid:!0},{default:t(()=>{var te,de;return[e(Z,null,{default:t(()=>[e(h,{cols:"12",sm:"6"},{default:t(()=>[e(X,{modelValue:o.Label,"onUpdate:modelValue":b=>o.Label=b,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(Z,null,{default:t(()=>[e(h,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:o.SourceType,"onUpdate:modelValue":b=>o.SourceType=b,label:"Source Type",items:S(Ot),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:t(()=>[o.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(u(),E(ee,{key:0,modelValue:o.SectionFieldUUID,"onUpdate:modelValue":b=>o.SectionFieldUUID=b,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:b=>A(o)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):o.SourceType==="LAYOUT_ITEM_SOURCE_META"?(u(),E(ee,{key:1,modelValue:o.MetaField,"onUpdate:modelValue":b=>o.MetaField=b,label:"Miscellaneous Data",items:S(Mt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):o.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(u(),E(ee,{key:2,modelValue:o.UserField,"onUpdate:modelValue":b=>o.UserField=b,label:"User Profile Data",items:S(Lt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):N("",!0)]),_:2},1024)]),_:2},1024),w.layouts&&o.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((de=(te=o.SectionField)==null?void 0:te.Field)==null?void 0:de.Type)===S(Ga).TEXT?(u(),E(Z,{key:0},{default:t(()=>[e(h,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(qe,{modelValue:o.Meta.DirectEdit,"onUpdate:modelValue":b=>o.Meta.DirectEdit=b,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(ee,{modelValue:o.Meta.DirectEditPermission,"onUpdate:modelValue":b=>o.Meta.DirectEditPermission=b,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),w.layouts&&o.SourceType==="LAYOUT_ITEM_SOURCE_META"&&o.MetaField===S(Y).META_DATA_SOURCE_BADGE_DISPLAY?(u(),E(Z,{key:1},{default:t(()=>[e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(qe,{modelValue:o.Meta.HideDownloadButton,"onUpdate:modelValue":b=>o.Meta.HideDownloadButton=b,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(qe,{modelValue:o.Meta.HideNFCButton,"onUpdate:modelValue":b=>o.Meta.HideNFCButton=b,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),w.layouts&&o.SourceType==="LAYOUT_ITEM_SOURCE_META"&&o.MetaField===S(Y).META_DATA_SOURCE_DATA_LAYOUT?(u(),E(Z,{key:2},{default:t(()=>[e(h,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:U.value[`${o.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[b=>U.value[`${o.LayoutItemUUID}.LayoutUUID`]=b,b=>D(o,"LayoutUUID")],clearable:!0,items:w.layouts.filter(b=>b.Type===S(ce).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),w.layouts&&o.SourceType==="LAYOUT_ITEM_SOURCE_META"&&o.MetaField===S(Y).META_DATA_SOURCE_TAGS?(u(),E(Z,{key:3},{default:t(()=>[e(h,{cols:"6",sm:"6",md:"6",lg:"6"},{default:t(()=>[e(ee,{modelValue:U.value[`${o.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[b=>U.value[`${o.LayoutItemUUID}.Tags`]=b,b=>D(o,"Tags")],clearable:!0,items:d.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!U.value[o.LayoutItemUUID]||U.value[o.LayoutItemUUID].length===0?(u(),V("small",Ho," Will show all tags ")):N("",!0)]),_:2},1024),e(h,{cols:"6"},{default:t(()=>[e(ee,{modelValue:o.Meta.TagColour,"onUpdate:modelValue":b=>o.Meta.TagColour=b,items:j.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:t(({item:b})=>[e(Q,{size:"x-small",color:b.raw.Value,class:"mr-2"},null,8,["color"]),x(" "+M(b.title),1)]),item:t(({props:b,item:ge})=>[e(Pe,Pa(Fa(b)),{prepend:t(()=>[e(Q,{size:"x-small",color:ge.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),v.value.Type===S(ce).ADMIN_LAYOUT_TABLE&&(o.SourceType!==S(Ce).LAYOUT_ITEM_SOURCE_META||o.MetaField!==S(Y).META_DATA_SOURCE_DATA_LAYOUT)?(u(),E(Z,{key:4},{default:t(()=>[e(h,null,{default:t(()=>[e(qe,{modelValue:o.DefaultSort,"onUpdate:modelValue":b=>o.DefaultSort=b,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(h,null,{default:t(()=>[e(Q,{onClick:g[4]||(g[4]=s=>i.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:t(()=>[x("Delete Layout")]),_:1})]),_:1})]),_:1}),i.value?(u(),E(Il,{key:0,modelValue:i.value,"onUpdate:modelValue":g[5]||(g[5]=s=>i.value=s),message:a.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:g[6]||(g[6]=s=>_("delete"))},null,8,["modelValue","message"])):N("",!0)]),_:1}))}}),zo=ue({__name:"EditAdminLayouts",props:ae({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ae(["save"],["update:modelValue"]),setup(c,{emit:L}){const v=fe(c,"modelValue"),r=L,f=T([]),_=T([]),U=T([]),a=ye(),i=()=>({ID:0,AdminLayoutUUID:Te(),ConventionID:c.convention.ID,ConventionUUID:c.convention.ConventionUUID,Name:"New Layout",Type:ce.ADMIN_LAYOUT_PANELS,Panels:[]}),d=()=>{let I=!1;[...new Set(U.value)].forEach(A=>{const q=f.value.findIndex(j=>j.AdminLayoutUUID===A);q<0||q>=f.value.length||(a.saveAdminLayout(f.value[q]).then(j=>{j&&f.value.splice(q,1,j)}).catch(()=>{}),I=!0)}),_.value.forEach(A=>{a.deleteAdminLayout(A).catch(()=>{})}),_.value=[],U.value=[],I&&r("save")},k=I=>{const D=f.value.findIndex(A=>A.AdminLayoutUUID===I.AdminLayoutUUID);D<0||D>=f.value.length||(f.value[D].ID>0&&_.value.push(I.AdminLayoutUUID),f.value.splice(D,1))};return a.getConventionAdminLayouts(c.convention.ConventionUUID).then(I=>{I&&(f.value=I)}).catch(()=>[]),(I,D)=>(u(),E(ja,{modelValue:v.value,"onUpdate:modelValue":D[2]||(D[2]=A=>v.value=A),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:t(()=>[e(ma,{modelValue:f.value,"onUpdate:modelValue":D[0]||(D[0]=A=>f.value=A),"new-item":i,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:I.title,label:"Name","slot-name-prefix":"panel",onClose:D[1]||(D[1]=A=>v.value=!1),onSave:d},ea({_:2},[oe(f.value,(A,q)=>({name:`panel_${q}`,fn:t(()=>[e(re,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(Z,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[e(Ko,{modelValue:f.value[q],"onUpdate:modelValue":j=>f.value[q]=j,convention:I.convention,layouts:f.value,onChange:j=>U.value.push(A.AdminLayoutUUID),onDelete:j=>k(A)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),Jo=["href","onClick"],Qo=ue({__name:"OperatorSocket",setup(c){const L=ye(),v=ta(),r=T(!1),f=wt({mode:"host",wsUri:L.getRunnerSocketURL()}),_=Nt(),U=T(!1),a=T(!1),i=T([]),d=$a();f.on("authenticated",()=>{U.value=!0;const g={Key:"",Mode:"host",UserUUID:(v==null?void 0:v.UserUUID)||""},s={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(g)};f.JSON(s),i.value.forEach(y=>{const o={Key:y.key},F={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(o)};f.JSON(F)})}),f.on("auth_failed",()=>{U.value=!1}),f.on("open",()=>{const g=_.getTokenByService("GrazeAPI");f.send(`AUTH ${g==null?void 0:g.AccessToken}`)}),f.on("runner_connected",g=>{const s=g,y=i.value.find(F=>F.key==s.Key);if(!y){k(s.Key,s.UserUUID);return}const o=bl();o.DisplayName=s.DisplayName,o.UserUUID=s.UserUUID,y.users.push(o)}),f.on("runner_disconnected",g=>{const s=g,y=i.value.find(F=>F.key==s.Key);if(!y)return;const o=y.users.findIndex(F=>F.UserUUID==s.UserUUID);o<0||y.users.splice(o,1)}),gt(()=>{A(),Ya.getInstance().on("layout_opened",s=>{const y=s;if(!f||!U.value||!y||!y.AdminLayoutUUID||!y.RegistrationUUID)return;const o={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(y)};f.JSON(o)})}),Tt(()=>{f.destroy()});const k=(g,s)=>{const o={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:g,UserUUID:s})};f.JSON(o)},I=()=>{const g=Te(),y={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:g})};f.JSON(y),i.value.push({key:g,users:[]}),q()},D=g=>{const s=i.value.findIndex(F=>F==g);if(s<0)return;const y={Key:g.key},o={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(y)};f.JSON(o),i.value.splice(s,1),q()},A=()=>{const g=localStorage.getItem("collaboration.sessions");g&&(i.value=JSON.parse(g))},q=()=>{localStorage.setItem("collaboration.sessions",JSON.stringify(i.value))},j=g=>{const s=d.resolve({name:"RunnerView",params:{user:v==null?void 0:v.UserUUID,session:g.key}}),y=new URL(location.href);return y.pathname=s.href,y.toString()},w=g=>{const s=j(g);return Dl(s),a.value=!0,s};return(g,s)=>U.value?(u(),V(B,{key:0},[e(Q,{icon:"mdi:mdi-link-variant",onClick:s[0]||(s[0]=y=>r.value=!0)}),e(Ua,{modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=y=>r.value=y),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration"},{actions:t(()=>[e(da),e(Q,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:I},{default:t(()=>[x(" Create Session ")]),_:1})]),default:t(()=>[e(pa,null,{default:t(()=>[(u(!0),V(B,null,oe(i.value,y=>(u(),E(Bt,{key:y.key,value:y.key},{activator:t(({props:o})=>[e(Pe,Pa(Fa(o)),{default:t(()=>[e(xa,null,{default:t(()=>[G("a",{href:w(y),onClick:aa(F=>w(y),["prevent","stop"]),class:"text-white text-decoration-none"},[e(Q,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,Jo),e(Q,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:aa(F=>D(y),["stop"])},null,8,["onClick"]),x(" "+M(y.key)+" ("+M(y.users.length)+") ",1)]),_:2},1024)]),_:2},1040)]),default:t(()=>[(u(!0),V(B,null,oe(y.users,o=>(u(),E(Pe,{key:`${y.key}.${o.UserUUID}`},{append:t(()=>[e(Q,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:F=>k(y.key,o.UserUUID)},null,8,["onClick"])]),default:t(()=>[x(" "+M(o.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]))),128))]),_:1}),e(Qt,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=y=>a.value=y),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)):N("",!0)}}),jo=["colspan"],Wo={style:{opacity:"var(--v-medium-emphasis-opacity)"}},Hn=ue({__name:"RegistrationsView",emits:["pageTitle"],setup(c,{emit:L}){var Da;const v=Ht();L("pageTitle","Registration Manager");const f=yt(),_=$a(),U=T(!0);let a=((Da=f.params.convention)==null?void 0:Da.toString())||"";const i=T({ID:0,ConventionUUID:Te(),OrganisationID:0,OrganisationUUID:We,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),d=ye(),k=Ya.getInstance(),I=T([]),D=T({ID:0,AdminLayoutUUID:Te(),ConventionID:i.value.ID,ConventionUUID:i.value.ConventionUUID,Name:"Registration Table",RunnerLayoutUUID:We,Type:ce.ADMIN_LAYOUT_TABLE,Panels:[]}),A=T([]),q=T([]),j=T([]),w=T([]),g=T([]),s=T([]),y=T(1),o=T(10),F=T([]),te=T(0),de=T(!1),b=T(""),ge=T(""),_e=T(""),$e=T(""),Ie=T({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),Ye=T({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),Oe=T({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),ne=T({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),Ge=T(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",Ie.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",Ye.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Oe.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",ne.value]])),Me=T(""),Le=T(""),we=T([]),me=T([]),De=T([]),Ae=T([]),Se=T([]),Ee=T([]),se=T(0),le=T(),be=T(!1),ya=T(!1),Xa=T(!1),Je=T(),_a=T(),Be=T(),Ne=T(!1),Za=ta(),W=Do(()=>{ge.value=Date.now().toString()});pe(b,n=>{const l=s.value.find(p=>p.uuid===n);if(l){const p=l.headers.find(m=>m.defaultSort===!0);p&&(F.value=[{key:p.key,order:"asc"}],we.value=[{key:p.key,order:"asc"}])}Qe({page:1,itemsPerPage:o.value,sortBy:we.value})}),pe(se,n=>{n===8&&Ia()}),pe(Me,()=>{W()}),pe(Le,()=>{W()});const et=()=>{A.value=[],j.value=[],w.value=[],s.value=[];try{d.getConventionAdminLayoutByName(i.value.ConventionUUID,"Registration Table").then(n=>{se.value+=1,n?D.value=n:(D.value.ConventionID=i.value.ID,D.value.ConventionUUID=i.value.ConventionUUID)})}catch{D.value.ConventionID=i.value.ID,D.value.ConventionUUID=i.value.ConventionUUID}try{d.getConventionAdminLayouts(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(n.forEach(l=>{l.Panels.sort((p,m)=>p.Order>m.Order?1:p.Order===m.Order?0:-1),l.Panels.forEach(p=>{p.Items.sort((m,K)=>m.Order>K.Order?1:m.Order===K.Order?0:-1)})}),j.value=n)})}catch{}try{d.getConventionForms(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(A.value=n)})}catch{}try{d.getConventionAccommodation(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(me.value=n)})}catch{}try{d.getConventionVenues(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(Ee.value=n)})}catch{}try{d.getConventionExtras(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(De.value=n)})}catch{}try{d.getConventionInterests(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(Ae.value=n)})}catch{}try{d.getConventionTickets(i.value.ConventionUUID).then(n=>{se.value+=1,n&&(Se.value=n)})}catch{}try{d.getConventionGroups(i.value.ConventionUUID).then(n=>{n&&(q.value=n.sort((l,p)=>l.Name.localeCompare(p.Name)))})}catch{}try{d.getConventionTags(i.value.ConventionUUID).then(n=>{n&&(g.value=n.sort((l,p)=>l.Title.localeCompare(p.Title)).map(l=>(l.Title=`${l.Title} [${l.Key}]`,l)))})}catch{}},Qe=({page:n,itemsPerPage:l,sortBy:p})=>{U.value=!0,y.value=n,F.value=p;const m=s.value.find(z=>z.uuid==b.value),K=m==null?void 0:m.layout.Items;let H="",he="";if(p&&K&&p.length>=1){const z=K.find(sa=>sa.LayoutItemUUID==p[0].key);switch(he=p[0].order||"asc",z==null?void 0:z.MetaField){case Y.META_DATA_SOURCE_ACCOMMODATION_FORM:H="submission.status";break;case Y.META_DATA_SOURCE_BADGE_FORM:H="submission.status";break;case Y.META_DATA_SOURCE_DEALER_FORM:H="submission.status";break;case Y.META_DATA_SOURCE_REGISTRATION_FORM:H="submission.status";break;case Y.META_DATA_SOURCE_REGISTRATION_REFERENCE:H="reference";break;case Y.META_DATA_SOURCE_SUBMISSION_DATE:H="created";break;case Y.META_DATA_SOURCE_SUBMISSION_STATUS:H="submission.status";break}switch(z==null?void 0:z.UserField){case J.USER_DATA_SOURCE_DISPLAY_NAME:H="user.display_name";break;case J.USER_DATA_SOURCE_EMAIL:H="user.email";break;case J.USER_DATA_SOURCE_FIRST_NAME:H="user.firstname";break;case J.USER_DATA_SOURCE_HANDLE:H="user.handle";break;case J.USER_DATA_SOURCE_LAST_NAME:H="user.lastname";break}}try{const z={Direction:he,Limit:l,Offset:(n-1)*l,Order:H};m&&(z.PanelUUID=m==null?void 0:m.layout.LayoutPanelUUID),(m==null?void 0:m.layout.RequiredFormType)===ie.FORM_TYPE_ACCOMMODATION&&(z.Accommodation=!0),(m==null?void 0:m.layout.RequiredFormType)===ie.FORM_TYPE_BADGE&&(z.Badge=!0),(m==null?void 0:m.layout.RequiredFormType)===ie.FORM_TYPE_DEALER&&(z.Dealer=!0),(m==null?void 0:m.layout.RequiredFormType)===ie.FORM_TYPE_REGISTRATION&&(z.Registration=!0),z.GroupUUID=Me.value||We,z.TagUUID=Le.value||We,z.Email=$e.value,z.Reference=_e.value,z.FieldValues=Array.from(Ge.value.values());const sa=ge.value;d.searchConventionRegistrations(i.value.ConventionUUID,z).then(ia=>{ia&&sa===ge.value&&(te.value=ia.Total,w.value=ia.Registrations,s.value.forEach(ua=>{const mt=ua.layout;ua.items=w.value.map(C=>{const je=[];let ve;C.Leader?ve=C:ve=C.Primary,je.push({Name:ve.User.DisplayName,UUID:ve.UserUUID,UserUUID:ve.User.UserUUID,IsLeader:!0,Reference:ve.Reference,Paid:ve.Paid,Total:ve.Total}),je.push(...ve.Members.map(Ue=>({Name:Ue.User.DisplayName,UUID:Ue.UserUUID,UserUUID:Ue.User.UserUUID,IsLeader:!1,Reference:Ue.Reference,Paid:Ue.Paid,Total:Ue.Total})));const P={};return ua.headers.forEach(Ue=>{var Aa;const R=mt.Items.find(xe=>xe.LayoutItemUUID===Ue.key);if(R){if(R.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&R.SectionField)C.Submissions.forEach(xe=>{const Fe=xe.Data.find(O=>O.SectionFieldUUID===R.SectionFieldUUID);if(Fe){Ue.type===Ga.ACCOMMODATION?P[R.LayoutItemUUID]={Data:Fe.Data,Registration:C}:P[R.LayoutItemUUID]=Fe.Data;return}});else if(R.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&R.UserField)switch(R.UserField){case J.USER_DATA_SOURCE_AVATAR:P[R.LayoutItemUUID]=v.GetProfileImageURL(C.UserUUID);break;case J.USER_DATA_SOURCE_CONTACTS:P[R.LayoutItemUUID]={},C.User.Generated&&C.User.Generated.telegram_handle&&(P[R.LayoutItemUUID].telegram=`@${C.User.Generated.telegram_handle}`),P[R.LayoutItemUUID].email=C.User.Additional.Email;break;case J.USER_DATA_SOURCE_DISPLAY_NAME:P[R.LayoutItemUUID]=C.User.DisplayName;break;case J.USER_DATA_SOURCE_EMAIL:P[R.LayoutItemUUID]=C.User.Additional.Email;break;case J.USER_DATA_SOURCE_HANDLE:P[R.LayoutItemUUID]=C.User.Handle;break;case J.USER_DATA_SOURCE_DATE_OF_BIRTH:P[R.LayoutItemUUID]=C.User.Additional.DOB;break;case J.USER_DATA_SOURCE_FIRST_NAME:P[R.LayoutItemUUID]=C.User.Additional.FirstName;break;case J.USER_DATA_SOURCE_LAST_NAME:P[R.LayoutItemUUID]=C.User.Additional.LastName;break;case J.USER_DATA_SOURCE_TELEGRAM:C.User.Generated&&C.User.Generated.telegram_handle?P[R.LayoutItemUUID]=`@${C.User.Generated.telegram_handle}`:P[R.LayoutItemUUID]="";break}else if(R.SourceType==="LAYOUT_ITEM_SOURCE_META"&&R.MetaField){const xe=(Aa=A.value.find(O=>O.Type===ie.FORM_TYPE_REGISTRATION))==null?void 0:Aa.FormUUID,Fe=C.Submissions.find(O=>O.FormUUID===xe);switch(R.MetaField){case Y.META_DATA_SOURCE_REGISTRATION_ACTIONS:P[R.LayoutItemUUID]=C;break;case Y.META_DATA_SOURCE_REGISTRATION_GROUP:P[R.LayoutItemUUID]=je;break;case Y.META_DATA_SOURCE_REGISTRATION_REFERENCE:P[R.LayoutItemUUID]=C.Reference;break;case Y.META_DATA_SOURCE_SUBMISSION_DATE:if(Fe){const O=new Date(Fe.CreatedAt||"");P[R.LayoutItemUUID]=`${O.getFullYear()}-${(O.getMonth()+1).toString().padStart(2,"0")}-${O.getDate().toString().padStart(2,"0")} ${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}:${O.getSeconds().toString().padStart(2,"0")}`}else{const O=new Date(C.CreatedAt||"");P[R.LayoutItemUUID]=`${O.getFullYear()}-${(O.getMonth()+1).toString().padStart(2,"0")}-${O.getDate().toString().padStart(2,"0")} ${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}:${O.getSeconds().toString().padStart(2,"0")}`}break;case Y.META_DATA_SOURCE_ACCOMMODATION_FORM:P[R.LayoutItemUUID]=C.Submissions.map(O=>{const $=A.value.find(Ve=>Ve.FormUUID===O.FormUUID);return{Heading:$==null?void 0:$.Heading,Form:$,Submission:O,Registration:C}}).filter(O=>{var $;return(($=O.Form)==null?void 0:$.Type)===ie.FORM_TYPE_ACCOMMODATION});break;case Y.META_DATA_SOURCE_BADGE_FORM:P[R.LayoutItemUUID]=C.Submissions.map(O=>{const $=A.value.find(Ve=>Ve.FormUUID===O.FormUUID);return{Heading:$==null?void 0:$.Heading,Form:$,Submission:O,Registration:C}}).filter(O=>{var $;return(($=O.Form)==null?void 0:$.Type)===ie.FORM_TYPE_BADGE});break;case Y.META_DATA_SOURCE_DEALER_FORM:P[R.LayoutItemUUID]=C.Submissions.map(O=>{const $=A.value.find(Ve=>Ve.FormUUID===O.FormUUID);return{Heading:$==null?void 0:$.Heading,Form:$,Submission:O,Registration:C}}).filter(O=>{var $;return(($=O.Form)==null?void 0:$.Type)===ie.FORM_TYPE_DEALER});break;case Y.META_DATA_SOURCE_PAYMENT_STATUS:if(C.Paid===0&&C.Total)P[R.LayoutItemUUID]="REQUIRED";else if(C.Total>C.Paid)P[R.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const O=je.find($=>$.Paid===0&&($.Total||0)>0);if(O){C.Total===0&&O.Total===0?P[R.LayoutItemUUID]="NOT_REQUIRED":C.Total===0&&O.Total||C.Total>0&&O.Total===0?P[R.LayoutItemUUID]="MISSING_REQUIRED":C.Paid>=C.Total?P[R.LayoutItemUUID]="AWAITING_PARTNER":P[R.LayoutItemUUID]="ALL_REQUIRED";break}else C.Total===0?P[R.LayoutItemUUID]="NOT_REQUIRED":P[R.LayoutItemUUID]="COMPLETE"}break;case Y.META_DATA_SOURCE_SUBMISSION_STATUS:qt(C.Submissions,A.value),P[R.LayoutItemUUID]=C.Submissions.map(O=>{const $=A.value.find(Ve=>Ve.FormUUID===O.FormUUID);return{Heading:$==null?void 0:$.Heading,Form:$,Submission:O,Registration:C}});break;case Y.META_DATA_SOURCE_DATA_LAYOUT:P[R.LayoutItemUUID]={Registration:C,Layouts:j.value.filter(O=>{if(R.Meta&&R.Meta.LayoutUUID&&Array.isArray(R.Meta.LayoutUUID))return R.Meta.LayoutUUID.includes(O.AdminLayoutUUID)})};break}}}}),{key:C.RegistrationUUID,registration:C,...P}})}),U.value=!1)})}catch{}},at=n=>{de.value=!1,n&&(D.value=n,Ia())},Ia=()=>{Wa(D.value.Panels,A.value),D.value.Panels.length>0&&(s.value=[],D.value.Panels.forEach(n=>{const l={uuid:Te(),order:n.Order,name:n.Name,headers:[],items:[],layout:n};n.Items.sort((p,m)=>p.Order>m.Order?1:p.Order==m.Order?0:-1),l.headers=n.Items.filter(p=>p.SourceType!=Ce.LAYOUT_ITEM_SOURCE_META||p.MetaField!=Y.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(p=>{var m,K;return{key:p.LayoutItemUUID,title:p.Label||((K=(m=p.SectionField)==null?void 0:m.Field)==null?void 0:K.Label)||"",align:p.Align==="end"?"end":"start",sortable:ot(p),type:tt(p),defaultSort:p.DefaultSort,meta:p.Meta}}),s.value.push(l)}),s.value=s.value.sort((n,l)=>n.order>l.order?1:n.order==l.order?0:-1)),(b.value==null||b.value=="")&&s.value.length>0&&(b.value=s.value[0].uuid)};a?d.getConvention(a).then(n=>{n&&(i.value=n,D.value.ConventionID=i.value.ID,D.value.ConventionUUID=i.value.ConventionUUID,et())}).catch(()=>{_.push("/")}):_.push("/");const tt=n=>{var l,p;if(n.SourceType===Ce.LAYOUT_ITEM_SOURCE_META)return`${n.SourceType}.${n.MetaField}`;if(n.SourceType===Ce.LAYOUT_ITEM_SOURCE_FORM)return(p=(l=n.SectionField)==null?void 0:l.Field)==null?void 0:p.Type;if(n.SourceType===Ce.LAYOUT_ITEM_SOURCE_USER)return`${n.SourceType}.${n.UserField}`},lt=()=>{const n=s.value.find(l=>l.uuid===b.value);return n?!!n.layout.Items.find(l=>l.SourceType==Ce.LAYOUT_ITEM_SOURCE_META&&l.MetaField==Y.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},ot=n=>{const l=[Y.META_DATA_SOURCE_ACCOMMODATION_FORM,Y.META_DATA_SOURCE_BADGE_FORM,Y.META_DATA_SOURCE_DEALER_FORM,Y.META_DATA_SOURCE_REGISTRATION_FORM,Y.META_DATA_SOURCE_REGISTRATION_REFERENCE,Y.META_DATA_SOURCE_SUBMISSION_DATE,Y.META_DATA_SOURCE_SUBMISSION_STATUS],p=[J.USER_DATA_SOURCE_DISPLAY_NAME,J.USER_DATA_SOURCE_EMAIL,J.USER_DATA_SOURCE_HANDLE,J.USER_DATA_SOURCE_DATE_OF_BIRTH,J.USER_DATA_SOURCE_FIRST_NAME,J.USER_DATA_SOURCE_LAST_NAME];return l.includes(n.MetaField)||p.includes(n.UserField)},nt=n=>{le.value=n,be.value=!0},st=n=>{le.value=n,ya.value=!0},it=n=>{le.value=n,Xa.value=!0};pe(be,n=>{n||(le.value=void 0)}),pe(ya,n=>{n||(le.value=void 0)});const na=async(n="")=>{_a.value=await d.getRegistrationGroup(n)},ut=({registration:n,form:l})=>{const p={FormUUID:l.FormUUID,Limit:1,RegistrationUUID:n.RegistrationUUID};d.searchConventionRegistrations(n.ConventionUUID,p).then(m=>{if(m&&m.Total>0){if(le.value=m.Registrations[0],!le.value)return;na(n.RegistrationUUID).then(()=>{var K,H;le.value&&((K=le.value)!=null&&K.Submissions)&&(Be.value=(H=le.value)==null?void 0:H.Submissions.find(he=>he.FormUUID===l.FormUUID)),Be.value||(Be.value=rt(l,n)),Je.value=l,Ne.value=!0})}})},rt=(n,l)=>({ID:0,SubmissionUUID:Te(),FormID:n.ID,FormUUID:n.FormUUID,Form:n,UserID:l.UserID,UserUUID:l.UserUUID,RegistrationID:l.ID,RegistrationUUID:l.RegistrationUUID,Registration:l,Data:[],Status:Gt.SUBMISSION_STATUS_NULL}),dt=n=>{d.switchUser(n.UserUUID).then(l=>{l&&Zt(l.tokens,l.user,_,!1)}).catch(l=>{console.error(l)})};return k.on("registration.group.leave",n=>{d.leaveRegistrationGroup(n).then(l=>{l&&na(n).then(()=>{k.emit("registration.group.left",l)})})}),k.on("registration.group.remove.member",n=>{d.leaveRegistrationGroup(n).then(l=>{l&&na(n).then(()=>{k.emit("registration.group.left",l)})})}),(n,l)=>(u(),E(Sl,null,{default:t(()=>[e(ka,{color:"blue-darken-4"},{default:t(()=>[e(Ha,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=p=>b.value=p),"show-arrows":""},{default:t(()=>[(u(!0),V(B,null,oe(s.value,p=>(u(),E(Ka,{key:p.uuid,value:p.uuid},{default:t(()=>[x(M(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(da),e(Qo),e(Q,{icon:"mdi:mdi-cog-outline",onClick:l[1]||(l[1]=p=>de.value=!0)})]),_:1}),e(Ja,{modelValue:b.value,"onUpdate:modelValue":l[23]||(l[23]=p=>b.value=p),disabled:!0,touch:!1},{default:t(()=>[(u(!0),V(B,null,oe(s.value,p=>(u(),E(ke,{key:p.uuid,value:p.uuid},{default:t(()=>[p.uuid===b.value?(u(),E(ze,{key:0,class:"pa-2"},{default:t(()=>[e(Rl,{expanded:I.value,"onUpdate:expanded":l[19]||(l[19]=m=>I.value=m),page:y.value,"onUpdate:page":l[20]||(l[20]=m=>y.value=m),"items-per-page":o.value,"onUpdate:itemsPerPage":l[21]||(l[21]=m=>o.value=m),"sort-by":we.value,"onUpdate:sortBy":l[22]||(l[22]=m=>we.value=m),headers:p.headers,"items-length":te.value,items:p.items,"item-value":"key",loading:U.value,search:ge.value,"onUpdate:options":Qe,"show-expand":lt()},ea({top:t(()=>[e(pl,{class:"mb-3"},{default:t(()=>[e(gl,null,{default:t(()=>[e(Tl,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:t(()=>[e(h,{class:"pa-0"},{default:t(()=>[x(" Search Criteria "),e(Qa,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),e(h,{class:"d-none d-sm-block pa-0",cols:"0"},{default:t(()=>[e(X,{modelValue:_e.value,"onUpdate:modelValue":l[2]||(l[2]=m=>_e.value=m),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:l[3]||(l[3]=aa(()=>{},["stop"])),"onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{class:"d-none d-md-block pa-0"},{default:t(()=>[e(X,{modelValue:Ie.value.Value,"onUpdate:modelValue":l[4]||(l[4]=m=>Ie.value.Value=m),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:l[5]||(l[5]=aa(()=>{},["stop"])),"onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),e(yl,{class:"pt-2"},{default:t(()=>[e(Z,null,{default:t(()=>[e(h,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:t(()=>[e(X,{modelValue:_e.value,"onUpdate:modelValue":l[6]||(l[6]=m=>_e.value=m),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:t(()=>[e(X,{modelValue:Ie.value.Value,"onUpdate:modelValue":l[7]||(l[7]=m=>Ie.value.Value=m),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:t(()=>[e(X,{modelValue:$e.value,"onUpdate:modelValue":l[8]||(l[8]=m=>$e.value=m),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(X,{modelValue:Ye.value.Value,"onUpdate:modelValue":l[9]||(l[9]=m=>Ye.value.Value=m),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(X,{modelValue:Oe.value.Value,"onUpdate:modelValue":l[10]||(l[10]=m=>Oe.value.Value=m),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(X,{modelValue:ne.value.Value,"onUpdate:modelValue":l[11]||(l[11]=m=>ne.value.Value=m),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":S(W),onInput:S(W)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(ee,{modelValue:Me.value,"onUpdate:modelValue":l[12]||(l[12]=m=>Me.value=m),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:q.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),e(h,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(ee,{modelValue:Le.value,"onUpdate:modelValue":l[13]||(l[13]=m=>Le.value=m),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:g.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":t(({columns:m,internalItem:K})=>[G("tr",null,[G("td",{colspan:m.length},[e(Ma,{modelValue:be.value,"onUpdate:modelValue":l[15]||(l[15]=H=>be.value=H),registration:K.raw.registration,"onUpdate:registration":H=>K.raw.registration=H,accommodations:me.value,convention:i.value,extras:De.value,forms:A.value,interests:Ae.value,tickets:Se.value,title:`Registration Controls (#${K.raw.registration.Reference} ${K.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Ee.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,jo)])]),"item.data-table-expand":t(({internalItem:m})=>[I.value.findIndex(K=>K===m.key)>=0?(u(),E(Q,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:K=>I.value.splice(I.value.findIndex(H=>H===m.key),1)},{default:t(()=>[m.raw.registration.Notes&&m.raw.registration.Notes.length>0?(u(),V(B,{key:0},[x(M(m.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"])):(u(),E(Q,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:K=>I.value.push(m.key)},{default:t(()=>[m.raw.registration.Notes&&m.raw.registration.Notes.length>0?(u(),V(B,{key:0},[x(M(m.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"]))]),bottom:t(()=>[e(re,{fluid:!0},{default:t(()=>[e(Z,{class:"align-center"},{default:t(()=>[e(h,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:t(()=>[e(_l,{modelValue:y.value,"onUpdate:modelValue":l[16]||(l[16]=m=>y.value=m),modelModifiers:{number:!0},length:Math.ceil(te.value/o.value)},null,8,["modelValue","length"])]),_:1}),e(h,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:t(()=>[e(ee,{modelValue:o.value,"onUpdate:modelValue":l[17]||(l[17]=m=>o.value=m),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),e(h,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:t(()=>[e(X,{modelValue:y.value,"onUpdate:modelValue":l[18]||(l[18]=m=>y.value=m),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(te.value/o.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(h,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:t(()=>[G("span",Wo,[o.value===-1?(u(),V(B,{key:0},[x(" 1-"+M(te.value)+" of "+M(te.value),1)],64)):(u(),V(B,{key:1},[x(M((y.value-1)*o.value+1)+" - "+M(y.value*o.value>=te.value?te.value:y.value*o.value)+" of "+M(te.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[oe(p.headers,m=>({name:`item.${m.key}`,fn:t(({internalItem:K,index:H})=>[e(Jl,{header:m,item:K,accommodations:me.value,convention:i.value,extras:De.value,forms:A.value,interests:Ae.value,tickets:Se.value,user:S(Za),venues:Ee.value,modelValue:p.items[H],"onUpdate:modelValue":he=>p.items[H]=he,onOpenActions:nt,onOpenPayments:st,onOpenTags:it,onReload:l[14]||(l[14]=he=>Qe({page:y.value,itemsPerPage:o.value,sortBy:F.value})),onSwitchUser:dt,onShowForm:ut},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"])]),_:2},1024)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),de.value?(u(),E(zo,{key:0,title:"Edit Layouts",modelValue:de.value,"onUpdate:modelValue":l[24]||(l[24]=p=>de.value=p),convention:i.value,onSave:at},null,8,["modelValue","convention"])):N("",!0),le.value?(u(),V(B,{key:1},[be.value?(u(),E(Ma,{key:0,modelValue:be.value,"onUpdate:modelValue":l[25]||(l[25]=p=>be.value=p),registration:le.value,"onUpdate:registration":l[26]||(l[26]=p=>le.value=p),accommodations:me.value,convention:i.value,extras:De.value,forms:A.value,interests:Ae.value,tickets:Se.value,title:`Registration Controls (#${le.value.Reference} ${le.value.User.DisplayName})`,"use-dialog":!0,venues:Ee.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):N("",!0)],64)):N("",!0),Ne.value&&Be.value&&Je.value?(u(),E(ja,{key:2,modelValue:Ne.value,"onUpdate:modelValue":l[30]||(l[30]=p=>Ne.value=p),scrollable:!0,fullscreen:!0,persistent:!0},{default:t(()=>[e(ze,{class:"bg-red-darken-4"},{default:t(()=>[e(ka,{color:"error"},{default:t(()=>[e(El,null,{default:t(()=>[x("Submission Editor - Admin Mode")]),_:1}),e(da),e(Al,null,{default:t(()=>[e(Q,{icon:"mdi:mdi-window-close",onClick:l[27]||(l[27]=p=>Ne.value=!1)})]),_:1})]),_:1}),e(la,null,{default:t(()=>[e(Pt,{modelValue:Je.value,"onUpdate:modelValue":l[28]||(l[28]=p=>Je.value=p),admin:!0,convention:i.value,data:Be.value,editable:!0,"registration-group":_a.value,onClose:l[29]||(l[29]=p=>{Ne.value=!1,Qe({page:y.value,itemsPerPage:o.value,sortBy:F.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):N("",!0)]),_:1}))}});export{Hn as default};
