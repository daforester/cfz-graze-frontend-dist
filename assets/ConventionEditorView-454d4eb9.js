import{s as M}from"./index-ba0d422e.js";import{d as q,X as $,Y as K,y as D,R as Z,o as p,b as g,w as l,c as e,e as y,L as I,K as E,h as F,N as h,F as S,O as H,G as P,f as z,H as de,m as Ve,V as ml,D as $l,M as cl,k as re,$ as ge,Z as $e,a0 as Re,z as Ge,p as ye,a1 as Rl,a as Ce,s as j,a2 as nl,u as vl,v as Pl,a3 as Fl,a4 as Ll,I as Nl,x as wl,t as ve,B as Ml,i as Ke,a5 as fl,n as Yl,q as ql,a6 as Bl,a7 as zl,a8 as pl,a9 as Gl,aa as Kl,ab as Hl,W as jl,ac as Xl}from"./index-71797067.js";import{m as Ne,a as we,s as Pe,u as Fe,F as Wl,V as He,_ as Jl,b as Zl}from"./FormField.vue_vue_type_script_setup_true_lang-d076c795.js";import{u as J}from"./useGrazeAPI-bc604d98.js";import{_ as Te,N as ol}from"./SelectTags.vue_vue_type_script_setup_true_lang-58dcd34c.js";import{_ as De,m as Ql,u as et}from"./SaveButton.vue_vue_type_script_setup_true_lang-fb2d2cb3.js";import{e as me,c as Ue}from"./VCard-e0f316c7.js";import{V as b,a as W,m as lt,b as tt,c as Vl,d as at,e as nt,f as ot,g as it}from"./VBtn-a86d842b.js";import{V as ce,b as ae}from"./VToolbar-2fe1f1db.js";import{V as oe}from"./VSpacer-600b9c0b.js";import{V as _e,a as ut}from"./VSheet-6a2542a9.js";import{V as ee}from"./VContainer-9c9b88a3.js";import{V as L,a as st,s as dt}from"./VTextField-3c5e7d13.js";import{V as he}from"./VDialog-93679cf4.js";import{V as Me,d as ne,a as se,e as je,b as Tl}from"./VList-f17e1af4.js";import{a as N,V as C}from"./VRow-9d98a8cc.js";import{v as G}from"./v4-a960c1f4.js";import{V as be,a as Ee,b as Se,c as ke}from"./VExpansionPanel-fe9865c9.js";import{V as Ul}from"./VImg-be1fee22.js";import{V as rt}from"./VForm-1e1ec3fa.js";import{V as mt}from"./VFileInput-b6b2a3d4.js";import{V as Xe}from"./VTextarea-2ed6f7a0.js";import{T as O,a as ct}from"./ticket-b671e8ba.js";import{V as vt}from"./VAutocomplete-0458937e.js";import{V as ue}from"./VSelect-cc3ef3b2.js";import{V as ft,a as pt}from"./VChip-c8ba3ff1.js";import{_ as Vt}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-91075d10.js";import{_ as Tt}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-5cd5965d.js";import{_ as We,a as Ut,V as _l,b as _t}from"./FieldEditor.vue_vue_type_script_setup_true_lang-bf79c737.js";import{_ as It}from"./FormRenderer.vue_vue_type_script_setup_true_lang-4c8f1ef6.js";import{V as gt,a as il}from"./index-de76ec18.js";import{i as yt,u as xe,m as Je,d as Ze,j as ul,f as Ct}from"./rounded-2d5b26bc.js";import{u as Dt}from"./ssrBoot-28124d28.js";import{M as ht}from"./index-f77e9f67.js";import"./scopeId-ad72b401.js";import"./createSimpleFunctional-198139cd.js";import"./VAvatar-241962f5.js";import"./VTable-1190a5ff.js";import"./userData-d733b0cf.js";var Il=(a=>(a.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",a.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",a))(Il||{});const bt=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var gl=(a=>(a.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",a.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",a.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",a))(gl||{});const Et=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}],St=[{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}],kt=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}];var yl=(a=>(a.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",a.FORM_TYPE_BADGE="BADGE",a.FORM_TYPE_DEALER="DEALER",a.FORM_TYPE_REGISTRATION="REGISTRATION",a.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",a))(yl||{});const xt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],At=q({__name:"EditConventionExtraOptions",props:$({convention:{}},{modelValue:{}}),emits:$(["close"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=D(Z(t.value)),f=()=>{t.value=n.value,r("close")};return(m,c)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:c[0]||(c[0]=u=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:l(()=>[y("Edit Option Choice")]),_:1}),e(oe),e(_e,null,{default:l(()=>[e(b,{variant:"text",onClick:f},{default:l(()=>[y(" Apply ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:l(()=>[e(ee,null,{default:l(()=>[e(L,{label:I(M).formLabelName,type:"text",variant:"outlined",modelValue:n.value.Name,"onUpdate:modelValue":c[1]||(c[1]=u=>n.value.Name=u)},null,8,["label","modelValue"]),e(L,{label:I(M).formLabelDescription,type:"text",variant:"outlined",modelValue:n.value.Description,"onUpdate:modelValue":c[2]||(c[2]=u=>n.value.Description=u)},null,8,["label","modelValue"]),e(L,{label:I(M).formLabelPrice,type:"text",variant:"outlined","prepend-icon":I(M).currencyIcon,modelValue:n.value.Price,"onUpdate:modelValue":c[3]||(c[3]=u=>n.value.Price=u),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),n.value.Choices?(p(),g(Te,{key:0,modelValue:n.value.Choices,"onUpdate:modelValue":c[4]||(c[4]=u=>n.value.Choices=u),convention:m.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):E("",!0)]),_:1})]),_:1})]),_:1}))}}),Ot=z("h3",null,"Options",-1),$t=q({__name:"EditConventionExtra",props:$({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=D(Z(r.value)),n=D(!1),f=D(0),m=J(),c=D([""]),u=D([]),i=D([]);a.convention&&(m.getConventionTags(a.convention.ConventionUUID).then(V=>{i.value=V.sort((_,T)=>_.Title.localeCompare(T.Title))}),m.getOrganisationTags(a.convention.OrganisationUUID).then(V=>{u.value=V.sort((_,T)=>_.Title.localeCompare(T.Title))}));const o=F(()=>[...u.value,...i.value]),s=({callback:V})=>{m.saveExtra(t.value).then(_=>{_?(r.value=_,V&&V("Extra Saved")):V&&V("Failed to Save Extra")}).catch(()=>{V&&V("Failed to Save Extra")})},d=V=>{var _;V.Options||(V.Options=[]),V.Options.push({ID:0,OptionUUID:G(),ExtraID:V.ID,ExtraUUID:V.ExtraUUID,Order:((_=V.Options)==null?void 0:_.length)+1,Name:"",Description:"",Price:0,Choices:[]})},v=(V,_)=>{V.Options&&V.Options.splice(_,1)},U=V=>{if(V.Choices&&V.Choices.length>0)return V.Choices.map(_=>{const T=o.value.find(A=>A.TagUUID===_.TagUUID);if(T)return T.Title}).join(", ")};return(V,_)=>(p(),h(S,null,[e(ee,{class:"px-0"},{default:l(()=>[e(L,{label:I(M).formLabelName,type:"text",variant:"outlined",modelValue:t.value.Name,"onUpdate:modelValue":_[0]||(_[0]=T=>t.value.Name=T)},null,8,["label","modelValue"]),e(L,{label:I(M).formLabelDescription,type:"text",variant:"outlined",modelValue:t.value.Description,"onUpdate:modelValue":_[1]||(_[1]=T=>t.value.Description=T)},null,8,["label","modelValue"]),e(Te,{modelValue:t.value.AppliesTags,"onUpdate:modelValue":_[2]||(_[2]=T=>t.value.AppliesTags=T),convention:V.convention,organisation:V.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),Ot,e(Me,{opened:c.value,"onUpdate:opened":_[3]||(_[3]=T=>c.value=T)},{default:l(()=>[(p(!0),h(S,null,H(t.value.Options,(T,A)=>(p(),h(S,{key:T.ID},[T?(p(),g(se,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${T.Name} ${T.Price&&T.Price>0?`(${I(M).currencySymbol}${T.Price})`:""}`},{append:l(()=>[e(b,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:B=>v(t.value,A)},null,8,["onClick"]),e(b,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:B=>{n.value=!0,f.value=A}},null,8,["onClick"])]),default:l(()=>[T.Choices&&T.Choices.length>0?(p(),g(ne,{key:0},{default:l(()=>[y(" Options: "+P(U(T)),1)]),_:2},1024)):E("",!0)]),_:2},1032,["title"])):E("",!0)],64))),128))]),_:1},8,["opened"]),e(b,{color:"primary",onClick:_[4]||(_[4]=T=>d(t.value))},{default:l(()=>[y("Add Option")]),_:1}),e(N,null,{default:l(()=>[e(C,{class:"text-right"},{default:l(()=>[e(De,{onClick:s})]),_:1})]),_:1})]),_:1}),e(he,{modelValue:n.value,"onUpdate:modelValue":_[7]||(_[7]=T=>n.value=T),scrollable:""},{default:l(()=>[e(At,{modelValue:t.value.Options[f.value],"onUpdate:modelValue":_[5]||(_[5]=T=>t.value.Options[f.value]=T),convention:V.convention,onClose:_[6]||(_[6]=T=>n.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Rt=q({__name:"EditConventionExtras",props:$({convention:{}},{modelValue:{required:!0}}),emits:$(["close"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=J(),f=()=>{const u={ID:0,ExtraUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:t.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};n.saveExtra(u).then(i=>{i&&t.value.push(i)})},m=u=>{n.deleteExtra(t.value[u].ExtraUUID).then(i=>{i&&t.value.splice(u,1)})},c=(...u)=>{u.forEach(i=>{i>=0&&i<t.value.length&&n.saveExtra(t.value[i])})};return(u,i)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:i[0]||(i[0]=o=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:l(()=>[y("Edit Extras")]),_:1}),e(oe),e(_e,null,{default:l(()=>[e(b,{variant:"text",onClick:f},{default:l(()=>[y(" Add ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:l(()=>[e(be,null,{default:l(()=>[(p(!0),h(S,null,H(t.value,(o,s)=>(p(),g(Ee,{key:o.ID,class:"mt-0"},{default:l(()=>[e(Se,null,{actions:l(({expanded:d})=>[e(b,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:v=>m(s)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:d?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(d=>{I(Ne)(o,t.value),c(s,s-1)},["stop"])},null,8,["onClick"]),e(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(d=>{I(we)(o,t.value),c(s,s+1)},["stop"])},null,8,["onClick"]),y(" "+P(o.Name)+" ",1)]),_:2},1024),e(ke,{class:"px-0"},{default:l(()=>[e($t,{convention:u.convention,modelValue:t.value[s],"onUpdate:modelValue":d=>t.value[s]=d},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Pt=z("h3",null,"Additional Purchases",-1),Ft=z("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Lt=q({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=D([]),n=J(),f=D([""]),m=D(!1),c=i=>{if(i.Choices&&i.Choices.length>0)return i.Choices.map(o=>o.Title).join(", ")},u=()=>{m.value=!1};return n==null||n.getConventionExtras(r.value.ConventionUUID||"").then(i=>{i&&(t.value=i)}),(i,o)=>(p(),h(S,null,[e(ee,{fluid:!0,class:"px-0"},{default:l(()=>[e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[Pt]),_:1}),e(C,{class:"text-right"},{default:l(()=>[e(b,{color:"primary",onClick:o[0]||(o[0]=s=>m.value=!0)},{default:l(()=>[y("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ft,e(Me,{opened:f.value,"onUpdate:opened":o[1]||(o[1]=s=>f.value=s)},{default:l(()=>[(p(!0),h(S,null,H(t.value,s=>(p(),g(je,{key:s.ID,value:s.ID},{activator:l(({props:d})=>[e(se,Ve(d,{"prepend-icon":"mdi:mdi-group",title:s.Name}),null,16,["title"])]),default:l(()=>[s.Options?(p(!0),h(S,{key:0},H(s.Options,d=>(p(),g(se,{key:d.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${d.Name} ${d.Price&&d.Price>0?`(${I(M).currencySymbol}${d.Price})`:""}`},{default:l(()=>[d.Choices&&d.Choices.length>0?(p(),g(ne,{key:0},{default:l(()=>[y(" Options: "+P(c(d)),1)]),_:2},1024)):E("",!0)]),_:2},1032,["title"]))),128)):E("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(he,{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=s=>m.value=s),scrollable:!0},{default:l(()=>[e(Rt,{modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=s=>t.value=s),convention:r.value,onClose:u},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Nt=q({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:$(["close"],["update:modelValue"]),setup(a,{emit:r}){const t=J(),n=cl(),f=K(a,"modelValue"),m=D(Z(f.value)),c=D(`${n.GetConventionLogoURL(m.value.ConventionUUID)}?${new Date().getTime()}`),u=D(),i=D(),o=ml(),s=$l(),d=()=>{m.value=JSON.parse(JSON.stringify(f.value))},v=async()=>{var T;const _=new FormData((T=i.value)==null?void 0:T.$el);if(_.get("Image")&&_.get("Image").size>0)return _.set("ConventionUUID",m.value.ConventionUUID),await n.SaveConventionLogo(_)},U=()=>{v(),t.saveConvention(m.value).then(()=>{const _=f.value.Slug,T=m.value.Slug;f.value=m.value,_!==T&&s.push(`/dashboard/admin/${o.params.organisation.toString()}/convention/${m.value.Slug}`),r("close")})},V=()=>{c.value=URL.createObjectURL(u.value.files[0])};return(_,T)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:T[0]||(T[0]=A=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:l(()=>[y("Convention Settings")]),_:1}),e(oe),e(_e,null,{default:l(()=>[e(b,{variant:"text",onClick:d},{default:l(()=>[y(" Reset ")]),_:1}),e(b,{variant:"text",onClick:U},{default:l(()=>[y(" Save ")]),_:1})]),_:1})]),_:1}),e(Ue,null,{default:l(()=>[e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(Ul,{class:"imgLogo mx-auto",src:c.value||""},null,8,["src"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(L,{label:I(M).formLabelName,name:"Name",variant:"outlined",modelValue:m.value.Name,"onUpdate:modelValue":T[1]||(T[1]=A=>m.value.Name=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(L,{label:I(M).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:m.value.Description,"onUpdate:modelValue":T[2]||(T[2]=A=>m.value.Description=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(L,{label:I(M).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:m.value.DetailLink,"onUpdate:modelValue":T[3]||(T[3]=A=>m.value.DetailLink=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(L,{label:I(M).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:m.value.Slug,"onUpdate:modelValue":T[4]||(T[4]=A=>m.value.Slug=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[e(rt,{ref_key:"conventionImageForm",ref:i,enctype:"multipart/form-data"},{default:l(()=>[e(mt,{label:I(M).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:u,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:V},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const wt=z("h3",null,"General Details",-1),Mt=["href"],Yt=q({__name:"General",props:{modelValue:{required:!0}},emits:$(["refresh"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=cl(),f=F(()=>t.value.ConventionUUID?n.GetConventionLogoURL(t.value.ConventionUUID):""),m=D(!1),c=()=>{m.value=!1,r("refresh")};return(u,i)=>(p(),h(S,null,[e(ee,{fluid:!0,class:"px-0"},{default:l(()=>[e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[wt]),_:1}),e(C,{class:"text-right"},{default:l(()=>[e(b,{color:"primary",onClick:i[0]||(i[0]=o=>m.value=!0)},{default:l(()=>[y("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),z("p",null,[f.value?(p(),g(Ul,{key:0,src:f.value,title:t.value.Name},null,8,["src","title"])):E("",!0)]),z("h3",null,P(t.value.Name),1),z("p",null,P(t.value.Description),1),z("p",null,[t.value.DetailLink?(p(),h("a",{key:0,href:t.value.DetailLink},"More Details",8,Mt)):E("",!0)]),e(he,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=o=>m.value=o),scrollable:!0},{default:l(()=>[e(Nt,{onClose:c,modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=o=>t.value=o)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),qt=q({__name:"EditConventionInterest",props:$({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=D(Z(r.value)),n=J(),f=({callback:m})=>{n.saveInterest(t.value).then(c=>{c?(r.value=c,m&&m("Interest Saved")):m&&m("Failed to Save Interest")}).catch(()=>{m&&m("Failed to Save Interest")})};return(m,c)=>(p(),g(ee,{class:"px-0"},{default:l(()=>[e(L,{label:I(M).formLabelName,type:"text",variant:"outlined",modelValue:t.value.Name,"onUpdate:modelValue":c[0]||(c[0]=u=>t.value.Name=u)},null,8,["label","modelValue"]),e(Xe,{label:I(M).formLabelDescription,type:"text",variant:"outlined",modelValue:t.value.Description,"onUpdate:modelValue":c[1]||(c[1]=u=>t.value.Description=u)},null,8,["label","modelValue"]),E("",!0),e(Te,{modelValue:t.value.AppliesTags,"onUpdate:modelValue":c[3]||(c[3]=u=>t.value.AppliesTags=u),convention:m.convention,organisation:m.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(N,null,{default:l(()=>[e(C,{class:"text-right"},{default:l(()=>[e(De,{onClick:f})]),_:1})]),_:1})]),_:1}))}}),Bt=q({__name:"EditConventionInterests",props:$({convention:{}},{modelValue:{required:!0}}),emits:$(["close"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=J(),f=()=>{const u={ID:0,InterestUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:t.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};n.saveInterest(u).then(i=>{i&&t.value.push(i)})},m=u=>{n.deleteInterest(t.value[u].InterestUUID).then(i=>{i&&t.value.splice(u,1)})},c=(...u)=>{u.forEach(i=>{i>=0&&i<t.value.length&&n.saveInterest(t.value[i])})};return(u,i)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:i[0]||(i[0]=o=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:l(()=>[y("Edit Interests")]),_:1}),e(oe),e(_e,null,{default:l(()=>[e(b,{variant:"text",onClick:f},{default:l(()=>[y(" Add ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:l(()=>[e(be,null,{default:l(()=>[(p(!0),h(S,null,H(t.value,(o,s)=>(p(),g(Ee,{key:o.ID,class:"mt-0"},{default:l(()=>[e(Se,null,{actions:l(({expanded:d})=>[e(De,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:v=>m(s)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:d?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(d=>{I(Ne)(o,t.value),c(s,s-1)},["stop"])},null,8,["onClick"]),e(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(d=>{I(we)(o,t.value),c(s,s+1)},["stop"])},null,8,["onClick"]),y(" "+P(o.Name)+" ",1)]),_:2},1024),e(ke,{class:"px-0"},{default:l(()=>[e(qt,{convention:u.convention,modelValue:t.value[s],"onUpdate:modelValue":d=>t.value[s]=d},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),zt=z("h3",null,"Interests",-1),Gt=z("p",null,"Attendees can tag themselves for particular things.",-1),Kt=q({__name:"Interests",props:{modelValue:{required:!0}},emits:$(["refresh"],["update:modelValue"]),setup(a){const r=K(a,"modelValue"),t=J(),n=D([]);t.getConventionInterests(r.value.ConventionUUID).then(c=>{Pe(c),n.value=c});const f=D([""]),m=D(!1);return(c,u)=>(p(),h(S,null,[e(ee,{fluid:!0,class:"px-0"},{default:l(()=>[e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[zt]),_:1}),e(C,{class:"text-right"},{default:l(()=>[e(b,{color:"primary",onClick:u[0]||(u[0]=i=>m.value=!0)},{default:l(()=>[y("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Gt,e(Me,{opened:f.value,"onUpdate:opened":u[1]||(u[1]=i=>f.value=i)},{default:l(()=>[(p(!0),h(S,null,H(n.value,i=>(p(),g(se,{key:i.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${i.Name} ${i.Price&&i.Price>0?`(${I(M).currencySymbol}${i.Price})`:""}`},{default:l(()=>[i.Description?(p(),g(ne,{key:0},{default:l(()=>[y(P(i.Description),1)]),_:2},1024)):E("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(he,{modelValue:m.value,"onUpdate:modelValue":u[4]||(u[4]=i=>m.value=i),scrollable:!0},{default:l(()=>[e(Bt,{onClose:u[2]||(u[2]=i=>m.value=!1),convention:r.value,modelValue:n.value,"onUpdate:modelValue":u[3]||(u[3]=i=>n.value=i)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),Oe=q({__name:"SelectTickets",props:$({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=f=>f.Type===O.TICKET_TYPE_GROUP?"mdi:mdi-group":f.Type===O.TICKET_TYPE_TICKET?f.RequiresAccommodation?"mdi:mdi-home":f.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":f.Type===O.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":f.Type===O.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",n=F(()=>a.tickets.map(f=>({title:f.Name,value:r.value.find(m=>m&&m.TicketUUID===f.TicketUUID)||f,props:{appendIcon:t(f)}})));return(f,m)=>(p(),h("div",null,[e(vt,{label:f.label,variant:f.variant||"filled",items:n.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=c=>r.value=c),hint:f.hint,chips:f.chips,clearable:f.clearable,multiple:"","persistent-hint":f.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),Ht=z("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),jt=q({__name:"EditConventionTicket",props:$({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=D(Z(r.value)),n=J(),f=F(()=>a.tickets.filter(o=>o.Type===O.TICKET_TYPE_TICKET)),m=F(()=>a.tickets.filter(o=>o.Type===O.TICKET_TYPE_ADD_ON)),c=F(()=>a.tickets.filter(o=>o.Type===O.TICKET_TYPE_TICKET_COMPONENT)),u=o=>a.accommodation.filter(s=>s.Costs.find(d=>d.DateStart===o.DateStart&&d.DateEnd===o.DateEnd)),i=({callback:o})=>{n.saveTicket(t.value).then(s=>{s?(t.value.ID=s.ID,t.value.TicketUUID=s.TicketUUID,r.value=t.value,o&&o("Ticket Saved")):o&&o("Failed to Save Ticket")}).catch(()=>{o&&o("Failed to Save Ticket")})};return(o,s)=>(p(),g(ee,{class:"px-0",fluid:""},{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(ue,{label:"Ticket Type",variant:"outlined",modelValue:t.value.Type,"onUpdate:modelValue":s[0]||(s[0]=d=>t.value.Type=d),items:I(ct),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(L,{label:I(M).formLabelName,type:"text",variant:"outlined",modelValue:t.value.Name,"onUpdate:modelValue":s[1]||(s[1]=d=>t.value.Name=d),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(L,{label:I(M).formLabelDescription,type:"text",variant:"outlined",modelValue:t.value.Description,"onUpdate:modelValue":s[2]||(s[2]=d=>t.value.Description=d),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t.value.Type!==I(O).TICKET_TYPE_GROUP?(p(),h(S,{key:0},[e(C,{cols:"12"},{default:l(()=>[e(L,{label:I(M).formLabelDateStart,type:"date",variant:"outlined",modelValue:t.value.DateStart,"onUpdate:modelValue":s[3]||(s[3]=d=>t.value.DateStart=d),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(L,{label:I(M).formLabelDateEnd,type:"date",variant:"outlined",modelValue:t.value.DateEnd,"onUpdate:modelValue":s[4]||(s[4]=d=>t.value.DateEnd=d),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(L,{label:I(M).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":I(M).currencyIcon,modelValue:t.value.Price,"onUpdate:modelValue":s[5]||(s[5]=d=>t.value.Price=d),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(p(),g(C,{key:1,cols:"12"},{default:l(()=>[e(Oe,{label:"Tickets",variant:"outlined",tickets:f.value,modelValue:t.value.Tickets,"onUpdate:modelValue":s[6]||(s[6]=d=>t.value.Tickets=d),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(C,{cols:"12"},{default:l(()=>[e(Te,{label:"Applied Tags",variant:"outlined",modelValue:t.value.AppliesTags,"onUpdate:modelValue":s[7]||(s[7]=d=>t.value.AppliesTags=d),convention:o.convention,organisation:o.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(Te,{label:"Required Tags",variant:"outlined",modelValue:t.value.RequiredTags,"onUpdate:modelValue":s[8]||(s[8]=d=>t.value.RequiredTags=d),convention:o.convention,organisation:o.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),t.value.Type===I(O).TICKET_TYPE_TICKET?(p(),h(S,{key:2},[e(C,{cols:"12"},{default:l(()=>[e(L,{label:"Components Required",type:"number",variant:"outlined",modelValue:t.value.ComponentsRequired,"onUpdate:modelValue":s[9]||(s[9]=d=>t.value.ComponentsRequired=d),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(Oe,{label:"Components",variant:"outlined",tickets:c.value,modelValue:t.value.TicketComponents,"onUpdate:modelValue":s[10]||(s[10]=d=>t.value.TicketComponents=d),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(Oe,{label:"Addons",variant:"outlined",tickets:m.value,modelValue:t.value.AddonTickets,"onUpdate:modelValue":s[11]||(s[11]=d=>t.value.AddonTickets=d),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):E("",!0),e(C,{cols:"12"},{default:l(()=>[e(Oe,{label:"Disables Tickets",variant:"outlined",tickets:o.tickets,modelValue:t.value.DisablesTickets,"onUpdate:modelValue":s[12]||(s[12]=d=>t.value.DisablesTickets=d),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),u(t.value).length?(p(),g(N,{key:0,class:"align-center",dense:!0},{default:l(()=>[e(C,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>[Ht]),_:1}),e(C,{class:"flex-grow-1"},{default:l(()=>[e(ft,null,{default:l(()=>[(p(!0),h(S,null,H(u(t.value),d=>(p(),g(pt,{key:d.ID,title:"Automatically calculated",disabled:!0},{default:l(()=>[y(P(d.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):E("",!0),e(N,null,{default:l(()=>[e(C,{class:"text-right"},{default:l(()=>[e(De,{onClick:i})]),_:1})]),_:1})]),_:1}))}}),Xt={class:"pr-2"},Wt={class:"mb-2"},Jt={key:0,class:"text-grey-darken-1 font-italic"},Zt={key:1,class:"text-red"},Qt={key:0,class:"text-grey-darken-1 font-italic"},ea={key:1,class:"text-red"},la={key:0,class:"text-grey-darken-1 font-italic"},ta={key:1,class:"text-red"},aa={class:"text-grey-darken-1"},na=q({__name:"EditConventionTickets",props:$({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:$(["close"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=J(),f=()=>{t.value.push({ID:0,TicketUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:t.value.length+1,Name:"New Ticket",Type:O.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},m=u=>{n.deleteTicket(t.value[u].TicketUUID).then(i=>{i&&t.value.splice(u,1)})},c=u=>u.Type===O.TICKET_TYPE_GROUP?"mdi:mdi-group":u.Type===O.TICKET_TYPE_TICKET?u.RequiresAccommodation?"mdi:mdi-home":u.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":u.Type===O.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":u.Type===O.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(u,i)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[e(b,{icon:"",dark:"",onClick:i[0]||(i[0]=o=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:l(()=>[y("Edit Tickets")]),_:1}),e(oe),e(_e,null,{default:l(()=>[e(b,{variant:"text",onClick:f},{default:l(()=>[y(" Add Ticket ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:l(()=>[e(be,null,{default:l(()=>[(p(!0),h(S,null,H(t.value,(o,s)=>(p(),g(Ee,{key:o.ID,class:"mt-0"},{default:l(()=>[e(Se,{class:"py-2"},{actions:l(({expanded:d})=>[e(De,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:v=>m(s)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:d?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(d=>I(Ne)(o,t.value),["stop"])},null,8,["onClick"]),e(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(d=>I(we)(o,t.value),["stop"])},null,8,["onClick"]),z("div",Xt,[e(W,{icon:c(o)},null,8,["icon"])]),z("div",null,[z("p",Wt,[y(P(o.Name)+" ",1),o.Type===I(O).TICKET_TYPE_TICKET?(p(),h(S,{key:0},[t.value.find(d=>d.Type===I(O).TICKET_TYPE_GROUP&&d.Tickets.find(v=>v&&v.TicketUUID===o.TicketUUID))?(p(),h("span",Jt," ("+P(t.value.filter(d=>d.Type===I(O).TICKET_TYPE_GROUP&&d.Tickets.find(v=>v&&v.TicketUUID===o.TicketUUID)).map(d=>d.Name).join(", "))+") ",1)):(p(),h("span",Zt," (Ticket does not belong to any categories.) "))],64)):E("",!0),o.Type===I(O).TICKET_TYPE_ADD_ON?(p(),h(S,{key:1},[t.value.find(d=>d.Type===I(O).TICKET_TYPE_TICKET&&d.AddonTickets.find(v=>v&&v.TicketUUID===o.TicketUUID))?(p(),h("span",Qt," ("+P(t.value.filter(d=>d.Type===I(O).TICKET_TYPE_TICKET&&d.AddonTickets.find(v=>v&&v.TicketUUID===o.TicketUUID)).map(d=>d.Name).join(", "))+") ",1)):(p(),h("span",ea," (Ticket addon must be associated to at least one ticket.) "))],64)):E("",!0),o.Type===I(O).TICKET_TYPE_TICKET_COMPONENT?(p(),h(S,{key:2},[t.value.find(d=>d.Type===I(O).TICKET_TYPE_TICKET&&d.TicketComponents.find(v=>v&&v.TicketUUID===o.TicketUUID))?(p(),h("span",la," ("+P(t.value.filter(d=>d.Type===I(O).TICKET_TYPE_TICKET&&d.TicketComponents.find(v=>v&&v.TicketUUID===o.TicketUUID)).map(d=>d.Name).join(", "))+") ",1)):(p(),h("span",ta," (Component has not been assigned to any tickets.) "))],64)):E("",!0)]),z("p",aa,[o.Type===I(O).TICKET_TYPE_GROUP?(p(),h(S,{key:0},[y("Category")],64)):o.Type===I(O).TICKET_TYPE_TICKET?(p(),h(S,{key:1},[y(" Ticket "),o.ComponentsRequired>0?(p(),h(S,{key:0},[y(" ("+P(o.ComponentsRequired)+" component"+P(o.ComponentsRequired>1?"s":"")+" required) ",1)],64)):E("",!0)],64)):E("",!0),o.Type===I(O).TICKET_TYPE_TICKET_COMPONENT?(p(),h(S,{key:2},[y("Component")],64)):E("",!0),o.Type===I(O).TICKET_TYPE_ADD_ON?(p(),h(S,{key:3},[y("Addon")],64)):E("",!0)])])]),_:2},1024),e(ke,{class:"px-0"},{default:l(()=>[e(jt,{accommodation:u.accommodation,convention:u.convention,tickets:t.value,modelValue:t.value[s],"onUpdate:modelValue":d=>t.value[s]=d},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),oa=z("h3",null,"Tickets",-1),ia=z("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),ua=q({__name:"Tickets",props:{modelValue:{required:!0}},emits:$(["refresh"],["update:modelValue"]),setup(a){var d;const r=K(a,"modelValue"),t=J(),n=D([]),f=D([]);t.getConventionTickets(((d=r.value)==null?void 0:d.ConventionUUID)||"").then(v=>{Pe(v),n.value=v});const m=D([""]),c=D(!1),u=v=>v.AddonTickets&&v.AddonTickets.map(U=>n.value&&n.value.find(V=>V.ID===U.ID)),i=v=>v.TicketComponents&&v.TicketComponents.map(U=>n.value&&n.value.find(V=>V.ID===U.ID)),o=v=>"",s=v=>f.value.filter(U=>U.Costs.find(V=>V.DateStart===v.DateStart&&V.DateEnd===v.DateEnd)).map(U=>U.Name).join(", ");return(v,U)=>(p(),h(S,null,[e(ee,{fluid:!0,class:"px-0"},{default:l(()=>[e(N,null,{default:l(()=>[e(C,null,{default:l(()=>[oa]),_:1}),e(C,{class:"text-right"},{default:l(()=>[e(b,{color:"primary",onClick:U[0]||(U[0]=V=>c.value=!0)},{default:l(()=>[y("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),ia,e(Me,{opened:m.value,"onUpdate:opened":U[1]||(U[1]=V=>m.value=V)},{default:l(()=>[(p(!0),h(S,null,H(n.value.filter(V=>V.Type===I(O).TICKET_TYPE_GROUP),V=>(p(),g(je,{key:V.ID,value:V.ID},{activator:l(({props:_})=>[e(se,Ve(_,{"prepend-icon":"mdi:mdi-group",title:V.Name}),null,16,["title"])]),default:l(()=>[(p(!0),h(S,null,H(n.value.filter(_=>V.Tickets.find(T=>T&&_&&T.TicketUUID===_.TicketUUID)),_=>(p(),h(S,{key:_.ID},[_.AddonTickets&&_.AddonTickets.length?(p(),g(je,{key:0,value:_.ID},{activator:l(({props:T})=>[e(se,Ve(T,{"prepend-icon":_.RequiresAccommodation?"mdi:mdi-home":_.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${_.Name} ${_.Price>0?`(${I(M).currencySymbol}${_.Price})`:""}`}),{default:l(()=>[_.ComponentsRequired>0?(p(),g(ne,{key:0},{default:l(()=>[y(" Options: "+P(i(_).map(A=>A&&A.Name).join(", ")),1)]),_:2},1024)):E("",!0),_.RequiresAccommodation&&s(_)?(p(),g(ne,{key:1},{default:l(()=>[y(" Accommodation: "+P(s(_)),1)]),_:2},1024)):E("",!0)]),_:2},1040,["prepend-icon","title"])]),default:l(()=>[(p(!0),h(S,null,H(u(_),T=>(p(),h(S,{key:T},[T?(p(),g(se,{key:0,title:`${T.Name} ${T.Price>0?`(${I(M).currencySymbol}${T.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:l(()=>[T.RequiredTags&&T.RequiredTags.length>0?(p(),g(ne,{key:0},{default:l(()=>[y(" Required Tags: "+P(T.RequiredTags.join(", ")),1)]),_:2},1024)):E("",!0),T.RequiredGroupMemberships&&T.RequiredGroupMemberships.length>0?(p(),g(ne,{key:1},{default:l(()=>[y(" Required Groups: "+P(o(T.RequiredGroupMemberships)),1)]),_:2},1024)):E("",!0),s(T)?(p(),g(ne,{key:2},{default:l(()=>[y(" Accommodation: "+P(s(T)),1)]),_:2},1024)):E("",!0)]),_:2},1032,["title"])):E("",!0)],64))),128))]),_:2},1032,["value"])):(p(),g(se,{key:1,"prepend-icon":_.RequiresAccommodation?"mdi:mdi-home":_.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${_.Name} ${_.Price>0?`(${I(M).currencySymbol}${_.Price})`:""}`},{default:l(()=>[_.ComponentsRequired>0?(p(),g(ne,{key:0},{default:l(()=>[y(" Options: "+P(i(_).map(T=>T&&T.Name).join(", ")),1)]),_:2},1024)):E("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(he,{modelValue:c.value,"onUpdate:modelValue":U[4]||(U[4]=V=>c.value=V),scrollable:!0},{default:l(()=>[e(na,{onClose:U[2]||(U[2]=V=>c.value=!1),modelValue:n.value,"onUpdate:modelValue":U[3]||(U[3]=V=>n.value=V),accommodation:f.value,convention:r.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),sa=(a,r)=>{const t=Fe(a,r),n=Fe(a,r,void 0,void 0,"item"),f=D(Z(n.value));return re(n,()=>{f.value=Z(n.value)}),{state:t,model:n,close:()=>{t.value=!1},reset:()=>{n.value=Z(f.value)},save:()=>{r("save")}}},da=q({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(a,{emit:r}){const t=a,{state:n,model:f,close:m,reset:c,save:u}=sa(t,r);return(i,o)=>(p(),g(We,{modelValue:I(n),"onUpdate:modelValue":o[0]||(o[0]=s=>$e(n)?n.value=s:null),onReset:I(c),onSave:I(u),title:i.title,color:"primary","card-class":i.cardClass},{toolbarButtons:l(()=>[ge(i.$slots,"toolbarButtons")]),actions:l(()=>[e(b,{color:"blue-darken-1",variant:"text",onClick:I(m)},{default:l(()=>[y(" Cancel ")]),_:1},8,["onClick"]),e(b,{color:"blue-darken-1",variant:"text",onClick:I(c)},{default:l(()=>[y(" Reset ")]),_:1},8,["onClick"]),e(oe),e(b,{color:"blue-darken-1",variant:"text",onClick:I(u)},{default:l(()=>[y(" Save ")]),_:1},8,["onClick"])]),default:l(()=>[ge(i.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Le=q({__name:"EditOrderedItems",props:$({closeable:{type:Boolean,default:!1},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:$(["add","save","close"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=()=>{r("save"),r("close")},f=()=>{if(a.newItem){const o=a.newItem();o.Order=t.value.length+1,t.value.push(o)}else t.value.push({Order:t.value.length+1})},m=o=>{t.value.splice(o,1)},c=o=>{we(o,t.value)},u=o=>{Ne(o,t.value)},i=o=>a.labelParent&&o[a.labelParent]?o[a.labelParent][a.label]:o[a.label];return t.value.find(o=>o.Order===0)&&Pe(t.value),t.value.find(o=>t.value.find(s=>s.Order===o.Order&&s!==o))&&Pe(t.value),(o,s)=>(p(),g(me,null,{default:l(()=>[e(ae,{dark:"",color:"primary"},{default:l(()=>[o.closeable?(p(),g(b,{key:0,icon:"",dark:"",onClick:s[0]||(s[0]=d=>r("close"))},{default:l(()=>[e(W,null,{default:l(()=>[y("mdi:mdi-close")]),_:1})]),_:1})):E("",!0),e(ce,null,{default:l(()=>[y(P(o.title),1)]),_:1}),e(oe),e(_e,null,{default:l(()=>[o.newItem!==void 0?(p(),g(b,{key:0,variant:"text",onClick:f},{default:l(()=>[y(" Add ")]),_:1})):E("",!0),o.showSave?(p(),g(b,{key:1,variant:"text",onClick:n},{default:l(()=>[y(" Save ")]),_:1})):E("",!0)]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:l(()=>[e(be,null,{default:l(()=>[(p(!0),h(S,null,H(t.value,(d,v)=>(p(),g(Ee,{key:d.Order,class:"mt-0"},{default:l(()=>[e(Se,null,{actions:l(({expanded:U})=>[e(b,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:V=>m(v)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[e(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(U=>u(d),["stop"])},null,8,["onClick"]),e(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(U=>c(d),["stop"])},null,8,["onClick"]),ge(o.$slots,`${o.slotNamePrefix}_${v}_title`,{},()=>[y(P(i(d)),1)])]),_:2},1024),e(ke,{class:"px-0"},{default:l(()=>[ge(o.$slots,`${o.slotNamePrefix}_${v}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),ra={class:"pa-0 border-0 ma-0"},ma=z("legend",{class:"mb-2"},"Field Settings",-1),ca={class:"pa-0 border-0 ma-0"},va=z("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),fa=q({__name:"EditFormField",props:$({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=J(),n=D([]),f=D([]),m=D(""),c=u=>{var i;r.value.Field=(i=f.value.find(o=>o.value===u))==null?void 0:i.field};return t.getConventionFields(a.convention.ConventionUUID).then(u=>{u&&(n.value=u,f.value=u.map(i=>({title:`${i.Label} (${(Wl.find(o=>o.value===i.Type)||{title:""}).title})`,value:i.FieldUUID,field:i})),c(r.value.FieldUUID))}),(u,i)=>(p(),g(N,null,{default:l(()=>[e(C,{cols:"12",md:"6"},{default:l(()=>[z("fieldset",ra,[ma,e(N,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(ue,{modelValue:r.value.FieldUUID,"onUpdate:modelValue":[i[0]||(i[0]=o=>r.value.FieldUUID=o),c],items:f.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"6",sm:"4"},{default:l(()=>[e(L,{modelValue:r.value.MinLength,"onUpdate:modelValue":i[1]||(i[1]=o=>r.value.MinLength=o),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"6",sm:"4"},{default:l(()=>[e(L,{modelValue:r.value.MaxLength,"onUpdate:modelValue":i[2]||(i[2]=o=>r.value.MaxLength=o),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"4"},{default:l(()=>[e(He,{modelValue:r.value.Required,"onUpdate:modelValue":i[3]||(i[3]=o=>r.value.Required=o),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),r.value.FieldUUID&&r.value.Field?(p(),g(C,{key:0,cols:"12",md:"6"},{default:l(()=>[z("fieldset",ca,[va,r.value.Field?(p(),g(Jl,{key:0,field:r.value.Field,"persistent-hint":!0,required:r.value.Required,convention:u.convention,modelValue:m.value,"onUpdate:modelValue":i[4]||(i[4]=o=>m.value=o)},null,8,["field","required","convention","modelValue"])):E("",!0)])]),_:1})):E("",!0)]),_:1}))}}),pa={class:"d-none d-sm-block"},Va=q({__name:"EditFormSectionFields",props:$({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=()=>{var n;return{ID:0,SectionFieldUUID:G(),SectionID:r.value.ID,SectionUUID:r.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((n=r.value.Fields)==null?void 0:n.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(n,f)=>r.value.Fields!==void 0?(p(),g(Le,{key:0,modelValue:r.value.Fields,"onUpdate:modelValue":f[0]||(f[0]=m=>r.value.Fields=m),closeable:!1,title:"Fields","new-item":t,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},Re({_:2},[H(r.value.Fields,(m,c)=>({name:`field_${c}_title`,fn:l(()=>[m.Field?(p(),h(S,{key:0},[y(P(m.Field.Label)+" ("+P(m.Field.Name)+") ",1),z("template",pa,[y(" Â ["+P(m.Field.Type)+"] ",1)])],64)):(p(),h(S,{key:1},[y("New Field")],64))])})),H(r.value.Fields,(m,c)=>({name:`field_${c}`,fn:l(()=>[e(fa,{modelValue:r.value.Fields[c],"onUpdate:modelValue":u=>r.value.Fields[c]=u,convention:n.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):E("",!0)}}),Ta=q({__name:"EditFormSections",props:$({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=()=>{const n={ID:0,SectionUUID:G(),FormID:r.value.ID,FormUUID:r.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:G(),SectionID:0,SectionUUID:"",Edit:!0}};return n.State.SectionID=n.ID,n.State.SectionUUID=n.SectionUUID,n};return(n,f)=>(p(),g(Le,{modelValue:r.value.Sections,"onUpdate:modelValue":f[0]||(f[0]=m=>r.value.Sections=m),"new-item":t,closeable:!1,title:"Sections","slot-name-prefix":"section"},Re({_:2},[H(r.value.Sections,(m,c)=>({name:`section_${c}`,fn:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:m.Name,"onUpdate:modelValue":u=>m.Name=u,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:m.Heading,"onUpdate:modelValue":u=>m.Heading=u,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(N,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(Xe,{modelValue:m.Description,"onUpdate:modelValue":u=>m.Description=u,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),m.Fields?(p(),g(Va,{key:0,modelValue:r.value.Sections[c],"onUpdate:modelValue":u=>r.value.Sections[c]=u,convention:n.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):E("",!0)])}))]),1032,["modelValue"]))}}),Ua=q({__name:"FormRendererPopup",props:$({convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:$(["update:form"],["update:modelValue"]),setup(a,{emit:r}){const t=a,{convention:n,title:f="",cardClass:m=""}=t,c=K(a,"modelValue"),u=Fe(t,r,void 0,void 0,"form"),i=D(Z(u.value));re(u,()=>{i.value=Z(u.value)});const o=()=>{c.value=!1};return(s,d)=>(p(),g(We,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=v=>c.value=v),title:I(f),color:"primary","card-class":I(m)},{toolbarButtons:l(()=>[ge(s.$slots,"toolbarButtons")]),actions:l(()=>[e(b,{color:"blue-darken-1",variant:"text",onClick:o},{default:l(()=>[y(" Close ")]),_:1})]),default:l(()=>[e(It,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=v=>i.value=v),convention:I(n),preview:s.preview},null,8,["modelValue","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),_a=z("template",{class:"d-none d-sm-inline"},[y("Preview")],-1),Ia=q({__name:"EditFormDialog",props:$({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:$(["update:form"],["update:modelValue"]),setup(a,{emit:r}){const t=a,{convention:n}=t,f=K(a,"modelValue"),m=J(),c=Fe(t,r,void 0,void 0,"form"),u=D(!1),i=D(Z(c.value));re(c,()=>{i.value=Z(c.value)});const o=()=>{m.saveForm(i.value).then(d=>{d&&(c.value=d,f.value=!1)})},s=()=>{u.value=!0};return(d,v)=>(p(),g(da,{modelValue:f.value,"onUpdate:modelValue":v[11]||(v[11]=U=>f.value=U),item:i.value,"onUpdate:item":v[12]||(v[12]=U=>i.value=U),onSave:o,"card-class":"pa-0"},{toolbarButtons:l(()=>[e(gt,null,{default:l(()=>[e(b,{"prepend-icon":"mdi:mdi-developer-board",onClick:s},{default:l(()=>[_a]),_:1})]),_:1})]),default:l(()=>[e(be,null,{default:l(()=>[e(Ee,{class:"mt-0"},{default:l(()=>[e(Se,null,{default:l(()=>[y("General Settings")]),_:1}),e(ke,null,{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(ee,{class:"pa-0",fluid:!0},{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:i.value.Name,"onUpdate:modelValue":v[0]||(v[0]=U=>i.value.Name=U),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:i.value.Heading,"onUpdate:modelValue":v[1]||(v[1]=U=>i.value.Heading=U),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:l(()=>[e(Xe,{modelValue:i.value.Description,"onUpdate:modelValue":v[2]||(v[2]=U=>i.value.Description=U),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:l(()=>[e(ue,{modelValue:i.value.Type,"onUpdate:modelValue":v[3]||(v[3]=U=>i.value.Type=U),label:"Type",variant:"outlined",items:I(xt),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:i.value.State.Stage,"onUpdate:modelValue":v[4]||(v[4]=U=>i.value.State.Stage=U),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(C,{cols:"6"},{default:l(()=>[e(He,{modelValue:i.value.State.New,"onUpdate:modelValue":v[5]||(v[5]=U=>i.value.State.New=U),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(C,{cols:"6"},{default:l(()=>[e(He,{modelValue:i.value.State.Edit,"onUpdate:modelValue":v[6]||(v[6]=U=>i.value.State.Edit=U),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(C,{cols:"12"},{default:l(()=>[e(Te,{label:"Required Tags",variant:"outlined",modelValue:i.value.RequiredTags,"onUpdate:modelValue":v[7]||(v[7]=U=>i.value.RequiredTags=U),convention:I(n),organisation:I(n).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i.value?(p(),g(Ta,{key:0,modelValue:i.value,"onUpdate:modelValue":v[8]||(v[8]=U=>i.value=U),convention:I(n),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):E("",!0),u.value?(p(),g(Ua,{key:1,modelValue:u.value,"onUpdate:modelValue":v[9]||(v[9]=U=>u.value=U),form:i.value,"onUpdate:form":v[10]||(v[10]=U=>i.value=U),convention:I(n),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):E("",!0)]),_:1},8,["modelValue","item"]))}}),ga=(a,r)=>{const t=D(!1),n=D(!1),f=D(a),m=D(-1),c=D(r),u=D(r),i=F(()=>m.value===-1?"New Form":"Edit Form"),o=()=>{f.value=a},s=T=>{m.value=f.value.indexOf(T),c.value=Object.assign({},T),t.value=!0},d=T=>{m.value=f.value.indexOf(T),c.value=Object.assign({},T),n.value=!0},v=()=>{n.value=!1,Ge(()=>{c.value=Object.assign({},u.value),m.value=-1}).then()},U=()=>{f.value.splice(m.value,1),v()},V=()=>{t.value=!1,Ge(()=>{c.value=Object.assign({},u.value),m.value=-1}).then()},_=()=>{m.value>-1?Object.assign(f.value[m.value],c.value):f.value.push(c.value),V()};return re(t,T=>{T||V()}),re(n,T=>{T||v()}),{collection:f,defaultItem:u,dialog:t,dialogDelete:n,editedItem:c,formTitle:i,reset:o,editItem:s,deleteItem:d,deleteItemConfirm:U,close:V,save:_}},ya=q({__name:"FormEditor",props:{modelValue:{required:!0}},emits:$(["refresh"],["update:modelValue"]),setup(a){const r=K(a,"modelValue"),t=J(),n=D([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),f=D([]),m=D([]);t.getConventionFields(r.value.ConventionUUID).then(B=>{f.value=B}),t.getConventionForms(r.value.ConventionUUID).then(B=>{m.value=B});const c={ID:0,FormUUID:G(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,ParentID:0,ParentUUID:ol,Name:"",Heading:"",Description:"",Type:yl.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:G(),FormID:0,FormUUID:ol,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};c.State.FormUUID=c.FormUUID;const{collection:u,defaultItem:i,dialog:o,dialogDelete:s,editedItem:d,formTitle:v,editItem:U,deleteItem:V,deleteItemConfirm:_,save:T}=ga(m,c);u.value.forEach(B=>{B.Sections.forEach(Y=>{var x;(x=Y.Fields)==null||x.forEach(w=>{w.Field=f.value.find(X=>X.ID===w.FieldID)})})});const A=B=>{t.deleteForm(B.FormUUID).then(Y=>{Y&&V(B)})};return(B,Y)=>(p(),g(I(_l),{headers:n.value,items:I(u),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[e(ae,{color:"primary"},{default:l(()=>[e(ce,null,{default:l(()=>[y("Form Editor")]),_:1}),e(Tl,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(b,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:Y[0]||(Y[0]=x=>{d.value=Object.assign({},I(i)),o.value=!0})},{default:l(()=>[y(" New Item ")]),_:1}),e(Ut,{modelValue:I(s),"onUpdate:modelValue":Y[1]||(Y[1]=x=>$e(s)?s.value=x:null),onDelete:I(_)},null,8,["modelValue","onDelete"])]),_:1}),I(o)?(p(),g(Ia,{key:0,modelValue:I(o),"onUpdate:modelValue":Y[2]||(Y[2]=x=>$e(o)?o.value=x:null),form:I(d),"onUpdate:form":[Y[3]||(Y[3]=x=>$e(d)?d.value=x:null),I(T)],convention:r.value},null,8,["modelValue","form","onUpdate:form","convention"])):E("",!0)]),"item.actions":l(({item:x})=>[e(W,{size:"small",class:"me-2",onClick:w=>I(U)(x.raw)},{default:l(()=>[y(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),e(W,{size:"small",onClick:w=>A(x.raw)},{default:l(()=>[y(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),Ca=q({__name:"EditAdminLayout",props:$({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:$(["save"],["update:modelValue"]),setup(a,{emit:r}){const t=K(a,"modelValue"),n=D(Z(a.layout)),f=D([]),m=J(),c=({callback:s})=>{const d=()=>{s&&s("Failed to Save Layout")},v=()=>{s&&s("Layout Saved")};m.saveAdminLayout(n.value).then(U=>{U?(v(),r("save",U)):d()}).catch(()=>{d()})},u=()=>({ID:0,LayoutPanelUUID:G(),AdminLayoutID:n.value.ID,AdminLayoutUUID:n.value.AdminLayoutUUID,Name:"",Order:n.value.Panels.length+1,Items:[]}),i=s=>()=>({ID:0,LayoutItemUUID:G(),LayoutPanelID:s.ID,LayoutPanelUUID:s.LayoutPanelUUID,Label:"",SourceType:gl.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:s.Items.length+1}),o=s=>{const d=f.value.find(v=>v.value===s.SectionFieldUUID);d&&(s.SectionFieldID=d.object.ID,s.SectionField=d.object)};return m.getConventionForms(a.layout.ConventionUUID).then(s=>{s.forEach(d=>d.Sections.forEach(v=>v.Fields&&f.value.push(...v.Fields.map(U=>{var _;return{title:`${d.Name} - ${v.Name} - ${(_=U.Field)==null?void 0:_.Name}`,value:U.SectionFieldUUID,object:U}})))),f.value.sort(Zl("title"))}),(s,d)=>(p(),g(We,{modelValue:t.value,"onUpdate:modelValue":d[3]||(d[3]=v=>t.value=v),onSave:c,title:s.title,color:"primary"},{default:l(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:n.value.Name,"onUpdate:modelValue":d[0]||(d[0]=v=>n.value.Name=v),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:l(()=>[e(ue,{modelValue:n.value.Type,"onUpdate:modelValue":d[1]||(d[1]=v=>n.value.Type=v),label:"Layout Type",items:I(bt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(Le,{modelValue:n.value.Panels,"onUpdate:modelValue":d[2]||(d[2]=v=>n.value.Panels=v),"new-item":u,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Re({_:2},[H(n.value.Panels,(v,U)=>({name:`panel_${U}`,fn:l(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:v.Name,"onUpdate:modelValue":V=>v.Name=V,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Le,{modelValue:v.Items,"onUpdate:modelValue":V=>v.Items=V,"new-item":i(v),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Re({_:2},[H(v.Items,(V,_)=>({name:`item_${_}`,fn:l(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(L,{modelValue:V.Label,"onUpdate:modelValue":T=>V.Label=T,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(N,null,{default:l(()=>[e(C,{cols:"12",sm:"6"},{default:l(()=>[e(ue,{modelValue:V.SourceType,"onUpdate:modelValue":T=>V.SourceType=T,label:"Source Type",items:I(Et),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(C,{cols:"12",sm:"6"},{default:l(()=>[V.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(p(),g(ue,{key:0,modelValue:V.SectionFieldUUID,"onUpdate:modelValue":T=>V.SectionFieldUUID=T,label:"Form Data",items:f.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:T=>o(V)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):V.SourceType==="LAYOUT_ITEM_SOURCE_META"?(p(),g(ue,{key:1,modelValue:V.MetaField,"onUpdate:modelValue":T=>V.MetaField=T,label:"Miscellaneous Data",items:I(St),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):V.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(p(),g(ue,{key:2,modelValue:V.UserField,"onUpdate:modelValue":T=>V.UserField=T,label:"User Profile Data",items:I(kt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):E("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}});const Cl=Symbol.for("vuetify:v-tabs"),Da=ye({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Rl(lt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Qe=Ce()({name:"VTab",props:Da(),setup(a,r){let{slots:t,attrs:n}=r;const{textColorClasses:f,textColorStyles:m}=yt(a,"sliderColor"),c=F(()=>a.direction==="horizontal"),u=j(!1),i=D(),o=D();function s(d){var U,V;let{value:v}=d;if(u.value=v,v){const _=(V=(U=i.value)==null?void 0:U.$el.parentElement)==null?void 0:V.querySelector(".v-tab--selected .v-tab__slider"),T=o.value;if(!_||!T)return;const A=getComputedStyle(_).color,B=_.getBoundingClientRect(),Y=T.getBoundingClientRect(),x=c.value?"x":"y",w=c.value?"X":"Y",X=c.value?"right":"bottom",le=c.value?"width":"height",fe=B[x],Ye=Y[x],ie=fe>Ye?B[X]-Y[X]:B[x]-Y[x],qe=Math.sign(ie)>0?c.value?"right":"bottom":Math.sign(ie)<0?c.value?"left":"top":"center",Q=(Math.abs(ie)+(Math.sign(ie)<0?B[le]:Y[le]))/Math.max(B[le],Y[le]),Ie=B[le]/Y[le],Ae=1.5;st(T,{backgroundColor:[A,""],transform:[`translate${w}(${ie}px) scale${w}(${Ie})`,`translate${w}(${ie/Ae}px) scale${w}(${(Q-1)/Ae+1})`,""],transformOrigin:Array(3).fill(qe)},{duration:225,easing:dt})}}return xe(()=>{const[d]=b.filterProps(a);return e(b,Ve({symbol:Cl,ref:i,class:["v-tab",a.class],style:a.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1,block:a.fixed,maxWidth:a.fixed?300:void 0,rounded:0},d,n,{"onGroup:selected":s}),{default:()=>{var v;return[((v=t.default)==null?void 0:v.call(t))??a.text,!a.hideSlider&&e("div",{ref:o,class:["v-tab__slider",f.value],style:m.value},null)]}})}),{}}});function sl(a){const t=Math.abs(a);return Math.sign(a)*(t/((1/.501-2)*(1-t)+1))}function dl(a){let{selectedElement:r,containerSize:t,contentSize:n,isRtl:f,currentScrollOffset:m,isHorizontal:c}=a;const u=c?r.clientWidth:r.clientHeight,i=c?r.offsetLeft:r.offsetTop,o=f&&c?n-i-u:i,s=t+m,d=u+o,v=u*.4;return o<=m?m=Math.max(o-v,0):s<=d&&(m=Math.min(m-(s-d-v),n-t)),m}function ha(a){let{selectedElement:r,containerSize:t,contentSize:n,isRtl:f,isHorizontal:m}=a;const c=m?r.clientWidth:r.clientHeight,u=m?r.offsetLeft:r.offsetTop,i=f&&m?n-u-c/2-t/2:u+c/2-t/2;return Math.min(n-t,Math.max(0,i))}const ba=Symbol.for("vuetify:v-slide-group"),Dl=ye({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:ba},nextIcon:{type:nl,default:"$next"},prevIcon:{type:nl,default:"$prev"},showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||["always","desktop","mobile"].includes(a)},...Je(),...Ze(),...tt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),rl=Ce()({name:"VSlideGroup",props:Dl(),emits:{"update:modelValue":a=>!0},setup(a,r){let{slots:t}=r;const{isRtl:n}=vl(),{mobile:f}=Pl(),m=Vl(a,a.symbol),c=j(!1),u=j(0),i=j(0),o=j(0),s=F(()=>a.direction==="horizontal"),{resizeRef:d,contentRect:v}=ul(),{resizeRef:U,contentRect:V}=ul(),_=F(()=>m.selected.value.length?m.items.value.findIndex(k=>k.id===m.selected.value[0]):-1),T=F(()=>m.selected.value.length?m.items.value.findIndex(k=>k.id===m.selected.value[m.selected.value.length-1]):-1);if(Fl){let k=-1;re(()=>[m.selected.value,v.value,V.value,s.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(v.value&&V.value){const R=s.value?"width":"height";i.value=v.value[R],o.value=V.value[R],c.value=i.value+1<o.value}if(_.value>=0&&U.value){const R=U.value.children[T.value];_.value===0||!c.value?u.value=0:a.centerActive?u.value=ha({selectedElement:R,containerSize:i.value,contentSize:o.value,isRtl:n.value,isHorizontal:s.value}):c.value&&(u.value=dl({selectedElement:R,containerSize:i.value,contentSize:o.value,isRtl:n.value,currentScrollOffset:u.value,isHorizontal:s.value}))}})})}const A=j(!1);let B=0,Y=0;function x(k){const R=s.value?"clientX":"clientY";Y=(n.value&&s.value?-1:1)*u.value,B=k.touches[0][R],A.value=!0}function w(k){if(!c.value)return;const R=s.value?"clientX":"clientY",te=n.value&&s.value?-1:1;u.value=te*(Y+B-k.touches[0][R])}function X(k){const R=o.value-i.value;u.value<0||!c.value?u.value=0:u.value>=R&&(u.value=R),A.value=!1}function le(){d.value&&(d.value[s.value?"scrollLeft":"scrollTop"]=0)}const fe=j(!1);function Ye(k){if(fe.value=!0,!(!c.value||!U.value)){for(const R of k.composedPath())for(const te of U.value.children)if(te===R){u.value=dl({selectedElement:te,containerSize:i.value,contentSize:o.value,isRtl:n.value,currentScrollOffset:u.value,isHorizontal:s.value});return}}}function ie(k){fe.value=!1}function qe(k){var R;!fe.value&&!(k.relatedTarget&&((R=U.value)!=null&&R.contains(k.relatedTarget)))&&Q()}function el(k){U.value&&(s.value?k.key==="ArrowRight"?Q(n.value?"prev":"next"):k.key==="ArrowLeft"&&Q(n.value?"next":"prev"):k.key==="ArrowDown"?Q("next"):k.key==="ArrowUp"&&Q("prev"),k.key==="Home"?Q("first"):k.key==="End"&&Q("last"))}function Q(k){var R,te,ll,tl,al;if(U.value)if(!k)(R=Ll(U.value)[0])==null||R.focus();else if(k==="next"){const pe=(te=U.value.querySelector(":focus"))==null?void 0:te.nextElementSibling;pe?pe.focus():Q("first")}else if(k==="prev"){const pe=(ll=U.value.querySelector(":focus"))==null?void 0:ll.previousElementSibling;pe?pe.focus():Q("last")}else k==="first"?(tl=U.value.firstElementChild)==null||tl.focus():k==="last"&&((al=U.value.lastElementChild)==null||al.focus())}function Ie(k){const R=u.value+(k==="prev"?-1:1)*i.value;u.value=Nl(R,0,o.value-i.value)}const Ae=F(()=>{let k=u.value>o.value-i.value?-(o.value-i.value)+sl(o.value-i.value-u.value):-u.value;u.value<=0&&(k=sl(-u.value));const R=n.value&&s.value?-1:1;return{transform:`translate${s.value?"X":"Y"}(${R*k}px)`,transition:A.value?"none":"",willChange:A.value?"transform":""}}),Be=F(()=>({next:m.next,prev:m.prev,select:m.select,isSelected:m.isSelected})),ze=F(()=>{switch(a.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return c.value||Math.abs(u.value)>0;case"mobile":return f.value||c.value||Math.abs(u.value)>0;default:return!f.value&&(c.value||Math.abs(u.value)>0)}}),Al=F(()=>Math.abs(u.value)>0),Ol=F(()=>o.value>Math.abs(u.value)+i.value);return xe(()=>e(a.tag,{class:["v-slide-group",{"v-slide-group--vertical":!s.value,"v-slide-group--has-affixes":ze.value,"v-slide-group--is-overflowing":c.value},a.class],style:a.style,tabindex:fe.value||m.selected.value.length?-1:0,onFocus:qe},{default:()=>{var k,R,te;return[ze.value&&e("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!Al.value}],onClick:()=>Ie("prev")},[((k=t.prev)==null?void 0:k.call(t,Be.value))??e(il,null,{default:()=>[e(W,{icon:n.value?a.nextIcon:a.prevIcon},null)]})]),e("div",{key:"container",ref:d,class:"v-slide-group__container",onScroll:le},[e("div",{ref:U,class:"v-slide-group__content",style:Ae.value,onTouchstartPassive:x,onTouchmovePassive:w,onTouchendPassive:X,onFocusin:Ye,onFocusout:ie,onKeydown:el},[(R=t.default)==null?void 0:R.call(t,Be.value)])]),ze.value&&e("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ol.value}],onClick:()=>Ie("next")},[((te=t.next)==null?void 0:te.call(t,Be.value))??e(il,null,{default:()=>[e(W,{icon:n.value?a.prevIcon:a.nextIcon},null)]})])]}})),{selected:m.selected,scrollTo:Ie,scrollOffset:u,focus:Q}}});function Ea(a){return a?a.map(r=>typeof r=="string"?{title:r,value:r}:r):[]}const Sa=ye({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Dl({mandatory:"force"}),...at(),...Ze()},"VTabs"),hl=Ce()({name:"VTabs",props:Sa(),emits:{"update:modelValue":a=>!0},setup(a,r){let{slots:t}=r;const n=wl(a,"modelValue"),f=F(()=>Ea(a.items)),{densityClasses:m}=nt(a),{backgroundColorClasses:c,backgroundColorStyles:u}=Ct(ve(a,"bgColor"));return Ml({VTab:{color:ve(a,"color"),direction:ve(a,"direction"),stacked:ve(a,"stacked"),fixed:ve(a,"fixedTabs"),sliderColor:ve(a,"sliderColor"),hideSlider:ve(a,"hideSlider")}}),xe(()=>{const[i]=rl.filterProps(a);return e(rl,Ve(i,{modelValue:n.value,"onUpdate:modelValue":o=>n.value=o,class:["v-tabs",`v-tabs--${a.direction}`,`v-tabs--align-tabs-${a.alignTabs}`,{"v-tabs--fixed-tabs":a.fixedTabs,"v-tabs--grow":a.grow,"v-tabs--stacked":a.stacked},m.value,c.value,a.class],style:[{"--v-tabs-height":Ke(a.height)},u.value,a.style],role:"tablist",symbol:Cl}),{default:()=>[t.default?t.default():f.value.map(o=>e(Qe,Ve(o,{key:o.title}),null))]})}),{}}});const ka=a=>{const{touchstartX:r,touchendX:t,touchstartY:n,touchendY:f}=a,m=.5,c=16;a.offsetX=t-r,a.offsetY=f-n,Math.abs(a.offsetY)<m*Math.abs(a.offsetX)&&(a.left&&t<r-c&&a.left(a),a.right&&t>r+c&&a.right(a)),Math.abs(a.offsetX)<m*Math.abs(a.offsetY)&&(a.up&&f<n-c&&a.up(a),a.down&&f>n+c&&a.down(a))};function xa(a,r){var n;const t=a.changedTouches[0];r.touchstartX=t.clientX,r.touchstartY=t.clientY,(n=r.start)==null||n.call(r,{originalEvent:a,...r})}function Aa(a,r){var n;const t=a.changedTouches[0];r.touchendX=t.clientX,r.touchendY=t.clientY,(n=r.end)==null||n.call(r,{originalEvent:a,...r}),ka(r)}function Oa(a,r){var n;const t=a.changedTouches[0];r.touchmoveX=t.clientX,r.touchmoveY=t.clientY,(n=r.move)==null||n.call(r,{originalEvent:a,...r})}function $a(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:a.left,right:a.right,up:a.up,down:a.down,start:a.start,move:a.move,end:a.end};return{touchstart:t=>xa(t,r),touchend:t=>Aa(t,r),touchmove:t=>Oa(t,r)}}function Ra(a,r){var u;const t=r.value,n=t!=null&&t.parent?a.parentElement:a,f=(t==null?void 0:t.options)??{passive:!0},m=(u=r.instance)==null?void 0:u.$.uid;if(!n||!m)return;const c=$a(r.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[m]=c,fl(c).forEach(i=>{n.addEventListener(i,c[i],f)})}function Pa(a,r){var m,c;const t=(m=r.value)!=null&&m.parent?a.parentElement:a,n=(c=r.instance)==null?void 0:c.$.uid;if(!(t!=null&&t._touchHandlers)||!n)return;const f=t._touchHandlers[n];fl(f).forEach(u=>{t.removeEventListener(u,f[u])}),delete t._touchHandlers[n]}const bl={mounted:Ra,unmounted:Pa},Fa=bl,El=Symbol.for("vuetify:v-window"),Sl=Symbol.for("vuetify:v-window-group"),La=ye({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||a==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...Je(),...Ze(),...Yl()},"VWindow"),kl=Ce()({name:"VWindow",directives:{Touch:bl},props:La(),emits:{"update:modelValue":a=>!0},setup(a,r){let{slots:t}=r;const{themeClasses:n}=ql(a),{isRtl:f}=vl(),{t:m}=Bl(),c=Vl(a,Sl),u=D(),i=F(()=>f.value?!a.reverse:a.reverse),o=j(!1),s=F(()=>{const x=a.direction==="vertical"?"y":"x",X=(i.value?!o.value:o.value)?"-reverse":"";return`v-window-${x}${X}-transition`}),d=j(0),v=D(void 0),U=F(()=>c.items.value.findIndex(x=>c.selected.value.includes(x.id)));re(U,(x,w)=>{const X=c.items.value.length,le=X-1;X<=2?o.value=x<w:x===le&&w===0?o.value=!0:x===0&&w===le?o.value=!1:o.value=x<w}),zl(El,{transition:s,isReversed:o,transitionCount:d,transitionHeight:v,rootRef:u});const V=F(()=>a.continuous||U.value!==0),_=F(()=>a.continuous||U.value!==c.items.value.length-1);function T(){V.value&&c.prev()}function A(){_.value&&c.next()}const B=F(()=>{const x=[],w={icon:f.value?a.nextIcon:a.prevIcon,class:`v-window__${i.value?"right":"left"}`,onClick:c.prev,ariaLabel:m("$vuetify.carousel.prev")};x.push(V.value?t.prev?t.prev({props:w}):e(b,w,null):e("div",null,null));const X={icon:f.value?a.prevIcon:a.nextIcon,class:`v-window__${i.value?"left":"right"}`,onClick:c.next,ariaLabel:m("$vuetify.carousel.next")};return x.push(_.value?t.next?t.next({props:X}):e(b,X,null):e("div",null,null)),x}),Y=F(()=>a.touch===!1?a.touch:{...{left:()=>{i.value?T():A()},right:()=>{i.value?A():T()},start:w=>{let{originalEvent:X}=w;X.stopPropagation()}},...a.touch===!0?{}:a.touch});return xe(()=>pl(e(a.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":a.showArrows==="hover"},n.value,a.class],style:a.style},{default:()=>{var x,w;return[e("div",{class:"v-window__container",style:{height:v.value}},[(x=t.default)==null?void 0:x.call(t,{group:c}),a.showArrows!==!1&&e("div",{class:"v-window__controls"},[B.value])]),(w=t.additional)==null?void 0:w.call(t,{group:c})]}}),[[Gl("touch"),Y.value]])),{group:c}}}),Na=ye({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Je(),...ot(),...Ql()},"VWindowItem"),xl=Ce()({name:"VWindowItem",directives:{Touch:Fa},props:Na(),emits:{"group:selected":a=>!0},setup(a,r){let{slots:t}=r;const n=Kl(El),f=it(a,Sl),{isBooted:m}=Dt();if(!n||!f)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const c=j(!1),u=F(()=>m.value&&(n.isReversed.value?a.reverseTransition!==!1:a.transition!==!1));function i(){!c.value||!n||(c.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function o(){var V;c.value||!n||(c.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=Ke((V=n.rootRef.value)==null?void 0:V.clientHeight)),n.transitionCount.value+=1)}function s(){i()}function d(V){c.value&&Ge(()=>{!u.value||!c.value||!n||(n.transitionHeight.value=Ke(V.clientHeight))})}const v=F(()=>{const V=n.isReversed.value?a.reverseTransition:a.transition;return u.value?{name:typeof V!="string"?n.transition.value:V,onBeforeEnter:o,onAfterEnter:i,onEnterCancelled:s,onBeforeLeave:o,onAfterLeave:i,onLeaveCancelled:s,onEnter:d}:!1}),{hasContent:U}=et(a,f.isSelected);return xe(()=>e(ht,{transition:v.value,disabled:!m.value},{default:()=>{var V;return[pl(e("div",{class:["v-window-item",f.selectedClass.value,a.class],style:a.style},[U.value&&((V=t.default)==null?void 0:V.call(t))]),[[Hl,f.isSelected.value]])]}})),{}}}),wa=q({__name:"RegList",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(a){const r=K(a,"modelValue"),t=J(),n=D({ID:0,AdminLayoutUUID:G(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,Name:"Registration Table",Type:Il.ADMIN_LAYOUT_TABLE,Panels:[]}),f=D([]),m=D([]),c=D([]),u=D(!1),i=D(),o=async()=>{f.value=[],m.value=[],c.value=[];try{const s=await t.getConventionAdminLayoutByName(r.value.ConventionUUID,"Registration Table");s&&(n.value=s)}catch{}try{const s=await t.getConventionSubmissions(r.value.ConventionUUID);if(!s)return;m.value=s}catch{return}try{const s=await t.getConventionForms(r.value.ConventionUUID);if(!s)return;f.value=s}catch{return}n.value.Panels.forEach(s=>{s.Items.forEach(d=>{d.SectionField==null&&f.value.find(v=>{v.Sections.find(U=>{if(U.Fields){const V=U.Fields.find(_=>_.SectionFieldUUID===d.SectionFieldUUID);if(V)return d.SectionField=V,!0}})})})}),n.value.Panels.length>0&&n.value.Panels.forEach(s=>{const d={uuid:G(),order:s.Order,name:s.Name,headers:[],items:[]};d.headers=s.Items.map(v=>{var U,V;return{key:v.LayoutItemUUID,title:v.Label||((V=(U=v.SectionField)==null?void 0:U.Field)==null?void 0:V.Label)||"",align:v.Align==="end"?"end":"start",sortable:!0}}),d.items=m.value.map(v=>{const U={};return d.headers.forEach(V=>{var T;const _=s.Items.find(A=>A.LayoutItemUUID===V.key);_&&_.SectionField&&(U[_.LayoutItemUUID]=((T=v.Data.find(A=>A.SectionFieldUUID===_.SectionFieldUUID))==null?void 0:T.Data)||"")}),U}),c.value.push(d)}),i.value==""&&c.value.length>0&&(i.value=c.value[0].uuid)};return o(),(s,d)=>(p(),g(ut,null,{default:l(()=>[e(ae,{color:"primary"},{default:l(()=>[e(ce,null,{default:l(()=>[y("Registration Manager")]),_:1}),e(Tl,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(b,{icon:"mdi:mdi-cog-outline",onClick:d[0]||(d[0]=v=>u.value=!0)})]),_:1}),c.value?(p(),h(S,{key:0},[e(ae,{color:"blue-darken-4"},{default:l(()=>[e(hl,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=v=>i.value=v),"show-arrows":""},{default:l(()=>[(p(!0),h(S,null,H(c.value,v=>(p(),g(Qe,{key:v.uuid,value:v.uuid},{default:l(()=>[y(P(v.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(kl,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=v=>i.value=v)},{default:l(()=>[(p(!0),h(S,null,H(c.value,v=>(p(),g(xl,{key:v.uuid,value:v.uuid},{default:l(()=>[v.uuid===i.value?(p(),g(me,{key:0,class:"pa-2"},{default:l(()=>[e(I(_l),{headers:v.headers,items:v.items,itemsPerPage:"50","item-value":"LayoutItemUUID"},{"item.actions":l(({item:U})=>[e(W,{size:"small",class:"me-2"},{default:l(()=>[y(" mdi:mdi-pencil ")]),_:1})]),_:2},1032,["headers","items"])]),_:2},1024)):E("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):E("",!0),u.value?(p(),g(Ca,{key:1,title:"Edit Layout",modelValue:u.value,"onUpdate:modelValue":d[3]||(d[3]=v=>u.value=v),layout:n.value,onSave:d[4]||(d[4]=v=>{u.value=!1,o()})},null,8,["modelValue","layout"])):E("",!0)]),_:1}))}}),bn=q({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(a,{emit:r}){const t=ml(),n=jl.getInstance(),f=D({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),m=D(),c=D([]);re(m,()=>{c.value.find(o=>o.id===m.value&&o.title==="General")&&u()});const u=()=>{n==null||n.getConvention(t.params.convention.toString()).then(i=>{i?(f.value=i,r("pageTitle",`Convention Editor - ${f.value.Name}`)):r("pageTitle","Convention Editor - New Convention")})};return c.value=[{id:G(),title:"General",component:j(Yt),model:f},{id:G(),title:"Accommodation",component:j(Tt),model:f},{id:G(),title:"Additional Purchases",component:j(Lt),model:f},{id:G(),title:"Fields",component:j(_t),model:f},{id:G(),title:"Forms",component:j(ya),model:f},{id:G(),title:"Interests",component:j(Kt),model:f},{id:G(),title:"Registrations",component:j(wa),model:f},{id:G(),title:"Tickets",component:j(ua),model:f},{id:G(),title:"Venues",component:j(Vt),model:f}],r("pageTitle","Convention Editor"),u(),(i,o)=>f.value?(p(),h(S,{key:0},[e(ae,{color:"blue-darken-4"},{default:l(()=>[e(hl,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),"show-arrows":""},{default:l(()=>[(p(!0),h(S,null,H(c.value,s=>(p(),g(Qe,{key:s.id,value:s.id},{default:l(()=>[y(P(s.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(kl,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=s=>m.value=s)},{default:l(()=>[(p(!0),h(S,null,H(c.value,s=>(p(),g(xl,{key:s.id,value:s.id},{default:l(()=>[s.id===m.value?(p(),g(me,{key:0,class:"pa-2"},{default:l(()=>[(p(),g(Xl(s.component),{modelValue:s.model,"onUpdate:modelValue":d=>s.model=d},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):E("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(p(),h(S,{key:1},[y(" Convention Not Found ")],64))}});export{bn as default};
