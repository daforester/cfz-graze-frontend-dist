import{i as ue,M as ne,N as de,r as p,n as s,B as k,q as S,v as t,F as q,y as L,x as G,f as e,Q as ie,A as N,P as _e,D as Y,C as A,a2 as ia,m as ua,k as Ke,w as Te,G as Vt,H as kt,_ as Rt,$ as Oe,c as It,a3 as Ct,a4 as Mt,O as Je,U as Ot,a5 as ra,b as da,E as st,z as Ve,W as ze,V as ma}from"./index-LoOE9hv8.js";import{_ as ca,D as fa,a as va,b as Ua,c as pa,d as ga,e as Ta,f as ya,g as _a,h as Ia,A as ve,u as nt,i as Da,P as Aa,j as Dt,L as Sa,M as Ea,U as ha,k as x,l as Ee,m as ba,n as Va,o as Z}from"./useTokenManager-HNwtYzxB.js";import{d as ka,b as Lt,c as Ra}from"./FormRenderer.vue_vue_type_style_index_0_lang-sutibdua.js";import{F as re,a as Ca}from"./form-0fJbSFPv.js";import{b as Ma,c as wt,d as At,S as Oa}from"./submission-40fey8Hx.js";import{G as dt}from"./group-7fhbY6WJ.js";import{C as mt}from"./canDo-fxmVvZDs.js";import{_ as ct}from"./ModelDialog.vue_vue_type_script_setup_true_lang-FU9stOHY.js";import{a as ke,c as Nt,V as ft,b as La}from"./VList-xkxCef6T.js";import{V as W}from"./VBtn--B1INWih.js";import{V as Ft}from"./VAvatar-dy_Xuna0.js";import{s as wa}from"./sortSubmissions-NKScr9xj.js";import{V as it,a as Na}from"./scopeId-4Bs6C4cr.js";import{u as Pt}from"./useModel-TzQf8IaD.js";import{a as $t,b as Yt,c as Se,V as Gt}from"./VWindowItem-JQCYbdaz.js";import{u as Fa,P as Pa}from"./useDisplayTransactions-oU4gzENk.js";import{G as Qe}from"./userData-Awis3VLR.js";import{a as vt,V as Ut,c as je,e as Le,d as $a}from"./VCard-SLWUxUNO.js";import{V as ae,a as V}from"./VRow-cQWNNQVX.js";import{_ as ut,b as Ya}from"./SaveButton.vue_vue_type_script_setup_true_lang-9j-ll-ew.js";import{V as oe}from"./VSelect-w0mjAClX.js";import{V as Bt,a as me}from"./VContainer-V1weI7tX.js";import{_ as xt,a as rt}from"./EditOrderedItems.vue_vue_type_script_setup_true_lang-NwrpUOgC.js";import{V as Ga,a as Ba}from"./VAlert-AAE9KG5t.js";import{V as Me}from"./VCheckbox-b3xtB1iw.js";import{S as xa}from"./setupLogin-FBqTpHWZ.js";import{V as qa,u as Ha}from"./debounce-NMMaSNh3.js";import{_ as za}from"./SelectGroups.vue_vue_type_script_setup_true_lang-YXB1xvuV.js";import{_ as Ka}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-pFenaGIQ.js";import{V as ee}from"./VTextField-ENRL7HUP.js";import{v as ye}from"./v4-yQnnJER4.js";import{V as qt}from"./VDialog-gK3PZ-Xh.js";import{c as Ja}from"./copyToClipboard-aCoRGJiH.js";import{u as Qa}from"./useAvatar-o26CnBMy.js";import{e as ja,V as Wa,a as Xa,b as Za,c as el}from"./VDataTable-amGHzf0B.js";import{V as tl}from"./forwardRefs-Cfslt7Sh.js";import{a as al}from"./VTable-enUHSd58.js";import{V as St,a as ll}from"./VToolbar-4vJ4uAXR.js";import"./date-1rFCglLs.js";import"./canEditRegistrations-63w59ziE.js";import"./ticket-hqexX1_U.js";import"./VAutocomplete-cNkyUVlf.js";import"./VCheckboxBtn-tgO8Tg-B.js";import"./VChip-OZy0FWOM.js";import"./VDivider-iY0VykCl.js";import"./VTextarea-W753cEAo.js";import"./VForm-Ih62M8Rf.js";import"./VNavigationDrawer-olcln0PY.js";import"./index-OKsbKlsK.js";import"./VFileInput-D0x94aI6.js";import"./createSimpleFunctional-KxvM5Lpl.js";import"./VToolbarItems-a9voVCXA.js";const ol=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),nl=E=>E===void 0?!1:mt(E,dt.GROUP_TYPE_SYSTEM).ManageUsers,sl=ue({__name:"DataTableItemPanel",props:ne({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["openActions","showForm"],["update:modelValue"]),setup(E,{emit:O}){const c=O,U=de(E,"modelValue"),g=p(),T=_e(),m=p(),a=p(!1),u=D=>{const _={AdminLayoutUUID:D.AdminLayoutUUID,Limit:1,RegistrationUUID:U.value.RegistrationUUID};T.searchConventionRegistrations(U.value.ConventionUUID,_).then(b=>{b&&b.Total>0&&(g.value=b.Registrations[0],m.value=D,a.value=!0)})},r=D=>{c("openActions",D)},h=(D,_,b)=>{c("showForm",D,_,b)};return(D,_)=>(s(),k("div",null,[D.layouts?(s(),S(ft,{key:0},{default:t(()=>[(s(!0),k(q,null,ie(D.layouts,b=>(s(),S(ke,{key:b.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:t(()=>[e(Nt,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:t(()=>[e(W,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:z=>u(b)},{default:t(()=>[G(L(b.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):N("",!0),a.value&&m.value&&g.value?(s(),S(ct,{key:1,modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=b=>a.value=b),"hide-extension":!0,fullscreen:!0,title:`#${g.value.Reference} ${g.value.User.DisplayName} - ${m.value.Name} `,scrollable:!0,"card-class":"pa-0","card-style":"margin-bottom: -52px"},{default:t(()=>[e(ca,{accommodations:D.accommodations,convention:D.convention,extras:D.extras,forms:D.forms,interests:D.interests,tickets:D.tickets,venues:D.venues,layout:m.value,"onUpdate:layout":_[0]||(_[0]=b=>m.value=b),modelValue:g.value,"onUpdate:modelValue":_[1]||(_[1]=b=>g.value=b),onOpenActions:r,onShowForm:h},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):N("",!0)]))}}),il={class:"text-grey-lighten-1"},ul={key:0,class:"mb-2"},rl=Y("strong",null,"Email",-1),dl=Y("br",null,null,-1),ml={key:1,class:"mb-2"},cl=Y("strong",null,"Telegram",-1),fl=Y("br",null,null,-1),vl={key:0,class:"text-blue text-center"},Ul={key:1,class:"text-red text-center"},pl={key:2,class:"text-orange text-center"},gl={key:3,class:"text-orange text-center"},Tl={key:4,class:"text-orange text-center"},yl={key:5,class:"text-orange text-center"},_l={key:6,class:"text-green text-center"},Il={key:0},Dl={key:0},Al=Y("strong",null,"Total:",-1),Sl=ue({__name:"RegListRow",props:ne({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(E,{emit:O}){const c=O,U=de(E,"modelValue"),g=(a,u)=>{c("showForm",{registration:a,form:u})},T=a=>{c("openActions",a)},m=a=>{c("switchUser",a)};return(a,u)=>a.header.type==="ACCOMMODATION"&&a.accommodations.length>0&&a.item.raw[a.header.key]?(s(),S(fa,{key:0,value:a.item.raw[a.header.key].Data,accommodations:a.accommodations,convention:a.convention,forms:a.forms,tickets:a.tickets,venues:a.venues,registration:a.item.raw[a.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):a.header.type==="EXTRAS"&&a.extras.length>0?(s(),S(va,{key:1,value:a.item.raw[a.header.key],extras:a.extras},null,8,["value","extras"])):a.header.type==="INTERESTS"&&a.interests.length>0?(s(),S(Ua,{key:2,value:a.item.raw[a.header.key],interests:a.interests},null,8,["value","interests"])):a.header.type==="TICKET"&&a.tickets.length>0?(s(),S(pa,{key:3,value:a.item.raw[a.header.key],tickets:a.tickets},null,8,["value","tickets"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(s(),S(ga,{key:4,convention:a.convention,"show-controls":!1,modelValue:a.item.raw.registration,"onUpdate:modelValue":u[0]||(u[0]=r=>a.item.raw.registration=r)},null,8,["convention","modelValue"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(s(),k(q,{key:5},[Y("ul",null,[(s(!0),k(q,null,ie(a.forms.filter(r=>r.Type===A(re).FORM_TYPE_ADMIN&&a.item.raw[a.header.key].findIndex(h=>h.Form.ID===r.ID)<0),r=>(s(),k("li",{key:r.Heading},[Y("strong",il,L(r.Heading),1),e(W,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:h=>g(a.item.raw.registration,r)},null,8,["onClick"])]))),128))]),Y("ul",null,[(s(!0),k(q,null,ie(a.item.raw[a.header.key],r=>(s(),k("li",{key:r.Heading},[Y("strong",null,[G(L(r.Heading),1),r.Form.Type!==A(re).FORM_TYPE_ADMIN?(s(),k(q,{key:0},[G(": ")],64)):N("",!0)]),r.Form.Type!==A(re).FORM_TYPE_ADMIN?(s(),k("span",{key:0,class:ia(A(Ma)(r.Submission.Status))},L(A(wt)(r.Submission.Status)),3)):N("",!0),e(W,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:h=>g(r.Registration,r.Form)},null,8,["onClick"])]))),128))])],64)):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(s(),S(Ft,{key:6,class:"rounded-circle",src:a.item.raw[a.header.key],height:"32",width:"32"},null,8,["src"])):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(s(),k(q,{key:7},[a.item.raw[a.header.key].email?(s(),k("p",ul,[rl,dl,G(L(a.item.raw[a.header.key].email),1)])):N("",!0),a.item.raw[a.header.key].telegram?(s(),k("p",ml,[cl,fl,G(L(a.item.raw[a.header.key].telegram),1)])):N("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(s(),k(q,{key:8},[a.item.raw[a.header.key]=="NOT_REQUIRED"?(s(),k("div",vl,"No Payment Requested")):a.item.raw[a.header.key]=="MISSING_REQUIRED"?(s(),k("div",Ul,"Partner Payment Not Requested")):a.item.raw[a.header.key]=="AWAITING_PARTNER"?(s(),k("div",pl,"Awaiting Partner Payment")):a.item.raw[a.header.key]=="ALL_REQUIRED"?(s(),k("div",gl,"Awaiting Payments")):a.item.raw[a.header.key]=="REQUIRED"?(s(),k("div",Tl,"Awaiting Payment")):a.item.raw[a.header.key]=="ADDITIONAL_REQUIRED"?(s(),k("div",yl,"Awaiting Additional Payments")):(s(),k("div",_l,"Completed"))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(s(),k(q,{key:9},[e(W,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:u[1]||(u[1]=r=>T(a.item.raw[a.header.key]))}),A(nl)(a.user)?(s(),S(W,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:u[2]||(u[2]=r=>m(a.item.raw[a.header.key]))})):N("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(s(),k(q,{key:10},[a.item.raw[a.header.key].length===1?(s(),k("em",Il," Not in a group ")):(s(),k(q,{key:1},[Y("ul",null,[(s(!0),k(q,null,ie(a.item.raw[a.header.key],r=>(s(),k("li",{key:r.UUID,class:"ml-0"},[G(" #"+L(r.Reference)+" : "+L(r.Name)+" ",1),r.IsLeader?(s(),k("strong",Dl,"(Leader)")):N("",!0)]))),128))]),Al,G(" "+L(a.item.raw[a.header.key].length),1)],64))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(s(),k(q,{key:11},[U.value.registration?(s(),S(sl,{key:0,accommodations:a.accommodations,convention:a.convention,extras:a.extras,forms:a.forms,interests:a.interests,tickets:a.tickets,venues:a.venues,layouts:a.item.raw[a.header.key].Layouts,modelValue:U.value.registration,"onUpdate:modelValue":u[3]||(u[3]=r=>U.value.registration=r),onOpenActions:T,onShowForm:g},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):N("",!0)],64)):(s(),k(q,{key:12},[G(L(a.item.raw[a.header.key]),1)],64))}}),Et=ue({__name:"RegistrationActionTabs",props:ne({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const O=E,c=de(E,"modelValue");return(U,g)=>(s(),S($t,ua({modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=T=>c.value=T)},O),{default:t(()=>[(s(!0),k(q,null,ie(U.tabs,T=>(s(),S(Yt,{value:T.value,key:T.value},{default:t(()=>[G(L(T.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),El=(E=void 0,O)=>E===void 0?!1:mt(E,dt.GROUP_TYPE_CONVENTION,O.ConventionUUID,O).EditPaymentTransactions,We=E=>(Vt("data-v-8af8174d"),E=E(),kt(),E),hl={class:"mb-4"},bl={class:"v-row"},Vl={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},kl={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Rl={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},Cl={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},Ml=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),Ol={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ll=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),wl={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Nl=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),Fl={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Pl=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),$l={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Yl=ue({__name:"PaymentActions",props:ne({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const O=p(!1),c=p(),U=p([]),g=p(new Date().getTime()),T=p(!1),m=de(E,"modelValue"),a=p(Ke(m.value));Te(m,()=>{a.value=Ke(m.value)});const u=_e();u.getConvention(m.value.ConventionUUID).then(_=>{_&&(T.value=El(Qe(),_))});const r=()=>{u.generateRegistrationCharges(m.value.RegistrationUUID,!1).then(_=>{_&&(U.value=_.PaymentTransactions,c.value=_.Registration,g.value=new Date().getTime())}).catch(()=>{})};r();const h=()=>{u.generateRegistrationCharges(m.value.RegistrationUUID,!0).then(_=>{_&&(U.value=_.PaymentTransactions,c.value=_.Registration,g.value=new Date().getTime())})},{totalCharges:D}=Fa();return(_,b)=>(s(),S(Le,null,{default:t(()=>[e(Ut,null,{default:t(()=>[e(vt,null,{default:t(()=>[G(" Payments (#"+L(m.value.Reference)+" "+L(m.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[c.value?(s(),k(q,{key:0},[Y("h3",hl,"#"+L(c.value.Reference)+" "+L(c.value.User.DisplayName),1),Y("dl",bl,[(s(!0),k(q,null,ie(U.value,z=>(s(),k(q,{key:z.PaymentTransactionUUID},[z.Type===A(Pa).PAYMENT_TRANSACTION_TYPE_CHARGE?(s(),k("dt",Vl,[Y("div",kl,L(z.Description.split(":")[0])+": ",1),Y("div",Rl,L(z.Description.split(":")[1]),1)])):N("",!0),Y("dd",Cl," £"+L(z.Amount),1)],64))),128)),Ml,Y("dd",Ol," £"+L(A(D)(U.value)),1),Ll,Y("dd",wl," £"+L(c.value.Total),1),Nl,Y("dd",Fl," £"+L(c.value.Paid),1),Pl,Y("dd",$l," £"+L(c.value.Total-c.value.Paid),1)]),e(ae,{class:"flex-row-reverse"},{default:t(()=>[e(V,{class:"text-right"},{default:t(()=>[e(W,{color:"primary",onClick:h},{default:t(()=>[G("Apply Charges")]),_:1})]),_:1}),!O.value&&T.value?(s(),S(V,{key:0},{default:t(()=>[e(W,{color:"secondary",onClick:b[0]||(b[0]=z=>O.value=!0)},{default:t(()=>[G("Transaction Entry")]),_:1})]),_:1})):N("",!0)]),_:1})],64)):N("",!0),e(Ta,{"can-edit":T.value,registration:m.value,"show-editor":O.value,onCloseEditor:b[1]||(b[1]=z=>O.value=!1),updated:g.value,onChange:r},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),Gl=Rt(Yl,[["__scopeId","data-v-8af8174d"]]),Bl=ue({__name:"RegistrationFormStatus",props:ne({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const O=_e(),c=de(E,"modelValue"),U=(g,T)=>{const m=c.value.Submissions.find(a=>a.SubmissionUUID==T);if(!m){g&&g("Submission not found");return}O.setSubmissionStatus(T,m.Status).then(a=>{a?(c.value.Submissions.forEach((u,r)=>{c.value.Submissions[r].Status=u.Status}),g&&g("Status Saved")):g&&g("Status not saved")}).catch(()=>{g&&g("Status not saved")})};return(g,T)=>(s(),S(Le,null,{default:t(()=>[e(Ut,null,{default:t(()=>[e(vt,null,{default:t(()=>[G("Status (#"+L(c.value.Reference)+" "+L(c.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(ft,null,{default:t(()=>[(s(!0),k(q,null,ie(c.value.Submissions,m=>(s(),S(ke,{key:m.SubmissionUUID,class:"pa-0"},{default:t(()=>[e(ae,{class:"py-2 align-center"},{default:t(()=>[e(V,{cols:"9",sm:"10",md:"10",lg:"9"},{default:t(()=>{var a;return[e(oe,{modelValue:m.Status,"onUpdate:modelValue":u=>m.Status=u,items:A(At),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((a=g.forms.find(u=>u.FormUUID==m.FormUUID))==null?void 0:a.Name)||""},{selection:t(()=>[e(Bt,{class:"mr-4 d-none d-sm-inline"},{default:t(()=>{var u;return[G(L((u=A(At).find(r=>r.value===m.Status))==null?void 0:u.icon),1)]}),_:2},1024),G(" "+L(A(wt)(m.Status)),1)]),item:t(({item:u,props:{onClick:r}})=>[e(ke,{title:u.title,"prepend-icon":u.raw.icon,onClick:r},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),e(V,{cols:"3",sm:"2",md:"2",lg:"1"},{default:t(()=>[e(ut,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:a=>U(a.callback,m.SubmissionUUID)},null,8,["onClick"]),e(ut,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:a=>U(a.callback,m.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),xl=E=>(Vt("data-v-7d39acf0"),E=E(),kt(),E),ql=xl(()=>Y("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),Hl={class:"mb-4"},zl=ue({__name:"RegistrationTags",props:ne({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const O=_e(),c=de(E,"modelValue"),U=p(Ke(c.value)),g=p(!1),T=p(U.value.Tags);Te(c,()=>{U.value=Ke(c.value)});const m=({callback:a})=>{const u=[],r=[];U.value.Tags.forEach(h=>{T.value.find(_=>_.TagUUID===h.TagUUID)||u.push(h.TagUUID)}),T.value.forEach(h=>{U.value.Tags.find(_=>h.TagUUID===_.TagUUID)||r.push(h.TagUUID)}),O.updateRegistrationTags(u,r,U.value.RegistrationUUID).then(h=>{h?a&&(a("Tags Saved"),c.value.Tags=h.Tags):a&&a("Error Saving Tags")}).catch(()=>{a&&a("Error Saving Tags")})};return(a,u)=>(s(),S(Le,null,{default:t(()=>[e(Ut,null,{default:t(()=>[e(vt,null,{default:t(()=>[G("Tags (#"+L(U.value.Reference)+" "+L(U.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(Ga,{class:"my-4"},{default:t(()=>[e(Ba,null,{default:t(()=>[G("Caution")]),_:1}),ql]),_:1}),Y("h3",Hl,"#"+L(U.value.Reference)+" "+L(U.value.User.DisplayName),1),e(xt,{modelValue:U.value.Tags,"onUpdate:modelValue":u[0]||(u[0]=r=>U.value.Tags=r),convention:U.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":g.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),e($a,{class:"px-4 align-start"},{default:t(()=>[e(Me,{label:"Show UUID",modelValue:g.value,"onUpdate:modelValue":u[1]||(u[1]=r=>g.value=r)},null,8,["modelValue"]),e(ut,{onClick:m,variant:"flat"})]),_:1})]),_:1}))}}),Kl=Rt(zl,[["__scopeId","data-v-7d39acf0"]]),ht=ue({__name:"RegistrationActionWindows",props:ne({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["update:registration"],["update:modelValue"]),setup(E,{emit:O}){const c=E,U=de(E,"modelValue"),T=Pt(c,O,void 0,void 0,"registration");return(m,a)=>(s(),S(Gt,{modelValue:U.value,"onUpdate:modelValue":a[3]||(a[3]=u=>U.value=u),disabled:!0,touch:!1},{default:t(()=>[e(Se,{value:"badges"},{default:t(()=>[U.value=="badges"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(ya,{convention:m.convention,registration:A(T)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),e(Se,{value:"emails"},{default:t(()=>[U.value=="emails"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(_a,{registration:A(T)},null,8,["registration"])]),_:1})):N("",!0)]),_:1}),e(Se,{value:"notes"},{default:t(()=>[U.value=="notes"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Ia,{convention:m.convention,expanded:!1,registration:A(T)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),e(Se,{value:"payments"},{default:t(()=>[U.value=="payments"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Gl,{modelValue:A(T),"onUpdate:modelValue":a[0]||(a[0]=u=>Oe(T)?T.value=u:null),forms:m.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),e(Se,{value:"status"},{default:t(()=>[U.value=="status"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Bl,{modelValue:A(T),"onUpdate:modelValue":a[1]||(a[1]=u=>Oe(T)?T.value=u:null),forms:m.forms},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),e(Se,{value:"tags"},{default:t(()=>[U.value=="tags"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Kl,{modelValue:A(T),"onUpdate:modelValue":a[2]||(a[2]=u=>Oe(T)?T.value=u:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):N("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Jl=(E,O)=>E===void 0?!1:mt(E,dt.GROUP_TYPE_CONVENTION,O.ConventionUUID,O).ViewPaymentTransactions,Ql={key:0},jl={key:1},bt=ue({__name:"RegistrationActions",props:ne({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ne(["update:registration"],["update:modelValue"]),setup(E,{emit:O}){const c=E,U=de(E,"modelValue"),T=Pt(c,O,void 0,void 0,"registration"),m=p("notes"),a=Qe(),u=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Jl(a,c.convention)&&u.splice(2,0,{label:"Payments",value:"payments"}),(r,h)=>r.useDialog?(s(),k("div",Ql,[e(ct,{modelValue:U.value,"onUpdate:modelValue":h[3]||(h[3]=D=>U.value=D),title:r.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:t(()=>[e(Et,{modelValue:m.value,"onUpdate:modelValue":h[0]||(h[0]=D=>m.value=D),tabs:u,"show-arrows":!0},null,8,["modelValue"])]),default:t(()=>[e(ht,{modelValue:m.value,"onUpdate:modelValue":h[1]||(h[1]=D=>m.value=D),registration:A(T),"onUpdate:registration":h[2]||(h[2]=D=>Oe(T)?T.value=D:null),accommodations:r.accommodations,convention:r.convention,extras:r.extras,forms:r.forms,interests:r.interests,tabs:u,tickets:r.tickets,venues:r.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(s(),k("div",jl,[e(Et,{modelValue:m.value,"onUpdate:modelValue":h[4]||(h[4]=D=>m.value=D),tabs:u,"show-arrows":!0},null,8,["modelValue"]),e(ht,{modelValue:m.value,"onUpdate:modelValue":h[5]||(h[5]=D=>m.value=D),registration:A(T),"onUpdate:registration":h[6]||(h[6]=D=>Oe(T)?T.value=D:null),accommodations:r.accommodations,convention:r.convention,extras:r.extras,forms:r.forms,interests:r.interests,tabs:u,tickets:r.tickets,venues:r.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Ht=(E,O)=>{E.forEach(c=>{c.Items.forEach(U=>{(U.SectionField==null||U.SectionField.Field==null)&&O.find(g=>{g.Sections.find(T=>{if(T.Fields){const m=T.Fields.find(a=>a.SectionFieldUUID===U.SectionFieldUUID);if(m)return U.SectionField=m,!0}})})})})},Wl={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Xl={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Zl={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},eo={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},to={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},ao={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},lo={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},oo={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},no={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},so={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},io={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},uo={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},ro={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},mo={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},co={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},fo={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},vo={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Uo={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},po={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},go={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},To={red:Wl,pink:Xl,purple:Zl,deepPurple:eo,indigo:to,blue:ao,lightBlue:lo,cyan:oo,teal:no,green:so,lightGreen:io,lime:uo,yellow:ro,amber:mo,orange:co,deepOrange:fo,brown:vo,blueGrey:Uo,grey:po,shades:go},yo=Y("h4",null,"Grid Size (Max 12)",-1),_o={key:0,class:"text-warning text-right pl-1"},Io=ue({__name:"EditAdminLayout",props:ne({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change","delete"],["update:modelValue"]),setup(E,{emit:O}){const c=de(E,"modelValue"),U=p([]),g=_e(),T=O,m=p(Object.assign({},...E.layouts.map(F=>F.Panels.map(w=>w.Items.map(f=>{if(!f.Meta)return{};const J={};return Object.entries(f.Meta).forEach(i=>{Array.isArray(i[1])?(J[`${f.LayoutItemUUID}.${i[0]}`]=[],i[1].forEach(X=>{J[`${f.LayoutItemUUID}.${i[0]}`].push(X.toString())})):i[1]!==void 0&&i[1]!==null&&(J[`${f.LayoutItemUUID}.${i[0]}`]=[i[1].toString()])}),J}))).flat(2))),a=p(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),u=p(!1),r=p([]);g.getConventionTags(E.convention.ConventionUUID).then(F=>{F&&(r.value=F)}).catch(()=>{});const h=()=>({ID:0,LayoutPanelUUID:ye(),AdminLayoutID:c.value.ID,AdminLayoutUUID:c.value.AdminLayoutUUID,Name:"",Order:c.value.Panels.length+1,Items:[],PanelStyle:Dt.PANEL_STYLE_FLEX,RequiredFormType:re.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),D=F=>()=>({ID:0,LayoutItemUUID:ye(),LayoutPanelID:F.ID,LayoutPanelUUID:F.LayoutPanelUUID,Label:"",SourceType:Ee.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:F.Items.length+1,DefaultSort:!1,Meta:{}}),_=(F,w)=>{F.Meta[w]=m.value[`${F.LayoutItemUUID}.${w}`]},b=F=>{const w=U.value.find(f=>f.value===F.SectionFieldUUID);w&&(F.SectionFieldID=w.object.ID,F.SectionField=w.object)};g.getConventionForms(c.value.ConventionUUID).then(F=>{F&&(F.forEach(w=>w.Sections.forEach(f=>f.Fields&&U.value.push(...f.Fields.map(J=>{var X;return{title:`${w.Name} - ${f.Name} - ${(X=J.Field)==null?void 0:X.Name}`,value:J.SectionFieldUUID,object:J}})))),U.value.sort(ka("title")),Ht(c.value.Panels,F))});const z=It(()=>{switch(c.value.Type){case ve.ADMIN_LAYOUT_PANELS:return"Panels";case ve.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});Te(c,()=>{T("change")},{deep:!0});const le=It(()=>{const F=/([a-zA-Z]+)(\d+)/;return Object.entries(To).map(([w,f])=>Object.entries(f).map(([J,i])=>{const X=F.exec(J);return!X||X.length<3?void 0:{Title:`${nt(w).split(/(?=[A-Z])/).join(" ")} ${nt(X[1])} ${nt(X[2])}`,CSSName:`${w}-${X[1]}-${X[2]}`,Value:i}})).flat().filter(w=>!!w).sort((w,f)=>w.Title>f.Title?1:w.Title==f.Title?0:-1)});return(F,w)=>(s(),S(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:c.value.Name,"onUpdate:modelValue":w[0]||(w[0]=f=>c.value.Name=f),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:c.value.Type,"onUpdate:modelValue":w[1]||(w[1]=f=>c.value.Type=f),label:"Layout Type",items:A(Da),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),c.value.Type==A(ve).ADMIN_LAYOUT_PANELS?(s(),S(V,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:c.value.RunnerLayoutUUID,"onUpdate:modelValue":w[2]||(w[2]=f=>c.value.RunnerLayoutUUID=f),clearable:!0,items:F.layouts.filter(f=>f.Type===A(ve).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):N("",!0)]),_:1}),e(ae,null,{default:t(()=>[e(V,null,{default:t(()=>[e(rt,{modelValue:c.value.Panels,"onUpdate:modelValue":w[3]||(w[3]=f=>c.value.Panels=f),"new-item":h,closeable:!1,title:z.value,label:"Name","slot-name-prefix":"panel"},Je({_:2},[ie(c.value.Panels,(f,J)=>({name:`panel_${J}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:f.Name,"onUpdate:modelValue":i=>f.Name=i,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),c.value.Type===A(ve).ADMIN_LAYOUT_PANELS?(s(),S(V,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:f.PanelStyle,"onUpdate:modelValue":i=>f.PanelStyle=i,items:A(Aa),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):N("",!0),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:f.RequiredFormType,"onUpdate:modelValue":i=>f.RequiredFormType=i,items:A(Ca),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(za,{label:"Required Groups",variant:"outlined",modelValue:f.RequiredGroupMemberships,"onUpdate:modelValue":i=>f.RequiredGroupMemberships=i,convention:c.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),e(V,{cols:"12",sm:"6"},{default:t(()=>[e(xt,{label:"Registration Tags",variant:"outlined",modelValue:f.RequiredRegistrationTags,"onUpdate:modelValue":i=>f.RequiredRegistrationTags=i,convention:c.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),c.value.Type===A(ve).ADMIN_LAYOUT_PANELS&&f.PanelStyle===A(Dt).PANEL_STYLE_FLEX?(s(),S(ae,{key:0},{default:t(()=>[e(V,{cols:"12",class:"py-0 my-0"},{default:t(()=>[yo]),_:1}),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols,"onUpdate:modelValue":i=>f.Meta.cols=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols_xs,"onUpdate:modelValue":i=>f.Meta.cols_xs=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols_sm,"onUpdate:modelValue":i=>f.Meta.cols_sm=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols_md,"onUpdate:modelValue":i=>f.Meta.cols_md=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols_lg,"onUpdate:modelValue":i=>f.Meta.cols_lg=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:f.Meta.cols_xl,"onUpdate:modelValue":i=>f.Meta.cols_xl=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:2},1024),e(rt,{modelValue:f.Items,"onUpdate:modelValue":i=>f.Items=i,"new-item":D(f),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Je({_:2},[ie(f.Items,(i,X)=>({name:`item_${X}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>{var ce,fe;return[e(ae,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:i.Label,"onUpdate:modelValue":o=>i.Label=o,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(ae,null,{default:t(()=>[e(V,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:i.SourceType,"onUpdate:modelValue":o=>i.SourceType=o,label:"Source Type",items:A(Sa),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(V,{cols:"12",sm:"6"},{default:t(()=>[i.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(s(),S(oe,{key:0,modelValue:i.SectionFieldUUID,"onUpdate:modelValue":o=>i.SectionFieldUUID=o,label:"Form Data",items:U.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:o=>b(i)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):i.SourceType==="LAYOUT_ITEM_SOURCE_META"?(s(),S(oe,{key:1,modelValue:i.MetaField,"onUpdate:modelValue":o=>i.MetaField=o,label:"Miscellaneous Data",items:A(Ea),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):i.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(s(),S(oe,{key:2,modelValue:i.UserField,"onUpdate:modelValue":o=>i.UserField=o,label:"User Profile Data",items:A(ha),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):N("",!0)]),_:2},1024)]),_:2},1024),F.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((fe=(ce=i.SectionField)==null?void 0:ce.Field)==null?void 0:fe.Type)===A(Lt).TEXT?(s(),S(ae,{key:0},{default:t(()=>[e(V,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(Me,{modelValue:i.Meta.DirectEdit,"onUpdate:modelValue":o=>i.Meta.DirectEdit=o,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(oe,{modelValue:i.Meta.DirectEditPermission,"onUpdate:modelValue":o=>i.Meta.DirectEditPermission=o,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),F.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(x).META_DATA_SOURCE_BADGE_DISPLAY?(s(),S(ae,{key:1},{default:t(()=>[e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(Me,{modelValue:i.Meta.HideDownloadButton,"onUpdate:modelValue":o=>i.Meta.HideDownloadButton=o,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(Me,{modelValue:i.Meta.HideNFCButton,"onUpdate:modelValue":o=>i.Meta.HideNFCButton=o,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),F.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(x).META_DATA_SOURCE_DATA_LAYOUT?(s(),S(ae,{key:2},{default:t(()=>[e(V,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(oe,{modelValue:m.value[`${i.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[o=>m.value[`${i.LayoutItemUUID}.LayoutUUID`]=o,o=>_(i,"LayoutUUID")],clearable:!0,items:F.layouts.filter(o=>o.Type===A(ve).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),F.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(x).META_DATA_SOURCE_TAGS?(s(),S(ae,{key:3},{default:t(()=>[e(V,{cols:"6",sm:"6",md:"6",lg:"6"},{default:t(()=>[e(oe,{modelValue:m.value[`${i.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[o=>m.value[`${i.LayoutItemUUID}.Tags`]=o,o=>_(i,"Tags")],clearable:!0,items:r.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!m.value[i.LayoutItemUUID]||m.value[i.LayoutItemUUID].length===0?(s(),k("small",_o," Will show all tags ")):N("",!0)]),_:2},1024),e(V,{cols:"6"},{default:t(()=>[e(oe,{modelValue:i.Meta.TagColour,"onUpdate:modelValue":o=>i.Meta.TagColour=o,items:le.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:t(({item:o})=>[e(W,{size:"x-small",color:o.raw.Value,class:"mr-2"},null,8,["color"]),G(" "+L(o.title),1)]),item:t(({props:o,item:y})=>[e(ke,Mt(Ct(o)),{prepend:t(()=>[e(W,{size:"x-small",color:y.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),c.value.Type===A(ve).ADMIN_LAYOUT_TABLE&&(i.SourceType!==A(Ee).LAYOUT_ITEM_SOURCE_META||i.MetaField!==A(x).META_DATA_SOURCE_DATA_LAYOUT)?(s(),S(ae,{key:4},{default:t(()=>[e(V,null,{default:t(()=>[e(Me,{modelValue:i.DefaultSort,"onUpdate:modelValue":o=>i.DefaultSort=o,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),e(ae,null,{default:t(()=>[e(V,null,{default:t(()=>[e(W,{onClick:w[4]||(w[4]=f=>u.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:t(()=>[G("Delete Layout")]),_:1})]),_:1})]),_:1}),u.value?(s(),S(Ka,{key:0,modelValue:u.value,"onUpdate:modelValue":w[5]||(w[5]=f=>u.value=f),message:a.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:w[6]||(w[6]=f=>T("delete"))},null,8,["modelValue","message"])):N("",!0)]),_:1}))}}),Do=ue({__name:"EditAdminLayouts",props:ne({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ne(["save"],["update:modelValue"]),setup(E,{emit:O}){const c=de(E,"modelValue"),U=O,g=p([]),T=p([]),m=p([]),a=_e(),u=()=>({ID:0,AdminLayoutUUID:ye(),ConventionID:E.convention.ID,ConventionUUID:E.convention.ConventionUUID,Name:"New Layout",Type:ve.ADMIN_LAYOUT_PANELS,Panels:[]}),r=()=>{let D=!1;[...new Set(m.value)].forEach(b=>{const z=g.value.findIndex(le=>le.AdminLayoutUUID===b);z<0||z>=g.value.length||(a.saveAdminLayout(g.value[z]).then(le=>{le&&g.value.splice(z,1,le)}).catch(()=>{}),D=!0)}),T.value.forEach(b=>{a.deleteAdminLayout(b).catch(()=>{})}),T.value=[],m.value=[],D&&U("save")},h=D=>{const _=g.value.findIndex(b=>b.AdminLayoutUUID===D.AdminLayoutUUID);_<0||_>=g.value.length||(g.value[_].ID>0&&T.value.push(D.AdminLayoutUUID),g.value.splice(_,1))};return a.getConventionAdminLayouts(E.convention.ConventionUUID).then(D=>{D&&(g.value=D)}).catch(()=>[]),(D,_)=>(s(),S(qt,{modelValue:c.value,"onUpdate:modelValue":_[2]||(_[2]=b=>c.value=b),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:t(()=>[e(rt,{modelValue:g.value,"onUpdate:modelValue":_[0]||(_[0]=b=>g.value=b),"new-item":u,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:D.title,label:"Name","slot-name-prefix":"panel",onClose:_[1]||(_[1]=b=>c.value=!1),onSave:r},Je({_:2},[ie(g.value,(b,z)=>({name:`panel_${z}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[e(Io,{modelValue:g.value[z],"onUpdate:modelValue":le=>g.value[z]=le,convention:D.convention,layouts:g.value,onChange:le=>m.value.push(b.AdminLayoutUUID),onDelete:le=>h(b)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),Ao=["href","onClick"],So=Y("strong",null,"Expires:",-1),Eo=ue({__name:"OperatorSocket",setup(E){const O=_e(),c=st.getInstance(),U=Qe(),g=Qa(),T=p(!1),m=ba({mode:"host",wsUri:O.getRunnerSocketURL()}),a=Va(),u=p(!1),r=p(!1),h=p([]),D=Ot(),_=p("Connecting"),b=p([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),z=o=>{if(o.editing=!1,o.timer&&clearTimeout(o.timer),!o.selectedDuration){o.expires=void 0,o.timer=void 0;return}const y=new Date;y.setTime(new Date().getTime()+o.selectedDuration),o.expires=y,le(o),i()},le=o=>{if(o.expires){if(o.timer&&clearTimeout(o.timer),typeof o.expires=="number"){const y=new Date;y.setTime(o.expires),o.expires=y}o.expires&&"getTime"in o.expires&&(o.timer=setTimeout(()=>{o.timer&&clearTimeout(o.timer),f(o)},o.expires.getTime()-Date.now()))}};m.on("authenticated",()=>{u.value=!0;const o={Key:"",Mode:"host",UserUUID:(U==null?void 0:U.UserUUID)||""},y={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(o)};m.JSON(y)}),m.on("auth_failed",()=>{u.value=!1,_.value="Access Denied"}),m.on("badge_serial_update",o=>{c.emit("badge_serial_update",o)}),m.on("close",()=>{_.value="Disconnected"}),m.on("open",()=>{const o=a.getTokenByService("GrazeAPI");_.value="Authenticating",m.send(`AUTH ${o==null?void 0:o.AccessToken}`)}),m.on("runner_connected",o=>{const y=o,I=h.value.find(K=>K.key==y.Key);if(!I){F(y.Key,y.UserUUID);return}const P=ol();P.DisplayName=y.DisplayName,P.UserUUID=y.UserUUID,I.users.find(K=>K.UserUUID==P.UserUUID)||I.users.push(P)}),m.on("runner_disconnected",o=>{const y=o,I=h.value.find(K=>K.key==y.Key);if(!I)return;const P=I.users.findIndex(K=>K.UserUUID==y.UserUUID);P<0||I.users.splice(P,1)}),m.on("started",()=>{h.value.forEach(o=>{const y={Key:o.key},I={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(y)};m.JSON(I)}),_.value="Connected"}),ra(()=>{J(),st.getInstance().on("layout_opened",y=>{const I=y;if(!m||!u.value||!I||!I.AdminLayoutUUID||!I.RegistrationUUID)return;const P={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(I)};m.JSON(P)})}),da(()=>{m.destroy()});const F=(o,y)=>{const P={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:o,UserUUID:y})};m.JSON(P)},w=()=>{const o=ye(),I={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:o})};m.JSON(I),h.value.push({key:o,name:"New Session",users:[]}),i()},f=o=>{const y=h.value.findIndex(K=>K==o);if(y<0)return;const I={Key:o.key},P={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(I)};m.JSON(P),h.value.splice(y,1),i()},J=()=>{const o=sessionStorage.getItem("collaboration.sessions");o&&(h.value=JSON.parse(o),h.value.forEach(y=>{typeof y.expires!="number"&&(y.expires=0),le(y)}))},i=()=>{const o=[];h.value.forEach(y=>{o.push({name:y.name,expires:typeof y.expires=="number"?y.expires:y.expires?y.expires.getTime():0,key:y.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(o))},X=o=>{const y=D.resolve({name:"RunnerView",params:{user:U==null?void 0:U.UserUUID,session:o.key}}),I=new URL(location.href);return I.pathname=y.href,I.toString()},ce=o=>{const y=X(o);return Ja(y),r.value=!0,y},fe=o=>{if(typeof o=="number"){const K=new Date;K.setTime(o),o=K}const y=o.getTime()-Date.now(),I=Math.floor(y/(1e3*60*60)),P=Math.floor(y%(1e3*60*60)/(1e3*60));return I==0&&P==0?`${Math.floor(y%6e4/1e3)}s`:`${I}hr${I!=1?"s":""} ${P}min${P!=1?"s":""}`};return(o,y)=>u.value?(s(),k(q,{key:0},[e(W,{icon:"mdi:mdi-link-variant",onClick:y[0]||(y[0]=I=>T.value=!0)}),e(ct,{modelValue:T.value,"onUpdate:modelValue":y[4]||(y[4]=I=>T.value=I),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${_.value}`},{actions:t(()=>[e(it),e(W,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:w},{default:t(()=>[G(" Create Session ")]),_:1})]),default:t(()=>[e(ft,null,{default:t(()=>[(s(!0),k(q,null,ie(h.value,I=>(s(),S(La,{key:I.key,value:I.key},{activator:t(({props:P})=>[e(ke,Mt(Ct(P)),{default:t(()=>[e(Nt,null,{default:t(()=>[e(ae,null,{default:t(()=>[e(V,{style:{"max-width":"84px"}},{default:t(()=>[Y("a",{href:ce(I),onClick:Ve(K=>ce(I),["prevent","stop"]),class:"text-white text-decoration-none"},[e(W,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,Ao),e(W,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:Ve(K=>f(I),["stop"])},null,8,["onClick"])]),_:2},1024),e(V,null,{default:t(()=>[e(ee,{modelValue:I.name,"onUpdate:modelValue":K=>I.name=K,"hide-details":"",variant:"plain",density:"compact",onChange:i,onClick:y[1]||(y[1]=Ve(()=>{},["stop"])),onKeydown:y[2]||(y[2]=Ve(()=>{},["stop"]))},{append:t(()=>[G(L(I.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:t(()=>[I.editing?(s(),S(oe,{key:0,label:"Duration",items:b.value,density:"compact","hide-details":!0,modelValue:I.selectedDuration,"onUpdate:modelValue":[P=>I.selectedDuration=P,P=>z(I)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):I.expires?(s(),k(q,{key:1},[Y("small",null,[So,G(" "+L(fe(I.expires)),1)]),e(W,{onClick:P=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:t(()=>[G(" (Change Expiry) ")]),_:2},1032,["onClick"])],64)):(s(),S(W,{key:2,onClick:P=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:t(()=>[G(" (Set Expiry) ")]),_:2},1032,["onClick"])),(s(!0),k(q,null,ie(I.users,P=>(s(),S(ke,{key:`${I.key}.${P.UserUUID}`},{append:t(()=>[e(W,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:K=>F(I.key,P.UserUUID)},null,8,["onClick"])]),prepend:t(()=>[e(Ft,{src:A(g)(P.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:t(()=>[G(" "+L(P.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]))),128))]),_:1}),e(Ya,{modelValue:r.value,"onUpdate:modelValue":y[3]||(y[3]=I=>r.value=I),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):N("",!0)}}),ho={style:{opacity:"var(--v-medium-emphasis-opacity)"}},bo=ue({__name:"Paginator",props:ne({itemTotal:{}},{currentPage:{required:!0},currentPageModifiers:{},itemsPerPage:{required:!0},itemsPerPageModifiers:{}}),emits:["update:currentPage","update:itemsPerPage"],setup(E){const O=de(E,"currentPage"),c=de(E,"itemsPerPage");return(U,g)=>(s(),S(me,{fluid:!0},{default:t(()=>[e(ae,{class:"align-center"},{default:t(()=>[e(V,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:t(()=>[e(ja,{modelValue:O.value,"onUpdate:modelValue":g[0]||(g[0]=T=>O.value=T),modelModifiers:{number:!0},length:Math.ceil(U.itemTotal/c.value)},null,8,["modelValue","length"])]),_:1}),e(V,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:t(()=>[e(oe,{modelValue:c.value,"onUpdate:modelValue":g[1]||(g[1]=T=>c.value=T),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),e(V,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:t(()=>[e(ee,{modelValue:O.value,"onUpdate:modelValue":g[2]||(g[2]=T=>O.value=T),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(U.itemTotal/c.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(V,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:t(()=>[Y("span",ho,[c.value===-1?(s(),k(q,{key:0},[G(" 1-"+L(U.itemTotal)+" of "+L(U.itemTotal),1)],64)):(s(),k(q,{key:1},[G(L((O.value-1)*c.value+1)+" - "+L(O.value*c.value>=U.itemTotal?U.itemTotal:O.value*c.value)+" of "+L(U.itemTotal),1)],64))])]),_:1})]),_:1})]),_:1}))}}),Vo=["colspan"],Vn=ue({__name:"RegistrationsView",emits:["pageTitle"],setup(E,{emit:O}){var yt;const c=Na();O("pageTitle","Registration Manager");const g=ma(),T=Ot(),m=p(!0);let a=((yt=g.params.convention)==null?void 0:yt.toString())||"";const u=p({ID:0,ConventionUUID:ye(),OrganisationID:0,OrganisationUUID:ze,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),r=_e(),h=st.getInstance(),D=p([]),_=p({ID:0,AdminLayoutUUID:ye(),ConventionID:u.value.ID,ConventionUUID:u.value.ConventionUUID,Name:"Registration Table",RunnerLayoutUUID:ze,Type:ve.ADMIN_LAYOUT_TABLE,Panels:[]}),b=p([]),z=p([]),le=p([]),F=p([]),w=p([]),f=p([]),J=p(1),i=p(10),X=p([]),ce=p(0),fe=p(!1),o=p(""),y=p(""),I=p(""),P=p(""),K=p({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),Xe=p({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),Ze=p({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),et=p({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),zt=p(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",K.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",Xe.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Ze.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",et.value]])),we=p(""),Ne=p(""),Fe=p([]),Pe=p([]),$e=p([]),Ye=p([]),Ge=p([]),Be=p([]),Ue=p(0),se=p(),Ie=p(!1),pt=p(!1),Kt=p(!1),xe=p(),gt=p(),Re=p(),he=p(!1),Jt=Qe(),te=Ha(()=>{y.value=Date.now().toString()});Te(o,n=>{const l=f.value.find(v=>v.uuid===n);if(l){const v=l.headers.find(d=>d.defaultSort===!0);v&&(X.value=[{key:v.key,order:"asc"}],Fe.value=[{key:v.key,order:"asc"}])}qe({page:1,itemsPerPage:i.value,sortBy:Fe.value})}),Te(Ue,n=>{n===8&&Tt()}),Te(we,()=>{te()}),Te(Ne,()=>{te()});const Qt=()=>{b.value=[],le.value=[],F.value=[],f.value=[];try{r.getConventionAdminLayoutByName(u.value.ConventionUUID,"Registration Table").then(n=>{Ue.value+=1,n?_.value=n:(_.value.ConventionID=u.value.ID,_.value.ConventionUUID=u.value.ConventionUUID)})}catch{_.value.ConventionID=u.value.ID,_.value.ConventionUUID=u.value.ConventionUUID}try{r.getConventionAdminLayouts(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(n.forEach(l=>{l.Panels.sort((v,d)=>v.Order>d.Order?1:v.Order===d.Order?0:-1),l.Panels.forEach(v=>{v.Items.sort((d,Q)=>d.Order>Q.Order?1:d.Order===Q.Order?0:-1)})}),le.value=n)})}catch{}try{r.getConventionForms(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(b.value=n)})}catch{}try{r.getConventionAccommodation(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(Pe.value=n)})}catch{}try{r.getConventionVenues(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(Be.value=n)})}catch{}try{r.getConventionExtras(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&($e.value=n)})}catch{}try{r.getConventionInterests(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(Ye.value=n)})}catch{}try{r.getConventionTickets(u.value.ConventionUUID).then(n=>{Ue.value+=1,n&&(Ge.value=n)})}catch{}try{r.getConventionGroups(u.value.ConventionUUID).then(n=>{n&&(z.value=n.sort((l,v)=>l.Name.localeCompare(v.Name)))})}catch{}try{r.getConventionTags(u.value.ConventionUUID).then(n=>{n&&(w.value=n.sort((l,v)=>l.Title.localeCompare(v.Title)).map(l=>(l.Title=`${l.Title} [${l.Key}]`,l)))})}catch{}},qe=({page:n,itemsPerPage:l,sortBy:v})=>{m.value=!0,J.value=n,X.value=v;const d=f.value.find(j=>j.uuid==o.value),Q=d==null?void 0:d.layout.Items;let H="",De="";if(v&&Q&&v.length>=1){const j=Q.find(at=>at.LayoutItemUUID==v[0].key);switch(De=v[0].order||"asc",j==null?void 0:j.MetaField){case x.META_DATA_SOURCE_ACCOMMODATION_FORM:H="submission.status";break;case x.META_DATA_SOURCE_BADGE_FORM:H="submission.status";break;case x.META_DATA_SOURCE_DEALER_FORM:H="submission.status";break;case x.META_DATA_SOURCE_REGISTRATION_FORM:H="submission.status";break;case x.META_DATA_SOURCE_REGISTRATION_REFERENCE:H="reference";break;case x.META_DATA_SOURCE_SUBMISSION_DATE:H="created";break;case x.META_DATA_SOURCE_SUBMISSION_STATUS:H="submission.status";break}switch(j==null?void 0:j.UserField){case Z.USER_DATA_SOURCE_DISPLAY_NAME:H="user.display_name";break;case Z.USER_DATA_SOURCE_EMAIL:H="user.email";break;case Z.USER_DATA_SOURCE_FIRST_NAME:H="user.firstname";break;case Z.USER_DATA_SOURCE_HANDLE:H="user.handle";break;case Z.USER_DATA_SOURCE_LAST_NAME:H="user.lastname";break}}try{const j={Direction:De,Limit:l,Offset:(n-1)*l,Order:H};d&&(j.PanelUUID=d==null?void 0:d.layout.LayoutPanelUUID),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_ACCOMMODATION&&(j.Accommodation=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_BADGE&&(j.Badge=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_DEALER&&(j.Dealer=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_REGISTRATION&&(j.Registration=!0),j.GroupUUID=we.value||ze,j.TagUUID=Ne.value||ze,j.Email=P.value,j.Reference=I.value,j.FieldValues=Array.from(zt.value.values());const at=y.value;r.searchConventionRegistrations(u.value.ConventionUUID,j).then(lt=>{lt&&at===y.value&&(ce.value=lt.Total,F.value=lt.Registrations,f.value.forEach(ot=>{const sa=ot.layout;ot.items=F.value.map(C=>{const He=[];let pe;C.Leader?pe=C:pe=C.Primary,He.push({Name:pe.User.DisplayName,UUID:pe.UserUUID,UserUUID:pe.User.UserUUID,IsLeader:!0,Reference:pe.Reference,Paid:pe.Paid,Total:pe.Total}),He.push(...pe.Members.map(ge=>({Name:ge.User.DisplayName,UUID:ge.UserUUID,UserUUID:ge.User.UserUUID,IsLeader:!1,Reference:ge.Reference,Paid:ge.Paid,Total:ge.Total})));const $={};return ot.headers.forEach(ge=>{var _t;const R=sa.Items.find(Ce=>Ce.LayoutItemUUID===ge.key);if(R){if(R.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&R.SectionField)C.Submissions.forEach(Ce=>{const be=Ce.Data.find(M=>M.SectionFieldUUID===R.SectionFieldUUID);if(be){ge.type===Lt.ACCOMMODATION?$[R.LayoutItemUUID]={Data:be.Data,Registration:C}:$[R.LayoutItemUUID]=be.Data;return}});else if(R.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&R.UserField)switch(R.UserField){case Z.USER_DATA_SOURCE_AVATAR:$[R.LayoutItemUUID]=c.GetProfileImageURL(C.UserUUID);break;case Z.USER_DATA_SOURCE_CONTACTS:$[R.LayoutItemUUID]={},C.User.Generated&&C.User.Generated.telegram_handle&&($[R.LayoutItemUUID].telegram=`@${C.User.Generated.telegram_handle}`),$[R.LayoutItemUUID].email=C.User.Additional.Email;break;case Z.USER_DATA_SOURCE_DISPLAY_NAME:$[R.LayoutItemUUID]=C.User.DisplayName;break;case Z.USER_DATA_SOURCE_EMAIL:$[R.LayoutItemUUID]=C.User.Additional.Email;break;case Z.USER_DATA_SOURCE_HANDLE:$[R.LayoutItemUUID]=C.User.Handle;break;case Z.USER_DATA_SOURCE_DATE_OF_BIRTH:$[R.LayoutItemUUID]=C.User.Additional.DOB;break;case Z.USER_DATA_SOURCE_FIRST_NAME:$[R.LayoutItemUUID]=C.User.Additional.FirstName;break;case Z.USER_DATA_SOURCE_LAST_NAME:$[R.LayoutItemUUID]=C.User.Additional.LastName;break;case Z.USER_DATA_SOURCE_TELEGRAM:C.User.Generated&&C.User.Generated.telegram_handle?$[R.LayoutItemUUID]=`@${C.User.Generated.telegram_handle}`:$[R.LayoutItemUUID]="";break}else if(R.SourceType==="LAYOUT_ITEM_SOURCE_META"&&R.MetaField){const Ce=(_t=b.value.find(M=>M.Type===re.FORM_TYPE_REGISTRATION))==null?void 0:_t.FormUUID,be=C.Submissions.find(M=>M.FormUUID===Ce);switch(R.MetaField){case x.META_DATA_SOURCE_REGISTRATION_ACTIONS:$[R.LayoutItemUUID]=C;break;case x.META_DATA_SOURCE_REGISTRATION_GROUP:$[R.LayoutItemUUID]=He;break;case x.META_DATA_SOURCE_REGISTRATION_REFERENCE:$[R.LayoutItemUUID]=C.Reference;break;case x.META_DATA_SOURCE_SUBMISSION_DATE:if(be){const M=new Date(be.CreatedAt||"");$[R.LayoutItemUUID]=`${M.getFullYear()}-${(M.getMonth()+1).toString().padStart(2,"0")}-${M.getDate().toString().padStart(2,"0")} ${M.getHours().toString().padStart(2,"0")}:${M.getMinutes().toString().padStart(2,"0")}:${M.getSeconds().toString().padStart(2,"0")}`}else{const M=new Date(C.CreatedAt||"");$[R.LayoutItemUUID]=`${M.getFullYear()}-${(M.getMonth()+1).toString().padStart(2,"0")}-${M.getDate().toString().padStart(2,"0")} ${M.getHours().toString().padStart(2,"0")}:${M.getMinutes().toString().padStart(2,"0")}:${M.getSeconds().toString().padStart(2,"0")}`}break;case x.META_DATA_SOURCE_ACCOMMODATION_FORM:$[R.LayoutItemUUID]=C.Submissions.map(M=>{const B=b.value.find(Ae=>Ae.FormUUID===M.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:M,Registration:C}}).filter(M=>{var B;return((B=M.Form)==null?void 0:B.Type)===re.FORM_TYPE_ACCOMMODATION});break;case x.META_DATA_SOURCE_BADGE_FORM:$[R.LayoutItemUUID]=C.Submissions.map(M=>{const B=b.value.find(Ae=>Ae.FormUUID===M.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:M,Registration:C}}).filter(M=>{var B;return((B=M.Form)==null?void 0:B.Type)===re.FORM_TYPE_BADGE});break;case x.META_DATA_SOURCE_DEALER_FORM:$[R.LayoutItemUUID]=C.Submissions.map(M=>{const B=b.value.find(Ae=>Ae.FormUUID===M.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:M,Registration:C}}).filter(M=>{var B;return((B=M.Form)==null?void 0:B.Type)===re.FORM_TYPE_DEALER});break;case x.META_DATA_SOURCE_PAYMENT_STATUS:if(C.Paid===0&&C.Total)$[R.LayoutItemUUID]="REQUIRED";else if(C.Total>C.Paid)$[R.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const M=He.find(B=>B.Paid===0&&(B.Total||0)>0);if(M){C.Total===0&&M.Total===0?$[R.LayoutItemUUID]="NOT_REQUIRED":C.Total===0&&M.Total||C.Total>0&&M.Total===0?$[R.LayoutItemUUID]="MISSING_REQUIRED":C.Paid>=C.Total?$[R.LayoutItemUUID]="AWAITING_PARTNER":$[R.LayoutItemUUID]="ALL_REQUIRED";break}else C.Total===0?$[R.LayoutItemUUID]="NOT_REQUIRED":$[R.LayoutItemUUID]="COMPLETE"}break;case x.META_DATA_SOURCE_SUBMISSION_STATUS:wa(C.Submissions,b.value),$[R.LayoutItemUUID]=C.Submissions.map(M=>{const B=b.value.find(Ae=>Ae.FormUUID===M.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:M,Registration:C}});break;case x.META_DATA_SOURCE_DATA_LAYOUT:$[R.LayoutItemUUID]={Registration:C,Layouts:le.value.filter(M=>{if(R.Meta&&R.Meta.LayoutUUID&&Array.isArray(R.Meta.LayoutUUID))return R.Meta.LayoutUUID.includes(M.AdminLayoutUUID)})};break}}}}),{key:C.RegistrationUUID,registration:C,...$}})}),m.value=!1)})}catch{}},jt=n=>{fe.value=!1,n&&(_.value=n,Tt())},Tt=()=>{Ht(_.value.Panels,b.value),_.value.Panels.length>0&&(f.value=[],_.value.Panels.forEach(n=>{const l={uuid:ye(),order:n.Order,name:n.Name,headers:[],items:[],layout:n};n.Items.sort((v,d)=>v.Order>d.Order?1:v.Order==d.Order?0:-1),l.headers=n.Items.filter(v=>v.SourceType!=Ee.LAYOUT_ITEM_SOURCE_META||v.MetaField!=x.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(v=>{var d,Q;return{key:v.LayoutItemUUID,title:v.Label||((Q=(d=v.SectionField)==null?void 0:d.Field)==null?void 0:Q.Label)||"",align:v.Align==="end"?"end":"start",sortable:Zt(v),type:Wt(v),defaultSort:v.DefaultSort,meta:v.Meta}}),f.value.push(l)}),f.value=f.value.sort((n,l)=>n.order>l.order?1:n.order==l.order?0:-1)),(o.value==null||o.value=="")&&f.value.length>0&&(o.value=f.value[0].uuid)};a?r.getConvention(a).then(n=>{n&&(u.value=n,_.value.ConventionID=u.value.ID,_.value.ConventionUUID=u.value.ConventionUUID,Qt())}).catch(()=>{T.push("/")}):T.push("/");const Wt=n=>{var l,v;if(n.SourceType===Ee.LAYOUT_ITEM_SOURCE_META)return`${n.SourceType}.${n.MetaField}`;if(n.SourceType===Ee.LAYOUT_ITEM_SOURCE_FORM)return(v=(l=n.SectionField)==null?void 0:l.Field)==null?void 0:v.Type;if(n.SourceType===Ee.LAYOUT_ITEM_SOURCE_USER)return`${n.SourceType}.${n.UserField}`},Xt=()=>{const n=f.value.find(l=>l.uuid===o.value);return n?!!n.layout.Items.find(l=>l.SourceType==Ee.LAYOUT_ITEM_SOURCE_META&&l.MetaField==x.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Zt=n=>{const l=[x.META_DATA_SOURCE_ACCOMMODATION_FORM,x.META_DATA_SOURCE_BADGE_FORM,x.META_DATA_SOURCE_DEALER_FORM,x.META_DATA_SOURCE_REGISTRATION_FORM,x.META_DATA_SOURCE_REGISTRATION_REFERENCE,x.META_DATA_SOURCE_SUBMISSION_DATE,x.META_DATA_SOURCE_SUBMISSION_STATUS],v=[Z.USER_DATA_SOURCE_DISPLAY_NAME,Z.USER_DATA_SOURCE_EMAIL,Z.USER_DATA_SOURCE_HANDLE,Z.USER_DATA_SOURCE_DATE_OF_BIRTH,Z.USER_DATA_SOURCE_FIRST_NAME,Z.USER_DATA_SOURCE_LAST_NAME];return l.includes(n.MetaField)||v.includes(n.UserField)},ea=n=>{se.value=n,Ie.value=!0},ta=n=>{se.value=n,pt.value=!0},aa=n=>{se.value=n,Kt.value=!0};Te(Ie,n=>{n||(se.value=void 0)}),Te(pt,n=>{n||(se.value=void 0)});const tt=async(n="")=>{gt.value=await r.getRegistrationGroup(n)},la=({registration:n,form:l})=>{const v={FormUUID:l.FormUUID,Limit:1,RegistrationUUID:n.RegistrationUUID};r.searchConventionRegistrations(n.ConventionUUID,v).then(d=>{if(d&&d.Total>0){if(se.value=d.Registrations[0],!se.value)return;tt(n.RegistrationUUID).then(()=>{var Q,H;se.value&&((Q=se.value)!=null&&Q.Submissions)&&(Re.value=(H=se.value)==null?void 0:H.Submissions.find(De=>De.FormUUID===l.FormUUID)),Re.value||(Re.value=oa(l,n)),xe.value=l,he.value=!0})}})},oa=(n,l)=>({ID:0,SubmissionUUID:ye(),FormID:n.ID,FormUUID:n.FormUUID,Form:n,UserID:l.UserID,UserUUID:l.UserUUID,RegistrationID:l.ID,RegistrationUUID:l.RegistrationUUID,Registration:l,Data:[],Status:Oa.SUBMISSION_STATUS_NULL}),na=n=>{r.switchUser(n.UserUUID).then(l=>{l&&xa(l.tokens,l.user,T,!1)}).catch(l=>{console.error(l)})};return h.on("registration.group.leave",n=>{r.leaveRegistrationGroup(n).then(l=>{l&&tt(n).then(()=>{h.emit("registration.group.left",l)})})}),h.on("registration.group.remove.member",n=>{r.leaveRegistrationGroup(n).then(l=>{l&&tt(n).then(()=>{h.emit("registration.group.left",l)})})}),(n,l)=>(s(),S(al,null,{default:t(()=>[e(St,{color:"blue-darken-4"},{default:t(()=>[e($t,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=v=>o.value=v),"show-arrows":""},{default:t(()=>[(s(!0),k(q,null,ie(f.value,v=>(s(),S(Yt,{key:v.uuid,value:v.uuid},{default:t(()=>[G(L(v.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(it),e(Eo),e(W,{icon:"mdi:mdi-cog-outline",onClick:l[1]||(l[1]=v=>fe.value=!0)})]),_:1}),e(Gt,{modelValue:o.value,"onUpdate:modelValue":l[22]||(l[22]=v=>o.value=v),disabled:!0,touch:!1},{default:t(()=>[(s(!0),k(q,null,ie(f.value,v=>(s(),S(Se,{key:v.uuid,value:v.uuid},{default:t(()=>[v.uuid===o.value?(s(),S(Le,{key:0,class:"pa-2"},{default:t(()=>[e(qa,{expanded:D.value,"onUpdate:expanded":l[18]||(l[18]=d=>D.value=d),page:J.value,"onUpdate:page":l[19]||(l[19]=d=>J.value=d),"items-per-page":i.value,"onUpdate:itemsPerPage":l[20]||(l[20]=d=>i.value=d),"sort-by":Fe.value,"onUpdate:sortBy":l[21]||(l[21]=d=>Fe.value=d),headers:v.headers,"items-length":ce.value,items:v.items,"item-value":"key",loading:m.value,search:y.value,"onUpdate:options":qe,"show-expand":Xt()},Je({top:t(()=>[e(Wa,{class:"mb-3"},{default:t(()=>[e(Xa,null,{default:t(()=>[e(Za,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:t(()=>[e(V,{class:"pa-0"},{default:t(()=>[G(" Search Criteria "),e(Bt,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),e(V,{class:"d-none d-sm-block pa-0",cols:"0"},{default:t(()=>[e(ee,{modelValue:I.value,"onUpdate:modelValue":l[2]||(l[2]=d=>I.value=d),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:l[3]||(l[3]=Ve(()=>{},["stop"])),"onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{class:"d-none d-md-block pa-0"},{default:t(()=>[e(ee,{modelValue:K.value.Value,"onUpdate:modelValue":l[4]||(l[4]=d=>K.value.Value=d),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:l[5]||(l[5]=Ve(()=>{},["stop"])),"onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),e(el,{class:"pt-2"},{default:t(()=>[e(ae,null,{default:t(()=>[e(V,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:t(()=>[e(ee,{modelValue:I.value,"onUpdate:modelValue":l[6]||(l[6]=d=>I.value=d),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:t(()=>[e(ee,{modelValue:K.value.Value,"onUpdate:modelValue":l[7]||(l[7]=d=>K.value.Value=d),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:t(()=>[e(ee,{modelValue:P.value,"onUpdate:modelValue":l[8]||(l[8]=d=>P.value=d),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:Xe.value.Value,"onUpdate:modelValue":l[9]||(l[9]=d=>Xe.value.Value=d),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:Ze.value.Value,"onUpdate:modelValue":l[10]||(l[10]=d=>Ze.value.Value=d),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:et.value.Value,"onUpdate:modelValue":l[11]||(l[11]=d=>et.value.Value=d),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(V,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(oe,{modelValue:we.value,"onUpdate:modelValue":l[12]||(l[12]=d=>we.value=d),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:z.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),e(V,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(oe,{modelValue:Ne.value,"onUpdate:modelValue":l[13]||(l[13]=d=>Ne.value=d),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:w.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":t(({columns:d,internalItem:Q})=>[Y("tr",null,[Y("td",{colspan:d.length},[e(bt,{modelValue:Ie.value,"onUpdate:modelValue":l[15]||(l[15]=H=>Ie.value=H),registration:Q.raw.registration,"onUpdate:registration":H=>Q.raw.registration=H,accommodations:Pe.value,convention:u.value,extras:$e.value,forms:b.value,interests:Ye.value,tickets:Ge.value,title:`Registration Controls (#${Q.raw.registration.Reference} ${Q.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:Be.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,Vo)])]),"item.data-table-expand":t(({internalItem:d})=>[D.value.findIndex(Q=>Q===d.key)>=0?(s(),S(W,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:Q=>D.value.splice(D.value.findIndex(H=>H===d.key),1)},{default:t(()=>[d.raw.registration.Notes&&d.raw.registration.Notes.length>0?(s(),k(q,{key:0},[G(L(d.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"])):(s(),S(W,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:Q=>D.value.push(d.key)},{default:t(()=>[d.raw.registration.Notes&&d.raw.registration.Notes.length>0?(s(),k(q,{key:0},[G(L(d.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"]))]),bottom:t(()=>[e(bo,{"current-page":J.value,"onUpdate:currentPage":l[16]||(l[16]=d=>J.value=d),"items-per-page":i.value,"onUpdate:itemsPerPage":l[17]||(l[17]=d=>i.value=d),"item-total":ce.value},null,8,["current-page","items-per-page","item-total"])]),_:2},[ie(v.headers,d=>({name:`item.${d.key}`,fn:t(({internalItem:Q,index:H})=>[e(Sl,{header:d,item:Q,accommodations:Pe.value,convention:u.value,extras:$e.value,forms:b.value,interests:Ye.value,tickets:Ge.value,user:A(Jt),venues:Be.value,modelValue:v.items[H],"onUpdate:modelValue":De=>v.items[H]=De,onOpenActions:ea,onOpenPayments:ta,onOpenTags:aa,onReload:l[14]||(l[14]=De=>qe({page:J.value,itemsPerPage:i.value,sortBy:X.value})),onSwitchUser:na,onShowForm:la},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"])]),_:2},1024)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),fe.value?(s(),S(Do,{key:0,title:"Edit Layouts",modelValue:fe.value,"onUpdate:modelValue":l[23]||(l[23]=v=>fe.value=v),convention:u.value,onSave:jt},null,8,["modelValue","convention"])):N("",!0),se.value?(s(),k(q,{key:1},[Ie.value?(s(),S(bt,{key:0,modelValue:Ie.value,"onUpdate:modelValue":l[24]||(l[24]=v=>Ie.value=v),registration:se.value,"onUpdate:registration":l[25]||(l[25]=v=>se.value=v),accommodations:Pe.value,convention:u.value,extras:$e.value,forms:b.value,interests:Ye.value,tickets:Ge.value,title:`Registration Controls (#${se.value.Reference} ${se.value.User.DisplayName})`,"use-dialog":!0,venues:Be.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):N("",!0)],64)):N("",!0),he.value&&Re.value&&xe.value?(s(),S(qt,{key:2,modelValue:he.value,"onUpdate:modelValue":l[29]||(l[29]=v=>he.value=v),scrollable:!0,fullscreen:!0,persistent:!0},{default:t(()=>[e(Le,{class:"bg-red-darken-4"},{default:t(()=>[e(St,{color:"error"},{default:t(()=>[e(ll,null,{default:t(()=>[G("Submission Editor - Admin Mode")]),_:1}),e(it),e(tl,null,{default:t(()=>[e(W,{icon:"mdi:mdi-window-close",onClick:l[26]||(l[26]=v=>he.value=!1)})]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(Ra,{modelValue:xe.value,"onUpdate:modelValue":l[27]||(l[27]=v=>xe.value=v),admin:!0,convention:u.value,data:Re.value,editable:!0,"registration-group":gt.value,onClose:l[28]||(l[28]=v=>{he.value=!1,qe({page:J.value,itemsPerPage:i.value,sortBy:X.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):N("",!0)]),_:1}))}});export{Vn as default};
