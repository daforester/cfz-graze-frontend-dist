import{I as D,r as V,e as h,w as x,J as N,K as t,L as n,M as o,v as d,Q as i,N as c,O as T,U as b,R as s,Z as L,H as k,S as f,$ as P,_ as $}from"./index-ecc8c358.js";import{G}from"./userData-72dcd128.js";import{_ as Y}from"./LoginView.vue_vue_type_script_setup_true_lang-3ce3716d.js";import{s as w}from"./index-26b71cef.js";import{F as y}from"./form-e2a93b7c.js";import{S as z}from"./submission-56c4c4f1.js";import{u as B}from"./useStoreAPI-abab2768.js";import{c as A}from"./canEditForm-52ba80b9.js";import{s as H}from"./sortSubmissions-ed9e4490.js";import{V as j}from"./VAvatar-5ca6b6e6.js";import{V as J,a as K,b as Q,c as Z,d as q,e as W}from"./VCard-5c64a5a3.js";import{V as _}from"./VBtn-74521cb2.js";import{V as X}from"./VSpacer-a6b3b223.js";import{V as ee,a as te}from"./VRow-7c233ffb.js";import{j as oe}from"./VContainer-f5ccbbc5.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-b037ed61.js";const ne=["innerHTML"],ae={key:0,class:"font-weight-bold float-left pt-1 w-50"},re={key:1,class:"pa-1"},se={key:0,class:"font-weight-bold float-left pt-1 w-50"},ie={key:1},le=D({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const m=B(),v=P(),p=V(m.GetConventionLogoURL(l.convention.ConventionUUID)),a=V(),u=h(()=>{var e;return A(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_REGISTRATION)}),C=h(()=>{var e;return A(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_DEALER)}),E=h(()=>{var e;return A(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_ACCOMMODATION)});return x(()=>l.forms,()=>{v.getRegistrationByConvention(l.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((O,U)=>{O.Form||(e.Submissions[U].Form=l.forms.find(I=>I.FormUUID===O.FormUUID))}),H(e.Submissions)):e.Submissions=[],a.value=e)})}),(e,O)=>{const U=N("router-link"),I=N("RouterLink");return t(),n(W,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[d(Q,{class:"flex-1-1 align-content-start"},{default:o(()=>[p.value?(t(),n(j,{key:0,src:p.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):i("",!0),e.convention.Name?(t(),n(J,{key:1,class:"text-center"},{default:o(()=>[c(T(e.convention.Name),1)]),_:1})):i("",!0),e.convention.Description?(t(),n(K,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[b("div",{innerHTML:e.convention.Description},null,8,ne)]),_:1})):i("",!0)]),_:1}),d(Z,null,{default:o(()=>{var R;return[b("dl",null,[a.value&&a.value.Reference?(t(),s("dt",ae," Badge No: ")):i("",!0),a.value&&a.value.Reference?(t(),s("dd",re," #"+T(a.value.Reference),1)):i("",!0),(t(!0),s(k,null,L((R=a.value)==null?void 0:R.Submissions,r=>{var S,F,M;return t(),s(k,{key:r.SubmissionUUID},[r.Form?(t(),s(k,{key:0},[r.Form?(t(),s("dt",se,T(r.Form.Heading),1)):i("",!0),r.Form?(t(),s("dd",ie,[c(T(f(z)(r.Status))+" ",1),((S=r.Form)==null?void 0:S.Type)===f(y).FORM_TYPE_REGISTRATION?(t(),n(U,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/registration`},{default:o(()=>{var g;return[(g=r.Form)!=null&&g.State.Edit&&u.value?(t(),n(_,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[c(" Edit ")]),_:1})):(t(),n(_,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[c("View")]),_:1}))]}),_:2},1032,["to"])):((F=r.Form)==null?void 0:F.Type)===f(y).FORM_TYPE_ACCOMMODATION?(t(),n(U,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var g;return[(g=r.Form)!=null&&g.State.Edit&&E.value?(t(),n(_,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[c(" Edit ")]),_:1})):(t(),n(_,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[c("View")]),_:1}))]}),_:2},1032,["to"])):((M=r.Form)==null?void 0:M.Type)===f(y).FORM_TYPE_DEALER?(t(),n(U,{key:2,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`},{default:o(()=>{var g;return[(g=r.Form)!=null&&g.State.Edit&&C.value?(t(),n(_,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[c(" Edit ")]),_:1})):(t(),n(_,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[c("View")]),_:1}))]}),_:2},1032,["to"])):i("",!0)])):i("",!0)],64)):i("",!0)],64)}),128))])]}),_:1}),d(q,null,{default:o(()=>{var R,r;return[e.convention.DetailLink?(t(),n(_,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[c(T(f(w).buttonDetails),1)]),_:1},8,["href"])):i("",!0),d(X),u.value?(t(),s(k,{key:1},[(R=a.value)!=null&&R.Submissions.find(S=>{var F;return((F=S.Form)==null?void 0:F.Type)===f(y).FORM_TYPE_REGISTRATION})?(t(),n(I,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[d(_,{color:"primary"},{default:o(()=>[c(T(f(w).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(t(),s(k,{key:0},[(r=e.forms.find(S=>S.Type===f(y).FORM_TYPE_REGISTRATION))!=null&&r.State.New?(t(),n(I,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[d(_,{color:"primary"},{default:o(()=>[c(T(f(w).buttonRegister),1)]),_:1})]),_:1},8,["to"])):i("",!0)],64))],64)):i("",!0)]}),_:1})]),_:1})}}});const ue=$(le,[["__scopeId","data-v-694e3e9e"]]),ce=D({__name:"Conventions",setup(l){const m=P(),v=V([]),p=V([]);return m.getOpenConventionsList().then(a=>{a&&(v.value=[...v.value,...a],m.getAvailableConventionForms(v.value.map(u=>u.ConventionUUID)).then(u=>{p.value=[...p.value,...u]}).catch(u=>{console.error(u)}))}),(a,u)=>(t(),n(oe,null,{default:o(()=>[d(te,{class:"justify-center"},{default:o(()=>[(t(!0),s(k,null,L(v.value,C=>(t(),n(ee,{key:C.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[d(ue,{convention:C,forms:p.value.filter(E=>E.ConventionUUID===C.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),me={};function fe(l,m){return t(),s("div")}const de=$(me,[["render",fe]]),ve=D({__name:"MainView",emits:["pageTitle"],setup(l,{emit:m}){return m("pageTitle","Scotiacon Registration System"),(v,p)=>(t(),s(k,null,[d(ce),d(de)],64))}}),we=D({__name:"Home",emits:["pageTitle"],setup(l,{emit:m}){const v=G();return m("pageTitle","Telegram Login"),(p,a)=>(t(),s("div",null,[f(v)?(t(),n(ve,{key:0,onPageTitle:a[0]||(a[0]=u=>m("pageTitle",u))})):(t(),n(Y,{key:1}))]))}});export{we as default};
