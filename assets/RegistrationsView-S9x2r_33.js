import{i as de,M as ne,N as fe,r as g,n as s,B as V,q as S,v as t,F as H,y as M,x as G,f as e,Q as ue,A as w,P as ye,D as Y,C as A,a0 as ia,m as ua,k as Ke,w as ge,G as bt,H as Vt,_ as kt,Z as Me,c as _t,a1 as Rt,a2 as Ct,O as Je,U as Ot,a3 as ra,b as da,E as Mt,z as be,V as ma}from"./index-jOULorfz.js";import{_ as ca,D as fa,a as va,b as Ua,c as pa,d as ga,e as Ta,f as ya,g as _a,h as Ia,A as ce,u as nt,i as Da,P as Aa,j as It,L as Sa,M as Ea,U as ha,k as q,l as Se,m as ba,n as Va,o as Z}from"./useTokenManager-R5_eSUc9.js";import{d as ka,b as Lt,c as Ra}from"./FormRenderer.vue_vue_type_style_index_0_lang-OMMvwluK.js";import{F as re,a as Ca}from"./form-0fJbSFPv.js";import{b as Oa,c as wt,d as Dt,S as Ma}from"./submission-40fey8Hx.js";import{G as rt}from"./group-7fhbY6WJ.js";import{C as dt}from"./canDo-8w-iwWYc.js";import{_ as mt}from"./ModelDialog.vue_vue_type_script_setup_true_lang-fSokV-Ni.js";import{a as Ve,c as Nt,V as ct,b as La}from"./VList--Zkz1vkZ.js";import{V as X}from"./VBtn--_Yp9xtQ.js";import{V as Ft}from"./VAvatar-R7WcdoEQ.js";import{s as wa}from"./sortSubmissions-NKScr9xj.js";import{V as st,u as Na}from"./VSpacer-BhdjpIwO.js";import{u as Pt}from"./useModel-Y3fw7SN4.js";import{V as $t,b as Yt,_ as Gt,a as it}from"./VTabs-zgZizx54.js";import{u as Fa,P as Pa}from"./useDisplayTransactions-JoIbvT9F.js";import{G as Qe}from"./userData-v4mR5QKA.js";import{a as ft,V as vt,c as je,e as Le,d as $a}from"./VCard-oUM8fXZx.js";import{V as ae,a as b}from"./VRow-bBRHEqxk.js";import{_ as ut,a as Ya}from"./SaveButton.vue_vue_type_script_setup_true_lang-lvPc1mkU.js";import{V as oe}from"./VSelect-VeX9-8TO.js";import{V as xt,a as me}from"./VContainer-bqzJwqG7.js";import{V as Ga,a as xa}from"./VAlert-n4sHwHPi.js";import{V as Oe}from"./VCheckbox-8yRjZIdB.js";import{a as Ae,V as Bt}from"./VWindowItem-5UT3RR5p.js";import{S as Ba}from"./setupLogin-1Ia1-Quv.js";import{_ as qa}from"./SelectGroups.vue_vue_type_script_setup_true_lang-rtOKCHni.js";import{_ as Ha}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-mr4ggB9q.js";import{V as ee}from"./VTextField-GQFJPxUf.js";import{v as Te}from"./v4-yQnnJER4.js";import{V as qt}from"./VDialog-CyKpmU1z.js";import{c as za}from"./copyToClipboard-aCoRGJiH.js";import{u as Ka}from"./useAvatar-dd0duXX4.js";import{V as Ja}from"./forwardRefs-sQx7Ayyd.js";import{u as ze}from"./nil-rxyd0N8M.js";import{a as Qa}from"./VTable-GDb_HYRp.js";import{V as At,a as ja}from"./VToolbar-i3jB1yI-.js";import{V as Wa}from"./VDataTableServer-QdbaKs5D.js";import{V as Xa,a as Za,b as el,c as tl,e as al}from"./VDataTable-sS3-tDly.js";import"./canEditRegistrations-PHKxD3Wu.js";import"./VAutocomplete-4VlUG9wN.js";import"./filter-jKZS3ict.js";import"./VCheckboxBtn-qiV7JEJx.js";import"./VChip--yl4jqw2.js";import"./VDivider-26J-3vNa.js";import"./VTextarea-f6B0mX-j.js";import"./VForm-DS6OPJ52.js";import"./VNavigationDrawer-FZRzfQGX.js";import"./scopeId-7dCOroFa.js";import"./index-OKsbKlsK.js";import"./VFileInput-h6voCT-t.js";import"./createSimpleFunctional-a-XvPYAM.js";import"./VToolbarItems-CVwLzYnH.js";import"./VOverlay-u2-vt6ya.js";const ll=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),ol=E=>E===void 0?!1:dt(E,rt.GROUP_TYPE_SYSTEM).ManageUsers,nl=de({__name:"DataTableItemPanel",props:ne({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["openActions","showForm"],["update:modelValue"]),setup(E,{emit:N}){const m=N,y=fe(E,"modelValue"),T=g(),f=ye(),p=g(),a=g(!1),r=_=>{const D={AdminLayoutUUID:_.AdminLayoutUUID,Limit:1,RegistrationUUID:y.value.RegistrationUUID};f.searchConventionRegistrations(y.value.ConventionUUID,D).then(h=>{h&&h.Total>0&&(T.value=h.Registrations[0],p.value=_,a.value=!0)})},u=_=>{m("openActions",_)},O=(_,D,h)=>{m("showForm",_,D,h)};return(_,D)=>(s(),V("div",null,[_.layouts?(s(),S(ct,{key:0},{default:t(()=>[(s(!0),V(H,null,ue(_.layouts,h=>(s(),S(Ve,{key:h.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:t(()=>[e(Nt,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:t(()=>[e(X,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:z=>r(h)},{default:t(()=>[G(M(h.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):w("",!0),a.value&&p.value&&T.value?(s(),S(mt,{key:1,modelValue:a.value,"onUpdate:modelValue":D[2]||(D[2]=h=>a.value=h),"hide-extension":!0,fullscreen:!0,title:`#${T.value.Reference} ${T.value.User.DisplayName} - ${p.value.Name} `,scrollable:!0,"card-class":"pa-0","card-style":"margin-bottom: -52px"},{default:t(()=>[e(ca,{accommodations:_.accommodations,convention:_.convention,extras:_.extras,forms:_.forms,interests:_.interests,tickets:_.tickets,venues:_.venues,layout:p.value,"onUpdate:layout":D[0]||(D[0]=h=>p.value=h),modelValue:T.value,"onUpdate:modelValue":D[1]||(D[1]=h=>T.value=h),onOpenActions:u,onShowForm:O},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):w("",!0)]))}}),sl={class:"text-grey-lighten-1"},il={key:0,class:"mb-2"},ul=Y("strong",null,"Email",-1),rl=Y("br",null,null,-1),dl={key:1,class:"mb-2"},ml=Y("strong",null,"Telegram",-1),cl=Y("br",null,null,-1),fl={key:0,class:"text-blue text-center"},vl={key:1,class:"text-red text-center"},Ul={key:2,class:"text-orange text-center"},pl={key:3,class:"text-orange text-center"},gl={key:4,class:"text-orange text-center"},Tl={key:5,class:"text-orange text-center"},yl={key:6,class:"text-green text-center"},_l={key:0},Il={key:0},Dl=Y("strong",null,"Total:",-1),Al=de({__name:"RegListRow",props:ne({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(E,{emit:N}){const m=N,y=fe(E,"modelValue"),T=(a,r)=>{m("showForm",{registration:a,form:r})},f=a=>{m("openActions",a)},p=a=>{m("switchUser",a)};return(a,r)=>a.header.type==="ACCOMMODATION"&&a.accommodations.length>0&&a.item.raw[a.header.key]?(s(),S(fa,{key:0,value:a.item.raw[a.header.key].Data,accommodations:a.accommodations,convention:a.convention,forms:a.forms,tickets:a.tickets,venues:a.venues,registration:a.item.raw[a.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):a.header.type==="EXTRAS"&&a.extras.length>0?(s(),S(va,{key:1,value:a.item.raw[a.header.key],extras:a.extras},null,8,["value","extras"])):a.header.type==="INTERESTS"&&a.interests.length>0?(s(),S(Ua,{key:2,value:a.item.raw[a.header.key],interests:a.interests},null,8,["value","interests"])):a.header.type==="TICKET"&&a.tickets.length>0?(s(),S(pa,{key:3,value:a.item.raw[a.header.key],tickets:a.tickets},null,8,["value","tickets"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(s(),S(ga,{key:4,convention:a.convention,"show-controls":!1,modelValue:a.item.raw.registration,"onUpdate:modelValue":r[0]||(r[0]=u=>a.item.raw.registration=u)},null,8,["convention","modelValue"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(s(),V(H,{key:5},[Y("ul",null,[(s(!0),V(H,null,ue(a.forms.filter(u=>u.Type===A(re).FORM_TYPE_ADMIN&&a.item.raw[a.header.key].findIndex(O=>O.Form.ID===u.ID)<0),u=>(s(),V("li",{key:u.Heading},[Y("strong",sl,M(u.Heading),1),e(X,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:O=>T(a.item.raw.registration,u)},null,8,["onClick"])]))),128))]),Y("ul",null,[(s(!0),V(H,null,ue(a.item.raw[a.header.key],u=>(s(),V("li",{key:u.Heading},[Y("strong",null,[G(M(u.Heading),1),u.Form.Type!==A(re).FORM_TYPE_ADMIN?(s(),V(H,{key:0},[G(": ")],64)):w("",!0)]),u.Form.Type!==A(re).FORM_TYPE_ADMIN?(s(),V("span",{key:0,class:ia(A(Oa)(u.Submission.Status))},M(A(wt)(u.Submission.Status)),3)):w("",!0),e(X,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:O=>T(u.Registration,u.Form)},null,8,["onClick"])]))),128))])],64)):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(s(),S(Ft,{key:6,class:"rounded-circle",src:a.item.raw[a.header.key],height:"32",width:"32"},null,8,["src"])):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(s(),V(H,{key:7},[a.item.raw[a.header.key].email?(s(),V("p",il,[ul,rl,G(M(a.item.raw[a.header.key].email),1)])):w("",!0),a.item.raw[a.header.key].telegram?(s(),V("p",dl,[ml,cl,G(M(a.item.raw[a.header.key].telegram),1)])):w("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(s(),V(H,{key:8},[a.item.raw[a.header.key]=="NOT_REQUIRED"?(s(),V("div",fl,"No Payment Requested")):a.item.raw[a.header.key]=="MISSING_REQUIRED"?(s(),V("div",vl,"Partner Payment Not Requested")):a.item.raw[a.header.key]=="AWAITING_PARTNER"?(s(),V("div",Ul,"Awaiting Partner Payment")):a.item.raw[a.header.key]=="ALL_REQUIRED"?(s(),V("div",pl,"Awaiting Payments")):a.item.raw[a.header.key]=="REQUIRED"?(s(),V("div",gl,"Awaiting Payment")):a.item.raw[a.header.key]=="ADDITIONAL_REQUIRED"?(s(),V("div",Tl,"Awaiting Additional Payments")):(s(),V("div",yl,"Completed"))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(s(),V(H,{key:9},[e(X,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:r[1]||(r[1]=u=>f(a.item.raw[a.header.key]))}),A(ol)(a.user)?(s(),S(X,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:r[2]||(r[2]=u=>p(a.item.raw[a.header.key]))})):w("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(s(),V(H,{key:10},[a.item.raw[a.header.key].length===1?(s(),V("em",_l," Not in a group ")):(s(),V(H,{key:1},[Y("ul",null,[(s(!0),V(H,null,ue(a.item.raw[a.header.key],u=>(s(),V("li",{key:u.UUID,class:"ml-0"},[G(" #"+M(u.Reference)+" : "+M(u.Name)+" ",1),u.IsLeader?(s(),V("strong",Il,"(Leader)")):w("",!0)]))),128))]),Dl,G(" "+M(a.item.raw[a.header.key].length),1)],64))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(s(),V(H,{key:11},[y.value.registration?(s(),S(nl,{key:0,accommodations:a.accommodations,convention:a.convention,extras:a.extras,forms:a.forms,interests:a.interests,tickets:a.tickets,venues:a.venues,layouts:a.item.raw[a.header.key].Layouts,modelValue:y.value.registration,"onUpdate:modelValue":r[3]||(r[3]=u=>y.value.registration=u),onOpenActions:f,onShowForm:T},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):w("",!0)],64)):(s(),V(H,{key:12},[G(M(a.item.raw[a.header.key]),1)],64))}}),St=de({__name:"RegistrationActionTabs",props:ne({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const N=E,m=fe(E,"modelValue");return(y,T)=>(s(),S($t,ua({modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=f=>m.value=f)},N),{default:t(()=>[(s(!0),V(H,null,ue(y.tabs,f=>(s(),S(Yt,{value:f.value,key:f.value},{default:t(()=>[G(M(f.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),Sl=(E=void 0,N)=>E===void 0?!1:dt(E,rt.GROUP_TYPE_CONVENTION,N.ConventionUUID,N).EditPaymentTransactions,We=E=>(bt("data-v-8af8174d"),E=E(),Vt(),E),El={class:"mb-4"},hl={class:"v-row"},bl={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Vl={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},kl={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},Rl={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},Cl=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),Ol={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ml=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),Ll={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},wl=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),Nl={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Fl=We(()=>Y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),Pl={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},$l=de({__name:"PaymentActions",props:ne({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const N=g(!1),m=g(),y=g([]),T=g(new Date().getTime()),f=g(!1),p=fe(E,"modelValue"),a=g(Ke(p.value));ge(p,()=>{a.value=Ke(p.value)});const r=ye();r.getConvention(p.value.ConventionUUID).then(D=>{D&&(f.value=Sl(Qe(),D))});const u=()=>{r.generateRegistrationCharges(p.value.RegistrationUUID,!1).then(D=>{D&&(y.value=D.PaymentTransactions,m.value=D.Registration,T.value=new Date().getTime())}).catch(()=>{})};u();const O=()=>{r.generateRegistrationCharges(p.value.RegistrationUUID,!0).then(D=>{D&&(y.value=D.PaymentTransactions,m.value=D.Registration,T.value=new Date().getTime())})},{totalCharges:_}=Fa();return(D,h)=>(s(),S(Le,null,{default:t(()=>[e(vt,null,{default:t(()=>[e(ft,null,{default:t(()=>[G(" Payments (#"+M(p.value.Reference)+" "+M(p.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[m.value?(s(),V(H,{key:0},[Y("h3",El,"#"+M(m.value.Reference)+" "+M(m.value.User.DisplayName),1),Y("dl",hl,[(s(!0),V(H,null,ue(y.value,z=>(s(),V(H,{key:z.PaymentTransactionUUID},[z.Type===A(Pa).PAYMENT_TRANSACTION_TYPE_CHARGE?(s(),V("dt",bl,[Y("div",Vl,M(z.Description.split(":")[0])+": ",1),Y("div",kl,M(z.Description.split(":")[1]),1)])):w("",!0),Y("dd",Rl," £"+M(z.Amount),1)],64))),128)),Cl,Y("dd",Ol," £"+M(A(_)(y.value)),1),Ml,Y("dd",Ll," £"+M(m.value.Total),1),wl,Y("dd",Nl," £"+M(m.value.Paid),1),Fl,Y("dd",Pl," £"+M(m.value.Total-m.value.Paid),1)]),e(ae,{class:"flex-row-reverse"},{default:t(()=>[e(b,{class:"text-right"},{default:t(()=>[e(X,{color:"primary",onClick:O},{default:t(()=>[G("Apply Charges")]),_:1})]),_:1}),!N.value&&f.value?(s(),S(b,{key:0},{default:t(()=>[e(X,{color:"secondary",onClick:h[0]||(h[0]=z=>N.value=!0)},{default:t(()=>[G("Transaction Entry")]),_:1})]),_:1})):w("",!0)]),_:1})],64)):w("",!0),e(Ta,{"can-edit":f.value,registration:p.value,"show-editor":N.value,onCloseEditor:h[1]||(h[1]=z=>N.value=!1),updated:T.value,onChange:u},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),Yl=kt($l,[["__scopeId","data-v-8af8174d"]]),Gl=de({__name:"RegistrationFormStatus",props:ne({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const N=ye(),m=fe(E,"modelValue"),y=(T,f)=>{const p=m.value.Submissions.find(a=>a.SubmissionUUID==f);if(!p){T&&T("Submission not found");return}N.setSubmissionStatus(f,p.Status).then(a=>{a?(m.value.Submissions.forEach((r,u)=>{m.value.Submissions[u].Status=r.Status}),T&&T("Status Saved")):T&&T("Status not saved")}).catch(()=>{T&&T("Status not saved")})};return(T,f)=>(s(),S(Le,null,{default:t(()=>[e(vt,null,{default:t(()=>[e(ft,null,{default:t(()=>[G("Status (#"+M(m.value.Reference)+" "+M(m.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(ct,null,{default:t(()=>[(s(!0),V(H,null,ue(m.value.Submissions,p=>(s(),S(Ve,{key:p.SubmissionUUID,class:"pa-0"},{default:t(()=>[e(ae,{class:"py-2 align-center"},{default:t(()=>[e(b,{cols:"9",sm:"10",md:"10",lg:"9"},{default:t(()=>{var a;return[e(oe,{modelValue:p.Status,"onUpdate:modelValue":r=>p.Status=r,items:A(Dt),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((a=T.forms.find(r=>r.FormUUID==p.FormUUID))==null?void 0:a.Name)||""},{selection:t(()=>[e(xt,{class:"mr-4 d-none d-sm-inline"},{default:t(()=>{var r;return[G(M((r=A(Dt).find(u=>u.value===p.Status))==null?void 0:r.icon),1)]}),_:2},1024),G(" "+M(A(wt)(p.Status)),1)]),item:t(({item:r,props:{onClick:u}})=>[e(Ve,{title:r.title,"prepend-icon":r.raw.icon,onClick:u},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),e(b,{cols:"3",sm:"2",md:"2",lg:"1"},{default:t(()=>[e(ut,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:a=>y(a.callback,p.SubmissionUUID)},null,8,["onClick"]),e(ut,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:a=>y(a.callback,p.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),xl=E=>(bt("data-v-7d39acf0"),E=E(),Vt(),E),Bl=xl(()=>Y("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),ql={class:"mb-4"},Hl=de({__name:"RegistrationTags",props:ne({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(E){const N=ye(),m=fe(E,"modelValue"),y=g(Ke(m.value)),T=g(!1),f=g(y.value.Tags);ge(m,()=>{y.value=Ke(m.value)});const p=({callback:a})=>{const r=[],u=[];y.value.Tags.forEach(O=>{f.value.find(D=>D.TagUUID===O.TagUUID)||r.push(O.TagUUID)}),f.value.forEach(O=>{y.value.Tags.find(D=>O.TagUUID===D.TagUUID)||u.push(O.TagUUID)}),N.updateRegistrationTags(r,u,y.value.RegistrationUUID).then(O=>{O?a&&(a("Tags Saved"),m.value.Tags=O.Tags):a&&a("Error Saving Tags")}).catch(()=>{a&&a("Error Saving Tags")})};return(a,r)=>(s(),S(Le,null,{default:t(()=>[e(vt,null,{default:t(()=>[e(ft,null,{default:t(()=>[G("Tags (#"+M(y.value.Reference)+" "+M(y.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(Ga,{class:"my-4"},{default:t(()=>[e(xa,null,{default:t(()=>[G("Caution")]),_:1}),Bl]),_:1}),Y("h3",ql,"#"+M(y.value.Reference)+" "+M(y.value.User.DisplayName),1),e(Gt,{modelValue:y.value.Tags,"onUpdate:modelValue":r[0]||(r[0]=u=>y.value.Tags=u),convention:y.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":T.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),e($a,{class:"px-4 align-start"},{default:t(()=>[e(Oe,{label:"Show UUID",modelValue:T.value,"onUpdate:modelValue":r[1]||(r[1]=u=>T.value=u)},null,8,["modelValue"]),e(ut,{onClick:p,variant:"flat"})]),_:1})]),_:1}))}}),zl=kt(Hl,[["__scopeId","data-v-7d39acf0"]]),Et=de({__name:"RegistrationActionWindows",props:ne({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["update:registration"],["update:modelValue"]),setup(E,{emit:N}){const m=E,y=fe(E,"modelValue"),f=Pt(m,N,void 0,void 0,"registration");return(p,a)=>(s(),S(Bt,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=r=>y.value=r),disabled:!0,touch:!1},{default:t(()=>[e(Ae,{value:"badges"},{default:t(()=>[y.value=="badges"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(ya,{convention:p.convention,registration:A(f)},null,8,["convention","registration"])]),_:1})):w("",!0)]),_:1}),e(Ae,{value:"emails"},{default:t(()=>[y.value=="emails"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(_a,{registration:A(f)},null,8,["registration"])]),_:1})):w("",!0)]),_:1}),e(Ae,{value:"notes"},{default:t(()=>[y.value=="notes"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Ia,{convention:p.convention,expanded:!1,registration:A(f)},null,8,["convention","registration"])]),_:1})):w("",!0)]),_:1}),e(Ae,{value:"payments"},{default:t(()=>[y.value=="payments"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Yl,{modelValue:A(f),"onUpdate:modelValue":a[0]||(a[0]=r=>Me(f)?f.value=r:null),forms:p.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):w("",!0)]),_:1}),e(Ae,{value:"status"},{default:t(()=>[y.value=="status"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(Gl,{modelValue:A(f),"onUpdate:modelValue":a[1]||(a[1]=r=>Me(f)?f.value=r:null),forms:p.forms},null,8,["modelValue","forms"])]),_:1})):w("",!0)]),_:1}),e(Ae,{value:"tags"},{default:t(()=>[y.value=="tags"?(s(),S(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:t(()=>[e(zl,{modelValue:A(f),"onUpdate:modelValue":a[2]||(a[2]=r=>Me(f)?f.value=r:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):w("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Kl=(E,N)=>E===void 0?!1:dt(E,rt.GROUP_TYPE_CONVENTION,N.ConventionUUID,N).ViewPaymentTransactions,Jl={key:0},Ql={key:1},ht=de({__name:"RegistrationActions",props:ne({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ne(["update:registration"],["update:modelValue"]),setup(E,{emit:N}){const m=E,y=fe(E,"modelValue"),f=Pt(m,N,void 0,void 0,"registration"),p=g("notes"),a=Qe(),r=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Kl(a,m.convention)&&r.splice(2,0,{label:"Payments",value:"payments"}),(u,O)=>u.useDialog?(s(),V("div",Jl,[e(mt,{modelValue:y.value,"onUpdate:modelValue":O[3]||(O[3]=_=>y.value=_),title:u.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:t(()=>[e(St,{modelValue:p.value,"onUpdate:modelValue":O[0]||(O[0]=_=>p.value=_),tabs:r,"show-arrows":!0},null,8,["modelValue"])]),default:t(()=>[e(Et,{modelValue:p.value,"onUpdate:modelValue":O[1]||(O[1]=_=>p.value=_),registration:A(f),"onUpdate:registration":O[2]||(O[2]=_=>Me(f)?f.value=_:null),accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tabs:r,tickets:u.tickets,venues:u.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(s(),V("div",Ql,[e(St,{modelValue:p.value,"onUpdate:modelValue":O[4]||(O[4]=_=>p.value=_),tabs:r,"show-arrows":!0},null,8,["modelValue"]),e(Et,{modelValue:p.value,"onUpdate:modelValue":O[5]||(O[5]=_=>p.value=_),registration:A(f),"onUpdate:registration":O[6]||(O[6]=_=>Me(f)?f.value=_:null),accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tabs:r,tickets:u.tickets,venues:u.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),jl=(E,N=500,m=!1)=>{let y;return(...T)=>{const p=function(){y=void 0,m||E.apply(void 0,T)},a=m&&!y;clearTimeout(y),y=setTimeout(p,N),a&&E.apply(void 0,T)}},Ht=(E,N)=>{E.forEach(m=>{m.Items.forEach(y=>{(y.SectionField==null||y.SectionField.Field==null)&&N.find(T=>{T.Sections.find(f=>{if(f.Fields){const p=f.Fields.find(a=>a.SectionFieldUUID===y.SectionFieldUUID);if(p)return y.SectionField=p,!0}})})})})},Wl={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Xl={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Zl={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},eo={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},to={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},ao={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},lo={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},oo={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},no={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},so={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},io={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},uo={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},ro={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},mo={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},co={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},fo={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},vo={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Uo={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},po={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},go={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},To={red:Wl,pink:Xl,purple:Zl,deepPurple:eo,indigo:to,blue:ao,lightBlue:lo,cyan:oo,teal:no,green:so,lightGreen:io,lime:uo,yellow:ro,amber:mo,orange:co,deepOrange:fo,brown:vo,blueGrey:Uo,grey:po,shades:go},yo=Y("h4",null,"Grid Size (Max 12)",-1),_o={key:0,class:"text-warning text-right pl-1"},Io=de({__name:"EditAdminLayout",props:ne({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change","delete"],["update:modelValue"]),setup(E,{emit:N}){const m=fe(E,"modelValue"),y=g([]),T=ye(),f=N,p=g(Object.assign({},...E.layouts.map(P=>P.Panels.map(L=>L.Items.map(c=>{if(!c.Meta)return{};const B={};return Object.entries(c.Meta).forEach(i=>{Array.isArray(i[1])?(B[`${c.LayoutItemUUID}.${i[0]}`]=[],i[1].forEach(j=>{B[`${c.LayoutItemUUID}.${i[0]}`].push(j.toString())})):i[1]!==void 0&&i[1]!==null&&(B[`${c.LayoutItemUUID}.${i[0]}`]=[i[1].toString()])}),B}))).flat(2))),a=g(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),r=g(!1),u=g([]);T.getConventionTags(E.convention.ConventionUUID).then(P=>{P&&(u.value=P)}).catch(()=>{});const O=()=>({ID:0,LayoutPanelUUID:Te(),AdminLayoutID:m.value.ID,AdminLayoutUUID:m.value.AdminLayoutUUID,Name:"",Order:m.value.Panels.length+1,Items:[],PanelStyle:It.PANEL_STYLE_FLEX,RequiredFormType:re.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),_=P=>()=>({ID:0,LayoutItemUUID:Te(),LayoutPanelID:P.ID,LayoutPanelUUID:P.LayoutPanelUUID,Label:"",SourceType:Se.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:P.Items.length+1,DefaultSort:!1,Meta:{}}),D=(P,L)=>{P.Meta[L]=p.value[`${P.LayoutItemUUID}.${L}`]},h=P=>{const L=y.value.find(c=>c.value===P.SectionFieldUUID);L&&(P.SectionFieldID=L.object.ID,P.SectionField=L.object)};T.getConventionForms(m.value.ConventionUUID).then(P=>{P&&(P.forEach(L=>L.Sections.forEach(c=>c.Fields&&y.value.push(...c.Fields.map(B=>{var j;return{title:`${L.Name} - ${c.Name} - ${(j=B.Field)==null?void 0:j.Name}`,value:B.SectionFieldUUID,object:B}})))),y.value.sort(ka("title")),Ht(m.value.Panels,P))});const z=_t(()=>{switch(m.value.Type){case ce.ADMIN_LAYOUT_PANELS:return"Panels";case ce.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});ge(m,()=>{f("change")},{deep:!0});const le=_t(()=>{const P=/([a-zA-Z]+)(\d+)/;return Object.entries(To).map(([L,c])=>Object.entries(c).map(([B,i])=>{const j=P.exec(B);return!j||j.length<3?void 0:{Title:`${nt(L).split(/(?=[A-Z])/).join(" ")} ${nt(j[1])} ${nt(j[2])}`,CSSName:`${L}-${j[1]}-${j[2]}`,Value:i}})).flat().filter(L=>!!L).sort((L,c)=>L.Title>c.Title?1:L.Title==c.Title?0:-1)});return(P,L)=>(s(),S(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:m.value.Name,"onUpdate:modelValue":L[0]||(L[0]=c=>m.value.Name=c),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:m.value.Type,"onUpdate:modelValue":L[1]||(L[1]=c=>m.value.Type=c),label:"Layout Type",items:A(Da),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),m.value.Type==A(ce).ADMIN_LAYOUT_PANELS?(s(),S(b,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:m.value.RunnerLayoutUUID,"onUpdate:modelValue":L[2]||(L[2]=c=>m.value.RunnerLayoutUUID=c),clearable:!0,items:P.layouts.filter(c=>c.Type===A(ce).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):w("",!0)]),_:1}),e(ae,null,{default:t(()=>[e(b,null,{default:t(()=>[e(it,{modelValue:m.value.Panels,"onUpdate:modelValue":L[3]||(L[3]=c=>m.value.Panels=c),"new-item":O,closeable:!1,title:z.value,label:"Name","slot-name-prefix":"panel"},Je({_:2},[ue(m.value.Panels,(c,B)=>({name:`panel_${B}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:c.Name,"onUpdate:modelValue":i=>c.Name=i,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),m.value.Type===A(ce).ADMIN_LAYOUT_PANELS?(s(),S(b,{key:0,cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:c.PanelStyle,"onUpdate:modelValue":i=>c.PanelStyle=i,items:A(Aa),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):w("",!0),e(b,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:c.RequiredFormType,"onUpdate:modelValue":i=>c.RequiredFormType=i,items:A(Ca),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(b,{cols:"12",sm:"6"},{default:t(()=>[e(qa,{label:"Required Groups",variant:"outlined",modelValue:c.RequiredGroupMemberships,"onUpdate:modelValue":i=>c.RequiredGroupMemberships=i,convention:m.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),e(b,{cols:"12",sm:"6"},{default:t(()=>[e(Gt,{label:"Registration Tags",variant:"outlined",modelValue:c.RequiredRegistrationTags,"onUpdate:modelValue":i=>c.RequiredRegistrationTags=i,convention:m.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),m.value.Type===A(ce).ADMIN_LAYOUT_PANELS&&c.PanelStyle===A(It).PANEL_STYLE_FLEX?(s(),S(ae,{key:0},{default:t(()=>[e(b,{cols:"12",class:"py-0 my-0"},{default:t(()=>[yo]),_:1}),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols,"onUpdate:modelValue":i=>c.Meta.cols=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols_xs,"onUpdate:modelValue":i=>c.Meta.cols_xs=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols_sm,"onUpdate:modelValue":i=>c.Meta.cols_sm=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols_md,"onUpdate:modelValue":i=>c.Meta.cols_md=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols_lg,"onUpdate:modelValue":i=>c.Meta.cols_lg=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(ee,{modelValue:c.Meta.cols_xl,"onUpdate:modelValue":i=>c.Meta.cols_xl=i,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):w("",!0)]),_:2},1024),e(it,{modelValue:c.Items,"onUpdate:modelValue":i=>c.Items=i,"new-item":_(c),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Je({_:2},[ue(c.Items,(i,j)=>({name:`item_${j}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>{var se,U;return[e(ae,null,{default:t(()=>[e(b,{cols:"12",sm:"6"},{default:t(()=>[e(ee,{modelValue:i.Label,"onUpdate:modelValue":n=>i.Label=n,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(ae,null,{default:t(()=>[e(b,{cols:"12",sm:"6"},{default:t(()=>[e(oe,{modelValue:i.SourceType,"onUpdate:modelValue":n=>i.SourceType=n,label:"Source Type",items:A(Sa),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(b,{cols:"12",sm:"6"},{default:t(()=>[i.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(s(),S(oe,{key:0,modelValue:i.SectionFieldUUID,"onUpdate:modelValue":n=>i.SectionFieldUUID=n,label:"Form Data",items:y.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:n=>h(i)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):i.SourceType==="LAYOUT_ITEM_SOURCE_META"?(s(),S(oe,{key:1,modelValue:i.MetaField,"onUpdate:modelValue":n=>i.MetaField=n,label:"Miscellaneous Data",items:A(Ea),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):i.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(s(),S(oe,{key:2,modelValue:i.UserField,"onUpdate:modelValue":n=>i.UserField=n,label:"User Profile Data",items:A(ha),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):w("",!0)]),_:2},1024)]),_:2},1024),P.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((U=(se=i.SectionField)==null?void 0:se.Field)==null?void 0:U.Type)===A(Lt).TEXT?(s(),S(ae,{key:0},{default:t(()=>[e(b,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(Oe,{modelValue:i.Meta.DirectEdit,"onUpdate:modelValue":n=>i.Meta.DirectEdit=n,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:t(()=>[e(oe,{modelValue:i.Meta.DirectEditPermission,"onUpdate:modelValue":n=>i.Meta.DirectEditPermission=n,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):w("",!0),P.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(q).META_DATA_SOURCE_BADGE_DISPLAY?(s(),S(ae,{key:1},{default:t(()=>[e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(Oe,{modelValue:i.Meta.HideDownloadButton,"onUpdate:modelValue":n=>i.Meta.HideDownloadButton=n,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(Oe,{modelValue:i.Meta.HideNFCButton,"onUpdate:modelValue":n=>i.Meta.HideNFCButton=n,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):w("",!0),P.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(q).META_DATA_SOURCE_DATA_LAYOUT?(s(),S(ae,{key:2},{default:t(()=>[e(b,{cols:"6",sm:"4",lg:"2"},{default:t(()=>[e(oe,{modelValue:p.value[`${i.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[n=>p.value[`${i.LayoutItemUUID}.LayoutUUID`]=n,n=>D(i,"LayoutUUID")],clearable:!0,items:P.layouts.filter(n=>n.Type===A(ce).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):w("",!0),P.layouts&&i.SourceType==="LAYOUT_ITEM_SOURCE_META"&&i.MetaField===A(q).META_DATA_SOURCE_TAGS?(s(),S(ae,{key:3},{default:t(()=>[e(b,{cols:"6",sm:"6",md:"6",lg:"6"},{default:t(()=>[e(oe,{modelValue:p.value[`${i.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[n=>p.value[`${i.LayoutItemUUID}.Tags`]=n,n=>D(i,"Tags")],clearable:!0,items:u.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!p.value[i.LayoutItemUUID]||p.value[i.LayoutItemUUID].length===0?(s(),V("small",_o," Will show all tags ")):w("",!0)]),_:2},1024),e(b,{cols:"6"},{default:t(()=>[e(oe,{modelValue:i.Meta.TagColour,"onUpdate:modelValue":n=>i.Meta.TagColour=n,items:le.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:t(({item:n})=>[e(X,{size:"x-small",color:n.raw.Value,class:"mr-2"},null,8,["color"]),G(" "+M(n.title),1)]),item:t(({props:n,item:I})=>[e(Ve,Ct(Rt(n)),{prepend:t(()=>[e(X,{size:"x-small",color:I.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):w("",!0),m.value.Type===A(ce).ADMIN_LAYOUT_TABLE&&(i.SourceType!==A(Se).LAYOUT_ITEM_SOURCE_META||i.MetaField!==A(q).META_DATA_SOURCE_DATA_LAYOUT)?(s(),S(ae,{key:4},{default:t(()=>[e(b,null,{default:t(()=>[e(Oe,{modelValue:i.DefaultSort,"onUpdate:modelValue":n=>i.DefaultSort=n,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):w("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),e(ae,null,{default:t(()=>[e(b,null,{default:t(()=>[e(X,{onClick:L[4]||(L[4]=c=>r.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:t(()=>[G("Delete Layout")]),_:1})]),_:1})]),_:1}),r.value?(s(),S(Ha,{key:0,modelValue:r.value,"onUpdate:modelValue":L[5]||(L[5]=c=>r.value=c),message:a.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:L[6]||(L[6]=c=>f("delete"))},null,8,["modelValue","message"])):w("",!0)]),_:1}))}}),Do=de({__name:"EditAdminLayouts",props:ne({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:ne(["save"],["update:modelValue"]),setup(E,{emit:N}){const m=fe(E,"modelValue"),y=N,T=g([]),f=g([]),p=g([]),a=ye(),r=()=>({ID:0,AdminLayoutUUID:Te(),ConventionID:E.convention.ID,ConventionUUID:E.convention.ConventionUUID,Name:"New Layout",Type:ce.ADMIN_LAYOUT_PANELS,Panels:[]}),u=()=>{let _=!1;[...new Set(p.value)].forEach(h=>{const z=T.value.findIndex(le=>le.AdminLayoutUUID===h);z<0||z>=T.value.length||(a.saveAdminLayout(T.value[z]).then(le=>{le&&T.value.splice(z,1,le)}).catch(()=>{}),_=!0)}),f.value.forEach(h=>{a.deleteAdminLayout(h).catch(()=>{})}),f.value=[],p.value=[],_&&y("save")},O=_=>{const D=T.value.findIndex(h=>h.AdminLayoutUUID===_.AdminLayoutUUID);D<0||D>=T.value.length||(T.value[D].ID>0&&f.value.push(_.AdminLayoutUUID),T.value.splice(D,1))};return a.getConventionAdminLayouts(E.convention.ConventionUUID).then(_=>{_&&(T.value=_)}).catch(()=>[]),(_,D)=>(s(),S(qt,{modelValue:m.value,"onUpdate:modelValue":D[2]||(D[2]=h=>m.value=h),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:t(()=>[e(it,{modelValue:T.value,"onUpdate:modelValue":D[0]||(D[0]=h=>T.value=h),"new-item":r,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:_.title,label:"Name","slot-name-prefix":"panel",onClose:D[1]||(D[1]=h=>m.value=!1),onSave:u},Je({_:2},[ue(T.value,(h,z)=>({name:`panel_${z}`,fn:t(()=>[e(me,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(Io,{modelValue:T.value[z],"onUpdate:modelValue":le=>T.value[z]=le,convention:_.convention,layouts:T.value,onChange:le=>p.value.push(h.AdminLayoutUUID),onDelete:le=>O(h)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),Ao=["href","onClick"],So=Y("strong",null,"Expires:",-1),Eo=de({__name:"OperatorSocket",setup(E){const N=ye(),m=Qe(),y=Ka(),T=g(!1),f=ba({mode:"host",wsUri:N.getRunnerSocketURL()}),p=Va(),a=g(!1),r=g(!1),u=g([]),O=Ot(),_=g("Connecting"),D=g([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),h=U=>{if(U.editing=!1,U.timer&&clearTimeout(U.timer),!U.selectedDuration){U.expires=void 0,U.timer=void 0;return}const n=new Date;n.setTime(new Date().getTime()+U.selectedDuration),U.expires=n,z(U),B()},z=U=>{if(U.expires){if(U.timer&&clearTimeout(U.timer),typeof U.expires=="number"){const n=new Date;n.setTime(U.expires),U.expires=n}U.expires&&"getTime"in U.expires&&(U.timer=setTimeout(()=>{U.timer&&clearTimeout(U.timer),L(U)},U.expires.getTime()-Date.now()))}};f.on("authenticated",()=>{a.value=!0;const U={Key:"",Mode:"host",UserUUID:(m==null?void 0:m.UserUUID)||""},n={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(U)};f.JSON(n)}),f.on("auth_failed",()=>{a.value=!1,_.value="Access Denied"}),f.on("close",()=>{_.value="Disconnected"}),f.on("open",()=>{const U=p.getTokenByService("GrazeAPI");_.value="Authenticating",f.send(`AUTH ${U==null?void 0:U.AccessToken}`)}),f.on("runner_connected",U=>{const n=U,I=u.value.find(J=>J.key==n.Key);if(!I){le(n.Key,n.UserUUID);return}const F=ll();F.DisplayName=n.DisplayName,F.UserUUID=n.UserUUID,I.users.find(J=>J.UserUUID==F.UserUUID)||I.users.push(F)}),f.on("runner_disconnected",U=>{const n=U,I=u.value.find(J=>J.key==n.Key);if(!I)return;const F=I.users.findIndex(J=>J.UserUUID==n.UserUUID);F<0||I.users.splice(F,1)}),f.on("started",()=>{u.value.forEach(U=>{const n={Key:U.key},I={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(n)};f.JSON(I)}),_.value="Connected"}),ra(()=>{c(),Mt.getInstance().on("layout_opened",n=>{const I=n;if(!f||!a.value||!I||!I.AdminLayoutUUID||!I.RegistrationUUID)return;const F={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(I)};f.JSON(F)})}),da(()=>{f.destroy()});const le=(U,n)=>{const F={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:U,UserUUID:n})};f.JSON(F)},P=()=>{const U=Te(),I={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:U})};f.JSON(I),u.value.push({key:U,name:"New Session",users:[]}),B()},L=U=>{const n=u.value.findIndex(J=>J==U);if(n<0)return;const I={Key:U.key},F={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(I)};f.JSON(F),u.value.splice(n,1),B()},c=()=>{const U=sessionStorage.getItem("collaboration.sessions");U&&(u.value=JSON.parse(U),u.value.forEach(n=>{typeof n.expires!="number"&&(n.expires=0),z(n)}))},B=()=>{const U=[];u.value.forEach(n=>{U.push({name:n.name,expires:typeof n.expires=="number"?n.expires:n.expires?n.expires.getTime():0,key:n.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(U))},i=U=>{const n=O.resolve({name:"RunnerView",params:{user:m==null?void 0:m.UserUUID,session:U.key}}),I=new URL(location.href);return I.pathname=n.href,I.toString()},j=U=>{const n=i(U);return za(n),r.value=!0,n},se=U=>{if(typeof U=="number"){const J=new Date;J.setTime(U),U=J}const n=U.getTime()-Date.now(),I=Math.floor(n/(1e3*60*60)),F=Math.floor(n%(1e3*60*60)/(1e3*60));return I==0&&F==0?`${Math.floor(n%6e4/1e3)}s`:`${I}hr${I!=1?"s":""} ${F}min${F!=1?"s":""}`};return(U,n)=>a.value?(s(),V(H,{key:0},[e(X,{icon:"mdi:mdi-link-variant",onClick:n[0]||(n[0]=I=>T.value=!0)}),e(mt,{modelValue:T.value,"onUpdate:modelValue":n[4]||(n[4]=I=>T.value=I),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${_.value}`},{actions:t(()=>[e(st),e(X,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:P},{default:t(()=>[G(" Create Session ")]),_:1})]),default:t(()=>[e(ct,null,{default:t(()=>[(s(!0),V(H,null,ue(u.value,I=>(s(),S(La,{key:I.key,value:I.key},{activator:t(({props:F})=>[e(Ve,Ct(Rt(F)),{default:t(()=>[e(Nt,null,{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{style:{"max-width":"84px"}},{default:t(()=>[Y("a",{href:j(I),onClick:be(J=>j(I),["prevent","stop"]),class:"text-white text-decoration-none"},[e(X,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,Ao),e(X,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:be(J=>L(I),["stop"])},null,8,["onClick"])]),_:2},1024),e(b,null,{default:t(()=>[e(ee,{modelValue:I.name,"onUpdate:modelValue":J=>I.name=J,"hide-details":"",variant:"plain",density:"compact",onChange:B,onClick:n[1]||(n[1]=be(()=>{},["stop"])),onKeydown:n[2]||(n[2]=be(()=>{},["stop"]))},{append:t(()=>[G(M(I.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:t(()=>[I.editing?(s(),S(oe,{key:0,label:"Duration",items:D.value,density:"compact","hide-details":!0,modelValue:I.selectedDuration,"onUpdate:modelValue":[F=>I.selectedDuration=F,F=>h(I)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):I.expires?(s(),V(H,{key:1},[Y("small",null,[So,G(" "+M(se(I.expires)),1)]),e(X,{onClick:F=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:t(()=>[G(" (Change Expiry) ")]),_:2},1032,["onClick"])],64)):(s(),S(X,{key:2,onClick:F=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:t(()=>[G(" (Set Expiry) ")]),_:2},1032,["onClick"])),(s(!0),V(H,null,ue(I.users,F=>(s(),S(Ve,{key:`${I.key}.${F.UserUUID}`},{append:t(()=>[e(X,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:J=>le(I.key,F.UserUUID)},null,8,["onClick"])]),prepend:t(()=>[e(Ft,{src:A(y)(F.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:t(()=>[G(" "+M(F.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]))),128))]),_:1}),e(Ya,{modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=I=>r.value=I),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):w("",!0)}}),ho=["colspan"],bo={style:{opacity:"var(--v-medium-emphasis-opacity)"}},kn=de({__name:"RegistrationsView",emits:["pageTitle"],setup(E,{emit:N}){var Tt;const m=Na();N("pageTitle","Registration Manager");const T=ma(),f=Ot(),p=g(!0);let a=((Tt=T.params.convention)==null?void 0:Tt.toString())||"";const r=g({ID:0,ConventionUUID:Te(),OrganisationID:0,OrganisationUUID:ze,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),u=ye(),O=Mt.getInstance(),_=g([]),D=g({ID:0,AdminLayoutUUID:Te(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,Name:"Registration Table",RunnerLayoutUUID:ze,Type:ce.ADMIN_LAYOUT_TABLE,Panels:[]}),h=g([]),z=g([]),le=g([]),P=g([]),L=g([]),c=g([]),B=g(1),i=g(10),j=g([]),se=g(0),U=g(!1),n=g(""),I=g(""),F=g(""),J=g(""),ke=g({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),Xe=g({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),Ze=g({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),et=g({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),zt=g(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",ke.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",Xe.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Ze.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",et.value]])),we=g(""),Ne=g(""),Fe=g([]),Pe=g([]),$e=g([]),Ye=g([]),Ge=g([]),xe=g([]),ve=g(0),ie=g(),_e=g(!1),Ut=g(!1),Kt=g(!1),Be=g(),pt=g(),Re=g(),Ee=g(!1),Jt=Qe(),te=jl(()=>{I.value=Date.now().toString()});ge(n,o=>{const l=c.value.find(v=>v.uuid===o);if(l){const v=l.headers.find(d=>d.defaultSort===!0);v&&(j.value=[{key:v.key,order:"asc"}],Fe.value=[{key:v.key,order:"asc"}])}qe({page:1,itemsPerPage:i.value,sortBy:Fe.value})}),ge(ve,o=>{o===8&&gt()}),ge(we,()=>{te()}),ge(Ne,()=>{te()});const Qt=()=>{h.value=[],le.value=[],P.value=[],c.value=[];try{u.getConventionAdminLayoutByName(r.value.ConventionUUID,"Registration Table").then(o=>{ve.value+=1,o?D.value=o:(D.value.ConventionID=r.value.ID,D.value.ConventionUUID=r.value.ConventionUUID)})}catch{D.value.ConventionID=r.value.ID,D.value.ConventionUUID=r.value.ConventionUUID}try{u.getConventionAdminLayouts(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(o.forEach(l=>{l.Panels.sort((v,d)=>v.Order>d.Order?1:v.Order===d.Order?0:-1),l.Panels.forEach(v=>{v.Items.sort((d,Q)=>d.Order>Q.Order?1:d.Order===Q.Order?0:-1)})}),le.value=o)})}catch{}try{u.getConventionForms(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(h.value=o)})}catch{}try{u.getConventionAccommodation(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(Pe.value=o)})}catch{}try{u.getConventionVenues(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(xe.value=o)})}catch{}try{u.getConventionExtras(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&($e.value=o)})}catch{}try{u.getConventionInterests(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(Ye.value=o)})}catch{}try{u.getConventionTickets(r.value.ConventionUUID).then(o=>{ve.value+=1,o&&(Ge.value=o)})}catch{}try{u.getConventionGroups(r.value.ConventionUUID).then(o=>{o&&(z.value=o.sort((l,v)=>l.Name.localeCompare(v.Name)))})}catch{}try{u.getConventionTags(r.value.ConventionUUID).then(o=>{o&&(L.value=o.sort((l,v)=>l.Title.localeCompare(v.Title)).map(l=>(l.Title=`${l.Title} [${l.Key}]`,l)))})}catch{}},qe=({page:o,itemsPerPage:l,sortBy:v})=>{p.value=!0,B.value=o,j.value=v;const d=c.value.find(W=>W.uuid==n.value),Q=d==null?void 0:d.layout.Items;let K="",Ie="";if(v&&Q&&v.length>=1){const W=Q.find(at=>at.LayoutItemUUID==v[0].key);switch(Ie=v[0].order||"asc",W==null?void 0:W.MetaField){case q.META_DATA_SOURCE_ACCOMMODATION_FORM:K="submission.status";break;case q.META_DATA_SOURCE_BADGE_FORM:K="submission.status";break;case q.META_DATA_SOURCE_DEALER_FORM:K="submission.status";break;case q.META_DATA_SOURCE_REGISTRATION_FORM:K="submission.status";break;case q.META_DATA_SOURCE_REGISTRATION_REFERENCE:K="reference";break;case q.META_DATA_SOURCE_SUBMISSION_DATE:K="created";break;case q.META_DATA_SOURCE_SUBMISSION_STATUS:K="submission.status";break}switch(W==null?void 0:W.UserField){case Z.USER_DATA_SOURCE_DISPLAY_NAME:K="user.display_name";break;case Z.USER_DATA_SOURCE_EMAIL:K="user.email";break;case Z.USER_DATA_SOURCE_FIRST_NAME:K="user.firstname";break;case Z.USER_DATA_SOURCE_HANDLE:K="user.handle";break;case Z.USER_DATA_SOURCE_LAST_NAME:K="user.lastname";break}}try{const W={Direction:Ie,Limit:l,Offset:(o-1)*l,Order:K};d&&(W.PanelUUID=d==null?void 0:d.layout.LayoutPanelUUID),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_ACCOMMODATION&&(W.Accommodation=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_BADGE&&(W.Badge=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_DEALER&&(W.Dealer=!0),(d==null?void 0:d.layout.RequiredFormType)===re.FORM_TYPE_REGISTRATION&&(W.Registration=!0),W.GroupUUID=we.value||ze,W.TagUUID=Ne.value||ze,W.Email=J.value,W.Reference=F.value,W.FieldValues=Array.from(zt.value.values());const at=I.value;u.searchConventionRegistrations(r.value.ConventionUUID,W).then(lt=>{lt&&at===I.value&&(se.value=lt.Total,P.value=lt.Registrations,c.value.forEach(ot=>{const sa=ot.layout;ot.items=P.value.map(R=>{const He=[];let Ue;R.Leader?Ue=R:Ue=R.Primary,He.push({Name:Ue.User.DisplayName,UUID:Ue.UserUUID,UserUUID:Ue.User.UserUUID,IsLeader:!0,Reference:Ue.Reference,Paid:Ue.Paid,Total:Ue.Total}),He.push(...Ue.Members.map(pe=>({Name:pe.User.DisplayName,UUID:pe.UserUUID,UserUUID:pe.User.UserUUID,IsLeader:!1,Reference:pe.Reference,Paid:pe.Paid,Total:pe.Total})));const $={};return ot.headers.forEach(pe=>{var yt;const k=sa.Items.find(Ce=>Ce.LayoutItemUUID===pe.key);if(k){if(k.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&k.SectionField)R.Submissions.forEach(Ce=>{const he=Ce.Data.find(C=>C.SectionFieldUUID===k.SectionFieldUUID);if(he){pe.type===Lt.ACCOMMODATION?$[k.LayoutItemUUID]={Data:he.Data,Registration:R}:$[k.LayoutItemUUID]=he.Data;return}});else if(k.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&k.UserField)switch(k.UserField){case Z.USER_DATA_SOURCE_AVATAR:$[k.LayoutItemUUID]=m.GetProfileImageURL(R.UserUUID);break;case Z.USER_DATA_SOURCE_CONTACTS:$[k.LayoutItemUUID]={},R.User.Generated&&R.User.Generated.telegram_handle&&($[k.LayoutItemUUID].telegram=`@${R.User.Generated.telegram_handle}`),$[k.LayoutItemUUID].email=R.User.Additional.Email;break;case Z.USER_DATA_SOURCE_DISPLAY_NAME:$[k.LayoutItemUUID]=R.User.DisplayName;break;case Z.USER_DATA_SOURCE_EMAIL:$[k.LayoutItemUUID]=R.User.Additional.Email;break;case Z.USER_DATA_SOURCE_HANDLE:$[k.LayoutItemUUID]=R.User.Handle;break;case Z.USER_DATA_SOURCE_DATE_OF_BIRTH:$[k.LayoutItemUUID]=R.User.Additional.DOB;break;case Z.USER_DATA_SOURCE_FIRST_NAME:$[k.LayoutItemUUID]=R.User.Additional.FirstName;break;case Z.USER_DATA_SOURCE_LAST_NAME:$[k.LayoutItemUUID]=R.User.Additional.LastName;break;case Z.USER_DATA_SOURCE_TELEGRAM:R.User.Generated&&R.User.Generated.telegram_handle?$[k.LayoutItemUUID]=`@${R.User.Generated.telegram_handle}`:$[k.LayoutItemUUID]="";break}else if(k.SourceType==="LAYOUT_ITEM_SOURCE_META"&&k.MetaField){const Ce=(yt=h.value.find(C=>C.Type===re.FORM_TYPE_REGISTRATION))==null?void 0:yt.FormUUID,he=R.Submissions.find(C=>C.FormUUID===Ce);switch(k.MetaField){case q.META_DATA_SOURCE_REGISTRATION_ACTIONS:$[k.LayoutItemUUID]=R;break;case q.META_DATA_SOURCE_REGISTRATION_GROUP:$[k.LayoutItemUUID]=He;break;case q.META_DATA_SOURCE_REGISTRATION_REFERENCE:$[k.LayoutItemUUID]=R.Reference;break;case q.META_DATA_SOURCE_SUBMISSION_DATE:if(he){const C=new Date(he.CreatedAt||"");$[k.LayoutItemUUID]=`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}-${C.getDate().toString().padStart(2,"0")} ${C.getHours().toString().padStart(2,"0")}:${C.getMinutes().toString().padStart(2,"0")}:${C.getSeconds().toString().padStart(2,"0")}`}else{const C=new Date(R.CreatedAt||"");$[k.LayoutItemUUID]=`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}-${C.getDate().toString().padStart(2,"0")} ${C.getHours().toString().padStart(2,"0")}:${C.getMinutes().toString().padStart(2,"0")}:${C.getSeconds().toString().padStart(2,"0")}`}break;case q.META_DATA_SOURCE_ACCOMMODATION_FORM:$[k.LayoutItemUUID]=R.Submissions.map(C=>{const x=h.value.find(De=>De.FormUUID===C.FormUUID);return{Heading:x==null?void 0:x.Heading,Form:x,Submission:C,Registration:R}}).filter(C=>{var x;return((x=C.Form)==null?void 0:x.Type)===re.FORM_TYPE_ACCOMMODATION});break;case q.META_DATA_SOURCE_BADGE_FORM:$[k.LayoutItemUUID]=R.Submissions.map(C=>{const x=h.value.find(De=>De.FormUUID===C.FormUUID);return{Heading:x==null?void 0:x.Heading,Form:x,Submission:C,Registration:R}}).filter(C=>{var x;return((x=C.Form)==null?void 0:x.Type)===re.FORM_TYPE_BADGE});break;case q.META_DATA_SOURCE_DEALER_FORM:$[k.LayoutItemUUID]=R.Submissions.map(C=>{const x=h.value.find(De=>De.FormUUID===C.FormUUID);return{Heading:x==null?void 0:x.Heading,Form:x,Submission:C,Registration:R}}).filter(C=>{var x;return((x=C.Form)==null?void 0:x.Type)===re.FORM_TYPE_DEALER});break;case q.META_DATA_SOURCE_PAYMENT_STATUS:if(R.Paid===0&&R.Total)$[k.LayoutItemUUID]="REQUIRED";else if(R.Total>R.Paid)$[k.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const C=He.find(x=>x.Paid===0&&(x.Total||0)>0);if(C){R.Total===0&&C.Total===0?$[k.LayoutItemUUID]="NOT_REQUIRED":R.Total===0&&C.Total||R.Total>0&&C.Total===0?$[k.LayoutItemUUID]="MISSING_REQUIRED":R.Paid>=R.Total?$[k.LayoutItemUUID]="AWAITING_PARTNER":$[k.LayoutItemUUID]="ALL_REQUIRED";break}else R.Total===0?$[k.LayoutItemUUID]="NOT_REQUIRED":$[k.LayoutItemUUID]="COMPLETE"}break;case q.META_DATA_SOURCE_SUBMISSION_STATUS:wa(R.Submissions,h.value),$[k.LayoutItemUUID]=R.Submissions.map(C=>{const x=h.value.find(De=>De.FormUUID===C.FormUUID);return{Heading:x==null?void 0:x.Heading,Form:x,Submission:C,Registration:R}});break;case q.META_DATA_SOURCE_DATA_LAYOUT:$[k.LayoutItemUUID]={Registration:R,Layouts:le.value.filter(C=>{if(k.Meta&&k.Meta.LayoutUUID&&Array.isArray(k.Meta.LayoutUUID))return k.Meta.LayoutUUID.includes(C.AdminLayoutUUID)})};break}}}}),{key:R.RegistrationUUID,registration:R,...$}})}),p.value=!1)})}catch{}},jt=o=>{U.value=!1,o&&(D.value=o,gt())},gt=()=>{Ht(D.value.Panels,h.value),D.value.Panels.length>0&&(c.value=[],D.value.Panels.forEach(o=>{const l={uuid:Te(),order:o.Order,name:o.Name,headers:[],items:[],layout:o};o.Items.sort((v,d)=>v.Order>d.Order?1:v.Order==d.Order?0:-1),l.headers=o.Items.filter(v=>v.SourceType!=Se.LAYOUT_ITEM_SOURCE_META||v.MetaField!=q.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(v=>{var d,Q;return{key:v.LayoutItemUUID,title:v.Label||((Q=(d=v.SectionField)==null?void 0:d.Field)==null?void 0:Q.Label)||"",align:v.Align==="end"?"end":"start",sortable:Zt(v),type:Wt(v),defaultSort:v.DefaultSort,meta:v.Meta}}),c.value.push(l)}),c.value=c.value.sort((o,l)=>o.order>l.order?1:o.order==l.order?0:-1)),(n.value==null||n.value=="")&&c.value.length>0&&(n.value=c.value[0].uuid)};a?u.getConvention(a).then(o=>{o&&(r.value=o,D.value.ConventionID=r.value.ID,D.value.ConventionUUID=r.value.ConventionUUID,Qt())}).catch(()=>{f.push("/")}):f.push("/");const Wt=o=>{var l,v;if(o.SourceType===Se.LAYOUT_ITEM_SOURCE_META)return`${o.SourceType}.${o.MetaField}`;if(o.SourceType===Se.LAYOUT_ITEM_SOURCE_FORM)return(v=(l=o.SectionField)==null?void 0:l.Field)==null?void 0:v.Type;if(o.SourceType===Se.LAYOUT_ITEM_SOURCE_USER)return`${o.SourceType}.${o.UserField}`},Xt=()=>{const o=c.value.find(l=>l.uuid===n.value);return o?!!o.layout.Items.find(l=>l.SourceType==Se.LAYOUT_ITEM_SOURCE_META&&l.MetaField==q.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},Zt=o=>{const l=[q.META_DATA_SOURCE_ACCOMMODATION_FORM,q.META_DATA_SOURCE_BADGE_FORM,q.META_DATA_SOURCE_DEALER_FORM,q.META_DATA_SOURCE_REGISTRATION_FORM,q.META_DATA_SOURCE_REGISTRATION_REFERENCE,q.META_DATA_SOURCE_SUBMISSION_DATE,q.META_DATA_SOURCE_SUBMISSION_STATUS],v=[Z.USER_DATA_SOURCE_DISPLAY_NAME,Z.USER_DATA_SOURCE_EMAIL,Z.USER_DATA_SOURCE_HANDLE,Z.USER_DATA_SOURCE_DATE_OF_BIRTH,Z.USER_DATA_SOURCE_FIRST_NAME,Z.USER_DATA_SOURCE_LAST_NAME];return l.includes(o.MetaField)||v.includes(o.UserField)},ea=o=>{ie.value=o,_e.value=!0},ta=o=>{ie.value=o,Ut.value=!0},aa=o=>{ie.value=o,Kt.value=!0};ge(_e,o=>{o||(ie.value=void 0)}),ge(Ut,o=>{o||(ie.value=void 0)});const tt=async(o="")=>{pt.value=await u.getRegistrationGroup(o)},la=({registration:o,form:l})=>{const v={FormUUID:l.FormUUID,Limit:1,RegistrationUUID:o.RegistrationUUID};u.searchConventionRegistrations(o.ConventionUUID,v).then(d=>{if(d&&d.Total>0){if(ie.value=d.Registrations[0],!ie.value)return;tt(o.RegistrationUUID).then(()=>{var Q,K;ie.value&&((Q=ie.value)!=null&&Q.Submissions)&&(Re.value=(K=ie.value)==null?void 0:K.Submissions.find(Ie=>Ie.FormUUID===l.FormUUID)),Re.value||(Re.value=oa(l,o)),Be.value=l,Ee.value=!0})}})},oa=(o,l)=>({ID:0,SubmissionUUID:Te(),FormID:o.ID,FormUUID:o.FormUUID,Form:o,UserID:l.UserID,UserUUID:l.UserUUID,RegistrationID:l.ID,RegistrationUUID:l.RegistrationUUID,Registration:l,Data:[],Status:Ma.SUBMISSION_STATUS_NULL}),na=o=>{u.switchUser(o.UserUUID).then(l=>{l&&Ba(l.tokens,l.user,f,!1)}).catch(l=>{console.error(l)})};return O.on("registration.group.leave",o=>{u.leaveRegistrationGroup(o).then(l=>{l&&tt(o).then(()=>{O.emit("registration.group.left",l)})})}),O.on("registration.group.remove.member",o=>{u.leaveRegistrationGroup(o).then(l=>{l&&tt(o).then(()=>{O.emit("registration.group.left",l)})})}),(o,l)=>(s(),S(Qa,null,{default:t(()=>[e(At,{color:"blue-darken-4"},{default:t(()=>[e($t,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=v=>n.value=v),"show-arrows":""},{default:t(()=>[(s(!0),V(H,null,ue(c.value,v=>(s(),S(Yt,{key:v.uuid,value:v.uuid},{default:t(()=>[G(M(v.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(st),e(Eo),e(X,{icon:"mdi:mdi-cog-outline",onClick:l[1]||(l[1]=v=>U.value=!0)})]),_:1}),e(Bt,{modelValue:n.value,"onUpdate:modelValue":l[23]||(l[23]=v=>n.value=v),disabled:!0,touch:!1},{default:t(()=>[(s(!0),V(H,null,ue(c.value,v=>(s(),S(Ae,{key:v.uuid,value:v.uuid},{default:t(()=>[v.uuid===n.value?(s(),S(Le,{key:0,class:"pa-2"},{default:t(()=>[e(Wa,{expanded:_.value,"onUpdate:expanded":l[19]||(l[19]=d=>_.value=d),page:B.value,"onUpdate:page":l[20]||(l[20]=d=>B.value=d),"items-per-page":i.value,"onUpdate:itemsPerPage":l[21]||(l[21]=d=>i.value=d),"sort-by":Fe.value,"onUpdate:sortBy":l[22]||(l[22]=d=>Fe.value=d),headers:v.headers,"items-length":se.value,items:v.items,"item-value":"key",loading:p.value,search:I.value,"onUpdate:options":qe,"show-expand":Xt()},Je({top:t(()=>[e(Xa,{class:"mb-3"},{default:t(()=>[e(Za,null,{default:t(()=>[e(el,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:t(()=>[e(b,{class:"pa-0"},{default:t(()=>[G(" Search Criteria "),e(xt,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),e(b,{class:"d-none d-sm-block pa-0",cols:"0"},{default:t(()=>[e(ee,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=d=>F.value=d),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:l[3]||(l[3]=be(()=>{},["stop"])),"onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{class:"d-none d-md-block pa-0"},{default:t(()=>[e(ee,{modelValue:ke.value.Value,"onUpdate:modelValue":l[4]||(l[4]=d=>ke.value.Value=d),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:l[5]||(l[5]=be(()=>{},["stop"])),"onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),e(tl,{class:"pt-2"},{default:t(()=>[e(ae,null,{default:t(()=>[e(b,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:t(()=>[e(ee,{modelValue:F.value,"onUpdate:modelValue":l[6]||(l[6]=d=>F.value=d),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:t(()=>[e(ee,{modelValue:ke.value.Value,"onUpdate:modelValue":l[7]||(l[7]=d=>ke.value.Value=d),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:t(()=>[e(ee,{modelValue:J.value,"onUpdate:modelValue":l[8]||(l[8]=d=>J.value=d),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:Xe.value.Value,"onUpdate:modelValue":l[9]||(l[9]=d=>Xe.value.Value=d),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:Ze.value.Value,"onUpdate:modelValue":l[10]||(l[10]=d=>Ze.value.Value=d),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:t(()=>[e(ee,{modelValue:et.value.Value,"onUpdate:modelValue":l[11]||(l[11]=d=>et.value.Value=d),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":A(te),onInput:A(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(b,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(oe,{modelValue:we.value,"onUpdate:modelValue":l[12]||(l[12]=d=>we.value=d),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:z.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),e(b,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:t(()=>[e(oe,{modelValue:Ne.value,"onUpdate:modelValue":l[13]||(l[13]=d=>Ne.value=d),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:L.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":t(({columns:d,internalItem:Q})=>[Y("tr",null,[Y("td",{colspan:d.length},[e(ht,{modelValue:_e.value,"onUpdate:modelValue":l[15]||(l[15]=K=>_e.value=K),registration:Q.raw.registration,"onUpdate:registration":K=>Q.raw.registration=K,accommodations:Pe.value,convention:r.value,extras:$e.value,forms:h.value,interests:Ye.value,tickets:Ge.value,title:`Registration Controls (#${Q.raw.registration.Reference} ${Q.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:xe.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,ho)])]),"item.data-table-expand":t(({internalItem:d})=>[_.value.findIndex(Q=>Q===d.key)>=0?(s(),S(X,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:Q=>_.value.splice(_.value.findIndex(K=>K===d.key),1)},{default:t(()=>[d.raw.registration.Notes&&d.raw.registration.Notes.length>0?(s(),V(H,{key:0},[G(M(d.raw.registration.Notes.length),1)],64)):w("",!0)]),_:2},1032,["onClick"])):(s(),S(X,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:Q=>_.value.push(d.key)},{default:t(()=>[d.raw.registration.Notes&&d.raw.registration.Notes.length>0?(s(),V(H,{key:0},[G(M(d.raw.registration.Notes.length),1)],64)):w("",!0)]),_:2},1032,["onClick"]))]),bottom:t(()=>[e(me,{fluid:!0},{default:t(()=>[e(ae,{class:"align-center"},{default:t(()=>[e(b,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:t(()=>[e(al,{modelValue:B.value,"onUpdate:modelValue":l[16]||(l[16]=d=>B.value=d),modelModifiers:{number:!0},length:Math.ceil(se.value/i.value)},null,8,["modelValue","length"])]),_:1}),e(b,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:t(()=>[e(oe,{modelValue:i.value,"onUpdate:modelValue":l[17]||(l[17]=d=>i.value=d),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),e(b,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:t(()=>[e(ee,{modelValue:B.value,"onUpdate:modelValue":l[18]||(l[18]=d=>B.value=d),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(se.value/i.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(b,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:t(()=>[Y("span",bo,[i.value===-1?(s(),V(H,{key:0},[G(" 1-"+M(se.value)+" of "+M(se.value),1)],64)):(s(),V(H,{key:1},[G(M((B.value-1)*i.value+1)+" - "+M(B.value*i.value>=se.value?se.value:B.value*i.value)+" of "+M(se.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[ue(v.headers,d=>({name:`item.${d.key}`,fn:t(({internalItem:Q,index:K})=>[e(Al,{header:d,item:Q,accommodations:Pe.value,convention:r.value,extras:$e.value,forms:h.value,interests:Ye.value,tickets:Ge.value,user:A(Jt),venues:xe.value,modelValue:v.items[K],"onUpdate:modelValue":Ie=>v.items[K]=Ie,onOpenActions:ea,onOpenPayments:ta,onOpenTags:aa,onReload:l[14]||(l[14]=Ie=>qe({page:B.value,itemsPerPage:i.value,sortBy:j.value})),onSwitchUser:na,onShowForm:la},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"])]),_:2},1024)):w("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),U.value?(s(),S(Do,{key:0,title:"Edit Layouts",modelValue:U.value,"onUpdate:modelValue":l[24]||(l[24]=v=>U.value=v),convention:r.value,onSave:jt},null,8,["modelValue","convention"])):w("",!0),ie.value?(s(),V(H,{key:1},[_e.value?(s(),S(ht,{key:0,modelValue:_e.value,"onUpdate:modelValue":l[25]||(l[25]=v=>_e.value=v),registration:ie.value,"onUpdate:registration":l[26]||(l[26]=v=>ie.value=v),accommodations:Pe.value,convention:r.value,extras:$e.value,forms:h.value,interests:Ye.value,tickets:Ge.value,title:`Registration Controls (#${ie.value.Reference} ${ie.value.User.DisplayName})`,"use-dialog":!0,venues:xe.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):w("",!0)],64)):w("",!0),Ee.value&&Re.value&&Be.value?(s(),S(qt,{key:2,modelValue:Ee.value,"onUpdate:modelValue":l[30]||(l[30]=v=>Ee.value=v),scrollable:!0,fullscreen:!0,persistent:!0},{default:t(()=>[e(Le,{class:"bg-red-darken-4"},{default:t(()=>[e(At,{color:"error"},{default:t(()=>[e(ja,null,{default:t(()=>[G("Submission Editor - Admin Mode")]),_:1}),e(st),e(Ja,null,{default:t(()=>[e(X,{icon:"mdi:mdi-window-close",onClick:l[27]||(l[27]=v=>Ee.value=!1)})]),_:1})]),_:1}),e(je,null,{default:t(()=>[e(Ra,{modelValue:Be.value,"onUpdate:modelValue":l[28]||(l[28]=v=>Be.value=v),admin:!0,convention:r.value,data:Re.value,editable:!0,"registration-group":pt.value,onClose:l[29]||(l[29]=v=>{Ee.value=!1,qe({page:B.value,itemsPerPage:i.value,sortBy:j.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):w("",!0)]),_:1}))}});export{kn as default};
