import{a as k,b as V}from"./VToolbar-fbfc308f.js";import{a as x,u as L}from"./VMain-4aded575.js";import{p as A,y as I,s as d,h as s,I as E,k as m,j as N,l as H,a as M,x as U,J as z,t as w,c as C,m as F}from"./index-0085e4e0.js";import{u as j}from"./ssrBoot-3be527e0.js";import{u as q}from"./rounded-5da1b7ec.js";const J=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function O(e){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=b;let i=0;const t=I(null),l=d(0),c=d(0),u=d(0),h=d(!1),f=d(!1),r=s(()=>Number(e.scrollThreshold)),y=s(()=>E((r.value-l.value)/r.value||0)),v=()=>{const o=t.value;!o||n&&!n.value||(i=l.value,l.value="window"in o?o.pageYOffset:o.scrollTop,f.value=l.value<i,u.value=Math.abs(l.value-r.value))};return m(f,()=>{c.value=c.value||l.value}),m(h,()=>{c.value=0}),N(()=>{m(()=>e.scrollTarget,o=>{var g;const p=o?document.querySelector(o):window;p&&p!==t.value&&((g=t.value)==null||g.removeEventListener("scroll",v),t.value=p,t.value.addEventListener("scroll",v,{passive:!0}))},{immediate:!0})}),H(()=>{var o;(o=t.value)==null||o.removeEventListener("scroll",v)}),n&&m(n,v,{immediate:!0}),{scrollThreshold:r,currentScroll:l,currentThreshold:u,isScrollActive:h,scrollRatio:y,isScrollingUp:f,savedScroll:c}}const Y=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...k(),...x(),...J(),height:{type:[Number,String],default:64}},"VAppBar"),W=M()({name:"VAppBar",props:Y(),emits:{"update:modelValue":e=>!0},setup(e,b){let{slots:n}=b;const i=I(),t=U(e,"modelValue"),l=s(()=>{var S;const a=new Set(((S=e.scrollBehavior)==null?void 0:S.split(" "))??[]);return{hide:a.has("hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),c=s(()=>{const a=l.value;return a.hide||a.inverted||a.collapse||a.elevate||a.fadeImage||!t.value}),{currentScroll:u,scrollThreshold:h,isScrollingUp:f,scrollRatio:r}=O(e,{canScroll:c}),y=s(()=>e.collapse||l.value.collapse&&(l.value.inverted?r.value>0:r.value===0)),v=s(()=>e.flat||l.value.elevate&&(l.value.inverted?u.value>0:u.value===0)),o=s(()=>l.value.fadeImage?l.value.inverted?1-r.value:r.value:void 0),p=s(()=>{var B,T;if(l.value.hide&&l.value.inverted)return 0;const a=((B=i.value)==null?void 0:B.contentHeight)??0,S=((T=i.value)==null?void 0:T.extensionHeight)??0;return a+S});function g(){l.value.hide?l.value.inverted?t.value=u.value>h.value:t.value=f.value||u.value<h.value:t.value=!0}z(()=>!!e.scrollBehavior,()=>{m(u,g,{immediate:!0}),m(l,g)});const{ssrBootStyles:P}=j(),{layoutItemStyles:R}=L({id:e.name,order:s(()=>parseInt(e.order,10)),position:w(e,"location"),layoutSize:p,elementSize:d(void 0),active:t,absolute:w(e,"absolute")});return q(()=>{const[a]=V.filterProps(e);return C(V,F({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...R.value,"--v-toolbar-image-opacity":o.value,height:void 0,...P.value},e.style]},a,{collapse:y.value,flat:v.value}),n)}),{}}});export{W as V};
