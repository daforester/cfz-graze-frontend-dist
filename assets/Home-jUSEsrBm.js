import{i as W,M as he,N as Te,j as ke,r as D,w as se,n as e,q as s,v as t,x as n,f as u,z as Ie,y as h,A as g,O as Ue,D as v,P as ie,k as ve,B as r,F as f,Q as q,C as d,p as Ee,R as Ae,d as be,u as De,S as we,c as N,m as ee,l as le,G as Ce,H as Pe,_ as ge}from"./index-BmfeESX0.js";import{G as re}from"./userData-pz9sACgD.js";import{_ as Ve}from"./LoginView.vue_vue_type_script_setup_true_lang-3MefJ0HI.js";import{s as ae}from"./index-OKsbKlsK.js";import{F as I}from"./form-0fJbSFPv.js";import{S as $,a as Oe}from"./submission-40fey8Hx.js";import{V as Se,u as Re,a as Fe}from"./scopeId-9mBzaKLG.js";import{c as J}from"./canEditForm-viF788U5.js";import{s as Me}from"./sortSubmissions-NKScr9xj.js";import{P as Q,a as Ne,u as $e}from"./useDisplayTransactions-1y3w-Fks.js";import{l as Ye}from"./stripe.esm-sevhGlMX.js";import{_ as Le}from"./ModelDialog.vue_vue_type_script_setup_true_lang-9-o_nJby.js";import{a as ue,u as ze}from"./VContainer-zh1_diu_.js";import{V as xe}from"./VAlert-GfkFtrNE.js";import{V as Be}from"./VForm-j11ugogw.js";import{V as X,a as j}from"./VRow-C5FpeS-7.js";import{V as c,a as Ge}from"./VBtn-TakRaN9v.js";import{V as He,m as qe,a as fe}from"./SaveButton.vue_vue_type_script_setup_true_lang-_HO4QBnt.js";import{f as je,h as pe}from"./date-1rFCglLs.js";import{V as We,a as oe,b as ye,c as ne,d as Ke,e as Je}from"./VCard-sK5Mz7wV.js";import{V as Qe}from"./VAvatar-TzQg7bQC.js";import{f as Xe}from"./forwardRefs-15FBWNqg.js";import{V as Ze,a as et,c as tt,d as at}from"./VList-OpHPnTma.js";import"./emailFormVariant-1EY2p0cn.js";import"./LoginButton-QuCrQcnd.js";import"./createSimpleFunctional-LDH0zoaS.js";import"./VDialog-MWOcIduz.js";import"./VToolbar-X4L6jGGo.js";import"./VDivider--dml9bHa.js";const ot=v("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),v("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),nt=v("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),lt=v("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),st=v("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),it=v("p",{class:"my-4"},[n(" Please contact "),v("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),rt=v("div",{id:"link-authentication-element"},null,-1),ut=v("div",{id:"payment-element"},null,-1),ct=W({__name:"StripePayment",props:he({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const U=Te(i,"modelValue"),T=ie(),E=re(),_=ke(),l=D(),y=D(),A=D((E==null?void 0:E.Additional.Email)||""),R=D(!1),Y=D("");let P;const x=D(!1);se(U,k=>{k&&T.stripePublicKey().then(async S=>{S&&(y.value=await Ye(S),await L(y.value))})});const B=k=>{Y.value=k,R.value=!0};async function L(k){var p;if(!k)return;const S=await T.stripePaymentIntent(((p=i.registration)==null?void 0:p.RegistrationUUID)||""),w={theme:"stripe"};_.current.value.dark&&(w.theme="night"),P=k.elements({clientSecret:S,appearance:w});const G=P.create("linkAuthentication",{defaultValues:{email:A.value}});G.mount("#link-authentication-element"),G.on("change",m=>{A.value=m.value.email});const Z={layout:"tabs"};P.create("payment",Z).mount("#payment-element")}async function H(k,S){if(!S)return;k.preventDefault(),x.value=!0;const w=new URL(location.href);w.pathname+="payment/stripe/processing";const{error:G}=await S.confirmPayment({elements:P,confirmParams:{return_url:w.toString(),receipt_email:A.value}});G.type==="card_error"||G.type==="validation_error"?B(G.message):B("An unexpected error occurred."),x.value=!1}return(k,S)=>(e(),s(Le,{modelValue:U.value,"onUpdate:modelValue":S[4]||(S[4]=w=>U.value=w),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[u(ue,{class:"pa-0"},{default:t(()=>[u(xe,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[ot,nt,lt,st,it]),_:1}),u(Be,{ref_key:"paymentForm",ref:l,id:"payment-form",onSubmit:S[1]||(S[1]=Ie(w=>H(w,y.value),["prevent"]))},{default:t(()=>[u(X,null,{default:t(()=>[u(j,null,{default:t(()=>[rt]),_:1})]),_:1}),u(X,null,{default:t(()=>[u(j,null,{default:t(()=>[ut]),_:1})]),_:1}),u(X,null,{default:t(()=>[k.registration?(e(),s(j,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+h(k.registration.Total-k.registration.Paid),1)]),_:1})):g("",!0)]),_:1}),u(X,null,{default:t(()=>[u(j,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[u(c,{color:"error",class:"w-100",onClick:S[0]||(S[0]=w=>U.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),u(Se),u(j,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[u(c,{type:"submit",color:"success",class:"w-100"},Ue({default:t(()=>[n(" Pay Now ")]),_:2},[x.value?{name:"prepend",fn:t(()=>[u(Ge,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),u(He,{modelValue:R.value,"onUpdate:modelValue":S[3]||(S[3]=w=>R.value=w)},{actions:t(()=>[u(c,{variant:"text",onClick:S[2]||(S[2]=w=>R.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(h(Y.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),dt={key:0},mt={key:1,class:"v-row"},vt={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},ft={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},pt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},yt={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},_t={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},gt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},St={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},ht=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),Tt={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},kt=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),It={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Ut=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),Et={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},At=W({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(i){const U=i,T=D(ve(U.paymentTransactions));se(U,()=>{T.value=ve(U.paymentTransactions)});const E=(_,l)=>_.Type===Q.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type!==Q.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:_.Type!==Q.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type===Q.PAYMENT_TRANSACTION_TYPE_CHARGE||(_.UpdatedAt||0)>(l.UpdatedAt||0)?1:_.UpdatedAt===l.UpdatedAt?0:-1;return(_,l)=>_.registration.Total==0?(e(),r("p",dt," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),r("dl",mt,[(e(!0),r(f,null,q(T.value.sort(E),y=>{var A;return e(),r(f,{key:y.PaymentTransactionUUID},[y.Type===d(Q).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),r("dt",vt,[v("div",ft,h(y.Description.split(":")[0]),1),v("div",pt,h(y.Description.split(":")[1]),1)])):(e(),r("dt",yt,[v("div",_t,h((A=d(Ne).find(R=>R.value===y.Type))==null?void 0:A.title),1),v("div",gt," [ "+h(d(je)(y.UpdatedAt||""))+" ] "+h(y.Description),1)])),v("dd",St," £"+h(y.Amount),1)],64)}),128)),ht,v("dd",Tt," £"+h(_.registration.Total),1),kt,v("dd",It," £"+h(_.registration.Paid),1),Ut,v("dd",Et," £"+h(_.registration.Total-_.registration.Paid),1)]))}}),bt=Ee({id:String,text:String,...Ae(qe({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),_e=be()({name:"VTooltip",props:bt(),emits:{"update:modelValue":i=>!0},setup(i,U){let{slots:T}=U;const E=De(i,"modelValue"),{scopeId:_}=Re(),l=we(),y=N(()=>i.id||`v-tooltip-${l}`),A=D(),R=N(()=>i.location.split(" ").length>1?i.location:i.location+" center"),Y=N(()=>i.origin==="auto"||i.origin==="overlap"||i.origin.split(" ").length>1||i.location.split(" ").length>1?i.origin:i.origin+" center"),P=N(()=>i.transition?i.transition:E.value?"scale-transition":"fade-transition"),x=N(()=>ee({"aria-describedby":y.value},i.activatorProps));return ze(()=>{const B=fe.filterProps(i);return u(fe,ee({ref:A,class:["v-tooltip",i.class],style:i.style,id:y.value},B,{modelValue:E.value,"onUpdate:modelValue":L=>E.value=L,transition:P.value,absolute:!0,location:R.value,origin:Y.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},_),{activator:T.activator,default:function(){var S;for(var L=arguments.length,H=new Array(L),k=0;k<L;k++)H[k]=arguments[k];return((S=T.default)==null?void 0:S.call(T,...H))??i.text}})}),Xe({},A)}}),K=i=>(Ce("data-v-4cdd4655"),i=i(),Pe(),i),Dt=["innerHTML"],wt={key:0},Ct={key:0,class:"font-weight-bold float-left pt-1 w-50"},Pt={key:1,class:"pa-1"},Vt=K(()=>v("dt",null,[v("h3",null,"Forms Available")],-1)),Ot=K(()=>v("dd",{class:"mb-2"}," The following forms are currently available for completion. ",-1)),Rt={class:"font-weight-bold float-left pt-1 w-50 pt-3",style:{clear:"both"}},Ft={class:"pt-2"},Mt=K(()=>v("dt",{class:"mt-3"},[v("h3",null,"Received Forms")],-1)),Nt=K(()=>v("dd",{class:"mb-2"}," The following forms have been received from you. ",-1)),$t={key:0,class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},Yt={key:1},Lt={class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},zt={class:"text-red-darken-4"},xt={key:1,class:"text-red-darken-4 mt-4"},Bt=K(()=>v("strong",null,"There are forms above that require completion, please edit and save them.",-1)),Gt=[Bt],Ht=K(()=>v("br",null,null,-1)),qt=W({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(i){const U=Fe(),T=ie(),{getPaymentTransactions:E}=$e(),_=D(U.GetConventionLogoURL(i.convention.ConventionUUID)),l=D(),y=D([]),A=D([]),R=D([]),Y=D(!1),P=D([]),x=N(()=>{var a;return J(i.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_REGISTRATION)}),B=N(()=>{var a;return J(i.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_DEALER)}),L=N(()=>{var a;return J(i.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_BADGE)}),H=N(()=>{var a;return J(i.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_ACCOMMODATION)}),k=N(()=>{var a;return J(i.forms,((a=l.value)==null?void 0:a.Submissions)||[],I.FORM_TYPE_ADDITIONAL)}),S=N(()=>l.value?i.forms.filter(a=>{var p;return a.State.Independent?(p=l.value)!=null&&p.Submissions&&"Submissions"in l.value?!l.value.Submissions.find(m=>{var F;return((F=m.Form)==null?void 0:F.FormUUID)===a.FormUUID}):!0:!1}):i.forms),w=N(()=>{var a,p;return l.value&&((a=l.value)!=null&&a.Submissions)?!!((p=l.value)!=null&&p.Submissions.find(m=>{var F;return((F=m.Form)==null?void 0:F.Type)==I.FORM_TYPE_REGISTRATION&&(m.Status==$.SUBMISSION_STATUS_ACCEPTED||m.Status==$.SUBMISSION_STATUS_COMPLETED)})):!1}),G=async()=>{l.value&&"RegistrationUUID"in l.value&&T.getRegistrationAllocationPeriods(l.value.RegistrationUUID).then(a=>{a&&(A.value=[],y.value=a,y.value.sort((p,m)=>p.DateStart>m.DateStart?1:-1).forEach(p=>{var F;const m=A.value.find(C=>{var V;return C.name===((V=p.Accommodation)==null?void 0:V.Name)});if(m){const C=m.periods.find(M=>M.start===p.DateEnd),V=m.periods.find(M=>M.end===p.DateStart);C?C.start=p.DateStart:V?V.end=p.DateEnd:m.periods.push({start:p.DateStart,end:p.DateEnd})}else A.value.push({name:((F=p.Accommodation)==null?void 0:F.Name)||"",periods:[{start:p.DateStart,end:p.DateEnd}]})}))}).catch(()=>{})},Z=()=>{T.getRegistrationByConvention(i.convention.ConventionUUID).then(a=>{var p;a&&(a.Submissions?(a.Submissions.forEach((m,F)=>{m.Form||(a.Submissions[F].Form=i.forms.find(C=>C.FormUUID===m.FormUUID))}),Me(a.Submissions)):a.Submissions=[],l.value=a,G(),w.value&&E(((p=l.value)==null?void 0:p.RegistrationUUID)||"").then(m=>{R.value=m}))})};return se(()=>i.forms,()=>{Z()}),Z(),(a,p)=>{const m=le("router-link"),F=le("RouterLink");return e(),s(Je,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[u(We,{class:"flex-1-1 align-content-start"},{default:t(()=>[_.value?(e(),s(Qe,{key:0,src:_.value,title:a.convention.Name,class:"logo text-center"},null,8,["src","title"])):g("",!0),a.convention.Name?(e(),s(oe,{key:1,class:"text-center"},{default:t(()=>[n(h(a.convention.Name),1)]),_:1})):g("",!0),a.convention.Description?(e(),s(ye,{key:2,class:"text-wrap subtitle"},{default:t(()=>[v("div",{innerHTML:a.convention.Description},null,8,Dt)]),_:1})):g("",!0)]),_:1}),u(ne,null,{default:t(()=>{var C,V,M;return[l.value?(e(),r("dl",wt,[l.value.Reference?(e(),r("dt",Ct," Badge No: ")):g("",!0),l.value.Reference?(e(),r("dd",Pt," #"+h(l.value.Reference),1)):g("",!0),S.value.length>0?(e(),r(f,{key:2},[Vt,Ot],64)):g("",!0),(e(!0),r(f,null,q(S.value,(o,O)=>(e(),r(f,{key:o.FormUUID},[v("dt",Rt,h(o.Heading),1),v("dd",Ft,[u(_e,{modelValue:P.value[O+1e3],"onUpdate:modelValue":z=>P.value[O+1e3]=z},{activator:t(({props:z})=>[u(c,ee(z,{class:"ml-2",color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:te=>P.value[O]=!P.value[O]}),null,16,["onClick"])]),default:t(()=>[n(" Available ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),(o==null?void 0:o.Type)===d(I).FORM_TYPE_DEALER?(e(),s(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o!=null&&o.State.Edit&&B.value?(e(),s(c,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===d(I).FORM_TYPE_BADGE?(e(),s(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o!=null&&o.State.Edit&&L.value?(e(),s(c,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===d(I).FORM_TYPE_ADDITIONAL?(e(),s(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o!=null&&o.State.Edit&&k.value?(e(),s(c,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):g("",!0)])],64))),128)),((C=l.value)==null?void 0:C.Submissions.length)>0?(e(),r(f,{key:3},[Mt,Nt],64)):g("",!0),(e(!0),r(f,null,q((V=l.value)==null?void 0:V.Submissions,(o,O)=>{var z,te,ce,de,me;return e(),r(f,{key:o.SubmissionUUID},[o.Form?(e(),r(f,{key:0},[o.Form?(e(),r("dt",$t,h(o.Form.Heading),1)):g("",!0),o.Form?(e(),r("dd",Yt,[u(_e,{modelValue:P.value[O],"onUpdate:modelValue":b=>P.value[O]=b},{activator:t(({props:b})=>[u(c,ee(b,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:Zt=>P.value[O]=!P.value[O]}),null,16,["onClick"])]),default:t(()=>[o.Status===d($).SUBMISSION_STATUS_NULL?(e(),r(f,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):o.Status===d($).SUBMISSION_STATUS_INCOMPLETE?(e(),r(f,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):o.Status===d($).SUBMISSION_STATUS_OPEN?(e(),r(f,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===d($).SUBMISSION_STATUS_LOCKED?(e(),r(f,{key:3},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===d($).SUBMISSION_STATUS_ACCEPTED?(e(),r(f,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===d($).SUBMISSION_STATUS_COMPLETED?(e(),r(f,{key:5},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):o.Status===d($).SUBMISSION_STATUS_REJECTED?(e(),r(f,{key:6},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):o.Status===d($).SUBMISSION_STATUS_INVALID?(e(),r(f,{key:7},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):o.Status===d($).SUBMISSION_STATUS_CANCELLED?(e(),r(f,{key:8},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),r(f,{key:9},[n(" Please contact the registration team for support. ")],64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(" "+h(d(Oe)(o.Status))+" ",1),((z=o.Form)==null?void 0:z.Type)===d(I).FORM_TYPE_REGISTRATION?(e(),s(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>{var b;return[(b=o.Form)!=null&&b.State.Edit&&x.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((te=o.Form)==null?void 0:te.Type)===d(I).FORM_TYPE_ACCOMMODATION?(e(),s(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>{var b;return[(b=o.Form)!=null&&b.State.Edit&&H.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ce=o.Form)==null?void 0:ce.Type)===d(I).FORM_TYPE_DEALER?(e(),s(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>{var b;return[(b=o.Form)!=null&&b.State.Edit&&B.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((de=o.Form)==null?void 0:de.Type)===d(I).FORM_TYPE_BADGE?(e(),s(m,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>{var b;return[(b=o.Form)!=null&&b.State.Edit&&L.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((me=o.Form)==null?void 0:me.Type)===d(I).FORM_TYPE_ADDITIONAL?(e(),s(m,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>{var b;return[(b=o.Form)!=null&&b.State.Edit&&k.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):g("",!0)])):g("",!0)],64)):g("",!0)],64)}),128)),((M=l.value)==null?void 0:M.Submissions.length)>=1?(e(!0),r(f,{key:4},q(a.forms,o=>{var O;return e(),r(f,{key:o.FormUUID},[!((O=l.value)!=null&&O.Submissions.find(z=>z.FormUUID===o.FormUUID))&&!o.State.Independent?(e(),r(f,{key:0},[v("dt",Lt,h(o.Heading),1),v("dd",zt,[n(" Requires Completion "),o.Type===d(I).FORM_TYPE_REGISTRATION?(e(),s(m,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>[o.State.Edit&&x.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_ACCOMMODATION?(e(),s(m,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>[o.State.Edit&&H.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_DEALER?(e(),s(m,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o.State.Edit&&B.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_BADGE?(e(),s(m,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o.State.Edit&&L.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===d(I).FORM_TYPE_ADDITIONAL?(e(),s(m,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o.State.Edit&&k.value?(e(),s(c,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(c,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):g("",!0)])],64)):g("",!0)],64)}),128)):g("",!0)])):g("",!0),l.value&&l.value.Submissions.length>=1&&a.forms.filter(o=>{var O;return!o.State.Independent&&!((O=l.value)!=null&&O.Submissions.find(z=>z.FormUUID==o.FormUUID))}).length>0?(e(),r("div",xt,Gt)):g("",!0)]}),_:1}),A.value.length>0?(e(),r(f,{key:0},[u(oe,{class:"pb-0"},{default:t(()=>[n("Allocated Accommodation")]),_:1}),u(ye,{class:"text-wrap"},{default:t(()=>[n("The following accommodation has been allocated to your registration. In some cases this may not have been your first choice.")]),_:1}),u(ne,null,{default:t(()=>[u(Ze,{density:"compact"},{default:t(()=>[(e(!0),r(f,null,q(A.value,C=>(e(),s(et,{key:C.name},{default:t(()=>[u(tt,null,{default:t(()=>[n(h(C.name),1)]),_:2},1024),(e(!0),r(f,null,q(C.periods,V=>(e(),s(at,{key:V.start},{default:t(()=>[n(" ("+h(d(pe)(V.start))+" - "+h(d(pe)(V.end))+")",1),Ht]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})],64)):g("",!0),w.value&&l.value?(e(),r(f,{key:1},[u(oe,{class:"pb-4"},{default:t(()=>[n("Payment Information")]),_:1}),u(ne,null,{default:t(()=>[u(At,{"payment-transactions":R.value,registration:l.value},null,8,["payment-transactions","registration"])]),_:1})],64)):g("",!0),u(Ke,null,{default:t(()=>{var C,V;return[a.convention.DetailLink?(e(),s(c,{key:0,color:"orange",href:a.convention.DetailLink},{default:t(()=>[n(h(d(ae).buttonDetails),1)]),_:1},8,["href"])):g("",!0),u(Se),x.value?(e(),r(f,{key:1},[(C=l.value)!=null&&C.Submissions.find(M=>{var o;return((o=M.Form)==null?void 0:o.Type)===d(I).FORM_TYPE_REGISTRATION})?(e(),s(F,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[u(c,{color:"primary"},{default:t(()=>[n(h(d(ae).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),r(f,{key:0},[(V=a.forms.find(M=>M.Type===d(I).FORM_TYPE_REGISTRATION))!=null&&V.State.New?(e(),s(F,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[u(c,{color:"primary"},{default:t(()=>[n(h(d(ae).buttonRegister),1)]),_:1})]),_:1},8,["to"])):g("",!0)],64))],64)):w.value&&l.value&&l.value.Total>l.value.Paid?(e(),r(f,{key:2},[u(c,{color:"success",variant:"elevated",onClick:p[0]||(p[0]=M=>Y.value=!0)},{default:t(()=>[n("Make Payment")]),_:1}),l.value?(e(),s(ct,{key:0,"payment-transactions":R.value,registration:l.value,modelValue:Y.value,"onUpdate:modelValue":p[1]||(p[1]=M=>Y.value=M)},null,8,["payment-transactions","registration","modelValue"])):g("",!0)],64)):g("",!0)]}),_:1})]),_:1})}}}),jt=ge(qt,[["__scopeId","data-v-4cdd4655"]]),Wt=W({__name:"Conventions",setup(i){const U=ie(),T=D([]),E=D([]);return U.getOpenConventionsList().then(_=>{_&&(T.value=[...T.value,..._],U.getAvailableConventionForms(T.value.map(l=>l.ConventionUUID)).then(l=>{E.value=[...E.value,...l]}).catch(l=>{console.error(l)}))}),(_,l)=>(e(),s(ue,null,{default:t(()=>[u(X,{class:"justify-center"},{default:t(()=>[(e(!0),r(f,null,q(T.value,y=>(e(),s(j,{key:y.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[u(jt,{convention:y,forms:E.value.filter(A=>A.ConventionUUID===y.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Kt={};function Jt(i,U){return e(),r("div")}const Qt=ge(Kt,[["render",Jt]]),Xt=W({__name:"MainView",emits:["pageTitle"],setup(i,{emit:U}){U("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const _=localStorage.getItem("gjt_token"),l=localStorage.getItem("ajt_token");_?(localStorage.removeItem("gjt_token"),location.href=_):l&&(localStorage.removeItem("ajt_token"),location.href=l);const y=D(re());return(A,R)=>{const Y=le("router-link");return e(),r(f,null,[y.value&&(!y.value.Additional||!y.value.Additional.Email)?(e(),s(ue,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),u(Y,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):g("",!0),u(Wt),u(Qt)],64)}}}),wa=W({__name:"Home",props:{loggedIn:{type:Boolean}},emits:["pageTitle"],setup(i,{emit:U}){const T=re(),E=U;return E("pageTitle","Telegram Login"),(_,l)=>(e(),r("div",null,[_.loggedIn&&d(T)?(e(),s(Xt,{key:0,onPageTitle:l[0]||(l[0]=y=>E("pageTitle",y))})):(e(),s(Ve,{key:1}))]))}});export{wa as default};
