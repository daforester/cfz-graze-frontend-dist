import{p as Le,r as R,e as de,S as c,y as dl,ah as Ze,al as cl,an as el,n as Ne,ae as vl,s as _e,u as Re,w as le,E as Ge,v as r,H as $,x as ve,N as B,aA as ml,I as pe,a1 as te,a2 as ye,a5 as qe,K as o,R as P,U as Y,O as j,M as s,Z,L as p,Q as L,a3 as Ie,P as ll,ar as we,$ as tl,Y as fl,ac as Je,a as gl,ax as hl,J as pl,aB as Xe}from"./index-253b4565.js";import{F as ue}from"./form-29fd1dbb.js";import{a as yl}from"./submission-830079be.js";import{a as bl,V as he,u as Be,m as Ul,b as al,c as Il,d as Tl}from"./VCheckbox-ce550f28.js";import{s as Ve}from"./index-26b71cef.js";import{e as Dl,V as me,a as se,d as Me,c as Ce,b as nl}from"./VList-a6eb26a6.js";import{a as X,V as N}from"./VRow-d880c4d2.js";import{m as Cl,u as Vl,a as kl,b as El,V as xe,c as Sl}from"./copyToClipboard-33e66edd.js";import{n as Al,u as Ke,V as ke,z as Ol,j as _l}from"./VContainer-2c3fed6d.js";import{a as Rl,e as Ml,_ as We}from"./VChip-3c30e7f5.js";import{k as Ll,l as wl,j as Pl,V as Te,f as Fe,m as $l,n as xl}from"./VTextField-30c5acee.js";import{V as re}from"./VBtn-183aeea4.js";import{V as Fl}from"./VTextarea-b43013f3.js";import{m as Nl}from"./VAvatar-f268c0ef.js";import{G as ql}from"./userData-4f6fe910.js";import{v as Pe}from"./v4-a960c1f4.js";import{e as Bl,V as Kl,a as Hl,c as Yl}from"./VCard-cefbfc79.js";import{V as Gl}from"./VForm-9badb0c5.js";const je=(e,f,t)=>{if(t>=e.length){let M=t-e.length+1;for(;M--;)e.push(void 0)}e.splice(t,0,e.splice(f,1)[0])},Ee=e=>{e.sort((f,t)=>(f.Order?f.Order:0)-(t.Order?t.Order:0)),e.forEach((f,t)=>{f.Order=t})},zt=(e,f)=>{const t=f.indexOf(e);if(t===0)return;const M=e.Order;e.Order=f[t-1].Order,f[t-1].Order=M,Ee(f)},Qt=(e,f)=>{const t=f.indexOf(e);if(t>=f.length-1)return;const M=e.Order;e.Order=f[t+1].Order,f[t+1].Order=M,Ee(f)},$e=e=>(Ee(e),e),Zt=e=>(f,t)=>f[e]<t[e]?-1:f[e]>t[e]?1:0;var Q=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(Q||{});const ea=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var ul=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(ul||{});const la=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,f,t)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),Xl=Le({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Wl(e,f,t){var h;const M=[],y=(t==null?void 0:t.default)??Jl,g=t!=null&&t.filterKeys?Ze(t.filterKeys):!1,C=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return M;e:for(let V=0;V<e.length;V++){const d=e[V],l={},v={};let b=-1;if(f&&!(t!=null&&t.noFilter)){if(typeof d=="object"){const I=g||Object.keys(d);for(const n of I){const u=cl(d,n,d),a=(h=t==null?void 0:t.customKeyFilter)==null?void 0:h[n];if(b=a?a(u,f,d):y(u,f,d),b!==-1&&b!==!1)a?l[n]=b:v[n]=b;else if((t==null?void 0:t.filterMode)==="every")continue e}}else b=y(d,f,d),b!==-1&&b!==!1&&(v.title=b);const O=Object.keys(v).length,i=Object.keys(l).length;if(!O&&!i||(t==null?void 0:t.filterMode)==="union"&&i!==C&&!O||(t==null?void 0:t.filterMode)==="intersection"&&(i!==C||!O))continue}M.push({index:V,matches:{...v,...l}})}return M}function jl(e,f,t,M){const y=R([]),g=R(new Map),C=de(()=>M!=null&&M.transform?c(f).map(M==null?void 0:M.transform):c(f));dl(()=>{const V=typeof t=="function"?t():c(t),d=typeof V!="string"&&typeof V!="number"?"":String(V),l=Wl(C.value,d,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),v=c(f),b=[],O=new Map;l.forEach(i=>{let{index:I,matches:n}=i;const u=v[I];b.push(u),O.set(u.value,n)}),y.value=b,g.value=O});function h(V){return g.value.get(V.value)}return{filteredItems:y,filteredMatches:g,getMatches:h}}function zl(e,f,t){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?r($,null,[r("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),r("span",{class:"v-autocomplete__mask"},[e.substr(f,t)]),r("span",{class:"v-autocomplete__unmask"},[e.substr(f+t)])]):e}const Ql=Le({autoSelectFirst:{type:[Boolean,String]},search:String,...Xl({filterKeys:["title"]}),...Cl(),...el(Ll({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Nl({transition:!1})},"VAutocomplete"),ze=Ne()({name:"VAutocomplete",props:Ql(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:M}=vl(),y=R(),g=_e(!1),C=_e(!0),h=R(!1),V=R(),d=Re(e,"menu"),l=de({get:()=>d.value,set:S=>{var J;d.value&&!S&&((J=V.value)!=null&&J.ΨopenChildren)||(d.value=S)}}),v=_e(-1),b=de(()=>{var S;return(S=y.value)==null?void 0:S.color}),{items:O,transformIn:i,transformOut:I}=Dl(e),{textColorClasses:n,textColorStyles:u}=Al(b),a=Re(e,"search",""),T=Re(e,"modelValue",[],S=>i(S===null?[null]:Ze(S)),S=>{const J=I(S);return e.multiple?J:J[0]??null}),x=wl(),{filteredItems:F,getMatches:q}=jl(e,O,()=>C.value?"":a.value),U=de(()=>T.value.map(S=>O.value.find(J=>e.valueComparator(J.value,S.value))||S)),m=de(()=>e.hideSelected?F.value.filter(S=>!U.value.some(J=>J.value===S.value)):F.value),_=de(()=>U.value.map(S=>S.props.value)),A=de(()=>U.value[v.value]),k=de(()=>{var J;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((J=m.value[0])==null?void 0:J.title))&&m.value.length>0&&!C.value&&!h.value}),K=de(()=>e.hideNoData&&!O.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),ae=R(),{onListScroll:ce,onListKeydown:fe}=Vl(ae,y);function E(S){e.openOnClear&&(l.value=!0),a.value=""}function D(){K.value||(l.value=!0)}function ne(S){K.value||(g.value&&(S.preventDefault(),S.stopPropagation()),l.value=!l.value)}function w(S){var Ue,H,ee;if(e.readonly||x!=null&&x.isReadonly.value)return;const J=y.value.selectionStart,z=_.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(S.key))&&S.preventDefault(),["Enter","ArrowDown"].includes(S.key)&&(l.value=!0),["Escape"].includes(S.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(S.key)&&(k.value&&["Enter","Tab"].includes(S.key)&&be(F.value[0]),C.value=!0),S.key==="ArrowDown"&&k.value&&((Ue=ae.value)==null||Ue.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(S.key)){if(v.value<0){S.key==="Backspace"&&!a.value&&(v.value=z-1);return}const W=v.value;A.value&&be(A.value),v.value=W>=z-1?z-2:W}if(S.key==="ArrowLeft"){if(v.value<0&&J>0)return;const W=v.value>-1?v.value-1:z-1;U.value[W]?v.value=W:(v.value=-1,y.value.setSelectionRange((H=a.value)==null?void 0:H.length,(ee=a.value)==null?void 0:ee.length))}if(S.key==="ArrowRight"){if(v.value<0)return;const W=v.value+1;U.value[W]?v.value=W:(v.value=-1,y.value.setSelectionRange(0,0))}}}function G(S){a.value=S.target.value}function Se(){var S;g.value&&(C.value=!0,(S=y.value)==null||S.focus())}function ol(S){g.value=!0,setTimeout(()=>{h.value=!0})}function il(S){h.value=!1}function sl(S){(S==null||S===""&&!e.multiple)&&(T.value=[])}const De=_e(!1);function be(S){if(e.multiple){const J=_.value.findIndex(z=>e.valueComparator(z,S.value));if(J===-1)T.value=[...T.value,S];else{const z=[...T.value];z.splice(J,1),T.value=z}}else T.value=[S],De.value=!0,a.value=S.title,l.value=!1,C.value=!0,Ge(()=>De.value=!1)}return le(g,(S,J)=>{var z;S!==J&&(S?(De.value=!0,a.value=e.multiple?"":String(((z=U.value.at(-1))==null?void 0:z.props.title)??""),C.value=!0,Ge(()=>De.value=!1)):(!e.multiple&&!a.value?T.value=[]:k.value&&!h.value&&!U.value.some(Ue=>{let{value:H}=Ue;return H===m.value[0].value})&&be(m.value[0]),l.value=!1,a.value="",v.value=-1))}),le(a,S=>{!g.value||De.value||(S&&(l.value=!0),C.value=!S)}),Ke(()=>{const S=!!(e.chips||t.chip),J=!!(!e.hideNoData||m.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),z=T.value.length>0,[Ue]=Te.filterProps(e);return r(Te,ve({ref:y},Ue,{modelValue:a.value,"onUpdate:modelValue":sl,focused:g.value,"onUpdate:focused":H=>g.value=H,validationValue:T.externalValue,dirty:z,onInput:G,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:z?void 0:e.placeholder,"onClick:clear":E,"onMousedown:control":D,onKeydown:w}),{...t,default:()=>r($,null,[r(kl,ve({ref:V,modelValue:l.value,"onUpdate:modelValue":H=>l.value=H,activator:"parent",contentClass:"v-autocomplete__content",disabled:K.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Se},e.menuProps),{default:()=>[J&&r(me,{ref:ae,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:H=>H.preventDefault(),onKeydown:fe,onFocusin:ol,onFocusout:il,onScrollPassive:ce,tabindex:"-1"},{default:()=>{var H,ee,W;return[(H=t["prepend-item"])==null?void 0:H.call(t),!m.value.length&&!e.hideNoData&&(((ee=t["no-data"])==null?void 0:ee.call(t))??r(se,{title:M(e.noDataText)},null)),r(El,{renderless:!0,items:m.value},{default:ge=>{var Ye;let{item:oe,index:ie,itemRef:rl}=ge;const He=ve(oe.props,{ref:rl,key:ie,active:k.value&&ie===0?!0:void 0,onClick:()=>be(oe)});return((Ye=t.item)==null?void 0:Ye.call(t,{item:oe,index:ie,props:He}))??r(se,He,{prepend:Ae=>{let{isSelected:Oe}=Ae;return r($,null,[e.multiple&&!e.hideSelected?r(bl,{key:oe.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,oe.props.prependIcon&&r(ke,{icon:oe.props.prependIcon},null)])},title:()=>{var Ae,Oe;return C.value?oe.title:zl(oe.title,(Ae=q(oe))==null?void 0:Ae.title,((Oe=a.value)==null?void 0:Oe.length)??0)}})}}),(W=t["append-item"])==null?void 0:W.call(t)]}})]}),U.value.map((H,ee)=>{var oe;function W(ie){ie.stopPropagation(),ie.preventDefault(),be(H)}const ge={"onClick:close":W,onMousedown(ie){ie.preventDefault(),ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return r("div",{key:H.value,class:["v-autocomplete__selection",ee===v.value&&["v-autocomplete__selection--selected",n.value]],style:ee===v.value?u.value:{}},[S?t.chip?r(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:H.title}}},{default:()=>{var ie;return[(ie=t.chip)==null?void 0:ie.call(t,{item:H,index:ee,props:ge})]}}):r(Rl,ve({key:"chip",closable:e.closableChips,size:"small",text:H.title},ge),null):((oe=t.selection)==null?void 0:oe.call(t,{item:H,index:ee}))??r("span",{class:"v-autocomplete__selection-text"},[H.title,e.multiple&&ee<U.value.length-1&&r("span",{class:"v-autocomplete__selection-comma"},[B(",")])])])})]),"append-inner":function(){var ge;for(var H=arguments.length,ee=new Array(H),W=0;W<H;W++)ee[W]=arguments[W];return r($,null,[(ge=t["append-inner"])==null?void 0:ge.call(t,...ee),e.menuIcon?r(ke,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:ne,onClick:ml},null):void 0])}})}),Pl({isFocused:g,isPristine:C,menu:l,search:a,filteredItems:F,select:be},y)}}),Zl={class:"extrasList"},et=pe({__name:"Extras",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:M=!1,convention:y,disabled:g=!1}=t,C=ye(e,"modelValue"),h=qe.getInstance(),V=R({});try{V.value=JSON.parse(C.value)}catch{}const d=R([]),l=R([]);le(t,()=>{b()}),le(V.value,i=>{for(const I in i)if(i[I].checked){const n=d.value.map(u=>{var a;return(a=u.Options)==null?void 0:a.find(T=>T.OptionUUID===I)});if(n&&n.length>0)try{const u=n[0];i[I].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(i[I].choiceId=u.Choices[0].TagUUID),i[I].price=u==null?void 0:u.Price}catch{}}else i[I].choiceId="",i[I].price=0;C.value=JSON.stringify(i),O()});const v=de({get:()=>d.value.map(i=>i.ExtraUUID),set:()=>{}}),b=()=>{var I;const i=((I=t.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:I.Value)||"[]";try{const n=JSON.parse(i);d.value=l.value.filter(u=>n.find(a=>a===u.ExtraUUID))||[],v.value=[...d.value.map(u=>u.ExtraUUID)],d.value.forEach(u=>{var a;(a=u.Options)==null||a.forEach(T=>{V.value[T.OptionUUID]||(V.value[T.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in y&&y.Extras.length?(l.value=y.Extras,b()):"ConventionUUID"in y&&(M?h==null||h.getConventionExtras(y.ConventionUUID).then(i=>{i&&(l.value=i,b())}):h==null||h.getAvailableConventionExtras(y.ConventionUUID).then(i=>{i&&(l.value=i,b())}));const O=(i=void 0)=>{setTimeout(()=>f("change",i),100)};return(i,I)=>(o(),P("div",Zl,[Y("h4",null,j(i.label),1),r(me,{opened:v.value,"onUpdate:opened":I[0]||(I[0]=n=>v.value=n)},{default:s(()=>[(o(!0),P($,null,Z(d.value,n=>(o(),p(nl,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:s(({props:u})=>[r(se,ve({"prepend-icon":"mdi:mdi-group","append-icon":""},u),{default:s(()=>[n.Name?(o(),p(Me,{key:0},{default:s(()=>[Y("strong",null,j(n.Name),1)]),_:2},1024)):L("",!0),n.Description?(o(),p(Ce,{key:1,class:"mt-2 d-inline"},{default:s(()=>[B(j(n.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:s(()=>[n.Options?(o(!0),P($,{key:0},Z(n.Options,u=>(o(),p(se,{key:u.OptionUUID,class:"override-pl"},{default:s(()=>[r(X,null,{default:s(()=>[r(N,{cols:"12",sm:"6"},{default:s(()=>[r(he,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${c(Ve).currencySymbol}${u.Price})`:""}`,modelValue:V.value[u.OptionUUID].checked,"onUpdate:modelValue":a=>V.value[u.OptionUUID].checked=a,disabled:c(g),"hide-details":"",onChange:O},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&V.value[u.OptionUUID].checked?(o(),p(N,{key:0,cols:"12",sm:"6"},{default:s(()=>[r(xe,{items:u.Choices.sort((a,T)=>a.Title.localeCompare(T.Title)).map(a=>({value:a.TagUUID,title:a.Title})),modelValue:V.value[u.OptionUUID].choiceId,"onUpdate:modelValue":a=>V.value[u.OptionUUID].choiceId=a,"item-value":"value","item-title":"title",variant:"outlined",disabled:c(g),"hide-details":"",onChange:O},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const lt={class:"interestList"},tt=pe({__name:"Interests",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:M=!1,convention:y,disabled:g=!1}=t,C=ye(e,"modelValue"),h=qe.getInstance(),V=R({});try{V.value=JSON.parse(C.value)}catch{}const d=R([]),l=R([]);le(V.value,i=>{C.value=JSON.stringify(i)});const v=R([]),b=()=>{var I;const i=((I=t.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:I.Value)||"[]";try{const n=JSON.parse(i);d.value=l.value.filter(u=>n.find(a=>a===u.InterestUUID))||[],v.value=[...d.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in y&&(M?h==null||h.getConventionInterests(y.ConventionUUID).then(i=>{i&&(l.value=i,b())}):h==null||h.getConventionInterests(y.ConventionUUID).then(i=>{i&&(l.value=i,b())})),le(t,()=>{b()});const O=(i=void 0)=>{setTimeout(()=>f("change",i),100)};return(i,I)=>(o(),P("div",lt,[Y("h4",null,j(i.label),1),r(me,{opened:v.value,"onUpdate:opened":I[0]||(I[0]=n=>v.value=n)},{default:s(()=>[(o(!0),P($,null,Z(d.value.sort((n,u)=>n.Order>u.Order?1:n.Order==u.Order?0:-1),n=>(o(),p(se,{key:n.InterestUUID},{default:s(()=>[r(X,null,{default:s(()=>[r(N,null,{default:s(()=>[r(he,{label:`${n.Name} ${n.Price&&n.Price>0?`(${c(Ve).currencySymbol}${n.Price})`:""}`,modelValue:V.value[n.InterestUUID],"onUpdate:modelValue":u=>V.value[n.InterestUUID]=u,disabled:c(g),messages:n.Description,onChange:O},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const at={class:"ticketList"},nt={key:0,class:"text-orange-darken-1"},ut=pe({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:M=!1,convention:y,disabled:g=!1,registrationGroup:C=void 0}=t,h=ye(e,"modelValue"),V=qe.getInstance(),d=R({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{d.value=JSON.parse(h.value),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked)}catch{}const l=R([]),v=R([]),b=R([]),O=R({required:(a,T=void 0)=>()=>{if(g||!(C!=null&&C.Registration.Leader))return!0;if(T==null){if(d.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(a&&a.ComponentsRequired>0&&d.value.Ticket.includes(a.TicketUUID||"")){let x=0;if(a.TicketComponents.forEach(F=>{d.value.ComponentsChecked.forEach(q=>{F.TicketUUID===q&&(x+=1)})}),x<a.ComponentsRequired)return`Must select ticket ${a.ComponentsRequired} component${a.ComponentsRequired===1?"":"s"}`}}return!0}}),i=()=>{var T;const a=((T=t.items.find(x=>x.Title==="SelectedTickets"))==null?void 0:T.Value)||"[]";try{const x=JSON.parse(a);l.value=v.value.filter(F=>F.Type==="TICKET_TYPE_GROUP"&&x.find(q=>q===F.TicketUUID))||[],b.value=[...l.value.filter(F=>F.Type==="TICKET_TYPE_GROUP").map(F=>F.TicketUUID)]}catch{}};if("ConventionUUID"in y)if(M)V==null||V.getConventionTickets(y.ConventionUUID).then(a=>{a&&(v.value=a,i())});else{const a=t.items.find(T=>T.Title==="SelectedTickets");a&&(V==null||V.getFieldTickets(a.FieldUUID).then(T=>{T&&(v.value=T,i())}))}le(t,()=>{i()});const I=a=>{d.value.Ticket.length>1&&d.value.Ticket.shift(),d.value.ComponentsChecked=[];const T=[];l.value.forEach(x=>{(d.value.Ticket.includes(x.TicketUUID)||d.value.ComponentsChecked.includes(x.TicketUUID))&&T.push(...x.AddonTickets.map(F=>F.TicketUUID))}),d.value.AddonsChecked=d.value.AddonsChecked.filter(x=>T.includes(x)),u(a)},n=a=>{const T=v.value.find(x=>x.TicketUUID===d.value.Ticket[0]);if(T)for(;d.value.ComponentsChecked.length>T.ComponentsRequired;)d.value.ComponentsChecked.shift();u(a)},u=(a=void 0)=>{h.value=JSON.stringify(d.value),setTimeout(()=>f("change",a),100)};try{C!=null&&C.TicketData&&(d.value=JSON.parse(C.TicketData),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked),u())}catch{}return(a,T)=>{var x;return o(),P("div",at,[Y("h4",null,[B(j(a.label)+" ",1),(x=c(C))!=null&&x.Registration.Leader?L("",!0):(o(),P("small",nt,"(controlled by group leader)"))]),r(me,{opened:b.value,"onUpdate:opened":T[4]||(T[4]=F=>b.value=F)},{default:s(()=>[(o(!0),P($,null,Z(c($e)(l.value.filter(F=>F.Type===c(ul).TICKET_TYPE_GROUP)),F=>(o(),P($,{key:F.TicketUUID},[F.Tickets.length>0?(o(),p(nl,{key:0,value:F.TicketUUID},{activator:s(({props:q})=>[r(se,ve(q,{"prepend-icon":"mdi:mdi-group"}),{default:s(()=>[r(Me,null,{default:s(()=>[Y("strong",null,j(F.Name),1)]),_:2},1024),r(Ce,{class:"d-inline"},{default:s(()=>[B(j(F.Description),1)]),_:2},1024)]),_:2},1040)]),default:s(()=>[(o(!0),P($,null,Z(F.Tickets,q=>(o(),p(se,{key:q.TicketUUID,class:"override-pl"},{default:s(()=>{var U;return[r(Ce,{class:"d-inline"},{default:s(()=>[B(j(q.Description),1)]),_:2},1024),r(he,{modelValue:d.value.Ticket,"onUpdate:modelValue":T[0]||(T[0]=m=>d.value.Ticket=m),value:q.TicketUUID,onChange:I,rules:[O.value.required(q)],"validate-on":"submit",disabled:c(g)||!((U=c(C))!=null&&U.Registration.Leader)},{label:s(()=>[r(ke,{icon:q.RequiresAccommodation?"mdi:mdi-home":q.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),B(" "+j(`${q.Name} ${q.Price>0?`(${c(Ve).currencySymbol}${q.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),d.value.Ticket.length>0&&q.TicketUUID===d.value.Ticket[0]?(o(),P($,{key:0},[q.AddonTickets.length?(o(),p(me,{key:0},{default:s(()=>[(o(!0),P($,null,Z(c($e)(q.AddonTickets),m=>(o(),P($,{key:m==null?void 0:m.TicketUUID},[m?(o(),p(se,{key:0},{default:s(()=>[r(Me,null,{default:s(()=>{var _;return[r(he,{modelValue:d.value.AddonsChecked,"onUpdate:modelValue":T[1]||(T[1]=A=>d.value.AddonsChecked=A),value:m.TicketUUID,onChange:T[2]||(T[2]=A=>{d.value.ComponentsChecked=[],u(A)}),disabled:c(g)||!((_=c(C))!=null&&_.Registration.Leader)},{label:s(()=>[r(ke,{icon:m.RequiresAccommodation?"mdi:mdi-home-plus":m.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),B(" "+j(`${m.Name} ${m.Price>0?`(${c(Ve).currencySymbol}${m.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),r(Ce,{class:"d-inline"},{default:s(()=>[B(j(m.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),q.TicketComponents.length?(o(),p(me,{key:1},{default:s(()=>[(o(!0),P($,null,Z(c($e)(q.TicketComponents),m=>(o(),P($,{key:m==null?void 0:m.TicketUUID},[m?(o(),p(se,{key:0},{default:s(()=>[r(Me,null,{default:s(()=>{var _;return[r(he,{modelValue:d.value.ComponentsChecked,"onUpdate:modelValue":T[3]||(T[3]=A=>d.value.ComponentsChecked=A),value:m.TicketUUID,onChange:n,rules:[O.value.required(q,m)],"validate-on":"submit",disabled:c(g)||!((_=c(C))!=null&&_.Registration.Leader)},{label:s(()=>[r(ke,{icon:m.RequiresAccommodation?"mdi:mdi-home-plus":m.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),B(" "+j(`${m.Name} ${m.Price>0?`(${c(Ve).currencySymbol}${m.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),r(Ce,null,{default:s(()=>[B(j(m.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},it=Y("strong",null,"Your Sharing Group",-1),st={class:"d-flex flex-wrap my-2"},rt=Y("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1"}," Leader: ",-1),dt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},ct=Y("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1"}," Member: ",-1),vt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},mt=["href","onClick"],ft=Y("br",null,null,-1),gt=Y("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ht=Y("strong",null,"Your Groups Accommodation",-1),pt=Y("br",null,null,-1),yt=Y("small",null,"(in order of preference, controlled by group leader)",-1),bt=Y("strong",null,"Accommodation Options",-1),Ut=Y("br",null,null,-1),It=Y("strong",null,"Your Chosen Accommodation",-1),Tt=Y("small",null,"(in order of preference)",-1),Dt=pe({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:M=!1,convention:y,disabled:g}=t,C=ye(e,"modelValue"),h=Be(t,f,void 0,void 0,"items"),V=tl(),d=fl.getInstance(),l=R(Ie(C.value)),v=R([]),b=R(),O=R({sharing:!1}),i=()=>{try{const E=JSON.parse(t.data);E&&(O.value=E)}catch{}};i(),le(t,()=>{i(),t.registrationGroup&&(v.value=t.registrationGroup.Members,b.value=t.registrationGroup.Registration)}),le(l,E=>{C.value=Ie(E)},{deep:!0});const I=R(""),n=R(!1),u=()=>{var E;(E=b.value)!=null&&E.Leader&&V.getRegistrationInvite(y.ConventionUUID).then(D=>{if(D){const ne=new URL(location.href);ne.searchParams.set("token",D),I.value=ne.toString()}})},a=()=>{Sl(I.value),u(),n.value=!0,setTimeout(()=>n.value=!1,2200)},T=(E=void 0)=>{setTimeout(()=>f("change",E),100)},x=R({required:E=>!t.required||E.length>0||"Selections Required"}),F=E=>E?`#${E.Reference} ${E.Name}`:"",q=()=>{d.emit("registration.group.leave")},U=E=>{d.emit("registration.group.remove.member",E)},m=R([]);le(h,()=>{_()});const _=()=>{M?V.getConventionAccommodation(y.ConventionUUID).then(E=>{m.value=E.filter(D=>!!(h!=null&&h.value.find(ne=>ne.Value===D.AccommodationUUID)))||[]}):h.value.length>0&&V.getFieldAccommodation(h.value[0].FieldUUID).then(E=>{m.value=E.filter(D=>!!(h!=null&&h.value.find(ne=>ne.Value===D.AccommodationUUID)))||[]})};_(),(()=>{var E;if(t.registrationGroup)if(v.value=t.registrationGroup.Members,b.value=t.registrationGroup.Registration,(E=b.value)!=null&&E.Leader)u();else try{l.value=JSON.parse(t.registrationGroup.AccommodationData),T()}catch{}})();const k=R({column:0,id:""}),K=()=>{!g&&!l.value.includes(k.value.id)&&(k.value.column===0&&k.value.id!==""&&l.value.push(k.value.id),T())},ae=()=>{const E=l.value.findIndex(D=>D===k.value.id);!g&&E>=0&&(l.value.splice(E,1),T())},ce=()=>{if(g||k.value.column!==1)return;const E=l.value.findIndex(D=>D===k.value.id);E<=0||(je(l.value,E,E-1),T())},fe=()=>{if(g||k.value.column!==1)return;const E=l.value.findIndex(D=>D===k.value.id);E>=l.value.length-1||(je(l.value,E,E+1),T())};return(E,D)=>{var ne;return o(),P($,null,[Y("h4",null,j(E.label),1),r(X,null,{default:s(()=>[r(N,{cols:"12"},{default:s(()=>{var w;return[v.value&&b.value&&O.value.sharing?(o(),P("div",ot,[it,!c(g)&&((w=v.value.find(G=>G.IsLeader))==null?void 0:w.UUID)!==b.value.RegistrationUUID?(o(),p(re,{key:0,color:"red",variant:"text",onClick:q},{default:s(()=>[B("(leave group)")]),_:1})):L("",!0),Y("dl",st,[rt,Y("dd",dt,j(F(v.value.find(G=>G.IsLeader))),1),(o(!0),P($,null,Z(v.value,G=>(o(),P($,{key:G.UUID},[G.IsLeader?L("",!0):(o(),P($,{key:0},[ct,Y("dd",vt,[B(j(F(G))+" ",1),b.value.Leader?(o(),p(re,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:Se=>U(G.UUID),disabled:c(g)},null,8,["onClick","disabled"])):L("",!0)])],64))],64))),128))]),r(Ml,{modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=G=>n.value=G),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),I.value&&b.value.Leader&&!c(g)?(o(),P($,{key:1},[Y("a",{href:I.value,onClick:ll(a,["prevent"]),class:"text-white text-decoration-none"},[r(re,{color:"blue",class:"mb-2"},{default:s(()=>[B("Get Invite Link")]),_:1})],8,mt),ft,gt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),b.value&&!b.value.Leader?(o(),p(X,{key:0},{default:s(()=>[r(N,{cols:"10",md:"5"},{default:s(()=>[ht,pt,yt,r(me,null,{default:s(()=>[(o(!0),P($,null,Z(l.value.map(w=>m.value.find(G=>G.AccommodationUUID==w)).filter(w=>w!==void 0),(w,G)=>(o(),P($,null,[w?(o(),p(se,{key:w.AccommodationUUID,title:`${G+1}. ${w.Name}`,class:we(k.value.column===1&&k.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),p(X,{key:1},{default:s(()=>[r(N,{cols:"12",md:"5"},{default:s(()=>[bt,Ut,r(me,null,{default:s(()=>[(o(!0),P($,null,Z(m.value,w=>(o(),p(se,{key:w.AccommodationUUID,title:w.Name,class:we(k.value.column===0&&k.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:G=>k.value={column:0,id:w.AccommodationUUID},"append-icon":c(g)?"":"mdi:mdi-gesture-tap",onDblclick:D[1]||(D[1]=G=>K())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),c(g)?L("",!0):(o(),p(N,{key:0,cols:"12",md:"1"},{default:s(()=>[r(X,{class:"d-md-none"},{default:s(()=>[r(N,{cols:"12",class:"text-center"},{default:s(()=>[r(re,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[2]||(D[2]=w=>K()),color:"primary",title:"Select"}),B("   "),r(re,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[3]||(D[3]=w=>ae()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),r(X,{class:"d-none d-md-flex h-100 align-content-center"},{default:s(()=>[r(N,{cols:"12"},{default:s(()=>[r(re,{icon:"mdi:mdi-arrow-right",size:"small",onClick:D[4]||(D[4]=w=>K()),color:"primary",title:"Select"})]),_:1}),r(N,{cols:"12"},{default:s(()=>[r(re,{icon:"mdi:mdi-arrow-left",size:"small",onClick:D[5]||(D[5]=w=>ae()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),r(N,{cols:"10",md:"5"},{default:s(()=>[It,r(me,null,{default:s(()=>[(o(!0),P($,null,Z(l.value.map(w=>m.value.find(G=>G.AccommodationUUID==w)).filter(w=>w!==void 0),(w,G)=>(o(),P($,null,[w?(o(),p(se,{key:w.AccommodationUUID,title:`${G+1}. ${w.Name}`,class:we(k.value.column===1&&k.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Se=>k.value={column:1,id:(w==null?void 0:w.AccommodationUUID)||""},"append-icon":c(g)?"":"mdi:mdi-gesture-tap",onDblclick:D[6]||(D[6]=Se=>ae())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),Tt]),_:1}),c(g)?L("",!0):(o(),p(N,{key:1,cols:"2",md:"1"},{default:s(()=>[r(X,{class:"d-flex h-100 align-content-center mt-3"},{default:s(()=>[r(N,{cols:"12"},{default:s(()=>[r(re,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[7]||(D[7]=w=>ce()),color:"primary",title:"Higher Priority"})]),_:1}),r(N,{cols:"12"},{default:s(()=>[r(re,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[8]||(D[8]=w=>fe()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(ne=b.value)!=null&&ne.Leader?(o(),p(Fe,{key:2,modelValue:C.value,"onUpdate:modelValue":D[9]||(D[9]=w=>C.value=w),disabled:c(g)||!1,"persistent-hint":E.persistentHint||!1,"error-messages":E.errorMessages||"",rules:[x.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):L("",!0)],64)}}});const Ct=pe({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const t=e,M=Be(t,f,void 0,void 0,"items"),y=ye(e,"modelValue"),g=R({required:l=>!t.required||!!l||"Required.",min:l=>{var a,T;const v=new Date,b=v.getFullYear(),O=(v.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),i=v.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),I=((a=M.value.find(x=>x.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",n=((T=M.value.find(x=>x.Title=="BEFORE_DATE"))==null?void 0:T.Value)||`${b}-${O}-${i}`,u=V(n);return h(l,n,parseInt(I))||`You must be at least ${I} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),C=()=>(f("blur"),!(g.value.min(y.value||"")!==!0||g.value.required(y.value||"")!==!0)),h=(l,v,b)=>{if(l>=v)return!1;const O=V(l),I=V(v).getTime()-O.getTime(),n=1e3*60*60*24*365.25;return I/n>=b},V=l=>{const[v,b,O]=l.split("-");return new Date(parseInt(v),parseInt(b)-1,parseInt(O))},d=(l=void 0)=>{setTimeout(()=>f("change",l),100)};return(l,v)=>(o(),p(Te,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=b=>y.value=b),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:C,onChange:d},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Vt=Le({...Ul({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),kt=Ne()({name:"VRadio",props:Vt(),setup(e,f){let{slots:t}=f;return Ke(()=>r(al,ve(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}});const Et=Le({height:{type:[Number,String],default:"auto"},...$l(),...el(Il(),["multiple"]),trueIcon:{type:Je,default:"$radioOn"},falseIcon:{type:Je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),St=Ne()({name:"VRadioGroup",inheritAttrs:!1,props:Et(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:t,slots:M}=f;const y=gl(),g=de(()=>e.id||`radio-group-${y}`),C=Re(e,"modelValue");return Ke(()=>{const[h,V]=hl(t),[d,l]=Fe.filterProps(e),[v,b]=al.filterProps(e),O=M.label?M.label({label:e.label,props:{for:g.value}}):e.label;return r(Fe,ve({class:["v-radio-group",e.class],style:e.style},h,d,{modelValue:C.value,"onUpdate:modelValue":i=>C.value=i,id:g.value}),{...M,default:i=>{let{id:I,messagesId:n,isDisabled:u,isReadonly:a}=i;return r($,null,[O&&r(xl,{id:I.value},{default:()=>[O]}),r(Tl,ve(v,{id:I.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:a.value,"aria-labelledby":O?I.value:void 0,multiple:!1},V,{modelValue:C.value,"onUpdate:modelValue":T=>C.value=T}),M)])}})}),{}}}),Qe=pe({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:M=!1,disabled:y=!1,persistentHint:g=!1,required:C=!1}=t,h=R(""),V=ye(e,"modelValue"),d=Be(t,f,void 0,void 0,"field"),l=R(Ie(d.value)),v=R({maxlength:n=>!t.maxLength||n.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!t.minLength||n.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${n.length})`,required:n=>!t.required||!!n.replace(/\s/g,"")||"Required field."}),b=R(!1),O=R([]),i=R("");try{const n=JSON.parse(V.value);Array.isArray(n)?O.value=n:typeof n=="boolean"?b.value=n:i.value=V.value}catch{b.value=!1,O.value=[],i.value=V.value}le(b,()=>{V.value=JSON.stringify(b.value),f("input")}),le(O,()=>{V.value=JSON.stringify(O.value),f("input"),l.value.Type===Q.SELECT&&f("change")},{deep:!0}),le(i,()=>{V.value=i.value,f("input"),l.value.Type===Q.SELECT&&f("change")}),le(d.value,()=>{l.value.Type!==d.value.Type?(l.value=Ie(d.value),b.value=!1,O.value=[],i.value=""):l.value=Ie(d.value)});const I=(n=void 0)=>{f("change",n)};return(n,u)=>l.value.Type===c(Q).TEXT?(o(),p(Te,{key:0,modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:`${l.value.Label}${c(C)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(Q).DATE?(o(),p(Te,{key:1,modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=a=>i.value=a),type:"date",name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(Q).NUMBER?(o(),p(Te,{key:2,modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=a=>i.value=a),type:"number",name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(Q).TEXTAREA?(o(),p(Fl,{key:3,modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(Q).CHECKBOX?(o(),P($,{key:4},[l.value.Multiple?(o(!0),P($,{key:0},Z(l.value.Values,a=>(o(),p(he,{key:a.ID,modelValue:O.value,"onUpdate:modelValue":u[4]||(u[4]=T=>O.value=T),name:n.name,hint:l.value.Hint,label:a.Title,value:a.Value,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,rules:[v.value.required],onChange:I},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),p(he,{key:1,modelValue:b.value,"onUpdate:modelValue":u[5]||(u[5]=a=>b.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(C),rules:[a=>!c(C)||!!a||"You must tick to continue!"],onChange:I},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===c(Q).SELECT?(o(),P($,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),p(xe,{key:0,modelValue:O.value,"onUpdate:modelValue":u[6]||(u[6]=a=>O.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),p(ze,{key:1,modelValue:O.value,"onUpdate:modelValue":u[7]||(u[7]=a=>O.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),p(ze,{key:3,modelValue:i.value,"onUpdate:modelValue":u[9]||(u[9]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(o(),p(xe,{key:2,modelValue:i.value,"onUpdate:modelValue":u[8]||(u[8]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(y)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===c(Q).RADIO?(o(),p(St,{key:6,modelValue:i.value,"onUpdate:modelValue":u[10]||(u[10]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,rules:[v.value.required],onChange:I},{default:s(()=>[(o(!0),P($,null,Z(l.value.Values,a=>(o(),p(kt,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(Q).ACCOMMODATION?(o(),p(Dt,{key:7,modelValue:O.value,"onUpdate:modelValue":u[11]||(u[11]=a=>O.value=a),name:n.name,admin:c(M),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(C),onChange:I},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(Q).AGE?(o(),p(Ct,{key:8,modelValue:i.value,"onUpdate:modelValue":u[12]||(u[12]=a=>i.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,onChange:I},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===c(Q).EXTRAS?(o(),p(et,{key:9,modelValue:i.value,"onUpdate:modelValue":u[13]||(u[13]=a=>i.value=a),admin:c(M),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(C),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(Q).INTERESTS?(o(),p(tt,{key:10,modelValue:i.value,"onUpdate:modelValue":u[14]||(u[14]=a=>i.value=a),admin:c(M),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(C),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(Q).TICKET?(o(),p(ut,{key:11,modelValue:i.value,"onUpdate:modelValue":u[15]||(u[15]=a=>i.value=a),admin:c(M),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(y)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(C),onChange:I},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),At={key:0,class:"my-2 text-white text-center"},Ot={key:1,class:"admin-header my-2 text-white text-center"},_t=["innerHTML"],Rt=["innerHTML"],ta=pe({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:te(["close"],["update:modelValue"]),setup(e,{emit:f}){const t=ye(e,"modelValue");Ee(t.value.Sections),t.value.Sections.forEach(U=>{U.Fields&&Ee(U.Fields)});const M=R(),y=ql(),g=tl(),C=R(!1),h=R(!1),V=R(!1),d=R(!1),l=R(!1),v=R(!1),b=R(!1),O=R(!1),i=R(!1),I=R(!1),n=R(!1),u=R((()=>{if(e.data!==void 0){const m=Ie(e.data);return t.value.Sections.forEach(_=>{_.Fields&&_.Fields.forEach(A=>{const k=e.data.Data.find(K=>K.SectionFieldUUID===A.SectionFieldUUID&&K.SectionFieldUUID==A.SectionFieldUUID);if(k)A.Value=k.Data;else{const K={ID:0,SubmissionDataUUID:Pe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:_.ID,SectionUUID:_.SectionUUID,SectionFieldID:A.ID,SectionFieldUUID:A.SectionFieldUUID,Data:A.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};m.Data.push(K),A.Value=""}})}),m}const U={ID:0,SubmissionUUID:Pe(),FormID:t.value.ID,FormUUID:t.value.FormUUID,UserID:(y==null?void 0:y.ID)||0,UserUUID:(y==null?void 0:y.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return U.Data=t.value.Sections.map(m=>m.Fields?m.Fields.map(_=>({ID:0,SubmissionDataUUID:Pe(),SubmissionID:U.ID,SubmissionUUID:U.SubmissionUUID,SectionID:m.ID,SectionUUID:m.SectionUUID,SectionFieldID:_.ID,SectionFieldUUID:_.SectionFieldUUID,Data:""})):[]).flat(),U})()),a=(U,m,_)=>{const A=u.value.Data.find(k=>k.SectionUUID===U&&k.SectionFieldUUID===m);A&&(A.Data=_)},T=(U,m,_,A,k)=>U&&U.Type===ue.FORM_TYPE_REGISTRATION?m?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===ue.FORM_TYPE_ACCOMMODATION?_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===ue.FORM_TYPE_DEALER?A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===ue.FORM_TYPE_BADGE?k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(U&&U.Type===ue.FORM_TYPE_ADDITIONAL,"/"),x=({callback:U})=>{g.getRegistrationByConvention(e.convention.ConventionUUID).then(m=>{U&&U("Loading"),g.getAvailableConventionForms(e.convention.ConventionUUID).then(_=>{m.Submissions.forEach((E,D)=>{E.Form||(m.Submissions[D].Form=_.find(ne=>ne.FormUUID===E.FormUUID))});const A=m.Submissions.find(E=>E.FormUUID===u.value.FormUUID),k=m.Submissions.find(E=>{var D;return((D=E.Form)==null?void 0:D.Type)===ue.FORM_TYPE_ACCOMMODATION}),K=m.Submissions.find(E=>{var D;return((D=E.Form)==null?void 0:D.Type)===ue.FORM_TYPE_ADDITIONAL}),ae=m.Submissions.find(E=>{var D;return((D=E.Form)==null?void 0:D.Type)===ue.FORM_TYPE_DEALER}),ce=m.Submissions.find(E=>{var D;return((D=E.Form)==null?void 0:D.Type)===ue.FORM_TYPE_BADGE}),fe=T(A==null?void 0:A.Form,k==null?void 0:k.Form,ae==null?void 0:ae.Form,ce==null?void 0:ce.Form,K==null?void 0:K.Form);Xe.push(fe)})})},F=({callback:U})=>{var m;(m=M.value)==null||m.validate().then(_=>{_.valid?g.saveSubmission(u.value).then(A=>{A?setTimeout(()=>{q(A,U,1)},1e3):U&&U("Failed to process request")}).catch(()=>{U&&U("Failed to process request")}):U&&U("Errors in form detected, please review and try again.")})},q=(U,m,_=1)=>{g.checkSubmission(U).then(A=>{if(A)if(A.Ready&&A.Submission){if(C.value=!1,u.value=A.Submission,m&&m("Saved"),e.admin)f("close");else if(A.Forms&&A.Forms.length>0){const k=A.Forms.find(D=>D.FormUUID===u.value.FormUUID),K=A.Forms.find(D=>D.Type===ue.FORM_TYPE_ACCOMMODATION),ae=A.Forms.find(D=>D.Type===ue.FORM_TYPE_DEALER),ce=A.Forms.find(D=>D.Type===ue.FORM_TYPE_BADGE),fe=A.Forms.find(D=>D.Type===ue.FORM_TYPE_ADDITIONAL),E=T(k,K,ae,ce,fe);Xe.push(E)}}else{if(_>5&&(C.value=!0),_>10&&(h.value=!0),_>20&&(V.value=!0),_>30&&(d.value=!0),_>40&&(l.value=!0),_>50&&(v.value=!0),_>60&&(b.value=!0),_>70&&(O.value=!0),_>80&&(i.value=!0),_>90&&(I.value=!0),_>100&&(n.value=!0),_>200){m&&(C.value=!1,h.value=!1,V.value=!1,d.value=!1,l.value=!1,v.value=!1,b.value=!1,O.value=!1,i.value=!1,I.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{q(U,m,_+1)},_<20?1e3*_:2e4)}else m&&(C.value=!1,h.value=!1,V.value=!1,d.value=!1,l.value=!1,v.value=!1,b.value=!1,O.value=!1,i.value=!1,I.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."))}).catch(()=>{m&&(C.value=!1,h.value=!1,V.value=!1,d.value=!1,l.value=!1,v.value=!1,b.value=!1,O.value=!1,i.value=!1,I.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."))})};return(U,m)=>{const _=pl("router-link");return o(),p(_l,null,{default:s(()=>[r(Gl,{ref_key:"formValidator",ref:M,onSubmit:m[1]||(m[1]=ll(()=>{},["prevent"]))},{default:s(()=>[t.value.Heading?(o(),P("h1",At,j(t.value.Heading),1)):L("",!0),U.admin?(o(),P("h2",Ot," (Admin Mode) ")):L("",!0),t.value.Description?(o(),P("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:t.value.Description},null,8,_t)):L("",!0),(o(!0),P($,null,Z(t.value.Sections,A=>(o(),p(Bl,{key:`section_${t.value.ID}.${A.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:s(()=>[A.Heading?(o(),p(Kl,{key:0},{default:s(()=>[B(j(A.Heading),1)]),_:2},1024)):L("",!0),A.Description?(o(),p(Hl,{key:1,class:"text-wrap"},{default:s(()=>[Y("div",{innerHTML:A.Description},null,8,Rt)]),_:2},1024)):L("",!0),A.Fields?(o(),p(Yl,{key:2},{default:s(()=>[(o(!0),P($,null,Z(A.Fields,k=>(o(),P($,{key:`field_${t.value.ID}.${A.ID}.${k.ID}`},[k.Field?(o(),p(X,{key:0},{default:s(()=>[r(N,null,{default:s(()=>[U.editable?(o(),p(Qe,{key:0,field:k.Field,modelValue:k.Value,"onUpdate:modelValue":K=>k.Value=K,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:k.Required,"min-length":k.MinLength,"max-length":k.MaxLength,"persistent-hint":!0,onChange:K=>a(A.SectionUUID,k.SectionFieldUUID,k.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),p(Qe,{key:1,field:k.Field,modelValue:k.Value,"onUpdate:modelValue":K=>k.Value=K,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:k.Required,"min-length":k.MinLength,"max-length":k.MaxLength,"persistent-hint":!0,disabled:"",onChange:K=>a(A.SectionUUID,k.SectionFieldUUID,k.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),U.preview?L("",!0):(o(),P($,{key:3},[r(X,null,{default:s(()=>[U.admin?(o(),p(N,{key:1,class:"text-right"},{default:s(()=>[r(re,{color:"red",onClick:m[0]||(m[0]=A=>f("close"))},{default:s(()=>[B("Cancel")]),_:1})]),_:1})):(o(),p(N,{key:0,class:"text-right"},{default:s(()=>[r(_,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:s(()=>[r(re,{color:"red"},{default:s(()=>[B("Close")]),_:1})]),_:1})]),_:1})),U.admin||U.editable?(o(),p(N,{key:2,class:"text-left"},{default:s(()=>[r(We,{onClick:F,type:"submit"})]),_:1})):(o(),p(N,{key:3,class:"text-left"},{default:s(()=>[r(We,{onClick:x,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),C.value?(o(),p(X,{key:0},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),h.value?(o(),p(X,{key:1},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),V.value?(o(),p(X,{key:2},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):L("",!0),d.value?(o(),p(X,{key:3},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Reticulating splines ")]),_:1})]),_:1})):L("",!0),l.value?(o(),p(X,{key:4},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):L("",!0),v.value?(o(),p(X,{key:5},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):L("",!0),b.value?(o(),p(X,{key:6},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):L("",!0),O.value?(o(),p(X,{key:7},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Let's have a race, see if you can inflate a Puffy Paws pool toy by mouth before we finish. ")]),_:1})]),_:1})):L("",!0),i.value?(o(),p(X,{key:8},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):L("",!0),I.value?(o(),p(X,{key:9},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):L("",!0),n.value?(o(),p(X,{key:10},{default:s(()=>[r(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[B(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{ea as F,ul as T,ze as V,Qe as _,Qt as a,la as b,Q as c,ta as d,Zt as e,Xl as f,zt as m,Ee as s,jl as u};
