import{c as D}from"./FormRenderer.vue_vue_type_script_setup_true_lang-3079caed.js";import{I as d,a4 as R,a0 as h,r as m,K as G,L as _,Q as T,$ as x,Y as E}from"./index-2a688355.js";import{G as V}from"./userData-ea3ac98e.js";import{p as b}from"./performLoginCheck-2a760a83.js";import"./VCheckbox-cc7fc900.js";import"./VCheckboxBtn-4c7c535b.js";import"./VContainer-54086c4d.js";import"./VTextField-34a9e9b0.js";import"./index-e0270e99.js";import"./index-71069b21.js";import"./VList-35a1a493.js";import"./VAvatar-06a39365.js";import"./VRow-5a1afc1b.js";import"./VSelect-1f86ea90.js";import"./VChip-ec5e2d86.js";import"./scopeId-91cfe6c6.js";import"./filter-4fe65c5f.js";import"./copyToClipboard-54de8978.js";import"./v4-a960c1f4.js";import"./VCard-d1107fa4.js";import"./VForm-9fa4d160.js";const Z=d({__name:"RegisterView",emits:["pageTitle"],setup(k,{emit:g}){const f=R(),C=h(),i=x(),v=E.getInstance(),a=m(),r=m(),U=m(),u=m(),l=m(!1),s=V();b(C);const p=e=>new Promise((t,o)=>{i.getConventionRegistrationGroup(e).then(n=>{n?(u.value=n,t(n)):o()}).catch(()=>{o()})});return(()=>{i.getConvention(f.params.convention.toString()).then(e=>{e&&(a.value=e,p(e.ConventionUUID),i.getConventionExtras(e.ConventionUUID||"").then(t=>(a.value||{Extras:[]}).Extras=t),i.getAvailableConventionForms(e.ConventionUUID||"",!0).then(t=>{var o;r.value=t.find(n=>n.Type==="REGISTRATION"),r.value&&(s!=null&&s.UserUUID&&e.ConventionUUID&&i.getUserConventionSubmissions((s==null?void 0:s.UserUUID)||"",e.ConventionUUID||"").then(n=>{n&&(U.value=n.find(I=>{var c;return I.FormUUID===((c=r.value)==null?void 0:c.FormUUID)})),l.value=!0}).catch(()=>{l.value=!0}),g("pageTitle",`Convention Registration - ${((o=a.value)==null?void 0:o.Name)||"New Convention"}`))}))})})(),g("pageTitle","Convention Registration"),v.on("registration.group.leave",()=>{var e;i.leaveRegistrationGroup(((e=u.value)==null?void 0:e.Registration.RegistrationUUID)||"").then(t=>{var o;t&&p(((o=u.value)==null?void 0:o.Registration.ConventionUUID)||"").then(n=>{v.emit("registration.group.left",n)})})}),v.on("registration.group.join",()=>{var e;p(((e=a.value)==null?void 0:e.ConventionUUID)||"")}),(e,t)=>l.value&&r.value&&a.value&&u.value?(G(),_(D,{key:0,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),convention:a.value,data:U.value,editable:!0,"registration-group":u.value},null,8,["modelValue","convention","data","registration-group"])):T("",!0)}});export{Z as default};
