import{I as L,a0 as le,a1 as ie,J as re,r as w,w as K,M as e,N as i,O as t,v as c,P as n,R as ue,Q as I,S as T,a2 as ce,X as _,a3 as J,K as ee,V as r,H as p,a4 as H,W as v,p as de,a5 as me,n as ve,u as fe,a as pe,e as D,x as q,L as W,Y as _e,Z as ye,_ as ne}from"./index-0dcdcb29.js";import{G as Q}from"./userData-36e18bac.js";import{_ as ge}from"./LoginView.vue_vue_type_script_setup_true_lang-b50874d6.js";import{s as j}from"./index-26b71cef.js";import{F as A}from"./form-29fd1dbb.js";import{S as V,a as Se}from"./submission-2c955912.js";import{V as se,u as Te,a as he}from"./scopeId-e4150a40.js";import{c as G}from"./canEditForm-1bd557fa.js";import{s as ke}from"./sortSubmissions-8ed80f07.js";import{P as x,a as Ie,f as Ue,u as Ee}from"./useDisplayTransactions-714d3fd8.js";import{V as Ae,l as we}from"./VAlert-cb2cf008.js";import{_ as Ce}from"./ModelDialog.vue_vue_type_script_setup_true_lang-5b5779ce.js";import{V as Pe}from"./VForm-9f555bd2.js";import{V as B,a as Y}from"./VRow-7a327c73.js";import{V as y,a as be}from"./VBtn-7bd0212c.js";import{j as X,u as Oe,V as Ve}from"./VContainer-bf65e922.js";import{V as De,m as Re,a as te}from"./SaveButton.vue_vue_type_script_setup_true_lang-379c3c99.js";import{V as Ne}from"./VAvatar-8b364716.js";import{V as oe,a as Me,b as Fe,c as ae,d as $e,e as Ye}from"./VCard-80f7f9c0.js";import{f as Le}from"./forwardRefs-c4410a6e.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-ca715bf8.js";import"./createSimpleFunctional-93a8dcbc.js";import"./VDialog-4df81174.js";import"./VToolbar-70d3a2a9.js";const xe=_("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),_("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),Be=_("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),ze=_("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),Ge=_("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),He=_("p",{class:"my-4"},[n(" Please contact "),_("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),je=_("div",{id:"link-authentication-element"},null,-1),qe=_("div",{id:"payment-element"},null,-1),We=L({__name:"StripePayment",props:le({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(l){const g=ie(l,"modelValue"),h=J(),k=Q(),m=re(),a=w(),f=w(),U=w((k==null?void 0:k.Additional.Email)||""),C=w(!1),$=w("");let R;const M=w(!1);K(g,u=>{u&&h.stripePublicKey().then(async d=>{d&&(f.value=await we(d),await o(f.value))})});const F=u=>{$.value=u,C.value=!0};async function o(u){var N;if(!u)return;const d=await h.stripePaymentIntent(((N=l.registration)==null?void 0:N.RegistrationUUID)||""),S={theme:"stripe"};m.current.value.dark&&(S.theme="night"),R=u.elements({clientSecret:d,appearance:S});const b=R.create("linkAuthentication",{defaultValues:{email:U.value}});b.mount("#link-authentication-element"),b.on("change",z=>{U.value=z.value.email});const s={layout:"tabs"};R.create("payment",s).mount("#payment-element")}async function E(u,d){if(!d)return;u.preventDefault(),M.value=!0;const S=new URL(location.href);S.pathname+="payment/stripe/processing";const{error:b}=await d.confirmPayment({elements:R,confirmParams:{return_url:S.toString(),receipt_email:U.value}});b.type==="card_error"||b.type==="validation_error"?F(b.message):F("An unexpected error occurred."),M.value=!1}return(u,d)=>(e(),i(Ce,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=S=>g.value=S),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[c(X,{class:"pa-0"},{default:t(()=>[c(Ae,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[xe,Be,ze,Ge,He]),_:1}),c(Pe,{ref_key:"paymentForm",ref:a,id:"payment-form",onSubmit:d[1]||(d[1]=ue(S=>E(S,f.value),["prevent"]))},{default:t(()=>[c(B,null,{default:t(()=>[c(Y,null,{default:t(()=>[je]),_:1})]),_:1}),c(B,null,{default:t(()=>[c(Y,null,{default:t(()=>[qe]),_:1})]),_:1}),c(B,null,{default:t(()=>[u.registration?(e(),i(Y,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+I(u.registration.Total-u.registration.Paid),1)]),_:1})):T("",!0)]),_:1}),c(B,null,{default:t(()=>[c(Y,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(y,{color:"error",class:"w-100",onClick:d[0]||(d[0]=S=>g.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),c(se),c(Y,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(y,{type:"submit",color:"success",class:"w-100"},ce({default:t(()=>[n(" Pay Now ")]),_:2},[M.value?{name:"prepend",fn:t(()=>[c(be,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),c(De,{modelValue:C.value,"onUpdate:modelValue":d[3]||(d[3]=S=>C.value=S)},{actions:t(()=>[c(y,{variant:"text",onClick:d[2]||(d[2]=S=>C.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(I($.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Ke={key:0},Je={key:1,class:"v-row"},Qe={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Xe={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Ze={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},et={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},tt={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},ot={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},at={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},nt=_("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),st={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},lt=_("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),it={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},rt=_("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),ut={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},ct=L({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(l){const g=l,h=w(ee(g.paymentTransactions));K(g,()=>{h.value=ee(g.paymentTransactions)});const k=(m,a)=>m.Type===x.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type!==x.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:m.Type!==x.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type===x.PAYMENT_TRANSACTION_TYPE_CHARGE||(m.UpdatedAt||0)>(a.UpdatedAt||0)?1:m.UpdatedAt===a.UpdatedAt?0:-1;return(m,a)=>m.registration.Total==0?(e(),r("p",Ke," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),r("dl",Je,[(e(!0),r(p,null,H(h.value.sort(k),f=>{var U;return e(),r(p,{key:f.PaymentTransactionUUID},[f.Type===v(x).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),r("dt",Qe,[_("div",Xe,I(f.Description.split(":")[0]),1),_("div",Ze,I(f.Description.split(":")[1]),1)])):(e(),r("dt",et,[_("div",tt,I((U=v(Ie).find(C=>C.value===f.Type))==null?void 0:U.title),1),_("div",ot," [ "+I(v(Ue)(f.UpdatedAt||""))+" ] "+I(f.Description),1)])),_("dd",at," £"+I(f.Amount),1)],64)}),128)),nt,_("dd",st," £"+I(m.registration.Total),1),lt,_("dd",it," £"+I(m.registration.Paid),1),rt,_("dd",ut," £"+I(m.registration.Total-m.registration.Paid),1)]))}});const dt=de({id:String,text:String,...me(Re({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),mt=ve()({name:"VTooltip",props:dt(),emits:{"update:modelValue":l=>!0},setup(l,g){let{slots:h}=g;const k=fe(l,"modelValue"),{scopeId:m}=Te(),a=pe(),f=D(()=>l.id||`v-tooltip-${a}`),U=w(),C=D(()=>l.location.split(" ").length>1?l.location:l.location+" center"),$=D(()=>l.origin==="auto"||l.origin==="overlap"||l.origin.split(" ").length>1||l.location.split(" ").length>1?l.origin:l.origin+" center"),R=D(()=>l.transition?l.transition:k.value?"scale-transition":"fade-transition"),M=D(()=>q({"aria-describedby":f.value},l.activatorProps));return Oe(()=>{const[F]=te.filterProps(l);return c(te,q({ref:U,class:["v-tooltip",l.class],style:l.style,id:f.value},F,{modelValue:k.value,"onUpdate:modelValue":o=>k.value=o,transition:R.value,absolute:!0,location:C.value,origin:$.value,persistent:!0,role:"tooltip",activatorProps:M.value,_disableGlobalStack:!0},m),{activator:h.activator,default:function(){var d;for(var o=arguments.length,E=new Array(o),u=0;u<o;u++)E[u]=arguments[u];return((d=h.default)==null?void 0:d.call(h,...E))??l.text}})}),Le({},U)}}),vt=l=>(_e("data-v-7544ea35"),l=l(),ye(),l),ft=["innerHTML"],pt={key:0},_t={key:0,class:"font-weight-bold float-left pt-1 w-50"},yt={key:1,class:"pa-1"},gt={key:0,class:"font-weight-bold float-left pt-1 w-50"},St={key:1},Tt={class:"font-weight-bold float-left pt-1 w-50"},ht={class:"text-red-darken-4"},kt={key:1,class:"text-red-darken-4 mt-4"},It=vt(()=>_("strong",null,"There are forms above that require completion, please edit and save them.",-1)),Ut=[It],Et=L({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const g=he(),h=J(),{getPaymentTransactions:k}=Ee(),m=w(g.GetConventionLogoURL(l.convention.ConventionUUID)),a=w(),f=w([]),U=w(!1),C=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_REGISTRATION)}),$=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_DEALER)}),R=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_ACCOMMODATION)}),M=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_ADDITIONAL)}),F=D(()=>{var o,E;return a.value&&((o=a.value)!=null&&o.Submissions)?!!((E=a.value)!=null&&E.Submissions.find(u=>{var d;return((d=u.Form)==null?void 0:d.Type)==A.FORM_TYPE_REGISTRATION&&(u.Status==V.SUBMISSION_STATUS_ACCEPTED||u.Status==V.SUBMISSION_STATUS_COMPLETED)})):!1});return K(()=>l.forms,()=>{h.getRegistrationByConvention(l.convention.ConventionUUID).then(o=>{var E;o&&(o.Submissions?(o.Submissions.forEach((u,d)=>{u.Form||(o.Submissions[d].Form=l.forms.find(S=>S.FormUUID===u.FormUUID))}),ke(o.Submissions)):o.Submissions=[],a.value=o,F.value&&k(((E=a.value)==null?void 0:E.RegistrationUUID)||"").then(u=>{f.value=u}))})}),(o,E)=>{const u=W("router-link"),d=W("RouterLink");return e(),i(Ye,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[c(Fe,{class:"flex-1-1 align-content-start"},{default:t(()=>[m.value?(e(),i(Ne,{key:0,src:m.value,title:o.convention.Name,class:"logo text-center"},null,8,["src","title"])):T("",!0),o.convention.Name?(e(),i(oe,{key:1,class:"text-center"},{default:t(()=>[n(I(o.convention.Name),1)]),_:1})):T("",!0),o.convention.Description?(e(),i(Me,{key:2,class:"text-wrap subtitle"},{default:t(()=>[_("div",{innerHTML:o.convention.Description},null,8,ft)]),_:1})):T("",!0)]),_:1}),c(ae,null,{default:t(()=>{var S,b;return[a.value?(e(),r("dl",pt,[a.value.Reference?(e(),r("dt",_t," Badge No: ")):T("",!0),a.value.Reference?(e(),r("dd",yt," #"+I(a.value.Reference),1)):T("",!0),(e(!0),r(p,null,H((S=a.value)==null?void 0:S.Submissions,s=>{var O,N,z,Z;return e(),r(p,{key:s.SubmissionUUID},[s.Form?(e(),r(p,{key:0},[s.Form?(e(),r("dt",gt,I(s.Form.Heading),1)):T("",!0),s.Form?(e(),r("dd",St,[c(mt,null,{activator:t(({props:P})=>[c(Ve,q(P,{color:"blue-darken-2",icon:"mdi:mdi-information"}),null,16)]),default:t(()=>[s.Status===v(V).SUBMISSION_STATUS_NULL?(e(),r(p,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):s.Status===v(V).SUBMISSION_STATUS_INCOMPLETE?(e(),r(p,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):s.Status===v(V).SUBMISSION_STATUS_OPEN?(e(),r(p,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):s.Status===v(V).SUBMISSION_STATUS_LOCKED?(e(),r(p,{key:3},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_ACCEPTED?(e(),r(p,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_COMPLETED?(e(),r(p,{key:5},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_REJECTED?(e(),r(p,{key:6},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):s.Status===v(V).SUBMISSION_STATUS_INVALID?(e(),r(p,{key:7},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):s.Status===v(V).SUBMISSION_STATUS_CANCELLED?(e(),r(p,{key:8},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),r(p,{key:9},[n(" Please contact the registration team for support. ")],64))]),_:2},1024),n(" "+I(v(Se)(s.Status))+" ",1),((O=s.Form)==null?void 0:O.Type)===v(A).FORM_TYPE_REGISTRATION?(e(),i(u,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&C.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((N=s.Form)==null?void 0:N.Type)===v(A).FORM_TYPE_ACCOMMODATION?(e(),i(u,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&R.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((z=s.Form)==null?void 0:z.Type)===v(A).FORM_TYPE_DEALER?(e(),i(u,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&$.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((Z=s.Form)==null?void 0:Z.Type)===v(A).FORM_TYPE_ADDITIONAL?(e(),i(u,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&M.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):T("",!0)])):T("",!0)],64)):T("",!0)],64)}),128)),((b=a.value)==null?void 0:b.Submissions.length)>=1?(e(!0),r(p,{key:2},H(o.forms,s=>{var O;return e(),r(p,{key:s.FormUUID},[(O=a.value)!=null&&O.Submissions.find(N=>N.FormUUID===s.FormUUID)?T("",!0):(e(),r(p,{key:0},[_("dt",Tt,I(s.Heading),1),_("dd",ht,[n(" Requires Completion "),s.Type===v(A).FORM_TYPE_REGISTRATION?(e(),i(u,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>[s.State.Edit&&C.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_ACCOMMODATION?(e(),i(u,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>[s.State.Edit&&R.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_DEALER?(e(),i(u,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>[s.State.Edit&&$.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_ADDITIONAL?(e(),i(u,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>[s.State.Edit&&M.value?(e(),i(y,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),i(y,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):T("",!0)])],64))],64)}),128)):T("",!0)])):T("",!0),a.value&&a.value.Submissions.length>=1&&o.forms.filter(s=>{var O;return!((O=a.value)!=null&&O.Submissions.find(N=>N.FormUUID==s.FormUUID))}).length?(e(),r("div",kt,Ut)):T("",!0)]}),_:1}),F.value&&a.value?(e(),r(p,{key:0},[c(oe,{class:"pb-4 text-center"},{default:t(()=>[n("Payment Information")]),_:1}),c(ae,null,{default:t(()=>[c(ct,{"payment-transactions":f.value,registration:a.value},null,8,["payment-transactions","registration"])]),_:1})],64)):T("",!0),c($e,null,{default:t(()=>{var S,b;return[o.convention.DetailLink?(e(),i(y,{key:0,color:"orange",href:o.convention.DetailLink},{default:t(()=>[n(I(v(j).buttonDetails),1)]),_:1},8,["href"])):T("",!0),c(se),C.value?(e(),r(p,{key:1},[(S=a.value)!=null&&S.Submissions.find(s=>{var O;return((O=s.Form)==null?void 0:O.Type)===v(A).FORM_TYPE_REGISTRATION})?(e(),i(d,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(y,{color:"primary"},{default:t(()=>[n(I(v(j).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),r(p,{key:0},[(b=o.forms.find(s=>s.Type===v(A).FORM_TYPE_REGISTRATION))!=null&&b.State.New?(e(),i(d,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(y,{color:"primary"},{default:t(()=>[n(I(v(j).buttonRegister),1)]),_:1})]),_:1},8,["to"])):T("",!0)],64))],64)):F.value&&a.value&&a.value.Total>a.value.Paid?(e(),r(p,{key:2},[c(y,{color:"success",variant:"elevated",onClick:E[0]||(E[0]=s=>U.value=!0)},{default:t(()=>[n("Make Payment")]),_:1}),a.value?(e(),i(We,{key:0,"payment-transactions":f.value,registration:a.value,modelValue:U.value,"onUpdate:modelValue":E[1]||(E[1]=s=>U.value=s)},null,8,["payment-transactions","registration","modelValue"])):T("",!0)],64)):T("",!0)]}),_:1})]),_:1})}}});const At=ne(Et,[["__scopeId","data-v-7544ea35"]]),wt=L({__name:"Conventions",setup(l){const g=J(),h=w([]),k=w([]);return g.getOpenConventionsList().then(m=>{m&&(h.value=[...h.value,...m],g.getAvailableConventionForms(h.value.map(a=>a.ConventionUUID)).then(a=>{k.value=[...k.value,...a]}).catch(a=>{console.error(a)}))}),(m,a)=>(e(),i(X,null,{default:t(()=>[c(B,{class:"justify-center"},{default:t(()=>[(e(!0),r(p,null,H(h.value,f=>(e(),i(Y,{key:f.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[c(At,{convention:f,forms:k.value.filter(U=>U.ConventionUUID===f.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Ct={};function Pt(l,g){return e(),r("div")}const bt=ne(Ct,[["render",Pt]]),Ot=L({__name:"MainView",emits:["pageTitle"],setup(l,{emit:g}){g("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const k=localStorage.getItem("gjt_token"),m=localStorage.getItem("ajt_token");k?(localStorage.removeItem("gjt_token"),location.href=k):m&&(localStorage.removeItem("ajt_token"),location.href=m);const a=w(Q());return(f,U)=>{const C=W("router-link");return e(),r(p,null,[a.value&&!a.value.Additional.Email?(e(),i(X,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),c(C,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):T("",!0),c(wt),c(bt)],64)}}}),ao=L({__name:"Home",emits:["pageTitle"],setup(l,{emit:g}){const h=Q();return g("pageTitle","Telegram Login"),(k,m)=>(e(),r("div",null,[v(h)?(e(),i(Ot,{key:0,onPageTitle:m[0]||(m[0]=a=>g("pageTitle",a))})):(e(),i(ge,{key:1}))]))}});export{ao as default};
