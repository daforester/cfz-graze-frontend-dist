import{I as V,r as O,e as D,w as z,J as L,K as t,L as n,M as o,v as p,Q as c,N as i,O as y,U as b,R as s,Z as P,H as S,S as f,$,_ as x}from"./index-666ceafa.js";import{G}from"./userData-79211a98.js";import{_ as j}from"./LoginView.vue_vue_type_script_setup_true_lang-3c3d8d09.js";import{s as w}from"./index-26b71cef.js";import{F as g}from"./form-29fd1dbb.js";import{S as B}from"./submission-56c4c4f1.js";import{u as H}from"./useStoreAPI-35b913d3.js";import{c as E}from"./canEditForm-52ba80b9.js";import{s as J}from"./sortSubmissions-8ed80f07.js";import{V as K}from"./VAvatar-07a71531.js";import{V as Q,a as Z,b as q,c as W,d as X,e as ee}from"./VCard-fa5f3bb7.js";import{V as d}from"./VBtn-c7281faf.js";import{V as te}from"./VSpacer-605a85d9.js";import{V as oe,a as ne}from"./VRow-82ef2ef1.js";import{j as ae}from"./VContainer-9da15021.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-25fd62a4.js";const re=["innerHTML"],ie={key:0,class:"font-weight-bold float-left pt-1 w-50"},se={key:1,class:"pa-1"},le={key:0,class:"font-weight-bold float-left pt-1 w-50"},ue={key:1},ce=V({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const v=H(),k=$(),_=O(v.GetConventionLogoURL(l.convention.ConventionUUID)),a=O(),u=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],g.FORM_TYPE_REGISTRATION)}),T=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],g.FORM_TYPE_DEALER)}),A=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],g.FORM_TYPE_ACCOMMODATION)}),Y=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],g.FORM_TYPE_ADDITIONAL)});return z(()=>l.forms,()=>{k.getRegistrationByConvention(l.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((h,I)=>{h.Form||(e.Submissions[I].Form=l.forms.find(U=>U.FormUUID===h.FormUUID))}),J(e.Submissions)):e.Submissions=[],a.value=e)})}),(e,h)=>{const I=L("router-link"),U=L("RouterLink");return t(),n(ee,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[p(q,{class:"flex-1-1 align-content-start"},{default:o(()=>[_.value?(t(),n(K,{key:0,src:_.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):c("",!0),e.convention.Name?(t(),n(Q,{key:1,class:"text-center"},{default:o(()=>[i(y(e.convention.Name),1)]),_:1})):c("",!0),e.convention.Description?(t(),n(Z,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[b("div",{innerHTML:e.convention.Description},null,8,re)]),_:1})):c("",!0)]),_:1}),p(W,null,{default:o(()=>{var F;return[b("dl",null,[a.value&&a.value.Reference?(t(),s("dt",ie," Badge No: ")):c("",!0),a.value&&a.value.Reference?(t(),s("dd",se," #"+y(a.value.Reference),1)):c("",!0),(t(!0),s(S,null,P((F=a.value)==null?void 0:F.Submissions,r=>{var C,R,M,N;return t(),s(S,{key:r.SubmissionUUID},[r.Form?(t(),s(S,{key:0},[r.Form?(t(),s("dt",le,y(r.Form.Heading),1)):c("",!0),r.Form?(t(),s("dd",ue,[i(y(f(B)(r.Status))+" ",1),((C=r.Form)==null?void 0:C.Type)===f(g).FORM_TYPE_REGISTRATION?(t(),n(I,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/registration`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&u.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((R=r.Form)==null?void 0:R.Type)===f(g).FORM_TYPE_ACCOMMODATION?(t(),n(I,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&A.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((M=r.Form)==null?void 0:M.Type)===f(g).FORM_TYPE_DEALER?(t(),n(I,{key:2,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&T.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((N=r.Form)==null?void 0:N.Type)===f(g).FORM_TYPE_ADDITIONAL?(t(),n(I,{key:3,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&Y.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):c("",!0)])):c("",!0)],64)):c("",!0)],64)}),128))])]}),_:1}),p(X,null,{default:o(()=>{var F,r;return[e.convention.DetailLink?(t(),n(d,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[i(y(f(w).buttonDetails),1)]),_:1},8,["href"])):c("",!0),p(te),u.value?(t(),s(S,{key:1},[(F=a.value)!=null&&F.Submissions.find(C=>{var R;return((R=C.Form)==null?void 0:R.Type)===f(g).FORM_TYPE_REGISTRATION})?(t(),n(U,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(y(f(w).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(t(),s(S,{key:0},[(r=e.forms.find(C=>C.Type===f(g).FORM_TYPE_REGISTRATION))!=null&&r.State.New?(t(),n(U,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(y(f(w).buttonRegister),1)]),_:1})]),_:1},8,["to"])):c("",!0)],64))],64)):c("",!0)]}),_:1})]),_:1})}}});const me=x(ce,[["__scopeId","data-v-dce42484"]]),de=V({__name:"Conventions",setup(l){const v=$(),k=O([]),_=O([]);return v.getOpenConventionsList().then(a=>{a&&(k.value=[...k.value,...a],v.getAvailableConventionForms(k.value.map(u=>u.ConventionUUID)).then(u=>{_.value=[..._.value,...u]}).catch(u=>{console.error(u)}))}),(a,u)=>(t(),n(ae,null,{default:o(()=>[p(ne,{class:"justify-center"},{default:o(()=>[(t(!0),s(S,null,P(k.value,T=>(t(),n(oe,{key:T.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[p(me,{convention:T,forms:_.value.filter(A=>A.ConventionUUID===T.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),fe={};function ve(l,v){return t(),s("div")}const _e=x(fe,[["render",ve]]),ge=V({__name:"MainView",emits:["pageTitle"],setup(l,{emit:v}){v("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const _=localStorage.getItem("gjt_token"),a=localStorage.getItem("ajt_token");return _?(localStorage.removeItem("gjt_token"),location.href=_):a&&(localStorage.removeItem("ajt_token"),location.href=a),(u,T)=>(t(),s(S,null,[p(de),p(_e)],64))}}),Me=V({__name:"Home",emits:["pageTitle"],setup(l,{emit:v}){const k=G();return v("pageTitle","Telegram Login"),(_,a)=>(t(),s("div",null,[f(k)?(t(),n(ge,{key:0,onPageTitle:a[0]||(a[0]=u=>v("pageTitle",u))})):(t(),n(j,{key:1}))]))}});export{Me as default};
