import{p as Fe,an as tl,n as Ne,ae as cl,r as R,s as Ce,u as ke,e as Z,w as G,E as Te,v as n,H as E,x as ue,N as Q,aA as vl,ah as ml,y as fl,k as pl,f as gl,j as hl,ax as al,aa as je,ad as Ul,aB as Vl,ay as Il,m as yl,I as Ue,a1 as te,a2 as Ve,a5 as Ke,K as d,R as $,U as J,O as K,M as p,Z as z,L as A,S as m,Q as L,a3 as ye,P as nl,ar as Ge,$ as ul,Y as bl,ac as Ze,a as Dl,aC as ie}from"./index-0db5f156.js";import{F as ge}from"./form-aee596e2.js";import{V as he,u as Xe}from"./VCheckbox-622928ad.js";import{s as Se}from"./index-71069b21.js";import{f as Cl,V as re,a as W,c as ol,d as Oe,e as Pe}from"./VList-b5befae6.js";import{a as se,V as Y}from"./VRow-8b50f033.js";import{m as kl,u as Tl,a as Sl,b as Al,V as Ye}from"./VSelect-0f48e712.js";import{d as El,u as Rl,e as _e,T as xl,s as Qe}from"./filter-3e73a06a.js";import{C as $l,a as Me,l as Ae,G as Ol,V as ve,n as Pl}from"./VContainer-a7152031.js";import{c as wl}from"./copyToClipboard-54de8978.js";import{a as Fl,e as Nl,_ as Ml}from"./VChip-6c0322fe.js";import{k as Ll,l as ql,j as il,V as be,m as sl,e as Bl,u as Gl,f as we,g as _l,h as Hl,i as Yl,n as Kl}from"./VTextField-c35586cd.js";import{m as Xl,I as zl}from"./index-383fd894.js";import{V as Jl,m as jl,a as rl,b as Zl,c as Ql}from"./VCheckboxBtn-1d407639.js";import{G as Wl}from"./userData-22d82d9f.js";import{v as He}from"./v4-a960c1f4.js";import{V as et}from"./VForm-fef6af7b.js";const We=(e,D,s)=>{if(s>=e.length){let O=s-e.length+1;for(;O--;)e.push(void 0)}e.splice(s,0,e.splice(D,1)[0])};var le=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(le||{});const zt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function lt(e,D,s){if(D==null)return e;if(Array.isArray(D))throw new Error("Multiple matches is not implemented");return typeof D=="number"&&~D?n(E,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,D)]),n("span",{class:"v-autocomplete__mask"},[e.substr(D,s)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(D+s)])]):e}const tt=Fe({autoSelectFirst:{type:[Boolean,String]},search:String,...El({filterKeys:["title"]}),...kl(),...tl(Ll({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Xl({transition:!1})},"VAutocomplete"),el=Ne()({name:"VAutocomplete",props:tt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,D){let{slots:s}=D;const{t:O}=cl(),V=R(),f=Ce(!1),y=Ce(!0),U=R(!1),u=R(),h=ke(e,"menu"),l=Z({get:()=>h.value,set:g=>{var B;h.value&&!g&&((B=u.value)!=null&&B.ΨopenChildren)||(h.value=g)}}),t=Ce(-1),I=Z(()=>{var g;return(g=V.value)==null?void 0:g.color}),{items:r,transformIn:v,transformOut:c}=Cl(e),{textColorClasses:i,textColorStyles:o}=$l(I),a=ke(e,"search",""),S=ke(e,"modelValue",[],g=>v(g===null?[null]:ml(g)),g=>{const B=c(g);return e.multiple?B:B[0]??null}),x=ql(),{filteredItems:w,getMatches:F}=Rl(e,r,()=>y.value?"":a.value),T=Z(()=>S.value.map(g=>r.value.find(B=>e.valueComparator(B.value,g.value))||g)),q=Z(()=>e.hideSelected?w.value.filter(g=>!T.value.some(B=>B.value===g.value)):w.value),_=Z(()=>T.value.map(g=>g.props.value)),ee=Z(()=>T.value[t.value]),P=Z(()=>{var B;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((B=q.value[0])==null?void 0:B.title))&&q.value.length>0&&!y.value&&!U.value}),k=Z(()=>e.hideNoData&&!r.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),C=R(),{onListScroll:b,onListKeydown:N}=Tl(C,V);function de(g){e.openOnClear&&(l.value=!0),a.value=""}function De(){k.value||(l.value=!0)}function oe(g){k.value||(f.value&&(g.preventDefault(),g.stopPropagation()),l.value=!l.value)}function me(g){var Ie,M,j;if(e.readonly||x!=null&&x.isReadonly.value)return;const B=V.value.selectionStart,X=_.value.length;if((t.value>-1||["Enter","ArrowDown","ArrowUp"].includes(g.key))&&g.preventDefault(),["Enter","ArrowDown"].includes(g.key)&&(l.value=!0),["Escape"].includes(g.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(g.key)&&(P.value&&["Enter","Tab"].includes(g.key)&&ce(w.value[0]),y.value=!0),g.key==="ArrowDown"&&P.value&&((Ie=C.value)==null||Ie.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(g.key)){if(t.value<0){g.key==="Backspace"&&!a.value&&(t.value=X-1);return}const H=t.value;ee.value&&ce(ee.value),t.value=H>=X-1?X-2:H}if(g.key==="ArrowLeft"){if(t.value<0&&B>0)return;const H=t.value>-1?t.value-1:X-1;T.value[H]?t.value=H:(t.value=-1,V.value.setSelectionRange((M=a.value)==null?void 0:M.length,(j=a.value)==null?void 0:j.length))}if(g.key==="ArrowRight"){if(t.value<0)return;const H=t.value+1;T.value[H]?t.value=H:(t.value=-1,V.value.setSelectionRange(0,0))}}}function Ee(g){a.value=g.target.value}function Le(){var g;f.value&&(y.value=!0,(g=V.value)==null||g.focus())}function qe(g){f.value=!0,setTimeout(()=>{U.value=!0})}function Be(g){U.value=!1}function Re(g){(g==null||g===""&&!e.multiple)&&(S.value=[])}const fe=Ce(!1);function ce(g){if(e.multiple){const B=_.value.findIndex(X=>e.valueComparator(X,g.value));if(B===-1)S.value=[...S.value,g];else{const X=[...S.value];X.splice(B,1),S.value=X}}else S.value=[g],fe.value=!0,a.value=g.title,l.value=!1,y.value=!0,Te(()=>fe.value=!1)}return G(f,(g,B)=>{var X;g!==B&&(g?(fe.value=!0,a.value=e.multiple?"":String(((X=T.value.at(-1))==null?void 0:X.props.title)??""),y.value=!0,Te(()=>fe.value=!1)):(!e.multiple&&!a.value?S.value=[]:P.value&&!U.value&&!T.value.some(Ie=>{let{value:M}=Ie;return M===q.value[0].value})&&ce(q.value[0]),l.value=!1,a.value="",t.value=-1))}),G(a,g=>{!f.value||fe.value||(g&&(l.value=!0),y.value=!g)}),Me(()=>{const g=!!(e.chips||s.chip),B=!!(!e.hideNoData||q.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),X=S.value.length>0,[Ie]=be.filterProps(e);return n(be,ue({ref:V},Ie,{modelValue:a.value,"onUpdate:modelValue":Re,focused:f.value,"onUpdate:focused":M=>f.value=M,validationValue:S.externalValue,dirty:X,onInput:Ee,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!s.selection,"v-autocomplete--selecting-index":t.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:X?void 0:e.placeholder,"onClick:clear":de,"onMousedown:control":De,onKeydown:me}),{...s,default:()=>n(E,null,[n(Sl,ue({ref:u,modelValue:l.value,"onUpdate:modelValue":M=>l.value=M,activator:"parent",contentClass:"v-autocomplete__content",disabled:k.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Le},e.menuProps),{default:()=>[B&&n(re,{ref:C,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:M=>M.preventDefault(),onKeydown:N,onFocusin:qe,onFocusout:Be,onScrollPassive:b,tabindex:"-1"},{default:()=>{var M,j,H;return[(M=s["prepend-item"])==null?void 0:M.call(s),!q.value.length&&!e.hideNoData&&(((j=s["no-data"])==null?void 0:j.call(s))??n(W,{title:O(e.noDataText)},null)),n(Al,{renderless:!0,items:q.value},{default:pe=>{var Je;let{item:ae,index:ne,itemRef:dl}=pe;const ze=ue(ae.props,{ref:dl,key:ne,active:P.value&&ne===0?!0:void 0,onClick:()=>ce(ae)});return((Je=s.item)==null?void 0:Je.call(s,{item:ae,index:ne,props:ze}))??n(W,ze,{prepend:xe=>{let{isSelected:$e}=xe;return n(E,null,[e.multiple&&!e.hideSelected?n(Jl,{key:ae.value,modelValue:$e,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependIcon&&n(Ae,{icon:ae.props.prependIcon},null)])},title:()=>{var xe,$e;return y.value?ae.title:lt(ae.title,(xe=F(ae))==null?void 0:xe.title,(($e=a.value)==null?void 0:$e.length)??0)}})}}),(H=s["append-item"])==null?void 0:H.call(s)]}})]}),T.value.map((M,j)=>{var ae;function H(ne){ne.stopPropagation(),ne.preventDefault(),ce(M)}const pe={"onClick:close":H,onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:M.value,class:["v-autocomplete__selection",j===t.value&&["v-autocomplete__selection--selected",i.value]],style:j===t.value?o.value:{}},[g?s.chip?n(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:M.title}}},{default:()=>{var ne;return[(ne=s.chip)==null?void 0:ne.call(s,{item:M,index:j,props:pe})]}}):n(Fl,ue({key:"chip",closable:e.closableChips,size:"small",text:M.title},pe),null):((ae=s.selection)==null?void 0:ae.call(s,{item:M,index:j}))??n("span",{class:"v-autocomplete__selection-text"},[M.title,e.multiple&&j<T.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[Q(",")])])])})]),"append-inner":function(){var pe;for(var M=arguments.length,j=new Array(M),H=0;H<M;H++)j[H]=arguments[H];return n(E,null,[(pe=s["append-inner"])==null?void 0:pe.call(s,...j),e.menuIcon?n(Ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:oe,onClick:vl},null):void 0])}})}),il({isFocused:f,isPristine:y,menu:l,search:a,filteredItems:w,select:ce},V)}});const at=Fe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...sl(),...Bl()},"VTextarea"),nt=Ne()({name:"VTextarea",directives:{Intersect:zl},inheritAttrs:!1,props:at(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,D){let{attrs:s,emit:O,slots:V}=D;const f=ke(e,"modelValue"),{isFocused:y,focus:U,blur:u}=Gl(e),h=Z(()=>typeof e.counterValue=="function"?e.counterValue(f.value):(f.value||"").toString().length),l=Z(()=>{if(s.maxlength)return s.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function t(P,k){var C,b;!e.autofocus||!P||(b=(C=k[0].target)==null?void 0:C.focus)==null||b.call(C)}const I=R(),r=R(),v=Ce(""),c=R(),i=Z(()=>e.persistentPlaceholder||y.value||e.active);function o(){var P;c.value!==document.activeElement&&((P=c.value)==null||P.focus()),y.value||U()}function a(P){o(),O("click:control",P)}function S(P){O("mousedown:control",P)}function x(P){P.stopPropagation(),o(),Te(()=>{f.value="",Il(e["onClick:clear"],P)})}function w(P){var C;const k=P.target;if(f.value=k.value,(C=e.modelModifiers)!=null&&C.trim){const b=[k.selectionStart,k.selectionEnd];Te(()=>{k.selectionStart=b[0],k.selectionEnd=b[1]})}}const F=R(),T=R(+e.rows),q=Z(()=>["plain","underlined"].includes(e.variant));fl(()=>{e.autoGrow||(T.value=+e.rows)});function _(){e.autoGrow&&Te(()=>{if(!F.value||!r.value)return;const P=getComputedStyle(F.value),k=getComputedStyle(r.value.$el),C=parseFloat(P.getPropertyValue("--v-field-padding-top"))+parseFloat(P.getPropertyValue("--v-input-padding-top"))+parseFloat(P.getPropertyValue("--v-field-padding-bottom")),b=F.value.scrollHeight,N=parseFloat(P.lineHeight),de=Math.max(parseFloat(e.rows)*N+C,parseFloat(k.getPropertyValue("--v-input-control-height"))),De=parseFloat(e.maxRows)*N+C||1/0,oe=yl(b??0,de,De);T.value=Math.floor((oe-C)/N),v.value=hl(oe)})}pl(_),G(f,_),G(()=>e.rows,_),G(()=>e.maxRows,_),G(()=>e.density,_);let ee;return G(F,P=>{P?(ee=new ResizeObserver(_),ee.observe(F.value)):ee==null||ee.disconnect()}),gl(()=>{ee==null||ee.disconnect()}),Me(()=>{const P=!!(V.counter||e.counter||e.counterValue),k=!!(P||V.details),[C,b]=al(s),[{modelValue:N,...de}]=we.filterProps(e),[De]=_l(e);return n(we,ue({ref:I,modelValue:f.value,"onUpdate:modelValue":oe=>f.value=oe,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":q.value},e.class],style:e.style},C,de,{centerAffix:T.value===1&&!q.value,focused:y.value}),{...V,default:oe=>{let{isDisabled:me,isDirty:Ee,isReadonly:Le,isValid:qe}=oe;return n(Hl,ue({ref:r,style:{"--v-textarea-control-height":v.value},onClick:a,onMousedown:S,"onClick:clear":x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},De,{active:i.value||Ee.value,centerAffix:T.value===1&&!q.value,dirty:Ee.value||e.dirty,disabled:me.value,focused:y.value,error:qe.value===!1}),{...V,default:Be=>{let{props:{class:Re,...fe}}=Be;return n(E,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),je(n("textarea",ue({ref:c,class:Re,value:f.value,onInput:w,autofocus:e.autofocus,readonly:Le.value,disabled:me.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:o,onBlur:u},fe,b),null),[[Ul("intersect"),{handler:t},null,{once:!0}]]),e.autoGrow&&je(n("textarea",{class:[Re,"v-textarea__sizer"],"onUpdate:modelValue":ce=>f.value=ce,ref:F,readonly:!0,"aria-hidden":"true"},null),[[Vl,f.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:k?oe=>{var me;return n(E,null,[(me=V.details)==null?void 0:me.call(V,oe),P&&n(E,null,[n("span",null,null),n(Yl,{active:e.persistentCounter||y.value,value:h.value,max:l.value},V.counter)])])}:void 0})}),il({},I,r,c)}}),ut=Ue({__name:"Extras",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:O,disabled:V=!1}=s,f=Ve(e,"modelValue"),y=Ke.getInstance(),U=R({});try{U.value=JSON.parse(f.value)}catch{}const u=R([]),h=R([]);G(s,()=>{t()}),G(U.value,r=>{for(const v in r)if(r[v].checked){const c=u.value.map(i=>{var o;return(o=i.Options)==null?void 0:o.find(a=>a.OptionUUID===v)});if(c&&c.length>0)try{const i=c[0];r[v].choiceId===""&&i&&i.Choices&&i.Choices.length>0&&(r[v].choiceId=i.Choices[0].TagUUID),r[v].price=i==null?void 0:i.Price}catch{}}else r[v].choiceId="",r[v].price=0;f.value=JSON.stringify(r),I()});const l=Z({get:()=>u.value.map(r=>r.ExtraUUID),set:()=>{}}),t=()=>{var v;const r=((v=s.items.find(c=>c.Title==="SelectedExtras"))==null?void 0:v.Value)||"[]";try{const c=JSON.parse(r);u.value=h.value.filter(i=>c.find(o=>o===i.ExtraUUID))||[],l.value=[...u.value.map(i=>i.ExtraUUID)],u.value.forEach(i=>{var o;(o=i.Options)==null||o.forEach(a=>{U.value[a.OptionUUID]||(U.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in O&&(y==null||y.getConventionExtras(O.ConventionUUID).then(r=>{r&&(h.value=r,t())}));const I=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,v)=>(d(),$(E,null,[J("h4",null,K(r.label),1),n(re,{opened:l.value,"onUpdate:opened":v[0]||(v[0]=c=>l.value=c)},{default:p(()=>[(d(!0),$(E,null,z(u.value,c=>(d(),A(ol,{key:c.ExtraUUID,value:c.ExtraUUID},{activator:p(({props:i})=>[n(W,ue({"prepend-icon":"mdi:mdi-group","append-icon":"",title:c.Name},i),null,16,["title"])]),default:p(()=>[c.Options?(d(!0),$(E,{key:0},z(c.Options,i=>(d(),A(W,{key:i.OptionUUID},{default:p(()=>[n(se,null,{default:p(()=>[n(Y,{cols:"12",sm:"6"},{default:p(()=>[n(he,{label:`${i.Name} ${i.Price&&i.Price>0?`(${m(Se).currencySymbol}${i.Price})`:""}`,modelValue:U.value[i.OptionUUID].checked,"onUpdate:modelValue":o=>U.value[i.OptionUUID].checked=o,disabled:m(V),"hide-details":"",onChange:I},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),i.Choices&&i.Choices.length>1&&U.value[i.OptionUUID].checked?(d(),A(Y,{key:0,cols:"12",sm:"6"},{default:p(()=>[n(Ye,{items:i.Choices.map(o=>({value:o.TagUUID,title:o.Title})),modelValue:U.value[i.OptionUUID].choiceId,"onUpdate:modelValue":o=>U.value[i.OptionUUID].choiceId=o,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(V),"hide-details":"",onChange:I},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ot=Ue({__name:"Interests",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:O,disabled:V=!1}=s,f=Ve(e,"modelValue"),y=Ke.getInstance(),U=R({});try{U.value=JSON.parse(f.value)}catch{}const u=R([]),h=R([]);G(U.value,r=>{f.value=JSON.stringify(r)});const l=R([]),t=()=>{var v;const r=((v=s.items.find(c=>c.Title==="SelectedInterests"))==null?void 0:v.Value)||"[]";try{const c=JSON.parse(r);u.value=h.value.filter(i=>c.find(o=>o===i.InterestUUID))||[],l.value=[...u.value.map(i=>i.InterestUUID)]}catch{}};"ConventionUUID"in O&&(y==null||y.getConventionInterests(O.ConventionUUID).then(r=>{r&&(h.value=r,t())})),G(s,()=>{t()});const I=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,v)=>(d(),$(E,null,[J("h4",null,K(r.label),1),n(re,{opened:l.value,"onUpdate:opened":v[0]||(v[0]=c=>l.value=c)},{default:p(()=>[(d(!0),$(E,null,z(u.value,c=>(d(),A(W,{key:c.InterestUUID},{default:p(()=>[n(se,null,{default:p(()=>[n(Y,null,{default:p(()=>[n(he,{label:`${c.Name} ${c.Price&&c.Price>0?`(${m(Se).currencySymbol}${c.Price})`:""}`,modelValue:U.value[c.InterestUUID],"onUpdate:modelValue":i=>U.value[c.InterestUUID]=i,disabled:m(V),"hide-details":"",onChange:I},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),it={key:0,class:"text-orange-darken-1"},st=Ue({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,convention:V,disabled:f=!1}=s,y=Ve(e,"modelValue"),U=Ke.getInstance(),u=R({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{u.value=JSON.parse(y.value),"ticket"in u.value&&(u.value.Ticket=u.value.ticket),"addonsChecked"in u.value&&(u.value.AddonsChecked=u.value.addonsChecked),"componentsChecked"in u.value&&(u.value.ComponentsChecked=u.value.componentsChecked)}catch{}const h=R([]),l=R([]);G(u.value,o=>{y.value=JSON.stringify(o)});const t=R([]),I=R({required:(o,a=void 0)=>()=>{if(a==null){if(u.value.Ticket.length===0&&s.required)return"Must select at least one ticket option.";if(o&&o.ComponentsRequired>0&&u.value.Ticket.includes(o.TicketUUID||"")){let S=0;if(o.TicketComponents.forEach(x=>{u.value.ComponentsChecked.forEach(w=>{x.TicketUUID===w&&(S+=1)})}),S<o.ComponentsRequired)return`Must select ticket ${o.ComponentsRequired} component${o.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var a;const o=((a=s.items.find(S=>S.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const S=JSON.parse(o);h.value=l.value.filter(x=>x.Type==="TICKET_TYPE_GROUP"&&S.find(w=>w===x.TicketUUID))||[],t.value=[...h.value.filter(x=>x.Type==="TICKET_TYPE_GROUP").map(x=>x.TicketUUID)]}catch{}};if("ConventionUUID"in V)if(O)U==null||U.getConventionTickets(V.ConventionUUID).then(o=>{o&&(l.value=o,r())});else{const o=s.items.find(a=>a.Title==="SelectedTickets");o&&(U==null||U.getFieldTickets(o.FieldUUID).then(a=>{a&&(l.value=a,r())}))}G(s,()=>{r()});const v=o=>{u.value.Ticket.length>1&&u.value.Ticket.shift(),u.value.ComponentsChecked=[];const a=[];h.value.forEach(S=>{(u.value.Ticket.includes(S.TicketUUID)||u.value.ComponentsChecked.includes(S.TicketUUID))&&a.push(...S.AddonTickets.map(x=>x.TicketUUID))}),u.value.AddonsChecked=u.value.AddonsChecked.filter(S=>a.includes(S)),i(o)},c=o=>{const a=l.value.find(S=>S.TicketUUID===u.value.Ticket[0]);if(a)for(;u.value.ComponentsChecked.length>a.ComponentsRequired;)u.value.ComponentsChecked.shift();i(o)},i=(o=void 0)=>{setTimeout(()=>D("change",o),100)};return(o,a)=>{var S;return d(),$(E,null,[J("h4",null,[Q(K(o.label)+" ",1),(S=o.registrationGroup)!=null&&S.Registration.Leader?L("",!0):(d(),$("small",it,"(controlled by group leader)"))]),n(re,{opened:t.value,"onUpdate:opened":a[4]||(a[4]=x=>t.value=x)},{default:p(()=>[(d(!0),$(E,null,z(m(_e)(h.value.filter(x=>x.Type===m(xl).TICKET_TYPE_GROUP)),x=>(d(),$(E,{key:x.TicketUUID},[x.Tickets.length>0?(d(),A(ol,{key:0,value:x.TicketUUID},{activator:p(({props:w})=>[n(W,ue(w,{"prepend-icon":"mdi:mdi-group",title:x.Name}),{default:p(()=>[n(Oe,{title:x.Description},null,8,["title"])]),_:2},1040,["title"])]),default:p(()=>[(d(!0),$(E,null,z(x.Tickets,w=>(d(),A(W,{key:w.TicketUUID},{default:p(()=>{var F;return[n(Oe,null,{default:p(()=>[Q(K(w.Description),1)]),_:2},1024),n(he,{modelValue:u.value.Ticket,"onUpdate:modelValue":a[0]||(a[0]=T=>u.value.Ticket=T),value:w.TicketUUID,onChange:v,rules:[I.value.required(w)],"validate-on":"submit",disabled:m(f)||!((F=o.registrationGroup)!=null&&F.Registration.Leader)},{label:p(()=>[n(Ae,{icon:w.RequiresAccommodation?"mdi:mdi-home":w.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+K(`${w.Name} ${w.Price>0?`(${m(Se).currencySymbol}${w.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),u.value.Ticket.length>0&&w.TicketUUID===u.value.Ticket[0]?(d(),$(E,{key:0},[w.AddonTickets.length?(d(),A(re,{key:0},{default:p(()=>[(d(!0),$(E,null,z(m(_e)(w.AddonTickets),T=>(d(),$(E,{key:T==null?void 0:T.TicketUUID},[T?(d(),A(W,{key:0},{default:p(()=>[n(Pe,null,{default:p(()=>{var q;return[n(he,{modelValue:u.value.AddonsChecked,"onUpdate:modelValue":a[1]||(a[1]=_=>u.value.AddonsChecked=_),value:T.TicketUUID,onChange:a[2]||(a[2]=_=>{u.value.ComponentsChecked=[],i(_)}),disabled:m(f)||!((q=o.registrationGroup)!=null&&q.Registration.Leader)},{label:p(()=>[n(Ae,{icon:T.RequiresAccommodation?"mdi:mdi-home-plus":T.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+K(`${T.Name} ${T.Price>0?`(${m(Se).currencySymbol}${T.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),n(Oe,null,{default:p(()=>[Q(K(T.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),w.TicketComponents.length?(d(),A(re,{key:1},{default:p(()=>[(d(!0),$(E,null,z(m(_e)(w.TicketComponents),T=>(d(),$(E,{key:T==null?void 0:T.TicketUUID},[T?(d(),A(W,{key:0},{default:p(()=>[n(Pe,null,{default:p(()=>{var q;return[n(he,{modelValue:u.value.ComponentsChecked,"onUpdate:modelValue":a[3]||(a[3]=_=>u.value.ComponentsChecked=_),value:T.TicketUUID,onChange:c,rules:[I.value.required(w,T)],"validate-on":"submit",disabled:m(f)||!((q=o.registrationGroup)!=null&&q.Registration.Leader)},{label:p(()=>[n(Ae,{icon:T.RequiresAccommodation?"mdi:mdi-home-plus":T.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+K(`${T.Name} ${T.Price>0?`(${m(Se).currencySymbol}${T.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),n(Oe,null,{default:p(()=>[Q(K(T.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])],64)}}}),rt={key:0},dt=J("strong",null,"Your Sharing Group",-1),ct=["href","onClick"],vt=J("br",null,null,-1),mt=J("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ft=J("strong",null,"Your Groups Accommodation",-1),pt=J("br",null,null,-1),gt=J("small",null,"(in order of preference, controlled by group leader)",-1),ht=J("strong",null,"Accommodation Options",-1),Ut=J("br",null,null,-1),Vt=J("strong",null,"Your Chosen Accommodation",-1),It=J("small",null,"(in order of preference)",-1),yt=Ue({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,convention:V}=s,f=Ve(e,"modelValue"),y=Xe(s,D,void 0,void 0,"items"),U=ul(),u=bl.getInstance(),h=R(ye(f.value)),l=R([]),t=R(),I=R({sharing:!1}),r=()=>{try{const k=JSON.parse(s.data);k&&(I.value=k)}catch{}};r(),G(s,()=>{r(),s.registrationGroup&&(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration)}),G(h,k=>{f.value=ye(k)},{deep:!0});const v=R(""),c=R(!1),i=()=>{var k;(k=t.value)!=null&&k.Leader&&U.getRegistrationInvite(V.ConventionUUID).then(C=>{if(C){const b=new URL(location.href);b.searchParams.set("token",C),v.value=b.toString()}})},o=()=>{wl(v.value),i(),c.value=!0,setTimeout(()=>c.value=!1,2200)},a=()=>{u.emit("registration.group.leave")},S=R([]);G(y,()=>{x()});const x=()=>{O?U.getConventionAccommodation(V.ConventionUUID).then(k=>{S.value=k.filter(C=>!!(y!=null&&y.value.find(b=>b.Value===C.AccommodationUUID)))||[]}):y.value.length>0&&U.getFieldAccommodation(y.value[0].FieldUUID).then(k=>{S.value=k.filter(C=>!!(y!=null&&y.value.find(b=>b.Value===C.AccommodationUUID)))||[]})};x(),(()=>{var k;if(s.registrationGroup)if(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration,(k=t.value)!=null&&k.Leader)i();else try{h.value=JSON.parse(s.registrationGroup.AccommodationData)}catch{}})();const F=R({column:0,id:""}),T=()=>{h.value.includes(F.value.id)||(F.value.column===0&&F.value.id!==""&&h.value.push(F.value.id),P())},q=()=>{const k=h.value.findIndex(C=>C===F.value.id);k>=0&&(h.value.splice(k,1),P())},_=()=>{if(F.value.column!==1)return;const k=h.value.findIndex(C=>C===F.value.id);k<=0||(We(h.value,k,k-1),P())},ee=()=>{if(F.value.column!==1)return;const k=h.value.findIndex(C=>C===F.value.id);k>=h.value.length-1||(We(h.value,k,k+1),P())},P=(k=void 0)=>{setTimeout(()=>D("change",k),100)};return(k,C)=>(d(),$(E,null,[J("h4",null,K(k.label),1),n(se,null,{default:p(()=>[n(Y,{cols:"12"},{default:p(()=>{var b;return[l.value&&t.value&&I.value.sharing?(d(),$("div",rt,[dt,((b=l.value.find(N=>N.IsLeader))==null?void 0:b.UUID)!==t.value.RegistrationUUID?(d(),A(ve,{key:0,color:"red",variant:"text",onClick:a},{default:p(()=>[Q("(leave group)")]),_:1})):L("",!0),n(re,null,{default:p(()=>[n(W,null,{default:p(()=>{var N;return[n(Pe,{class:"float-left pr-2 font-weight-bold"},{default:p(()=>[Q(" Leader: ")]),_:1}),Q(" "+K((N=l.value.find(de=>de.IsLeader))==null?void 0:N.Name),1)]}),_:1}),(d(!0),$(E,null,z(l.value,N=>(d(),$(E,{key:N.UUID},[N.IsLeader?L("",!0):(d(),A(W,{key:0},{default:p(()=>[n(Pe,{class:"float-left pr-2"},{default:p(()=>[Q(" Member: ")]),_:1}),Q(" "+K(N.Name),1)]),_:2},1024))],64))),128))]),_:1}),n(Nl,{modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=N=>c.value=N),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),v.value&&t.value.Leader?(d(),$(E,{key:1},[n(ve,{color:"blue"},{default:p(()=>[J("a",{href:v.value,onClick:nl(o,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,ct)]),_:1}),vt,mt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),t.value&&!t.value.Leader?(d(),A(se,{key:0},{default:p(()=>[n(Y,{cols:"10",md:"5"},{default:p(()=>[ft,pt,gt,n(re,null,{default:p(()=>[(d(!0),$(E,null,z(h.value.map(b=>S.value.find(N=>N.AccommodationUUID==b)).filter(b=>b!==void 0),(b,N)=>(d(),$(E,null,[b?(d(),A(W,{key:b.AccommodationUUID,title:`${N+1}. ${b.Name}`,class:Ge(F.value.column===1&&F.value.id===b.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(d(),A(se,{key:1},{default:p(()=>[n(Y,{cols:"12",md:"5"},{default:p(()=>[ht,Ut,n(re,null,{default:p(()=>[(d(!0),$(E,null,z(S.value,b=>(d(),A(W,{key:b.AccommodationUUID,title:b.Name,class:Ge(F.value.column===0&&F.value.id===b.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:N=>F.value={column:0,id:b.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:C[1]||(C[1]=N=>T())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),n(Y,{cols:"12",md:"1"},{default:p(()=>[n(se,{class:"d-md-none"},{default:p(()=>[n(Y,{cols:"12",class:"text-center"},{default:p(()=>[n(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:C[2]||(C[2]=b=>T()),color:"primary",title:"Select"}),Q("   "),n(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:C[3]||(C[3]=b=>q()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),n(se,{class:"d-none d-md-flex h-100 align-content-center"},{default:p(()=>[n(Y,{cols:"12"},{default:p(()=>[n(ve,{icon:"mdi:mdi-arrow-right",size:"small",onClick:C[4]||(C[4]=b=>T()),color:"primary",title:"Select"})]),_:1}),n(Y,{cols:"12"},{default:p(()=>[n(ve,{icon:"mdi:mdi-arrow-left",size:"small",onClick:C[5]||(C[5]=b=>q()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),n(Y,{cols:"10",md:"5"},{default:p(()=>[Vt,n(re,null,{default:p(()=>[(d(!0),$(E,null,z(h.value.map(b=>S.value.find(N=>N.AccommodationUUID==b)).filter(b=>b!==void 0),(b,N)=>(d(),$(E,null,[b?(d(),A(W,{key:b.AccommodationUUID,title:`${N+1}. ${b.Name}`,class:Ge(F.value.column===1&&F.value.id===b.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:de=>F.value={column:1,id:(b==null?void 0:b.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:C[6]||(C[6]=de=>q())},null,8,["title","class","onClick"])):L("",!0)],64))),256))]),_:1}),It]),_:1}),n(Y,{cols:"2",md:"1"},{default:p(()=>[n(se,{class:"d-flex h-100 align-content-center mt-3"},{default:p(()=>[n(Y,{cols:"12"},{default:p(()=>[n(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:C[7]||(C[7]=b=>_()),color:"primary",title:"Higher Priority"})]),_:1}),n(Y,{cols:"12"},{default:p(()=>[n(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:C[8]||(C[8]=b=>ee()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),bt=Ue({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,O=Xe(s,D,void 0,void 0,"items"),V=Ve(e,"modelValue"),f=R({required:l=>!s.required||!!l||"Required.",min:l=>{var a,S;const t=new Date,I=t.getFullYear(),r=(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),v=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),c=((a=O.value.find(x=>x.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",i=((S=O.value.find(x=>x.Title=="BEFORE_DATE"))==null?void 0:S.Value)||`${I}-${r}-${v}`,o=u(i);return U(l,i,parseInt(c))||`You must be at least ${c} years old by ${o.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),y=()=>(D("blur"),!(f.value.min(V.value||"")!==!0||f.value.required(V.value||"")!==!0)),U=(l,t,I)=>{if(l>=t)return!1;const r=u(l),c=u(t).getTime()-r.getTime(),i=1e3*60*60*24*365.25;return c/i>=I},u=l=>{const[t,I,r]=l.split("-");return new Date(parseInt(t),parseInt(I)-1,parseInt(r))},h=(l=void 0)=>{setTimeout(()=>D("change",l),100)};return(l,t)=>(d(),A(be,{modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=I=>V.value=I),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[f.value.required,f.value.min],onBlur:y,onChange:h},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Dt=Fe({...jl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ct=Ne()({name:"VRadio",props:Dt(),setup(e,D){let{slots:s}=D;return Me(()=>n(rl,ue(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),s)),{}}});const kt=Fe({height:{type:[Number,String],default:"auto"},...sl(),...tl(Zl(),["multiple"]),trueIcon:{type:Ze,default:"$radioOn"},falseIcon:{type:Ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Tt=Ne()({name:"VRadioGroup",inheritAttrs:!1,props:kt(),emits:{"update:modelValue":e=>!0},setup(e,D){let{attrs:s,slots:O}=D;const V=Dl(),f=Z(()=>e.id||`radio-group-${V}`),y=ke(e,"modelValue");return Me(()=>{const[U,u]=al(s),[h,l]=we.filterProps(e),[t,I]=rl.filterProps(e),r=O.label?O.label({label:e.label,props:{for:f.value}}):e.label;return n(we,ue({class:["v-radio-group",e.class],style:e.style},U,h,{modelValue:y.value,"onUpdate:modelValue":v=>y.value=v,id:f.value}),{...O,default:v=>{let{id:c,messagesId:i,isDisabled:o,isReadonly:a}=v;return n(E,null,[r&&n(Kl,{id:c.value},{default:()=>[r]}),n(Ql,ue(t,{id:c.value,"aria-describedby":i.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:o.value,readonly:a.value,"aria-labelledby":r?c.value:void 0,multiple:!1},u,{modelValue:y.value,"onUpdate:modelValue":S=>y.value=S}),O)])}})}),{}}}),ll=Ue({__name:"FormField",props:te({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,disabled:V=!1,persistentHint:f=!1,required:y=!1}=s,U=R(""),u=Ve(e,"modelValue"),h=Xe(s,D,void 0,void 0,"field"),l=R(ye(h.value)),t=R({maxlength:i=>!s.maxLength||i.length<=s.maxLength||`Maximum length is ${s.maxLength} characters. (Current length: ${i.length})`,minlength:i=>!s.minLength||i.length>=s.minLength||`Minimum length is ${s.minLength} characters. (Current length: ${i.length})`,required:i=>!s.required||!!i||"Required field."}),I=R(!1),r=R([]),v=R("");try{const i=JSON.parse(u.value);Array.isArray(i)?r.value=i:typeof i=="boolean"?I.value=i:v.value=u.value}catch{I.value=!1,r.value=[],v.value=u.value}G(I,()=>{u.value=JSON.stringify(I.value),D("input")}),G(r,()=>{u.value=JSON.stringify(r.value),D("input")},{deep:!0}),G(v,()=>{u.value=v.value,D("input")}),G(h.value,()=>{l.value.Type!==h.value.Type?(l.value=ye(h.value),I.value=!1,r.value=[],v.value=""):l.value=ye(h.value)});const c=(i=void 0)=>{D("change",i)};return(i,o)=>l.value.Type===m(le).TEXT?(d(),A(be,{key:0,modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),hint:l.value.Hint,label:`${l.value.Label}${m(y)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).DATE?(d(),A(be,{key:1,modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=a=>v.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).NUMBER?(d(),A(be,{key:2,modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=a=>v.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).TEXTAREA?(d(),A(nt,{key:3,modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).CHECKBOX?(d(),$(E,{key:4},[l.value.Multiple?(d(!0),$(E,{key:0},z(l.value.Values,a=>(d(),A(he,{key:a.ID,modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=S=>r.value=S),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(d(),A(he,{key:1,modelValue:I.value,"onUpdate:modelValue":o[5]||(o[5]=a=>I.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,required:m(y),rules:[a=>!m(y)||!!a||"You must tick to continue!"],onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===m(le).SELECT?(d(),$(E,{key:5},[!l.value.Autofill&&l.value.Multiple?(d(),A(Ye,{key:0,modelValue:r.value,"onUpdate:modelValue":o[6]||(o[6]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(d(),A(el,{key:1,modelValue:r.value,"onUpdate:modelValue":o[7]||(o[7]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(d(),A(el,{key:3,modelValue:v.value,"onUpdate:modelValue":o[9]||(o[9]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(d(),A(Ye,{key:2,modelValue:v.value,"onUpdate:modelValue":o[8]||(o[8]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(V)||!1,"persistent-hint":m(f)||!1,"error-messages":U.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===m(le).RADIO?(d(),A(Tt,{key:6,modelValue:v.value,"onUpdate:modelValue":o[10]||(o[10]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,rules:[t.value.required],onChange:c},{default:p(()=>[(d(!0),$(E,null,z(l.value.Values,a=>(d(),A(Ct,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).ACCOMMODATION?(d(),A(yt,{key:7,modelValue:r.value,"onUpdate:modelValue":o[11]||(o[11]=a=>r.value=a),admin:m(O),convention:i.convention,"registration-group":i.registrationGroup,data:i.field.Data,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,onChange:c},null,8,["modelValue","admin","convention","registration-group","data","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(le).AGE?(d(),A(bt,{key:8,modelValue:v.value,"onUpdate:modelValue":o[12]||(o[12]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(le).EXTRAS?(d(),A(ut,{key:9,modelValue:v.value,"onUpdate:modelValue":o[13]||(o[13]=a=>v.value=a),convention:i.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,required:m(y),onChange:c},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(le).INTERESTS?(d(),A(ot,{key:10,modelValue:v.value,"onUpdate:modelValue":o[14]||(o[14]=a=>v.value=a),convention:i.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,required:m(y),onChange:c},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(le).TICKET?(d(),A(st,{key:11,modelValue:v.value,"onUpdate:modelValue":o[15]||(o[15]=a=>v.value=a),admin:m(O),convention:i.convention,"registration-group":i.registrationGroup,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(V)||!1,"persistent-hint":m(f),"error-messages":U.value,required:m(y),onChange:c},null,8,["modelValue","admin","convention","registration-group","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),St={key:0,class:"my-2"},At={key:1,class:"my-2"},Et={key:0,class:"my-2"},Rt={key:1,class:"my-2"},Jt=Ue({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const D=Ve(e,"modelValue");Qe(D.value.Sections),D.value.Sections.forEach(u=>{u.Fields&&Qe(u.Fields)});const s=R(),O=Wl(),V=ul(),f=R((()=>{if(e.data!==void 0){const h=ye(e.data);return D.value.Sections.forEach(l=>{l.Fields&&l.Fields.forEach(t=>{const I=e.data.Data.find(r=>r.SectionFieldUUID===t.SectionFieldUUID&&r.SectionFieldUUID==t.SectionFieldUUID);if(I)t.Value=I.Data;else{const r={ID:0,SubmissionDataUUID:He(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:l.ID,SectionUUID:l.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:t.Value};h.Data.push(r)}})}),h}const u={ID:0,SubmissionUUID:He(),FormID:D.value.ID,FormUUID:D.value.FormUUID,UserID:(O==null?void 0:O.ID)||0,UserUUID:(O==null?void 0:O.UserUUID)||"",Data:[]};return u.Data=D.value.Sections.map(h=>h.Fields?h.Fields.map(l=>({ID:0,SubmissionDataUUID:He(),SubmissionID:u.ID,SubmissionUUID:u.SubmissionUUID,SectionID:h.ID,SectionUUID:h.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value})):[]).flat(),u})()),y=(u,h,l)=>{const t=f.value.Data.find(I=>I.SectionUUID===u&&I.SectionFieldUUID===h);t&&(t.Data=l)},U=({callback:u})=>{var h;(h=s.value)==null||h.validate().then(l=>{l.valid?V.saveSubmission(f.value).then(t=>{if(t){if(f.value=t.Submission,u&&u("Saved"),t.Forms&&t.Forms.length>0){const I=t.Forms.find(i=>i.FormUUID===f.value.FormUUID),r=t.Forms.find(i=>i.Type===ge.FORM_TYPE_ACCOMMODATION),v=t.Forms.find(i=>i.Type===ge.FORM_TYPE_DEALER),c=t.Forms.find(i=>i.Type===ge.FORM_TYPE_BADGE);I&&I.Type===ge.FORM_TYPE_REGISTRATION?r?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`):v?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):c?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`):ie.push("/"):I&&I.Type===ge.FORM_TYPE_ACCOMMODATION?v?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):c?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):ie.push("/"):I&&I.Type===ge.FORM_TYPE_DEALER?c?ie.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):ie.push("/"):I&&I.Type===ge.FORM_TYPE_BADGE&&ie.push("/")}}else u&&u("Failed to process request")}).catch(()=>{u&&u("Failed to process request")}):u&&u("Errors in form detected, please review and try again.")})};return(u,h)=>(d(),A(Pl,null,{default:p(()=>[n(et,{ref_key:"formValidator",ref:s,onSubmit:h[0]||(h[0]=nl(()=>{},["prevent"]))},{default:p(()=>[D.value.Heading?(d(),$("h2",St,K(D.value.Heading),1)):L("",!0),D.value.Description?(d(),$("p",At,K(D.value.Description),1)):L("",!0),(d(!0),$(E,null,z(D.value.Sections,l=>(d(),$(E,{key:`section_${D.value.ID}.${l.ID}`},[l.Heading?(d(),$("h3",Et,K(l.Heading),1)):L("",!0),l.Description?(d(),$("p",Rt,K(l.Description),1)):L("",!0),l.Fields?(d(!0),$(E,{key:2},z(l.Fields,t=>(d(),$(E,{key:`field_${D.value.ID}.${l.ID}.${t.ID}`},[t.Field?(d(),A(se,{key:0},{default:p(()=>[n(Y,null,{default:p(()=>[u.editable?(d(),A(ll,{key:0,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":I=>t.Value=I,admin:u.admin,convention:u.convention,"registration-group":u.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,onChange:I=>y(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(d(),A(ll,{key:1,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":I=>t.Value=I,admin:u.admin,convention:u.convention,"registration-group":u.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:"",onChange:I=>y(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128)):L("",!0)],64))),128)),u.editable&&!u.preview?(d(),A(se,{key:2},{default:p(()=>[n(Y,{class:"text-center"},{default:p(()=>[n(Ml,{onClick:U,type:"submit"})]),_:1})]),_:1})):L("",!0)]),_:1},512)]),_:1}))}});export{zt as F,el as V,ll as _,nt as a,le as b,Jt as c};
