import{p as _e,r as O,e as ne,S as v,y as cl,aA as Me,ah as Qe,al as ml,an as Ze,n as Ne,ae as vl,s as Ae,u as Oe,w as J,E as He,v as o,H as $,x as oe,N as q,aB as fl,I as ce,a1 as Q,a2 as me,a5 as qe,K as s,R as L,U as K,O as G,M as d,Z as j,L as b,Q as P,a3 as Ue,P as el,ar as Le,$ as ll,Y as gl,ac as Ye,a as pl,ax as hl,J as Ul,aC as Xe}from"./index-ecc8c358.js";import{F as ue}from"./form-e2a93b7c.js";import{a as yl}from"./submission-56c4c4f1.js";import{a as Il,V as de,u as xe,m as bl,b as tl,c as Tl,d as Vl}from"./VCheckbox-3b79f791.js";import{s as De}from"./index-26b71cef.js";import{e as Dl,V as ie,a as W,d as ye,c as Ve,b as al}from"./VList-ec01227c.js";import{a as Z,V as N}from"./VRow-7c233ffb.js";import{m as Cl,u as kl,a as El,b as Sl,V as Fe,c as Al}from"./copyToClipboard-a11399c3.js";import{v as Ol,u as Be,V as Ce,z as _l,j as Rl}from"./VContainer-f5ccbbc5.js";import{a as Ml,e as Ll,_ as Je}from"./VChip-867eafe3.js";import{k as Pl,l as $l,j as Fl,V as Ie,f as we,m as wl,n as Nl}from"./VTextField-7eb75c7f.js";import{V as ae}from"./VBtn-74521cb2.js";import{V as ql}from"./VTextarea-b803cb39.js";import{m as xl}from"./VAvatar-5ca6b6e6.js";import{G as Bl}from"./userData-72dcd128.js";import{v as Pe}from"./v4-a960c1f4.js";import{e as Gl,V as Kl,a as Hl,c as Yl}from"./VCard-5c64a5a3.js";import{V as Xl}from"./VForm-3a5a09fe.js";const je=(e,g,a)=>{if(a>=e.length){let A=a-e.length+1;for(;A--;)e.push(void 0)}e.splice(a,0,e.splice(g,1)[0])},ke=e=>{e.sort((g,a)=>(g.Order?g.Order:0)-(a.Order?a.Order:0)),e.forEach((g,a)=>{g.Order=a})},Xt=(e,g)=>{const a=g.indexOf(e);if(a===0)return;const A=e.Order;e.Order=g[a-1].Order,g[a-1].Order=A,ke(g)},Jt=(e,g)=>{const a=g.indexOf(e);if(a>=g.length-1)return;const A=e.Order;e.Order=g[a+1].Order,g[a+1].Order=A,ke(g)},$e=e=>(ke(e),e),jt=e=>(g,a)=>g[e]<a[e]?-1:g[e]>a[e]?1:0;var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const zt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var nl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(nl||{});const Wt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,g,a)=>e==null||g==null?-1:e.toString().toLocaleLowerCase().indexOf(g.toString().toLocaleLowerCase()),jl=_e({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function zl(e,g,a){var p;const A=[],U=(a==null?void 0:a.default)??Jl,h=a!=null&&a.filterKeys?Qe(a.filterKeys):!1,V=Object.keys((a==null?void 0:a.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return A;e:for(let c=0;c<e.length;c++){const k=e[c],n={},m={};let I=-1;if(g&&!(a!=null&&a.noFilter)){if(typeof k=="object"){const i=h||Object.keys(k);for(const u of i){const t=ml(k,u,k),l=(p=a==null?void 0:a.customKeyFilter)==null?void 0:p[u];if(I=l?l(t,g,k):U(t,g,k),I!==-1&&I!==!1)l?n[u]=I:m[u]=I;else if((a==null?void 0:a.filterMode)==="every")continue e}}else I=U(k,g,k),I!==-1&&I!==!1&&(m.title=I);const E=Object.keys(m).length,r=Object.keys(n).length;if(!E&&!r||(a==null?void 0:a.filterMode)==="union"&&r!==V&&!E||(a==null?void 0:a.filterMode)==="intersection"&&(r!==V||!E))continue}A.push({index:c,matches:{...m,...n}})}return A}function Wl(e,g,a,A){const U=O([]),h=O(new Map),V=ne(()=>A!=null&&A.transform?v(g).map(A==null?void 0:A.transform):v(g));cl(()=>{const c=typeof Me(a)!="string"&&typeof Me(a)!="number"?"":String(Me(a)),k=zl(V.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),n=v(g),m=[],I=new Map;k.forEach(E=>{let{index:r,matches:i}=E;const u=n[r];m.push(u),I.set(u.value,i)}),U.value=m,h.value=I});function p(c){return h.value.get(c.value)}return{filteredItems:U,filteredMatches:h,getMatches:p}}function Ql(e,g,a){if(g==null)return e;if(Array.isArray(g))throw new Error("Multiple matches is not implemented");return typeof g=="number"&&~g?o($,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,g)]),o("span",{class:"v-autocomplete__mask"},[e.substr(g,a)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(g+a)])]):e}const Zl=_e({autoSelectFirst:{type:[Boolean,String]},search:String,...jl({filterKeys:["title"]}),...Cl(),...Ze(Pl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...xl({transition:!1})},"VAutocomplete"),ze=Ne()({name:"VAutocomplete",props:Zl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,g){let{slots:a}=g;const{t:A}=vl(),U=O(),h=Ae(!1),V=Ae(!0),p=O(!1),c=O(),k=Oe(e,"menu"),n=ne({get:()=>k.value,set:y=>{var x;k.value&&!y&&((x=c.value)!=null&&x.Î¨openChildren)||(k.value=y)}}),m=Ae(-1),I=ne(()=>{var y;return(y=U.value)==null?void 0:y.color}),{items:E,transformIn:r,transformOut:i}=Dl(e),{textColorClasses:u,textColorStyles:t}=Ol(I),l=Oe(e,"search",""),f=Oe(e,"modelValue",[],y=>r(y===null?[null]:Qe(y)),y=>{const x=i(y);return e.multiple?x:x[0]??null}),T=$l(),{filteredItems:_,getMatches:te}=Wl(e,E,()=>V.value?"":l.value),D=ne(()=>f.value.map(y=>E.value.find(x=>e.valueComparator(x.value,y.value))||y)),C=ne(()=>e.hideSelected?_.value.filter(y=>!D.value.some(x=>x.value===y.value)):_.value),H=ne(()=>D.value.map(y=>y.props.value)),ve=ne(()=>D.value[m.value]),fe=ne(()=>{var x;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&l.value===((x=C.value[0])==null?void 0:x.title))&&C.value.length>0&&!V.value&&!p.value}),be=ne(()=>e.hideNoData&&!E.value.length||e.readonly||(T==null?void 0:T.isReadonly.value)),se=O(),{onListScroll:Re,onListKeydown:R}=kl(se,U);function M(y){e.openOnClear&&(n.value=!0),l.value=""}function S(){be.value||(n.value=!0)}function w(y){be.value||(h.value&&(y.preventDefault(),y.stopPropagation()),n.value=!n.value)}function ge(y){var he,F,z;if(e.readonly||T!=null&&T.isReadonly.value)return;const x=U.value.selectionStart,Y=H.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(n.value=!0),["Escape"].includes(y.key)&&(n.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(fe.value&&["Enter","Tab"].includes(y.key)&&pe(_.value[0]),V.value=!0),y.key==="ArrowDown"&&fe.value&&((he=se.value)==null||he.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(m.value<0){y.key==="Backspace"&&!l.value&&(m.value=Y-1);return}const B=m.value;ve.value&&pe(ve.value),m.value=B>=Y-1?Y-2:B}if(y.key==="ArrowLeft"){if(m.value<0&&x>0)return;const B=m.value>-1?m.value-1:Y-1;D.value[B]?m.value=B:(m.value=-1,U.value.setSelectionRange((F=l.value)==null?void 0:F.length,(z=l.value)==null?void 0:z.length))}if(y.key==="ArrowRight"){if(m.value<0)return;const B=m.value+1;D.value[B]?m.value=B:(m.value=-1,U.value.setSelectionRange(0,0))}}}function ul(y){l.value=y.target.value}function il(){var y;h.value&&(V.value=!0,(y=U.value)==null||y.focus())}function ol(y){h.value=!0,setTimeout(()=>{p.value=!0})}function sl(y){p.value=!1}function rl(y){(y==null||y===""&&!e.multiple)&&(f.value=[])}const Te=Ae(!1);function pe(y){if(e.multiple){const x=H.value.findIndex(Y=>e.valueComparator(Y,y.value));if(x===-1)f.value=[...f.value,y];else{const Y=[...f.value];Y.splice(x,1),f.value=Y}}else f.value=[y],Te.value=!0,l.value=y.title,n.value=!1,V.value=!0,He(()=>Te.value=!1)}return J(h,(y,x)=>{var Y;y!==x&&(y?(Te.value=!0,l.value=e.multiple?"":String(((Y=D.value.at(-1))==null?void 0:Y.props.title)??""),V.value=!0,He(()=>Te.value=!1)):(!e.multiple&&!l.value?f.value=[]:fe.value&&!p.value&&!D.value.some(he=>{let{value:F}=he;return F===C.value[0].value})&&pe(C.value[0]),n.value=!1,l.value="",m.value=-1))}),J(l,y=>{!h.value||Te.value||(y&&(n.value=!0),V.value=!y)}),Be(()=>{const y=!!(e.chips||a.chip),x=!!(!e.hideNoData||C.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),Y=f.value.length>0,[he]=Ie.filterProps(e);return o(Ie,oe({ref:U},he,{modelValue:l.value,"onUpdate:modelValue":rl,focused:h.value,"onUpdate:focused":F=>h.value=F,validationValue:f.externalValue,dirty:Y,onInput:ul,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":n.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!a.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Y?void 0:e.placeholder,"onClick:clear":M,"onMousedown:control":S,onKeydown:ge}),{...a,default:()=>o($,null,[o(El,oe({ref:c,modelValue:n.value,"onUpdate:modelValue":F=>n.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:be.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:il},e.menuProps),{default:()=>[x&&o(ie,{ref:se,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:R,onFocusin:ol,onFocusout:sl,onScrollPassive:Re,tabindex:"-1"},{default:()=>{var F,z,B;return[(F=a["prepend-item"])==null?void 0:F.call(a),!C.value.length&&!e.hideNoData&&(((z=a["no-data"])==null?void 0:z.call(a))??o(W,{title:A(e.noDataText)},null)),o(Sl,{renderless:!0,items:C.value},{default:re=>{var Ke;let{item:ee,index:le,itemRef:dl}=re;const Ge=oe(ee.props,{ref:dl,key:le,active:fe.value&&le===0?!0:void 0,onClick:()=>pe(ee)});return((Ke=a.item)==null?void 0:Ke.call(a,{item:ee,index:le,props:Ge}))??o(W,Ge,{prepend:Ee=>{let{isSelected:Se}=Ee;return o($,null,[e.multiple&&!e.hideSelected?o(Il,{key:ee.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,ee.props.prependIcon&&o(Ce,{icon:ee.props.prependIcon},null)])},title:()=>{var Ee,Se;return V.value?ee.title:Ql(ee.title,(Ee=te(ee))==null?void 0:Ee.title,((Se=l.value)==null?void 0:Se.length)??0)}})}}),(B=a["append-item"])==null?void 0:B.call(a)]}})]}),D.value.map((F,z)=>{var ee;function B(le){le.stopPropagation(),le.preventDefault(),pe(F)}const re={"onClick:close":B,onMousedown(le){le.preventDefault(),le.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:F.value,class:["v-autocomplete__selection",z===m.value&&["v-autocomplete__selection--selected",u.value]],style:z===m.value?t.value:{}},[y?a.chip?o(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>{var le;return[(le=a.chip)==null?void 0:le.call(a,{item:F,index:z,props:re})]}}):o(Ml,oe({key:"chip",closable:e.closableChips,size:"small",text:F.title},re),null):((ee=a.selection)==null?void 0:ee.call(a,{item:F,index:z}))??o("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&z<D.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){var re;for(var F=arguments.length,z=new Array(F),B=0;B<F;B++)z[B]=arguments[B];return o($,null,[(re=a["append-inner"])==null?void 0:re.call(a,...z),e.menuIcon?o(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:w,onClick:fl},null):void 0])}})}),Fl({isFocused:h,isPristine:V,menu:n,search:l,filteredItems:_,select:pe},U)}}),et={class:"extrasList"},lt=ce({__name:"Extras",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const a=e,{admin:A=!1,convention:U,disabled:h=!1}=a,V=me(e,"modelValue"),p=qe.getInstance(),c=O({});try{c.value=JSON.parse(V.value)}catch{}const k=O([]),n=O([]);J(a,()=>{I()}),J(c.value,r=>{for(const i in r)if(r[i].checked){const u=k.value.map(t=>{var l;return(l=t.Options)==null?void 0:l.find(f=>f.OptionUUID===i)});if(u&&u.length>0)try{const t=u[0];r[i].choiceId===""&&t&&t.Choices&&t.Choices.length>0&&(r[i].choiceId=t.Choices[0].TagUUID),r[i].price=t==null?void 0:t.Price}catch{}}else r[i].choiceId="",r[i].price=0;V.value=JSON.stringify(r),E()});const m=ne({get:()=>k.value.map(r=>r.ExtraUUID),set:()=>{}}),I=()=>{var i;const r=((i=a.items.find(u=>u.Title==="SelectedExtras"))==null?void 0:i.Value)||"[]";try{const u=JSON.parse(r);k.value=n.value.filter(t=>u.find(l=>l===t.ExtraUUID))||[],m.value=[...k.value.map(t=>t.ExtraUUID)],k.value.forEach(t=>{var l;(l=t.Options)==null||l.forEach(f=>{c.value[f.OptionUUID]||(c.value[f.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in U&&U.Extras.length?(n.value=U.Extras,I()):"ConventionUUID"in U&&(A?p==null||p.getConventionExtras(U.ConventionUUID).then(r=>{r&&(n.value=r,I())}):p==null||p.getAvailableConventionExtras(U.ConventionUUID).then(r=>{r&&(n.value=r,I())}));const E=(r=void 0)=>{setTimeout(()=>g("change",r),100)};return(r,i)=>(s(),L("div",et,[K("h4",null,G(r.label),1),o(ie,{opened:m.value,"onUpdate:opened":i[0]||(i[0]=u=>m.value=u)},{default:d(()=>[(s(!0),L($,null,j(k.value,u=>(s(),b(al,{key:u.ExtraUUID,value:u.ExtraUUID},{activator:d(({props:t})=>[o(W,oe({"prepend-icon":"mdi:mdi-group","append-icon":""},t),{default:d(()=>[u.Name?(s(),b(ye,{key:0},{default:d(()=>[K("strong",null,G(u.Name),1)]),_:2},1024)):P("",!0),u.Description?(s(),b(Ve,{key:1,class:"mt-2 d-inline"},{default:d(()=>[q(G(u.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:d(()=>[u.Options?(s(!0),L($,{key:0},j(u.Options,t=>(s(),b(W,{key:t.OptionUUID,class:"override-pl"},{default:d(()=>[o(Z,null,{default:d(()=>[o(N,{cols:"12",sm:"6"},{default:d(()=>[o(de,{label:`${t.Name} ${t.Price&&t.Price!==0?`(${v(De).currencySymbol}${t.Price})`:""}`,modelValue:c.value[t.OptionUUID].checked,"onUpdate:modelValue":l=>c.value[t.OptionUUID].checked=l,disabled:v(h),"hide-details":"",onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t.Choices&&t.Choices.length>1&&c.value[t.OptionUUID].checked?(s(),b(N,{key:0,cols:"12",sm:"6"},{default:d(()=>[o(Fe,{items:t.Choices.sort((l,f)=>l.Title.localeCompare(f.Title)).map(l=>({value:l.TagUUID,title:l.Title})),modelValue:c.value[t.OptionUUID].choiceId,"onUpdate:modelValue":l=>c.value[t.OptionUUID].choiceId=l,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(h),"hide-details":"",onChange:E},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const tt={class:"interestList"},at=ce({__name:"Interests",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const a=e,{admin:A=!1,convention:U,disabled:h=!1}=a,V=me(e,"modelValue"),p=qe.getInstance(),c=O({});try{c.value=JSON.parse(V.value)}catch{}const k=O([]),n=O([]);J(c.value,r=>{V.value=JSON.stringify(r)});const m=O([]),I=()=>{var i;const r=((i=a.items.find(u=>u.Title==="SelectedInterests"))==null?void 0:i.Value)||"[]";try{const u=JSON.parse(r);k.value=n.value.filter(t=>u.find(l=>l===t.InterestUUID))||[],m.value=[...k.value.map(t=>t.InterestUUID)]}catch{}};"ConventionUUID"in U&&(A?p==null||p.getConventionInterests(U.ConventionUUID).then(r=>{r&&(n.value=r,I())}):p==null||p.getConventionInterests(U.ConventionUUID).then(r=>{r&&(n.value=r,I())})),J(a,()=>{I()});const E=(r=void 0)=>{setTimeout(()=>g("change",r),100)};return(r,i)=>(s(),L("div",tt,[K("h4",null,G(r.label),1),o(ie,{opened:m.value,"onUpdate:opened":i[0]||(i[0]=u=>m.value=u)},{default:d(()=>[(s(!0),L($,null,j(k.value,u=>(s(),b(W,{key:u.InterestUUID},{default:d(()=>[o(Z,null,{default:d(()=>[o(N,null,{default:d(()=>[o(de,{label:`${u.Name} ${u.Price&&u.Price>0?`(${v(De).currencySymbol}${u.Price})`:""}`,modelValue:c.value[u.InterestUUID],"onUpdate:modelValue":t=>c.value[u.InterestUUID]=t,disabled:v(h),messages:u.Description,onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const nt={class:"ticketList"},ut={key:0,class:"text-orange-darken-1"},it=ce({__name:"Tickets",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const a=e,{admin:A=!1,convention:U,disabled:h=!1}=a,V=me(e,"modelValue"),p=qe.getInstance(),c=O({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(V.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const k=O([]),n=O([]);J(c.value,t=>{V.value=JSON.stringify(t)});const m=O([]),I=O({required:(t,l=void 0)=>()=>{if(l==null){if(c.value.Ticket.length===0&&a.required)return"Must select at least one ticket option.";if(t&&t.ComponentsRequired>0&&c.value.Ticket.includes(t.TicketUUID||"")){let f=0;if(t.TicketComponents.forEach(T=>{c.value.ComponentsChecked.forEach(_=>{T.TicketUUID===_&&(f+=1)})}),f<t.ComponentsRequired)return`Must select ticket ${t.ComponentsRequired} component${t.ComponentsRequired===1?"":"s"}`}}return!0}}),E=()=>{var l;const t=((l=a.items.find(f=>f.Title==="SelectedTickets"))==null?void 0:l.Value)||"[]";try{const f=JSON.parse(t);k.value=n.value.filter(T=>T.Type==="TICKET_TYPE_GROUP"&&f.find(_=>_===T.TicketUUID))||[],m.value=[...k.value.filter(T=>T.Type==="TICKET_TYPE_GROUP").map(T=>T.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(A)p==null||p.getConventionTickets(U.ConventionUUID).then(t=>{t&&(n.value=t,E())});else{const t=a.items.find(l=>l.Title==="SelectedTickets");t&&(p==null||p.getFieldTickets(t.FieldUUID).then(l=>{l&&(n.value=l,E())}))}J(a,()=>{E()});const r=t=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const l=[];k.value.forEach(f=>{(c.value.Ticket.includes(f.TicketUUID)||c.value.ComponentsChecked.includes(f.TicketUUID))&&l.push(...f.AddonTickets.map(T=>T.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(f=>l.includes(f)),u(t)},i=t=>{const l=n.value.find(f=>f.TicketUUID===c.value.Ticket[0]);if(l)for(;c.value.ComponentsChecked.length>l.ComponentsRequired;)c.value.ComponentsChecked.shift();u(t)},u=(t=void 0)=>{setTimeout(()=>g("change",t),100)};return(t,l)=>{var f;return s(),L("div",nt,[K("h4",null,[q(G(t.label)+" ",1),(f=t.registrationGroup)!=null&&f.Registration.Leader?P("",!0):(s(),L("small",ut,"(controlled by group leader)"))]),o(ie,{opened:m.value,"onUpdate:opened":l[4]||(l[4]=T=>m.value=T)},{default:d(()=>[(s(!0),L($,null,j(v($e)(k.value.filter(T=>T.Type===v(nl).TICKET_TYPE_GROUP)),T=>(s(),L($,{key:T.TicketUUID},[T.Tickets.length>0?(s(),b(al,{key:0,value:T.TicketUUID},{activator:d(({props:_})=>[o(W,oe(_,{"prepend-icon":"mdi:mdi-group"}),{default:d(()=>[o(ye,null,{default:d(()=>[K("strong",null,G(T.Name),1)]),_:2},1024),o(Ve,{class:"d-inline"},{default:d(()=>[q(G(T.Description),1)]),_:2},1024)]),_:2},1040)]),default:d(()=>[(s(!0),L($,null,j(T.Tickets,_=>(s(),b(W,{key:_.TicketUUID,class:"override-pl"},{default:d(()=>{var te;return[o(Ve,{class:"d-inline"},{default:d(()=>[q(G(_.Description),1)]),_:2},1024),o(de,{modelValue:c.value.Ticket,"onUpdate:modelValue":l[0]||(l[0]=D=>c.value.Ticket=D),value:_.TicketUUID,onChange:r,rules:[I.value.required(_)],"validate-on":"submit",disabled:v(h)||!((te=t.registrationGroup)!=null&&te.Registration.Leader)},{label:d(()=>[o(Ce,{icon:_.RequiresAccommodation?"mdi:mdi-home":_.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${_.Name} ${_.Price>0?`(${v(De).currencySymbol}${_.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&_.TicketUUID===c.value.Ticket[0]?(s(),L($,{key:0},[_.AddonTickets.length?(s(),b(ie,{key:0},{default:d(()=>[(s(!0),L($,null,j(v($e)(_.AddonTickets),D=>(s(),L($,{key:D==null?void 0:D.TicketUUID},[D?(s(),b(W,{key:0},{default:d(()=>[o(ye,null,{default:d(()=>{var C;return[o(de,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":l[1]||(l[1]=H=>c.value.AddonsChecked=H),value:D.TicketUUID,onChange:l[2]||(l[2]=H=>{c.value.ComponentsChecked=[],u(H)}),disabled:v(h)||!((C=t.registrationGroup)!=null&&C.Registration.Leader)},{label:d(()=>[o(Ce,{icon:D.RequiresAccommodation?"mdi:mdi-home-plus":D.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${D.Name} ${D.Price>0?`(${v(De).currencySymbol}${D.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),o(Ve,{class:"d-inline"},{default:d(()=>[q(G(D.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),_.TicketComponents.length?(s(),b(ie,{key:1},{default:d(()=>[(s(!0),L($,null,j(v($e)(_.TicketComponents),D=>(s(),L($,{key:D==null?void 0:D.TicketUUID},[D?(s(),b(W,{key:0},{default:d(()=>[o(ye,null,{default:d(()=>{var C;return[o(de,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":l[3]||(l[3]=H=>c.value.ComponentsChecked=H),value:D.TicketUUID,onChange:i,rules:[I.value.required(_,D)],"validate-on":"submit",disabled:v(h)||!((C=t.registrationGroup)!=null&&C.Registration.Leader)},{label:d(()=>[o(Ce,{icon:D.RequiresAccommodation?"mdi:mdi-home-plus":D.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${D.Name} ${D.Price>0?`(${v(De).currencySymbol}${D.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),o(Ve,null,{default:d(()=>[q(G(D.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},st=K("strong",null,"Your Sharing Group",-1),rt=["href","onClick"],dt=K("br",null,null,-1),ct=K("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),mt=K("strong",null,"Your Groups Accommodation",-1),vt=K("br",null,null,-1),ft=K("small",null,"(in order of preference, controlled by group leader)",-1),gt=K("strong",null,"Accommodation Options",-1),pt=K("br",null,null,-1),ht=K("strong",null,"Your Chosen Accommodation",-1),Ut=K("small",null,"(in order of preference)",-1),yt=ce({__name:"Accommodation",props:Q({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const a=e,{admin:A=!1,convention:U,disabled:h}=a,V=me(e,"modelValue"),p=xe(a,g,void 0,void 0,"items"),c=ll(),k=gl.getInstance(),n=O(Ue(V.value)),m=O([]),I=O(),E=O({sharing:!1}),r=()=>{try{const R=JSON.parse(a.data);R&&(E.value=R)}catch{}};r(),J(a,()=>{r(),a.registrationGroup&&(m.value=a.registrationGroup.Members,I.value=a.registrationGroup.Registration)}),J(n,R=>{V.value=Ue(R)},{deep:!0});const i=O(""),u=O(!1),t=()=>{var R;(R=I.value)!=null&&R.Leader&&c.getRegistrationInvite(U.ConventionUUID).then(M=>{if(M){const S=new URL(location.href);S.searchParams.set("token",M),i.value=S.toString()}})},l=()=>{Al(i.value),t(),u.value=!0,setTimeout(()=>u.value=!1,2200)},f=()=>{k.emit("registration.group.leave")},T=R=>{k.emit("registration.group.remove.member",R)},_=O([]);J(p,()=>{te()});const te=()=>{A?c.getConventionAccommodation(U.ConventionUUID).then(R=>{_.value=R.filter(M=>!!(p!=null&&p.value.find(S=>S.Value===M.AccommodationUUID)))||[]}):p.value.length>0&&c.getFieldAccommodation(p.value[0].FieldUUID).then(R=>{_.value=R.filter(M=>!!(p!=null&&p.value.find(S=>S.Value===M.AccommodationUUID)))||[]})};te(),(()=>{var R;if(a.registrationGroup)if(m.value=a.registrationGroup.Members,I.value=a.registrationGroup.Registration,(R=I.value)!=null&&R.Leader)t();else try{n.value=JSON.parse(a.registrationGroup.AccommodationData)}catch{}})();const C=O({column:0,id:""}),H=()=>{!h&&!n.value.includes(C.value.id)&&(C.value.column===0&&C.value.id!==""&&n.value.push(C.value.id),se())},ve=()=>{const R=n.value.findIndex(M=>M===C.value.id);!h&&R>=0&&(n.value.splice(R,1),se())},fe=()=>{if(h||C.value.column!==1)return;const R=n.value.findIndex(M=>M===C.value.id);R<=0||(je(n.value,R,R-1),se())},be=()=>{if(h||C.value.column!==1)return;const R=n.value.findIndex(M=>M===C.value.id);R>=n.value.length-1||(je(n.value,R,R+1),se())},se=(R=void 0)=>{setTimeout(()=>g("change",R),100)},Re=O({required:R=>!a.required||R.length>0||"Selections Required"});return(R,M)=>(s(),L($,null,[K("h4",null,G(R.label),1),o(Z,null,{default:d(()=>[o(N,{cols:"12"},{default:d(()=>{var S;return[m.value&&I.value&&E.value.sharing?(s(),L("div",ot,[st,!v(h)&&((S=m.value.find(w=>w.IsLeader))==null?void 0:S.UUID)!==I.value.RegistrationUUID?(s(),b(ae,{key:0,color:"red",variant:"text",onClick:f},{default:d(()=>[q("(leave group)")]),_:1})):P("",!0),o(ie,null,{default:d(()=>[o(W,null,{default:d(()=>{var w;return[o(ye,{class:"float-left pr-2 font-weight-bold"},{default:d(()=>[q(" Leader: ")]),_:1}),q(" "+G((w=m.value.find(ge=>ge.IsLeader))==null?void 0:w.Name),1)]}),_:1}),(s(!0),L($,null,j(m.value,w=>(s(),L($,{key:w.UUID},[w.IsLeader?P("",!0):(s(),b(W,{key:0},{append:d(()=>[I.value.Leader?(s(),b(ae,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:ge=>T(w.UUID),disabled:v(h)},null,8,["onClick","disabled"])):P("",!0)]),default:d(()=>[o(ye,{class:"float-left pr-2"},{default:d(()=>[q(" Member: ")]),_:1}),q(" "+G(w.Name),1)]),_:2},1024))],64))),128))]),_:1}),o(Ll,{modelValue:u.value,"onUpdate:modelValue":M[0]||(M[0]=w=>u.value=w),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),i.value&&I.value.Leader&&!v(h)?(s(),L($,{key:1},[o(ae,{color:"blue"},{default:d(()=>[K("a",{href:i.value,onClick:el(l,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,rt)]),_:1}),dt,ct],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),I.value&&!I.value.Leader?(s(),b(Z,{key:0},{default:d(()=>[o(N,{cols:"10",md:"5"},{default:d(()=>[mt,vt,ft,o(ie,null,{default:d(()=>[(s(!0),L($,null,j(n.value.map(S=>_.value.find(w=>w.AccommodationUUID==S)).filter(S=>S!==void 0),(S,w)=>(s(),L($,null,[S?(s(),b(W,{key:S.AccommodationUUID,title:`${w+1}. ${S.Name}`,class:Le(C.value.column===1&&C.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(s(),b(Z,{key:1},{default:d(()=>[o(N,{cols:"12",md:"5"},{default:d(()=>[gt,pt,o(ie,null,{default:d(()=>[(s(!0),L($,null,j(_.value,S=>(s(),b(W,{key:S.AccommodationUUID,title:S.Name,class:Le(C.value.column===0&&C.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:w=>C.value={column:0,id:S.AccommodationUUID},"append-icon":v(h)?"":"mdi:mdi-gesture-tap",onDblclick:M[1]||(M[1]=w=>H())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(h)?P("",!0):(s(),b(N,{key:0,cols:"12",md:"1"},{default:d(()=>[o(Z,{class:"d-md-none"},{default:d(()=>[o(N,{cols:"12",class:"text-center"},{default:d(()=>[o(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[2]||(M[2]=S=>H()),color:"primary",title:"Select"}),q(" Â  "),o(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[3]||(M[3]=S=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),o(Z,{class:"d-none d-md-flex h-100 align-content-center"},{default:d(()=>[o(N,{cols:"12"},{default:d(()=>[o(ae,{icon:"mdi:mdi-arrow-right",size:"small",onClick:M[4]||(M[4]=S=>H()),color:"primary",title:"Select"})]),_:1}),o(N,{cols:"12"},{default:d(()=>[o(ae,{icon:"mdi:mdi-arrow-left",size:"small",onClick:M[5]||(M[5]=S=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),o(N,{cols:"10",md:"5"},{default:d(()=>[ht,o(ie,null,{default:d(()=>[(s(!0),L($,null,j(n.value.map(S=>_.value.find(w=>w.AccommodationUUID==S)).filter(S=>S!==void 0),(S,w)=>(s(),L($,null,[S?(s(),b(W,{key:S.AccommodationUUID,title:`${w+1}. ${S.Name}`,class:Le(C.value.column===1&&C.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ge=>C.value={column:1,id:(S==null?void 0:S.AccommodationUUID)||""},"append-icon":v(h)?"":"mdi:mdi-gesture-tap",onDblclick:M[6]||(M[6]=ge=>ve())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),Ut]),_:1}),v(h)?P("",!0):(s(),b(N,{key:1,cols:"2",md:"1"},{default:d(()=>[o(Z,{class:"d-flex h-100 align-content-center mt-3"},{default:d(()=>[o(N,{cols:"12"},{default:d(()=>[o(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[7]||(M[7]=S=>fe()),color:"primary",title:"Higher Priority"})]),_:1}),o(N,{cols:"12"},{default:d(()=>[o(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[8]||(M[8]=S=>be()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),o(we,{modelValue:V.value,"onUpdate:modelValue":M[9]||(M[9]=S=>V.value=S),disabled:v(h)||!1,"persistent-hint":R.persistentHint||!1,"error-messages":R.errorMessages||"",rules:[Re.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])],64))}});const It=ce({__name:"AgeCheck",props:Q({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const a=e,A=xe(a,g,void 0,void 0,"items"),U=me(e,"modelValue"),h=O({required:n=>!a.required||!!n||"Required.",min:n=>{var l,f;const m=new Date,I=m.getFullYear(),E=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),i=((l=A.value.find(T=>T.Title=="MIN_AGE"))==null?void 0:l.Value)||"18",u=((f=A.value.find(T=>T.Title=="BEFORE_DATE"))==null?void 0:f.Value)||`${I}-${E}-${r}`,t=c(u);return p(n,u,parseInt(i))||`You must be at least ${i} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),V=()=>(g("blur"),!(h.value.min(U.value||"")!==!0||h.value.required(U.value||"")!==!0)),p=(n,m,I)=>{if(n>=m)return!1;const E=c(n),i=c(m).getTime()-E.getTime(),u=1e3*60*60*24*365.25;return i/u>=I},c=n=>{const[m,I,E]=n.split("-");return new Date(parseInt(m),parseInt(I)-1,parseInt(E))},k=(n=void 0)=>{setTimeout(()=>g("change",n),100)};return(n,m)=>(s(),b(Ie,{modelValue:U.value,"onUpdate:modelValue":m[0]||(m[0]=I=>U.value=I),type:"date",hint:n.hint||"",label:n.label||"",name:n.name||"",variant:"outlined",disabled:n.disabled||!1,"persistent-hint":n.persistentHint||!1,"error-messages":n.errorMessages||"",rules:[h.value.required,h.value.min],onBlur:V,onChange:k},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),bt=_e({...bl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Tt=Ne()({name:"VRadio",props:bt(),setup(e,g){let{slots:a}=g;return Be(()=>o(tl,oe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),a)),{}}});const Vt=_e({height:{type:[Number,String],default:"auto"},...wl(),...Ze(Tl(),["multiple"]),trueIcon:{type:Ye,default:"$radioOn"},falseIcon:{type:Ye,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Dt=Ne()({name:"VRadioGroup",inheritAttrs:!1,props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,g){let{attrs:a,slots:A}=g;const U=pl(),h=ne(()=>e.id||`radio-group-${U}`),V=Oe(e,"modelValue");return Be(()=>{const[p,c]=hl(a),[k,n]=we.filterProps(e),[m,I]=tl.filterProps(e),E=A.label?A.label({label:e.label,props:{for:h.value}}):e.label;return o(we,oe({class:["v-radio-group",e.class],style:e.style},p,k,{modelValue:V.value,"onUpdate:modelValue":r=>V.value=r,id:h.value}),{...A,default:r=>{let{id:i,messagesId:u,isDisabled:t,isReadonly:l}=r;return o($,null,[E&&o(Nl,{id:i.value},{default:()=>[E]}),o(Vl,oe(m,{id:i.value,"aria-describedby":u.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:t.value,readonly:l.value,"aria-labelledby":E?i.value:void 0,multiple:!1},c,{modelValue:V.value,"onUpdate:modelValue":f=>V.value=f}),A)])}})}),{}}}),We=ce({__name:"FormField",props:Q({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:Q(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:g}){const a=e,{admin:A=!1,disabled:U=!1,persistentHint:h=!1,required:V=!1}=a,p=O(""),c=me(e,"modelValue"),k=xe(a,g,void 0,void 0,"field"),n=O(Ue(k.value)),m=O({maxlength:u=>!a.maxLength||u.length<=a.maxLength||`Maximum length is ${a.maxLength} characters. (Current length: ${u.length})`,minlength:u=>!a.minLength||u.length>=a.minLength||`Minimum length is ${a.minLength} characters. (Current length: ${u.length})`,required:u=>!a.required||!!u.replace(/\s/g,"")||"Required field."}),I=O(!1),E=O([]),r=O("");try{const u=JSON.parse(c.value);Array.isArray(u)?E.value=u:typeof u=="boolean"?I.value=u:r.value=c.value}catch{I.value=!1,E.value=[],r.value=c.value}J(I,()=>{c.value=JSON.stringify(I.value),g("input")}),J(E,()=>{c.value=JSON.stringify(E.value),g("input"),n.value.Type===X.SELECT&&g("change")},{deep:!0}),J(r,()=>{c.value=r.value,g("input"),n.value.Type===X.SELECT&&g("change")}),J(k.value,()=>{n.value.Type!==k.value.Type?(n.value=Ue(k.value),I.value=!1,E.value=[],r.value=""):n.value=Ue(k.value)});const i=(u=void 0)=>{g("change",u)};return(u,t)=>n.value.Type===v(X).TEXT?(s(),b(Ie,{key:0,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:`${n.value.Label}${v(V)?"*":""}`,placeholder:n.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===v(X).DATE?(s(),b(Ie,{key:1,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),type:"date",name:u.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===v(X).NUMBER?(s(),b(Ie,{key:2,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),type:"number",name:u.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===v(X).TEXTAREA?(s(),b(ql,{key:3,modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===v(X).CHECKBOX?(s(),L($,{key:4},[n.value.Multiple?(s(!0),L($,{key:0},j(n.value.Values,l=>(s(),b(de,{key:l.ID,modelValue:E.value,"onUpdate:modelValue":t[4]||(t[4]=f=>E.value=f),name:u.name,hint:n.value.Hint,label:l.Title,value:l.Value,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,rules:[m.value.required],onChange:i},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(s(),b(de,{key:1,modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=l=>I.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(V),rules:[l=>!v(V)||!!l||"You must tick to continue!"],onChange:i},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):n.value.Type===v(X).SELECT?(s(),L($,{key:5},[!n.value.Autofill&&n.value.Multiple?(s(),b(Fe,{key:0,modelValue:E.value,"onUpdate:modelValue":t[6]||(t[6]=l=>E.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,multiple:"",items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):n.value.Autofill&&n.value.Multiple?(s(),b(ze,{key:1,modelValue:E.value,"onUpdate:modelValue":t[7]||(t[7]=l=>E.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,multiple:"",items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):n.value.Autofill?n.value.Autofill?(s(),b(ze,{key:3,modelValue:r.value,"onUpdate:modelValue":t[9]||(t[9]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(s(),b(Fe,{key:2,modelValue:r.value,"onUpdate:modelValue":t[8]||(t[8]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):n.value.Type===v(X).RADIO?(s(),b(Dt,{key:6,modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,rules:[m.value.required],onChange:i},{default:d(()=>[(s(!0),L($,null,j(n.value.Values,l=>(s(),b(Tt,{key:l.Value,label:l.Title,value:l.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):n.value.Type===v(X).ACCOMMODATION?(s(),b(yt,{key:7,modelValue:E.value,"onUpdate:modelValue":t[11]||(t[11]=l=>E.value=l),name:u.name,admin:v(A),convention:u.convention,"registration-group":u.registrationGroup,data:u.field.Data,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(V),onChange:i},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):n.value.Type===v(X).AGE?(s(),b(It,{key:8,modelValue:r.value,"onUpdate:modelValue":t[12]||(t[12]=l=>r.value=l),name:u.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,onChange:i},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):n.value.Type===v(X).EXTRAS?(s(),b(lt,{key:9,modelValue:r.value,"onUpdate:modelValue":t[13]||(t[13]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(V),onChange:i},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):n.value.Type===v(X).INTERESTS?(s(),b(at,{key:10,modelValue:r.value,"onUpdate:modelValue":t[14]||(t[14]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(V),onChange:i},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):n.value.Type===v(X).TICKET?(s(),b(it,{key:11,modelValue:r.value,"onUpdate:modelValue":t[15]||(t[15]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,"registration-group":u.registrationGroup,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(V),onChange:i},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}),Ct={key:0,class:"my-2 text-white text-center"},kt={key:1,class:"admin-header my-2 text-white text-center"},Et=["innerHTML"],St=["innerHTML"],Qt=ce({__name:"FormRenderer",props:Q({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:Q(["close"],["update:modelValue"]),setup(e,{emit:g}){const a=me(e,"modelValue");ke(a.value.Sections),a.value.Sections.forEach(i=>{i.Fields&&ke(i.Fields)});const A=O(),U=Bl(),h=ll(),V=O(!1),p=O(!1),c=O(!1),k=O((()=>{if(e.data!==void 0){const u=Ue(e.data);return a.value.Sections.forEach(t=>{t.Fields&&t.Fields.forEach(l=>{const f=e.data.Data.find(T=>T.SectionFieldUUID===l.SectionFieldUUID&&T.SectionFieldUUID==l.SectionFieldUUID);if(f)l.Value=f.Data;else{const T={ID:0,SubmissionDataUUID:Pe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:t.ID,SectionUUID:t.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};u.Data.push(T)}})}),u}const i={ID:0,SubmissionUUID:Pe(),FormID:a.value.ID,FormUUID:a.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return i.Data=a.value.Sections.map(u=>u.Fields?u.Fields.map(t=>({ID:0,SubmissionDataUUID:Pe(),SubmissionID:i.ID,SubmissionUUID:i.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:""})):[]).flat(),i})()),n=(i,u,t)=>{const l=k.value.Data.find(f=>f.SectionUUID===i&&f.SectionFieldUUID===u);l&&(l.Data=t)},m=(i,u,t,l)=>i&&i.Type===ue.FORM_TYPE_REGISTRATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:t?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":i&&i.Type===ue.FORM_TYPE_ACCOMMODATION?t?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":i&&i.Type===ue.FORM_TYPE_DEALER?l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(i&&i.Type===ue.FORM_TYPE_BADGE,"/"),I=({callback:i})=>{h.getRegistrationByConvention(e.convention.ConventionUUID).then(u=>{i&&i("Loading"),h.getAvailableConventionForms(e.convention.ConventionUUID).then(t=>{u.Submissions.forEach((D,C)=>{D.Form||(u.Submissions[C].Form=t.find(H=>H.FormUUID===D.FormUUID))});const l=u.Submissions.find(D=>D.FormUUID===k.value.FormUUID),f=u.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_ACCOMMODATION}),T=u.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_DEALER}),_=u.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_BADGE}),te=m(l==null?void 0:l.Form,f==null?void 0:f.Form,T==null?void 0:T.Form,_==null?void 0:_.Form);Xe.push(te)})})},E=({callback:i})=>{var u;(u=A.value)==null||u.validate().then(t=>{t.valid?h.saveSubmission(k.value).then(l=>{l?setTimeout(()=>{r(l,i,1)},1e3):i&&i("Failed to process request")}).catch(()=>{i&&i("Failed to process request")}):i&&i("Errors in form detected, please review and try again.")})},r=(i,u,t=1)=>{h.checkSubmission(i).then(l=>{if(l)if(l.Ready&&l.Submission){if(V.value=!1,k.value=l.Submission,u&&u("Saved"),e.admin)g("close");else if(l.Forms&&l.Forms.length>0){const f=l.Forms.find(C=>C.FormUUID===k.value.FormUUID),T=l.Forms.find(C=>C.Type===ue.FORM_TYPE_ACCOMMODATION),_=l.Forms.find(C=>C.Type===ue.FORM_TYPE_DEALER),te=l.Forms.find(C=>C.Type===ue.FORM_TYPE_BADGE),D=m(f,T,_,te);Xe.push(D)}}else{if(t>5&&(V.value=!0),t>10&&(p.value=!0),t>20&&(c.value=!0),t>60){u&&(V.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{r(i,u,t+1)},t<20?1e3*t:2e4)}else u&&(V.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."))}).catch(()=>{u&&(V.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."))})};return(i,u)=>{const t=Ul("router-link");return s(),b(Rl,null,{default:d(()=>[o(Xl,{ref_key:"formValidator",ref:A,onSubmit:u[1]||(u[1]=el(()=>{},["prevent"]))},{default:d(()=>[a.value.Heading?(s(),L("h1",Ct,G(a.value.Heading),1)):P("",!0),i.admin?(s(),L("h2",kt," (Admin Mode) ")):P("",!0),a.value.Description?(s(),L("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:a.value.Description},null,8,Et)):P("",!0),(s(!0),L($,null,j(a.value.Sections,l=>(s(),b(Gl,{key:`section_${a.value.ID}.${l.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:d(()=>[l.Heading?(s(),b(Kl,{key:0},{default:d(()=>[q(G(l.Heading),1)]),_:2},1024)):P("",!0),l.Description?(s(),b(Hl,{key:1,class:"text-wrap"},{default:d(()=>[K("div",{innerHTML:l.Description},null,8,St)]),_:2},1024)):P("",!0),l.Fields?(s(),b(Yl,{key:2},{default:d(()=>[(s(!0),L($,null,j(l.Fields,f=>(s(),L($,{key:`field_${a.value.ID}.${l.ID}.${f.ID}`},[f.Field?(s(),b(Z,{key:0},{default:d(()=>[o(N,null,{default:d(()=>[i.editable?(s(),b(We,{key:0,field:f.Field,modelValue:f.Value,"onUpdate:modelValue":T=>f.Value=T,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:f.Required,"min-length":f.MinLength,"max-length":f.MaxLength,"persistent-hint":!0,onChange:T=>n(l.SectionUUID,f.SectionFieldUUID,f.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(s(),b(We,{key:1,field:f.Field,modelValue:f.Value,"onUpdate:modelValue":T=>f.Value=T,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:f.Required,"min-length":f.MinLength,"max-length":f.MaxLength,"persistent-hint":!0,disabled:"",onChange:T=>n(l.SectionUUID,f.SectionFieldUUID,f.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),i.preview?P("",!0):(s(),L($,{key:3},[o(Z,null,{default:d(()=>[i.admin?(s(),b(N,{key:1,class:"text-right"},{default:d(()=>[o(ae,{color:"red",onClick:u[0]||(u[0]=l=>g("close"))},{default:d(()=>[q("Cancel")]),_:1})]),_:1})):(s(),b(N,{key:0,class:"text-right"},{default:d(()=>[o(t,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:d(()=>[o(ae,{color:"red"},{default:d(()=>[q("Close")]),_:1})]),_:1})]),_:1})),i.admin||i.editable?(s(),b(N,{key:2,class:"text-left"},{default:d(()=>[o(Je,{onClick:E,type:"submit"})]),_:1})):(s(),b(N,{key:3,class:"text-left"},{default:d(()=>[o(Je,{onClick:I,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),V.value?(s(),b(Z,{key:0},{default:d(()=>[o(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):P("",!0),p.value?(s(),b(Z,{key:1},{default:d(()=>[o(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):P("",!0),c.value?(s(),b(Z,{key:2},{default:d(()=>[o(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{zt as F,nl as T,ze as V,We as _,Jt as a,Wt as b,X as c,Qt as d,jt as e,jl as f,Xt as m,ke as s,Wl as u};
