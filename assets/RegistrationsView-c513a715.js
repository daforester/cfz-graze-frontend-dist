import{p as We,n as Qe,e as le,t as _e,c as Xe,G as Ze,v as l,H as g,x as Le,I as re,a1 as pe,a2 as He,r as D,a3 as ce,K as n,L as P,M as s,$ as ye,S as x,a8 as Fe,Z as H,Q as W,w as ke,U as F,O as M,R as c,N as Y,_ as qe,a4 as xe,a0 as et}from"./index-627509f3.js";import{e as tt,T as at,d as ot,c as lt}from"./FormRenderer.vue_vue_type_style_index_0_lang-f8850b1a.js";import{a as nt,F as ie}from"./form-29fd1dbb.js";import{_ as je}from"./ModelDialog.vue_vue_type_script_setup_true_lang-bd282294.js";import{m as it,j as st,k as ut,l as rt,n as dt,o as mt,p as At,u as _t,q as Ut,r as ct,s as Tt,t as Et,v as vt,w as St,x as Rt,y as $e,z as we,A as Ge,_ as Dt,e as Be,f as It,g as Ot,h as ft,i as pt}from"./VWindowItem-19f4f05b.js";import{a as oe,V as J}from"./VRow-7d8fac8c.js";import{V as Ee}from"./VTextField-55a27f07.js";import{V as ue}from"./copyToClipboard-4857e51b.js";import{u as Ct,j as ve}from"./VContainer-6147ec44.js";import{V as yt,u as Mt}from"./VCheckbox-a86da684.js";import{v as Se}from"./v4-a960c1f4.js";import{V as be,a as Ne}from"./VList-511e9aff.js";import{V as Ce}from"./VBtn-903bf001.js";import{S as gt}from"./submission-830079be.js";import{V as ht}from"./VAvatar-ac9f8aca.js";import{c as Lt,e as Je}from"./VCard-777a3030.js";import{V as bt}from"./VDialog-960374d8.js";import{s as Oe}from"./sortSubmissions-8ed80f07.js";import{u as Nt}from"./useStoreAPI-44ad0a0e.js";import{u as Ft,V as kt}from"./VToolbar-a74fae94.js";import{V as Vt}from"./VSpacer-d50ef46f.js";import{V as Ye,a as Pt}from"./VTable-86b88d23.js";import"./index-26b71cef.js";import"./VChip-36fe4996.js";import"./scopeId-30eb54a7.js";import"./VTextarea-3007860b.js";import"./userData-f51aa90a.js";import"./VForm-3c98b0e0.js";import"./VToolbarItems-3ee6638d.js";import"./VDivider-3f30e5ca.js";var Ke=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(Ke||{});const $t=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Re=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Re||{});const wt=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var V=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(V||{});const Gt=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var w=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(w||{});const Bt=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],Yt=We({itemsLength:{type:[Number,String],required:!0},...it(),...st(),...ut()},"VDataTableServer"),Ht=Qe()({name:"VDataTableServer",props:Yt(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,$)=>!0},setup(e,$){let{emit:E,slots:a}=$;const{groupBy:r}=rt(e),{sortBy:u,multiSort:p,mustSort:f}=dt(e),{page:N,itemsPerPage:h}=mt(e),t=le(()=>parseInt(e.itemsLength,10)),{columns:v,headers:o}=At(e,{groupBy:r,showSelect:_e(e,"showSelect"),showExpand:_e(e,"showExpand")}),{items:b}=_t(e,v),{toggleSort:S}=Ut({sortBy:u,multiSort:p,mustSort:f,page:N}),{opened:Z,isGroupOpen:k,toggleGroup:ee,extractRows:Q}=ct({groupBy:r,sortBy:u}),{pageCount:te,setItemsPerPage:ne}=Tt({page:N,itemsPerPage:h,itemsLength:t}),{flatItems:se}=Et(b,r,Z),{isSelected:de,select:Ue,selectAll:_,toggleSelect:U,someSelected:O,allSelected:d}=vt(e,{allItems:b,currentPage:b}),{isExpanded:R,toggleExpand:q}=St(e),K=le(()=>Q(b.value));Rt({page:N,itemsPerPage:h,sortBy:u,groupBy:r,search:_e(e,"search")}),Xe("v-data-table",{toggleSort:S,sortBy:u}),Ze({VDataTableRows:{hideNoData:_e(e,"hideNoData"),noDataText:_e(e,"noDataText"),loading:_e(e,"loading"),loadingText:_e(e,"loadingText")}});const G=le(()=>({page:N.value,itemsPerPage:h.value,sortBy:u.value,pageCount:te.value,toggleSort:S,setItemsPerPage:ne,someSelected:O.value,allSelected:d.value,isSelected:de,select:Ue,selectAll:_,toggleSelect:U,isExpanded:R,toggleExpand:q,isGroupOpen:k,toggleGroup:ee,items:K.value,groupedItems:se.value,columns:v.value,headers:o.value}));Ct(()=>{const[Me]=$e.filterProps(e),[ge]=we.filterProps(e),[De]=Ge.filterProps(e),[i]=Ye.filterProps(e);return l(Ye,Le({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},i),{top:()=>{var m;return(m=a.top)==null?void 0:m.call(a,G.value)},default:()=>{var m,A,T,X;return a.default?a.default(G.value):l(g,null,[(m=a.colgroup)==null?void 0:m.call(a,G.value),l("thead",{class:"v-data-table__thead",role:"rowgroup"},[l(we,Le(ge,{sticky:e.fixedHeader}),a)]),(A=a.thead)==null?void 0:A.call(a,G.value),l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a.body?a.body(G.value):l(Ge,Le(De,{items:se.value}),a)]),(T=a.tbody)==null?void 0:T.call(a,G.value),(X=a.tfoot)==null?void 0:X.call(a,G.value)])},bottom:()=>a.bottom?a.bottom(G.value):l($e,Me,{prepend:a["footer.prepend"]})})})}}),qt=re({__name:"EditAdminLayout",props:pe({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:pe(["save"],["update:modelValue"]),setup(e,{emit:$}){const E=He(e,"modelValue"),a=D(ce(e.layout)),r=D([]),u=ye(),p=({callback:t})=>{const v=()=>{t&&t("Failed to Save Layout")},o=()=>{t&&t("Layout Saved")};u.saveAdminLayout(a.value).then(b=>{b?(o(),$("save",b)):v()}).catch(()=>{v()})},f=()=>({ID:0,LayoutPanelUUID:Se(),AdminLayoutID:a.value.ID,AdminLayoutUUID:a.value.AdminLayoutUUID,Name:"",Order:a.value.Panels.length+1,Items:[],RequiredFormType:ie.FORM_TYPE_NIL,RequiredGroupMemberships:[]}),N=t=>()=>({ID:0,LayoutItemUUID:Se(),LayoutPanelID:t.ID,LayoutPanelUUID:t.LayoutPanelUUID,Label:"",SourceType:Re.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:t.Items.length+1,DefaultSort:!1}),h=t=>{const v=r.value.find(o=>o.value===t.SectionFieldUUID);v&&(t.SectionFieldID=v.object.ID,t.SectionField=v.object)};return u.getConventionForms(e.layout.ConventionUUID).then(t=>{t.forEach(v=>v.Sections.forEach(o=>o.Fields&&r.value.push(...o.Fields.map(b=>{var Z;return{title:`${v.Name} - ${o.Name} - ${(Z=b.Field)==null?void 0:Z.Name}`,value:b.SectionFieldUUID,object:b}})))),r.value.sort(tt("title"))}),(t,v)=>(n(),P(je,{modelValue:E.value,"onUpdate:modelValue":v[3]||(v[3]=o=>E.value=o),onSave:p,title:t.title,color:"primary"},{default:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:a.value.Name,"onUpdate:modelValue":v[0]||(v[0]=o=>a.value.Name=o),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:a.value.Type,"onUpdate:modelValue":v[1]||(v[1]=o=>a.value.Type=o),label:"Layout Type",items:x($t),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(Be,{modelValue:a.value.Panels,"onUpdate:modelValue":v[2]||(v[2]=o=>a.value.Panels=o),"new-item":f,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Fe({_:2},[H(a.value.Panels,(o,b)=>({name:`panel_${b}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:o.Name,"onUpdate:modelValue":S=>o.Name=S,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:o.RequiredFormType,"onUpdate:modelValue":S=>o.RequiredFormType=S,items:x(nt),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,{cols:"12"},{default:s(()=>[l(Dt,{label:"Required Groups",variant:"outlined",modelValue:o.RequiredGroupMemberships,"onUpdate:modelValue":S=>o.RequiredGroupMemberships=S,convention:a.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Be,{modelValue:o.Items,"onUpdate:modelValue":S=>o.Items=S,"new-item":N(o),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Fe({_:2},[H(o.Items,(S,Z)=>({name:`item_${Z}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:S.Label,"onUpdate:modelValue":k=>S.Label=k,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:S.SourceType,"onUpdate:modelValue":k=>S.SourceType=k,label:"Source Type",items:x(wt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(J,{cols:"12",sm:"6"},{default:s(()=>[S.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(n(),P(ue,{key:0,modelValue:S.SectionFieldUUID,"onUpdate:modelValue":k=>S.SectionFieldUUID=k,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:k=>h(S)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):S.SourceType==="LAYOUT_ITEM_SOURCE_META"?(n(),P(ue,{key:1,modelValue:S.MetaField,"onUpdate:modelValue":k=>S.MetaField=k,label:"Miscellaneous Data",items:x(Gt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):S.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(n(),P(ue,{key:2,modelValue:S.UserField,"onUpdate:modelValue":k=>S.UserField=k,label:"User Profile Data",items:x(Bt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):W("",!0)]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,null,{default:s(()=>[l(yt,{modelValue:S.DefaultSort,"onUpdate:modelValue":k=>S.DefaultSort=k,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),fe=e=>(typeof e=="string"&&(e=new Date(e)),`${e.toLocaleString("default",{weekday:"long"})} ${e.getDate()}${jt(e.getDate())} ${e.toLocaleString("default",{month:"long"})}`),jt=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},Jt=F("br",null,null,-1),Kt=F("h3",null,"Assigned Accommodation",-1),zt=F("br",null,null,-1),Wt=F("br",null,null,-1),Qt=F("h3",null,"Accommodation Preferences",-1),Xt=F("h3",null,"Selected Tickets",-1),Zt=F("br",null,null,-1),xt=re({__name:"EditAccommodationAssignmentDialog",props:pe({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:pe(["update:field"],["update:modelValue"]),setup(e,{emit:$}){const E=e,{convention:a,registration:r,title:u=""}=E,p=ye(),f=He(e,"modelValue"),N=D({capacity:{max:_=>{var d;const U=te.value.find(R=>R.room.RoomUUID===_);return!U||U.room.MaximumCapacity===0?!0:(((d=o.value)==null?void 0:d.Members.length)||0)<=U.room.MaximumCapacity||"Too many people in the group for this room"},min:_=>{var d;const U=te.value.find(R=>R.room.RoomUUID===_);return!U||U.room.MinimumCapacity===0?!0:(((d=o.value)==null?void 0:d.Members.length)||0)>=U.room.MinimumCapacity||"Not enough people in the group for this room"}}}),h=D([]),t=Mt(E,$,void 0,void 0,"field"),v=D(ce(t.value));ke(t,()=>{v.value=ce(t.value)});const o=D(),b=D(""),S=D(""),Z=D([]),k=D({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),ee=async()=>{var d;const _=await p.getConventionAvailableAccommodation(a.ConventionUUID);_&&(h.value=_);const U=await p.getRegistrationGroup(r.RegistrationUUID||"");U&&(o.value=U);const O=await p.getConventionTickets(a.ConventionUUID);O&&(Z.value=O);try{k.value=JSON.parse(((d=o.value)==null?void 0:d.TicketData)||"")}catch{}};ke(b,()=>{S.value=te.value.length>0?te.value[0].value:""});const Q=le(()=>{const _=ne.value;return h.value.map(U=>{let O;return _.forEach(d=>{U.Costs.forEach(R=>{R.DateStart===(d==null?void 0:d.DateStart)&&R.DateEnd===d.DateEnd&&(O===void 0||O>R.Availability)&&(O=R.Availability)})}),{label:`${U.Name}`,title:`${U.Name} (${O} Available)`,value:U.AccommodationUUID}})}),te=le(()=>{const _=ne.value,U=h.value.find(O=>O.AccommodationUUID===b.value);return(U==null?void 0:U.Pool.map(O=>{var R,q;let d;return _.forEach(K=>{O.Costs.forEach(G=>{G.DateStart===(K==null?void 0:K.DateStart)&&G.DateEnd===K.DateEnd&&(d===void 0||d>G.Availability)&&(d=G.Availability)})}),{label:`${(R=O.Venue)==null?void 0:R.Name} - ${O.Name}`,title:`${(q=O.Venue)==null?void 0:q.Name} - ${O.Name} (${d} Available)`,value:O.RoomUUID,room:O}}))||[]}),ne=le(()=>[...k.value.Ticket,...k.value.AddonsChecked,...k.value.ComponentsChecked].map(_=>Z.value.find(U=>U.TicketUUID===_)).filter(_=>_!==void 0&&_.RequiresAccommodation)),se=_=>{var U;p.assignAccommodation(((U=o.value)==null?void 0:U.Registration.RegistrationUUID)||"",b.value,S.value,!1).then(O=>{O?(ee(),_&&_("Room Assigned")):_&&_("Room not assigned")}).catch(()=>{_&&_("Room not assigned")})},de=_=>{var U,O;(U=o.value)!=null&&U.Registration.AllocationUUID?p.deleteAllocation(((O=o.value)==null?void 0:O.Registration.AllocationUUID)||"").then(d=>{d?(ee(),_&&_("Allocation Deleted")):_&&_("Allocation not deleted")}).catch(()=>{_&&_("Allocation not deleted")}):_&&_("Nothing to Delete")},Ue=_=>{var O,d;const U=(O=h.value.find(R=>R.AccommodationUUID===_.AccommodationUUID))==null?void 0:O.Pool;if(U){const R=U.find(q=>q.RoomUUID===_.RoomUUID);if(R)return`${(d=R.Venue)==null?void 0:d.Name} - ${R.Name}`}return""};return ee(),(_,U)=>{var O;return n(),P(je,{modelValue:f.value,"onUpdate:modelValue":U[2]||(U[2]=d=>f.value=d),title:x(u),color:"primary","show-close-action":!0,"show-delete-action":!!((O=o.value)!=null&&O.Registration.Allocation),"show-save-action":!!S.value,"save-button-label":"Assign Room",onDelete:de,onSave:se},{default:s(()=>[l(ve,{class:"pa-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>{var d;return[l(J,{cols:"12",md:"6"},{default:s(()=>{var R,q;return[F("h3",null,"Group Members ("+M((R=o.value)==null?void 0:R.Members.length)+")",1),(n(!0),c(g,null,H((q=o.value)==null?void 0:q.Members,K=>(n(),c(g,{key:K.UUID},[Y(" #"+M(K.Reference)+" "+M(K.Name),1),Jt],64))),128))]}),_:1}),(d=o.value)!=null&&d.Registration.Allocation?(n(),P(J,{key:0,cols:"12",md:"6"},{default:s(()=>[Kt,l(be,null,{default:s(()=>{var R;return[(n(!0),c(g,null,H((R=o.value)==null?void 0:R.Registration.Allocation.Periods,q=>(n(),P(Ne,{key:q.AllocationPeriodUUID},{default:s(()=>{var K;return[Y(M((K=h.value.find(G=>G.AccommodationUUID===q.AccommodationUUID))==null?void 0:K.Name)+" ",1),zt,Y(" "+M(Ue(q))+" ",1),Wt,F("small",null,"("+M(x(fe)(q.DateStart))+" - "+M(x(fe)(q.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):W("",!0)]}),_:1}),l(oe,null,{default:s(()=>[l(J,{cols:"12",md:"6"},{default:s(()=>[_.selectedAccommodation.length?(n(),c(g,{key:0},[Qt,l(be,null,{default:s(()=>[(n(!0),c(g,null,H(_.selectedAccommodation,(d,R)=>(n(),P(Ne,{key:d.AccommodationUUID},{default:s(()=>[Y(M(R+1)+". "+M(d.Name),1)]),_:2},1024))),128))]),_:1})],64)):W("",!0)]),_:1}),l(J,{cosl:"12",md:"6"},{default:s(()=>[Xt,l(be,null,{default:s(()=>[(n(!0),c(g,null,H(ne.value,d=>(n(),P(Ne,{key:d==null?void 0:d.TicketUUID},{default:s(()=>[Y(M(d.Name)+" ",1),Zt,F("small",null,"("+M(x(fe)(d.DateStart))+" - "+M(x(fe)(d.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),l(oe,null,{default:s(()=>[l(J,{cols:"12",md:"6"},{default:s(()=>[l(ue,{modelValue:b.value,"onUpdate:modelValue":U[0]||(U[0]=d=>b.value=d),items:Q.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),l(J,{cols:"12",md:"6"},{default:s(()=>[l(ue,{modelValue:S.value,"onUpdate:modelValue":U[1]||(U[1]=d=>S.value=d),items:te.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[N.value.capacity.min,N.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),ea={key:0,class:"accommodationList"},ta={key:0,class:"text-orange-darken-2"},aa=re({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},registration:{},value:{default:""},venues:{}},setup(e){const $=D(!1),E=le(()=>{if(!e.value)return[];const a=JSON.parse(e.value),r=e.accommodations.filter(u=>a.includes(u.AccommodationUUID)).sort((u,p)=>{const f=a.findIndex(h=>h===u.AccommodationUUID),N=a.findIndex(h=>h===p.AccommodationUUID);return f>N?1:-1});return ce(r)});return(a,r)=>(n(),c(g,null,[a.value?(n(),c("ol",ea,[(n(!0),c(g,null,H(E.value,u=>(n(),c("li",{key:u.AccommodationUUID},[a.registration&&a.registration.Allocation&&a.registration.Allocation.Periods.find(p=>p.AccommodationUUID===u.AccommodationUUID)?(n(),c("strong",ta,M(u.Name),1)):(n(),c(g,{key:1},[Y(M(u.Name),1)],64))]))),128))])):W("",!0),l(Ce,{onClick:r[0]||(r[0]=u=>$.value=!0),variant:"flat",color:"success"},{default:s(()=>[Y("Assign Accommodation")]),_:1}),a.convention&&$.value?(n(),P(xt,{key:1,modelValue:$.value,"onUpdate:modelValue":r[1]||(r[1]=u=>$.value=u),title:"Accommodation Allocation",convention:a.convention,registration:a.registration,"selected-accommodation":E.value},null,8,["modelValue","convention","registration","selected-accommodation"])):W("",!0)],64))}});const oa=qe(aa,[["__scopeId","data-v-c426aacc"]]),la={key:0,class:"addonList"},na={key:0},ia={key:0},sa=re({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;const E=JSON.parse(e.value),a=Object.keys(E),r=ce(e.extras);return r.forEach(u=>{u.Options=u.Options.filter(p=>a.includes(p.OptionUUID)?(p.Choices=p.Choices.filter(f=>f.TagUUID===E[p.OptionUUID].choiceId),E[p.OptionUUID].checked):!1)}),r.filter(u=>u.Options.length>0),r});return(E,a)=>E.value?(n(),c("ul",la,[(n(!0),c(g,null,H($.value,r=>(n(),c(g,{key:r.ExtraUUID},[r.Options.length?(n(),c("li",na,[F("strong",null,M(r.Name),1),F("ul",null,[(n(!0),c(g,null,H(r.Options,u=>(n(),c("li",{key:u.OptionUUID},[Y(M(u.Name)+" ",1),u.Choices.length==1?(n(),c("small",ia,"("+M(u.Choices[0].Title)+")",1)):W("",!0)]))),128))])])):W("",!0)],64))),128))])):W("",!0)}});const ua=qe(sa,[["__scopeId","data-v-55786e01"]]),ra={key:0},da=re({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;const E=JSON.parse(e.value);return Object.entries(E).filter(([,a])=>a).map(([a,r])=>e.interests.find(u=>u.InterestUUID===a)).filter(a=>a!==void 0)});return(E,a)=>E.value?(n(),c("ul",ra,[(n(!0),c(g,null,H($.value,r=>(n(),c("li",{key:r.InterestUUID},M(r.Name),1))),128))])):W("",!0)}}),ma=F("br",null,null,-1),Aa=F("small",null,"Options:",-1),_a=F("br",null,null,-1),Ua=F("small",null,"Addons:",-1),ca=re({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;let E={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{E=JSON.parse(e.value),"ticket"in E&&(E.Ticket=E.ticket),"addonsChecked"in E&&(E.AddonsChecked=E.addonsChecked),"componentsChecked"in E&&(E.ComponentsChecked=E.componentsChecked)}catch{}return E.Ticket.filter(a=>{const r=e.tickets.find(u=>u.TicketUUID===a);return!(!r||r.Type!==at.TICKET_TYPE_TICKET)}).map(a=>{const r=e.tickets.find(p=>p.TicketUUID===a),u=ce(r);return u.TicketComponents=r.TicketComponents.filter(p=>E.ComponentsChecked.includes(p.TicketUUID)),u.AddonTickets=r.AddonTickets.filter(p=>E.AddonsChecked.includes(p.TicketUUID)),u})});return(E,a)=>E.value?(n(!0),c(g,{key:0},H($.value,r=>(n(),c("div",{key:r.TicketUUID},[F("strong",null,M(r.Name),1),r.TicketComponents.length>0?(n(),c(g,{key:0},[ma,Aa,Y("  "),(n(!0),c(g,null,H(r.TicketComponents,u=>(n(),c(g,{key:u.TicketUUID},[F("small",null,M(u.Name),1),Y("  ")],64))),128))],64)):W("",!0),r.AddonTickets.length>0?(n(),c(g,{key:1},[_a,Ua,Y("  "),(n(!0),c(g,null,H(r.AddonTickets,u=>(n(),c("small",{key:u.TicketUUID},[Y("("),F("em",null,M(u.Name),1),Y(")")]))),128))],64)):W("",!0)]))),128)):W("",!0)}}),Ta={key:0},Ea={key:0},va=F("strong",null,"Total:",-1),Sa=re({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},item:{},interests:{},tickets:{},venues:{}},emits:["reload"],setup(e,{emit:$}){const E=ye(),a=D(),r=D(),u=D(),p=D(),f=D(!1),N=t=>{console.log(t)},h=(t,v,o)=>{r.value=t,E.getRegistrationGroup(o.RegistrationUUID||"").then(b=>{u.value=b,a.value=v,p.value=o,f.value=!0})};return(t,v)=>(n(),c(g,null,[t.header.key=="actions"?(n(),P(Ce,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:v[0]||(v[0]=o=>N(t.item.raw))})):t.header.type==="ACCOMMODATION"&&t.accommodations.length>0&&t.item.raw[t.header.key]?(n(),P(oa,{key:1,value:t.item.raw[t.header.key].Data,accommodations:t.accommodations,convention:t.convention,venues:t.venues,registration:t.item.raw[t.header.key].Registration},null,8,["value","accommodations","convention","venues","registration"])):t.header.type==="EXTRAS"&&t.extras.length>0?(n(),P(ua,{key:2,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(n(),P(da,{key:3,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(n(),P(ca,{key:4,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(n(!0),c(g,{key:5},H(t.item.raw[t.header.key],o=>(n(),c("ul",{key:o.Heading},[F("li",null,[F("strong",null,M(o.Heading)+":",1),Y(" "+M(x(gt)(o.Submission.Status))+" ",1),l(Ce,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>h(o.Registration,o.Form,o.Submission)},null,8,["onClick"])])]))),128)):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(n(),P(ht,{key:6,class:"rounded-circle",src:t.item.raw[t.header.key],height:"32",width:"32"},null,8,["src"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(n(),c(g,{key:7},[t.item.raw[t.header.key].length===1?(n(),c("em",Ta," Not in a group ")):(n(),c(g,{key:1},[F("ul",null,[(n(!0),c(g,null,H(t.item.raw[t.header.key],o=>(n(),c("li",{key:o.UUID,class:"ml-0"},[Y(" #"+M(o.Reference)+" : "+M(o.Name)+" ",1),o.IsLeader?(n(),c("strong",Ea,"(Leader)")):W("",!0)]))),128))]),va,Y(" "+M(t.item.raw[t.header.key].length),1)],64))],64)):(n(),c(g,{key:8},[Y(M(t.item.raw[t.header.key]),1)],64)),f.value&&p.value&&a.value?(n(),P(bt,{key:9,modelValue:f.value,"onUpdate:modelValue":v[3]||(v[3]=o=>f.value=o),scrollable:!0},{default:s(()=>[l(Je,{class:"bg-red-darken-4"},{default:s(()=>[l(Lt,null,{default:s(()=>[l(ot,{modelValue:a.value,"onUpdate:modelValue":v[1]||(v[1]=o=>a.value=o),admin:!0,convention:t.convention,data:p.value,editable:!0,"registration-group":u.value,onClose:v[2]||(v[2]=o=>{f.value=!1,$("reload")})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):W("",!0)],64))}}),Qa=re({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:$}){var De;const E=Nt();$("pageTitle","Registration Manager");const a=xe(),r=et(),u=D(!0);let p=((De=a.params.convention)==null?void 0:De.toString())||"";const f=D({ID:0,ConventionUUID:Se(),OrganisationID:0,OrganisationUUID:Ft,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),N=ye(),h=D({ID:0,AdminLayoutUUID:Se(),ConventionID:f.value.ID,ConventionUUID:f.value.ConventionUUID,Name:"Registration Table",Type:Ke.ADMIN_LAYOUT_TABLE,Panels:[]}),t=D([]),v=D([]),o=D([]),b=D(1),S=D(10),Z=D([]),k=D(0),ee=D(!1),Q=D(""),te=D(""),ne=D(""),se=D(""),de=D([]),Ue=D([]),_=D([]),U=D([]),O=D([]),d=D([]),R=D(0);ke(R,i=>{i===7&&G()});const q=()=>{t.value=[],v.value=[],o.value=[];try{N.getConventionAdminLayoutByName(f.value.ConventionUUID,"Registration Table").then(i=>{R.value+=1,i?h.value=i:(h.value.ConventionID=f.value.ID,h.value.ConventionUUID=f.value.ConventionUUID)})}catch{h.value.ConventionID=f.value.ID,h.value.ConventionUUID=f.value.ConventionUUID}try{N.getConventionForms(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(t.value=i)})}catch{}try{N.getConventionAccommodation(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(Ue.value=i)})}catch{}try{N.getConventionVenues(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(d.value=i)})}catch{}try{N.getConventionExtras(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(_.value=i)})}catch{}try{N.getConventionInterests(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(U.value=i)})}catch{}try{N.getConventionTickets(f.value.ConventionUUID).then(i=>{R.value+=1,i&&(O.value=i)})}catch{}},K=({page:i,itemsPerPage:m,sortBy:A})=>{b.value=i,Z.value=A;const T=o.value.find(j=>j.uuid==Q.value),X=T==null?void 0:T.layout.Items;let z="",Ve="";if(A&&X&&A.length>=1){const j=X.find(Te=>Te.LayoutItemUUID==A[0].key);switch(Ve=A[0].order,j==null?void 0:j.MetaField){case V.META_DATA_SOURCE_ACCOMMODATION_FORM:z="submission.status";break;case V.META_DATA_SOURCE_BADGE_FORM:z="submission.status";break;case V.META_DATA_SOURCE_DEALER_FORM:z="submission.status";break;case V.META_DATA_SOURCE_REGISTRATION_FORM:z="submission.status";break;case V.META_DATA_SOURCE_REGISTRATION_REFERENCE:z="reference";break;case V.META_DATA_SOURCE_SUBMISSION_DATE:z="created";break;case V.META_DATA_SOURCE_SUBMISSION_STATUS:z="submission.status";break}switch(j==null?void 0:j.UserField){case w.USER_DATA_SOURCE_DISPLAY_NAME:z="user.display_name";break;case w.USER_DATA_SOURCE_EMAIL:z="user.email";break;case w.USER_DATA_SOURCE_FIRST_NAME:z="user.firstname";break;case w.USER_DATA_SOURCE_HANDLE:z="user.handle";break;case w.USER_DATA_SOURCE_LAST_NAME:z="user.lastname";break}}try{const j={Direction:Ve,Limit:m,Offset:(i-1)*m,Order:z};(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_ACCOMMODATION&&(j.Accommodation=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_BADGE&&(j.Badge=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_DEALER&&(j.Dealer=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_REGISTRATION&&(j.Registration=!0),j.Email=se.value,j.Reference=ne.value,N.searchConventionRegistrations(f.value.ConventionUUID,j).then(Te=>{Te&&(k.value=Te.Total,v.value=Te.Registrations,o.value.forEach(he=>{const ze=he.layout;he.items=v.value.map(L=>{const B={};return he.headers.forEach(Pe=>{const y=ze.Items.find(me=>me.LayoutItemUUID===Pe.key);if(y){if(y.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&y.SectionField)L.Submissions.forEach(me=>{const ae=me.Data.find(Ie=>Ie.SectionFieldUUID===y.SectionFieldUUID);if(ae){Pe.type===lt.ACCOMMODATION?B[y.LayoutItemUUID]={Data:ae.Data,Registration:L}:B[y.LayoutItemUUID]=ae.Data;return}});else if(y.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&y.UserField)switch(y.UserField){case w.USER_DATA_SOURCE_AVATAR:B[y.LayoutItemUUID]=E.GetProfileImageURL(L.UserUUID);break;case w.USER_DATA_SOURCE_DISPLAY_NAME:B[y.LayoutItemUUID]=L.User.DisplayName;break;case w.USER_DATA_SOURCE_EMAIL:B[y.LayoutItemUUID]=L.User.Additional.Email;break;case w.USER_DATA_SOURCE_HANDLE:B[y.LayoutItemUUID]=L.User.Handle;break;case w.USER_DATA_SOURCE_DATE_OF_BIRTH:B[y.LayoutItemUUID]=L.User.Additional.DOB;break;case w.USER_DATA_SOURCE_FIRST_NAME:B[y.LayoutItemUUID]=L.User.Additional.FirstName;break;case w.USER_DATA_SOURCE_LAST_NAME:B[y.LayoutItemUUID]=L.User.Additional.LastName;break;case w.USER_DATA_SOURCE_TELEGRAM:B[y.LayoutItemUUID]="";break}else if(y.SourceType==="LAYOUT_ITEM_SOURCE_META"&&y.MetaField){const me=[];let ae;const Ie=L.Submissions.find(I=>{var C;return((C=I.Form)==null?void 0:C.Type)===ie.FORM_TYPE_REGISTRATION});switch(y.MetaField){case V.META_DATA_SOURCE_REGISTRATION_GROUP:L.Leader?ae=L:ae=L.Primary,me.push({Name:ae.User.DisplayName,UUID:ae.UserUUID,IsLeader:!0,Reference:ae.Reference}),me.push(...ae.Members.map(I=>({Name:I.User.DisplayName,UUID:I.UserUUID,IsLeader:!1,Reference:I.Reference}))),B[y.LayoutItemUUID]=me;break;case V.META_DATA_SOURCE_REGISTRATION_REFERENCE:B[y.LayoutItemUUID]=L.Reference;break;case V.META_DATA_SOURCE_SUBMISSION_DATE:if(Ie){const I=new Date(Ie.CreatedAt||"");B[y.LayoutItemUUID]=`${I.getFullYear()}-${(I.getMonth()+1).toString().padStart(2,"0")}-${I.getDate().toString().padStart(2,"0")} ${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}:${I.getSeconds().toString().padStart(2,"0")}`}else{const I=new Date(L.CreatedAt||"");B[y.LayoutItemUUID]=`${I.getFullYear()}-${(I.getMonth()+1).toString().padStart(2,"0")}-${I.getDate().toString().padStart(2,"0")} ${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}:${I.getSeconds().toString().padStart(2,"0")}`}break;case V.META_DATA_SOURCE_ACCOMMODATION_FORM:Oe(L.Submissions,t.value),B[y.LayoutItemUUID]=L.Submissions.map(I=>{const C=t.value.find(Ae=>Ae.FormUUID===I.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:I,Registration:L}}).filter(I=>{var C;return((C=I.Form)==null?void 0:C.Type)===ie.FORM_TYPE_ACCOMMODATION});break;case V.META_DATA_SOURCE_BADGE_FORM:Oe(L.Submissions,t.value),B[y.LayoutItemUUID]=L.Submissions.map(I=>{const C=t.value.find(Ae=>Ae.FormUUID===I.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:I,Registration:L}}).filter(I=>{var C;return((C=I.Form)==null?void 0:C.Type)===ie.FORM_TYPE_BADGE});break;case V.META_DATA_SOURCE_DEALER_FORM:Oe(L.Submissions,t.value),B[y.LayoutItemUUID]=L.Submissions.map(I=>{const C=t.value.find(Ae=>Ae.FormUUID===I.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:I,Registration:L}}).filter(I=>{var C;return((C=I.Form)==null?void 0:C.Type)===ie.FORM_TYPE_DEALER});break;case V.META_DATA_SOURCE_SUBMISSION_STATUS:Oe(L.Submissions,t.value),B[y.LayoutItemUUID]=L.Submissions.map(I=>{const C=t.value.find(Ae=>Ae.FormUUID===I.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:I,Registration:L}});break}}}}),B})}),u.value=!1)})}catch{}},G=()=>{h.value.Panels.forEach(i=>{i.Items.forEach(m=>{(m.SectionField==null||m.SectionField.Field==null)&&t.value.find(A=>{A.Sections.find(T=>{if(T.Fields){const X=T.Fields.find(z=>z.SectionFieldUUID===m.SectionFieldUUID);if(X)return m.SectionField=X,!0}})})})}),h.value.Panels.length>0&&(o.value=[],h.value.Panels.forEach(i=>{const m={uuid:Se(),order:i.Order,name:i.Name,headers:[],items:[],layout:i};i.Items.sort((A,T)=>A.Order>T.Order?1:A.Order==T.Order?0:-1),m.headers=i.Items.map(A=>{var T,X;return A.DefaultSort&&de.value.push({key:A.LayoutItemUUID,order:"asc"}),{key:A.LayoutItemUUID,title:A.Label||((X=(T=A.SectionField)==null?void 0:T.Field)==null?void 0:X.Label)||"",align:A.Align==="end"?"end":"start",sortable:ge(A),type:Me(A)}}),o.value.push(m)})),(Q.value==null||Q.value=="")&&o.value.length>0&&(Q.value=o.value[0].uuid)};p?N.getConvention(p).then(i=>{i&&(f.value=i,q())}).catch(()=>{r.push("/")}):r.push("/");const Me=i=>{var m,A;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_META)return`${i.SourceType}.${i.MetaField}`;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_FORM)return(A=(m=i.SectionField)==null?void 0:m.Field)==null?void 0:A.Type;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_USER)return`${i.SourceType}.${i.UserField}`},ge=i=>{const m=[V.META_DATA_SOURCE_ACCOMMODATION_FORM,V.META_DATA_SOURCE_BADGE_FORM,V.META_DATA_SOURCE_DEALER_FORM,V.META_DATA_SOURCE_REGISTRATION_FORM,V.META_DATA_SOURCE_REGISTRATION_REFERENCE,V.META_DATA_SOURCE_SUBMISSION_DATE,V.META_DATA_SOURCE_SUBMISSION_STATUS],A=[w.USER_DATA_SOURCE_DISPLAY_NAME,w.USER_DATA_SOURCE_EMAIL,w.USER_DATA_SOURCE_HANDLE,w.USER_DATA_SOURCE_DATE_OF_BIRTH,w.USER_DATA_SOURCE_FIRST_NAME,w.USER_DATA_SOURCE_LAST_NAME];return m.includes(i.MetaField)||A.includes(i.UserField)};return(i,m)=>(n(),P(Pt,null,{default:s(()=>[l(kt,{color:"blue-darken-4"},{default:s(()=>[l(It,{modelValue:Q.value,"onUpdate:modelValue":m[0]||(m[0]=A=>Q.value=A),"show-arrows":""},{default:s(()=>[(n(!0),c(g,null,H(o.value,A=>(n(),P(Ot,{key:A.uuid,value:A.uuid},{default:s(()=>[Y(M(A.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(Vt),l(Ce,{icon:"mdi:mdi-cog-outline",onClick:m[1]||(m[1]=A=>ee.value=!0)})]),_:1}),l(pt,{modelValue:Q.value,"onUpdate:modelValue":m[9]||(m[9]=A=>Q.value=A),disabled:!0},{default:s(()=>[(n(!0),c(g,null,H(o.value,A=>(n(),P(ft,{key:A.uuid,value:A.uuid},{default:s(()=>[A.uuid===Q.value?(n(),P(Je,{key:0,class:"pa-2"},{default:s(()=>[l(x(Ht),{"items-per-page":S.value,"onUpdate:itemsPerPage":m[7]||(m[7]=T=>S.value=T),"sort-by":de.value,"onUpdate:sortBy":m[8]||(m[8]=T=>de.value=T),headers:A.headers,"items-length":k.value,items:A.items,"item-value":"LayoutItemUUID",loading:u.value,search:te.value,"onUpdate:options":K},Fe({top:s(()=>[l(ve,null,{default:s(()=>[l(oe,null,{default:s(()=>[l(J,null,{default:s(()=>[l(Ee,{modelValue:ne.value,"onUpdate:modelValue":m[2]||(m[2]=T=>ne.value=T),label:"Search by Badge",onInput:m[3]||(m[3]=T=>te.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),l(J,null,{default:s(()=>[l(Ee,{modelValue:se.value,"onUpdate:modelValue":m[4]||(m[4]=T=>se.value=T),label:"Search By Email",onInput:m[5]||(m[5]=T=>te.value=Date.now().toString())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:2},[H(A.headers,T=>({name:`item.${T.key}`,fn:s(({item:X})=>[l(Sa,{header:T,item:X,accommodations:Ue.value,convention:f.value,extras:_.value,interests:U.value,tickets:O.value,venues:d.value,onReload:m[6]||(m[6]=z=>K({page:b.value,itemsPerPage:S.value,sortBy:Z.value}))},null,8,["header","item","accommodations","convention","extras","interests","tickets","venues"])])}))]),1032,["items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):W("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),ee.value?(n(),P(qt,{key:0,title:"Edit Layout",modelValue:ee.value,"onUpdate:modelValue":m[10]||(m[10]=A=>ee.value=A),layout:h.value,onSave:m[11]||(m[11]=A=>{ee.value=!1,G()})},null,8,["modelValue","layout"])):W("",!0)]),_:1}))}});export{Qa as default};
