import{u as y}from"./useGrazeAPI-d03a471c.js";import{d as N,y as f,V as k,r as L,o as C,b as D,w as e,c as t,e as s,N as b,O as A,L as R,G as B,F as E,S as F,U as O,f as h,_ as $}from"./index-e64203a3.js";import{_ as P}from"./SaveButton.vue_vue_type_script_setup_true_lang-17310d42.js";import{V as v,a as V}from"./VRow-c3f1c0bf.js";import{V as g}from"./VBtn-6e5dd02f.js";import{a as z,c as G,V as q}from"./VList-07fd4c68.js";import{e as j,V as H,a as J,c as K,d as M}from"./VCard-078febd6.js";import{V as Q}from"./VTextField-3a4cc6ea.js";import{V as W}from"./VDialog-4dcdb8a4.js";import{V as X}from"./VContainer-1e78ef63.js";import{v as Y}from"./v4-a960c1f4.js";import"./VOverlay-2d543717.js";import"./rounded-45c96fbd.js";import"./scopeId-2e1e9f71.js";import"./index-e6f54349.js";import"./index-8754a589.js";import"./ssrBoot-610bd96f.js";import"./createSimpleFunctional-cd033a8e.js";import"./VAvatar-0c53fbcd.js";import"./VImg-3f31abb1.js";const I=r=>(F("data-v-c758bd55"),r=r(),O(),r),Z=I(()=>h("h3",null,"Conventions",-1)),ee=I(()=>h("p",null,' Are you sure you wish to delete this convention? All data relating to it will be removed including all registrations and payment information. This action can not be undone. To confirm type "I UNDERSTAND" in the box below. ',-1)),te=N({__name:"ConventionsView",emits:["pageTitle"],setup(r,{emit:w}){w("pageTitle","Conventions");const u=y(),l=f([]),_=k().params.organisation.toString(),d=f(!1),i=f(-1),m=f("");u.getConventionList(_).then(o=>{l.value=o});const T=()=>{u.getOrganisation(_).then(o=>{if(o){const a={ID:0,ConventionUUID:Y(),OrganisationID:o.ID,OrganisationUUID:o.OrganisationUUID,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[]};u.saveConvention(a).then(c=>{c&&l.value.push(c)})}})},p=()=>{i.value=-1,d.value=!1},U=o=>{i.value=o,d.value=!0},x=({callback:o})=>{m.value="",i.value<0||i.value>=l.value.length?(o&&o("Invalid Convention"),setTimeout(p,2e3)):u.deleteConvention(l.value[i.value].ConventionUUID).then(a=>{a?(l.value.splice(i.value,1),o&&o("Convention Deleted")):o&&o("Failed to Delete Convention"),setTimeout(p,2e3)}).catch(()=>{o&&(o("Failed to Delete Convention"),setTimeout(p,2e3))})};return(o,a)=>{const c=L("RouterLink");return C(),D(X,{fluid:!0,class:"px-0"},{default:e(()=>[t(V,null,{default:e(()=>[t(v,null,{default:e(()=>[Z]),_:1}),t(v,{class:"text-right"},{default:e(()=>[t(g,{color:"primary",onClick:T},{default:e(()=>[s("New")]),_:1})]),_:1})]),_:1}),t(q,null,{default:e(()=>[(C(!0),b(E,null,A(l.value,(n,S)=>(C(),D(z,{key:n.ID,"prepend-icon":"mdi:mdi-group"},{append:e(()=>[t(g,{color:"red-darken-3",icon:"mdi:mdi-window-close",size:"x-small",onClick:ne=>U(S)},null,8,["onClick"])]),default:e(()=>[t(G,null,{default:e(()=>[t(c,{to:`/dashboard/admin/${R(_)}/convention/${n.Slug?n.Slug:n.ConventionUUID}`,value:n.ID,class:"d-block"},{default:e(()=>[s(B(n.Name),1)]),_:2},1032,["to","value"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(W,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=n=>d.value=n),width:"auto"},{default:e(()=>[t(j,null,{default:e(()=>[t(H,null,{default:e(()=>[s(" Delete Convention ")]),_:1}),t(J,null,{default:e(()=>[s(" A quick way to make enemies ")]),_:1}),t(K,null,{default:e(()=>[t(V,null,{default:e(()=>[t(v,null,{default:e(()=>[ee]),_:1})]),_:1}),t(V,null,{default:e(()=>[t(v,null,{default:e(()=>[t(Q,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n),variant:"outlined",placeholder:"Enter text here",label:"Confirmation"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,null,{default:e(()=>[t(P,{color:"red-darken-3",label:"Delete",enabled:m.value=="I UNDERSTAND",onClick:x},null,8,["enabled"]),t(g,{color:"primary",onClick:p},{default:e(()=>[s("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});const Te=$(te,[["__scopeId","data-v-c758bd55"]]);export{Te as default};
