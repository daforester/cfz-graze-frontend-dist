import{p as ft,d as vt,c as ze,t as Re,a0 as Ut,a1 as pt,f as e,F as q,m as Ze,i as ce,M as se,N as pe,r as D,n as s,B as V,q as b,v as a,y as L,x,Q as ue,A as F,P as _e,D as G,C as E,a2 as gt,k as ea,w as ye,G as La,H as wa,_ as Na,Z as Ke,a3 as Fa,a4 as Pa,O as aa,U as $a,a5 as Tt,b as yt,E as Ya,z as $e,V as Dt}from"./index-qMvE5g7-.js";import{_ as _t,D as It,a as At,b as St,c as Et,d as bt,e as ht,f as Vt,g as kt,h as Rt,A as Ue,u as ra,i as Ct,P as Ot,j as Sa,L as Mt,M as Lt,U as wt,k as H,l as Oe,m as Nt,n as Ft,o as Z}from"./useTokenManager-IQa9GJTF.js";import{d as Pt,b as Ga,c as $t}from"./FormRenderer.vue_vue_type_style_index_0_lang-sytZLfWn.js";import{F as me,a as Yt}from"./form-0fJbSFPv.js";import{b as Gt,c as xa,d as Ea,S as xt}from"./submission-40fey8Hx.js";import{G as fa}from"./group-7fhbY6WJ.js";import{C as va}from"./canDo-yWCfI_4r.js";import{_ as Ua}from"./ModelDialog.vue_vue_type_script_setup_true_lang-0e10Z2y0.js";import{a as Ye,c as Ba,V as pa,b as Bt}from"./VList-GlF2Awim.js";import{V as X}from"./VBtn-Y6kMl1lX.js";import{V as Ha}from"./VAvatar-G0U33xIE.js";import{s as Ht}from"./sortSubmissions-NKScr9xj.js";import{V as da,a as qt}from"./scopeId-Pto4DQtt.js";import{u as qa}from"./VCheckboxBtn-kD2PNXnM.js";import{b as za,c as Ka,_ as Ja,d as Ce,V as Qa,a as ma}from"./VWindowItem-u5c4nMoh.js";import{u as zt,P as Kt}from"./useDisplayTransactions-ayAtPzIp.js";import{G as ta}from"./userData-4OdoywhR.js";import{a as ga,V as Ta,c as la,e as Je,d as Jt}from"./VCard-NEwK57JB.js";import{V as le,a as h}from"./VRow-KWRHBUu7.js";import{_ as ca,b as Qt}from"./SaveButton.vue_vue_type_script_setup_true_lang-0TfrPCaz.js";import{V as ne}from"./VSelect-TUBqX_o2.js";import{u as jt,V as ja,a as fe}from"./VContainer-hkDLDWg4.js";import{V as Wt,a as Xt}from"./VAlert-fdoqlJ7Y.js";import{V as qe}from"./VCheckbox-zQTiNeaN.js";import{S as Zt}from"./setupLogin-mA7_5XMa.js";import{m as el,e as al,f as tl,g as ll,h as ol,i as nl,j as sl,u as il,p as ul,k as rl,l as dl,n as ml,o as cl,q as fl,r as vl,s as ba,t as ha,v as Va,_ as Ul,V as pl,a as gl,b as Tl,c as yl,w as Dl}from"./VDataTable-0YnpccTs.js";import{_ as _l}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-fIApAkFZ.js";import{V as ae}from"./VTextField-fOc6anT2.js";import{v as De}from"./v4-yQnnJER4.js";import{V as Wa}from"./VDialog-y_yQ-6xL.js";import{c as Il}from"./copyToClipboard-aCoRGJiH.js";import{u as Al}from"./useAvatar-QpsyrwAb.js";import{V as Sl}from"./forwardRefs-Sfz4S4-7.js";import{u as Xe}from"./nil-rxyd0N8M.js";import{V as ka,a as El}from"./VTable-CVlviTra.js";import{V as Ra,a as bl}from"./VToolbar-qW95TkqC.js";import"./canEditRegistrations-A1ez9bSf.js";import"./VAutocomplete-RR5Pk0ke.js";import"./VChip-pgaMUUdk.js";import"./VDivider-fPpbzqzb.js";import"./VTextarea-M4408tyX.js";import"./VForm-S-k75IZX.js";import"./VNavigationDrawer-AVFT1Asq.js";import"./index-OKsbKlsK.js";import"./VFileInput-zqDSO-Kc.js";import"./createSimpleFunctional-btOHuYAM.js";import"./VToolbarItems-_u7F7jv1.js";const hl=()=>({ID:0,UserUUID:"",DisplayName:"",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]}),Vl=c=>c===void 0?!1:va(c,fa.GROUP_TYPE_SYSTEM).ManageUsers,kl=ft({itemsLength:{type:[Number,String],required:!0},...el(),...al(),...tl()},"VDataTableServer"),Rl=vt()({name:"VDataTableServer",props:kl(),emits:{"update:modelValue":c=>!0,"update:page":c=>!0,"update:itemsPerPage":c=>!0,"update:sortBy":c=>!0,"update:options":c=>!0,"update:expanded":c=>!0,"update:groupBy":c=>!0},setup(c,N){let{attrs:f,slots:r}=N;const{groupBy:T}=ll(c),{sortBy:v,multiSort:g,mustSort:t}=ol(c),{page:d,itemsPerPage:i}=nl(c),C=ze(()=>parseInt(c.itemsLength,10)),{columns:_,headers:A}=sl(c,{groupBy:T,showSelect:Re(c,"showSelect"),showExpand:Re(c,"showExpand")}),{items:S}=il(c,_),{toggleSort:z}=ul({sortBy:v,multiSort:g,mustSort:t,page:d}),{opened:ee,isGroupOpen:P,toggleGroup:M,extractRows:U}=rl({groupBy:T,sortBy:v}),{pageCount:Y,setItemsPerPage:u}=dl({page:d,itemsPerPage:i,itemsLength:C}),{flatItems:Q}=ml(S,T,ee),{isSelected:oe,select:y,selectAll:n,toggleSelect:I,someSelected:w,allSelected:K}=cl(c,{allItems:S,currentPage:S}),{isExpanded:Ie,toggleExpand:Ge}=fl(c),Me=ze(()=>U(S.value));vl({page:d,itemsPerPage:i,sortBy:v,groupBy:T,search:Re(c,"search")}),Ut("v-data-table",{toggleSort:z,sortBy:v}),pt({VDataTableRows:{hideNoData:Re(c,"hideNoData"),noDataText:Re(c,"noDataText"),loading:Re(c,"loading"),loadingText:Re(c,"loadingText")}});const re=ze(()=>({page:d.value,itemsPerPage:i.value,sortBy:v.value,pageCount:Y.value,toggleSort:z,setItemsPerPage:u,someSelected:w.value,allSelected:K.value,isSelected:oe,select:y,selectAll:n,toggleSelect:I,isExpanded:Ie,toggleExpand:Ge,isGroupOpen:P,toggleGroup:M,items:Me.value.map(xe=>xe.raw),internalItems:Me.value,groupedItems:Q.value,columns:_.value,headers:A.value}));jt(()=>{const xe=ba.filterProps(c),Le=ha.filterProps(c),we=Va.filterProps(c),Ne=ka.filterProps(c);return e(ka,Ze({class:["v-data-table",{"v-data-table--loading":c.loading},c.class],style:c.style},Ne),{top:()=>{var ve;return(ve=r.top)==null?void 0:ve.call(r,re.value)},default:()=>{var ve,Ae,Se,Ee,be,de;return r.default?r.default(re.value):e(q,null,[(ve=r.colgroup)==null?void 0:ve.call(r,re.value),e("thead",{class:"v-data-table__thead",role:"rowgroup"},[e(ha,Ze(Le,{sticky:c.fixedHeader}),r)]),(Ae=r.thead)==null?void 0:Ae.call(r,re.value),e("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Se=r["body.prepend"])==null?void 0:Se.call(r,re.value),r.body?r.body(re.value):e(Va,Ze(f,we,{items:Q.value}),r),(Ee=r["body.append"])==null?void 0:Ee.call(r,re.value)]),(be=r.tbody)==null?void 0:be.call(r,re.value),(de=r.tfoot)==null?void 0:de.call(r,re.value)])},bottom:()=>r.bottom?r.bottom(re.value):e(ba,xe,{prepend:r["footer.prepend"]})})})}}),Cl=ce({__name:"DataTableItemPanel",props:se({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:se(["openActions","showForm"],["update:modelValue"]),setup(c,{emit:N}){const f=N,r=pe(c,"modelValue"),T=D(),v=_e(),g=D(),t=D(!1),d=_=>{const A={AdminLayoutUUID:_.AdminLayoutUUID,Limit:1,RegistrationUUID:r.value.RegistrationUUID};v.searchConventionRegistrations(r.value.ConventionUUID,A).then(S=>{S&&S.Total>0&&(T.value=S.Registrations[0],g.value=_,t.value=!0)})},i=_=>{f("openActions",_)},C=(_,A,S)=>{f("showForm",_,A,S)};return(_,A)=>(s(),V("div",null,[_.layouts?(s(),b(pa,{key:0},{default:a(()=>[(s(!0),V(q,null,ue(_.layouts,S=>(s(),b(Ye,{key:S.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:a(()=>[e(Ba,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:a(()=>[e(X,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:z=>d(S)},{default:a(()=>[x(L(S.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):F("",!0),t.value&&g.value&&T.value?(s(),b(Ua,{key:1,modelValue:t.value,"onUpdate:modelValue":A[2]||(A[2]=S=>t.value=S),"hide-extension":!0,fullscreen:!0,title:`#${T.value.Reference} ${T.value.User.DisplayName} - ${g.value.Name} `,scrollable:!0,"card-class":"pa-0","card-style":"margin-bottom: -52px"},{default:a(()=>[e(_t,{accommodations:_.accommodations,convention:_.convention,extras:_.extras,forms:_.forms,interests:_.interests,tickets:_.tickets,venues:_.venues,layout:g.value,"onUpdate:layout":A[0]||(A[0]=S=>g.value=S),modelValue:T.value,"onUpdate:modelValue":A[1]||(A[1]=S=>T.value=S),onOpenActions:i,onShowForm:C},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):F("",!0)]))}}),Ol={class:"text-grey-lighten-1"},Ml={key:0,class:"mb-2"},Ll=G("strong",null,"Email",-1),wl=G("br",null,null,-1),Nl={key:1,class:"mb-2"},Fl=G("strong",null,"Telegram",-1),Pl=G("br",null,null,-1),$l={key:0,class:"text-blue text-center"},Yl={key:1,class:"text-red text-center"},Gl={key:2,class:"text-orange text-center"},xl={key:3,class:"text-orange text-center"},Bl={key:4,class:"text-orange text-center"},Hl={key:5,class:"text-orange text-center"},ql={key:6,class:"text-green text-center"},zl={key:0},Kl={key:0},Jl=G("strong",null,"Total:",-1),Ql=ce({__name:"RegListRow",props:se({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:se(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(c,{emit:N}){const f=N,r=pe(c,"modelValue"),T=(t,d)=>{f("showForm",{registration:t,form:d})},v=t=>{f("openActions",t)},g=t=>{f("switchUser",t)};return(t,d)=>t.header.type==="ACCOMMODATION"&&t.accommodations.length>0&&t.item.raw[t.header.key]?(s(),b(It,{key:0,value:t.item.raw[t.header.key].Data,accommodations:t.accommodations,convention:t.convention,forms:t.forms,tickets:t.tickets,venues:t.venues,registration:t.item.raw[t.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):t.header.type==="EXTRAS"&&t.extras.length>0?(s(),b(At,{key:1,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(s(),b(St,{key:2,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(s(),b(Et,{key:3,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(s(),b(bt,{key:4,convention:t.convention,"show-controls":!1,modelValue:t.item.raw.registration,"onUpdate:modelValue":d[0]||(d[0]=i=>t.item.raw.registration=i)},null,8,["convention","modelValue"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(s(),V(q,{key:5},[G("ul",null,[(s(!0),V(q,null,ue(t.forms.filter(i=>i.Type===E(me).FORM_TYPE_ADMIN&&t.item.raw[t.header.key].findIndex(C=>C.Form.ID===i.ID)<0),i=>(s(),V("li",{key:i.Heading},[G("strong",Ol,L(i.Heading),1),e(X,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:C=>T(t.item.raw.registration,i)},null,8,["onClick"])]))),128))]),G("ul",null,[(s(!0),V(q,null,ue(t.item.raw[t.header.key],i=>(s(),V("li",{key:i.Heading},[G("strong",null,[x(L(i.Heading),1),i.Form.Type!==E(me).FORM_TYPE_ADMIN?(s(),V(q,{key:0},[x(": ")],64)):F("",!0)]),i.Form.Type!==E(me).FORM_TYPE_ADMIN?(s(),V("span",{key:0,class:gt(E(Gt)(i.Submission.Status))},L(E(xa)(i.Submission.Status)),3)):F("",!0),e(X,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:C=>T(i.Registration,i.Form)},null,8,["onClick"])]))),128))])],64)):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(s(),b(Ha,{key:6,class:"rounded-circle",src:t.item.raw[t.header.key],height:"32",width:"32"},null,8,["src"])):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_CONTACTS"?(s(),V(q,{key:7},[t.item.raw[t.header.key].email?(s(),V("p",Ml,[Ll,wl,x(L(t.item.raw[t.header.key].email),1)])):F("",!0),t.item.raw[t.header.key].telegram?(s(),V("p",Nl,[Fl,Pl,x(L(t.item.raw[t.header.key].telegram),1)])):F("",!0)],64)):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(s(),V(q,{key:8},[t.item.raw[t.header.key]=="NOT_REQUIRED"?(s(),V("div",$l,"No Payment Requested")):t.item.raw[t.header.key]=="MISSING_REQUIRED"?(s(),V("div",Yl,"Partner Payment Not Requested")):t.item.raw[t.header.key]=="AWAITING_PARTNER"?(s(),V("div",Gl,"Awaiting Partner Payment")):t.item.raw[t.header.key]=="ALL_REQUIRED"?(s(),V("div",xl,"Awaiting Payments")):t.item.raw[t.header.key]=="REQUIRED"?(s(),V("div",Bl,"Awaiting Payment")):t.item.raw[t.header.key]=="ADDITIONAL_REQUIRED"?(s(),V("div",Hl,"Awaiting Additional Payments")):(s(),V("div",ql,"Completed"))],64)):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(s(),V(q,{key:9},[e(X,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:d[1]||(d[1]=i=>v(t.item.raw[t.header.key]))}),E(Vl)(t.user)?(s(),b(X,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:d[2]||(d[2]=i=>g(t.item.raw[t.header.key]))})):F("",!0)],64)):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(s(),V(q,{key:10},[t.item.raw[t.header.key].length===1?(s(),V("em",zl," Not in a group ")):(s(),V(q,{key:1},[G("ul",null,[(s(!0),V(q,null,ue(t.item.raw[t.header.key],i=>(s(),V("li",{key:i.UUID,class:"ml-0"},[x(" #"+L(i.Reference)+" : "+L(i.Name)+" ",1),i.IsLeader?(s(),V("strong",Kl,"(Leader)")):F("",!0)]))),128))]),Jl,x(" "+L(t.item.raw[t.header.key].length),1)],64))],64)):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(s(),V(q,{key:11},[r.value.registration?(s(),b(Cl,{key:0,accommodations:t.accommodations,convention:t.convention,extras:t.extras,forms:t.forms,interests:t.interests,tickets:t.tickets,venues:t.venues,layouts:t.item.raw[t.header.key].Layouts,modelValue:r.value.registration,"onUpdate:modelValue":d[3]||(d[3]=i=>r.value.registration=i),onOpenActions:v,onShowForm:T},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):F("",!0)],64)):(s(),V(q,{key:12},[x(L(t.item.raw[t.header.key]),1)],64))}}),Ca=ce({__name:"RegistrationActionTabs",props:se({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const N=c,f=pe(c,"modelValue");return(r,T)=>(s(),b(za,Ze({modelValue:f.value,"onUpdate:modelValue":T[0]||(T[0]=v=>f.value=v)},N),{default:a(()=>[(s(!0),V(q,null,ue(r.tabs,v=>(s(),b(Ka,{value:v.value,key:v.value},{default:a(()=>[x(L(v.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),jl=(c=void 0,N)=>c===void 0?!1:va(c,fa.GROUP_TYPE_CONVENTION,N.ConventionUUID,N).EditPaymentTransactions,oa=c=>(La("data-v-8af8174d"),c=c(),wa(),c),Wl={class:"mb-4"},Xl={class:"v-row"},Zl={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},eo={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},ao={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},to={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},lo=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),oo={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},no=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),so={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},io=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),uo={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},ro=oa(()=>G("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),mo={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},co=ce({__name:"PaymentActions",props:se({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const N=D(!1),f=D(),r=D([]),T=D(new Date().getTime()),v=D(!1),g=pe(c,"modelValue"),t=D(ea(g.value));ye(g,()=>{t.value=ea(g.value)});const d=_e();d.getConvention(g.value.ConventionUUID).then(A=>{A&&(v.value=jl(ta(),A))});const i=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!1).then(A=>{A&&(r.value=A.PaymentTransactions,f.value=A.Registration,T.value=new Date().getTime())}).catch(()=>{})};i();const C=()=>{d.generateRegistrationCharges(g.value.RegistrationUUID,!0).then(A=>{A&&(r.value=A.PaymentTransactions,f.value=A.Registration,T.value=new Date().getTime())})},{totalCharges:_}=zt();return(A,S)=>(s(),b(Je,null,{default:a(()=>[e(Ta,null,{default:a(()=>[e(ga,null,{default:a(()=>[x(" Payments (#"+L(g.value.Reference)+" "+L(g.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),e(la,null,{default:a(()=>[f.value?(s(),V(q,{key:0},[G("h3",Wl,"#"+L(f.value.Reference)+" "+L(f.value.User.DisplayName),1),G("dl",Xl,[(s(!0),V(q,null,ue(r.value,z=>(s(),V(q,{key:z.PaymentTransactionUUID},[z.Type===E(Kt).PAYMENT_TRANSACTION_TYPE_CHARGE?(s(),V("dt",Zl,[G("div",eo,L(z.Description.split(":")[0])+": ",1),G("div",ao,L(z.Description.split(":")[1]),1)])):F("",!0),G("dd",to," £"+L(z.Amount),1)],64))),128)),lo,G("dd",oo," £"+L(E(_)(r.value)),1),no,G("dd",so," £"+L(f.value.Total),1),io,G("dd",uo," £"+L(f.value.Paid),1),ro,G("dd",mo," £"+L(f.value.Total-f.value.Paid),1)]),e(le,{class:"flex-row-reverse"},{default:a(()=>[e(h,{class:"text-right"},{default:a(()=>[e(X,{color:"primary",onClick:C},{default:a(()=>[x("Apply Charges")]),_:1})]),_:1}),!N.value&&v.value?(s(),b(h,{key:0},{default:a(()=>[e(X,{color:"secondary",onClick:S[0]||(S[0]=z=>N.value=!0)},{default:a(()=>[x("Transaction Entry")]),_:1})]),_:1})):F("",!0)]),_:1})],64)):F("",!0),e(ht,{"can-edit":v.value,registration:g.value,"show-editor":N.value,onCloseEditor:S[1]||(S[1]=z=>N.value=!1),updated:T.value,onChange:i},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),fo=Na(co,[["__scopeId","data-v-8af8174d"]]),vo=ce({__name:"RegistrationFormStatus",props:se({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const N=_e(),f=pe(c,"modelValue"),r=(T,v)=>{const g=f.value.Submissions.find(t=>t.SubmissionUUID==v);if(!g){T&&T("Submission not found");return}N.setSubmissionStatus(v,g.Status).then(t=>{t?(f.value.Submissions.forEach((d,i)=>{f.value.Submissions[i].Status=d.Status}),T&&T("Status Saved")):T&&T("Status not saved")}).catch(()=>{T&&T("Status not saved")})};return(T,v)=>(s(),b(Je,null,{default:a(()=>[e(Ta,null,{default:a(()=>[e(ga,null,{default:a(()=>[x("Status (#"+L(f.value.Reference)+" "+L(f.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(la,null,{default:a(()=>[e(pa,null,{default:a(()=>[(s(!0),V(q,null,ue(f.value.Submissions,g=>(s(),b(Ye,{key:g.SubmissionUUID,class:"pa-0"},{default:a(()=>[e(le,{class:"py-2 align-center"},{default:a(()=>[e(h,{cols:"9",sm:"10",md:"10",lg:"9"},{default:a(()=>{var t;return[e(ne,{modelValue:g.Status,"onUpdate:modelValue":d=>g.Status=d,items:E(Ea),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((t=T.forms.find(d=>d.FormUUID==g.FormUUID))==null?void 0:t.Name)||""},{selection:a(()=>[e(ja,{class:"mr-4 d-none d-sm-inline"},{default:a(()=>{var d;return[x(L((d=E(Ea).find(i=>i.value===g.Status))==null?void 0:d.icon),1)]}),_:2},1024),x(" "+L(E(xa)(g.Status)),1)]),item:a(({item:d,props:{onClick:i}})=>[e(Ye,{title:d.title,"prepend-icon":d.raw.icon,onClick:i},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),e(h,{cols:"3",sm:"2",md:"2",lg:"1"},{default:a(()=>[e(ca,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:t=>r(t.callback,g.SubmissionUUID)},null,8,["onClick"]),e(ca,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:t=>r(t.callback,g.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Uo=c=>(La("data-v-7d39acf0"),c=c(),wa(),c),po=Uo(()=>G("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),go={class:"mb-4"},To=ce({__name:"RegistrationTags",props:se({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const N=_e(),f=pe(c,"modelValue"),r=D(ea(f.value)),T=D(!1),v=D(r.value.Tags);ye(f,()=>{r.value=ea(f.value)});const g=({callback:t})=>{const d=[],i=[];r.value.Tags.forEach(C=>{v.value.find(A=>A.TagUUID===C.TagUUID)||d.push(C.TagUUID)}),v.value.forEach(C=>{r.value.Tags.find(A=>C.TagUUID===A.TagUUID)||i.push(C.TagUUID)}),N.updateRegistrationTags(d,i,r.value.RegistrationUUID).then(C=>{C?t&&(t("Tags Saved"),f.value.Tags=C.Tags):t&&t("Error Saving Tags")}).catch(()=>{t&&t("Error Saving Tags")})};return(t,d)=>(s(),b(Je,null,{default:a(()=>[e(Ta,null,{default:a(()=>[e(ga,null,{default:a(()=>[x("Tags (#"+L(r.value.Reference)+" "+L(r.value.User.DisplayName)+")",1)]),_:1})]),_:1}),e(la,null,{default:a(()=>[e(Wt,{class:"my-4"},{default:a(()=>[e(Xt,null,{default:a(()=>[x("Caution")]),_:1}),po]),_:1}),G("h3",go,"#"+L(r.value.Reference)+" "+L(r.value.User.DisplayName),1),e(Ja,{modelValue:r.value.Tags,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value.Tags=i),convention:r.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":T.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),e(Jt,{class:"px-4 align-start"},{default:a(()=>[e(qe,{label:"Show UUID",modelValue:T.value,"onUpdate:modelValue":d[1]||(d[1]=i=>T.value=i)},null,8,["modelValue"]),e(ca,{onClick:g,variant:"flat"})]),_:1})]),_:1}))}}),yo=Na(To,[["__scopeId","data-v-7d39acf0"]]),Oa=ce({__name:"RegistrationActionWindows",props:se({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:se(["update:registration"],["update:modelValue"]),setup(c,{emit:N}){const f=c,r=pe(c,"modelValue"),v=qa(f,N,void 0,void 0,"registration");return(g,t)=>(s(),b(Qa,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=d=>r.value=d),disabled:!0,touch:!1},{default:a(()=>[e(Ce,{value:"badges"},{default:a(()=>[r.value=="badges"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(Vt,{convention:g.convention,registration:E(v)},null,8,["convention","registration"])]),_:1})):F("",!0)]),_:1}),e(Ce,{value:"emails"},{default:a(()=>[r.value=="emails"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(kt,{registration:E(v)},null,8,["registration"])]),_:1})):F("",!0)]),_:1}),e(Ce,{value:"notes"},{default:a(()=>[r.value=="notes"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(Rt,{convention:g.convention,expanded:!1,registration:E(v)},null,8,["convention","registration"])]),_:1})):F("",!0)]),_:1}),e(Ce,{value:"payments"},{default:a(()=>[r.value=="payments"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(fo,{modelValue:E(v),"onUpdate:modelValue":t[0]||(t[0]=d=>Ke(v)?v.value=d:null),forms:g.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):F("",!0)]),_:1}),e(Ce,{value:"status"},{default:a(()=>[r.value=="status"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(vo,{modelValue:E(v),"onUpdate:modelValue":t[1]||(t[1]=d=>Ke(v)?v.value=d:null),forms:g.forms},null,8,["modelValue","forms"])]),_:1})):F("",!0)]),_:1}),e(Ce,{value:"tags"},{default:a(()=>[r.value=="tags"?(s(),b(fe,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[e(yo,{modelValue:E(v),"onUpdate:modelValue":t[2]||(t[2]=d=>Ke(v)?v.value=d:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):F("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Do=(c,N)=>c===void 0?!1:va(c,fa.GROUP_TYPE_CONVENTION,N.ConventionUUID,N).ViewPaymentTransactions,_o={key:0},Io={key:1},Ma=ce({__name:"RegistrationActions",props:se({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:se(["update:registration"],["update:modelValue"]),setup(c,{emit:N}){const f=c,r=pe(c,"modelValue"),v=qa(f,N,void 0,void 0,"registration"),g=D("notes"),t=ta(),d=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Do(t,f.convention)&&d.splice(2,0,{label:"Payments",value:"payments"}),(i,C)=>i.useDialog?(s(),V("div",_o,[e(Ua,{modelValue:r.value,"onUpdate:modelValue":C[3]||(C[3]=_=>r.value=_),title:i.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:a(()=>[e(Ca,{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=_=>g.value=_),tabs:d,"show-arrows":!0},null,8,["modelValue"])]),default:a(()=>[e(Oa,{modelValue:g.value,"onUpdate:modelValue":C[1]||(C[1]=_=>g.value=_),registration:E(v),"onUpdate:registration":C[2]||(C[2]=_=>Ke(v)?v.value=_:null),accommodations:i.accommodations,convention:i.convention,extras:i.extras,forms:i.forms,interests:i.interests,tabs:d,tickets:i.tickets,venues:i.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(s(),V("div",Io,[e(Ca,{modelValue:g.value,"onUpdate:modelValue":C[4]||(C[4]=_=>g.value=_),tabs:d,"show-arrows":!0},null,8,["modelValue"]),e(Oa,{modelValue:g.value,"onUpdate:modelValue":C[5]||(C[5]=_=>g.value=_),registration:E(v),"onUpdate:registration":C[6]||(C[6]=_=>Ke(v)?v.value=_:null),accommodations:i.accommodations,convention:i.convention,extras:i.extras,forms:i.forms,interests:i.interests,tabs:d,tickets:i.tickets,venues:i.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Ao=(c,N=500,f=!1)=>{let r;return(...T)=>{const g=function(){r=void 0,f||c.apply(void 0,T)},t=f&&!r;clearTimeout(r),r=setTimeout(g,N),t&&c.apply(void 0,T)}},Xa=(c,N)=>{c.forEach(f=>{f.Items.forEach(r=>{(r.SectionField==null||r.SectionField.Field==null)&&N.find(T=>{T.Sections.find(v=>{if(v.Fields){const g=v.Fields.find(t=>t.SectionFieldUUID===r.SectionFieldUUID);if(g)return r.SectionField=g,!0}})})})})},So={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Eo={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},bo={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},ho={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Vo={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},ko={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Ro={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Co={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Oo={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Mo={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Lo={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},wo={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},No={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Fo={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Po={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},$o={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Yo={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Go={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},xo={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Bo={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Ho={red:So,pink:Eo,purple:bo,deepPurple:ho,indigo:Vo,blue:ko,lightBlue:Ro,cyan:Co,teal:Oo,green:Mo,lightGreen:Lo,lime:wo,yellow:No,amber:Fo,orange:Po,deepOrange:$o,brown:Yo,blueGrey:Go,grey:xo,shades:Bo},qo=G("h4",null,"Grid Size (Max 12)",-1),zo={key:0,class:"text-warning text-right pl-1"},Ko=ce({__name:"EditAdminLayout",props:se({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:se(["change","delete"],["update:modelValue"]),setup(c,{emit:N}){const f=pe(c,"modelValue"),r=D([]),T=_e(),v=N,g=D(Object.assign({},...c.layouts.map(P=>P.Panels.map(M=>M.Items.map(U=>{if(!U.Meta)return{};const Y={};return Object.entries(U.Meta).forEach(u=>{Array.isArray(u[1])?(Y[`${U.LayoutItemUUID}.${u[0]}`]=[],u[1].forEach(Q=>{Y[`${U.LayoutItemUUID}.${u[0]}`].push(Q.toString())})):u[1]!==void 0&&u[1]!==null&&(Y[`${U.LayoutItemUUID}.${u[0]}`]=[u[1].toString()])}),Y}))).flat(2))),t=D(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),d=D(!1),i=D([]);T.getConventionTags(c.convention.ConventionUUID).then(P=>{P&&(i.value=P)}).catch(()=>{});const C=()=>({ID:0,LayoutPanelUUID:De(),AdminLayoutID:f.value.ID,AdminLayoutUUID:f.value.AdminLayoutUUID,Name:"",Order:f.value.Panels.length+1,Items:[],PanelStyle:Sa.PANEL_STYLE_FLEX,RequiredFormType:me.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),_=P=>()=>({ID:0,LayoutItemUUID:De(),LayoutPanelID:P.ID,LayoutPanelUUID:P.LayoutPanelUUID,Label:"",SourceType:Oe.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:P.Items.length+1,DefaultSort:!1,Meta:{}}),A=(P,M)=>{P.Meta[M]=g.value[`${P.LayoutItemUUID}.${M}`]},S=P=>{const M=r.value.find(U=>U.value===P.SectionFieldUUID);M&&(P.SectionFieldID=M.object.ID,P.SectionField=M.object)};T.getConventionForms(f.value.ConventionUUID).then(P=>{P&&(P.forEach(M=>M.Sections.forEach(U=>U.Fields&&r.value.push(...U.Fields.map(Y=>{var Q;return{title:`${M.Name} - ${U.Name} - ${(Q=Y.Field)==null?void 0:Q.Name}`,value:Y.SectionFieldUUID,object:Y}})))),r.value.sort(Pt("title")),Xa(f.value.Panels,P))});const z=ze(()=>{switch(f.value.Type){case Ue.ADMIN_LAYOUT_PANELS:return"Panels";case Ue.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});ye(f,()=>{v("change")},{deep:!0});const ee=ze(()=>{const P=/([a-zA-Z]+)(\d+)/;return Object.entries(Ho).map(([M,U])=>Object.entries(U).map(([Y,u])=>{const Q=P.exec(Y);return!Q||Q.length<3?void 0:{Title:`${ra(M).split(/(?=[A-Z])/).join(" ")} ${ra(Q[1])} ${ra(Q[2])}`,CSSName:`${M}-${Q[1]}-${Q[2]}`,Value:u}})).flat().filter(M=>!!M).sort((M,U)=>M.Title>U.Title?1:M.Title==U.Title?0:-1)});return(P,M)=>(s(),b(fe,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[e(le,null,{default:a(()=>[e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ae,{modelValue:f.value.Name,"onUpdate:modelValue":M[0]||(M[0]=U=>f.value.Name=U),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ne,{modelValue:f.value.Type,"onUpdate:modelValue":M[1]||(M[1]=U=>f.value.Type=U),label:"Layout Type",items:E(Ct),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),f.value.Type==E(Ue).ADMIN_LAYOUT_PANELS?(s(),b(h,{key:0,cols:"12",sm:"6"},{default:a(()=>[e(ne,{modelValue:f.value.RunnerLayoutUUID,"onUpdate:modelValue":M[2]||(M[2]=U=>f.value.RunnerLayoutUUID=U),clearable:!0,items:P.layouts.filter(U=>U.Type===E(Ue).ADMIN_LAYOUT_PANELS)||[],multiple:!1,label:"Runner Display (Optional)","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})):F("",!0)]),_:1}),e(le,null,{default:a(()=>[e(h,null,{default:a(()=>[e(ma,{modelValue:f.value.Panels,"onUpdate:modelValue":M[3]||(M[3]=U=>f.value.Panels=U),"new-item":C,closeable:!1,title:z.value,label:"Name","slot-name-prefix":"panel"},aa({_:2},[ue(f.value.Panels,(U,Y)=>({name:`panel_${Y}`,fn:a(()=>[e(fe,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[e(le,null,{default:a(()=>[e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ae,{modelValue:U.Name,"onUpdate:modelValue":u=>U.Name=u,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),f.value.Type===E(Ue).ADMIN_LAYOUT_PANELS?(s(),b(h,{key:0,cols:"12",sm:"6"},{default:a(()=>[e(ne,{modelValue:U.PanelStyle,"onUpdate:modelValue":u=>U.PanelStyle=u,items:E(Ot),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):F("",!0),e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ne,{modelValue:U.RequiredFormType,"onUpdate:modelValue":u=>U.RequiredFormType=u,items:E(Yt),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:a(()=>[e(Ul,{label:"Required Groups",variant:"outlined",modelValue:U.RequiredGroupMemberships,"onUpdate:modelValue":u=>U.RequiredGroupMemberships=u,convention:f.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:a(()=>[e(Ja,{label:"Registration Tags",variant:"outlined",modelValue:U.RequiredRegistrationTags,"onUpdate:modelValue":u=>U.RequiredRegistrationTags=u,convention:f.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),f.value.Type===E(Ue).ADMIN_LAYOUT_PANELS&&U.PanelStyle===E(Sa).PANEL_STYLE_FLEX?(s(),b(le,{key:0},{default:a(()=>[e(h,{cols:"12",class:"py-0 my-0"},{default:a(()=>[qo]),_:1}),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols,"onUpdate:modelValue":u=>U.Meta.cols=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols_xs,"onUpdate:modelValue":u=>U.Meta.cols_xs=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols_sm,"onUpdate:modelValue":u=>U.Meta.cols_sm=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols_md,"onUpdate:modelValue":u=>U.Meta.cols_md=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols_lg,"onUpdate:modelValue":u=>U.Meta.cols_lg=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ae,{modelValue:U.Meta.cols_xl,"onUpdate:modelValue":u=>U.Meta.cols_xl=u,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0)]),_:2},1024),e(ma,{modelValue:U.Items,"onUpdate:modelValue":u=>U.Items=u,"new-item":_(U),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},aa({_:2},[ue(U.Items,(u,Q)=>({name:`item_${Q}`,fn:a(()=>[e(fe,{class:"px-0 mx-0",fluid:!0},{default:a(()=>{var oe,y;return[e(le,null,{default:a(()=>[e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ae,{modelValue:u.Label,"onUpdate:modelValue":n=>u.Label=n,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(le,null,{default:a(()=>[e(h,{cols:"12",sm:"6"},{default:a(()=>[e(ne,{modelValue:u.SourceType,"onUpdate:modelValue":n=>u.SourceType=n,label:"Source Type",items:E(Mt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(h,{cols:"12",sm:"6"},{default:a(()=>[u.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(s(),b(ne,{key:0,modelValue:u.SectionFieldUUID,"onUpdate:modelValue":n=>u.SectionFieldUUID=n,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:n=>S(u)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):u.SourceType==="LAYOUT_ITEM_SOURCE_META"?(s(),b(ne,{key:1,modelValue:u.MetaField,"onUpdate:modelValue":n=>u.MetaField=n,label:"Miscellaneous Data",items:E(Lt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):u.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(s(),b(ne,{key:2,modelValue:u.UserField,"onUpdate:modelValue":n=>u.UserField=n,label:"User Profile Data",items:E(wt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):F("",!0)]),_:2},1024)]),_:2},1024),P.layouts&&u.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((y=(oe=u.SectionField)==null?void 0:oe.Field)==null?void 0:y.Type)===E(Ga).TEXT?(s(),b(le,{key:0},{default:a(()=>[e(h,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:a(()=>[e(qe,{modelValue:u.Meta.DirectEdit,"onUpdate:modelValue":n=>u.Meta.DirectEdit=n,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:a(()=>[e(ne,{modelValue:u.Meta.DirectEditPermission,"onUpdate:modelValue":n=>u.Meta.DirectEditPermission=n,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0),P.layouts&&u.SourceType==="LAYOUT_ITEM_SOURCE_META"&&u.MetaField===E(H).META_DATA_SOURCE_BADGE_DISPLAY?(s(),b(le,{key:1},{default:a(()=>[e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(qe,{modelValue:u.Meta.HideDownloadButton,"onUpdate:modelValue":n=>u.Meta.HideDownloadButton=n,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(qe,{modelValue:u.Meta.HideNFCButton,"onUpdate:modelValue":n=>u.Meta.HideNFCButton=n,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0),P.layouts&&u.SourceType==="LAYOUT_ITEM_SOURCE_META"&&u.MetaField===E(H).META_DATA_SOURCE_DATA_LAYOUT?(s(),b(le,{key:2},{default:a(()=>[e(h,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[e(ne,{modelValue:g.value[`${u.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[n=>g.value[`${u.LayoutItemUUID}.LayoutUUID`]=n,n=>A(u,"LayoutUUID")],clearable:!0,items:P.layouts.filter(n=>n.Type===E(Ue).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):F("",!0),P.layouts&&u.SourceType==="LAYOUT_ITEM_SOURCE_META"&&u.MetaField===E(H).META_DATA_SOURCE_TAGS?(s(),b(le,{key:3},{default:a(()=>[e(h,{cols:"6",sm:"6",md:"6",lg:"6"},{default:a(()=>[e(ne,{modelValue:g.value[`${u.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[n=>g.value[`${u.LayoutItemUUID}.Tags`]=n,n=>A(u,"Tags")],clearable:!0,items:i.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!g.value[u.LayoutItemUUID]||g.value[u.LayoutItemUUID].length===0?(s(),V("small",zo," Will show all tags ")):F("",!0)]),_:2},1024),e(h,{cols:"6"},{default:a(()=>[e(ne,{modelValue:u.Meta.TagColour,"onUpdate:modelValue":n=>u.Meta.TagColour=n,items:ee.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:a(({item:n})=>[e(X,{size:"x-small",color:n.raw.Value,class:"mr-2"},null,8,["color"]),x(" "+L(n.title),1)]),item:a(({props:n,item:I})=>[e(Ye,Pa(Fa(n)),{prepend:a(()=>[e(X,{size:"x-small",color:I.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):F("",!0),f.value.Type===E(Ue).ADMIN_LAYOUT_TABLE&&(u.SourceType!==E(Oe).LAYOUT_ITEM_SOURCE_META||u.MetaField!==E(H).META_DATA_SOURCE_DATA_LAYOUT)?(s(),b(le,{key:4},{default:a(()=>[e(h,null,{default:a(()=>[e(qe,{modelValue:u.DefaultSort,"onUpdate:modelValue":n=>u.DefaultSort=n,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),e(le,null,{default:a(()=>[e(h,null,{default:a(()=>[e(X,{onClick:M[4]||(M[4]=U=>d.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:a(()=>[x("Delete Layout")]),_:1})]),_:1})]),_:1}),d.value?(s(),b(_l,{key:0,modelValue:d.value,"onUpdate:modelValue":M[5]||(M[5]=U=>d.value=U),message:t.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:M[6]||(M[6]=U=>v("delete"))},null,8,["modelValue","message"])):F("",!0)]),_:1}))}}),Jo=ce({__name:"EditAdminLayouts",props:se({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:se(["save"],["update:modelValue"]),setup(c,{emit:N}){const f=pe(c,"modelValue"),r=N,T=D([]),v=D([]),g=D([]),t=_e(),d=()=>({ID:0,AdminLayoutUUID:De(),ConventionID:c.convention.ID,ConventionUUID:c.convention.ConventionUUID,Name:"New Layout",Type:Ue.ADMIN_LAYOUT_PANELS,Panels:[]}),i=()=>{let _=!1;[...new Set(g.value)].forEach(S=>{const z=T.value.findIndex(ee=>ee.AdminLayoutUUID===S);z<0||z>=T.value.length||(t.saveAdminLayout(T.value[z]).then(ee=>{ee&&T.value.splice(z,1,ee)}).catch(()=>{}),_=!0)}),v.value.forEach(S=>{t.deleteAdminLayout(S).catch(()=>{})}),v.value=[],g.value=[],_&&r("save")},C=_=>{const A=T.value.findIndex(S=>S.AdminLayoutUUID===_.AdminLayoutUUID);A<0||A>=T.value.length||(T.value[A].ID>0&&v.value.push(_.AdminLayoutUUID),T.value.splice(A,1))};return t.getConventionAdminLayouts(c.convention.ConventionUUID).then(_=>{_&&(T.value=_)}).catch(()=>[]),(_,A)=>(s(),b(Wa,{modelValue:f.value,"onUpdate:modelValue":A[2]||(A[2]=S=>f.value=S),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:a(()=>[e(ma,{modelValue:T.value,"onUpdate:modelValue":A[0]||(A[0]=S=>T.value=S),"new-item":d,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:_.title,label:"Name","slot-name-prefix":"panel",onClose:A[1]||(A[1]=S=>f.value=!1),onSave:i},aa({_:2},[ue(T.value,(S,z)=>({name:`panel_${z}`,fn:a(()=>[e(fe,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[e(le,null,{default:a(()=>[e(h,{cols:"12"},{default:a(()=>[e(Ko,{modelValue:T.value[z],"onUpdate:modelValue":ee=>T.value[z]=ee,convention:_.convention,layouts:T.value,onChange:ee=>g.value.push(S.AdminLayoutUUID),onDelete:ee=>C(S)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),Qo=["href","onClick"],jo=G("strong",null,"Expires:",-1),Wo=ce({__name:"OperatorSocket",setup(c){const N=_e(),f=ta(),r=Al(),T=D(!1),v=Nt({mode:"host",wsUri:N.getRunnerSocketURL()}),g=Ft(),t=D(!1),d=D(!1),i=D([]),C=$a(),_=D("Connecting"),A=D([{title:"- Select Duration -",value:-1},{title:"No Expiry",value:0},{title:"5 Minutes",value:5*60*1e3},{title:"30 Minutes",value:30*60*1e3},{title:"1 Hour",value:60*60*1e3},{title:"1.5 Hours",value:90*60*1e3},{title:"2 Hours",value:120*60*1e3},{title:"3 Hours",value:180*60*1e3},{title:"4 Hours",value:240*60*1e3},{title:"5 Hours",value:300*60*1e3},{title:"6 Hours",value:360*60*1e3}]),S=y=>{if(y.editing=!1,y.timer&&clearTimeout(y.timer),!y.selectedDuration){y.expires=void 0,y.timer=void 0;return}const n=new Date;n.setTime(new Date().getTime()+y.selectedDuration),y.expires=n,z(y),Y()},z=y=>{if(y.expires){if(y.timer&&clearTimeout(y.timer),typeof y.expires=="number"){const n=new Date;n.setTime(y.expires),y.expires=n}y.expires&&"getTime"in y.expires&&(y.timer=setTimeout(()=>{y.timer&&clearTimeout(y.timer),M(y)},y.expires.getTime()-Date.now()))}};v.on("authenticated",()=>{t.value=!0;const y={Key:"",Mode:"host",UserUUID:(f==null?void 0:f.UserUUID)||""},n={Command:"SET_MODE",Params:new Map,Data:JSON.stringify(y)};v.JSON(n),i.value.forEach(I=>{const w={Key:I.key},K={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify(w)};v.JSON(K)})}),v.on("auth_failed",()=>{t.value=!1,_.value="Access Denied"}),v.on("close",()=>{_.value="Disconnected"}),v.on("open",()=>{const y=g.getTokenByService("GrazeAPI");_.value="Authenticating",v.send(`AUTH ${y==null?void 0:y.AccessToken}`)}),v.on("runner_connected",y=>{const n=y,I=i.value.find(K=>K.key==n.Key);if(!I){ee(n.Key,n.UserUUID);return}const w=hl();w.DisplayName=n.DisplayName,w.UserUUID=n.UserUUID,I.users.find(K=>K.UserUUID==w.UserUUID)||I.users.push(w)}),v.on("runner_disconnected",y=>{const n=y,I=i.value.find(K=>K.key==n.Key);if(!I)return;const w=I.users.findIndex(K=>K.UserUUID==n.UserUUID);w<0||I.users.splice(w,1)}),v.on("started",()=>{_.value="Connected"}),Tt(()=>{U(),Ya.getInstance().on("layout_opened",n=>{const I=n;if(!v||!t.value||!I||!I.AdminLayoutUUID||!I.RegistrationUUID)return;const w={Command:"OPEN_LAYOUT",Params:new Map,Data:JSON.stringify(I)};v.JSON(w)})}),yt(()=>{v.destroy()});const ee=(y,n)=>{const w={Command:"KICK_RUNNER",Params:new Map,Data:JSON.stringify({DisplayName:"",Key:y,UserUUID:n})};v.JSON(w)},P=()=>{const y=De(),I={Command:"ADD_KEY",Params:new Map,Data:JSON.stringify({Key:y})};v.JSON(I),i.value.push({key:y,name:"New Session",users:[]}),Y()},M=y=>{const n=i.value.findIndex(K=>K==y);if(n<0)return;const I={Key:y.key},w={Command:"REMOVE_KEY",Params:new Map,Data:JSON.stringify(I)};v.JSON(w),i.value.splice(n,1),Y()},U=()=>{const y=sessionStorage.getItem("collaboration.sessions");y&&(i.value=JSON.parse(y),i.value.forEach(n=>{typeof n.expires!="number"&&(n.expires=0),z(n)}))},Y=()=>{const y=[];i.value.forEach(n=>{y.push({name:n.name,expires:typeof n.expires=="number"?n.expires:n.expires?n.expires.getTime():0,key:n.key,users:[]})}),sessionStorage.setItem("collaboration.sessions",JSON.stringify(y))},u=y=>{const n=C.resolve({name:"RunnerView",params:{user:f==null?void 0:f.UserUUID,session:y.key}}),I=new URL(location.href);return I.pathname=n.href,I.toString()},Q=y=>{const n=u(y);return Il(n),d.value=!0,n},oe=y=>{if(typeof y=="number"){const K=new Date;K.setTime(y),y=K}const n=y.getTime()-Date.now(),I=Math.floor(n/(1e3*60*60)),w=Math.floor(n%(1e3*60*60)/(1e3*60));return I==0&&w==0?`${Math.floor(n%6e4/1e3)}s`:`${I}hr${I!=1?"s":""} ${w}min${w!=1?"s":""}`};return(y,n)=>t.value?(s(),V(q,{key:0},[e(X,{icon:"mdi:mdi-link-variant",onClick:n[0]||(n[0]=I=>T.value=!0)}),e(Ua,{modelValue:T.value,"onUpdate:modelValue":n[4]||(n[4]=I=>T.value=I),"hide-extension":!0,"show-save-action":!1,"show-delete-action":!1,"show-reset-action":!1,title:"Collaboration",subtitle:`Connection Status: ${_.value}`},{actions:a(()=>[e(da),e(X,{color:"primary",variant:"flat","prepend-icon":"mdi:mdi-link-variant-plus",onClick:P},{default:a(()=>[x(" Create Session ")]),_:1})]),default:a(()=>[e(pa,null,{default:a(()=>[(s(!0),V(q,null,ue(i.value,I=>(s(),b(Bt,{key:I.key,value:I.key},{activator:a(({props:w})=>[e(Ye,Pa(Fa(w)),{default:a(()=>[e(Ba,null,{default:a(()=>[e(le,null,{default:a(()=>[e(h,{style:{"max-width":"84px"}},{default:a(()=>[G("a",{href:Q(I),onClick:$e(K=>Q(I),["prevent","stop"]),class:"text-white text-decoration-none"},[e(X,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant",color:"success",class:"mr-2",title:"Copy Link"})],8,Qo),e(X,{variant:"flat",size:"x-small",icon:"mdi:mdi-link-variant-remove",color:"error",class:"mr-2",title:"Terminate",onClick:$e(K=>M(I),["stop"])},null,8,["onClick"])]),_:2},1024),e(h,null,{default:a(()=>[e(ae,{modelValue:I.name,"onUpdate:modelValue":K=>I.name=K,"hide-details":"",variant:"plain",density:"compact",onChange:Y,onClick:n[1]||(n[1]=$e(()=>{},["stop"])),onKeydown:n[2]||(n[2]=$e(()=>{},["stop"]))},{append:a(()=>[x(L(I.users.length),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),default:a(()=>[I.editing?(s(),b(ne,{key:0,label:"Duration",items:A.value,density:"compact","hide-details":!0,modelValue:I.selectedDuration,"onUpdate:modelValue":[w=>I.selectedDuration=w,w=>S(I)],modelModifiers:{number:!0}},null,8,["items","modelValue","onUpdate:modelValue"])):I.expires?(s(),V(q,{key:1},[G("small",null,[jo,x(" "+L(oe(I.expires)),1)]),e(X,{onClick:w=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:a(()=>[x(" (Change Expiry) ")]),_:2},1032,["onClick"])],64)):(s(),b(X,{key:2,onClick:w=>{I.selectedDuration=-1,I.editing=!0},variant:"text",color:"primary",density:"compact",size:"small"},{default:a(()=>[x(" (Set Expiry) ")]),_:2},1032,["onClick"])),(s(!0),V(q,null,ue(I.users,w=>(s(),b(Ye,{key:`${I.key}.${w.UserUUID}`},{append:a(()=>[e(X,{variant:"flat",size:"small",icon:"mdi:mdi-account-network-off",title:"Disconnect User",onClick:K=>ee(I.key,w.UserUUID)},null,8,["onClick"])]),prepend:a(()=>[e(Ha,{src:E(r)(w.UserUUID),class:"rounded-circle mr-2 pt-4 d-inline-block",height:"32",width:"32"},null,8,["src"])]),default:a(()=>[x(" "+L(w.DisplayName),1)]),_:2},1024))),128))]),_:2},1032,["value"]))),128))]),_:1}),e(Qt,{modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=I=>d.value=I),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"])]),_:1},8,["modelValue","subtitle"])],64)):F("",!0)}}),Xo=["colspan"],Zo={style:{opacity:"var(--v-medium-emphasis-opacity)"}},Jn=ce({__name:"RegistrationsView",emits:["pageTitle"],setup(c,{emit:N}){var Ia;const f=qt();N("pageTitle","Registration Manager");const T=Dt(),v=$a(),g=D(!0);let t=((Ia=T.params.convention)==null?void 0:Ia.toString())||"";const d=D({ID:0,ConventionUUID:De(),OrganisationID:0,OrganisationUUID:Xe,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),i=_e(),C=Ya.getInstance(),_=D([]),A=D({ID:0,AdminLayoutUUID:De(),ConventionID:d.value.ID,ConventionUUID:d.value.ConventionUUID,Name:"Registration Table",RunnerLayoutUUID:Xe,Type:Ue.ADMIN_LAYOUT_TABLE,Panels:[]}),S=D([]),z=D([]),ee=D([]),P=D([]),M=D([]),U=D([]),Y=D(1),u=D(10),Q=D([]),oe=D(0),y=D(!1),n=D(""),I=D(""),w=D(""),K=D(""),Ie=D({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),Ge=D({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),Me=D({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),re=D({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),xe=D(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",Ie.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",Ge.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Me.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",re.value]])),Le=D(""),we=D(""),Ne=D([]),ve=D([]),Ae=D([]),Se=D([]),Ee=D([]),be=D([]),de=D(0),ie=D(),he=D(!1),ya=D(!1),Za=D(!1),Qe=D(),Da=D(),Be=D(),Fe=D(!1),et=ta(),te=Ao(()=>{I.value=Date.now().toString()});ye(n,o=>{const l=U.value.find(p=>p.uuid===o);if(l){const p=l.headers.find(m=>m.defaultSort===!0);p&&(Q.value=[{key:p.key,order:"asc"}],Ne.value=[{key:p.key,order:"asc"}])}je({page:1,itemsPerPage:u.value,sortBy:Ne.value})}),ye(de,o=>{o===8&&_a()}),ye(Le,()=>{te()}),ye(we,()=>{te()});const at=()=>{S.value=[],ee.value=[],P.value=[],U.value=[];try{i.getConventionAdminLayoutByName(d.value.ConventionUUID,"Registration Table").then(o=>{de.value+=1,o?A.value=o:(A.value.ConventionID=d.value.ID,A.value.ConventionUUID=d.value.ConventionUUID)})}catch{A.value.ConventionID=d.value.ID,A.value.ConventionUUID=d.value.ConventionUUID}try{i.getConventionAdminLayouts(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(o.forEach(l=>{l.Panels.sort((p,m)=>p.Order>m.Order?1:p.Order===m.Order?0:-1),l.Panels.forEach(p=>{p.Items.sort((m,j)=>m.Order>j.Order?1:m.Order===j.Order?0:-1)})}),ee.value=o)})}catch{}try{i.getConventionForms(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(S.value=o)})}catch{}try{i.getConventionAccommodation(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(ve.value=o)})}catch{}try{i.getConventionVenues(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(be.value=o)})}catch{}try{i.getConventionExtras(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(Ae.value=o)})}catch{}try{i.getConventionInterests(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(Se.value=o)})}catch{}try{i.getConventionTickets(d.value.ConventionUUID).then(o=>{de.value+=1,o&&(Ee.value=o)})}catch{}try{i.getConventionGroups(d.value.ConventionUUID).then(o=>{o&&(z.value=o.sort((l,p)=>l.Name.localeCompare(p.Name)))})}catch{}try{i.getConventionTags(d.value.ConventionUUID).then(o=>{o&&(M.value=o.sort((l,p)=>l.Title.localeCompare(p.Title)).map(l=>(l.Title=`${l.Title} [${l.Key}]`,l)))})}catch{}},je=({page:o,itemsPerPage:l,sortBy:p})=>{g.value=!0,Y.value=o,Q.value=p;const m=U.value.find(W=>W.uuid==n.value),j=m==null?void 0:m.layout.Items;let J="",Ve="";if(p&&j&&p.length>=1){const W=j.find(sa=>sa.LayoutItemUUID==p[0].key);switch(Ve=p[0].order||"asc",W==null?void 0:W.MetaField){case H.META_DATA_SOURCE_ACCOMMODATION_FORM:J="submission.status";break;case H.META_DATA_SOURCE_BADGE_FORM:J="submission.status";break;case H.META_DATA_SOURCE_DEALER_FORM:J="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_FORM:J="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:J="reference";break;case H.META_DATA_SOURCE_SUBMISSION_DATE:J="created";break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:J="submission.status";break}switch(W==null?void 0:W.UserField){case Z.USER_DATA_SOURCE_DISPLAY_NAME:J="user.display_name";break;case Z.USER_DATA_SOURCE_EMAIL:J="user.email";break;case Z.USER_DATA_SOURCE_FIRST_NAME:J="user.firstname";break;case Z.USER_DATA_SOURCE_HANDLE:J="user.handle";break;case Z.USER_DATA_SOURCE_LAST_NAME:J="user.lastname";break}}try{const W={Direction:Ve,Limit:l,Offset:(o-1)*l,Order:J};m&&(W.PanelUUID=m==null?void 0:m.layout.LayoutPanelUUID),(m==null?void 0:m.layout.RequiredFormType)===me.FORM_TYPE_ACCOMMODATION&&(W.Accommodation=!0),(m==null?void 0:m.layout.RequiredFormType)===me.FORM_TYPE_BADGE&&(W.Badge=!0),(m==null?void 0:m.layout.RequiredFormType)===me.FORM_TYPE_DEALER&&(W.Dealer=!0),(m==null?void 0:m.layout.RequiredFormType)===me.FORM_TYPE_REGISTRATION&&(W.Registration=!0),W.GroupUUID=Le.value||Xe,W.TagUUID=we.value||Xe,W.Email=K.value,W.Reference=w.value,W.FieldValues=Array.from(xe.value.values());const sa=I.value;i.searchConventionRegistrations(d.value.ConventionUUID,W).then(ia=>{ia&&sa===I.value&&(oe.value=ia.Total,P.value=ia.Registrations,U.value.forEach(ua=>{const ct=ua.layout;ua.items=P.value.map(R=>{const We=[];let ge;R.Leader?ge=R:ge=R.Primary,We.push({Name:ge.User.DisplayName,UUID:ge.UserUUID,UserUUID:ge.User.UserUUID,IsLeader:!0,Reference:ge.Reference,Paid:ge.Paid,Total:ge.Total}),We.push(...ge.Members.map(Te=>({Name:Te.User.DisplayName,UUID:Te.UserUUID,UserUUID:Te.User.UserUUID,IsLeader:!1,Reference:Te.Reference,Paid:Te.Paid,Total:Te.Total})));const $={};return ua.headers.forEach(Te=>{var Aa;const k=ct.Items.find(He=>He.LayoutItemUUID===Te.key);if(k){if(k.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&k.SectionField)R.Submissions.forEach(He=>{const Pe=He.Data.find(O=>O.SectionFieldUUID===k.SectionFieldUUID);if(Pe){Te.type===Ga.ACCOMMODATION?$[k.LayoutItemUUID]={Data:Pe.Data,Registration:R}:$[k.LayoutItemUUID]=Pe.Data;return}});else if(k.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&k.UserField)switch(k.UserField){case Z.USER_DATA_SOURCE_AVATAR:$[k.LayoutItemUUID]=f.GetProfileImageURL(R.UserUUID);break;case Z.USER_DATA_SOURCE_CONTACTS:$[k.LayoutItemUUID]={},R.User.Generated&&R.User.Generated.telegram_handle&&($[k.LayoutItemUUID].telegram=`@${R.User.Generated.telegram_handle}`),$[k.LayoutItemUUID].email=R.User.Additional.Email;break;case Z.USER_DATA_SOURCE_DISPLAY_NAME:$[k.LayoutItemUUID]=R.User.DisplayName;break;case Z.USER_DATA_SOURCE_EMAIL:$[k.LayoutItemUUID]=R.User.Additional.Email;break;case Z.USER_DATA_SOURCE_HANDLE:$[k.LayoutItemUUID]=R.User.Handle;break;case Z.USER_DATA_SOURCE_DATE_OF_BIRTH:$[k.LayoutItemUUID]=R.User.Additional.DOB;break;case Z.USER_DATA_SOURCE_FIRST_NAME:$[k.LayoutItemUUID]=R.User.Additional.FirstName;break;case Z.USER_DATA_SOURCE_LAST_NAME:$[k.LayoutItemUUID]=R.User.Additional.LastName;break;case Z.USER_DATA_SOURCE_TELEGRAM:R.User.Generated&&R.User.Generated.telegram_handle?$[k.LayoutItemUUID]=`@${R.User.Generated.telegram_handle}`:$[k.LayoutItemUUID]="";break}else if(k.SourceType==="LAYOUT_ITEM_SOURCE_META"&&k.MetaField){const He=(Aa=S.value.find(O=>O.Type===me.FORM_TYPE_REGISTRATION))==null?void 0:Aa.FormUUID,Pe=R.Submissions.find(O=>O.FormUUID===He);switch(k.MetaField){case H.META_DATA_SOURCE_REGISTRATION_ACTIONS:$[k.LayoutItemUUID]=R;break;case H.META_DATA_SOURCE_REGISTRATION_GROUP:$[k.LayoutItemUUID]=We;break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:$[k.LayoutItemUUID]=R.Reference;break;case H.META_DATA_SOURCE_SUBMISSION_DATE:if(Pe){const O=new Date(Pe.CreatedAt||"");$[k.LayoutItemUUID]=`${O.getFullYear()}-${(O.getMonth()+1).toString().padStart(2,"0")}-${O.getDate().toString().padStart(2,"0")} ${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}:${O.getSeconds().toString().padStart(2,"0")}`}else{const O=new Date(R.CreatedAt||"");$[k.LayoutItemUUID]=`${O.getFullYear()}-${(O.getMonth()+1).toString().padStart(2,"0")}-${O.getDate().toString().padStart(2,"0")} ${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}:${O.getSeconds().toString().padStart(2,"0")}`}break;case H.META_DATA_SOURCE_ACCOMMODATION_FORM:$[k.LayoutItemUUID]=R.Submissions.map(O=>{const B=S.value.find(ke=>ke.FormUUID===O.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:O,Registration:R}}).filter(O=>{var B;return((B=O.Form)==null?void 0:B.Type)===me.FORM_TYPE_ACCOMMODATION});break;case H.META_DATA_SOURCE_BADGE_FORM:$[k.LayoutItemUUID]=R.Submissions.map(O=>{const B=S.value.find(ke=>ke.FormUUID===O.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:O,Registration:R}}).filter(O=>{var B;return((B=O.Form)==null?void 0:B.Type)===me.FORM_TYPE_BADGE});break;case H.META_DATA_SOURCE_DEALER_FORM:$[k.LayoutItemUUID]=R.Submissions.map(O=>{const B=S.value.find(ke=>ke.FormUUID===O.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:O,Registration:R}}).filter(O=>{var B;return((B=O.Form)==null?void 0:B.Type)===me.FORM_TYPE_DEALER});break;case H.META_DATA_SOURCE_PAYMENT_STATUS:if(R.Paid===0&&R.Total)$[k.LayoutItemUUID]="REQUIRED";else if(R.Total>R.Paid)$[k.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const O=We.find(B=>B.Paid===0&&(B.Total||0)>0);if(O){R.Total===0&&O.Total===0?$[k.LayoutItemUUID]="NOT_REQUIRED":R.Total===0&&O.Total||R.Total>0&&O.Total===0?$[k.LayoutItemUUID]="MISSING_REQUIRED":R.Paid>=R.Total?$[k.LayoutItemUUID]="AWAITING_PARTNER":$[k.LayoutItemUUID]="ALL_REQUIRED";break}else R.Total===0?$[k.LayoutItemUUID]="NOT_REQUIRED":$[k.LayoutItemUUID]="COMPLETE"}break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:Ht(R.Submissions,S.value),$[k.LayoutItemUUID]=R.Submissions.map(O=>{const B=S.value.find(ke=>ke.FormUUID===O.FormUUID);return{Heading:B==null?void 0:B.Heading,Form:B,Submission:O,Registration:R}});break;case H.META_DATA_SOURCE_DATA_LAYOUT:$[k.LayoutItemUUID]={Registration:R,Layouts:ee.value.filter(O=>{if(k.Meta&&k.Meta.LayoutUUID&&Array.isArray(k.Meta.LayoutUUID))return k.Meta.LayoutUUID.includes(O.AdminLayoutUUID)})};break}}}}),{key:R.RegistrationUUID,registration:R,...$}})}),g.value=!1)})}catch{}},tt=o=>{y.value=!1,o&&(A.value=o,_a())},_a=()=>{Xa(A.value.Panels,S.value),A.value.Panels.length>0&&(U.value=[],A.value.Panels.forEach(o=>{const l={uuid:De(),order:o.Order,name:o.Name,headers:[],items:[],layout:o};o.Items.sort((p,m)=>p.Order>m.Order?1:p.Order==m.Order?0:-1),l.headers=o.Items.filter(p=>p.SourceType!=Oe.LAYOUT_ITEM_SOURCE_META||p.MetaField!=H.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP).map(p=>{var m,j;return{key:p.LayoutItemUUID,title:p.Label||((j=(m=p.SectionField)==null?void 0:m.Field)==null?void 0:j.Label)||"",align:p.Align==="end"?"end":"start",sortable:nt(p),type:lt(p),defaultSort:p.DefaultSort,meta:p.Meta}}),U.value.push(l)}),U.value=U.value.sort((o,l)=>o.order>l.order?1:o.order==l.order?0:-1)),(n.value==null||n.value=="")&&U.value.length>0&&(n.value=U.value[0].uuid)};t?i.getConvention(t).then(o=>{o&&(d.value=o,A.value.ConventionID=d.value.ID,A.value.ConventionUUID=d.value.ConventionUUID,at())}).catch(()=>{v.push("/")}):v.push("/");const lt=o=>{var l,p;if(o.SourceType===Oe.LAYOUT_ITEM_SOURCE_META)return`${o.SourceType}.${o.MetaField}`;if(o.SourceType===Oe.LAYOUT_ITEM_SOURCE_FORM)return(p=(l=o.SectionField)==null?void 0:l.Field)==null?void 0:p.Type;if(o.SourceType===Oe.LAYOUT_ITEM_SOURCE_USER)return`${o.SourceType}.${o.UserField}`},ot=()=>{const o=U.value.find(l=>l.uuid===n.value);return o?!!o.layout.Items.find(l=>l.SourceType==Oe.LAYOUT_ITEM_SOURCE_META&&l.MetaField==H.META_DATA_SOURCE_REGISTRATION_TOOLS_DROP):!1},nt=o=>{const l=[H.META_DATA_SOURCE_ACCOMMODATION_FORM,H.META_DATA_SOURCE_BADGE_FORM,H.META_DATA_SOURCE_DEALER_FORM,H.META_DATA_SOURCE_REGISTRATION_FORM,H.META_DATA_SOURCE_REGISTRATION_REFERENCE,H.META_DATA_SOURCE_SUBMISSION_DATE,H.META_DATA_SOURCE_SUBMISSION_STATUS],p=[Z.USER_DATA_SOURCE_DISPLAY_NAME,Z.USER_DATA_SOURCE_EMAIL,Z.USER_DATA_SOURCE_HANDLE,Z.USER_DATA_SOURCE_DATE_OF_BIRTH,Z.USER_DATA_SOURCE_FIRST_NAME,Z.USER_DATA_SOURCE_LAST_NAME];return l.includes(o.MetaField)||p.includes(o.UserField)},st=o=>{ie.value=o,he.value=!0},it=o=>{ie.value=o,ya.value=!0},ut=o=>{ie.value=o,Za.value=!0};ye(he,o=>{o||(ie.value=void 0)}),ye(ya,o=>{o||(ie.value=void 0)});const na=async(o="")=>{Da.value=await i.getRegistrationGroup(o)},rt=({registration:o,form:l})=>{const p={FormUUID:l.FormUUID,Limit:1,RegistrationUUID:o.RegistrationUUID};i.searchConventionRegistrations(o.ConventionUUID,p).then(m=>{if(m&&m.Total>0){if(ie.value=m.Registrations[0],!ie.value)return;na(o.RegistrationUUID).then(()=>{var j,J;ie.value&&((j=ie.value)!=null&&j.Submissions)&&(Be.value=(J=ie.value)==null?void 0:J.Submissions.find(Ve=>Ve.FormUUID===l.FormUUID)),Be.value||(Be.value=dt(l,o)),Qe.value=l,Fe.value=!0})}})},dt=(o,l)=>({ID:0,SubmissionUUID:De(),FormID:o.ID,FormUUID:o.FormUUID,Form:o,UserID:l.UserID,UserUUID:l.UserUUID,RegistrationID:l.ID,RegistrationUUID:l.RegistrationUUID,Registration:l,Data:[],Status:xt.SUBMISSION_STATUS_NULL}),mt=o=>{i.switchUser(o.UserUUID).then(l=>{l&&Zt(l.tokens,l.user,v,!1)}).catch(l=>{console.error(l)})};return C.on("registration.group.leave",o=>{i.leaveRegistrationGroup(o).then(l=>{l&&na(o).then(()=>{C.emit("registration.group.left",l)})})}),C.on("registration.group.remove.member",o=>{i.leaveRegistrationGroup(o).then(l=>{l&&na(o).then(()=>{C.emit("registration.group.left",l)})})}),(o,l)=>(s(),b(El,null,{default:a(()=>[e(Ra,{color:"blue-darken-4"},{default:a(()=>[e(za,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=p=>n.value=p),"show-arrows":""},{default:a(()=>[(s(!0),V(q,null,ue(U.value,p=>(s(),b(Ka,{key:p.uuid,value:p.uuid},{default:a(()=>[x(L(p.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(da),e(Wo),e(X,{icon:"mdi:mdi-cog-outline",onClick:l[1]||(l[1]=p=>y.value=!0)})]),_:1}),e(Qa,{modelValue:n.value,"onUpdate:modelValue":l[23]||(l[23]=p=>n.value=p),disabled:!0,touch:!1},{default:a(()=>[(s(!0),V(q,null,ue(U.value,p=>(s(),b(Ce,{key:p.uuid,value:p.uuid},{default:a(()=>[p.uuid===n.value?(s(),b(Je,{key:0,class:"pa-2"},{default:a(()=>[e(Rl,{expanded:_.value,"onUpdate:expanded":l[19]||(l[19]=m=>_.value=m),page:Y.value,"onUpdate:page":l[20]||(l[20]=m=>Y.value=m),"items-per-page":u.value,"onUpdate:itemsPerPage":l[21]||(l[21]=m=>u.value=m),"sort-by":Ne.value,"onUpdate:sortBy":l[22]||(l[22]=m=>Ne.value=m),headers:p.headers,"items-length":oe.value,items:p.items,"item-value":"key",loading:g.value,search:I.value,"onUpdate:options":je,"show-expand":ot()},aa({top:a(()=>[e(pl,{class:"mb-3"},{default:a(()=>[e(gl,null,{default:a(()=>[e(Tl,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:a(()=>[e(h,{class:"pa-0"},{default:a(()=>[x(" Search Criteria "),e(ja,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),e(h,{class:"d-none d-sm-block pa-0",cols:"0"},{default:a(()=>[e(ae,{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=m=>w.value=m),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:l[3]||(l[3]=$e(()=>{},["stop"])),"onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{class:"d-none d-md-block pa-0"},{default:a(()=>[e(ae,{modelValue:Ie.value.Value,"onUpdate:modelValue":l[4]||(l[4]=m=>Ie.value.Value=m),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:l[5]||(l[5]=$e(()=>{},["stop"])),"onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),e(yl,{class:"pt-2"},{default:a(()=>[e(le,null,{default:a(()=>[e(h,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:a(()=>[e(ae,{modelValue:w.value,"onUpdate:modelValue":l[6]||(l[6]=m=>w.value=m),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:a(()=>[e(ae,{modelValue:Ie.value.Value,"onUpdate:modelValue":l[7]||(l[7]=m=>Ie.value.Value=m),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:a(()=>[e(ae,{modelValue:K.value,"onUpdate:modelValue":l[8]||(l[8]=m=>K.value=m),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:a(()=>[e(ae,{modelValue:Ge.value.Value,"onUpdate:modelValue":l[9]||(l[9]=m=>Ge.value.Value=m),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:a(()=>[e(ae,{modelValue:Me.value.Value,"onUpdate:modelValue":l[10]||(l[10]=m=>Me.value.Value=m),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:a(()=>[e(ae,{modelValue:re.value.Value,"onUpdate:modelValue":l[11]||(l[11]=m=>re.value.Value=m),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":E(te),onInput:E(te)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),e(h,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:a(()=>[e(ne,{modelValue:Le.value,"onUpdate:modelValue":l[12]||(l[12]=m=>Le.value=m),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:z.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),e(h,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:a(()=>[e(ne,{modelValue:we.value,"onUpdate:modelValue":l[13]||(l[13]=m=>we.value=m),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:M.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":a(({columns:m,internalItem:j})=>[G("tr",null,[G("td",{colspan:m.length},[e(Ma,{modelValue:he.value,"onUpdate:modelValue":l[15]||(l[15]=J=>he.value=J),registration:j.raw.registration,"onUpdate:registration":J=>j.raw.registration=J,accommodations:ve.value,convention:d.value,extras:Ae.value,forms:S.value,interests:Se.value,tickets:Ee.value,title:`Registration Controls (#${j.raw.registration.Reference} ${j.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:be.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,Xo)])]),"item.data-table-expand":a(({internalItem:m})=>[_.value.findIndex(j=>j===m.key)>=0?(s(),b(X,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:j=>_.value.splice(_.value.findIndex(J=>J===m.key),1)},{default:a(()=>[m.raw.registration.Notes&&m.raw.registration.Notes.length>0?(s(),V(q,{key:0},[x(L(m.raw.registration.Notes.length),1)],64)):F("",!0)]),_:2},1032,["onClick"])):(s(),b(X,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:j=>_.value.push(m.key)},{default:a(()=>[m.raw.registration.Notes&&m.raw.registration.Notes.length>0?(s(),V(q,{key:0},[x(L(m.raw.registration.Notes.length),1)],64)):F("",!0)]),_:2},1032,["onClick"]))]),bottom:a(()=>[e(fe,{fluid:!0},{default:a(()=>[e(le,{class:"align-center"},{default:a(()=>[e(h,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:a(()=>[e(Dl,{modelValue:Y.value,"onUpdate:modelValue":l[16]||(l[16]=m=>Y.value=m),modelModifiers:{number:!0},length:Math.ceil(oe.value/u.value)},null,8,["modelValue","length"])]),_:1}),e(h,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:a(()=>[e(ne,{modelValue:u.value,"onUpdate:modelValue":l[17]||(l[17]=m=>u.value=m),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),e(h,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:a(()=>[e(ae,{modelValue:Y.value,"onUpdate:modelValue":l[18]||(l[18]=m=>Y.value=m),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(oe.value/u.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),e(h,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:a(()=>[G("span",Zo,[u.value===-1?(s(),V(q,{key:0},[x(" 1-"+L(oe.value)+" of "+L(oe.value),1)],64)):(s(),V(q,{key:1},[x(L((Y.value-1)*u.value+1)+" - "+L(Y.value*u.value>=oe.value?oe.value:Y.value*u.value)+" of "+L(oe.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[ue(p.headers,m=>({name:`item.${m.key}`,fn:a(({internalItem:j,index:J})=>[e(Ql,{header:m,item:j,accommodations:ve.value,convention:d.value,extras:Ae.value,forms:S.value,interests:Se.value,tickets:Ee.value,user:E(et),venues:be.value,modelValue:p.items[J],"onUpdate:modelValue":Ve=>p.items[J]=Ve,onOpenActions:st,onOpenPayments:it,onOpenTags:ut,onReload:l[14]||(l[14]=Ve=>je({page:Y.value,itemsPerPage:u.value,sortBy:Q.value})),onSwitchUser:mt,onShowForm:rt},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search","show-expand"])]),_:2},1024)):F("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),y.value?(s(),b(Jo,{key:0,title:"Edit Layouts",modelValue:y.value,"onUpdate:modelValue":l[24]||(l[24]=p=>y.value=p),convention:d.value,onSave:tt},null,8,["modelValue","convention"])):F("",!0),ie.value?(s(),V(q,{key:1},[he.value?(s(),b(Ma,{key:0,modelValue:he.value,"onUpdate:modelValue":l[25]||(l[25]=p=>he.value=p),registration:ie.value,"onUpdate:registration":l[26]||(l[26]=p=>ie.value=p),accommodations:ve.value,convention:d.value,extras:Ae.value,forms:S.value,interests:Se.value,tickets:Ee.value,title:`Registration Controls (#${ie.value.Reference} ${ie.value.User.DisplayName})`,"use-dialog":!0,venues:be.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):F("",!0)],64)):F("",!0),Fe.value&&Be.value&&Qe.value?(s(),b(Wa,{key:2,modelValue:Fe.value,"onUpdate:modelValue":l[30]||(l[30]=p=>Fe.value=p),scrollable:!0,fullscreen:!0,persistent:!0},{default:a(()=>[e(Je,{class:"bg-red-darken-4"},{default:a(()=>[e(Ra,{color:"error"},{default:a(()=>[e(bl,null,{default:a(()=>[x("Submission Editor - Admin Mode")]),_:1}),e(da),e(Sl,null,{default:a(()=>[e(X,{icon:"mdi:mdi-window-close",onClick:l[27]||(l[27]=p=>Fe.value=!1)})]),_:1})]),_:1}),e(la,null,{default:a(()=>[e($t,{modelValue:Qe.value,"onUpdate:modelValue":l[28]||(l[28]=p=>Qe.value=p),admin:!0,convention:d.value,data:Be.value,editable:!0,"registration-group":Da.value,onClose:l[29]||(l[29]=p=>{Fe.value=!1,je({page:Y.value,itemsPerPage:u.value,sortBy:Q.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):F("",!0)]),_:1}))}});export{Jn as default};
