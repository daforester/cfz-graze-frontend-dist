import{s as re}from"./index-OKsbKlsK.js";import{i as _,r as x,n as D,q as E,v as f,f as t,x as B,C as ce,P as xe,M as K,N as ke,c as U,w as Ie,B as Q,F as j,A as L,y as ve,Q as Me,z as de,Y as fe,p as ee,R as Re,d as ae,s as M,m as Z,a4 as me,a5 as Ne,K as Fe,a6 as He,a7 as Le,a8 as Ge,a as Ke,u as je,t as A,a9 as qe,L as Ye,aa as Xe}from"./index-AnVF1VyL.js";import{v as We}from"./v4-yQnnJER4.js";import{u as ge}from"./nil-rxyd0N8M.js";import{V as z,m as Je,b as Qe,c as Ze,u as he}from"./VBtn-KG2fAbbh.js";import{V as H,a as _e,j as ea,u as le,m as aa,e as Ue,k as la,l as ta,f as na}from"./VContainer-lANhosQ-.js";import{a as we,V as De}from"./VToolbar-NGOxt6oc.js";import{V as ze}from"./VSpacer-F0pZJULb.js";import{V as Pe}from"./VToolbarItems-EznS-bjI.js";import{V as oa,a as be}from"./VRow-Qp4QfNDW.js";import{V as ye}from"./VTextField-lgGMqLi_.js";import{c as Oe,e as $e}from"./VCard-EKKWfVyO.js";import{a as sa}from"./VList-ikO1M4qc.js";import{V as ia}from"./VDivider-XtX8kDoV.js";import{V as ua}from"./VAutocomplete-hs_Rn4e8.js";import{V as ra}from"./VDialog-BW9p2wiP.js";import{s as pe,a as ca,m as va}from"./FormRenderer.vue_vue_type_style_index_0_lang--XbEVGAr.js";import{V as da,a as fa,b as ma,c as ga}from"./VDataTable-5LspkYPV.js";import{a as ha,s as ba,b as Te}from"./forwardRefs-YqQOqdbj.js";const ya=_({__name:"AddTag",props:{convention:{},organisation:{}},emits:["save","close"],setup(e,{emit:m}){const o=x(""),n=x("");typeof e.convention=="object"?(o.value=e.convention.ConventionUUID,n.value=e.convention.OrganisationUUID):o.value=e.convention||"",typeof e.organisation=="object"?n.value=e.organisation.OrganisationUUID:n.value.length===0&&(n.value=e.organisation||"");const h=m,d=x({ID:0,TagUUID:We(),ConventionID:0,ConventionUUID:o.value||ge,OrganisationID:0,OrganisationUUID:n.value||ge,Title:"",Key:""}),i=xe(),c=()=>{i.saveTag(d.value).then(l=>{l&&(d.value=l,h("save",l),h("close"))})};return(l,s)=>(D(),E($e,null,{default:f(()=>[t(De,{dark:"",color:"primary"},{default:f(()=>[t(z,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>h("close"))},{default:f(()=>[t(H,null,{default:f(()=>[B("mdi:mdi-close")]),_:1})]),_:1}),t(we,null,{default:f(()=>[B("Add Tag")]),_:1}),t(ze),t(Pe,null,{default:f(()=>[t(z,{variant:"text",onClick:c},{default:f(()=>[B(" Save ")]),_:1})]),_:1})]),_:1}),t(Oe,null,{default:f(()=>[t(_e,{fluid:!0},{default:f(()=>[t(oa,null,{default:f(()=>[t(be,{cols:"12"},{default:f(()=>[t(ye,{label:ce(re).formLabelDisplayName,type:"text",variant:"outlined",modelValue:d.value.Title,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value.Title=a)},null,8,["label","modelValue"])]),_:1}),t(be,{cols:"12"},{default:f(()=>[t(ye,{label:ce(re).formLabelTagKey,type:"text",variant:"outlined",modelValue:d.value.Key,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value.Key=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ka=_({__name:"SelectTags",props:K({convention:{},organisation:{},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:""},label:{},variant:{},showKey:{type:Boolean,default:!1},showUuid:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:K(["change"],["update:modelValue"]),setup(e,{emit:m}){const o=ke(e,"modelValue"),n=m,h=x([]),d=xe(),i=x([]),c=x([]),l=x(""),s=x(""),a=x(0),v=U(()=>[...i.value,...c.value].map(y=>({title:`${y.Title}${e.showKey?` [ ${y.Key} ]`:""}${e.showUuid?` (${y.TagUUID})`:""}`,value:h.value.find(r=>r.TagUUID===y.TagUUID)||y})));typeof e.convention=="object"?(l.value=e.convention.ConventionUUID,s.value=e.convention.OrganisationUUID):l.value=e.convention||"",typeof e.organisation=="object"?s.value=e.organisation.OrganisationUUID:s.value.length===0&&(s.value=e.organisation||""),(async()=>{const b=[];l.value&&b.push(d.getConventionTags(l.value)),s.value&&b.push(d.getOrganisationTags(s.value));const y=await Promise.all(b);if(l.value&&s.value?(c.value=y[0].sort((r,S)=>r.Title.localeCompare(S.Title)),i.value=y[1].sort((r,S)=>r.Title.localeCompare(S.Title))):l.value&&y.length==1?c.value=y[0].sort((r,S)=>r.Title.localeCompare(S.Title)):s.value&&y.length==1&&(i.value=y[0].sort((r,S)=>r.Title.localeCompare(S.Title))),Array.isArray(o.value))a.value=2,v.value.forEach(r=>{Array.isArray(o.value)&&o.value.find(w=>w.TagUUID===r.value.TagUUID)&&h.value.push(r.value)});else if(typeof o.value=="string"){a.value=1;try{const r=JSON.parse(o.value);v.value.forEach(S=>{r.find(P=>P.TagUUID===S.value.TagUUID)&&h.value.push(S.value)})}catch{}}})();const p=x(!1),V=()=>{p.value=!0},T=b=>{b.ConventionUUID.length>0?c.value.push(b):b.OrganisationUUID.length>0&&i.value.push(b),h.value.push(b),k()},k=()=>{switch(a.value){default:case 2:{o.value=h.value,n("change");break}case 1:{o.value=JSON.stringify(h.value),n("change");break}}};return Ie(h,k),(b,y)=>(D(),Q(j,null,[t(ua,{modelValue:h.value,"onUpdate:modelValue":y[1]||(y[1]=r=>h.value=r),chips:b.chips,multiple:"",label:b.label||"Tags",variant:b.variant||"solo",hint:b.hint,"persistent-hint":!0,clearable:b.clearable,items:v.value,"item-title":"title","item-value":"value"},{"prepend-item":f(()=>[t(sa,{title:"New Tag",onClick:y[0]||(y[0]=r=>V())},{prepend:f(()=>[t(H,{icon:"mdi:mdi-plus"})]),_:1}),t(ia,{class:"mt-2"})]),_:1},8,["modelValue","chips","label","variant","hint","clearable","items"]),t(ra,{modelValue:p.value,"onUpdate:modelValue":y[3]||(y[3]=r=>p.value=r),scrollable:!0},{default:f(()=>[t(ya,{convention:b.convention,organisation:b.organisation,onClose:y[2]||(y[2]=r=>p.value=!1),onSave:T},null,8,["convention","organisation"])]),_:1},8,["modelValue"])],64))}}),ja=_({__name:"EditOrderedItems",props:K({closeable:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!0},hasOrder:{type:Boolean,default:!0},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0},modelModifiers:{}}),emits:K(["add","save","close"],["update:modelValue"]),setup(e,{emit:m}){const o=m,n=ke(e,"modelValue"),h=()=>{o("save"),o("close")},d=()=>{if(e.newItem){let a;e.hasOrder?(a=e.newItem(),a.Order=n.value.length+1):a=e.newItem(),n.value.push(a)}else e.hasOrder?n.value.push({ID:0,Order:n.value.length+1}):n.value.push({ID:0})},i=a=>{n.value.splice(a,1)},c=a=>{ca(a,n.value)},l=a=>{va(a,n.value)},s=a=>e.labelParent&&a[e.labelParent]?a[e.labelParent][e.label]:a[e.label];return n.value.find(a=>a.Order===0)&&pe(n.value),n.value.find(a=>n.value.find(v=>v.Order===a.Order&&v!==a))&&pe(n.value),(a,v)=>(D(),E($e,null,{default:f(()=>[t(De,{dark:"",color:"primary"},{default:f(()=>[a.closeable?(D(),E(z,{key:0,icon:"",dark:"",onClick:v[0]||(v[0]=p=>o("close"))},{default:f(()=>[t(H,null,{default:f(()=>[B("mdi:mdi-close")]),_:1})]),_:1})):L("",!0),t(we,null,{default:f(()=>[B(ve(a.title),1)]),_:1}),t(ze),t(Pe,null,{default:f(()=>[a.newItem!==void 0?(D(),E(z,{key:0,variant:"text",onClick:d},{default:f(()=>[B(" Add ")]),_:1})):L("",!0),a.showSave?(D(),E(z,{key:1,variant:"text",onClick:h},{default:f(()=>[B(" Save ")]),_:1})):L("",!0)]),_:1})]),_:1}),t(Oe,{class:"pa-0"},{default:f(()=>[t(da,null,{default:f(()=>[(D(!0),Q(j,null,Me(n.value,(p,V)=>(D(),E(fa,{key:p.ID,class:"mt-0"},{default:f(()=>[t(ma,null,{actions:f(({expanded:T})=>[a.showDelete?(D(),E(z,{key:0,icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:k=>i(V)},null,8,["onClick"])):L("",!0),t(H,{class:"align-self-center text-h5",icon:T?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:f(()=>[a.hasOrder?(D(),Q(j,{key:0},[t(z,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(T=>l(p),["stop"])},null,8,["onClick"]),t(z,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(T=>c(p),["stop"])},null,8,["onClick"])],64)):L("",!0),fe(a.$slots,`${a.slotNamePrefix}_${V}_title`,{},()=>[B(ve(s(p)),1)])]),_:2},1024),t(ga,{class:"px-0"},{default:f(()=>[fe(a.$slots,`${a.slotNamePrefix}_${V}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),Be=Symbol.for("vuetify:v-tabs"),pa=ee({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Re(Je({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Ta=ae()({name:"VTab",props:pa(),setup(e,m){let{slots:o,attrs:n}=m;const{textColorClasses:h,textColorStyles:d}=ea(e,"sliderColor"),i=U(()=>e.direction==="horizontal"),c=M(!1),l=x(),s=x();function a(v){var V,T;let{value:p}=v;if(c.value=p,p){const k=(T=(V=l.value)==null?void 0:V.$el.parentElement)==null?void 0:T.querySelector(".v-tab--selected .v-tab__slider"),b=s.value;if(!k||!b)return;const y=getComputedStyle(k).color,r=k.getBoundingClientRect(),S=b.getBoundingClientRect(),w=i.value?"x":"y",P=i.value?"X":"Y",G=i.value?"right":"bottom",O=i.value?"width":"height",q=r[w],R=S[w],$=q>R?r[G]-S[G]:r[w]-S[w],Y=Math.sign($)>0?i.value?"right":"bottom":Math.sign($)<0?i.value?"left":"top":"center",X=(Math.abs($)+(Math.sign($)<0?r[O]:S[O]))/Math.max(r[O],S[O])||0,C=r[O]/S[O]||0,N=1.5;ha(b,{backgroundColor:[y,"currentcolor"],transform:[`translate${P}(${$}px) scale${P}(${C})`,`translate${P}(${$/N}px) scale${P}(${(X-1)/N+1})`,"none"],transformOrigin:Array(3).fill(Y)},{duration:225,easing:ba})}}return le(()=>{const v=z.filterProps(e);return t(z,Z({symbol:Be,ref:l,class:["v-tab",e.class],style:e.style,tabindex:c.value?0:-1,role:"tab","aria-selected":String(c.value),active:!1},v,n,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":a}),{...o,default:()=>{var p;return t(j,null,[((p=o.default)==null?void 0:p.call(o))??e.text,!e.hideSlider&&t("div",{ref:s,class:["v-tab__slider",h.value],style:d.value},null)])}})}),{}}});function Se(e){const o=Math.abs(e);return Math.sign(e)*(o/((1/.501-2)*(1-o)+1))}function Ve(e){let{selectedElement:m,containerSize:o,contentSize:n,isRtl:h,currentScrollOffset:d,isHorizontal:i}=e;const c=i?m.clientWidth:m.clientHeight,l=i?m.offsetLeft:m.offsetTop,s=h&&i?n-l-c:l,a=o+d,v=c+s,p=c*.4;return s<=d?d=Math.max(s-p,0):a<=v&&(d=Math.min(d-(a-v-p),n-o)),d}function Sa(e){let{selectedElement:m,containerSize:o,contentSize:n,isRtl:h,isHorizontal:d}=e;const i=d?m.clientWidth:m.clientHeight,c=d?m.offsetLeft:m.offsetTop,l=h&&d?n-c-i/2-o/2:c+i/2-o/2;return Math.min(n-o,Math.max(0,l))}const Va=Symbol.for("vuetify:v-slide-group"),Ae=ee({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Va},nextIcon:{type:me,default:"$next"},prevIcon:{type:me,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...aa(),...Ne(),...Ue(),...Qe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Ce=ae()({name:"VSlideGroup",props:Ae(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const{isRtl:n}=Fe(),{displayClasses:h,mobile:d}=He(e),i=Ze(e,e.symbol),c=M(!1),l=M(0),s=M(0),a=M(0),v=U(()=>e.direction==="horizontal"),{resizeRef:p,contentRect:V}=he(),{resizeRef:T,contentRect:k}=he(),b=U(()=>i.selected.value.length?i.items.value.findIndex(u=>u.id===i.selected.value[0]):-1),y=U(()=>i.selected.value.length?i.items.value.findIndex(u=>u.id===i.selected.value[i.selected.value.length-1]):-1);if(Le){let u=-1;Ie(()=>[i.selected.value,V.value,k.value,v.value],()=>{cancelAnimationFrame(u),u=requestAnimationFrame(()=>{if(V.value&&k.value){const g=v.value?"width":"height";s.value=V.value[g],a.value=k.value[g],c.value=s.value+1<a.value}if(b.value>=0&&T.value){const g=T.value.children[y.value];b.value===0||!c.value?l.value=0:e.centerActive?l.value=Sa({selectedElement:g,containerSize:s.value,contentSize:a.value,isRtl:n.value,isHorizontal:v.value}):c.value&&(l.value=Ve({selectedElement:g,containerSize:s.value,contentSize:a.value,isRtl:n.value,currentScrollOffset:l.value,isHorizontal:v.value}))}})})}const r=M(!1);let S=0,w=0;function P(u){const g=v.value?"clientX":"clientY";w=(n.value&&v.value?-1:1)*l.value,S=u.touches[0][g],r.value=!0}function G(u){if(!c.value)return;const g=v.value?"clientX":"clientY",I=n.value&&v.value?-1:1;l.value=I*(w+S-u.touches[0][g])}function O(u){const g=a.value-s.value;l.value<0||!c.value?l.value=0:l.value>=g&&(l.value=g),r.value=!1}function q(){p.value&&(p.value[v.value?"scrollLeft":"scrollTop"]=0)}const R=M(!1);function $(u){if(R.value=!0,!(!c.value||!T.value)){for(const g of u.composedPath())for(const I of T.value.children)if(I===g){l.value=Ve({selectedElement:I,containerSize:s.value,contentSize:a.value,isRtl:n.value,currentScrollOffset:l.value,isHorizontal:v.value});return}}}function Y(u){R.value=!1}function te(u){var g;!R.value&&!(u.relatedTarget&&((g=T.value)!=null&&g.contains(u.relatedTarget)))&&C()}function X(u){T.value&&(v.value?u.key==="ArrowRight"?C(n.value?"prev":"next"):u.key==="ArrowLeft"&&C(n.value?"next":"prev"):u.key==="ArrowDown"?C("next"):u.key==="ArrowUp"&&C("prev"),u.key==="Home"?C("first"):u.key==="End"&&C("last"))}function C(u){var g,I,se,ie,ue;if(T.value)if(!u)(g=Ge(T.value)[0])==null||g.focus();else if(u==="next"){const F=(I=T.value.querySelector(":focus"))==null?void 0:I.nextElementSibling;F?F.focus():C("first")}else if(u==="prev"){const F=(se=T.value.querySelector(":focus"))==null?void 0:se.previousElementSibling;F?F.focus():C("last")}else u==="first"?(ie=T.value.firstElementChild)==null||ie.focus():u==="last"&&((ue=T.value.lastElementChild)==null||ue.focus())}function N(u){const g=l.value+(u==="prev"?-1:1)*s.value;l.value=Ke(g,0,a.value-s.value)}const Ee=U(()=>{let u=l.value>a.value-s.value?-(a.value-s.value)+Se(a.value-s.value-l.value):-l.value;l.value<=0&&(u=Se(-l.value));const g=n.value&&v.value?-1:1;return{transform:`translate${v.value?"X":"Y"}(${g*u}px)`,transition:r.value?"none":"",willChange:r.value?"transform":""}}),W=U(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),J=U(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return c.value||Math.abs(l.value)>0;case"mobile":return d.value||c.value||Math.abs(l.value)>0;default:return!d.value&&(c.value||Math.abs(l.value)>0)}}),ne=U(()=>Math.abs(l.value)>0),oe=U(()=>a.value>Math.abs(l.value)+s.value);return le(()=>t(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!v.value,"v-slide-group--has-affixes":J.value,"v-slide-group--is-overflowing":c.value},h.value,e.class],style:e.style,tabindex:R.value||i.selected.value.length?-1:0,onFocus:te},{default:()=>{var u,g,I;return[J.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ne.value}],onClick:()=>ne.value&&N("prev")},[((u=o.prev)==null?void 0:u.call(o,W.value))??t(Te,null,{default:()=>[t(H,{icon:n.value?e.nextIcon:e.prevIcon},null)]})]),t("div",{key:"container",ref:p,class:"v-slide-group__container",onScroll:q},[t("div",{ref:T,class:"v-slide-group__content",style:Ee.value,onTouchstartPassive:P,onTouchmovePassive:G,onTouchendPassive:O,onFocusin:$,onFocusout:Y,onKeydown:X},[(g=o.default)==null?void 0:g.call(o,W.value)])]),J.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!oe.value}],onClick:()=>oe.value&&N("next")},[((I=o.next)==null?void 0:I.call(o,W.value))??t(Te,null,{default:()=>[t(H,{icon:n.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:N,scrollOffset:l,focus:C}}});function Ca(e){return e?e.map(m=>Xe(m)?m:{text:m,value:m}):[]}const xa=ee({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ae({mandatory:"force"}),...la(),...Ue()},"VTabs"),qa=ae()({name:"VTabs",props:xa(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const n=je(e,"modelValue"),h=U(()=>Ca(e.items)),{densityClasses:d}=ta(e),{backgroundColorClasses:i,backgroundColorStyles:c}=na(A(e,"bgColor"));return qe({VTab:{color:A(e,"color"),direction:A(e,"direction"),stacked:A(e,"stacked"),fixed:A(e,"fixedTabs"),sliderColor:A(e,"sliderColor"),hideSlider:A(e,"hideSlider")}}),le(()=>{const l=Ce.filterProps(e);return t(Ce,Z(l,{modelValue:n.value,"onUpdate:modelValue":s=>n.value=s,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,i.value,e.class],style:[{"--v-tabs-height":Ye(e.height)},c.value,e.style],role:"tablist",symbol:Be}),{default:()=>[o.default?o.default():h.value.map(s=>t(Ta,Z(s,{key:s.text}),null))]})}),{}}});export{qa as V,Ka as _,ja as a,Ta as b};
