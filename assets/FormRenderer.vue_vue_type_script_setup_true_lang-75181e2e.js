import{p as $e,an as il,n as Le,ae as gl,r as x,s as ke,u as Ce,e as Q,w as H,E as De,v as n,H as A,x as ue,N,aA as Vl,ah as Ul,y as yl,k as bl,f as Il,j as kl,ax as sl,aa as je,ad as Cl,aB as Dl,ay as Tl,m as Sl,I as he,a1 as le,a2 as ge,a5 as Je,K as u,R,U as B,O as Y,M as i,Z as K,L as S,S as h,Q as O,a3 as Ue,P as rl,ar as qe,$ as dl,Y as cl,ac as ze,a as Al}from"./index-9a653097.js";import{V as pe,u as Ye}from"./VCheckbox-e12d298b.js";import{s as Te}from"./index-71069b21.js";import{f as El,V as oe,a as j,c as vl,d as we,e as be}from"./VList-f300f552.js";import{a as re,V as X}from"./VRow-f1c85df4.js";import{m as xl,u as Rl,a as wl,b as _l,V as He}from"./VSelect-75224b0a.js";import{d as $l,u as Ll,e as Be,T as Nl,s as Ze}from"./filter-2a2bfbf5.js";import{C as Pl,a as Ne,l as Se,G as Ol,V as ie,n as Ml}from"./VContainer-de4130cf.js";import{c as ql}from"./copyToClipboard-54de8978.js";import{a as Bl,e as Fl,_ as Gl}from"./VChip-78a0370f.js";import{k as Hl,l as Jl,j as ml,V as ye,m as fl,e as Yl,u as Kl,f as _e,g as Xl,h as jl,i as zl,n as Zl}from"./VTextField-822571df.js";import{m as Ql,I as Wl}from"./index-dda8f7ca.js";import{V as et,m as lt,a as pl,b as tt,c as at}from"./VCheckboxBtn-ab98a74e.js";import{G as nt}from"./userData-1ef459f2.js";import{v as Fe}from"./v4-a960c1f4.js";import{e as Qe,V as We,a as el,b as ll,c as tl,d as al}from"./VCard-c93b75ed.js";import{V as Ge}from"./VAvatar-5aa42028.js";import{V as ut}from"./VForm-918b7691.js";const nl=(e,C,o)=>{if(o>=e.length){let _=o-e.length+1;for(;_--;)e.push(void 0)}e.splice(o,0,e.splice(C,1)[0])};var ee=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(ee||{});const na=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function ot(e,C,o){if(C==null)return e;if(Array.isArray(C))throw new Error("Multiple matches is not implemented");return typeof C=="number"&&~C?n(A,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,C)]),n("span",{class:"v-autocomplete__mask"},[e.substr(C,o)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(C+o)])]):e}const it=$e({autoSelectFirst:{type:[Boolean,String]},search:String,...$l({filterKeys:["title"]}),...xl(),...il(Hl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Ql({transition:!1})},"VAutocomplete"),ul=Le()({name:"VAutocomplete",props:it(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,C){let{slots:o}=C;const{t:_}=gl(),U=x(),g=ke(!1),y=ke(!0),b=x(!1),p=x(),E=Ce(e,"menu"),l=Q({get:()=>E.value,set:V=>{var G;E.value&&!V&&((G=p.value)!=null&&G.Î¨openChildren)||(E.value=V)}}),d=ke(-1),w=Q(()=>{var V;return(V=U.value)==null?void 0:V.color}),{items:c,transformIn:f,transformOut:m}=El(e),{textColorClasses:s,textColorStyles:t}=Pl(w),a=Ce(e,"search",""),r=Ce(e,"modelValue",[],V=>f(V===null?[null]:Ul(V)),V=>{const G=m(V);return e.multiple?G:G[0]??null}),v=Jl(),{filteredItems:P,getMatches:I}=Ll(e,c,()=>y.value?"":a.value),M=Q(()=>r.value.map(V=>c.value.find(G=>e.valueComparator(G.value,V.value))||V)),F=Q(()=>e.hideSelected?P.value.filter(V=>!M.value.some(G=>G.value===V.value)):P.value),te=Q(()=>M.value.map(V=>V.props.value)),W=Q(()=>M.value[d.value]),$=Q(()=>{var G;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((G=F.value[0])==null?void 0:G.title))&&F.value.length>0&&!y.value&&!b.value}),T=Q(()=>e.hideNoData&&!c.value.length||e.readonly||(v==null?void 0:v.isReadonly.value)),D=x(),{onListScroll:k,onListKeydown:L}=Rl(D,U);function de(V){e.openOnClear&&(l.value=!0),a.value=""}function Ie(){T.value||(l.value=!0)}function se(V){T.value||(g.value&&(V.preventDefault(),V.stopPropagation()),l.value=!l.value)}function ve(V){var Ve,q,Z;if(e.readonly||v!=null&&v.isReadonly.value)return;const G=U.value.selectionStart,z=te.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(l.value=!0),["Escape"].includes(V.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(V.key)&&($.value&&["Enter","Tab"].includes(V.key)&&ce(P.value[0]),y.value=!0),V.key==="ArrowDown"&&$.value&&((Ve=D.value)==null||Ve.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(d.value<0){V.key==="Backspace"&&!a.value&&(d.value=z-1);return}const J=d.value;W.value&&ce(W.value),d.value=J>=z-1?z-2:J}if(V.key==="ArrowLeft"){if(d.value<0&&G>0)return;const J=d.value>-1?d.value-1:z-1;M.value[J]?d.value=J:(d.value=-1,U.value.setSelectionRange((q=a.value)==null?void 0:q.length,(Z=a.value)==null?void 0:Z.length))}if(V.key==="ArrowRight"){if(d.value<0)return;const J=d.value+1;M.value[J]?d.value=J:(d.value=-1,U.value.setSelectionRange(0,0))}}}function Ae(V){a.value=V.target.value}function Pe(){var V;g.value&&(y.value=!0,(V=U.value)==null||V.focus())}function Oe(V){g.value=!0,setTimeout(()=>{b.value=!0})}function Me(V){b.value=!1}function Ee(V){(V==null||V===""&&!e.multiple)&&(r.value=[])}const me=ke(!1);function ce(V){if(e.multiple){const G=te.value.findIndex(z=>e.valueComparator(z,V.value));if(G===-1)r.value=[...r.value,V];else{const z=[...r.value];z.splice(G,1),r.value=z}}else r.value=[V],me.value=!0,a.value=V.title,l.value=!1,y.value=!0,De(()=>me.value=!1)}return H(g,(V,G)=>{var z;V!==G&&(V?(me.value=!0,a.value=e.multiple?"":String(((z=M.value.at(-1))==null?void 0:z.props.title)??""),y.value=!0,De(()=>me.value=!1)):(!e.multiple&&!a.value?r.value=[]:$.value&&!b.value&&!M.value.some(Ve=>{let{value:q}=Ve;return q===F.value[0].value})&&ce(F.value[0]),l.value=!1,a.value="",d.value=-1))}),H(a,V=>{!g.value||me.value||(V&&(l.value=!0),y.value=!V)}),Ne(()=>{const V=!!(e.chips||o.chip),G=!!(!e.hideNoData||F.value.length||o["prepend-item"]||o["append-item"]||o["no-data"]),z=r.value.length>0,[Ve]=ye.filterProps(e);return n(ye,ue({ref:U},Ve,{modelValue:a.value,"onUpdate:modelValue":Ee,focused:g.value,"onUpdate:focused":q=>g.value=q,validationValue:r.externalValue,dirty:z,onInput:Ae,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!o.selection,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:z?void 0:e.placeholder,"onClick:clear":de,"onMousedown:control":Ie,onKeydown:ve}),{...o,default:()=>n(A,null,[n(wl,ue({ref:p,modelValue:l.value,"onUpdate:modelValue":q=>l.value=q,activator:"parent",contentClass:"v-autocomplete__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Pe},e.menuProps),{default:()=>[G&&n(oe,{ref:D,selected:te.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:L,onFocusin:Oe,onFocusout:Me,onScrollPassive:k,tabindex:"-1"},{default:()=>{var q,Z,J;return[(q=o["prepend-item"])==null?void 0:q.call(o),!F.value.length&&!e.hideNoData&&(((Z=o["no-data"])==null?void 0:Z.call(o))??n(j,{title:_(e.noDataText)},null)),n(_l,{renderless:!0,items:F.value},{default:fe=>{var Xe;let{item:ae,index:ne,itemRef:hl}=fe;const Ke=ue(ae.props,{ref:hl,key:ne,active:$.value&&ne===0?!0:void 0,onClick:()=>ce(ae)});return((Xe=o.item)==null?void 0:Xe.call(o,{item:ae,index:ne,props:Ke}))??n(j,Ke,{prepend:xe=>{let{isSelected:Re}=xe;return n(A,null,[e.multiple&&!e.hideSelected?n(et,{key:ae.value,modelValue:Re,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependIcon&&n(Se,{icon:ae.props.prependIcon},null)])},title:()=>{var xe,Re;return y.value?ae.title:ot(ae.title,(xe=I(ae))==null?void 0:xe.title,((Re=a.value)==null?void 0:Re.length)??0)}})}}),(J=o["append-item"])==null?void 0:J.call(o)]}})]}),M.value.map((q,Z)=>{var ae;function J(ne){ne.stopPropagation(),ne.preventDefault(),ce(q)}const fe={"onClick:close":J,onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:q.value,class:["v-autocomplete__selection",Z===d.value&&["v-autocomplete__selection--selected",s.value]],style:Z===d.value?t.value:{}},[V?o.chip?n(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:q.title}}},{default:()=>{var ne;return[(ne=o.chip)==null?void 0:ne.call(o,{item:q,index:Z,props:fe})]}}):n(Bl,ue({key:"chip",closable:e.closableChips,size:"small",text:q.title},fe),null):((ae=o.selection)==null?void 0:ae.call(o,{item:q,index:Z}))??n("span",{class:"v-autocomplete__selection-text"},[q.title,e.multiple&&Z<M.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[N(",")])])])})]),"append-inner":function(){var fe;for(var q=arguments.length,Z=new Array(q),J=0;J<q;J++)Z[J]=arguments[J];return n(A,null,[(fe=o["append-inner"])==null?void 0:fe.call(o,...Z),e.menuIcon?n(Se,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:se,onClick:Vl},null):void 0])}})}),ml({isFocused:g,isPristine:y,menu:l,search:a,filteredItems:P,select:ce},U)}});const st=$e({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...fl(),...Yl()},"VTextarea"),rt=Le()({name:"VTextarea",directives:{Intersect:Wl},inheritAttrs:!1,props:st(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,C){let{attrs:o,emit:_,slots:U}=C;const g=Ce(e,"modelValue"),{isFocused:y,focus:b,blur:p}=Kl(e),E=Q(()=>typeof e.counterValue=="function"?e.counterValue(g.value):(g.value||"").toString().length),l=Q(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d($,T){var D,k;!e.autofocus||!$||(k=(D=T[0].target)==null?void 0:D.focus)==null||k.call(D)}const w=x(),c=x(),f=ke(""),m=x(),s=Q(()=>e.persistentPlaceholder||y.value||e.active);function t(){var $;m.value!==document.activeElement&&(($=m.value)==null||$.focus()),y.value||b()}function a($){t(),_("click:control",$)}function r($){_("mousedown:control",$)}function v($){$.stopPropagation(),t(),De(()=>{g.value="",Tl(e["onClick:clear"],$)})}function P($){var D;const T=$.target;if(g.value=T.value,(D=e.modelModifiers)!=null&&D.trim){const k=[T.selectionStart,T.selectionEnd];De(()=>{T.selectionStart=k[0],T.selectionEnd=k[1]})}}const I=x(),M=x(+e.rows),F=Q(()=>["plain","underlined"].includes(e.variant));yl(()=>{e.autoGrow||(M.value=+e.rows)});function te(){e.autoGrow&&De(()=>{if(!I.value||!c.value)return;const $=getComputedStyle(I.value),T=getComputedStyle(c.value.$el),D=parseFloat($.getPropertyValue("--v-field-padding-top"))+parseFloat($.getPropertyValue("--v-input-padding-top"))+parseFloat($.getPropertyValue("--v-field-padding-bottom")),k=I.value.scrollHeight,L=parseFloat($.lineHeight),de=Math.max(parseFloat(e.rows)*L+D,parseFloat(T.getPropertyValue("--v-input-control-height"))),Ie=parseFloat(e.maxRows)*L+D||1/0,se=Sl(k??0,de,Ie);M.value=Math.floor((se-D)/L),f.value=kl(se)})}bl(te),H(g,te),H(()=>e.rows,te),H(()=>e.maxRows,te),H(()=>e.density,te);let W;return H(I,$=>{$?(W=new ResizeObserver(te),W.observe(I.value)):W==null||W.disconnect()}),Il(()=>{W==null||W.disconnect()}),Ne(()=>{const $=!!(U.counter||e.counter||e.counterValue),T=!!($||U.details),[D,k]=sl(o),[{modelValue:L,...de}]=_e.filterProps(e),[Ie]=Xl(e);return n(_e,ue({ref:w,modelValue:g.value,"onUpdate:modelValue":se=>g.value=se,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":F.value},e.class],style:e.style},D,de,{centerAffix:M.value===1&&!F.value,focused:y.value}),{...U,default:se=>{let{isDisabled:ve,isDirty:Ae,isReadonly:Pe,isValid:Oe}=se;return n(jl,ue({ref:c,style:{"--v-textarea-control-height":f.value},onClick:a,onMousedown:r,"onClick:clear":v,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},Ie,{active:s.value||Ae.value,centerAffix:M.value===1&&!F.value,dirty:Ae.value||e.dirty,disabled:ve.value,focused:y.value,error:Oe.value===!1}),{...U,default:Me=>{let{props:{class:Ee,...me}}=Me;return n(A,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),je(n("textarea",ue({ref:m,class:Ee,value:g.value,onInput:P,autofocus:e.autofocus,readonly:Pe.value,disabled:ve.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:t,onBlur:p},me,k),null),[[Cl("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&je(n("textarea",{class:[Ee,"v-textarea__sizer"],"onUpdate:modelValue":ce=>g.value=ce,ref:I,readonly:!0,"aria-hidden":"true"},null),[[Dl,g.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:T?se=>{var ve;return n(A,null,[(ve=U.details)==null?void 0:ve.call(U,se),$&&n(A,null,[n("span",null,null),n(zl,{active:e.persistentCounter||y.value,value:E.value,max:l.value},U.counter)])])}:void 0})}),ml({},w,c,m)}}),dt=he({__name:"Extras",props:le({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:C}){const o=e,{convention:_,disabled:U=!1}=o,g=ge(e,"modelValue"),y=Je.getInstance(),b=x({});try{b.value=JSON.parse(g.value)}catch{}const p=x([]),E=x([]);H(o,()=>{d()}),H(b.value,c=>{for(const f in c)if(c[f].checked){const m=p.value.map(s=>{var t;return(t=s.Options)==null?void 0:t.find(a=>a.OptionUUID===f)});if(m&&m.length>0)try{const s=m[0];c[f].choiceId===""&&s&&s.Choices&&s.Choices.length>0&&(c[f].choiceId=s.Choices[0].TagUUID),c[f].price=s==null?void 0:s.Price}catch{}}else c[f].choiceId="",c[f].price=0;g.value=JSON.stringify(c),w()});const l=Q({get:()=>p.value.map(c=>c.ExtraUUID),set:()=>{}}),d=()=>{var f;const c=((f=o.items.find(m=>m.Title==="SelectedExtras"))==null?void 0:f.Value)||"[]";try{const m=JSON.parse(c);p.value=E.value.filter(s=>m.find(t=>t===s.ExtraUUID))||[],l.value=[...p.value.map(s=>s.ExtraUUID)],p.value.forEach(s=>{var t;(t=s.Options)==null||t.forEach(a=>{b.value[a.OptionUUID]||(b.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in _&&(y==null||y.getConventionExtras(_.ConventionUUID).then(c=>{c&&(E.value=c,d())}));const w=(c=void 0)=>{setTimeout(()=>C("change",c),100)};return(c,f)=>(u(),R(A,null,[B("h4",null,Y(c.label),1),n(oe,{opened:l.value,"onUpdate:opened":f[0]||(f[0]=m=>l.value=m)},{default:i(()=>[(u(!0),R(A,null,K(p.value,m=>(u(),S(vl,{key:m.ExtraUUID,value:m.ExtraUUID},{activator:i(({props:s})=>[n(j,ue({"prepend-icon":"mdi:mdi-group","append-icon":"",title:m.Name},s),null,16,["title"])]),default:i(()=>[m.Options?(u(!0),R(A,{key:0},K(m.Options,s=>(u(),S(j,{key:s.OptionUUID},{default:i(()=>[n(re,null,{default:i(()=>[n(X,{cols:"12",sm:"6"},{default:i(()=>[n(pe,{label:`${s.Name} ${s.Price&&s.Price>0?`(${h(Te).currencySymbol}${s.Price})`:""}`,modelValue:b.value[s.OptionUUID].checked,"onUpdate:modelValue":t=>b.value[s.OptionUUID].checked=t,disabled:h(U),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),s.Choices&&s.Choices.length>1&&b.value[s.OptionUUID].checked?(u(),S(X,{key:0,cols:"12",sm:"6"},{default:i(()=>[n(He,{items:s.Choices.map(t=>({value:t.TagUUID,title:t.Title})),modelValue:b.value[s.OptionUUID].choiceId,"onUpdate:modelValue":t=>b.value[s.OptionUUID].choiceId=t,"item-value":"value","item-title":"title",variant:"outlined",disabled:h(U),"hide-details":"",onChange:w},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):O("",!0)]),_:2},1024)]),_:2},1024))),128)):O("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ct=he({__name:"Interests",props:le({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:C}){const o=e,{convention:_,disabled:U=!1}=o,g=ge(e,"modelValue"),y=Je.getInstance(),b=x({});try{b.value=JSON.parse(g.value)}catch{}const p=x([]),E=x([]);H(b.value,c=>{g.value=JSON.stringify(c)});const l=x([]),d=()=>{var f;const c=((f=o.items.find(m=>m.Title==="SelectedInterests"))==null?void 0:f.Value)||"[]";try{const m=JSON.parse(c);p.value=E.value.filter(s=>m.find(t=>t===s.InterestUUID))||[],l.value=[...p.value.map(s=>s.InterestUUID)]}catch{}};"ConventionUUID"in _&&(y==null||y.getConventionInterests(_.ConventionUUID).then(c=>{c&&(E.value=c,d())})),H(o,()=>{d()});const w=(c=void 0)=>{setTimeout(()=>C("change",c),100)};return(c,f)=>(u(),R(A,null,[B("h4",null,Y(c.label),1),n(oe,{opened:l.value,"onUpdate:opened":f[0]||(f[0]=m=>l.value=m)},{default:i(()=>[(u(!0),R(A,null,K(p.value,m=>(u(),S(j,{key:m.InterestUUID},{default:i(()=>[n(re,null,{default:i(()=>[n(X,null,{default:i(()=>[n(pe,{label:`${m.Name} ${m.Price&&m.Price>0?`(${h(Te).currencySymbol}${m.Price})`:""}`,modelValue:b.value[m.InterestUUID],"onUpdate:modelValue":s=>b.value[m.InterestUUID]=s,disabled:h(U),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),vt=he({__name:"Tickets",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:C}){const o=e,{admin:_=!1,convention:U,disabled:g=!1}=o,y=ge(e,"modelValue"),b=Je.getInstance(),p=x({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{p.value=JSON.parse(y.value),"ticket"in p.value&&(p.value.Ticket=p.value.ticket),"addonsChecked"in p.value&&(p.value.AddonsChecked=p.value.addonsChecked),"componentsChecked"in p.value&&(p.value.ComponentsChecked=p.value.componentsChecked)}catch{}const E=x([]),l=x([]);H(p.value,t=>{y.value=JSON.stringify(t)});const d=x([]),w=x({required:(t,a=void 0)=>()=>{if(a==null){if(p.value.Ticket.length===0&&o.required)return"Must select at least one ticket option.";if(t&&t.ComponentsRequired>0&&p.value.Ticket.includes(t.TicketUUID||"")){let r=0;if(t.TicketComponents.forEach(v=>{p.value.ComponentsChecked.forEach(P=>{v.TicketUUID===P&&(r+=1)})}),r<t.ComponentsRequired)return`Must select ticket ${t.ComponentsRequired} component${t.ComponentsRequired===1?"":"s"}`}}return!0}}),c=()=>{var a;const t=((a=o.items.find(r=>r.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const r=JSON.parse(t);E.value=l.value.filter(v=>v.Type==="TICKET_TYPE_GROUP"&&r.find(P=>P===v.TicketUUID))||[],d.value=[...E.value.filter(v=>v.Type==="TICKET_TYPE_GROUP").map(v=>v.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(_)b==null||b.getConventionTickets(U.ConventionUUID).then(t=>{t&&(l.value=t,c())});else{const t=o.items.find(a=>a.Title==="SelectedTickets");t&&(b==null||b.getFieldTickets(t.FieldUUID).then(a=>{a&&(l.value=a,c())}))}H(o,()=>{c()});const f=t=>{p.value.Ticket.length>1&&p.value.Ticket.shift(),p.value.ComponentsChecked=[],s(t)},m=t=>{const a=l.value.find(r=>r.TicketUUID===p.value.Ticket[0]);if(a)for(;p.value.ComponentsChecked.length>a.ComponentsRequired;)p.value.ComponentsChecked.shift();s(t)},s=(t=void 0)=>{setTimeout(()=>C("change",t),100)};return(t,a)=>(u(),R(A,null,[B("h4",null,Y(t.label),1),n(oe,{opened:d.value,"onUpdate:opened":a[4]||(a[4]=r=>d.value=r)},{default:i(()=>[(u(!0),R(A,null,K(h(Be)(E.value.filter(r=>r.Type===h(Nl).TICKET_TYPE_GROUP)),r=>(u(),R(A,{key:r.TicketUUID},[r.Tickets.length>0?(u(),S(vl,{key:0,value:r.TicketUUID},{activator:i(({props:v})=>[n(j,ue(v,{"prepend-icon":"mdi:mdi-group",title:r.Name}),{default:i(()=>[n(we,{title:r.Description},null,8,["title"])]),_:2},1040,["title"])]),default:i(()=>[(u(!0),R(A,null,K(r.Tickets,v=>(u(),S(j,{key:v.TicketUUID},{default:i(()=>{var P;return[n(we,null,{default:i(()=>[N(Y(v.Description),1)]),_:2},1024),n(pe,{modelValue:p.value.Ticket,"onUpdate:modelValue":a[0]||(a[0]=I=>p.value.Ticket=I),value:v.TicketUUID,onChange:f,rules:[w.value.required(v)],"validate-on":"submit",disabled:h(g)||!((P=t.registrationGroup)!=null&&P.Registration.Leader)},{label:i(()=>[n(Se,{icon:v.RequiresAccommodation?"mdi:mdi-home":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+Y(`${v.Name} ${v.Price>0?`(${h(Te).currencySymbol}${v.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),p.value.Ticket.length>0&&v.TicketUUID===p.value.Ticket[0]?(u(),R(A,{key:0},[v.AddonTickets.length?(u(),S(oe,{key:0},{default:i(()=>[(u(!0),R(A,null,K(h(Be)(v.AddonTickets),I=>(u(),R(A,{key:I==null?void 0:I.TicketUUID},[I?(u(),S(j,{key:0},{default:i(()=>[n(be,null,{default:i(()=>{var M;return[n(pe,{modelValue:p.value.AddonsChecked,"onUpdate:modelValue":a[1]||(a[1]=F=>p.value.AddonsChecked=F),value:I.TicketUUID,onChange:a[2]||(a[2]=F=>{p.value.ComponentsChecked=[],s(F)}),disabled:h(g)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:i(()=>[n(Se,{icon:"mdi:mdi-home-plus",class:"mx-2"}),N(" "+Y(`${I.Name} ${I.Price>0?`(${h(Te).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),n(we,null,{default:i(()=>[N(Y(I.Description),1)]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128))]),_:2},1024)):O("",!0),v.TicketComponents.length?(u(),S(oe,{key:1},{default:i(()=>[(u(!0),R(A,null,K(h(Be)(v.TicketComponents),I=>(u(),R(A,{key:I==null?void 0:I.TicketUUID},[I?(u(),S(j,{key:0},{default:i(()=>[n(be,null,{default:i(()=>{var M;return[n(pe,{modelValue:p.value.ComponentsChecked,"onUpdate:modelValue":a[3]||(a[3]=F=>p.value.ComponentsChecked=F),value:I.TicketUUID,onChange:m,rules:[w.value.required(v,I)],"validate-on":"submit",disabled:h(g)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:i(()=>[n(Se,{icon:"mdi:mdi-home-plus",class:"mx-2"}),N(" "+Y(`${I.Name} ${I.Price>0?`(${h(Te).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),n(we,null,{default:i(()=>[N(Y(I.Description),1)]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128))]),_:2},1024)):O("",!0)],64)):O("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):O("",!0)],64))),128))]),_:1},8,["opened"])],64))}}),mt={key:0},ft=B("strong",null,"Your Sharing Group",-1),pt=["href","onClick"],ht=B("br",null,null,-1),gt=B("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Vt=B("strong",null,"Your Groups Accommodation",-1),Ut=B("br",null,null,-1),yt=B("small",null,"(in order of preference, controlled by group leader)",-1),bt=B("strong",null,"Accommodation Options",-1),It=B("br",null,null,-1),kt=B("strong",null,"Your Chosen Accommodation",-1),Ct=B("small",null,"(in order of preference)",-1),Dt=he({__name:"Accommodation",props:le({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change","update:items"],["update:modelValue"]),setup(e,{emit:C}){const o=e,{admin:_=!1,convention:U}=o,g=ge(e,"modelValue"),y=Ye(o,C,void 0,void 0,"items"),b=dl(),p=cl.getInstance(),E=x(Ue(g.value)),l=x([]),d=x(),w=x({sharing:!1}),c=()=>{try{const T=JSON.parse(o.data);T&&(w.value=T)}catch{}};c(),H(o,()=>{c(),o.registrationGroup&&(l.value=o.registrationGroup.Members,d.value=o.registrationGroup.Registration)}),H(E,T=>{g.value=Ue(T)},{deep:!0});const f=x(""),m=x(!1),s=()=>{var T;(T=d.value)!=null&&T.Leader&&b.getRegistrationInvite(U.ConventionUUID).then(D=>{if(D){const k=new URL(location.href);k.searchParams.set("token",D),f.value=k.toString()}})},t=()=>{ql(f.value),s(),m.value=!0,setTimeout(()=>m.value=!1,2200)},a=()=>{p.emit("registration.group.leave")},r=x([]);H(y,()=>{v()});const v=()=>{_?b.getConventionAccommodation(U.ConventionUUID).then(T=>{r.value=T.filter(D=>!!(y!=null&&y.value.find(k=>k.Value===D.AccommodationUUID)))||[]}):y.value.length>0&&b.getFieldAccommodation(y.value[0].FieldUUID).then(T=>{r.value=T.filter(D=>!!(y!=null&&y.value.find(k=>k.Value===D.AccommodationUUID)))||[]})};v(),(()=>{var T;if(o.registrationGroup)if(l.value=o.registrationGroup.Members,d.value=o.registrationGroup.Registration,(T=d.value)!=null&&T.Leader)s();else try{E.value=JSON.parse(o.registrationGroup.AccommodationData)}catch{}})();const I=x({column:0,id:""}),M=()=>{E.value.includes(I.value.id)||(I.value.column===0&&I.value.id!==""&&E.value.push(I.value.id),$())},F=()=>{const T=E.value.findIndex(D=>D===I.value.id);T>=0&&(E.value.splice(T,1),$())},te=()=>{if(I.value.column!==1)return;const T=E.value.findIndex(D=>D===I.value.id);T<=0||(nl(E.value,T,T-1),$())},W=()=>{if(I.value.column!==1)return;const T=E.value.findIndex(D=>D===I.value.id);T>=E.value.length-1||(nl(E.value,T,T+1),$())},$=(T=void 0)=>{setTimeout(()=>C("change",T),100)};return(T,D)=>(u(),R(A,null,[B("h4",null,Y(T.label),1),n(re,null,{default:i(()=>[n(X,{cols:"12"},{default:i(()=>{var k;return[l.value&&d.value&&w.value.sharing?(u(),R("div",mt,[ft,((k=l.value.find(L=>L.IsLeader))==null?void 0:k.UUID)!==d.value.RegistrationUUID?(u(),S(ie,{key:0,color:"red",variant:"text",onClick:a},{default:i(()=>[N("(leave group)")]),_:1})):O("",!0),n(oe,null,{default:i(()=>[n(j,null,{default:i(()=>{var L;return[n(be,{class:"float-left pr-2 font-weight-bold"},{default:i(()=>[N(" Leader: ")]),_:1}),N(" "+Y((L=l.value.find(de=>de.IsLeader))==null?void 0:L.Name),1)]}),_:1}),(u(!0),R(A,null,K(l.value,L=>(u(),R(A,{key:L.UUID},[L.IsLeader?O("",!0):(u(),S(j,{key:0},{default:i(()=>[n(be,{class:"float-left pr-2"},{default:i(()=>[N(" Member: ")]),_:1}),N(" "+Y(L.Name),1)]),_:2},1024))],64))),128))]),_:1}),n(Fl,{modelValue:m.value,"onUpdate:modelValue":D[0]||(D[0]=L=>m.value=L),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),f.value&&d.value.Leader?(u(),S(ie,{key:1,color:"blue"},{default:i(()=>[B("a",{href:f.value,onClick:rl(t,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,pt)]),_:1})):O("",!0),ht,gt])):O("",!0)]}),_:1})]),_:1}),d.value&&!d.value.Leader?(u(),S(re,{key:0},{default:i(()=>[n(X,{cols:"10",md:"5"},{default:i(()=>[Vt,Ut,yt,n(oe,null,{default:i(()=>[(u(!0),R(A,null,K(E.value.map(k=>r.value.find(L=>L.AccommodationUUID==k)).filter(k=>k!==void 0),(k,L)=>(u(),R(A,null,[k?(u(),S(j,{key:k.AccommodationUUID,title:`${L+1}. ${k.Name}`,class:qe(I.value.column===1&&I.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):O("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(u(),S(re,{key:1},{default:i(()=>[n(X,{cols:"12",md:"5"},{default:i(()=>[bt,It,n(oe,null,{default:i(()=>[(u(!0),R(A,null,K(r.value,k=>(u(),S(j,{key:k.AccommodationUUID,title:k.Name,class:qe(I.value.column===0&&I.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:L=>I.value={column:0,id:k.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:D[1]||(D[1]=L=>M())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),n(X,{cols:"12",md:"1"},{default:i(()=>[n(re,{class:"d-md-none"},{default:i(()=>[n(X,{cols:"12",class:"text-center"},{default:i(()=>[n(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[2]||(D[2]=k=>M()),color:"primary",title:"Select"}),N(" Â  "),n(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[3]||(D[3]=k=>F()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),n(re,{class:"d-none d-md-flex h-100 align-content-center"},{default:i(()=>[n(X,{cols:"12"},{default:i(()=>[n(ie,{icon:"mdi:mdi-arrow-right",size:"small",onClick:D[4]||(D[4]=k=>M()),color:"primary",title:"Select"})]),_:1}),n(X,{cols:"12"},{default:i(()=>[n(ie,{icon:"mdi:mdi-arrow-left",size:"small",onClick:D[5]||(D[5]=k=>F()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),n(X,{cols:"10",md:"5"},{default:i(()=>[kt,n(oe,null,{default:i(()=>[(u(!0),R(A,null,K(E.value.map(k=>r.value.find(L=>L.AccommodationUUID==k)).filter(k=>k!==void 0),(k,L)=>(u(),R(A,null,[k?(u(),S(j,{key:k.AccommodationUUID,title:`${L+1}. ${k.Name}`,class:qe(I.value.column===1&&I.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:de=>I.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:D[6]||(D[6]=de=>F())},null,8,["title","class","onClick"])):O("",!0)],64))),256))]),_:1}),Ct]),_:1}),n(X,{cols:"2",md:"1"},{default:i(()=>[n(re,{class:"d-flex h-100 align-content-center mt-3"},{default:i(()=>[n(X,{cols:"12"},{default:i(()=>[n(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[7]||(D[7]=k=>te()),color:"primary",title:"Higher Priority"})]),_:1}),n(X,{cols:"12"},{default:i(()=>[n(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[8]||(D[8]=k=>W()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),Tt=he({__name:"AgeCheck",props:le({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:C}){const o=e,_=Ye(o,C,void 0,void 0,"items"),U=ge(e,"modelValue"),g=x({required:l=>!o.required||!!l||"Required.",min:l=>{var a,r;const d=new Date,w=d.getFullYear(),c=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),f=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),m=((a=_.value.find(v=>v.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",s=((r=_.value.find(v=>v.Title=="BEFORE_DATE"))==null?void 0:r.Value)||`${w}-${c}-${f}`,t=p(s);return b(l,s,parseInt(m))||`You must be at least ${m} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),y=()=>(C("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),b=(l,d,w)=>{if(l>=d)return!1;const c=p(l),m=p(d).getTime()-c.getTime(),s=1e3*60*60*24*365.25;return m/s>=w},p=l=>{const[d,w,c]=l.split("-");return new Date(parseInt(d),parseInt(w)-1,parseInt(c))},E=(l=void 0)=>{setTimeout(()=>C("change",l),100)};return(l,d)=>(u(),S(ye,{modelValue:U.value,"onUpdate:modelValue":d[0]||(d[0]=w=>U.value=w),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:y,onChange:E},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),St=$e({...lt({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),At=Le()({name:"VRadio",props:St(),setup(e,C){let{slots:o}=C;return Ne(()=>n(pl,ue(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),o)),{}}});const Et=$e({height:{type:[Number,String],default:"auto"},...fl(),...il(tt(),["multiple"]),trueIcon:{type:ze,default:"$radioOn"},falseIcon:{type:ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),xt=Le()({name:"VRadioGroup",inheritAttrs:!1,props:Et(),emits:{"update:modelValue":e=>!0},setup(e,C){let{attrs:o,slots:_}=C;const U=Al(),g=Q(()=>e.id||`radio-group-${U}`),y=Ce(e,"modelValue");return Ne(()=>{const[b,p]=sl(o),[E,l]=_e.filterProps(e),[d,w]=pl.filterProps(e),c=_.label?_.label({label:e.label,props:{for:g.value}}):e.label;return n(_e,ue({class:["v-radio-group",e.class],style:e.style},b,E,{modelValue:y.value,"onUpdate:modelValue":f=>y.value=f,id:g.value}),{..._,default:f=>{let{id:m,messagesId:s,isDisabled:t,isReadonly:a}=f;return n(A,null,[c&&n(Zl,{id:m.value},{default:()=>[c]}),n(at,ue(d,{id:m.value,"aria-describedby":s.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:t.value,readonly:a.value,"aria-labelledby":c?m.value:void 0,multiple:!1},p,{modelValue:y.value,"onUpdate:modelValue":r=>y.value=r}),_)])}})}),{}}}),ol=he({__name:"FormField",props:le({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:le(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:C}){const o=e,{admin:_=!1,disabled:U=!1,persistentHint:g=!1,required:y=!1}=o,b=x(""),p=ge(e,"modelValue"),E=Ye(o,C,void 0,void 0,"field"),l=x(Ue(E.value)),d=x({maxlength:s=>!o.maxLength||s.length<=o.maxLength||`Maximum length is ${o.maxLength} characters. (Current length: ${s.length})`,minlength:s=>!o.minLength||s.length>=o.minLength||`Minimum length is ${o.minLength} characters. (Current length: ${s.length})`,required:s=>!o.required||!!s||"Required field."}),w=x(!1),c=x([]),f=x("");try{const s=JSON.parse(p.value);Array.isArray(s)?c.value=s:typeof s=="boolean"?w.value=s:f.value=p.value}catch{w.value=!1,c.value=[],f.value=p.value}H(w,()=>{p.value=JSON.stringify(w.value),C("input")}),H(c,()=>{p.value=JSON.stringify(c.value),C("input")},{deep:!0}),H(f,()=>{p.value=f.value,C("input")}),H(E.value,()=>{l.value.Type!==E.value.Type?(l.value=Ue(E.value),w.value=!1,c.value=[],f.value=""):l.value=Ue(E.value)});const m=(s=void 0)=>{C("change",s)};return(s,t)=>l.value.Type===h(ee).TEXT?(u(),S(ye,{key:0,modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=a=>f.value=a),hint:l.value.Hint,label:`${l.value.Label}${h(y)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(ee).DATE?(u(),S(ye,{key:1,modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(ee).NUMBER?(u(),S(ye,{key:2,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(ee).TEXTAREA?(u(),S(rt,{key:3,modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=a=>f.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(ee).CHECKBOX?(u(),R(A,{key:4},[l.value.Multiple?(u(!0),R(A,{key:0},K(l.value.Values,a=>(u(),S(pe,{key:a.ID,modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=r=>c.value=r),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,rules:[d.value.required],onChange:m},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(u(),S(pe,{key:1,modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=a=>w.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,required:h(y),rules:[a=>!h(y)||!!a||"You must tick to continue!"],onChange:m},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===h(ee).SELECT?(u(),R(A,{key:5},[!l.value.Autofill&&l.value.Multiple?(u(),S(He,{key:0,modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(u(),S(ul,{key:1,modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(u(),S(ul,{key:3,modelValue:f.value,"onUpdate:modelValue":t[9]||(t[9]=a=>f.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):O("",!0):(u(),S(He,{key:2,modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=a=>f.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(U)||!1,"persistent-hint":h(g)||!1,"error-messages":b.value,rules:[d.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===h(ee).RADIO?(u(),S(xt,{key:6,modelValue:f.value,"onUpdate:modelValue":t[10]||(t[10]=a=>f.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,rules:[d.value.required],onChange:m},{default:i(()=>[(u(!0),R(A,null,K(l.value.Values,a=>(u(),S(At,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(ee).ACCOMMODATION?(u(),S(Dt,{key:7,modelValue:c.value,"onUpdate:modelValue":t[11]||(t[11]=a=>c.value=a),admin:h(_),convention:s.convention,"registration-group":s.registrationGroup,data:s.field.Data,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,onChange:m},null,8,["modelValue","admin","convention","registration-group","data","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===h(ee).AGE?(u(),S(Tt,{key:8,modelValue:f.value,"onUpdate:modelValue":t[12]||(t[12]=a=>f.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===h(ee).EXTRAS?(u(),S(dt,{key:9,modelValue:f.value,"onUpdate:modelValue":t[13]||(t[13]=a=>f.value=a),convention:s.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,required:h(y),onChange:m},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===h(ee).INTERESTS?(u(),S(ct,{key:10,modelValue:f.value,"onUpdate:modelValue":t[14]||(t[14]=a=>f.value=a),convention:s.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,required:h(y),onChange:m},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===h(ee).TICKET?(u(),S(vt,{key:11,modelValue:f.value,"onUpdate:modelValue":t[15]||(t[15]=a=>f.value=a),admin:h(_),convention:s.convention,"registration-group":s.registrationGroup,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(U)||!1,"persistent-hint":h(g),"error-messages":b.value,required:h(y),onChange:m},null,8,["modelValue","admin","convention","registration-group","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):O("",!0)}}),Rt=B("strong",null,"These ticket options will be removed",-1),wt=B("br",null,null,-1),_t=B("strong",null,"These ticket options will be added",-1),$t=B("p",null,[N(" If you do not wish to attend for the same days please "),B("span",{class:"text-red-darken-1 font-weight-bold"},"reject"),N(" this join request. ")],-1),Lt=B("p",null,[N(" If you wish to adjust your choices to match the group leader's please "),B("span",{class:"text-green font-weight-bold"},"accept"),N(" this join request. ")],-1),Nt={key:0,class:"my-2"},Pt={key:1,class:"my-2"},Ot={key:0,class:"my-2"},Mt={key:1,class:"my-2"},ua=he({__name:"FormRenderer",props:le({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const C=ge(e,"modelValue");Ze(C.value.Sections),C.value.Sections.forEach(t=>{t.Fields&&Ze(t.Fields)});const o=x(),_=nt(),U=dl(),g=cl.getInstance(),y=x(!0),b=x(""),p=x(),E=(t,a=!1)=>{U.validateRegistrationInviteToken(d,a).then(r=>{r&&(p.value=r)}).catch(()=>{b.value="Invalid Token"})},d=new URL(location.href).searchParams.get("token")||"";d!==""?E():y.value=!1;const w=()=>{E(d,!0)},c=x((()=>{if(e.data!==void 0){const a=Ue(e.data);return C.value.Sections.forEach(r=>{r.Fields&&r.Fields.forEach(v=>{const P=e.data.Data.find(I=>I.SectionFieldUUID===v.SectionFieldUUID&&I.SectionFieldUUID==v.SectionFieldUUID);if(P)v.Value=P.Data;else{const I={ID:0,SubmissionDataUUID:Fe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:r.ID,SectionUUID:r.SectionUUID,SectionFieldID:v.ID,SectionFieldUUID:v.SectionFieldUUID,Data:v.Value};a.Data.push(I)}})}),a}const t={ID:0,SubmissionUUID:Fe(),FormID:C.value.ID,FormUUID:C.value.FormUUID,UserID:(_==null?void 0:_.ID)||0,UserUUID:(_==null?void 0:_.UserUUID)||"",Data:[]};return t.Data=C.value.Sections.map(a=>a.Fields?a.Fields.map(r=>({ID:0,SubmissionDataUUID:Fe(),SubmissionID:t.ID,SubmissionUUID:t.SubmissionUUID,SectionID:a.ID,SectionUUID:a.SectionUUID,SectionFieldID:r.ID,SectionFieldUUID:r.SectionFieldUUID,Data:r.Value})):[]).flat(),t})()),f=(t,a,r)=>{const v=c.value.Data.find(P=>P.SectionUUID===t&&P.SectionFieldUUID===a);v&&(v.Data=r)},m=({callback:t})=>{var a;(a=o.value)==null||a.validate().then(r=>{r.valid?U.saveSubmission(c.value).then(v=>{v?(c.value=v,t&&t("Saved")):t&&t("Failed to process request")}).catch(()=>{t&&t("Failed to process request")}):t&&t("Errors in form detected, please review and try again.")})},s=()=>{y.value=!1,g.emit("registration.group.join")};return(t,a)=>(u(),S(Ml,null,{default:i(()=>[y.value&&p.value?(u(),R(A,{key:0},[p.value.Match?(u(),S(Qe,{key:0},{default:i(()=>[n(ll,null,{default:i(()=>[n(We,null,{default:i(()=>[N(" Joined Group ")]),_:1}),n(el,{class:"text-wrap"},{default:i(()=>[N(" You have successfully linked your registration. The leader of your group will be responsible for deciding on accommodation. ")]),_:1})]),_:1}),n(tl,null,{default:i(()=>[N(" Your accommodation and ticket options that require accommodation will now be controlled by your group leader. ")]),_:1}),n(al,null,{default:i(()=>[n(Ge),n(ie,{color:"error",variant:"elevated",onClick:s},{default:i(()=>[N("Okay")]),_:1}),n(Ge)]),_:1})]),_:1})):(u(),S(Qe,{key:1},{default:i(()=>[n(ll,null,{default:i(()=>[n(We,null,{default:i(()=>[N(" Join Group - Warning ")]),_:1}),n(el,{class:"text-wrap"},{default:i(()=>[N(" The leader of the sharing group you're joining has selected different ticket options for the accommodation. ")]),_:1})]),_:1}),n(tl,null,{default:i(()=>[p.value.MemberTickets.length?(u(),R(A,{key:0},[Rt,wt,n(oe,null,{default:i(()=>[(u(!0),R(A,null,K(p.value.MemberTickets,r=>(u(),S(j,{key:r.TicketUUID},{default:i(()=>[n(be,null,{default:i(()=>[N(Y(r.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):O("",!0),p.value.LeaderTickets.length?(u(),R(A,{key:1},[_t,n(oe,null,{default:i(()=>[(u(!0),R(A,null,K(p.value.LeaderTickets,r=>(u(),S(j,{key:r.TicketUUID,"prepend-icon":"mdi:mdi-home"},{default:i(()=>[n(be,null,{default:i(()=>[N(Y(r.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):O("",!0),$t,Lt]),_:1}),n(al,null,{default:i(()=>[n(ie,{color:"error",variant:"elevated",onClick:a[0]||(a[0]=r=>y.value=!1)},{default:i(()=>[N("Reject")]),_:1}),n(Ge),n(ie,{color:"success",variant:"elevated",onClick:w},{default:i(()=>[N("Accept")]),_:1})]),_:1})]),_:1}))],64)):(u(),S(ut,{key:1,ref_key:"formValidator",ref:o,onSubmit:a[1]||(a[1]=rl(()=>{},["prevent"]))},{default:i(()=>[C.value.Heading?(u(),R("h2",Nt,Y(C.value.Heading),1)):O("",!0),C.value.Description?(u(),R("p",Pt,Y(C.value.Description),1)):O("",!0),(u(!0),R(A,null,K(C.value.Sections,r=>(u(),R(A,{key:`section_${C.value.ID}.${r.ID}`},[r.Heading?(u(),R("h3",Ot,Y(r.Heading),1)):O("",!0),r.Description?(u(),R("p",Mt,Y(r.Description),1)):O("",!0),r.Fields?(u(!0),R(A,{key:2},K(r.Fields,v=>(u(),R(A,{key:`field_${C.value.ID}.${r.ID}.${v.ID}`},[v.Field?(u(),S(re,{key:0},{default:i(()=>[n(X,null,{default:i(()=>[t.editable?(u(),S(ol,{key:0,field:v.Field,modelValue:v.Value,"onUpdate:modelValue":P=>v.Value=P,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:v.Required,"min-length":v.MinLength,"max-length":v.MaxLength,"persistent-hint":!0,onChange:P=>f(r.SectionUUID,v.SectionFieldUUID,v.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(u(),S(ol,{key:1,field:v.Field,modelValue:v.Value,"onUpdate:modelValue":P=>v.Value=P,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:v.Required,"min-length":v.MinLength,"max-length":v.MaxLength,"persistent-hint":!0,disabled:"",onChange:P=>f(r.SectionUUID,v.SectionFieldUUID,v.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128)):O("",!0)],64))),128)),t.editable&&!t.preview?(u(),S(re,{key:2},{default:i(()=>[n(X,null,{default:i(()=>[n(Gl,{onClick:m,type:"submit"})]),_:1})]),_:1})):O("",!0)]),_:1},512))]),_:1}))}});export{na as F,ul as V,ol as _,rt as a,ee as b,ua as c};
