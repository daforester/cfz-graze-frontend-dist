import{p as Bt,n as Gt,e as re,t as Ae,c as ya,G as ct,v as t,H as w,x as Oe,I as oe,a0 as de,a1 as Ie,r as A,K as se,M as f,N as F,O as a,a3 as pe,W as j,a2 as qe,a4 as te,S as z,w as ie,X as L,Q as b,V as R,P as V,_ as ot,ac as Ea,ad as Sa,E as $e,k as Da,f as Ia,d as Ra,o as Ca,ae as Vt,R as Oa,Y as Yt,Z as Ht,af as Va,ag as Je,z as ba,u as ha,ah as Ma,A as ka,B as Na,D as La,s as wa,ai as Xe,aj as bt,a7 as Pa,a6 as Fa,U as $a}from"./index-967cfea2.js";import{e as xa,T as Ba,V as jt,d as Ga,c as Ya}from"./FormRenderer.vue_vue_type_style_index_0_lang-4b947818.js";import{a as Ha,F as Se}from"./form-29fd1dbb.js";import{_ as Ve}from"./ModelDialog.vue_vue_type_script_setup_true_lang-e942d267.js";import{m as ja,k as qa,l as za,n as Qa,o as Ka,p as Wa,q as Ja,u as Xa,r as Za,s as el,t as tl,v as al,w as ll,x as nl,y as ol,z as ht,A as Mt,B as kt,a as qt,_ as zt,f as Nt,c as pt,d as Tt,e as yt,b as Et,V as St,h as Ze,g as Qt,i as et,j as Kt}from"./VWindowItem-556aebc4.js";import{V as X,a as N}from"./VRow-60517d8c.js";import{V as Ue}from"./VTextField-e79be815.js";import{V as fe}from"./copyToClipboard-3f3a53ef.js";import{u as Wt,j as ge,V as ft,b as il,m as sl,k as ul,c as rl,d as dl,l as ml,a as vl,n as cl}from"./VContainer-b9a72273.js";import{V as Jt,u as xe}from"./VCheckbox-a4b929e3.js";import{v as De}from"./v4-a960c1f4.js";import{h as Ye,b as Xt,a as fl,c as Ul,d as Lt,P as Ut,u as Zt}from"./useDisplayTransactions-bcd8e567.js";import{V as tt,a as He}from"./VList-31c628f1.js";import{V as q,a as _l,u as Al}from"./VBtn-f8a0e0f4.js";import{b as gl,c as ea,d as wt}from"./submission-6136b51d.js";import{G as ta}from"./group-d2a77946.js";import{C as aa}from"./canDo-2c299106.js";import{V as pl}from"./VAvatar-3ba8f1f0.js";import{s as Tl}from"./sortSubmissions-8ed80f07.js";import{V as Me,a as yl}from"./scopeId-6fe36af1.js";import{_ as at,V as la}from"./SaveButton.vue_vue_type_script_setup_true_lang-c3c1f3c8.js";import{V as El}from"./VForm-bf2bc50c.js";import{V as lt,b as _t,c as nt,d as Sl,e as ze}from"./VCard-93bac0e9.js";import{G as na}from"./userData-1159fef8.js";import{_ as Dl}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-08ecc64b.js";import{a as oa,V as At}from"./VToolbar-848429fe.js";import{V as Il}from"./VDivider-d375eca3.js";import{V as Rl}from"./VTextarea-8d493848.js";import{V as Cl,a as Ol}from"./VChip-336c7882.js";import{V as gt}from"./VDialog-36f11f3a.js";import{V as Vl,a as bl}from"./VAlert-74a5da03.js";import{S as hl}from"./setupLogin-7c06b97d.js";import{V as Ml}from"./forwardRefs-8d0a7c6b.js";import{u as mt}from"./nil-d01db1aa.js";import{V as Pt,a as kl}from"./VTable-422f262c.js";import"./index-26b71cef.js";import"./VToolbarItems-a64c285f.js";import"./createSimpleFunctional-e639ccd0.js";var ia=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(ia||{});const Nl=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var je=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(je||{});const Ll=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var ee=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_PAYMENT_STATUS="META_DATA_SOURCE_PAYMENT_STATUS",e.META_DATA_SOURCE_REGISTRATION_ACTIONS="META_DATA_SOURCE_REGISTRATION_ACTIONS",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(ee||{});const wl=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Actions",value:"META_DATA_SOURCE_REGISTRATION_ACTIONS"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Payment Status",value:"META_DATA_SOURCE_PAYMENT_STATUS"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var ne=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(ne||{});const Pl=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],Fl=e=>{switch(e){case"EMAIL_STATUS_QUEUED":return"Queued";case"EMAIL_STATUS_QUEUE_ERROR":return"Processing";case"EMAIL_STATUS_QUEUE_FAILURE":return"Internal Error";case"EMAIL_STATUS_SENDING":return"Sending";case"EMAIL_STATUS_SENT":return"Sent";case"EMAIL_STATUS_SEND_ERROR":return"Failed to Send"}return"Unknown"},$l=e=>e===void 0?!1:aa(e,ta.GROUP_TYPE_SYSTEM).ManageUsers,xl=Bt({itemsLength:{type:[Number,String],required:!0},...ja(),...qa(),...za()},"VDataTableServer"),Bl=Gt()({name:"VDataTableServer",props:xl(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,y)=>!0},setup(e,y){let{emit:i,slots:s}=y;const{groupBy:o}=Qa(e),{sortBy:c,multiSort:r,mustSort:l}=Ka(e),{page:g,itemsPerPage:E}=Wa(e),v=re(()=>parseInt(e.itemsLength,10)),{columns:u,headers:n}=Ja(e,{groupBy:o,showSelect:Ae(e,"showSelect"),showExpand:Ae(e,"showExpand")}),{items:m}=Xa(e,u),{toggleSort:d}=Za({sortBy:c,multiSort:r,mustSort:l,page:g}),{opened:x,isGroupOpen:k,toggleGroup:C,extractRows:D}=el({groupBy:o,sortBy:c}),{pageCount:O,setItemsPerPage:K}=tl({page:g,itemsPerPage:E,itemsLength:v}),{flatItems:G}=al(m,o,x),{isSelected:W,select:B,selectAll:_,toggleSelect:T,someSelected:h,allSelected:M}=ll(e,{allItems:m,currentPage:m}),{isExpanded:P,toggleExpand:Z}=nl(e),me=re(()=>D(m.value));ol({page:g,itemsPerPage:E,sortBy:c,groupBy:o,search:Ae(e,"search")}),ya("v-data-table",{toggleSort:d,sortBy:c}),ct({VDataTableRows:{hideNoData:Ae(e,"hideNoData"),noDataText:Ae(e,"noDataText"),loading:Ae(e,"loading"),loadingText:Ae(e,"loadingText")}});const ae=re(()=>({page:g.value,itemsPerPage:E.value,sortBy:c.value,pageCount:O.value,toggleSort:d,setItemsPerPage:K,someSelected:h.value,allSelected:M.value,isSelected:W,select:B,selectAll:_,toggleSelect:T,isExpanded:P,toggleExpand:Z,isGroupOpen:k,toggleGroup:C,items:me.value,groupedItems:G.value,columns:u.value,headers:n.value}));Wt(()=>{const[ke]=ht.filterProps(e),[Ne]=Mt.filterProps(e),[Le]=kt.filterProps(e),[we]=Pt.filterProps(e);return t(Pt,Oe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},we),{top:()=>{var _e;return(_e=s.top)==null?void 0:_e.call(s,ae.value)},default:()=>{var _e,ve,Re,Ce;return s.default?s.default(ae.value):t(w,null,[(_e=s.colgroup)==null?void 0:_e.call(s,ae.value),t("thead",{class:"v-data-table__thead",role:"rowgroup"},[t(Mt,Oe(Ne,{sticky:e.fixedHeader}),s)]),(ve=s.thead)==null?void 0:ve.call(s,ae.value),t("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[s.body?s.body(ae.value):t(kt,Oe(Le,{items:G.value}),s)]),(Re=s.tbody)==null?void 0:Re.call(s,ae.value),(Ce=s.tfoot)==null?void 0:Ce.call(s,ae.value)])},bottom:()=>s.bottom?s.bottom(ae.value):t(ht,ke,{prepend:s["footer.prepend"]})})})}}),Gl=oe({__name:"EditAdminLayout",props:de({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["save"],["update:modelValue"]),setup(e,{emit:y}){const i=Ie(e,"modelValue"),s=A(se(e.layout)),o=A([]),c=pe(),r=({callback:v})=>{const u=()=>{v&&v("Failed to Save Layout")},n=()=>{v&&v("Layout Saved")};c.saveAdminLayout(s.value).then(m=>{m?(n(),y("save",m)):u()}).catch(()=>{u()})},l=()=>({ID:0,LayoutPanelUUID:De(),AdminLayoutID:s.value.ID,AdminLayoutUUID:s.value.AdminLayoutUUID,Name:"",Order:s.value.Panels.length+1,Items:[],RequiredFormType:Se.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[]}),g=v=>()=>({ID:0,LayoutItemUUID:De(),LayoutPanelID:v.ID,LayoutPanelUUID:v.LayoutPanelUUID,Label:"",SourceType:je.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:v.Items.length+1,DefaultSort:!1}),E=v=>{const u=o.value.find(n=>n.value===v.SectionFieldUUID);u&&(v.SectionFieldID=u.object.ID,v.SectionField=u.object)};return c.getConventionForms(e.layout.ConventionUUID).then(v=>{v.forEach(u=>u.Sections.forEach(n=>n.Fields&&o.value.push(...n.Fields.map(m=>{var x;return{title:`${u.Name} - ${n.Name} - ${(x=m.Field)==null?void 0:x.Name}`,value:m.SectionFieldUUID,object:m}})))),o.value.sort(xa("title"))}),(v,u)=>(f(),F(Ve,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=n=>i.value=n),onSave:r,title:v.title,color:"primary",fullscreen:!0,persistent:!0},{default:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:s.value.Name,"onUpdate:modelValue":u[0]||(u[0]=n=>s.value.Name=n),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"6"},{default:a(()=>[t(fe,{modelValue:s.value.Type,"onUpdate:modelValue":u[1]||(u[1]=n=>s.value.Type=n),label:"Layout Type",items:j(Nl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(Nt,{modelValue:s.value.Panels,"onUpdate:modelValue":u[2]||(u[2]=n=>s.value.Panels=n),"new-item":l,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},qe({_:2},[te(s.value.Panels,(n,m)=>({name:`panel_${m}`,fn:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:n.Name,"onUpdate:modelValue":d=>n.Name=d,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(N,{cols:"12",sm:"6"},{default:a(()=>[t(fe,{modelValue:n.RequiredFormType,"onUpdate:modelValue":d=>n.RequiredFormType=d,items:j(Ha),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(qt,{label:"Required Groups",variant:"outlined",modelValue:n.RequiredGroupMemberships,"onUpdate:modelValue":d=>n.RequiredGroupMemberships=d,convention:s.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),t(N,{cols:"12",sm:"6"},{default:a(()=>[t(zt,{label:"Registration Tags",variant:"outlined",modelValue:n.RequiredRegistrationTags,"onUpdate:modelValue":d=>n.RequiredRegistrationTags=d,convention:s.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Nt,{modelValue:n.Items,"onUpdate:modelValue":d=>n.Items=d,"new-item":g(n),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},qe({_:2},[te(n.Items,(d,x)=>({name:`item_${x}`,fn:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:d.Label,"onUpdate:modelValue":k=>d.Label=k,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(fe,{modelValue:d.SourceType,"onUpdate:modelValue":k=>d.SourceType=k,label:"Source Type",items:j(Ll),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(N,{cols:"12",sm:"6"},{default:a(()=>[d.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(f(),F(fe,{key:0,modelValue:d.SectionFieldUUID,"onUpdate:modelValue":k=>d.SectionFieldUUID=k,label:"Form Data",items:o.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:k=>E(d)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):d.SourceType==="LAYOUT_ITEM_SOURCE_META"?(f(),F(fe,{key:1,modelValue:d.MetaField,"onUpdate:modelValue":k=>d.MetaField=k,label:"Miscellaneous Data",items:j(wl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):d.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(f(),F(fe,{key:2,modelValue:d.UserField,"onUpdate:modelValue":k=>d.UserField=k,label:"User Profile Data",items:j(Pl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):z("",!0)]),_:2},1024)]),_:2},1024),t(X,null,{default:a(()=>[t(N,null,{default:a(()=>[t(Jt,{modelValue:d.DefaultSort,"onUpdate:modelValue":k=>d.DefaultSort=k,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),Yl=L("br",null,null,-1),Hl=L("h3",null,"Assigned Accommodation",-1),jl=L("br",null,null,-1),ql=L("br",null,null,-1),zl=L("h3",null,"Accommodation Preferences",-1),Ql=L("h3",null,"Selected Tickets",-1),Kl=L("br",null,null,-1),Wl=oe({__name:"EditAccommodationAssignmentDialog",props:de({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:field"],["update:modelValue"]),setup(e,{emit:y}){const i=e,{convention:s,registration:o,title:c=""}=i,r=pe(),l=Ie(e,"modelValue"),g=A({capacity:{max:_=>{var M;const T=O.value.find(P=>P.room.RoomUUID===_);return!T||T.room.MaximumCapacity===0?!0:(((M=n.value)==null?void 0:M.Members.length)||0)<=T.room.MaximumCapacity||"Too many people in the group for this room"},min:_=>{var M;const T=O.value.find(P=>P.room.RoomUUID===_);return!T||T.room.MinimumCapacity===0?!0:(((M=n.value)==null?void 0:M.Members.length)||0)>=T.room.MinimumCapacity||"Not enough people in the group for this room"}}}),E=A([]),v=xe(i,y,void 0,void 0,"field"),u=A(se(v.value));ie(v,()=>{u.value=se(v.value)});const n=A(),m=A(""),d=A(""),x=A([]),k=A({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),C=async()=>{var M;const _=await r.getConventionAvailableAccommodation(s.ConventionUUID);_&&(E.value=_);const T=await r.getRegistrationGroup(o.RegistrationUUID||"");T&&(n.value=T);const h=await r.getConventionTickets(s.ConventionUUID);h&&(x.value=h);try{k.value=JSON.parse(((M=n.value)==null?void 0:M.TicketData)||"")}catch{}};ie(m,()=>{d.value=O.value.length>0?O.value[0].value:""});const D=re(()=>{const _=K.value;return E.value.map(T=>{let h;return _.forEach(M=>{T.Costs.forEach(P=>{P.DateStart===(M==null?void 0:M.DateStart)&&P.DateEnd===M.DateEnd&&(h===void 0||h>P.Availability)&&(h=P.Availability)})}),{label:`${T.Name}`,title:`${T.Name} (${h} Available)`,value:T.AccommodationUUID}})}),O=re(()=>{const _=K.value,T=E.value.find(h=>h.AccommodationUUID===m.value);return(T==null?void 0:T.Pool.map(h=>{var P,Z;let M;return _.forEach(me=>{h.Costs.forEach(ae=>{ae.DateStart===(me==null?void 0:me.DateStart)&&ae.DateEnd===me.DateEnd&&(M===void 0||M>ae.Availability)&&(M=ae.Availability)})}),{label:`${(P=h.Venue)==null?void 0:P.Name} - ${h.Name}`,title:`${(Z=h.Venue)==null?void 0:Z.Name} - ${h.Name} (${M} Available)`,value:h.RoomUUID,room:h}}))||[]}),K=re(()=>[...k.value.Ticket,...k.value.AddonsChecked,...k.value.ComponentsChecked].map(_=>x.value.find(T=>T.TicketUUID===_)).filter(_=>_!==void 0&&_.RequiresAccommodation)),G=_=>{var T;r.assignAccommodation(((T=n.value)==null?void 0:T.Registration.RegistrationUUID)||"",m.value,d.value,!1).then(h=>{h?(C(),_&&_("Room Assigned")):_&&_("Room not assigned")}).catch(()=>{_&&_("Room not assigned")})},W=_=>{var T,h;(T=n.value)!=null&&T.Registration.AllocationUUID?r.deleteAllocation(((h=n.value)==null?void 0:h.Registration.AllocationUUID)||"").then(M=>{M?(C(),_&&_("Allocation Deleted")):_&&_("Allocation not deleted")}).catch(()=>{_&&_("Allocation not deleted")}):_&&_("Nothing to Delete")},B=_=>{var h,M;const T=(h=E.value.find(P=>P.AccommodationUUID===_.AccommodationUUID))==null?void 0:h.Pool;if(T){const P=T.find(Z=>Z.RoomUUID===_.RoomUUID);if(P)return`${(M=P.Venue)==null?void 0:M.Name} - ${P.Name}`}return""};return C(),(_,T)=>{var h;return f(),F(Ve,{modelValue:l.value,"onUpdate:modelValue":T[2]||(T[2]=M=>l.value=M),title:j(c),color:"primary","show-close-action":!0,"show-delete-action":!!((h=n.value)!=null&&h.Registration.Allocation),"show-save-action":!!d.value,"save-button-label":"Assign Room",onDelete:W,onSave:G,fullscreen:!0,persistent:!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>{var M;return[t(N,{cols:"12",md:"6"},{default:a(()=>{var P,Z;return[L("h3",null,"Group Members ("+b((P=n.value)==null?void 0:P.Members.length)+")",1),(f(!0),R(w,null,te((Z=n.value)==null?void 0:Z.Members,me=>(f(),R(w,{key:me.UUID},[V(" #"+b(me.Reference)+" "+b(me.Name),1),Yl],64))),128))]}),_:1}),(M=n.value)!=null&&M.Registration.Allocation?(f(),F(N,{key:0,cols:"12",md:"6"},{default:a(()=>[Hl,t(tt,null,{default:a(()=>{var P;return[(f(!0),R(w,null,te((P=n.value)==null?void 0:P.Registration.Allocation.Periods,Z=>(f(),F(He,{key:Z.AllocationPeriodUUID},{default:a(()=>{var me;return[V(b((me=E.value.find(ae=>ae.AccommodationUUID===Z.AccommodationUUID))==null?void 0:me.Name)+" ",1),jl,V(" "+b(B(Z))+" ",1),ql,L("small",null,"("+b(j(Ye)(Z.DateStart))+" - "+b(j(Ye)(Z.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):z("",!0)]}),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12",md:"6"},{default:a(()=>[_.selectedAccommodation.length?(f(),R(w,{key:0},[zl,t(tt,null,{default:a(()=>[(f(!0),R(w,null,te(_.selectedAccommodation,(M,P)=>(f(),F(He,{key:M.AccommodationUUID},{default:a(()=>[V(b(P+1)+". "+b(M.Name),1)]),_:2},1024))),128))]),_:1})],64)):z("",!0)]),_:1}),t(N,{cosl:"12",md:"6"},{default:a(()=>[Ql,t(tt,null,{default:a(()=>[(f(!0),R(w,null,te(K.value,M=>(f(),F(He,{key:M==null?void 0:M.TicketUUID},{default:a(()=>[V(b(M.Name)+" ",1),Kl,L("small",null,"("+b(j(Ye)(M.DateStart))+" - "+b(j(Ye)(M.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12",md:"6"},{default:a(()=>[t(fe,{modelValue:m.value,"onUpdate:modelValue":T[0]||(T[0]=M=>m.value=M),items:D.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),t(N,{cols:"12",md:"6"},{default:a(()=>[t(fe,{modelValue:d.value,"onUpdate:modelValue":T[1]||(T[1]=M=>d.value=M),items:O.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[g.value.capacity.min,g.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),Jl={key:0,class:"accommodationList"},Xl={key:0,class:"text-orange-darken-2"},Zl=oe({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},forms:{},registration:{},tickets:{default:()=>[]},value:{default:""},venues:{}},setup(e){const y=A(!1),i=re(()=>{if(!e.value)return[];const o=JSON.parse(e.value),c=e.accommodations.filter(r=>o.includes(r.AccommodationUUID)).sort((r,l)=>{const g=o.findIndex(v=>v===r.AccommodationUUID),E=o.findIndex(v=>v===l.AccommodationUUID);return g>E?1:-1});return se(c)}),s=re(()=>{let o;const c=e.forms.find(r=>r.Sections.find(l=>{var g;return(g=l.Fields)==null?void 0:g.find(E=>{var v;if(((v=E.Field)==null?void 0:v.Type)==="TICKET")return o=E,!0})}));return o?!!e.registration.Submissions.find(r=>{if(r.FormUUID==(c==null?void 0:c.FormUUID))return r.Data.find(l=>{if(l.SectionFieldUUID==(o==null?void 0:o.SectionFieldUUID)){const g=JSON.parse(l.Data);return e.tickets.filter(E=>E.RequiresAccommodation).find(E=>g.Ticket.includes(E.TicketUUID)||g.AddonsChecked.includes(E.TicketUUID)||g.ComponentsChecked.includes(E.TicketUUID))}})}):!1});return(o,c)=>s.value?(f(),R(w,{key:0},[o.value?(f(),R("ol",Jl,[(f(!0),R(w,null,te(i.value,r=>(f(),R("li",{key:r.AccommodationUUID},[o.registration&&o.registration.Allocation&&o.registration.Allocation.Periods.find(l=>l.AccommodationUUID===r.AccommodationUUID)?(f(),R("strong",Xl,b(r.Name),1)):(f(),R(w,{key:1},[V(b(r.Name),1)],64))]))),128))])):z("",!0),t(q,{onClick:c[0]||(c[0]=r=>y.value=!0),variant:"flat",color:"success"},{default:a(()=>[V("Assign Accommodation")]),_:1}),o.convention&&y.value?(f(),F(Wl,{key:1,modelValue:y.value,"onUpdate:modelValue":c[1]||(c[1]=r=>y.value=r),title:"Accommodation Allocation",convention:o.convention,registration:o.registration,"selected-accommodation":i.value},null,8,["modelValue","convention","registration","selected-accommodation"])):z("",!0)],64)):z("",!0)}});const en=ot(Zl,[["__scopeId","data-v-7a102d46"]]),tn={key:0,class:"addonList"},an={key:0},ln={key:0},nn=oe({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const y=re(()=>{if(!e.value)return;const i=JSON.parse(e.value),s=Object.keys(i),o=se(e.extras);return o.forEach(c=>{c.Options=c.Options.filter(r=>s.includes(r.OptionUUID)?(r.Choices=r.Choices.filter(l=>l.TagUUID===i[r.OptionUUID].choiceId),i[r.OptionUUID].checked):!1)}),o.filter(c=>c.Options.length>0),o});return(i,s)=>i.value?(f(),R("ul",tn,[(f(!0),R(w,null,te(y.value,o=>(f(),R(w,{key:o.ExtraUUID},[o.Options.length?(f(),R("li",an,[L("strong",null,b(o.Name),1),L("ul",null,[(f(!0),R(w,null,te(o.Options,c=>(f(),R("li",{key:c.OptionUUID},[V(b(c.Name)+" ",1),c.Choices.length==1?(f(),R("small",ln,"("+b(c.Choices[0].Title)+")",1)):z("",!0)]))),128))])])):z("",!0)],64))),128))])):z("",!0)}});const on=ot(nn,[["__scopeId","data-v-55786e01"]]),sn={key:0},un=oe({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const y=re(()=>{if(!e.value)return;const i=JSON.parse(e.value);return Object.entries(i).filter(([,s])=>s).map(([s,o])=>e.interests.find(c=>c.InterestUUID===s)).filter(s=>s!==void 0)});return(i,s)=>i.value?(f(),R("ul",sn,[(f(!0),R(w,null,te(y.value,o=>(f(),R("li",{key:o.InterestUUID},b(o.Name),1))),128))])):z("",!0)}}),rn=L("br",null,null,-1),dn=L("small",null,"Options:",-1),mn=L("br",null,null,-1),vn=L("small",null,"Addons:",-1),cn=oe({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const y=re(()=>{if(!e.value)return;let i={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{i=JSON.parse(e.value),"ticket"in i&&(i.Ticket=i.ticket),"addonsChecked"in i&&(i.AddonsChecked=i.addonsChecked),"componentsChecked"in i&&(i.ComponentsChecked=i.componentsChecked)}catch{}return i.Ticket.filter(s=>{const o=e.tickets.find(c=>c.TicketUUID===s);return!(!o||o.Type!==Ba.TICKET_TYPE_TICKET)}).map(s=>{const o=e.tickets.find(r=>r.TicketUUID===s),c=se(o);return c.TicketComponents=o.TicketComponents.filter(r=>i.ComponentsChecked.includes(r.TicketUUID)),c.AddonTickets=o.AddonTickets.filter(r=>i.AddonsChecked.includes(r.TicketUUID)),c})});return(i,s)=>i.value?(f(!0),R(w,{key:0},te(y.value,o=>(f(),R("div",{key:o.TicketUUID},[L("strong",null,b(o.Name),1),o.TicketComponents.length>0?(f(),R(w,{key:0},[rn,dn,V("  "),(f(!0),R(w,null,te(o.TicketComponents,c=>(f(),R(w,{key:c.TicketUUID},[L("small",null,b(c.Name),1),V("  ")],64))),128))],64)):z("",!0),o.AddonTickets.length>0?(f(),R(w,{key:1},[mn,vn,V("  "),(f(!0),R(w,null,te(o.AddonTickets,c=>(f(),R("small",{key:c.TicketUUID},[V("("),L("em",null,b(c.Name),1),V(")")]))),128))],64)):z("",!0)]))),128)):z("",!0)}}),fn={key:0,class:"text-blue text-center"},Un={key:1,class:"text-red text-center"},_n={key:2,class:"text-orange text-center"},An={key:3,class:"text-orange text-center"},gn={key:4,class:"text-orange text-center"},pn={key:5,class:"text-orange text-center"},Tn={key:6,class:"text-green text-center"},yn={key:0},En={key:0},Sn=L("strong",null,"Total:",-1),Dn=oe({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},forms:{},item:{},interests:{},tickets:{},user:{},venues:{}},emits:["openActions","openPayments","openTags","reload","showForm","switchUser"],setup(e,{emit:y}){const i=(l,g,E)=>{y("showForm",{registration:l,form:g,submission:E})},s=l=>{y("openActions",l)},o=l=>{y("openPayments",l)},c=l=>{y("openTags",l)},r=l=>{y("switchUser",l)};return(l,g)=>l.header.type==="ACCOMMODATION"&&l.accommodations.length>0&&l.item.raw[l.header.key]?(f(),F(en,{key:0,value:l.item.raw[l.header.key].Data,accommodations:l.accommodations,convention:l.convention,forms:l.forms,tickets:l.tickets,venues:l.venues,registration:l.item.raw[l.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):l.header.type==="EXTRAS"&&l.extras.length>0?(f(),F(on,{key:1,value:l.item.raw[l.header.key],extras:l.extras},null,8,["value","extras"])):l.header.type==="INTERESTS"&&l.interests.length>0?(f(),F(un,{key:2,value:l.item.raw[l.header.key],interests:l.interests},null,8,["value","interests"])):l.header.type==="TICKET"&&l.tickets.length>0?(f(),F(cn,{key:3,value:l.item.raw[l.header.key],tickets:l.tickets},null,8,["value","tickets"])):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(f(!0),R(w,{key:4},te(l.item.raw[l.header.key],E=>(f(),R("ul",{key:E.Heading},[L("li",null,[L("strong",null,b(E.Heading)+": ",1),L("span",{class:Ea(j(gl)(E.Submission.Status))},b(j(ea)(E.Submission.Status)),3),t(q,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:v=>i(E.Registration,E.Form,E.Submission)},null,8,["onClick"])])]))),128)):l.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(f(),F(pl,{key:5,class:"rounded-circle",src:l.item.raw[l.header.key],height:"32",width:"32"},null,8,["src"])):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(f(),R(w,{key:6},[l.item.raw[l.header.key]=="NOT_REQUIRED"?(f(),R("div",fn,"No Payment Requested")):l.item.raw[l.header.key]=="MISSING_REQUIRED"?(f(),R("div",Un,"Partner Payment Not Requested")):l.item.raw[l.header.key]=="AWAITING_PARTNER"?(f(),R("div",_n,"Awaiting Partner Payment")):l.item.raw[l.header.key]=="ALL_REQUIRED"?(f(),R("div",An,"Awaiting Payments")):l.item.raw[l.header.key]=="REQUIRED"?(f(),R("div",gn,"Awaiting Payment")):l.item.raw[l.header.key]=="ADDITIONAL_REQUIRED"?(f(),R("div",pn,"Awaiting Additional Payments")):(f(),R("div",Tn,"Completed"))],64)):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(f(),R(w,{key:7},[t(q,{icon:"mdi:mdi-email-fast",variant:"flat",onClick:g[0]||(g[0]=E=>s(l.item.raw[l.header.key]))}),t(q,{icon:"mdi:mdi-cash-multiple",variant:"flat",onClick:g[1]||(g[1]=E=>o(l.item.raw[l.header.key]))}),t(q,{icon:"mdi:mdi-tag-text",variant:"flat",onClick:g[2]||(g[2]=E=>c(l.item.raw[l.header.key]))}),j($l)(l.user)?(f(),F(q,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:g[3]||(g[3]=E=>r(l.item.raw[l.header.key]))})):z("",!0)],64)):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(f(),R(w,{key:8},[l.item.raw[l.header.key].length===1?(f(),R("em",yn," Not in a group ")):(f(),R(w,{key:1},[L("ul",null,[(f(!0),R(w,null,te(l.item.raw[l.header.key],E=>(f(),R("li",{key:E.UUID,class:"ml-0"},[V(" #"+b(E.Reference)+" : "+b(E.Name)+" ",1),E.IsLeader?(f(),R("strong",En,"(Leader)")):z("",!0)]))),128))]),Sn,V(" "+b(l.item.raw[l.header.key].length),1)],64))],64)):(f(),R(w,{key:9},[V(b(l.item.raw[l.header.key]),1)],64))}});var In=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Rn=function(e){return In.map(function(y){return y.toLowerCase()}).indexOf(e.toLowerCase())!==-1},Cn=function(e,y,i){Object.keys(y).filter(Rn).forEach(function(s){var o=y[s];typeof o=="function"&&(s==="onInit"?o(e,i):i.on(s.substring(2),function(c){return o(c,i)}))})},On=function(e,y,i,s){var o=e.modelEvents?e.modelEvents:null,c=Array.isArray(o)?o.join(" "):o;ie(s,function(r,l){i&&typeof r=="string"&&r!==l&&r!==i.getContent({format:e.outputFormat})&&i.setContent(r)}),i.on(c||"change input undo redo",function(){y.emit("update:modelValue",i.getContent({format:e.outputFormat}))})},Vn=function(e,y,i,s,o,c){s.setContent(c()),i.attrs["onUpdate:modelValue"]&&On(y,i,s,o),Cn(e,i.attrs,s)},Ft=0,sa=function(e){var y=Date.now(),i=Math.floor(Math.random()*1e9);return Ft++,e+"_"+i+Ft+String(y)},bn=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},$t=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},hn=function(e,y){return $t(e).concat($t(y))},Mn=function(e){return e==null},xt=function(){return{listeners:[],scriptId:sa("tiny-script"),scriptLoaded:!1}},kn=function(){var e=xt(),y=function(o,c,r,l){var g=c.createElement("script");g.referrerPolicy="origin",g.type="application/javascript",g.id=o,g.src=r;var E=function(){g.removeEventListener("load",E),l()};g.addEventListener("load",E),c.head&&c.head.appendChild(g)},i=function(o,c,r){e.scriptLoaded?r():(e.listeners.push(r),o.getElementById(e.scriptId)||y(e.scriptId,o,c,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},s=function(){e=xt()};return{load:i,reinitialize:s}},Nn=kn(),Ln=function(){return typeof window<"u"?window:global},he=function(){var e=Ln();return e&&e.tinymce?e.tinymce:null},wn={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},Te=globalThis&&globalThis.__assign||function(){return Te=Object.assign||function(e){for(var y,i=1,s=arguments.length;i<s;i++){y=arguments[i];for(var o in y)Object.prototype.hasOwnProperty.call(y,o)&&(e[o]=y[o])}return e},Te.apply(this,arguments)},Pn=function(e,y,i,s){return e(s||"div",{id:y,ref:i})},Fn=function(e,y,i){return e("textarea",{id:y,visibility:"hidden",ref:i})},vt={selector:void 0,target:void 0},$n=oe({props:wn,setup:function(e,y){var i=e.init?Te(Te({},e.init),vt):Te({},vt),s=Sa(e),o=s.disabled,c=s.modelValue,r=s.tagName,l=A(null),g=null,E=e.id||sa("tiny-vue"),v=e.init&&e.init.inline||e.inline,u=!!y.attrs["onUpdate:modelValue"],n=!0,m=e.initialValue?e.initialValue:"",d="",x=function(D){return u?function(){return c!=null&&c.value?c.value:""}:function(){return D?m:d}},k=function(){var D=x(n),O=Te(Te({},i),{readonly:e.disabled,target:l.value,plugins:hn(i.plugins,e.plugins),toolbar:e.toolbar||i.toolbar,inline:v,setup:function(K){g=K,K.on("init",function(G){return Vn(G,e,y,K,c,D)}),typeof i.setup=="function"&&i.setup(K)}});bn(l.value)&&(l.value.style.visibility=""),he().init(O),n=!1};ie(o,function(D){var O;g!==null&&(typeof((O=g.mode)===null||O===void 0?void 0:O.set)=="function"?g.mode.set(D?"readonly":"design"):g.setMode(D?"readonly":"design"))}),ie(r,function(D){var O;u||(d=g.getContent()),(O=he())===null||O===void 0||O.remove(g),$e(function(){return k()})}),Da(function(){if(he()!==null)k();else if(l.value&&l.value.ownerDocument){var D=e.cloudChannel?e.cloudChannel:"6",O=e.apiKey?e.apiKey:"no-api-key",K=Mn(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(O,"/tinymce/").concat(D,"/tinymce.min.js"):e.tinymceScriptSrc;Nn.load(l.value.ownerDocument,K,k)}}),Ia(function(){he()!==null&&he().remove(g)}),v||(Ra(function(){n||k()}),Ca(function(){var D;u||(d=g.getContent()),(D=he())===null||D===void 0||D.remove(g)}));var C=function(D){var O;d=g.getContent(),(O=he())===null||O===void 0||O.remove(g),i=Te(Te(Te({},i),D),vt),$e(function(){return k()})};return y.expose({rerender:C,getEditor:function(){return g}}),function(){return v?Pn(Vt,E,l,e.tagName):Fn(Vt,E,l)}}});const xn=["colspan"],Bn=L("strong",null,"E-Mail Content",-1),Gn=["innerHTML"],ua=oe({__name:"Communications",props:{hideHistory:{type:Boolean,default:!1},registration:{},showEditor:{type:Boolean}},emits:["close-editor"],setup(e,{emit:y}){const i=pe(),s=A([]),o=A({From:"",Subject:"",HTML:""}),c=A(""),r=A(""),l=A(""),g=A(!1),E=A([]),v=A(["1"]),u=A([]),n=A([{key:"CreatedAt",title:"Date"},{key:"Subject",title:"Subject"},{key:"User.DisplayName",title:"Sender"},{key:"Status",title:"Status"}]),m=A([{key:"CreatedAt",order:"asc"}]);ie(o,C=>{l.value=C.From||l.value||"",r.value=C.Subject||r.value||"",c.value=C.HTML||c.value||""});const d=()=>{i.getRegistrationEmails(e.registration.RegistrationUUID).then(C=>{C&&(C.forEach(D=>{D.CreatedAt=Xt(new Date(D.CreatedAt||"")),D.Status=Fl(D.Status),D.User||(D.User={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),u.value=C)})};d(),(()=>{i.getRegistrationEmailTemplates(e.registration.RegistrationUUID).then(C=>{C&&(s.value=C)})})();const k=({callback:C})=>{i.sendRegistrationEmail(e.registration.RegistrationUUID,l.value,r.value,c.value).then(D=>{D?C&&(C("Email Sent"),d(),setTimeout(()=>{g.value=!1},2e3)):C&&C("Not sent")}).catch(()=>{C&&C("Not sent")})};return(C,D)=>(f(),R(w,null,[C.showEditor?(f(),R(w,{key:0},[t(X,null,{default:a(()=>[t(N,null,{default:a(()=>[t(jt,{items:s.value,"item-title":"Subject","return-object":"",label:"Template","hide-details":"",modelValue:o.value,"onUpdate:modelValue":D[0]||(D[0]=O=>o.value=O),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12"},{default:a(()=>[t(Ue,{modelValue:l.value,"onUpdate:modelValue":D[1]||(D[1]=O=>l.value=O),label:"From",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12"},{default:a(()=>[t(Ue,{modelValue:r.value,"onUpdate:modelValue":D[2]||(D[2]=O=>r.value=O),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12"},{default:a(()=>[t(j($n),{modelValue:c.value,"onUpdate:modelValue":D[3]||(D[3]=O=>c.value=O),"api-key":"g9sce3fktcgvk0i7sp96cahgyk4cos7q27es3ubnlal3xf3z"},null,8,["modelValue"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,null,{default:a(()=>[t(at,{onClick:D[4]||(D[4]=O=>y("close-editor")),label:"Close E-mail Editor",color:"secondary","prepend-icon":"mdi:mdi-window-close"})]),_:1}),t(N,{class:"text-right"},{default:a(()=>[t(at,{onClick:k,label:"Send",color:"error"})]),_:1})]),_:1})],64)):z("",!0),u.value.length&&!C.hideHistory?(f(),F(St,{key:1,class:"my-2",multiple:!0,modelValue:v.value,"onUpdate:modelValue":D[7]||(D[7]=O=>v.value=O)},{default:a(()=>[t(Et,{value:"1"},{default:a(()=>[t(pt,null,{default:a(()=>[V(" Email History ")]),_:1}),t(Tt,null,{default:a(()=>[t(j(yt),{items:u.value,headers:n.value,"show-expand":!0,"item-value":"EmailUUID",expanded:E.value,"onUpdate:expanded":D[5]||(D[5]=O=>E.value=O),"sort-by":m.value,"onUpdate:sortBy":D[6]||(D[6]=O=>m.value=O)},{"expanded-row":a(({columns:O,item:K})=>[L("tr",null,[L("td",{colspan:O.length},[Bn,L("div",{class:"communicationsViewEmailPreview",innerHTML:K.raw.HTML},null,8,Gn)],8,xn)])]),"footer.prepend":a(()=>[t(q,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:d},{default:a(()=>[V("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):z("",!0)],64))}});const Yn=oe({__name:"StripeRefundPayment",props:de({paymentTransaction:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["refunded"],["update:modelValue"]),setup(e,{emit:y}){const i=Ie(e,"modelValue"),s=pe(),o=A(!1),c=A("");let r=0;if(e.paymentTransaction.Data&&e.paymentTransaction.Data.PaymentIntent&&typeof e.paymentTransaction.Data.PaymentIntent=="object"){const n=e.paymentTransaction.Data.PaymentIntent;n&&(r=n.amount)}const l=A({Amount:r/100,Description:"",Reason:""}),g=A([{title:"Duplicate",value:"duplicate"},{title:"Fraudulent",value:"fraudulent"},{title:"Requested By Customer",value:"requested_by_customer"}]),E=A(!1);async function v(n){n.preventDefault(),E.value=!0,s.refundStripePayment(e.paymentTransaction.PaymentTransactionUUID,l.value).then(m=>{m?y("refunded",m):u("An unexpected error occurred.")}).catch(m=>{u("An error occurred processing the refund: "+m.toString())}),E.value=!1}const u=n=>{c.value=n,o.value=!0};return(n,m)=>(f(),F(Ve,{modelValue:i.value,"onUpdate:modelValue":m[7]||(m[7]=d=>i.value=d),title:"Refund a Stripe Payment",color:"blue-darken-4",persistent:""},{default:a(()=>[t(ge,{class:"pa-0"},{default:a(()=>[t(El,{ref:"refundForm",id:"refund-form",onSubmit:m[4]||(m[4]=Oa(d=>v(d),["prevent"]))},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:a(()=>[t(Ue,{modelValue:l.value.Amount,"onUpdate:modelValue":m[0]||(m[0]=d=>l.value.Amount=d),modelModifiers:{number:!0},label:"Amount",prefix:"£",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"6",md:"8",lg:"9",xl:"10"},{default:a(()=>[t(fe,{modelValue:l.value.Reason,"onUpdate:modelValue":m[1]||(m[1]=d=>l.value.Reason=d),modelModifiers:{number:!0},items:g.value,"item-title":"title","item-value":"value",label:"Stripe Refund Reason",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(N,{cols:"12"},{default:a(()=>[t(Ue,{modelValue:l.value.Description,"onUpdate:modelValue":m[2]||(m[2]=d=>l.value.Description=d),modelModifiers:{number:!0},label:"Refund Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:a(()=>[t(q,{color:"error",class:"w-100",onClick:m[3]||(m[3]=d=>i.value=!1)},{default:a(()=>[V("Cancel")]),_:1})]),_:1}),t(Me),t(N,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:a(()=>[t(q,{type:"submit",color:"success",class:"w-100"},qe({default:a(()=>[V(" Issue Refund ")]),_:2},[E.value?{name:"prepend",fn:a(()=>[t(_l,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),t(la,{modelValue:o.value,"onUpdate:modelValue":m[6]||(m[6]=d=>o.value=d)},{actions:a(()=>[t(q,{variant:"text",onClick:m[5]||(m[5]=d=>o.value=!1)},{default:a(()=>[V(" Close ")]),_:1})]),default:a(()=>[V(b(c.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Hn=["colspan"],jn=L("strong",null,"Details",-1),qn=["innerHTML"],zn=oe({__name:"PaymentTransactions",props:{canEdit:{type:Boolean},hideHistory:{type:Boolean},updated:{},registration:{},showEditor:{type:Boolean}},emits:["close-editor","change"],setup(e,{emit:y}){const i=e;let{hideHistory:s=!1,registration:o,showEditor:c}=i;const r=pe(),l=A([]),g=A([]),E=A([{key:"CreatedAt",title:"Date"},{key:"Type",title:"Type"},{key:"Source",title:"Source"},{key:"Description",title:"Description"},{key:"Admin",title:"Admin"},{key:"Amount",title:"Amount"},{key:"Controls",title:""}]),v=A(!1),u=A(),n=A(!1),m=A(""),d=A([{key:"CreatedAt",order:"asc"}]),x=()=>({PaymentTransactionUUID:De(),Amount:0,Data:{},Description:"",ID:0,RegistrationID:o.ID,RegistrationUUID:o.RegistrationUUID,Source:Lt.PAYMENT_TRANSACTION_SOURCE_NULL,Type:Ut.PAYMENT_TRANSACTION_TYPE_NULL}),k=A(x()),{convertTransactions:C,getPaymentTransactionsDisplay:D}=Zt();ie(i,()=>{s=i.hideHistory,o=i.registration,c=i.showEditor,D(o.RegistrationUUID).then(B=>{g.value=B})});const O=()=>{D(o.RegistrationUUID).then(B=>{g.value=B})};O();const K=()=>{r.saveRegistrationPaymentTransaction(k.value).then(B=>{B&&(C(B.PaymentTransactions),k.value=x(),y("close-editor"),y("change"))})},G=B=>{const _=g.value.find(T=>T.PaymentTransactionUUID===B);_&&(u.value=_.PaymentTransaction,v.value=!0)},W=B=>{if(B)try{g.value=C(B.PaymentTransactions),u.value=void 0,v.value=!1,m.value="Refund Processed",n.value=!0,y("change")}catch(_){console.error(_)}};return(B,_)=>(f(),R(w,null,[j(c)?(f(),R(w,{key:0},[t(lt,null,{default:a(()=>[V(" Add Transaction ")]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6"},{default:a(()=>[t(fe,{items:j(fl),"item-title":"title","item-value":"value",label:"Transaction Type",clearable:!0,"hide-details":"",modelValue:k.value.Type,"onUpdate:modelValue":_[0]||(_[0]=T=>k.value.Type=T),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),t(N,{cols:"12",sm:"6"},{default:a(()=>[t(fe,{items:j(Ul),"item-title":"title","item-value":"value",label:"Source",clearable:!0,"hide-details":"",modelValue:k.value.Source,"onUpdate:modelValue":_[1]||(_[1]=T=>k.value.Source=T),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"8",md:"10"},{default:a(()=>[t(Ue,{label:"Description","hide-details":"",modelValue:k.value.Description,"onUpdate:modelValue":_[2]||(_[2]=T=>k.value.Description=T),variant:"outlined"},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"4",md:"2"},{default:a(()=>[t(Ue,{label:"Amount","prepend-inner-icon":"mdi:mdi-currency-gbp","hide-details":"",modelValue:k.value.Amount,"onUpdate:modelValue":_[3]||(_[3]=T=>k.value.Amount=T),modelModifiers:{number:!0},variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"3",md:"2",lg:"1"},{default:a(()=>[t(q,{class:"w-100",onClick:_[4]||(_[4]=T=>y("close-editor")),color:"warning"},{default:a(()=>[V("Cancel")]),_:1})]),_:1}),t(Me),t(N,{cols:"12",sm:"6",md:"3",lg:"2",xl:"2"},{default:a(()=>[t(q,{class:"w-100",onClick:K,color:"primary"},{default:a(()=>[V("Submit Transaction")]),_:1})]),_:1})]),_:1})],64)):z("",!0),g.value.length&&!j(s)?(f(),F(St,{key:1,class:"my-2"},{default:a(()=>[t(Et,null,{default:a(()=>[t(pt,null,{default:a(()=>[V(" Transaction History ")]),_:1}),t(Tt,null,{default:a(()=>[t(j(yt),{items:g.value,headers:E.value,"show-expand":!1,"item-value":"PaymentTransactionUUID",expanded:l.value,"onUpdate:expanded":_[5]||(_[5]=T=>l.value=T),"sort-by":d.value,"onUpdate:sortBy":_[6]||(_[6]=T=>d.value=T),class:"transactionTable"},{"item.Controls":a(({item:T})=>[B.canEdit&&T.raw.PaymentTransaction.Source===j(Lt).PAYMENT_TRANSACTION_SOURCE_STRIPE&&T.raw.PaymentTransaction.Type===j(Ut).PAYMENT_TRANSACTION_TYPE_PAYMENT?(f(),F(q,{key:0,icon:"mdi:mdi-credit-card-refund",variant:"text",size:"xs",onClick:h=>G(T.key)},null,8,["onClick"])):z("",!0)]),"expanded-row":a(({columns:T,item:h})=>[L("tr",null,[L("td",{colspan:T.length},[jn,L("div",{innerHTML:h.raw.HTML},null,8,qn)],8,Hn)])]),"footer.prepend":a(()=>[t(q,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:O},{default:a(()=>[V("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"]),v.value&&u.value?(f(),F(Yn,{key:0,modelValue:v.value,"onUpdate:modelValue":_[7]||(_[7]=T=>v.value=T),"payment-transaction":u.value,onRefunded:W},null,8,["modelValue","payment-transaction"])):z("",!0),t(la,{modelValue:n.value,"onUpdate:modelValue":_[9]||(_[9]=T=>n.value=T)},{actions:a(()=>[t(q,{variant:"text",onClick:_[8]||(_[8]=T=>n.value=!1)},{default:a(()=>[V(" Close ")]),_:1})]),default:a(()=>[V(b(m.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):z("",!0)],64))}});const Qn=(e=void 0,y)=>e===void 0?!1:aa(e,ta.GROUP_TYPE_CONVENTION,y.ConventionUUID,y).EditPaymentTransactions,it=e=>(Yt("data-v-a5bd0dd4"),e=e(),Ht(),e),Kn={class:"mb-4"},Wn={class:"v-row"},Jn={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Xn={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Zn={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},eo={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},to=it(()=>L("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ao={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},lo=it(()=>L("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),no={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},oo=it(()=>L("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),io={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},so=it(()=>L("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),uo={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},ro=oe({__name:"PaymentActions",props:de({forms:{},registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:registration"],["update:modelValue"]),setup(e,{emit:y}){const i=e,s=Ie(e,"modelValue"),{registration:o}=i,c=A(!1),r=A(!1),l=A(),g=A([]),E=A(new Date().getTime()),v=A(!1),u=xe(i,y,void 0,void 0,"registration"),n=A(se(u.value));ie(u,()=>{n.value=se(u.value)});const m=pe();m.getConvention(o.ConventionUUID).then(C=>{C&&(v.value=Qn(na(),C))});const d=()=>{m.generateRegistrationCharges(o.RegistrationUUID,!1).then(C=>{C&&(g.value=C.PaymentTransactions,l.value=C.Registration,E.value=new Date().getTime())}).catch(()=>{})};d();const x=()=>{m.generateRegistrationCharges(o.RegistrationUUID,!0).then(C=>{C&&(g.value=C.PaymentTransactions,l.value=C.Registration,E.value=new Date().getTime())})},{totalCharges:k}=Zt();return(C,D)=>(f(),F(Ve,{modelValue:s.value,"onUpdate:modelValue":D[3]||(D[3]=O=>s.value=O),title:C.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:""},{default:a(()=>[t(ge,{class:"pa-0 mx-0",fluid:!0},{default:a(()=>[l.value?(f(),R(w,{key:0},[L("h3",Kn,"#"+b(l.value.Reference)+" "+b(l.value.User.DisplayName),1),L("dl",Wn,[(f(!0),R(w,null,te(g.value,O=>(f(),R(w,{key:O.PaymentTransactionUUID},[O.Type===j(Ut).PAYMENT_TRANSACTION_TYPE_CHARGE?(f(),R("dt",Jn,[L("div",Xn,b(O.Description.split(":")[0])+": ",1),L("div",Zn,b(O.Description.split(":")[1]),1)])):z("",!0),L("dd",eo," £"+b(O.Amount),1)],64))),128)),to,L("dd",ao," £"+b(j(k)(g.value)),1),lo,L("dd",no," £"+b(l.value.Total),1),oo,L("dd",io," £"+b(l.value.Paid),1),so,L("dd",uo," £"+b(l.value.Total-l.value.Paid),1)]),t(X,{class:"flex-row-reverse"},{default:a(()=>[t(N,{class:"text-right"},{default:a(()=>[t(q,{color:"primary",onClick:x},{default:a(()=>[V("Apply Charges")]),_:1})]),_:1}),!r.value&&v.value?(f(),F(N,{key:0},{default:a(()=>[t(q,{color:"secondary",onClick:D[0]||(D[0]=O=>r.value=!0)},{default:a(()=>[V("Transaction Entry")]),_:1})]),_:1})):z("",!0)]),_:1})],64)):z("",!0),t(zn,{"can-edit":v.value,registration:j(o),"show-editor":r.value,onCloseEditor:D[1]||(D[1]=O=>r.value=!1),updated:E.value,onChange:d},null,8,["can-edit","registration","show-editor","updated"]),t(ua,{registration:j(o),"show-editor":c.value,onCloseEditor:D[2]||(D[2]=O=>c.value=!1)},null,8,["registration","show-editor"])]),_:1})]),_:1},8,["modelValue","title"]))}});const mo=ot(ro,[["__scopeId","data-v-a5bd0dd4"]]),vo=oe({__name:"EditNoteCategoryDialog",props:de({convention:{},noteCategory:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:noteCategory"],["update:modelValue"]),setup(e,{emit:y}){const i=e,{title:s=""}=i,o=Ie(e,"modelValue"),c=xe(i,y,void 0,void 0,"noteCategory"),r=A(se(c.value));ie(c,()=>{r.value=se(c.value)});const l=()=>{o.value=!1},g=()=>{r.value=se(c.value)},E=()=>{c.value=r.value};return(v,u)=>(f(),F(Ve,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=n=>o.value=n),onReset:g,onSave:E,title:j(s),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(Ue,{modelValue:r.value.Name,"onUpdate:modelValue":u[0]||(u[0]=n=>r.value.Name=n),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(qt,{modelValue:r.value.Groups,"onUpdate:modelValue":u[1]||(u[1]=n=>r.value.Groups=n),convention:v.convention,label:"Groups",variant:"outlined","hide-details":""},null,8,["modelValue","convention"])]),_:1})]),_:1})]),_:1})]),actions:a(()=>[t(q,{color:"blue-darken-1",variant:"text",onClick:l},{default:a(()=>[V(" Cancel ")]),_:1}),t(q,{color:"blue-darken-1",variant:"text",onClick:g},{default:a(()=>[V(" Reset ")]),_:1}),t(Me),t(q,{color:"blue-darken-1",variant:"text",onClick:E},{default:a(()=>[V(" Save ")]),_:1})]),_:1},8,["modelValue","title"]))}}),co=()=>{const e=A(""),y=()=>{const i={x:window.innerWidth,y:window.innerHeight};i.x<600?e.value="xs":i.x>=600&&i.x<960?e.value="sm":i.x>=960&&i.x<1280?e.value="md":i.x>=1280&&i.x<1920?e.value="lg":i.x>=1920&&i.x<2560?e.value="xl":i.x>=2560&&(e.value="xxl")};return window.addEventListener("resize",y),y(),e},fo={style:{"list-style":"none"}},Uo=oe({__name:"NoteCategories",props:{hideHistory:{type:Boolean},convention:{},showEditor:{type:Boolean}},emits:["close"],setup(e,{emit:y}){const i=pe(),s=A(!1),o=A(!1),c=A(""),r=A([]),l=A([{key:"Name",title:"Name"},{key:"Groups",title:"Groups"},{key:"actions",title:"",sortable:!1}]),g=co();A([{key:"CreatedAt",order:"asc"}]);const E=()=>({ID:0,NoteCategoryUUID:De(),ConventionID:e.convention.ID,ConventionUUID:e.convention.ConventionUUID,Name:"",Groups:[],Notes:[]}),v=A(-1),u=A(E()),n=A(E()),m=()=>{n.value.NoteCategoryUUID=De(),u.value=Object.assign({},E()),v.value=-1,s.value=!0},d=G=>{v.value=r.value.indexOf(G),u.value=Object.assign({},G),s.value=!0},x=G=>{v.value=r.value.indexOf(G),u.value=Object.assign({},G),o.value=!0},k=()=>{i.deleteNoteCategory(u.value.NoteCategoryUUID).then(G=>{G&&(r.value.splice(v.value,1),D())})},C=()=>{s.value=!1,$e(()=>{u.value=Object.assign({},n.value),v.value=-1})},D=()=>{o.value=!1,$e(()=>{u.value=Object.assign({},n.value),v.value=-1})},O=()=>{i.saveNoteCategory(u.value).then(G=>{G&&(v.value>-1?Object.assign(r.value[v.value],G):r.value.push(G),C())})};return(()=>{i.getNoteCategories(e.convention.ConventionUUID).then(G=>{G&&(r.value=G)})})(),(G,W)=>(f(),F(j(yt),{headers:l.value,items:r.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:a(()=>[t(At,{color:"primary"},qe({default:a(()=>[t(oa,null,{default:a(()=>[V("Note Categories")]),_:1}),t(Il,{class:"mx-4 d-none d-sm-inline-flex",inset:!0,vertical:!0}),t(Me,{class:"d-none d-sm-inline-flex"}),j(g)!="xs"?(f(),F(q,{key:0,dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:m},{default:a(()=>[V(" New Item ")]),_:1})):z("",!0),t(q,{dark:"",class:"mb-2",icon:"mdi:mdi-window-close",onClick:W[0]||(W[0]=B=>y("close"))}),t(Dl,{modelValue:o.value,"onUpdate:modelValue":W[1]||(W[1]=B=>o.value=B),onDelete:k},null,8,["modelValue"])]),_:2},[j(g)=="xs"?{name:"extension",fn:a(()=>[t(Me),t(q,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:m},{default:a(()=>[V(" New Item ")]),_:1})]),key:"0"}:void 0]),1024),s.value?(f(),F(vo,{key:0,modelValue:s.value,"onUpdate:modelValue":W[2]||(W[2]=B=>s.value=B),"note-category":u.value,"onUpdate:noteCategory":[W[3]||(W[3]=B=>u.value=B),O],title:c.value,convention:G.convention},null,8,["modelValue","note-category","title","convention"])):z("",!0)]),"item.Groups":a(({item:B})=>[L("ul",fo,[(f(!0),R(w,null,te(B.selectable.Groups,_=>(f(),R("li",{key:_.GroupUUID,class:"py-1"},b(_.Name),1))),128))])]),"item.actions":a(({item:B})=>[t(ft,{size:"small",class:"me-2",onClick:_=>d(B.raw)},{default:a(()=>[V(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(ft,{size:"small",onClick:_=>x(B.raw)},{default:a(()=>[V(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),_o=oe({__name:"SelectNoteCategories",props:de({convention:{},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:""},label:{},variant:{}},{modelValue:{required:!0}}),emits:de(["change"],["update:modelValue"]),setup(e,{emit:y}){const i=Ie(e,"modelValue"),s=A([]),o=pe(),c=A([]),r=A(""),l=A(0),g=re(()=>[...c.value].map(u=>({title:u.Name,value:s.value.find(n=>n.NoteCategoryUUID===u.NoteCategoryUUID)||u})));return typeof e.convention=="object"?r.value=e.convention.ConventionUUID:r.value=e.convention||"",(async()=>{const v=[];r.value&&v.push(o.getNoteCategories(r.value));const u=await Promise.all(v);if(r.value&&u.length==1&&(c.value=u[0].sort((n,m)=>n.Name.localeCompare(m.Name))),Array.isArray(i.value))l.value=2,g.value.forEach(n=>{Array.isArray(i.value)&&i.value.find(d=>d.NoteCategoryUUID===n.value.NoteCategoryUUID)&&s.value.push(n.value)});else if(typeof i.value=="string"){l.value=1;try{const n=JSON.parse(i.value);g.value.forEach(m=>{n.find(x=>x.NoteCategoryUUID===m.value.NoteCategoryUUID)&&s.value.push(m.value)})}catch{}}})(),ie(s,()=>{switch(l.value){default:case 2:{i.value=s.value,y("change");break}case 1:{i.value=JSON.stringify(s.value),y("change");break}}}),(v,u)=>(f(),F(jt,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=n=>s.value=n),chips:v.chips,multiple:"",label:v.label||"Tags",variant:v.variant||"solo",hint:v.hint,"persistent-hint":!0,clearable:v.clearable,items:g.value,"item-title":"title","item-value":"value"},null,8,["modelValue","chips","label","variant","hint","clearable","items"]))}}),Ao=oe({__name:"EditNoteDialog",props:de({convention:{},note:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:note","saved"],["update:modelValue"]),setup(e,{emit:y}){const i=e,{title:s=""}=i,o=pe(),c=Ie(e,"modelValue"),r=xe(i,y,void 0,void 0,"note"),l=A(se(r.value));ie(r,()=>{l.value=se(r.value)});const g=()=>{l.value=se(r.value)},E=v=>{l.value.NoteCategories===null&&(l.value.NoteCategories=[]),l.value.CreatedAt=void 0,l.value.DeletedAt=void 0,l.value.UpdatedAt=void 0,l.value.Admin=void 0,l.value.AdminID=void 0,l.value.AdminUUID=void 0,o.saveNote(l.value).then(u=>{u?(l.value=se(u),v&&v("Note Saved"),r.value=l.value,y("saved",r.value)):v&&v("Internal Error Saving Note")}).catch(u=>{v&&v("Error Saving Note:"+u.ErrorMessage)})};return(v,u)=>l.value?(f(),F(Ve,{key:0,"card-class":"pa-4",modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=n=>c.value=n),onReset:g,onSave:E,title:j(s),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0,"show-close-action":!0,"show-reset-action":!0,"show-save-action":!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12"},{default:a(()=>[t(_o,{modelValue:l.value.NoteCategories,"onUpdate:modelValue":u[0]||(u[0]=n=>l.value.NoteCategories=n),convention:v.convention,label:"Categories",variant:"outlined","hide-details":"",chips:!0},null,8,["modelValue","convention"])]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(N,{cols:"12"},{default:a(()=>[t(Ue,{modelValue:l.value.Subject,"onUpdate:modelValue":u[1]||(u[1]=n=>l.value.Subject=n),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(N,{cols:"12"},{default:a(()=>[t(Rl,{modelValue:l.value.Description,"onUpdate:modelValue":u[2]||(u[2]=n=>l.value.Description=n),label:"Note",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])):z("",!0)}}),ra=oe({__name:"Notes",props:{convention:{},hideHistory:{type:Boolean},registration:{},showEditor:{type:Boolean}},setup(e){const y=pe(),i=()=>({ID:0,NoteUUID:De(),Description:"",NoteCategories:[],Registration:e.registration,RegistrationID:e.registration.ID,RegistrationUUID:e.registration.RegistrationUUID,Subject:""}),s=A(!1),o=A(!1),c=A([]),r=A([]),l=A(i()),g=()=>{l.value=i(),s.value=!0},E=n=>{l.value=n,s.value=!0},v=()=>{y.getRegistrationNotes(e.registration.RegistrationUUID).then(n=>{n&&(n.forEach(m=>{m.CreatedAt=Xt(new Date(m.CreatedAt||"")),m.Admin||(m.Admin={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),c.value=n,r.value=n.map(m=>m.NoteUUID))})},u=()=>{v(),setTimeout(()=>{s.value=!1},2e3)};return v(),(n,m)=>(f(),R(w,null,[t(ze,null,{default:a(()=>[t(_t,null,{default:a(()=>[t(lt,null,{default:a(()=>[t(X,{class:"flex-row-reverse"},{default:a(()=>[t(N,{class:"text-right flex-shrink-1 flex-grow-0",style:{"flex-grow":"0 !important"}},{default:a(()=>[t(q,{class:"d-sm-none",size:"xs",icon:"mdi:mdi-cog",variant:"text",color:"warning",onClick:m[0]||(m[0]=d=>o.value=!0)}),t(q,{class:"d-none d-sm-inline-flex","prepend-icon":"mdi:mdi-cog",variant:"text",color:"warning",onClick:m[1]||(m[1]=d=>o.value=!0)},{default:a(()=>[V("Categories")]),_:1})]),_:1}),t(N,{class:"text-wrap flex-grow-1"},{default:a(()=>[V(" Notes (#"+b(n.registration.Reference)+" "+b(n.registration.User.DisplayName)+") ",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(nt,null,{default:a(()=>[t(St,{multiple:!0,variant:"accordion",modelValue:r.value,"onUpdate:modelValue":m[2]||(m[2]=d=>r.value=d)},{default:a(()=>[(f(!0),R(w,null,te(c.value,d=>(f(),F(Et,{key:`${d.NoteUUID}.${d.UpdatedAt}`,value:d.NoteUUID},{default:a(()=>[t(pt,null,{default:a(()=>[V(b(d.Subject)+" ",1),t(Cl,{class:"ml-4"},{default:a(()=>[(f(!0),R(w,null,te(d.NoteCategories,x=>(f(),F(Ol,{key:x.NoteCategoryUUID},{default:a(()=>[V(b(x.Name),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(Tt,null,{default:a(()=>[t(X,null,{default:a(()=>[t(N,null,{default:a(()=>[V(b(d.Description),1)]),_:2},1024)]),_:2},1024),t(X,null,{default:a(()=>[t(N,null,{default:a(()=>[V(b(j(Ye)(d.UpdatedAt||""))+" ",1),d&&d.Admin&&d.Admin.DisplayName?(f(),R(w,{key:0},[V(" - "+b(d.Admin.DisplayName),1)],64)):z("",!0)]),_:2},1024),t(N,{class:"text-right"},{default:a(()=>[t(q,{color:"primary","prepend-icon":"mdi:mdi-pencil",onClick:x=>E(d)},{default:a(()=>[V("Edit")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Sl,null,{default:a(()=>[t(q,{color:"primary",variant:"flat",onClick:g},{default:a(()=>[V("Add Note")]),_:1})]),_:1})]),_:1}),t(gt,{modelValue:s.value,"onUpdate:modelValue":m[5]||(m[5]=d=>s.value=d),title:"Create Note"},{default:a(()=>[t(Ao,{modelValue:s.value,"onUpdate:modelValue":m[3]||(m[3]=d=>s.value=d),note:l.value,"onUpdate:note":m[4]||(m[4]=d=>l.value=d),convention:n.convention,title:"Create Note",onSaved:u},null,8,["modelValue","note","convention"])]),_:1},8,["modelValue"]),t(gt,{modelValue:o.value,"onUpdate:modelValue":m[7]||(m[7]=d=>o.value=d),title:"Note Configuration"},{default:a(()=>[t(Uo,{convention:n.convention,onClose:m[6]||(m[6]=d=>o.value=!1)},null,8,["convention"])]),_:1},8,["modelValue"])],64))}}),go=oe({__name:"RegistrationActions",props:de({convention:{},forms:{},registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:registration"],["update:modelValue"]),setup(e,{emit:y}){const i=e,s=Ie(e,"modelValue"),o=A(!1),c=xe(i,y,void 0,void 0,"registration"),r=A(se(c.value)),l=A();ie(c,()=>{r.value=se(c.value)});const g=pe(),E=(v,u)=>{const n=r.value.Submissions.find(m=>m.SubmissionUUID==u);if(!n){v&&v("Submission not found");return}g.setSubmissionStatus(u,n.Status).then(m=>{m?(r.value.Submissions.forEach((d,x)=>{c.value.Submissions[x].Status=d.Status}),v&&v("Status Saved")):v&&v("Status not saved")}).catch(()=>{v&&v("Status not saved")})};return(v,u)=>(f(),F(Ve,{modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=n=>s.value=n),title:v.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:a(()=>[t(Qt,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=n=>l.value=n),"align-tabs":"start",class:"mb-4","show-arrows":""},{default:a(()=>[t(Ze,{value:"status"},{default:a(()=>[V("Status")]),_:1}),t(Ze,{value:"emails"},{default:a(()=>[V("Communications")]),_:1}),t(Ze,{value:"notes"},{default:a(()=>[V("Notes")]),_:1})]),_:1},8,["modelValue"])]),default:a(()=>[t(Kt,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=n=>l.value=n)},{default:a(()=>[t(et,{value:"status"},{default:a(()=>[t(ge,{class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(ze,null,{default:a(()=>[t(_t,null,{default:a(()=>[t(lt,null,{default:a(()=>[V("Status (#"+b(v.registration.Reference)+" "+b(v.registration.User.DisplayName)+")",1)]),_:1})]),_:1}),t(nt,null,{default:a(()=>[t(tt,null,{default:a(()=>[(f(!0),R(w,null,te(r.value.Submissions,n=>(f(),F(He,{key:n.SubmissionUUID,class:"pa-0"},{default:a(()=>[t(X,{class:"py-2 align-center"},{default:a(()=>[t(N,{cols:"9",sm:"10",md:"11"},{default:a(()=>{var m;return[t(fe,{modelValue:n.Status,"onUpdate:modelValue":d=>n.Status=d,items:j(wt),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((m=v.forms.find(d=>d.FormUUID==n.FormUUID))==null?void 0:m.Name)||""},{selection:a(()=>[t(ft,{class:"mr-4 d-none d-sm-inline"},{default:a(()=>{var d;return[V(b((d=j(wt).find(x=>x.value===n.Status))==null?void 0:d.icon),1)]}),_:2},1024),V(" "+b(j(ea)(n.Status)),1)]),item:a(({item:d,props:{onClick:x}})=>[t(He,{title:d.title,"prepend-icon":d.raw.icon,onClick:x},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),t(N,{cols:"3",sm:"2",md:"1"},{default:a(()=>[t(at,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:m=>E(m.callback,n.SubmissionUUID)},null,8,["onClick"]),t(at,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:m=>E(m.callback,n.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(et,{value:"emails"},{default:a(()=>[t(ge,{class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(ze,null,{default:a(()=>[t(_t,null,{default:a(()=>[t(lt,null,{default:a(()=>[V(" E-Mails (#"+b(v.registration.Reference)+" "+b(v.registration.User.DisplayName)+") ",1)]),_:1})]),_:1}),t(nt,null,{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12"},{default:a(()=>[t(q,{"prepend-icon":"mdi:mdi-email",color:"primary",onClick:u[1]||(u[1]=n=>o.value=!0)},{default:a(()=>[V("Prepare Email")]),_:1})]),_:1})]),_:1}),t(ua,{registration:v.registration,"show-editor":o.value,onCloseEditor:u[2]||(u[2]=n=>o.value=!1)},null,8,["registration","show-editor"])]),_:1})]),_:1})]),_:1})]),_:1}),t(et,{value:"notes"},{default:a(()=>[t(ge,{class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(ra,{convention:v.convention,registration:v.registration},null,8,["convention","registration"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title"]))}});const po=e=>(Yt("data-v-601a4fc6"),e=e(),Ht(),e),To=po(()=>L("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),yo={class:"mb-4"},Eo=oe({__name:"RegistrationTags",props:de({registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:de(["update:registration"],["update:modelValue"]),setup(e,{emit:y}){const i=e,s=Ie(e,"modelValue"),o=pe(),c=xe(i,y,void 0,void 0,"registration"),r=A(se(c.value)),l=A(!1),g=A(r.value.Tags);ie(c,()=>{r.value=se(c.value)});const E=v=>{const u=[],n=[];r.value.Tags.forEach(m=>{g.value.find(x=>x.TagUUID===m.TagUUID)||u.push(m.TagUUID)}),g.value.forEach(m=>{r.value.Tags.find(x=>m.TagUUID===x.TagUUID)||n.push(m.TagUUID)}),o.updateRegistrationTags(u,n,r.value.RegistrationUUID).then(m=>{m?v&&(v("Tags Saved"),c.value.Tags=m.Tags,s.value=!1):v&&v("Error Saving Tags")}).catch(()=>{v&&v("Error Saving Tags")})};return(v,u)=>(f(),F(Ve,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=n=>s.value=n),title:v.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,onSave:E,"show-save-action":!0},{default:a(()=>[t(ge,{class:"pa-0 mx-0",fluid:!0},{default:a(()=>[r.value?(f(),R(w,{key:0},[t(Vl,{class:"my-4"},{default:a(()=>[t(bl,null,{default:a(()=>[V("Caution")]),_:1}),To]),_:1}),L("h3",yo,"#"+b(r.value.Reference)+" "+b(r.value.User.DisplayName),1),t(zt,{modelValue:r.value.Tags,"onUpdate:modelValue":u[0]||(u[0]=n=>r.value.Tags=n),convention:r.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":l.value},null,8,["modelValue","convention","show-uuid"]),t(Jt,{label:"Enable Debug Mode",modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=n=>l.value=n)},null,8,["modelValue"])],64)):z("",!0)]),_:1})]),_:1},8,["modelValue","title"]))}});const So=ot(Eo,[["__scopeId","data-v-601a4fc6"]]);function Do(){const e=A([]);Va(()=>e.value=[]);function y(i,s){e.value[s]=i}return{refs:e,updateRef:y}}const Io=Bt({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Je,default:"$first"},prevIcon:{type:Je,default:"$prev"},nextIcon:{type:Je,default:"$next"},lastIcon:{type:Je,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...il(),...sl(),...ul(),...rl(),...dl(),...ml(),...vl({tag:"nav"}),...ba(),...cl({variant:"text"})},"VPagination"),Ro=Gt()({name:"VPagination",props:Io(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,y){let{slots:i,emit:s}=y;const o=ha(e,"modelValue"),{t:c,n:r}=Ma(),{isRtl:l}=ka(),{themeClasses:g}=Na(e),{width:E}=La(),v=wa(-1);ct(void 0,{scoped:!0});const{resizeRef:u}=Al(_=>{if(!_.length)return;const{target:T,contentRect:h}=_[0],M=T.querySelector(".v-pagination__list > *");if(!M)return;const P=h.width,Z=M.offsetWidth+parseFloat(getComputedStyle(M).marginRight)*2;v.value=x(P,Z)}),n=re(()=>parseInt(e.length,10)),m=re(()=>parseInt(e.start,10)),d=re(()=>e.totalVisible?parseInt(e.totalVisible,10):v.value>=0?v.value:x(E.value,58));function x(_,T){const h=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((_-T*h)/T).toFixed(2)))}const k=re(()=>{if(n.value<=0||isNaN(n.value)||n.value>Number.MAX_SAFE_INTEGER)return[];if(d.value<=1)return[o.value];if(n.value<=d.value)return Xe(n.value,m.value);const _=d.value%2===0,T=_?d.value/2:Math.floor(d.value/2),h=_?T:T+1,M=n.value-T;if(h-o.value>=0)return[...Xe(Math.max(1,d.value-1),m.value),e.ellipsis,n.value];if(o.value-M>=(_?1:0)){const P=d.value-1,Z=n.value-P+m.value;return[m.value,e.ellipsis,...Xe(P,Z)]}else{const P=Math.max(1,d.value-3),Z=P===1?o.value:o.value-Math.ceil(P/2)+m.value;return[m.value,e.ellipsis,...Xe(P,Z),e.ellipsis,n.value]}});function C(_,T,h){_.preventDefault(),o.value=T,h&&s(h,T)}const{refs:D,updateRef:O}=Do();ct({VPaginationBtn:{color:Ae(e,"color"),border:Ae(e,"border"),density:Ae(e,"density"),size:Ae(e,"size"),variant:Ae(e,"variant"),rounded:Ae(e,"rounded"),elevation:Ae(e,"elevation")}});const K=re(()=>k.value.map((_,T)=>{const h=M=>O(M,T);if(typeof _=="string")return{isActive:!1,key:`ellipsis-${T}`,page:_,props:{ref:h,ellipsis:!0,icon:!0,disabled:!0}};{const M=_===o.value;return{isActive:M,key:_,page:r(_),props:{ref:h,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:M?e.activeColor:e.color,ariaCurrent:M,ariaLabel:c(M?e.currentPageAriaLabel:e.pageAriaLabel,_),onClick:P=>C(P,_)}}}})),G=re(()=>{const _=!!e.disabled||o.value<=m.value,T=!!e.disabled||o.value>=m.value+n.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:h=>C(h,m.value,"first"),disabled:_,ariaLabel:c(e.firstAriaLabel),ariaDisabled:_}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:h=>C(h,o.value-1,"prev"),disabled:_,ariaLabel:c(e.previousAriaLabel),ariaDisabled:_},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:h=>C(h,o.value+1,"next"),disabled:T,ariaLabel:c(e.nextAriaLabel),ariaDisabled:T},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:h=>C(h,m.value+n.value-1,"last"),disabled:T,ariaLabel:c(e.lastAriaLabel),ariaDisabled:T}:void 0}});function W(){var T;const _=o.value-m.value;(T=D.value[_])==null||T.$el.focus()}function B(_){_.key===bt.left&&!e.disabled&&o.value>+e.start?(o.value=o.value-1,$e(W)):_.key===bt.right&&!e.disabled&&o.value<m.value+n.value-1&&(o.value=o.value+1,$e(W))}return Wt(()=>t(e.tag,{ref:u,class:["v-pagination",g.value,e.class],style:e.style,role:"navigation","aria-label":c(e.ariaLabel),onKeydown:B,"data-test":"v-pagination-root"},{default:()=>[t("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&t("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[i.first?i.first(G.value.first):t(q,Oe({_as:"VPaginationBtn"},G.value.first),null)]),t("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[i.prev?i.prev(G.value.prev):t(q,Oe({_as:"VPaginationBtn"},G.value.prev),null)]),K.value.map((_,T)=>t("li",{key:_.key,class:["v-pagination__item",{"v-pagination__item--is-active":_.isActive}],"data-test":"v-pagination-item"},[i.item?i.item(_):t(q,Oe({_as:"VPaginationBtn"},_.props),{default:()=>[_.page]})])),t("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[i.next?i.next(G.value.next):t(q,Oe({_as:"VPaginationBtn"},G.value.next),null)]),e.showFirstLastPage&&t("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[i.last?i.last(G.value.last):t(q,Oe({_as:"VPaginationBtn"},G.value.last),null)])])]})),{}}}),Co=["colspan"],Oo={style:{opacity:"var(--v-medium-emphasis-opacity)"}},ci=oe({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:y}){var Rt;const i=yl();y("pageTitle","Registration Manager");const s=Pa(),o=Fa(),c=A(!0);let r=((Rt=s.params.convention)==null?void 0:Rt.toString())||"";const l=A({ID:0,ConventionUUID:De(),OrganisationID:0,OrganisationUUID:mt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),g=pe(),E=$a.getInstance(),v=A([]),u=A({ID:0,AdminLayoutUUID:De(),ConventionID:l.value.ID,ConventionUUID:l.value.ConventionUUID,Name:"Registration Table",Type:ia.ADMIN_LAYOUT_TABLE,Panels:[]}),n=A([]),m=A([]),d=A([]),x=A([]),k=A([]),C=A(1),D=A(10),O=A([]),K=A(0),G=A(!1),W=A(""),B=A(""),_=A(""),T=A(""),h=A({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),M=A(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",h.value]])),P=A(""),Z=A(""),me=A([]),ae=A([]),ke=A([]),Ne=A([]),Le=A([]),we=A([]),_e=A(0),ve=A(),Re=A(!1),Ce=A(!1),Qe=A(!1),Ke=A(),Dt=A(),st=A(),Pe=A(!1),da=na();ie(W,p=>{const U=k.value.find(I=>I.uuid===p);if(U){const I=U.headers.find(S=>S.defaultSort===!0);I&&(O.value=[{key:I.key,order:"asc"}],me.value=[{key:I.key,order:"asc"}])}}),ie(_e,p=>{p===7&&It()}),ie(P,()=>{B.value=Date.now().toString()}),ie(Z,()=>{B.value=Date.now().toString()});const ma=()=>{n.value=[],d.value=[],k.value=[];try{g.getConventionAdminLayoutByName(l.value.ConventionUUID,"Registration Table").then(p=>{_e.value+=1,p?u.value=p:(u.value.ConventionID=l.value.ID,u.value.ConventionUUID=l.value.ConventionUUID)})}catch{u.value.ConventionID=l.value.ID,u.value.ConventionUUID=l.value.ConventionUUID}try{g.getConventionForms(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(n.value=p)})}catch{}try{g.getConventionAccommodation(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(ae.value=p)})}catch{}try{g.getConventionVenues(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(we.value=p)})}catch{}try{g.getConventionExtras(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(ke.value=p)})}catch{}try{g.getConventionInterests(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(Ne.value=p)})}catch{}try{g.getConventionTickets(l.value.ConventionUUID).then(p=>{_e.value+=1,p&&(Le.value=p)})}catch{}try{g.getConventionGroups(l.value.ConventionUUID).then(p=>{p&&(m.value=p.sort((U,I)=>U.Name.localeCompare(I.Name)))})}catch{}try{g.getConventionTags(l.value.ConventionUUID).then(p=>{p&&(x.value=p.sort((U,I)=>U.Title.localeCompare(I.Title)).map(U=>(U.Title=`${U.Title} [${U.Key}]`,U)))})}catch{}},ut=({page:p,itemsPerPage:U,sortBy:I})=>{c.value=!0,C.value=p,O.value=I;const S=k.value.find(le=>le.uuid==W.value),ce=S==null?void 0:S.layout.Items;let ue="",Ct="";if(I&&ce&&I.length>=1){const le=ce.find(Be=>Be.LayoutItemUUID==I[0].key);switch(Ct=I[0].order||"asc",le==null?void 0:le.MetaField){case ee.META_DATA_SOURCE_ACCOMMODATION_FORM:ue="submission.status";break;case ee.META_DATA_SOURCE_BADGE_FORM:ue="submission.status";break;case ee.META_DATA_SOURCE_DEALER_FORM:ue="submission.status";break;case ee.META_DATA_SOURCE_REGISTRATION_FORM:ue="submission.status";break;case ee.META_DATA_SOURCE_REGISTRATION_REFERENCE:ue="reference";break;case ee.META_DATA_SOURCE_SUBMISSION_DATE:ue="created";break;case ee.META_DATA_SOURCE_SUBMISSION_STATUS:ue="submission.status";break}switch(le==null?void 0:le.UserField){case ne.USER_DATA_SOURCE_DISPLAY_NAME:ue="user.display_name";break;case ne.USER_DATA_SOURCE_EMAIL:ue="user.email";break;case ne.USER_DATA_SOURCE_FIRST_NAME:ue="user.firstname";break;case ne.USER_DATA_SOURCE_HANDLE:ue="user.handle";break;case ne.USER_DATA_SOURCE_LAST_NAME:ue="user.lastname";break}}try{const le={Direction:Ct,Limit:U,Offset:(p-1)*U,Order:ue};S&&S.layout.RequiredRegistrationTags.length>0&&(le.PanelUUID=S==null?void 0:S.layout.LayoutPanelUUID),(S==null?void 0:S.layout.RequiredFormType)===Se.FORM_TYPE_ACCOMMODATION&&(le.Accommodation=!0),(S==null?void 0:S.layout.RequiredFormType)===Se.FORM_TYPE_BADGE&&(le.Badge=!0),(S==null?void 0:S.layout.RequiredFormType)===Se.FORM_TYPE_DEALER&&(le.Dealer=!0),(S==null?void 0:S.layout.RequiredFormType)===Se.FORM_TYPE_REGISTRATION&&(le.Registration=!0),le.GroupUUID=P.value||mt,le.TagUUID=Z.value||mt,le.Email=T.value,le.Reference=_.value,le.FieldValues=Array.from(M.value.values()),g.searchConventionRegistrations(l.value.ConventionUUID,le).then(Be=>{Be&&(K.value=Be.Total,d.value=Be.Registrations,k.value.forEach(dt=>{const Ta=dt.layout;dt.items=d.value.map(Y=>{const We=[];let ye;Y.Leader?ye=Y:ye=Y.Primary,We.push({Name:ye.User.DisplayName,UUID:ye.UserUUID,UserUUID:ye.User.UserUUID,IsLeader:!0,Reference:ye.Reference,Paid:ye.Paid,Total:ye.Total}),We.push(...ye.Members.map(Ee=>({Name:Ee.User.DisplayName,UUID:Ee.UserUUID,UserUUID:Ee.User.UserUUID,IsLeader:!1,Reference:Ee.Reference,Paid:Ee.Paid,Total:Ee.Total})));const J={};return dt.headers.forEach(Ee=>{var Ot;const H=Ta.Items.find(Ge=>Ge.LayoutItemUUID===Ee.key);if(H){if(H.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&H.SectionField)Y.Submissions.forEach(Ge=>{const Fe=Ge.Data.find($=>$.SectionFieldUUID===H.SectionFieldUUID);if(Fe){Ee.type===Ya.ACCOMMODATION?J[H.LayoutItemUUID]={Data:Fe.Data,Registration:Y}:J[H.LayoutItemUUID]=Fe.Data;return}});else if(H.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&H.UserField)switch(H.UserField){case ne.USER_DATA_SOURCE_AVATAR:J[H.LayoutItemUUID]=i.GetProfileImageURL(Y.UserUUID);break;case ne.USER_DATA_SOURCE_DISPLAY_NAME:J[H.LayoutItemUUID]=Y.User.DisplayName;break;case ne.USER_DATA_SOURCE_EMAIL:J[H.LayoutItemUUID]=Y.User.Additional.Email;break;case ne.USER_DATA_SOURCE_HANDLE:J[H.LayoutItemUUID]=Y.User.Handle;break;case ne.USER_DATA_SOURCE_DATE_OF_BIRTH:J[H.LayoutItemUUID]=Y.User.Additional.DOB;break;case ne.USER_DATA_SOURCE_FIRST_NAME:J[H.LayoutItemUUID]=Y.User.Additional.FirstName;break;case ne.USER_DATA_SOURCE_LAST_NAME:J[H.LayoutItemUUID]=Y.User.Additional.LastName;break;case ne.USER_DATA_SOURCE_TELEGRAM:J[H.LayoutItemUUID]="";break}else if(H.SourceType==="LAYOUT_ITEM_SOURCE_META"&&H.MetaField){const Ge=(Ot=n.value.find($=>$.Type===Se.FORM_TYPE_REGISTRATION))==null?void 0:Ot.FormUUID,Fe=Y.Submissions.find($=>$.FormUUID===Ge);switch(H.MetaField){case ee.META_DATA_SOURCE_REGISTRATION_ACTIONS:J[H.LayoutItemUUID]=Y;break;case ee.META_DATA_SOURCE_REGISTRATION_GROUP:J[H.LayoutItemUUID]=We;break;case ee.META_DATA_SOURCE_REGISTRATION_REFERENCE:J[H.LayoutItemUUID]=Y.Reference;break;case ee.META_DATA_SOURCE_SUBMISSION_DATE:if(Fe){const $=new Date(Fe.CreatedAt||"");J[H.LayoutItemUUID]=`${$.getFullYear()}-${($.getMonth()+1).toString().padStart(2,"0")}-${$.getDate().toString().padStart(2,"0")} ${$.getHours().toString().padStart(2,"0")}:${$.getMinutes().toString().padStart(2,"0")}:${$.getSeconds().toString().padStart(2,"0")}`}else{const $=new Date(Y.CreatedAt||"");J[H.LayoutItemUUID]=`${$.getFullYear()}-${($.getMonth()+1).toString().padStart(2,"0")}-${$.getDate().toString().padStart(2,"0")} ${$.getHours().toString().padStart(2,"0")}:${$.getMinutes().toString().padStart(2,"0")}:${$.getSeconds().toString().padStart(2,"0")}`}break;case ee.META_DATA_SOURCE_ACCOMMODATION_FORM:J[H.LayoutItemUUID]=Y.Submissions.map($=>{const Q=n.value.find(be=>be.FormUUID===$.FormUUID);return{Heading:Q==null?void 0:Q.Heading,Form:Q,Submission:$,Registration:Y}}).filter($=>{var Q;return((Q=$.Form)==null?void 0:Q.Type)===Se.FORM_TYPE_ACCOMMODATION});break;case ee.META_DATA_SOURCE_BADGE_FORM:J[H.LayoutItemUUID]=Y.Submissions.map($=>{const Q=n.value.find(be=>be.FormUUID===$.FormUUID);return{Heading:Q==null?void 0:Q.Heading,Form:Q,Submission:$,Registration:Y}}).filter($=>{var Q;return((Q=$.Form)==null?void 0:Q.Type)===Se.FORM_TYPE_BADGE});break;case ee.META_DATA_SOURCE_DEALER_FORM:J[H.LayoutItemUUID]=Y.Submissions.map($=>{const Q=n.value.find(be=>be.FormUUID===$.FormUUID);return{Heading:Q==null?void 0:Q.Heading,Form:Q,Submission:$,Registration:Y}}).filter($=>{var Q;return((Q=$.Form)==null?void 0:Q.Type)===Se.FORM_TYPE_DEALER});break;case ee.META_DATA_SOURCE_PAYMENT_STATUS:if(Y.Paid===0&&Y.Total)J[H.LayoutItemUUID]="REQUIRED";else if(Y.Total>Y.Paid)J[H.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const $=We.find(Q=>Q.Paid===0&&(Q.Total||0)>0);if($){Y.Total===0&&$.Total===0?J[H.LayoutItemUUID]="NOT_REQUIRED":Y.Total===0&&$.Total||Y.Total>0&&$.Total===0?J[H.LayoutItemUUID]="MISSING_REQUIRED":Y.Paid>=Y.Total?J[H.LayoutItemUUID]="AWAITING_PARTNER":J[H.LayoutItemUUID]="ALL_REQUIRED";break}else Y.Total===0?J[H.LayoutItemUUID]="NOT_REQUIRED":J[H.LayoutItemUUID]="COMPLETE"}break;case ee.META_DATA_SOURCE_SUBMISSION_STATUS:Tl(Y.Submissions,n.value),J[H.LayoutItemUUID]=Y.Submissions.map($=>{const Q=n.value.find(be=>be.FormUUID===$.FormUUID);return{Heading:Q==null?void 0:Q.Heading,Form:Q,Submission:$,Registration:Y}});break}}}}),{key:Y.RegistrationUUID,registration:Y,...J}})}),c.value=!1)})}catch{}},va=p=>{G.value=!1,p&&(u.value=p,It())},It=()=>{u.value.Panels.forEach(p=>{p.Items.forEach(U=>{(U.SectionField==null||U.SectionField.Field==null)&&n.value.find(I=>{I.Sections.find(S=>{if(S.Fields){const ce=S.Fields.find(ue=>ue.SectionFieldUUID===U.SectionFieldUUID);if(ce)return U.SectionField=ce,!0}})})})}),u.value.Panels.length>0&&(k.value=[],u.value.Panels.forEach(p=>{const U={uuid:De(),order:p.Order,name:p.Name,headers:[],items:[],layout:p};p.Items.sort((I,S)=>I.Order>S.Order?1:I.Order==S.Order?0:-1),U.headers=p.Items.map(I=>{var S,ce;return{key:I.LayoutItemUUID,title:I.Label||((ce=(S=I.SectionField)==null?void 0:S.Field)==null?void 0:ce.Label)||"",align:I.Align==="end"?"end":"start",sortable:fa(I),type:ca(I),defaultSort:I.DefaultSort}}),k.value.push(U)}),k.value=k.value.sort((p,U)=>p.order>U.order?1:p.order==U.order?0:-1)),(W.value==null||W.value=="")&&k.value.length>0&&(W.value=k.value[0].uuid)};r?g.getConvention(r).then(p=>{p&&(l.value=p,u.value.ConventionID=l.value.ID,u.value.ConventionUUID=l.value.ConventionUUID,ma())}).catch(()=>{o.push("/")}):o.push("/");const ca=p=>{var U,I;if(p.SourceType===je.LAYOUT_ITEM_SOURCE_META)return`${p.SourceType}.${p.MetaField}`;if(p.SourceType===je.LAYOUT_ITEM_SOURCE_FORM)return(I=(U=p.SectionField)==null?void 0:U.Field)==null?void 0:I.Type;if(p.SourceType===je.LAYOUT_ITEM_SOURCE_USER)return`${p.SourceType}.${p.UserField}`},fa=p=>{const U=[ee.META_DATA_SOURCE_ACCOMMODATION_FORM,ee.META_DATA_SOURCE_BADGE_FORM,ee.META_DATA_SOURCE_DEALER_FORM,ee.META_DATA_SOURCE_REGISTRATION_FORM,ee.META_DATA_SOURCE_REGISTRATION_REFERENCE,ee.META_DATA_SOURCE_SUBMISSION_DATE,ee.META_DATA_SOURCE_SUBMISSION_STATUS],I=[ne.USER_DATA_SOURCE_DISPLAY_NAME,ne.USER_DATA_SOURCE_EMAIL,ne.USER_DATA_SOURCE_HANDLE,ne.USER_DATA_SOURCE_DATE_OF_BIRTH,ne.USER_DATA_SOURCE_FIRST_NAME,ne.USER_DATA_SOURCE_LAST_NAME];return U.includes(p.MetaField)||I.includes(p.UserField)},Ua=p=>{ve.value=p,Re.value=!0},_a=p=>{ve.value=p,Ce.value=!0},Aa=p=>{ve.value=p,Qe.value=!0};ie(Re,p=>{p||(ve.value=void 0)}),ie(Ce,p=>{p||(ve.value=void 0)});const rt=async(p="")=>{Dt.value=await g.getRegistrationGroup(p)},ga=({registration:p,form:U,submission:I})=>{ve.value=p,rt(p.RegistrationUUID).then(()=>{Ke.value=U,st.value=I,Pe.value=!0})},pa=p=>{g.switchUser(p.UserUUID).then(U=>{U&&hl(U.tokens,U.user,o,!1)}).catch(U=>{console.error(U)})};return E.on("registration.group.leave",p=>{g.leaveRegistrationGroup(p).then(U=>{U&&rt(p).then(()=>{E.emit("registration.group.left",U)})})}),E.on("registration.group.remove.member",p=>{g.leaveRegistrationGroup(p).then(U=>{U&&rt(p).then(()=>{E.emit("registration.group.left",U)})})}),(p,U)=>(f(),F(kl,null,{default:a(()=>[t(At,{color:"blue-darken-4"},{default:a(()=>[t(Qt,{modelValue:W.value,"onUpdate:modelValue":U[0]||(U[0]=I=>W.value=I),"show-arrows":""},{default:a(()=>[(f(!0),R(w,null,te(k.value,I=>(f(),F(Ze,{key:I.uuid,value:I.uuid},{default:a(()=>[V(b(I.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(Me),t(q,{icon:"mdi:mdi-cog-outline",onClick:U[1]||(U[1]=I=>G.value=!0)})]),_:1}),t(Kt,{modelValue:W.value,"onUpdate:modelValue":U[21]||(U[21]=I=>W.value=I),disabled:!0},{default:a(()=>[(f(!0),R(w,null,te(k.value,I=>(f(),F(et,{key:I.uuid,value:I.uuid},{default:a(()=>[I.uuid===W.value?(f(),F(ze,{key:0,class:"pa-2"},{default:a(()=>[t(j(Bl),{expanded:v.value,"onUpdate:expanded":U[17]||(U[17]=S=>v.value=S),page:C.value,"onUpdate:page":U[18]||(U[18]=S=>C.value=S),"items-per-page":D.value,"onUpdate:itemsPerPage":U[19]||(U[19]=S=>D.value=S),"sort-by":me.value,"onUpdate:sortBy":U[20]||(U[20]=S=>me.value=S),headers:I.headers,"items-length":K.value,items:I.items,"item-value":"key",loading:c.value,search:B.value,"onUpdate:options":ut,"show-expand":""},qe({top:a(()=>[t(ge,null,{default:a(()=>[t(X,null,{default:a(()=>[t(N,{cols:"12",sm:"12",md:"3",lg:"2",xl:"2"},{default:a(()=>[t(Ue,{modelValue:_.value,"onUpdate:modelValue":U[2]||(U[2]=S=>_.value=S),label:"Search by Badge",clearable:!0,"hide-details":"","onClick:clear":U[3]||(U[3]=S=>B.value=Date.now().toString()),onInput:U[4]||(U[4]=S=>B.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"12",md:"4",lg:"5",xl:"3"},{default:a(()=>[t(Ue,{modelValue:h.value.Value,"onUpdate:modelValue":U[5]||(U[5]=S=>h.value.Value=S),label:"Search By Furry Name",clearable:!0,"hide-details":"","onClick:clear":U[6]||(U[6]=S=>B.value=Date.now().toString()),onInput:U[7]||(U[7]=S=>B.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:a(()=>[t(Ue,{modelValue:T.value,"onUpdate:modelValue":U[8]||(U[8]=S=>T.value=S),label:"Search By Email",clearable:!0,"hide-details":"","onClick:clear":U[9]||(U[9]=S=>B.value=Date.now().toString()),onInput:U[10]||(U[10]=S=>B.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",sm:"6",md:"6",lg:"6",xl:"2"},{default:a(()=>[t(fe,{modelValue:P.value,"onUpdate:modelValue":U[11]||(U[11]=S=>P.value=S),label:"Search By Group",clearable:!0,"hide-details":"",items:m.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),t(N,{cols:"12",sm:"6",md:"6",lg:"6",xl:"2"},{default:a(()=>[t(fe,{modelValue:Z.value,"onUpdate:modelValue":U[12]||(U[12]=S=>Z.value=S),label:"Search By Tag",clearable:!0,"hide-details":"",items:x.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),"expanded-row":a(({columns:S,item:ce})=>[L("tr",null,[L("td",{colspan:S.length},[t(ra,{convention:l.value,registration:ce.selectable.registration},null,8,["convention","registration"])],8,Co)])]),"item.data-table-expand":a(({item:S})=>[v.value.findIndex(ce=>ce===S.key)>=0?(f(),F(q,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:ce=>v.value.splice(v.value.findIndex(ue=>ue===S.key),1)},{default:a(()=>[S.selectable.registration.Notes&&S.selectable.registration.Notes.length>0?(f(),R(w,{key:0},[V(b(S.selectable.registration.Notes.length),1)],64)):z("",!0)]),_:2},1032,["onClick"])):(f(),F(q,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:ce=>v.value.push(S.key)},{default:a(()=>[S.selectable.registration.Notes&&S.selectable.registration.Notes.length>0?(f(),R(w,{key:0},[V(b(S.selectable.registration.Notes.length),1)],64)):z("",!0)]),_:2},1032,["onClick"]))]),bottom:a(()=>[t(ge,{fluid:!0},{default:a(()=>[t(X,{class:"align-center"},{default:a(()=>[t(N,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:a(()=>[t(Ro,{modelValue:C.value,"onUpdate:modelValue":U[14]||(U[14]=S=>C.value=S),length:Math.ceil(K.value/D.value)},null,8,["modelValue","length"])]),_:1}),t(N,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:a(()=>[t(fe,{"model-value":D.value,density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}],"onUpdate:modelValue":U[15]||(U[15]=S=>D.value=parseInt(S,10))},null,8,["model-value"])]),_:1}),t(N,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:a(()=>[t(Ue,{modelValue:C.value,"onUpdate:modelValue":U[16]||(U[16]=S=>C.value=S),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(K.value/D.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),t(N,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:a(()=>[L("span",Oo,[D.value===-1?(f(),R(w,{key:0},[V(" 1-"+b(K.value)+" of "+b(K.value),1)],64)):(f(),R(w,{key:1},[V(b((C.value-1)*D.value+1)+"-"+b(C.value*D.value>=K.value?K.value:C.value*D.value)+" of "+b(K.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[te(I.headers,S=>({name:`item.${S.key}`,fn:a(({item:ce})=>[t(Dn,{header:S,item:ce,accommodations:ae.value,convention:l.value,extras:ke.value,forms:n.value,interests:Ne.value,tickets:Le.value,user:j(da),venues:we.value,onOpenActions:Ua,onOpenPayments:_a,onOpenTags:Aa,onReload:U[13]||(U[13]=ue=>ut({page:C.value,itemsPerPage:D.value,sortBy:O.value})),onSwitchUser:pa,onShowForm:ga},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):z("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),G.value?(f(),F(Gl,{key:0,title:"Edit Layout",modelValue:G.value,"onUpdate:modelValue":U[22]||(U[22]=I=>G.value=I),layout:u.value,onSave:va},null,8,["modelValue","layout"])):z("",!0),ve.value?(f(),R(w,{key:1},[Re.value?(f(),F(go,{key:0,modelValue:Re.value,"onUpdate:modelValue":U[23]||(U[23]=I=>Re.value=I),registration:ve.value,"onUpdate:registration":U[24]||(U[24]=I=>ve.value=I),accommodations:ae.value,convention:l.value,extras:ke.value,forms:n.value,interests:Ne.value,tickets:Le.value,title:"Registration Status & Communications",venues:we.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])):Ce.value?(f(),F(mo,{key:1,modelValue:Ce.value,"onUpdate:modelValue":U[25]||(U[25]=I=>Ce.value=I),registration:ve.value,"onUpdate:registration":U[26]||(U[26]=I=>ve.value=I),accommodations:ae.value,convention:l.value,extras:ke.value,forms:n.value,interests:Ne.value,tickets:Le.value,title:"Registration Payments",venues:we.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])):Qe.value?(f(),F(So,{key:2,modelValue:Qe.value,"onUpdate:modelValue":U[27]||(U[27]=I=>Qe.value=I),registration:ve.value,"onUpdate:registration":U[28]||(U[28]=I=>ve.value=I),convention:l.value,title:"Registration Tags"},null,8,["modelValue","registration","convention"])):z("",!0)],64)):z("",!0),Pe.value&&st.value&&Ke.value?(f(),F(gt,{key:2,modelValue:Pe.value,"onUpdate:modelValue":U[32]||(U[32]=I=>Pe.value=I),scrollable:!0,fullscreen:!0,persistent:!0},{default:a(()=>[t(ze,{class:"bg-red-darken-4"},{default:a(()=>[t(At,{color:"error"},{default:a(()=>[t(oa,null,{default:a(()=>[V("Submission Editor - Admin Mode")]),_:1}),t(Me),t(Ml,null,{default:a(()=>[t(q,{icon:"mdi:mdi-window-close",onClick:U[29]||(U[29]=I=>Pe.value=!1)})]),_:1})]),_:1}),t(nt,null,{default:a(()=>[t(Ga,{modelValue:Ke.value,"onUpdate:modelValue":U[30]||(U[30]=I=>Ke.value=I),admin:!0,convention:l.value,data:st.value,editable:!0,"registration-group":Dt.value,onClose:U[31]||(U[31]=I=>{Pe.value=!1,ut({page:C.value,itemsPerPage:D.value,sortBy:O.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):z("",!0)]),_:1}))}});export{ci as default};
