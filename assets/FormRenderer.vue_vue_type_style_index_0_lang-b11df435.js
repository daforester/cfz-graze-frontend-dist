import{p as $e,an as al,n as Le,ae as vl,r as E,s as ke,u as Te,e as ae,w as z,E as Se,v as i,H as w,x as re,N as H,aA as ml,ah as fl,y as pl,k as gl,f as hl,j as Ul,ax as nl,aa as Je,ad as yl,aB as bl,ay as Il,m as Vl,I as Ue,a1 as ue,a2 as ye,a5 as Ye,K as s,R as O,U as J,O as X,M as d,Z as le,L as I,Q as L,S as v,a3 as Ie,P as ol,ar as Ne,$ as ul,Y as Dl,ac as je,a as kl,J as Cl,aC as We}from"./index-dea29005.js";import{F as de}from"./form-aee596e2.js";import{a as Tl}from"./submission-56c4c4f1.js";import{V as he,u as ze}from"./VCheckbox-0167fcdb.js";import{s as Ee}from"./index-71069b21.js";import{f as Sl,V as ve,a as ne,e as Ve,d as Ce,c as il}from"./VList-9e8bf618.js";import{a as oe,V as G}from"./VRow-318b817a.js";import{m as El,u as Al,a as Rl,b as xl,V as He}from"./VSelect-39a169d0.js";import{d as wl,u as Ol,e as Be,T as _l,s as Ze}from"./filter-f2172d15.js";import{C as $l,a as Me,l as Ae,G as Ll,V as ce,n as Ml}from"./VContainer-6205936c.js";import{c as Pl}from"./copyToClipboard-54de8978.js";import{a as Fl,e as ql,_ as Qe}from"./VChip-87412af8.js";import{k as Nl,l as Bl,j as sl,V as De,m as rl,e as Gl,u as Hl,f as _e,g as Yl,h as zl,i as Kl,n as Xl}from"./VTextField-128663ba.js";import{m as Jl,I as jl}from"./index-8c6aa001.js";import{V as Wl,m as Zl,a as dl,b as Ql,c as et}from"./VCheckboxBtn-f9fe0988.js";import{G as lt}from"./userData-b929338c.js";import{v as Ge}from"./v4-a960c1f4.js";import{e as tt,V as at,a as nt,c as ot}from"./VCard-1362727d.js";import{V as ut}from"./VForm-d5bf781b.js";const el=(e,V,r)=>{if(r>=e.length){let _=r-e.length+1;for(;_--;)e.push(void 0)}e.splice(r,0,e.splice(V,1)[0])};var ee=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(ee||{});const na=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function it(e,V,r){if(V==null)return e;if(Array.isArray(V))throw new Error("Multiple matches is not implemented");return typeof V=="number"&&~V?i(w,null,[i("span",{class:"v-autocomplete__unmask"},[e.substr(0,V)]),i("span",{class:"v-autocomplete__mask"},[e.substr(V,r)]),i("span",{class:"v-autocomplete__unmask"},[e.substr(V+r)])]):e}const st=$e({autoSelectFirst:{type:[Boolean,String]},search:String,...wl({filterKeys:["title"]}),...El(),...al(Nl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Jl({transition:!1})},"VAutocomplete"),ll=Le()({name:"VAutocomplete",props:st(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,V){let{slots:r}=V;const{t:_}=vl(),U=E(),m=ke(!1),D=ke(!0),g=E(!1),p=E(),$=Te(e,"menu"),t=ae({get:()=>$.value,set:y=>{var B;$.value&&!y&&((B=p.value)!=null&&B.Î¨openChildren)||($.value=y)}}),f=ke(-1),T=ae(()=>{var y;return(y=U.value)==null?void 0:y.color}),{items:c,transformIn:o,transformOut:u}=Sl(e),{textColorClasses:n,textColorStyles:l}=$l(T),a=Te(e,"search",""),b=Te(e,"modelValue",[],y=>o(y===null?[null]:fl(y)),y=>{const B=u(y);return e.multiple?B:B[0]??null}),S=Bl(),{filteredItems:R,getMatches:P}=Ol(e,c,()=>D.value?"":a.value),h=ae(()=>b.value.map(y=>c.value.find(B=>e.valueComparator(B.value,y.value))||y)),x=ae(()=>e.hideSelected?R.value.filter(y=>!h.value.some(B=>B.value===y.value)):R.value),Y=ae(()=>h.value.map(y=>y.props.value)),W=ae(()=>h.value[f.value]),M=ae(()=>{var B;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((B=x.value[0])==null?void 0:B.title))&&x.value.length>0&&!D.value&&!g.value}),j=ae(()=>e.hideNoData&&!c.value.length||e.readonly||(S==null?void 0:S.isReadonly.value)),N=E(),{onListScroll:C,onListKeydown:A}=Al(N,U);function k(y){e.openOnClear&&(t.value=!0),a.value=""}function F(){j.value||(t.value=!0)}function Z(y){j.value||(m.value&&(y.preventDefault(),y.stopPropagation()),t.value=!t.value)}function fe(y){var be,q,te;if(e.readonly||S!=null&&S.isReadonly.value)return;const B=U.value.selectionStart,Q=Y.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(t.value=!0),["Escape"].includes(y.key)&&(t.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(M.value&&["Enter","Tab"].includes(y.key)&&me(R.value[0]),D.value=!0),y.key==="ArrowDown"&&M.value&&((be=N.value)==null||be.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(f.value<0){y.key==="Backspace"&&!a.value&&(f.value=Q-1);return}const K=f.value;W.value&&me(W.value),f.value=K>=Q-1?Q-2:K}if(y.key==="ArrowLeft"){if(f.value<0&&B>0)return;const K=f.value>-1?f.value-1:Q-1;h.value[K]?f.value=K:(f.value=-1,U.value.setSelectionRange((q=a.value)==null?void 0:q.length,(te=a.value)==null?void 0:te.length))}if(y.key==="ArrowRight"){if(f.value<0)return;const K=f.value+1;h.value[K]?f.value=K:(f.value=-1,U.value.setSelectionRange(0,0))}}}function Re(y){a.value=y.target.value}function Pe(){var y;m.value&&(D.value=!0,(y=U.value)==null||y.focus())}function Fe(y){m.value=!0,setTimeout(()=>{g.value=!0})}function qe(y){g.value=!1}function xe(y){(y==null||y===""&&!e.multiple)&&(b.value=[])}const pe=ke(!1);function me(y){if(e.multiple){const B=Y.value.findIndex(Q=>e.valueComparator(Q,y.value));if(B===-1)b.value=[...b.value,y];else{const Q=[...b.value];Q.splice(B,1),b.value=Q}}else b.value=[y],pe.value=!0,a.value=y.title,t.value=!1,D.value=!0,Se(()=>pe.value=!1)}return z(m,(y,B)=>{var Q;y!==B&&(y?(pe.value=!0,a.value=e.multiple?"":String(((Q=h.value.at(-1))==null?void 0:Q.props.title)??""),D.value=!0,Se(()=>pe.value=!1)):(!e.multiple&&!a.value?b.value=[]:M.value&&!g.value&&!h.value.some(be=>{let{value:q}=be;return q===x.value[0].value})&&me(x.value[0]),t.value=!1,a.value="",f.value=-1))}),z(a,y=>{!m.value||pe.value||(y&&(t.value=!0),D.value=!y)}),Me(()=>{const y=!!(e.chips||r.chip),B=!!(!e.hideNoData||x.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Q=b.value.length>0,[be]=De.filterProps(e);return i(De,re({ref:U},be,{modelValue:a.value,"onUpdate:modelValue":xe,focused:m.value,"onUpdate:focused":q=>m.value=q,validationValue:b.externalValue,dirty:Q,onInput:Re,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":t.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!r.selection,"v-autocomplete--selecting-index":f.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Q?void 0:e.placeholder,"onClick:clear":k,"onMousedown:control":F,onKeydown:fe}),{...r,default:()=>i(w,null,[i(Rl,re({ref:p,modelValue:t.value,"onUpdate:modelValue":q=>t.value=q,activator:"parent",contentClass:"v-autocomplete__content",disabled:j.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Pe},e.menuProps),{default:()=>[B&&i(ve,{ref:N,selected:Y.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:A,onFocusin:Fe,onFocusout:qe,onScrollPassive:C,tabindex:"-1"},{default:()=>{var q,te,K;return[(q=r["prepend-item"])==null?void 0:q.call(r),!x.value.length&&!e.hideNoData&&(((te=r["no-data"])==null?void 0:te.call(r))??i(ne,{title:_(e.noDataText)},null)),i(xl,{renderless:!0,items:x.value},{default:ge=>{var Xe;let{item:ie,index:se,itemRef:cl}=ge;const Ke=re(ie.props,{ref:cl,key:se,active:M.value&&se===0?!0:void 0,onClick:()=>me(ie)});return((Xe=r.item)==null?void 0:Xe.call(r,{item:ie,index:se,props:Ke}))??i(ne,Ke,{prepend:we=>{let{isSelected:Oe}=we;return i(w,null,[e.multiple&&!e.hideSelected?i(Wl,{key:ie.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ie.props.prependIcon&&i(Ae,{icon:ie.props.prependIcon},null)])},title:()=>{var we,Oe;return D.value?ie.title:it(ie.title,(we=P(ie))==null?void 0:we.title,((Oe=a.value)==null?void 0:Oe.length)??0)}})}}),(K=r["append-item"])==null?void 0:K.call(r)]}})]}),h.value.map((q,te)=>{var ie;function K(se){se.stopPropagation(),se.preventDefault(),me(q)}const ge={"onClick:close":K,onMousedown(se){se.preventDefault(),se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return i("div",{key:q.value,class:["v-autocomplete__selection",te===f.value&&["v-autocomplete__selection--selected",n.value]],style:te===f.value?l.value:{}},[y?r.chip?i(Ll,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:q.title}}},{default:()=>{var se;return[(se=r.chip)==null?void 0:se.call(r,{item:q,index:te,props:ge})]}}):i(Fl,re({key:"chip",closable:e.closableChips,size:"small",text:q.title},ge),null):((ie=r.selection)==null?void 0:ie.call(r,{item:q,index:te}))??i("span",{class:"v-autocomplete__selection-text"},[q.title,e.multiple&&te<h.value.length-1&&i("span",{class:"v-autocomplete__selection-comma"},[H(",")])])])})]),"append-inner":function(){var ge;for(var q=arguments.length,te=new Array(q),K=0;K<q;K++)te[K]=arguments[K];return i(w,null,[(ge=r["append-inner"])==null?void 0:ge.call(r,...te),e.menuIcon?i(Ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Z,onClick:ml},null):void 0])}})}),sl({isFocused:m,isPristine:D,menu:t,search:a,filteredItems:R,select:me},U)}});const rt=$e({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...rl(),...Gl()},"VTextarea"),dt=Le()({name:"VTextarea",directives:{Intersect:jl},inheritAttrs:!1,props:rt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,V){let{attrs:r,emit:_,slots:U}=V;const m=Te(e,"modelValue"),{isFocused:D,focus:g,blur:p}=Hl(e),$=ae(()=>typeof e.counterValue=="function"?e.counterValue(m.value):(m.value||"").toString().length),t=ae(()=>{if(r.maxlength)return r.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function f(M,j){var N,C;!e.autofocus||!M||(C=(N=j[0].target)==null?void 0:N.focus)==null||C.call(N)}const T=E(),c=E(),o=ke(""),u=E(),n=ae(()=>e.persistentPlaceholder||D.value||e.active);function l(){var M;u.value!==document.activeElement&&((M=u.value)==null||M.focus()),D.value||g()}function a(M){l(),_("click:control",M)}function b(M){_("mousedown:control",M)}function S(M){M.stopPropagation(),l(),Se(()=>{m.value="",Il(e["onClick:clear"],M)})}function R(M){var N;const j=M.target;if(m.value=j.value,(N=e.modelModifiers)!=null&&N.trim){const C=[j.selectionStart,j.selectionEnd];Se(()=>{j.selectionStart=C[0],j.selectionEnd=C[1]})}}const P=E(),h=E(+e.rows),x=ae(()=>["plain","underlined"].includes(e.variant));pl(()=>{e.autoGrow||(h.value=+e.rows)});function Y(){e.autoGrow&&Se(()=>{if(!P.value||!c.value)return;const M=getComputedStyle(P.value),j=getComputedStyle(c.value.$el),N=parseFloat(M.getPropertyValue("--v-field-padding-top"))+parseFloat(M.getPropertyValue("--v-input-padding-top"))+parseFloat(M.getPropertyValue("--v-field-padding-bottom")),C=P.value.scrollHeight,A=parseFloat(M.lineHeight),k=Math.max(parseFloat(e.rows)*A+N,parseFloat(j.getPropertyValue("--v-input-control-height"))),F=parseFloat(e.maxRows)*A+N||1/0,Z=Vl(C??0,k,F);h.value=Math.floor((Z-N)/A),o.value=Ul(Z)})}gl(Y),z(m,Y),z(()=>e.rows,Y),z(()=>e.maxRows,Y),z(()=>e.density,Y);let W;return z(P,M=>{M?(W=new ResizeObserver(Y),W.observe(P.value)):W==null||W.disconnect()}),hl(()=>{W==null||W.disconnect()}),Me(()=>{const M=!!(U.counter||e.counter||e.counterValue),j=!!(M||U.details),[N,C]=nl(r),[{modelValue:A,...k}]=_e.filterProps(e),[F]=Yl(e);return i(_e,re({ref:T,modelValue:m.value,"onUpdate:modelValue":Z=>m.value=Z,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":x.value},e.class],style:e.style},N,k,{centerAffix:h.value===1&&!x.value,focused:D.value}),{...U,default:Z=>{let{isDisabled:fe,isDirty:Re,isReadonly:Pe,isValid:Fe}=Z;return i(zl,re({ref:c,style:{"--v-textarea-control-height":o.value},onClick:a,onMousedown:b,"onClick:clear":S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},F,{active:n.value||Re.value,centerAffix:h.value===1&&!x.value,dirty:Re.value||e.dirty,disabled:fe.value,focused:D.value,error:Fe.value===!1}),{...U,default:qe=>{let{props:{class:xe,...pe}}=qe;return i(w,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),Je(i("textarea",re({ref:u,class:xe,value:m.value,onInput:R,autofocus:e.autofocus,readonly:Pe.value,disabled:fe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:l,onBlur:p},pe,C),null),[[yl("intersect"),{handler:f},null,{once:!0}]]),e.autoGrow&&Je(i("textarea",{class:[xe,"v-textarea__sizer"],"onUpdate:modelValue":me=>m.value=me,ref:P,readonly:!0,"aria-hidden":"true"},null),[[bl,m.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:j?Z=>{var fe;return i(w,null,[(fe=U.details)==null?void 0:fe.call(U,Z),M&&i(w,null,[i("span",null,null),i(Kl,{active:e.persistentCounter||D.value,value:$.value,max:t.value},U.counter)])])}:void 0})}),sl({},T,c,u)}}),ct={class:"extrasList"},vt=Ue({__name:"Extras",props:ue({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:V}){const r=e,{convention:_,disabled:U=!1}=r,m=ye(e,"modelValue"),D=Ye.getInstance(),g=E({});try{g.value=JSON.parse(m.value)}catch{}const p=E([]),$=E([]);z(r,()=>{f()}),z(g.value,c=>{for(const o in c)if(c[o].checked){const u=p.value.map(n=>{var l;return(l=n.Options)==null?void 0:l.find(a=>a.OptionUUID===o)});if(u&&u.length>0)try{const n=u[0];c[o].choiceId===""&&n&&n.Choices&&n.Choices.length>0&&(c[o].choiceId=n.Choices[0].TagUUID),c[o].price=n==null?void 0:n.Price}catch{}}else c[o].choiceId="",c[o].price=0;m.value=JSON.stringify(c),T()});const t=ae({get:()=>p.value.map(c=>c.ExtraUUID),set:()=>{}}),f=()=>{var o;const c=((o=r.items.find(u=>u.Title==="SelectedExtras"))==null?void 0:o.Value)||"[]";try{const u=JSON.parse(c);p.value=$.value.filter(n=>u.find(l=>l===n.ExtraUUID))||[],t.value=[...p.value.map(n=>n.ExtraUUID)],p.value.forEach(n=>{var l;(l=n.Options)==null||l.forEach(a=>{g.value[a.OptionUUID]||(g.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in _&&(D==null||D.getAvailableConventionExtras(_.ConventionUUID).then(c=>{c&&($.value=c,f())}));const T=(c=void 0)=>{setTimeout(()=>V("change",c),100)};return(c,o)=>(s(),O("div",ct,[J("h4",null,X(c.label),1),i(ve,{opened:t.value,"onUpdate:opened":o[0]||(o[0]=u=>t.value=u)},{default:d(()=>[(s(!0),O(w,null,le(p.value,u=>(s(),I(il,{key:u.ExtraUUID,value:u.ExtraUUID},{activator:d(({props:n})=>[i(ne,re({"prepend-icon":"mdi:mdi-group","append-icon":""},n),{default:d(()=>[u.Name?(s(),I(Ve,{key:0},{default:d(()=>[J("strong",null,X(u.Name),1)]),_:2},1024)):L("",!0),u.Description?(s(),I(Ce,{key:1,class:"mt-2"},{default:d(()=>[H(X(u.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:d(()=>[u.Options?(s(!0),O(w,{key:0},le(u.Options,n=>(s(),I(ne,{key:n.OptionUUID,class:"override-pl"},{default:d(()=>[i(oe,null,{default:d(()=>[i(G,{cols:"12",sm:"6"},{default:d(()=>[i(he,{label:`${n.Name} ${n.Price&&n.Price!==0?`(${v(Ee).currencySymbol}${n.Price})`:""}`,modelValue:g.value[n.OptionUUID].checked,"onUpdate:modelValue":l=>g.value[n.OptionUUID].checked=l,disabled:v(U),"hide-details":"",onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n.Choices&&n.Choices.length>1&&g.value[n.OptionUUID].checked?(s(),I(G,{key:0,cols:"12",sm:"6"},{default:d(()=>[i(He,{items:n.Choices.map(l=>({value:l.TagUUID,title:l.Title})),modelValue:g.value[n.OptionUUID].choiceId,"onUpdate:modelValue":l=>g.value[n.OptionUUID].choiceId=l,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(U),"hide-details":"",onChange:T},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const mt={class:"interestList"},ft=Ue({__name:"Interests",props:ue({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:V}){const r=e,{convention:_,disabled:U=!1}=r,m=ye(e,"modelValue"),D=Ye.getInstance(),g=E({});try{g.value=JSON.parse(m.value)}catch{}const p=E([]),$=E([]);z(g.value,c=>{m.value=JSON.stringify(c)});const t=E([]),f=()=>{var o;const c=((o=r.items.find(u=>u.Title==="SelectedInterests"))==null?void 0:o.Value)||"[]";try{const u=JSON.parse(c);p.value=$.value.filter(n=>u.find(l=>l===n.InterestUUID))||[],t.value=[...p.value.map(n=>n.InterestUUID)]}catch{}};"ConventionUUID"in _&&(D==null||D.getConventionInterests(_.ConventionUUID).then(c=>{c&&($.value=c,f())})),z(r,()=>{f()});const T=(c=void 0)=>{setTimeout(()=>V("change",c),100)};return(c,o)=>(s(),O("div",mt,[J("h4",null,X(c.label),1),i(ve,{opened:t.value,"onUpdate:opened":o[0]||(o[0]=u=>t.value=u)},{default:d(()=>[(s(!0),O(w,null,le(p.value,u=>(s(),I(ne,{key:u.InterestUUID},{default:d(()=>[i(oe,null,{default:d(()=>[i(G,null,{default:d(()=>[i(he,{label:`${u.Name} ${u.Price&&u.Price>0?`(${v(Ee).currencySymbol}${u.Price})`:""}`,modelValue:g.value[u.InterestUUID],"onUpdate:modelValue":n=>g.value[u.InterestUUID]=n,disabled:v(U),messages:u.Description,onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const pt={class:"ticketList"},gt={key:0,class:"text-orange-darken-1"},ht=Ue({__name:"Tickets",props:ue({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:V}){const r=e,{admin:_=!1,convention:U,disabled:m=!1}=r,D=ye(e,"modelValue"),g=Ye.getInstance(),p=E({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{p.value=JSON.parse(D.value),"ticket"in p.value&&(p.value.Ticket=p.value.ticket),"addonsChecked"in p.value&&(p.value.AddonsChecked=p.value.addonsChecked),"componentsChecked"in p.value&&(p.value.ComponentsChecked=p.value.componentsChecked)}catch{}const $=E([]),t=E([]);z(p.value,l=>{D.value=JSON.stringify(l)});const f=E([]),T=E({required:(l,a=void 0)=>()=>{if(a==null){if(p.value.Ticket.length===0&&r.required)return"Must select at least one ticket option.";if(l&&l.ComponentsRequired>0&&p.value.Ticket.includes(l.TicketUUID||"")){let b=0;if(l.TicketComponents.forEach(S=>{p.value.ComponentsChecked.forEach(R=>{S.TicketUUID===R&&(b+=1)})}),b<l.ComponentsRequired)return`Must select ticket ${l.ComponentsRequired} component${l.ComponentsRequired===1?"":"s"}`}}return!0}}),c=()=>{var a;const l=((a=r.items.find(b=>b.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const b=JSON.parse(l);$.value=t.value.filter(S=>S.Type==="TICKET_TYPE_GROUP"&&b.find(R=>R===S.TicketUUID))||[],f.value=[...$.value.filter(S=>S.Type==="TICKET_TYPE_GROUP").map(S=>S.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(_)g==null||g.getConventionTickets(U.ConventionUUID).then(l=>{l&&(t.value=l,c())});else{const l=r.items.find(a=>a.Title==="SelectedTickets");l&&(g==null||g.getFieldTickets(l.FieldUUID).then(a=>{a&&(t.value=a,c())}))}z(r,()=>{c()});const o=l=>{p.value.Ticket.length>1&&p.value.Ticket.shift(),p.value.ComponentsChecked=[];const a=[];$.value.forEach(b=>{(p.value.Ticket.includes(b.TicketUUID)||p.value.ComponentsChecked.includes(b.TicketUUID))&&a.push(...b.AddonTickets.map(S=>S.TicketUUID))}),p.value.AddonsChecked=p.value.AddonsChecked.filter(b=>a.includes(b)),n(l)},u=l=>{const a=t.value.find(b=>b.TicketUUID===p.value.Ticket[0]);if(a)for(;p.value.ComponentsChecked.length>a.ComponentsRequired;)p.value.ComponentsChecked.shift();n(l)},n=(l=void 0)=>{setTimeout(()=>V("change",l),100)};return(l,a)=>{var b;return s(),O("div",pt,[J("h4",null,[H(X(l.label)+" ",1),(b=l.registrationGroup)!=null&&b.Registration.Leader?L("",!0):(s(),O("small",gt,"(controlled by group leader)"))]),i(ve,{opened:f.value,"onUpdate:opened":a[4]||(a[4]=S=>f.value=S)},{default:d(()=>[(s(!0),O(w,null,le(v(Be)($.value.filter(S=>S.Type===v(_l).TICKET_TYPE_GROUP)),S=>(s(),O(w,{key:S.TicketUUID},[S.Tickets.length>0?(s(),I(il,{key:0,value:S.TicketUUID},{activator:d(({props:R})=>[i(ne,re(R,{"prepend-icon":"mdi:mdi-group"}),{default:d(()=>[i(Ve,null,{default:d(()=>[J("strong",null,X(S.Name),1)]),_:2},1024),i(Ce,null,{default:d(()=>[H(X(S.Description),1)]),_:2},1024)]),_:2},1040)]),default:d(()=>[(s(!0),O(w,null,le(S.Tickets,R=>(s(),I(ne,{key:R.TicketUUID,class:"override-pl"},{default:d(()=>{var P;return[i(Ce,null,{default:d(()=>[H(X(R.Description),1)]),_:2},1024),i(he,{modelValue:p.value.Ticket,"onUpdate:modelValue":a[0]||(a[0]=h=>p.value.Ticket=h),value:R.TicketUUID,onChange:o,rules:[T.value.required(R)],"validate-on":"submit",disabled:v(m)||!((P=l.registrationGroup)!=null&&P.Registration.Leader)},{label:d(()=>[i(Ae,{icon:R.RequiresAccommodation?"mdi:mdi-home":R.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+X(`${R.Name} ${R.Price>0?`(${v(Ee).currencySymbol}${R.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),p.value.Ticket.length>0&&R.TicketUUID===p.value.Ticket[0]?(s(),O(w,{key:0},[R.AddonTickets.length?(s(),I(ve,{key:0},{default:d(()=>[(s(!0),O(w,null,le(v(Be)(R.AddonTickets),h=>(s(),O(w,{key:h==null?void 0:h.TicketUUID},[h?(s(),I(ne,{key:0},{default:d(()=>[i(Ve,null,{default:d(()=>{var x;return[i(he,{modelValue:p.value.AddonsChecked,"onUpdate:modelValue":a[1]||(a[1]=Y=>p.value.AddonsChecked=Y),value:h.TicketUUID,onChange:a[2]||(a[2]=Y=>{p.value.ComponentsChecked=[],n(Y)}),disabled:v(m)||!((x=l.registrationGroup)!=null&&x.Registration.Leader)},{label:d(()=>[i(Ae,{icon:h.RequiresAccommodation?"mdi:mdi-home-plus":h.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+X(`${h.Name} ${h.Price>0?`(${v(Ee).currencySymbol}${h.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),i(Ce,null,{default:d(()=>[H(X(h.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),R.TicketComponents.length?(s(),I(ve,{key:1},{default:d(()=>[(s(!0),O(w,null,le(v(Be)(R.TicketComponents),h=>(s(),O(w,{key:h==null?void 0:h.TicketUUID},[h?(s(),I(ne,{key:0},{default:d(()=>[i(Ve,null,{default:d(()=>{var x;return[i(he,{modelValue:p.value.ComponentsChecked,"onUpdate:modelValue":a[3]||(a[3]=Y=>p.value.ComponentsChecked=Y),value:h.TicketUUID,onChange:u,rules:[T.value.required(R,h)],"validate-on":"submit",disabled:v(m)||!((x=l.registrationGroup)!=null&&x.Registration.Leader)},{label:d(()=>[i(Ae,{icon:h.RequiresAccommodation?"mdi:mdi-home-plus":h.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+X(`${h.Name} ${h.Price>0?`(${v(Ee).currencySymbol}${h.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),i(Ce,null,{default:d(()=>[H(X(h.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}});const Ut={key:0},yt=J("strong",null,"Your Sharing Group",-1),bt=["href","onClick"],It=J("br",null,null,-1),Vt=J("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Dt=J("strong",null,"Your Groups Accommodation",-1),kt=J("br",null,null,-1),Ct=J("small",null,"(in order of preference, controlled by group leader)",-1),Tt=J("strong",null,"Accommodation Options",-1),St=J("br",null,null,-1),Et=J("strong",null,"Your Chosen Accommodation",-1),At=J("small",null,"(in order of preference)",-1),Rt=Ue({__name:"Accommodation",props:ue({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change","update:items"],["update:modelValue"]),setup(e,{emit:V}){const r=e,{admin:_=!1,convention:U,disabled:m}=r,D=ye(e,"modelValue"),g=ze(r,V,void 0,void 0,"items"),p=ul(),$=Dl.getInstance(),t=E(Ie(D.value)),f=E([]),T=E(),c=E({sharing:!1}),o=()=>{try{const C=JSON.parse(r.data);C&&(c.value=C)}catch{}};o(),z(r,()=>{o(),r.registrationGroup&&(f.value=r.registrationGroup.Members,T.value=r.registrationGroup.Registration)}),z(t,C=>{D.value=Ie(C)},{deep:!0});const u=E(""),n=E(!1),l=()=>{var C;(C=T.value)!=null&&C.Leader&&p.getRegistrationInvite(U.ConventionUUID).then(A=>{if(A){const k=new URL(location.href);k.searchParams.set("token",A),u.value=k.toString()}})},a=()=>{Pl(u.value),l(),n.value=!0,setTimeout(()=>n.value=!1,2200)},b=()=>{$.emit("registration.group.leave")},S=C=>{$.emit("registration.group.remove.member",C)},R=E([]);z(g,()=>{P()});const P=()=>{_?p.getConventionAccommodation(U.ConventionUUID).then(C=>{R.value=C.filter(A=>!!(g!=null&&g.value.find(k=>k.Value===A.AccommodationUUID)))||[]}):g.value.length>0&&p.getFieldAccommodation(g.value[0].FieldUUID).then(C=>{R.value=C.filter(A=>!!(g!=null&&g.value.find(k=>k.Value===A.AccommodationUUID)))||[]})};P(),(()=>{var C;if(r.registrationGroup)if(f.value=r.registrationGroup.Members,T.value=r.registrationGroup.Registration,(C=T.value)!=null&&C.Leader)l();else try{t.value=JSON.parse(r.registrationGroup.AccommodationData)}catch{}})();const x=E({column:0,id:""}),Y=()=>{!m&&!t.value.includes(x.value.id)&&(x.value.column===0&&x.value.id!==""&&t.value.push(x.value.id),N())},W=()=>{const C=t.value.findIndex(A=>A===x.value.id);!m&&C>=0&&(t.value.splice(C,1),N())},M=()=>{if(m||x.value.column!==1)return;const C=t.value.findIndex(A=>A===x.value.id);C<=0||(el(t.value,C,C-1),N())},j=()=>{if(m||x.value.column!==1)return;const C=t.value.findIndex(A=>A===x.value.id);C>=t.value.length-1||(el(t.value,C,C+1),N())},N=(C=void 0)=>{setTimeout(()=>V("change",C),100)};return(C,A)=>(s(),O(w,null,[J("h4",null,X(C.label),1),i(oe,null,{default:d(()=>[i(G,{cols:"12"},{default:d(()=>{var k;return[f.value&&T.value&&c.value.sharing?(s(),O("div",Ut,[yt,!v(m)&&((k=f.value.find(F=>F.IsLeader))==null?void 0:k.UUID)!==T.value.RegistrationUUID?(s(),I(ce,{key:0,color:"red",variant:"text",onClick:b},{default:d(()=>[H("(leave group)")]),_:1})):L("",!0),i(ve,null,{default:d(()=>[i(ne,null,{default:d(()=>{var F;return[i(Ve,{class:"float-left pr-2 font-weight-bold"},{default:d(()=>[H(" Leader: ")]),_:1}),H(" "+X((F=f.value.find(Z=>Z.IsLeader))==null?void 0:F.Name),1)]}),_:1}),(s(!0),O(w,null,le(f.value,F=>(s(),O(w,{key:F.UUID},[F.IsLeader?L("",!0):(s(),I(ne,{key:0},{append:d(()=>[T.value.Leader?(s(),I(ce,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:Z=>S(F.UUID),disabled:v(m)},null,8,["onClick","disabled"])):L("",!0)]),default:d(()=>[i(Ve,{class:"float-left pr-2"},{default:d(()=>[H(" Member: ")]),_:1}),H(" "+X(F.Name),1)]),_:2},1024))],64))),128))]),_:1}),i(ql,{modelValue:n.value,"onUpdate:modelValue":A[0]||(A[0]=F=>n.value=F),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),u.value&&T.value.Leader&&!v(m)?(s(),O(w,{key:1},[i(ce,{color:"blue"},{default:d(()=>[J("a",{href:u.value,onClick:ol(a,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,bt)]),_:1}),It,Vt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),T.value&&!T.value.Leader?(s(),I(oe,{key:0},{default:d(()=>[i(G,{cols:"10",md:"5"},{default:d(()=>[Dt,kt,Ct,i(ve,null,{default:d(()=>[(s(!0),O(w,null,le(t.value.map(k=>R.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(s(),O(w,null,[k?(s(),I(ne,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ne(x.value.column===1&&x.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(s(),I(oe,{key:1},{default:d(()=>[i(G,{cols:"12",md:"5"},{default:d(()=>[Tt,St,i(ve,null,{default:d(()=>[(s(!0),O(w,null,le(R.value,k=>(s(),I(ne,{key:k.AccommodationUUID,title:k.Name,class:Ne(x.value.column===0&&x.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:F=>x.value={column:0,id:k.AccommodationUUID},"append-icon":v(m)?"":"mdi:mdi-gesture-tap",onDblclick:A[1]||(A[1]=F=>Y())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(m)?L("",!0):(s(),I(G,{key:0,cols:"12",md:"1"},{default:d(()=>[i(oe,{class:"d-md-none"},{default:d(()=>[i(G,{cols:"12",class:"text-center"},{default:d(()=>[i(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:A[2]||(A[2]=k=>Y()),color:"primary",title:"Select"}),H(" Â  "),i(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:A[3]||(A[3]=k=>W()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),i(oe,{class:"d-none d-md-flex h-100 align-content-center"},{default:d(()=>[i(G,{cols:"12"},{default:d(()=>[i(ce,{icon:"mdi:mdi-arrow-right",size:"small",onClick:A[4]||(A[4]=k=>Y()),color:"primary",title:"Select"})]),_:1}),i(G,{cols:"12"},{default:d(()=>[i(ce,{icon:"mdi:mdi-arrow-left",size:"small",onClick:A[5]||(A[5]=k=>W()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),i(G,{cols:"10",md:"5"},{default:d(()=>[Et,i(ve,null,{default:d(()=>[(s(!0),O(w,null,le(t.value.map(k=>R.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(s(),O(w,null,[k?(s(),I(ne,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ne(x.value.column===1&&x.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Z=>x.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":v(m)?"":"mdi:mdi-gesture-tap",onDblclick:A[6]||(A[6]=Z=>W())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),At]),_:1}),v(m)?L("",!0):(s(),I(G,{key:1,cols:"2",md:"1"},{default:d(()=>[i(oe,{class:"d-flex h-100 align-content-center mt-3"},{default:d(()=>[i(G,{cols:"12"},{default:d(()=>[i(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:A[7]||(A[7]=k=>M()),color:"primary",title:"Higher Priority"})]),_:1}),i(G,{cols:"12"},{default:d(()=>[i(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:A[8]||(A[8]=k=>j()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1}))],64))}}),xt=Ue({__name:"AgeCheck",props:ue({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:V}){const r=e,_=ze(r,V,void 0,void 0,"items"),U=ye(e,"modelValue"),m=E({required:t=>!r.required||!!t||"Required.",min:t=>{var a,b;const f=new Date,T=f.getFullYear(),c=(f.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),o=f.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),u=((a=_.value.find(S=>S.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",n=((b=_.value.find(S=>S.Title=="BEFORE_DATE"))==null?void 0:b.Value)||`${T}-${c}-${o}`,l=p(n);return g(t,n,parseInt(u))||`You must be at least ${u} years old by ${l.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),D=()=>(V("blur"),!(m.value.min(U.value||"")!==!0||m.value.required(U.value||"")!==!0)),g=(t,f,T)=>{if(t>=f)return!1;const c=p(t),u=p(f).getTime()-c.getTime(),n=1e3*60*60*24*365.25;return u/n>=T},p=t=>{const[f,T,c]=t.split("-");return new Date(parseInt(f),parseInt(T)-1,parseInt(c))},$=(t=void 0)=>{setTimeout(()=>V("change",t),100)};return(t,f)=>(s(),I(De,{modelValue:U.value,"onUpdate:modelValue":f[0]||(f[0]=T=>U.value=T),type:"date",hint:t.hint||"",label:t.label||"",name:t.name||"",variant:"outlined",disabled:t.disabled||!1,"persistent-hint":t.persistentHint||!1,"error-messages":t.errorMessages||"",rules:[m.value.required,m.value.min],onBlur:D,onChange:$},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),wt=$e({...Zl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ot=Le()({name:"VRadio",props:wt(),setup(e,V){let{slots:r}=V;return Me(()=>i(dl,re(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),r)),{}}});const _t=$e({height:{type:[Number,String],default:"auto"},...rl(),...al(Ql(),["multiple"]),trueIcon:{type:je,default:"$radioOn"},falseIcon:{type:je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),$t=Le()({name:"VRadioGroup",inheritAttrs:!1,props:_t(),emits:{"update:modelValue":e=>!0},setup(e,V){let{attrs:r,slots:_}=V;const U=kl(),m=ae(()=>e.id||`radio-group-${U}`),D=Te(e,"modelValue");return Me(()=>{const[g,p]=nl(r),[$,t]=_e.filterProps(e),[f,T]=dl.filterProps(e),c=_.label?_.label({label:e.label,props:{for:m.value}}):e.label;return i(_e,re({class:["v-radio-group",e.class],style:e.style},g,$,{modelValue:D.value,"onUpdate:modelValue":o=>D.value=o,id:m.value}),{..._,default:o=>{let{id:u,messagesId:n,isDisabled:l,isReadonly:a}=o;return i(w,null,[c&&i(Xl,{id:u.value},{default:()=>[c]}),i(et,re(f,{id:u.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:l.value,readonly:a.value,"aria-labelledby":c?u.value:void 0,multiple:!1},p,{modelValue:D.value,"onUpdate:modelValue":b=>D.value=b}),_)])}})}),{}}}),tl=Ue({__name:"FormField",props:ue({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:ue(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:V}){const r=e,{admin:_=!1,disabled:U=!1,persistentHint:m=!1,required:D=!1}=r,g=E(""),p=ye(e,"modelValue"),$=ze(r,V,void 0,void 0,"field"),t=E(Ie($.value)),f=E({maxlength:n=>!r.maxLength||n.length<=r.maxLength||`Maximum length is ${r.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!r.minLength||n.length>=r.minLength||`Minimum length is ${r.minLength} characters. (Current length: ${n.length})`,required:n=>!r.required||!!n||"Required field."}),T=E(!1),c=E([]),o=E("");try{const n=JSON.parse(p.value);Array.isArray(n)?c.value=n:typeof n=="boolean"?T.value=n:o.value=p.value}catch{T.value=!1,c.value=[],o.value=p.value}z(T,()=>{p.value=JSON.stringify(T.value),V("input")}),z(c,()=>{p.value=JSON.stringify(c.value),V("input"),t.value.Type===ee.SELECT&&V("change")},{deep:!0}),z(o,()=>{p.value=o.value,V("input"),t.value.Type===ee.SELECT&&V("change")}),z($.value,()=>{t.value.Type!==$.value.Type?(t.value=Ie($.value),T.value=!1,c.value=[],o.value=""):t.value=Ie($.value)});const u=(n=void 0)=>{V("change",n)};return(n,l)=>t.value.Type===v(ee).TEXT?(s(),I(De,{key:0,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:`${t.value.Label}${v(D)?"*":""}`,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:u},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(ee).DATE?(s(),I(De,{key:1,modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=a=>o.value=a),type:"date",name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:u},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(ee).NUMBER?(s(),I(De,{key:2,modelValue:o.value,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value=a),type:"number",name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:u},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(ee).TEXTAREA?(s(),I(dt,{key:3,modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:u},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(ee).CHECKBOX?(s(),O(w,{key:4},[t.value.Multiple?(s(!0),O(w,{key:0},le(t.value.Values,a=>(s(),I(he,{key:a.ID,modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=b=>c.value=b),name:n.name,hint:t.value.Hint,label:a.Title,value:a.Value,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,rules:[f.value.required],onChange:u},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(s(),I(he,{key:1,modelValue:T.value,"onUpdate:modelValue":l[5]||(l[5]=a=>T.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,required:v(D),rules:[a=>!v(D)||!!a||"You must tick to continue!"],onChange:u},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):t.value.Type===v(ee).SELECT?(s(),O(w,{key:5},[!t.value.Autofill&&t.value.Multiple?(s(),I(He,{key:0,modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=a=>c.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill&&t.value.Multiple?(s(),I(ll,{key:1,modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=a=>c.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill?t.value.Autofill?(s(),I(ll,{key:3,modelValue:o.value,"onUpdate:modelValue":l[9]||(l[9]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(s(),I(He,{key:2,modelValue:o.value,"onUpdate:modelValue":l[8]||(l[8]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(m)||!1,"error-messages":g.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):t.value.Type===v(ee).RADIO?(s(),I($t,{key:6,modelValue:o.value,"onUpdate:modelValue":l[10]||(l[10]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,rules:[f.value.required],onChange:u},{default:d(()=>[(s(!0),O(w,null,le(t.value.Values,a=>(s(),I(Ot,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(ee).ACCOMMODATION?(s(),I(Rt,{key:7,modelValue:c.value,"onUpdate:modelValue":l[11]||(l[11]=a=>c.value=a),name:n.name,admin:v(_),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,onChange:u},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===v(ee).AGE?(s(),I(xt,{key:8,modelValue:o.value,"onUpdate:modelValue":l[12]||(l[12]=a=>o.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,onChange:u},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===v(ee).EXTRAS?(s(),I(vt,{key:9,modelValue:o.value,"onUpdate:modelValue":l[13]||(l[13]=a=>o.value=a),convention:n.convention,name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,required:v(D),onChange:u},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===v(ee).INTERESTS?(s(),I(ft,{key:10,modelValue:o.value,"onUpdate:modelValue":l[14]||(l[14]=a=>o.value=a),convention:n.convention,name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,required:v(D),onChange:u},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===v(ee).TICKET?(s(),I(ht,{key:11,modelValue:o.value,"onUpdate:modelValue":l[15]||(l[15]=a=>o.value=a),admin:v(_),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(m),"error-messages":g.value,required:v(D),onChange:u},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),Lt={key:0,class:"my-2 text-white text-center"},Mt=["innerHTML"],Pt=["innerHTML"],oa=Ue({__name:"FormRenderer",props:ue({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const V=ye(e,"modelValue");Ze(V.value.Sections),V.value.Sections.forEach(o=>{o.Fields&&Ze(o.Fields)});const r=E(),_=lt(),U=ul(),m=E(!1),D=E(!1),g=E(!1),p=E((()=>{if(e.data!==void 0){const u=Ie(e.data);return V.value.Sections.forEach(n=>{n.Fields&&n.Fields.forEach(l=>{const a=e.data.Data.find(b=>b.SectionFieldUUID===l.SectionFieldUUID&&b.SectionFieldUUID==l.SectionFieldUUID);if(a)l.Value=a.Data;else{const b={ID:0,SubmissionDataUUID:Ge(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:n.ID,SectionUUID:n.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value};u.Data.push(b)}})}),u}const o={ID:0,SubmissionUUID:Ge(),FormID:V.value.ID,FormUUID:V.value.FormUUID,UserID:(_==null?void 0:_.ID)||0,UserUUID:(_==null?void 0:_.UserUUID)||"",Data:[],Status:Tl.SUBMISSION_STATUS_OPEN};return o.Data=V.value.Sections.map(u=>u.Fields?u.Fields.map(n=>({ID:0,SubmissionDataUUID:Ge(),SubmissionID:o.ID,SubmissionUUID:o.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:n.ID,SectionFieldUUID:n.SectionFieldUUID,Data:n.Value})):[]).flat(),o})()),$=(o,u,n)=>{const l=p.value.Data.find(a=>a.SectionUUID===o&&a.SectionFieldUUID===u);l&&(l.Data=n)},t=(o,u,n,l)=>o&&o.Type===de.FORM_TYPE_REGISTRATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:n?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":o&&o.Type===de.FORM_TYPE_ACCOMMODATION?n?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":o&&o.Type===de.FORM_TYPE_DEALER?l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(o&&o.Type===de.FORM_TYPE_BADGE,"/"),f=({callback:o})=>{U.getRegistrationByConvention(e.convention.ConventionUUID).then(u=>{o&&o("Loading"),U.getAvailableConventionForms(e.convention.ConventionUUID).then(n=>{u.Submissions.forEach((P,h)=>{P.Form||(u.Submissions[h].Form=n.find(x=>x.FormUUID===P.FormUUID))});const l=u.Submissions.find(P=>P.FormUUID===p.value.FormUUID),a=u.Submissions.find(P=>{var h;return((h=P.Form)==null?void 0:h.Type)===de.FORM_TYPE_ACCOMMODATION}),b=u.Submissions.find(P=>{var h;return((h=P.Form)==null?void 0:h.Type)===de.FORM_TYPE_DEALER}),S=u.Submissions.find(P=>{var h;return((h=P.Form)==null?void 0:h.Type)===de.FORM_TYPE_BADGE}),R=t(l==null?void 0:l.Form,a==null?void 0:a.Form,b==null?void 0:b.Form,S==null?void 0:S.Form);We.push(R)})})},T=({callback:o})=>{var u;(u=r.value)==null||u.validate().then(n=>{n.valid?U.saveSubmission(p.value).then(l=>{l?setTimeout(()=>{c(l,o,1)},1e3):o&&o("Failed to process request")}).catch(()=>{o&&o("Failed to process request")}):o&&o("Errors in form detected, please review and try again.")})},c=(o,u,n=1)=>{U.checkSubmission(o).then(l=>{if(l)if(l.Ready&&l.Submission){if(m.value=!1,p.value=l.Submission,u&&u("Saved"),l.Forms&&l.Forms.length>0){const a=l.Forms.find(h=>h.FormUUID===p.value.FormUUID),b=l.Forms.find(h=>h.Type===de.FORM_TYPE_ACCOMMODATION),S=l.Forms.find(h=>h.Type===de.FORM_TYPE_DEALER),R=l.Forms.find(h=>h.Type===de.FORM_TYPE_BADGE),P=t(a,b,S,R);We.push(P)}}else{if(n>5&&(m.value=!0),n>10&&(D.value=!0),n>20&&(g.value=!0),n>60){u&&(m.value=!1,D.value=!1,g.value=!1,u("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{c(o,u,n+1)},n<20?1e3*n:2e4)}else u&&(m.value=!1,D.value=!1,g.value=!1,u("A problem was encountered during saving, please check form and try again."))}).catch(()=>{u&&(m.value=!1,D.value=!1,g.value=!1,u("A problem was encountered during saving, please check form and try again."))})};return(o,u)=>{const n=Cl("router-link");return s(),I(Ml,null,{default:d(()=>[i(ut,{ref_key:"formValidator",ref:r,onSubmit:u[0]||(u[0]=ol(()=>{},["prevent"]))},{default:d(()=>[V.value.Heading?(s(),O("h1",Lt,X(V.value.Heading),1)):L("",!0),V.value.Description?(s(),O("div",{key:1,class:"my-2 form-description-container pa-5 border rounded-lg",innerHTML:V.value.Description},null,8,Mt)):L("",!0),(s(!0),O(w,null,le(V.value.Sections,l=>(s(),I(tt,{key:`section_${V.value.ID}.${l.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:d(()=>[l.Heading?(s(),I(at,{key:0},{default:d(()=>[H(X(l.Heading),1)]),_:2},1024)):L("",!0),l.Description?(s(),I(nt,{key:1,class:"text-wrap"},{default:d(()=>[J("div",{innerHTML:l.Description},null,8,Pt)]),_:2},1024)):L("",!0),l.Fields?(s(),I(ot,{key:2},{default:d(()=>[(s(!0),O(w,null,le(l.Fields,a=>(s(),O(w,{key:`field_${V.value.ID}.${l.ID}.${a.ID}`},[a.Field?(s(),I(oe,{key:0},{default:d(()=>[i(G,null,{default:d(()=>[o.editable?(s(),I(tl,{key:0,field:a.Field,modelValue:a.Value,"onUpdate:modelValue":b=>a.Value=b,admin:o.admin,convention:o.convention,"registration-group":o.registrationGroup,required:a.Required,"min-length":a.MinLength,"max-length":a.MaxLength,"persistent-hint":!0,onChange:b=>$(l.SectionUUID,a.SectionFieldUUID,a.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(s(),I(tl,{key:1,field:a.Field,modelValue:a.Value,"onUpdate:modelValue":b=>a.Value=b,admin:o.admin,convention:o.convention,"registration-group":o.registrationGroup,required:a.Required,"min-length":a.MinLength,"max-length":a.MaxLength,"persistent-hint":!0,disabled:"",onChange:b=>$(l.SectionUUID,a.SectionFieldUUID,a.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),o.preview?L("",!0):(s(),O(w,{key:2},[i(oe,null,{default:d(()=>[i(G,{class:"text-right"},{default:d(()=>[i(n,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:d(()=>[i(ce,{color:"red"},{default:d(()=>[H("Cancel")]),_:1})]),_:1})]),_:1}),o.editable?(s(),I(G,{key:0,class:"text-left"},{default:d(()=>[i(Qe,{onClick:T,type:"submit"})]),_:1})):(s(),I(G,{key:1,class:"text-left"},{default:d(()=>[i(Qe,{onClick:f,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),m.value?(s(),I(oe,{key:0},{default:d(()=>[i(G,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[H(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),D.value?(s(),I(oe,{key:1},{default:d(()=>[i(G,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[H(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),g.value?(s(),I(oe,{key:2},{default:d(()=>[i(G,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[H(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{na as F,ll as V,tl as _,dt as a,ee as b,oa as c};
