import{I as A,r as w,e as h,w as G,J as $,K as e,L as n,M as o,v as S,Q as u,N as r,O as T,U as V,R as l,H as k,Z as N,S as d,$ as Y,V as j,W as B,_ as x}from"./index-a97ecad7.js";import{G as H}from"./userData-9d7bb482.js";import{_ as q}from"./LoginView.vue_vue_type_script_setup_true_lang-30611ab6.js";import{s as b}from"./index-26b71cef.js";import{F as m}from"./form-29fd1dbb.js";import{S as J}from"./submission-830079be.js";import{u as K}from"./useStoreAPI-c6a81a35.js";import{c as O}from"./canEditForm-01f9781a.js";import{s as Q}from"./sortSubmissions-8ed80f07.js";import{V as W}from"./VAvatar-b9aa2738.js";import{V as Z,a as X,b as ee,c as te,d as oe,e as ne}from"./VCard-0472f9d1.js";import{V as s}from"./VBtn-bba9c7af.js";import{V as ae}from"./VSpacer-53975385.js";import{V as ie,a as re}from"./VRow-5a5a8e82.js";import{j as se}from"./VContainer-2380a751.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-1ffa0f68.js";const le=c=>(j("data-v-a9549819"),c=c(),B(),c),ue=["innerHTML"],ce={key:0},de={key:0,class:"font-weight-bold float-left pt-1 w-50"},me={key:1,class:"pa-1"},ve={key:0,class:"font-weight-bold float-left pt-1 w-50"},fe={key:1},_e={class:"font-weight-bold float-left pt-1 w-50"},ge={class:"text-red-darken-4"},pe={key:1,class:"text-red-darken-4 mt-4"},ye=le(()=>V("strong",null,"There are forms above that require completion, please edit and save them.",-1)),ke=[ye],Se=A({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(c){const g=K(),I=Y(),p=w(g.GetConventionLogoURL(c.convention.ConventionUUID)),i=w(),v=h(()=>{var t;return O(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],m.FORM_TYPE_REGISTRATION)}),U=h(()=>{var t;return O(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],m.FORM_TYPE_DEALER)}),C=h(()=>{var t;return O(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],m.FORM_TYPE_ACCOMMODATION)}),L=h(()=>{var t;return O(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],m.FORM_TYPE_ADDITIONAL)});return G(()=>c.forms,()=>{I.getRegistrationByConvention(c.convention.ConventionUUID).then(t=>{t&&(t.Submissions?(t.Submissions.forEach((M,y)=>{M.Form||(t.Submissions[y].Form=c.forms.find(D=>D.FormUUID===M.FormUUID))}),Q(t.Submissions)):t.Submissions=[],i.value=t)})}),(t,M)=>{const y=$("router-link"),D=$("RouterLink");return e(),n(ne,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[S(ee,{class:"flex-1-1 align-content-start"},{default:o(()=>[p.value?(e(),n(W,{key:0,src:p.value,title:t.convention.Name,class:"logo text-center"},null,8,["src","title"])):u("",!0),t.convention.Name?(e(),n(Z,{key:1,class:"text-center"},{default:o(()=>[r(T(t.convention.Name),1)]),_:1})):u("",!0),t.convention.Description?(e(),n(X,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[V("div",{innerHTML:t.convention.Description},null,8,ue)]),_:1})):u("",!0)]),_:1}),S(te,null,{default:o(()=>{var E,R;return[i.value?(e(),l("dl",ce,[i.value.Reference?(e(),l("dt",de," Badge No: ")):u("",!0),i.value.Reference?(e(),l("dd",me," #"+T(i.value.Reference),1)):u("",!0),(e(!0),l(k,null,N((E=i.value)==null?void 0:E.Submissions,a=>{var f,F,z,P;return e(),l(k,{key:a.SubmissionUUID},[a.Form?(e(),l(k,{key:0},[a.Form?(e(),l("dt",ve,T(a.Form.Heading),1)):u("",!0),a.Form?(e(),l("dd",fe,[r(T(d(J)(a.Status))+" ",1),((f=a.Form)==null?void 0:f.Type)===d(m).FORM_TYPE_REGISTRATION?(e(),n(y,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/registration`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&v.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((F=a.Form)==null?void 0:F.Type)===d(m).FORM_TYPE_ACCOMMODATION?(e(),n(y,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/accommodation`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&C.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((z=a.Form)==null?void 0:z.Type)===d(m).FORM_TYPE_DEALER?(e(),n(y,{key:2,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/dealer`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&U.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((P=a.Form)==null?void 0:P.Type)===d(m).FORM_TYPE_ADDITIONAL?(e(),n(y,{key:3,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/additional`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&L.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):u("",!0)])):u("",!0)],64)):u("",!0)],64)}),128)),((R=i.value)==null?void 0:R.Submissions.length)>=1?(e(!0),l(k,{key:2},N(t.forms,a=>{var f;return e(),l(k,{key:a.FormUUID},[(f=i.value)!=null&&f.Submissions.find(F=>F.FormUUID===a.FormUUID)?u("",!0):(e(),l(k,{key:0},[V("dt",_e,T(a.Heading),1),V("dd",ge,[r(" Requires Completion "),a.Type===d(m).FORM_TYPE_REGISTRATION?(e(),n(y,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/registration`},{default:o(()=>[a.State.Edit&&v.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===d(m).FORM_TYPE_ACCOMMODATION?(e(),n(y,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/accommodation`},{default:o(()=>[a.State.Edit&&C.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===d(m).FORM_TYPE_DEALER?(e(),n(y,{key:2,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/dealer`},{default:o(()=>[a.State.Edit&&U.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===d(m).FORM_TYPE_ADDITIONAL?(e(),n(y,{key:3,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/additional`},{default:o(()=>[a.State.Edit&&L.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):u("",!0)])],64))],64)}),128)):u("",!0)])):u("",!0),i.value&&i.value.Submissions.length>=1&&t.forms.filter(a=>{var f;return!((f=i.value)!=null&&f.Submissions.find(F=>F.FormUUID==a.FormUUID))}).length?(e(),l("div",pe,ke)):u("",!0)]}),_:1}),S(oe,null,{default:o(()=>{var E,R;return[t.convention.DetailLink?(e(),n(s,{key:0,color:"orange",href:t.convention.DetailLink},{default:o(()=>[r(T(d(b).buttonDetails),1)]),_:1},8,["href"])):u("",!0),S(ae),v.value?(e(),l(k,{key:1},[(E=i.value)!=null&&E.Submissions.find(a=>{var f;return((f=a.Form)==null?void 0:f.Type)===d(m).FORM_TYPE_REGISTRATION})?(e(),n(D,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}`},{default:o(()=>[S(s,{color:"primary"},{default:o(()=>[r(T(d(b).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),l(k,{key:0},[(R=t.forms.find(a=>a.Type===d(m).FORM_TYPE_REGISTRATION))!=null&&R.State.New?(e(),n(D,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}`},{default:o(()=>[S(s,{color:"primary"},{default:o(()=>[r(T(d(b).buttonRegister),1)]),_:1})]),_:1},8,["to"])):u("",!0)],64))],64)):u("",!0)]}),_:1})]),_:1})}}});const Ie=x(Se,[["__scopeId","data-v-a9549819"]]),Te=A({__name:"Conventions",setup(c){const g=Y(),I=w([]),p=w([]);return g.getOpenConventionsList().then(i=>{i&&(I.value=[...I.value,...i],g.getAvailableConventionForms(I.value.map(v=>v.ConventionUUID)).then(v=>{p.value=[...p.value,...v]}).catch(v=>{console.error(v)}))}),(i,v)=>(e(),n(se,null,{default:o(()=>[S(re,{class:"justify-center"},{default:o(()=>[(e(!0),l(k,null,N(I.value,U=>(e(),n(ie,{key:U.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[S(Ie,{convention:U,forms:p.value.filter(C=>C.ConventionUUID===U.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Ue={};function Fe(c,g){return e(),l("div")}const Ee=x(Ue,[["render",Fe]]),Re=A({__name:"MainView",emits:["pageTitle"],setup(c,{emit:g}){g("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const p=localStorage.getItem("gjt_token"),i=localStorage.getItem("ajt_token");return p?(localStorage.removeItem("gjt_token"),location.href=p):i&&(localStorage.removeItem("ajt_token"),location.href=i),(v,U)=>(e(),l(k,null,[S(Te),S(Ee)],64))}}),je=A({__name:"Home",emits:["pageTitle"],setup(c,{emit:g}){const I=H();return g("pageTitle","Telegram Login"),(p,i)=>(e(),l("div",null,[d(I)?(e(),n(Re,{key:0,onPageTitle:i[0]||(i[0]=v=>g("pageTitle",v))})):(e(),n(q,{key:1}))]))}});export{je as default};
