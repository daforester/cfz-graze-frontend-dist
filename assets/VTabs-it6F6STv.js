import{s as re}from"./index-OKsbKlsK.js";import{i as _,r as k,n as D,q as R,v as f,f as t,x as B,C as ce,P as xe,M as K,N as ke,c as x,w as Ie,B as Q,F as j,A as L,y as ve,Q as Ee,z as de,Y as fe,p as ee,R as Me,d as ae,m as Z,a4 as me,a5 as Ne,K as Fe,a6 as He,s as F,a7 as Le,a8 as Ge,a as Ke,u as je,t as A,a9 as qe,L as Ye,aa as Xe}from"./index-4J73krRG.js";import{v as We}from"./v4-yQnnJER4.js";import{u as ge}from"./nil-rxyd0N8M.js";import{V as z,m as Je,b as Qe,c as Ze,u as he}from"./VBtn-DR7x7RPC.js";import{V as H,a as _e,j as ea,u as le,m as aa,e as Ue,k as la,l as ta,f as na}from"./VContainer-UGss-vdP.js";import{a as we,V as De}from"./VToolbar-XZw7OZj2.js";import{V as ze}from"./VSpacer-Q3wJv_hP.js";import{V as Pe}from"./VToolbarItems-FeWrW8UD.js";import{V as oa,a as be}from"./VRow-oVPkXzWg.js";import{V as ye}from"./VTextField-_5s2eHEm.js";import{c as Oe,e as $e}from"./VCard-tQDJuYiS.js";import{a as sa}from"./VList-Oewl9_KL.js";import{V as ia}from"./VDivider-OXDn1dmX.js";import{V as ua}from"./VAutocomplete-BUrMB6Ue.js";import{V as ra}from"./VDialog--fFBJ6Ml.js";import{s as pe,a as ca,m as va}from"./FormRenderer.vue_vue_type_style_index_0_lang-Ez4JRSU7.js";import{V as da,a as fa,b as ma,c as ga}from"./VDataTable-JO1p0eeN.js";import{f as ha,a as ba,s as ya,b as Te}from"./forwardRefs-4LIpIeAo.js";const pa=_({__name:"AddTag",props:{convention:{},organisation:{}},emits:["save","close"],setup(e,{emit:m}){const o=k(""),n=k("");typeof e.convention=="object"?(o.value=e.convention.ConventionUUID,n.value=e.convention.OrganisationUUID):o.value=e.convention||"",typeof e.organisation=="object"?n.value=e.organisation.OrganisationUUID:n.value.length===0&&(n.value=e.organisation||"");const h=m,d=k({ID:0,TagUUID:We(),ConventionID:0,ConventionUUID:o.value||ge,OrganisationID:0,OrganisationUUID:n.value||ge,Title:"",Key:""}),u=xe(),v=()=>{u.saveTag(d.value).then(l=>{l&&(d.value=l,h("save",l),h("close"))})};return(l,s)=>(D(),R($e,null,{default:f(()=>[t(De,{dark:"",color:"primary"},{default:f(()=>[t(z,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>h("close"))},{default:f(()=>[t(H,null,{default:f(()=>[B("mdi:mdi-close")]),_:1})]),_:1}),t(we,null,{default:f(()=>[B("Add Tag")]),_:1}),t(ze),t(Pe,null,{default:f(()=>[t(z,{variant:"text",onClick:v},{default:f(()=>[B(" Save ")]),_:1})]),_:1})]),_:1}),t(Oe,null,{default:f(()=>[t(_e,{fluid:!0},{default:f(()=>[t(oa,null,{default:f(()=>[t(be,{cols:"12"},{default:f(()=>[t(ye,{label:ce(re).formLabelDisplayName,type:"text",variant:"outlined",modelValue:d.value.Title,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value.Title=a)},null,8,["label","modelValue"])]),_:1}),t(be,{cols:"12"},{default:f(()=>[t(ye,{label:ce(re).formLabelTagKey,type:"text",variant:"outlined",modelValue:d.value.Key,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value.Key=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),ja=_({__name:"SelectTags",props:K({convention:{},organisation:{},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:""},label:{},variant:{},showKey:{type:Boolean,default:!1},showUuid:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:K(["change"],["update:modelValue"]),setup(e,{emit:m}){const o=ke(e,"modelValue"),n=m,h=k([]),d=xe(),u=k([]),v=k([]),l=k(""),s=k(""),a=k(0),r=x(()=>[...u.value,...v.value].map(p=>({title:`${p.Title}${e.showKey?` [ ${p.Key} ]`:""}${e.showUuid?` (${p.TagUUID})`:""}`,value:h.value.find(c=>c.TagUUID===p.TagUUID)||p})));typeof e.convention=="object"?(l.value=e.convention.ConventionUUID,s.value=e.convention.OrganisationUUID):l.value=e.convention||"",typeof e.organisation=="object"?s.value=e.organisation.OrganisationUUID:s.value.length===0&&(s.value=e.organisation||""),(async()=>{const y=[];l.value&&y.push(d.getConventionTags(l.value)),s.value&&y.push(d.getOrganisationTags(s.value));const p=await Promise.all(y);if(l.value&&s.value?(v.value=p[0].sort((c,S)=>c.Title.localeCompare(S.Title)),u.value=p[1].sort((c,S)=>c.Title.localeCompare(S.Title))):l.value&&p.length==1?v.value=p[0].sort((c,S)=>c.Title.localeCompare(S.Title)):s.value&&p.length==1&&(u.value=p[0].sort((c,S)=>c.Title.localeCompare(S.Title))),Array.isArray(o.value))a.value=2,r.value.forEach(c=>{Array.isArray(o.value)&&o.value.find(w=>w.TagUUID===c.value.TagUUID)&&h.value.push(c.value)});else if(typeof o.value=="string"){a.value=1;try{const c=JSON.parse(o.value);r.value.forEach(S=>{c.find(P=>P.TagUUID===S.value.TagUUID)&&h.value.push(S.value)})}catch{}}})();const b=k(!1),V=()=>{b.value=!0},T=y=>{y.ConventionUUID.length>0?v.value.push(y):y.OrganisationUUID.length>0&&u.value.push(y),h.value.push(y),I()},I=()=>{switch(a.value){default:case 2:{o.value=h.value,n("change");break}case 1:{o.value=JSON.stringify(h.value),n("change");break}}};return Ie(h,I),(y,p)=>(D(),Q(j,null,[t(ua,{modelValue:h.value,"onUpdate:modelValue":p[1]||(p[1]=c=>h.value=c),chips:y.chips,multiple:"",label:y.label||"Tags",variant:y.variant||"solo",hint:y.hint,"persistent-hint":!0,clearable:y.clearable,items:r.value,"item-title":"title","item-value":"value"},{"prepend-item":f(()=>[t(sa,{title:"New Tag",onClick:p[0]||(p[0]=c=>V())},{prepend:f(()=>[t(H,{icon:"mdi:mdi-plus"})]),_:1}),t(ia,{class:"mt-2"})]),_:1},8,["modelValue","chips","label","variant","hint","clearable","items"]),t(ra,{modelValue:b.value,"onUpdate:modelValue":p[3]||(p[3]=c=>b.value=c),scrollable:!0},{default:f(()=>[t(pa,{convention:y.convention,organisation:y.organisation,onClose:p[2]||(p[2]=c=>b.value=!1),onSave:T},null,8,["convention","organisation"])]),_:1},8,["modelValue"])],64))}}),qa=_({__name:"EditOrderedItems",props:K({closeable:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!0},hasOrder:{type:Boolean,default:!0},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0},modelModifiers:{}}),emits:K(["add","save","close"],["update:modelValue"]),setup(e,{emit:m}){const o=m,n=ke(e,"modelValue"),h=()=>{o("save"),o("close")},d=()=>{if(e.newItem){let a;e.hasOrder?(a=e.newItem(),a.Order=n.value.length+1):a=e.newItem(),n.value.push(a)}else e.hasOrder?n.value.push({ID:0,Order:n.value.length+1}):n.value.push({ID:0})},u=a=>{n.value.splice(a,1)},v=a=>{ca(a,n.value)},l=a=>{va(a,n.value)},s=a=>e.labelParent&&a[e.labelParent]?a[e.labelParent][e.label]:a[e.label];return n.value.find(a=>a.Order===0)&&pe(n.value),n.value.find(a=>n.value.find(r=>r.Order===a.Order&&r!==a))&&pe(n.value),(a,r)=>(D(),R($e,null,{default:f(()=>[t(De,{dark:"",color:"primary"},{default:f(()=>[a.closeable?(D(),R(z,{key:0,icon:"",dark:"",onClick:r[0]||(r[0]=b=>o("close"))},{default:f(()=>[t(H,null,{default:f(()=>[B("mdi:mdi-close")]),_:1})]),_:1})):L("",!0),t(we,null,{default:f(()=>[B(ve(a.title),1)]),_:1}),t(ze),t(Pe,null,{default:f(()=>[a.newItem!==void 0?(D(),R(z,{key:0,variant:"text",onClick:d},{default:f(()=>[B(" Add ")]),_:1})):L("",!0),a.showSave?(D(),R(z,{key:1,variant:"text",onClick:h},{default:f(()=>[B(" Save ")]),_:1})):L("",!0)]),_:1})]),_:1}),t(Oe,{class:"pa-0"},{default:f(()=>[t(da,null,{default:f(()=>[(D(!0),Q(j,null,Ee(n.value,(b,V)=>(D(),R(fa,{key:b.ID,class:"mt-0"},{default:f(()=>[t(ma,null,{actions:f(({expanded:T})=>[a.showDelete?(D(),R(z,{key:0,icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:I=>u(V)},null,8,["onClick"])):L("",!0),t(H,{class:"align-self-center text-h5",icon:T?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:f(()=>[a.hasOrder?(D(),Q(j,{key:0},[t(z,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(T=>l(b),["stop"])},null,8,["onClick"]),t(z,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(T=>v(b),["stop"])},null,8,["onClick"])],64)):L("",!0),fe(a.$slots,`${a.slotNamePrefix}_${V}_title`,{},()=>[B(ve(s(b)),1)])]),_:2},1024),t(ga,{class:"px-0"},{default:f(()=>[fe(a.$slots,`${a.slotNamePrefix}_${V}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),Be=Symbol.for("vuetify:v-tabs"),Ta=ee({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Me(Je({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Sa=ae()({name:"VTab",props:Ta(),setup(e,m){let{slots:o,attrs:n}=m;const{textColorClasses:h,textColorStyles:d}=ea(e,"sliderColor"),u=k(),v=k(),l=x(()=>e.direction==="horizontal"),s=x(()=>{var r,b;return((b=(r=u.value)==null?void 0:r.group)==null?void 0:b.isSelected.value)??!1});function a(r){var V,T;let{value:b}=r;if(b){const I=(T=(V=u.value)==null?void 0:V.$el.parentElement)==null?void 0:T.querySelector(".v-tab--selected .v-tab__slider"),y=v.value;if(!I||!y)return;const p=getComputedStyle(I).color,c=I.getBoundingClientRect(),S=y.getBoundingClientRect(),w=l.value?"x":"y",P=l.value?"X":"Y",G=l.value?"right":"bottom",O=l.value?"width":"height",q=c[w],E=S[w],$=q>E?c[G]-S[G]:c[w]-S[w],Y=Math.sign($)>0?l.value?"right":"bottom":Math.sign($)<0?l.value?"left":"top":"center",X=(Math.abs($)+(Math.sign($)<0?c[O]:S[O]))/Math.max(c[O],S[O])||0,C=c[O]/S[O]||0,M=1.5;ba(y,{backgroundColor:[p,"currentcolor"],transform:[`translate${P}(${$}px) scale${P}(${C})`,`translate${P}(${$/M}px) scale${P}(${(X-1)/M+1})`,"none"],transformOrigin:Array(3).fill(Y)},{duration:225,easing:ya})}}return le(()=>{const r=z.filterProps(e);return t(z,Z({symbol:Be,ref:u,class:["v-tab",e.class],style:e.style,tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1},r,n,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":a}),{...o,default:()=>{var b;return t(j,null,[((b=o.default)==null?void 0:b.call(o))??e.text,!e.hideSlider&&t("div",{ref:v,class:["v-tab__slider",h.value],style:d.value},null)])}})}),ha({},u)}});function Se(e){const o=Math.abs(e);return Math.sign(e)*(o/((1/.501-2)*(1-o)+1))}function Ve(e){let{selectedElement:m,containerSize:o,contentSize:n,isRtl:h,currentScrollOffset:d,isHorizontal:u}=e;const v=u?m.clientWidth:m.clientHeight,l=u?m.offsetLeft:m.offsetTop,s=h&&u?n-l-v:l,a=o+d,r=v+s,b=v*.4;return s<=d?d=Math.max(s-b,0):a<=r&&(d=Math.min(d-(a-r-b),n-o)),d}function Va(e){let{selectedElement:m,containerSize:o,contentSize:n,isRtl:h,isHorizontal:d}=e;const u=d?m.clientWidth:m.clientHeight,v=d?m.offsetLeft:m.offsetTop,l=h&&d?n-v-u/2-o/2:v+u/2-o/2;return Math.min(n-o,Math.max(0,l))}const Ca=Symbol.for("vuetify:v-slide-group"),Ae=ee({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Ca},nextIcon:{type:me,default:"$next"},prevIcon:{type:me,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...aa(),...Ne(),...Ue(),...Qe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Ce=ae()({name:"VSlideGroup",props:Ae(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const{isRtl:n}=Fe(),{displayClasses:h,mobile:d}=He(e),u=Ze(e,e.symbol),v=F(!1),l=F(0),s=F(0),a=F(0),r=x(()=>e.direction==="horizontal"),{resizeRef:b,contentRect:V}=he(),{resizeRef:T,contentRect:I}=he(),y=x(()=>u.selected.value.length?u.items.value.findIndex(i=>i.id===u.selected.value[0]):-1),p=x(()=>u.selected.value.length?u.items.value.findIndex(i=>i.id===u.selected.value[u.selected.value.length-1]):-1);if(Le){let i=-1;Ie(()=>[u.selected.value,V.value,I.value,r.value],()=>{cancelAnimationFrame(i),i=requestAnimationFrame(()=>{if(V.value&&I.value){const g=r.value?"width":"height";s.value=V.value[g],a.value=I.value[g],v.value=s.value+1<a.value}if(y.value>=0&&T.value){const g=T.value.children[p.value];y.value===0||!v.value?l.value=0:e.centerActive?l.value=Va({selectedElement:g,containerSize:s.value,contentSize:a.value,isRtl:n.value,isHorizontal:r.value}):v.value&&(l.value=Ve({selectedElement:g,containerSize:s.value,contentSize:a.value,isRtl:n.value,currentScrollOffset:l.value,isHorizontal:r.value}))}})})}const c=F(!1);let S=0,w=0;function P(i){const g=r.value?"clientX":"clientY";w=(n.value&&r.value?-1:1)*l.value,S=i.touches[0][g],c.value=!0}function G(i){if(!v.value)return;const g=r.value?"clientX":"clientY",U=n.value&&r.value?-1:1;l.value=U*(w+S-i.touches[0][g])}function O(i){const g=a.value-s.value;l.value<0||!v.value?l.value=0:l.value>=g&&(l.value=g),c.value=!1}function q(){b.value&&(b.value[r.value?"scrollLeft":"scrollTop"]=0)}const E=F(!1);function $(i){if(E.value=!0,!(!v.value||!T.value)){for(const g of i.composedPath())for(const U of T.value.children)if(U===g){l.value=Ve({selectedElement:U,containerSize:s.value,contentSize:a.value,isRtl:n.value,currentScrollOffset:l.value,isHorizontal:r.value});return}}}function Y(i){E.value=!1}function te(i){var g;!E.value&&!(i.relatedTarget&&((g=T.value)!=null&&g.contains(i.relatedTarget)))&&C()}function X(i){T.value&&(r.value?i.key==="ArrowRight"?C(n.value?"prev":"next"):i.key==="ArrowLeft"&&C(n.value?"next":"prev"):i.key==="ArrowDown"?C("next"):i.key==="ArrowUp"&&C("prev"),i.key==="Home"?C("first"):i.key==="End"&&C("last"))}function C(i){var g,U,se,ie,ue;if(T.value)if(!i)(g=Ge(T.value)[0])==null||g.focus();else if(i==="next"){const N=(U=T.value.querySelector(":focus"))==null?void 0:U.nextElementSibling;N?N.focus():C("first")}else if(i==="prev"){const N=(se=T.value.querySelector(":focus"))==null?void 0:se.previousElementSibling;N?N.focus():C("last")}else i==="first"?(ie=T.value.firstElementChild)==null||ie.focus():i==="last"&&((ue=T.value.lastElementChild)==null||ue.focus())}function M(i){const g=l.value+(i==="prev"?-1:1)*s.value;l.value=Ke(g,0,a.value-s.value)}const Re=x(()=>{let i=l.value>a.value-s.value?-(a.value-s.value)+Se(a.value-s.value-l.value):-l.value;l.value<=0&&(i=Se(-l.value));const g=n.value&&r.value?-1:1;return{transform:`translate${r.value?"X":"Y"}(${g*i}px)`,transition:c.value?"none":"",willChange:c.value?"transform":""}}),W=x(()=>({next:u.next,prev:u.prev,select:u.select,isSelected:u.isSelected})),J=x(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return v.value||Math.abs(l.value)>0;case"mobile":return d.value||v.value||Math.abs(l.value)>0;default:return!d.value&&(v.value||Math.abs(l.value)>0)}}),ne=x(()=>Math.abs(l.value)>0),oe=x(()=>a.value>Math.abs(l.value)+s.value);return le(()=>t(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!r.value,"v-slide-group--has-affixes":J.value,"v-slide-group--is-overflowing":v.value},h.value,e.class],style:e.style,tabindex:E.value||u.selected.value.length?-1:0,onFocus:te},{default:()=>{var i,g,U;return[J.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ne.value}],onClick:()=>ne.value&&M("prev")},[((i=o.prev)==null?void 0:i.call(o,W.value))??t(Te,null,{default:()=>[t(H,{icon:n.value?e.nextIcon:e.prevIcon},null)]})]),t("div",{key:"container",ref:b,class:"v-slide-group__container",onScroll:q},[t("div",{ref:T,class:"v-slide-group__content",style:Re.value,onTouchstartPassive:P,onTouchmovePassive:G,onTouchendPassive:O,onFocusin:$,onFocusout:Y,onKeydown:X},[(g=o.default)==null?void 0:g.call(o,W.value)])]),J.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!oe.value}],onClick:()=>oe.value&&M("next")},[((U=o.next)==null?void 0:U.call(o,W.value))??t(Te,null,{default:()=>[t(H,{icon:n.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:u.selected,scrollTo:M,scrollOffset:l,focus:C}}});function xa(e){return e?e.map(m=>Xe(m)?m:{text:m,value:m}):[]}const ka=ee({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ae({mandatory:"force"}),...la(),...Ue()},"VTabs"),Ya=ae()({name:"VTabs",props:ka(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const n=je(e,"modelValue"),h=x(()=>xa(e.items)),{densityClasses:d}=ta(e),{backgroundColorClasses:u,backgroundColorStyles:v}=na(A(e,"bgColor"));return qe({VTab:{color:A(e,"color"),direction:A(e,"direction"),stacked:A(e,"stacked"),fixed:A(e,"fixedTabs"),sliderColor:A(e,"sliderColor"),hideSlider:A(e,"hideSlider")}}),le(()=>{const l=Ce.filterProps(e);return t(Ce,Z(l,{modelValue:n.value,"onUpdate:modelValue":s=>n.value=s,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},d.value,u.value,e.class],style:[{"--v-tabs-height":Ye(e.height)},v.value,e.style],role:"tablist",symbol:Be}),{default:()=>[o.default?o.default():h.value.map(s=>t(Sa,Z(s,{key:s.text}),null))]})}),{}}});export{Ya as V,ja as _,qa as a,Sa as b};
