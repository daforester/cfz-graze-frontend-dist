import{s as B}from"./index-71069b21.js";import{d as q,Y as M,Z as H,y as D,S as W,o as f,b as g,w as t,c as e,e as _,M as I,L as b,h as N,O as h,F as k,P as w,G as $,f as F,H as de,m as Te,W as ml,D as $l,N as cl,k as re,$ as _e,a0 as Pe,a1 as ge,z as Ge,_ as Ol,p as Ce,a2 as Fl,a as De,s as j,a3 as nl,u as vl,v as Pl,a4 as Rl,a5 as Ll,I as Nl,x as wl,t as ve,B as Ml,i as He,a6 as fl,n as ql,q as Yl,a7 as Bl,a8 as zl,a9 as pl,aa as Kl,ab as Gl,ac as Hl,X as jl,ad as Xl}from"./index-162d4367.js";import{m as we,a as Me,s as Re,F as Wl,_ as Jl,b as Zl}from"./FormField.vue_vue_type_script_setup_true_lang-86a44409.js";import{u as Z}from"./useGrazeAPI-837849d5.js";import{_ as Ve}from"./SelectTags.vue_vue_type_script_setup_true_lang-7e8ffd60.js";import{_ as ke,m as Ql,u as et}from"./SaveButton.vue_vue_type_script_setup_true_lang-8a0fe26a.js";import{e as me,c as Ue}from"./VCard-bba93bb4.js";import{V as E,a as J,m as lt,b as tt,c as Tl,d as at,e as nt,f as ot,g as it}from"./VBtn-92d1bfca.js";import{V as ce,b as ae}from"./VToolbar-e2ec70e7.js";import{V as oe}from"./VSpacer-314fab57.js";import{V as ye}from"./VToolbarItems-3e1b96b9.js";import{V as ee}from"./VContainer-cc9b11bd.js";import{V as K,a as ut,s as st}from"./VTextField-745142c2.js";import{V as be}from"./VDialog-27572a26.js";import{V as qe,d as ne,a as se,e as je,b as Vl}from"./VList-acae746e.js";import{a as z,V as C}from"./VRow-bdb2d614.js";import{v as G}from"./v4-a960c1f4.js";import{V as Ee,a as Se,b as xe,c as Ae}from"./VExpansionPanel-3218d69e.js";import{V as Ul}from"./VImg-6fedc660.js";import{V as he,u as Le}from"./VCheckbox-3d59ac07.js";import{V as dt}from"./VForm-d407a72b.js";import{V as rt}from"./VFileInput-8f169e7c.js";import{V as Xe}from"./VTextarea-c779626d.js";import{V as mt,T as L,a as ct}from"./VAutocomplete-1c088da1.js";import{V as ue}from"./VSelect-f8a615c2.js";import{V as vt,a as ft}from"./VChip-ad88dbeb.js";import{_ as pt}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-531bead9.js";import{_ as Tt}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-91c54978.js";import{V as yl,_ as Vt}from"./FieldEditor.vue_vue_type_script_setup_true_lang-35ae7c54.js";import{a as Ut,F as yt}from"./form-aee596e2.js";import{_ as We,a as It}from"./ModelDialog.vue_vue_type_script_setup_true_lang-f67fcb74.js";import{_ as _t}from"./FormRenderer.vue_vue_type_script_setup_true_lang-d83e5e01.js";import{V as gt,a as ol}from"./index-593c750c.js";import{u as il}from"./nil-d01db1aa.js";import{i as ht,u as $e,m as Je,d as Ze,j as ul,f as Ct}from"./rounded-a088577e.js";import{u as Dt}from"./ssrBoot-0303cbf7.js";import{M as kt}from"./index-fd59b42a.js";import{V as bt}from"./VSheet-b51e70f5.js";import"./scopeId-871895a5.js";import"./createSimpleFunctional-e6bf7656.js";import"./VAvatar-0f0da553.js";import"./VTable-b7e57a77.js";import"./userData-887aea4a.js";var Il=(a=>(a.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",a.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",a))(Il||{});const Et=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var _l=(a=>(a.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",a.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",a.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",a))(_l||{});const St=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}],xt=[{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}],At=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],$t=q({__name:"EditConventionExtraOptions",props:M({convention:{}},{modelValue:{}}),emits:M(["close"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=D(W(l.value)),c=()=>{l.value=n.value,s("close")};return(o,d)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[e(E,{icon:"",dark:"",onClick:d[0]||(d[0]=r=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:t(()=>[_("Edit Option Choice")]),_:1}),e(oe),e(ye,null,{default:t(()=>[e(E,{variant:"text",onClick:c},{default:t(()=>[_(" Apply ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:t(()=>[e(ee,null,{default:t(()=>[e(K,{label:I(B).formLabelName,type:"text",variant:"outlined",modelValue:n.value.Name,"onUpdate:modelValue":d[1]||(d[1]=r=>n.value.Name=r)},null,8,["label","modelValue"]),e(K,{label:I(B).formLabelDescription,type:"text",variant:"outlined",modelValue:n.value.Description,"onUpdate:modelValue":d[2]||(d[2]=r=>n.value.Description=r)},null,8,["label","modelValue"]),e(K,{label:I(B).formLabelPrice,type:"text",variant:"outlined","prepend-icon":I(B).currencyIcon,modelValue:n.value.Price,"onUpdate:modelValue":d[3]||(d[3]=r=>n.value.Price=r),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),n.value.Choices?(f(),g(Ve,{key:0,modelValue:n.value.Choices,"onUpdate:modelValue":d[4]||(d[4]=r=>n.value.Choices=r),convention:o.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):b("",!0)]),_:1})]),_:1})]),_:1}))}}),Ot=F("h3",null,"Options",-1),Ft=q({__name:"EditConventionExtra",props:M({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=D(W(s.value)),n=D(!1),c=D(0),o=Z(),d=D([""]),r=D([]),u=D([]);a.convention&&(o.getConventionTags(a.convention.ConventionUUID).then(V=>{u.value=V.sort((y,U)=>y.Title.localeCompare(U.Title))}),o.getOrganisationTags(a.convention.OrganisationUUID).then(V=>{r.value=V.sort((y,U)=>y.Title.localeCompare(U.Title))}));const i=N(()=>[...r.value,...u.value]),v=({callback:V})=>{o.saveExtra(l.value).then(y=>{y?(s.value=y,V&&V("Extra Saved")):V&&V("Failed to Save Extra")}).catch(()=>{V&&V("Failed to Save Extra")})},m=V=>{var y;V.Options||(V.Options=[]),V.Options.push({ID:0,OptionUUID:G(),ExtraID:V.ID,ExtraUUID:V.ExtraUUID,Order:((y=V.Options)==null?void 0:y.length)+1,Name:"",Description:"",Price:0,Choices:[]})},p=(V,y)=>{V.Options&&V.Options.splice(y,1)},T=V=>{if(V.Choices&&V.Choices.length>0)return V.Choices.map(y=>{const U=i.value.find(x=>x.TagUUID===y.TagUUID);if(U)return U.Title}).join(", ")};return(V,y)=>(f(),h(k,null,[e(ee,{class:"px-0"},{default:t(()=>[e(K,{label:I(B).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":y[0]||(y[0]=U=>l.value.Name=U)},null,8,["label","modelValue"]),e(K,{label:I(B).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":y[1]||(y[1]=U=>l.value.Description=U)},null,8,["label","modelValue"]),e(Ve,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":y[2]||(y[2]=U=>l.value.AppliesTags=U),convention:V.convention,organisation:V.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),Ot,e(qe,{opened:d.value,"onUpdate:opened":y[3]||(y[3]=U=>d.value=U)},{default:t(()=>[(f(!0),h(k,null,w(l.value.Options,(U,x)=>(f(),h(k,{key:U.ID},[U?(f(),g(se,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${U.Name} ${U.Price&&U.Price>0?`(${I(B).currencySymbol}${U.Price})`:""}`},{append:t(()=>[e(E,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:P=>p(l.value,x)},null,8,["onClick"]),e(E,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:P=>{n.value=!0,c.value=x}},null,8,["onClick"])]),default:t(()=>[U.Choices&&U.Choices.length>0?(f(),g(ne,{key:0},{default:t(()=>[_(" Options: "+$(T(U)),1)]),_:2},1024)):b("",!0)]),_:2},1032,["title"])):b("",!0)],64))),128))]),_:1},8,["opened"]),e(E,{color:"primary",onClick:y[4]||(y[4]=U=>m(l.value))},{default:t(()=>[_("Add Option")]),_:1}),e(z,null,{default:t(()=>[e(C,{class:"text-right"},{default:t(()=>[e(ke,{onClick:v})]),_:1})]),_:1})]),_:1}),e(be,{modelValue:n.value,"onUpdate:modelValue":y[7]||(y[7]=U=>n.value=U),scrollable:""},{default:t(()=>[e($t,{modelValue:l.value.Options[c.value],"onUpdate:modelValue":y[5]||(y[5]=U=>l.value.Options[c.value]=U),convention:V.convention,onClose:y[6]||(y[6]=U=>n.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Pt=q({__name:"EditConventionExtras",props:M({convention:{}},{modelValue:{required:!0}}),emits:M(["close"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=Z(),c=()=>{const r={ID:0,ExtraUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:l.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};n.saveExtra(r).then(u=>{u&&l.value.push(u)})},o=r=>{n.deleteExtra(l.value[r].ExtraUUID).then(u=>{u&&l.value.splice(r,1)})},d=(...r)=>{r.forEach(u=>{u>=0&&u<l.value.length&&n.saveExtra(l.value[u])})};return(r,u)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[e(E,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:t(()=>[_("Edit Extras")]),_:1}),e(oe),e(ye,null,{default:t(()=>[e(E,{variant:"text",onClick:c},{default:t(()=>[_(" Add ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:t(()=>[e(Ee,null,{default:t(()=>[(f(!0),h(k,null,w(l.value,(i,v)=>(f(),g(Se,{key:i.ID,class:"mt-0"},{default:t(()=>[e(xe,null,{actions:t(({expanded:m})=>[e(E,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:p=>o(v)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(E,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(m=>{I(we)(i,l.value),d(v,v-1)},["stop"])},null,8,["onClick"]),e(E,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(m=>{I(Me)(i,l.value),d(v,v+1)},["stop"])},null,8,["onClick"]),_(" "+$(i.Name)+" ",1)]),_:2},1024),e(Ae,{class:"px-0"},{default:t(()=>[e(Ft,{convention:r.convention,modelValue:l.value[v],"onUpdate:modelValue":m=>l.value[v]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Rt=F("h3",null,"Additional Purchases",-1),Lt=F("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Nt=q({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=D([]),n=Z(),c=D([""]),o=D(!1),d=u=>{if(u.Choices&&u.Choices.length>0)return u.Choices.map(i=>i.Title).join(", ")},r=()=>{o.value=!1};return n==null||n.getConventionExtras(s.value.ConventionUUID||"").then(u=>{u&&(l.value=u)}),(u,i)=>(f(),h(k,null,[e(ee,{fluid:!0,class:"px-0"},{default:t(()=>[e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[Rt]),_:1}),e(C,{class:"text-right"},{default:t(()=>[e(E,{color:"primary",onClick:i[0]||(i[0]=v=>o.value=!0)},{default:t(()=>[_("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Lt,e(qe,{opened:c.value,"onUpdate:opened":i[1]||(i[1]=v=>c.value=v)},{default:t(()=>[(f(!0),h(k,null,w(l.value,v=>(f(),g(je,{key:v.ID,value:v.ID},{activator:t(({props:m})=>[e(se,Te(m,{"prepend-icon":"mdi:mdi-group",title:v.Name}),null,16,["title"])]),default:t(()=>[v.Options?(f(!0),h(k,{key:0},w(v.Options,m=>(f(),g(se,{key:m.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${m.Name} ${m.Price&&m.Price>0?`(${I(B).currencySymbol}${m.Price})`:""}`},{default:t(()=>[m.Choices&&m.Choices.length>0?(f(),g(ne,{key:0},{default:t(()=>[_(" Options: "+$(d(m)),1)]),_:2},1024)):b("",!0)]),_:2},1032,["title"]))),128)):b("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:o.value,"onUpdate:modelValue":i[3]||(i[3]=v=>o.value=v),scrollable:!0},{default:t(()=>[e(Pt,{modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=v=>l.value=v),convention:s.value,onClose:r},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),wt=q({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:M(["close"],["update:modelValue"]),setup(a,{emit:s}){const l=Z(),n=cl(),c=H(a,"modelValue"),o=D(W(c.value)),d=D(`${n.GetConventionLogoURL(o.value.ConventionUUID)}?${new Date().getTime()}`),r=D(),u=D(),i=ml(),v=$l(),m=()=>{o.value=JSON.parse(JSON.stringify(c.value))},p=async()=>{var U;const y=new FormData((U=u.value)==null?void 0:U.$el);if(y.get("Image")&&y.get("Image").size>0)return y.set("ConventionUUID",o.value.ConventionUUID),await n.SaveConventionLogo(y)},T=()=>{p(),l.saveConvention(o.value).then(()=>{const y=c.value.Slug,U=o.value.Slug;c.value=o.value,y!==U&&v.push(`/dashboard/admin/${i.params.organisation.toString()}/convention/${o.value.Slug}`),s("close")})},V=()=>{d.value=URL.createObjectURL(r.value.files[0])};return(y,U)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[e(E,{icon:"",dark:"",onClick:U[0]||(U[0]=x=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:t(()=>[_("Convention Settings")]),_:1}),e(oe),e(ye,null,{default:t(()=>[e(E,{variant:"text",onClick:m},{default:t(()=>[_(" Reset ")]),_:1}),e(E,{variant:"text",onClick:T},{default:t(()=>[_(" Save ")]),_:1})]),_:1})]),_:1}),e(Ue,null,{default:t(()=>[e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(Ul,{class:"imgLogo mx-auto",src:d.value||""},null,8,["src"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(K,{label:I(B).formLabelName,name:"Name",variant:"outlined",modelValue:o.value.Name,"onUpdate:modelValue":U[1]||(U[1]=x=>o.value.Name=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(K,{label:I(B).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:o.value.Description,"onUpdate:modelValue":U[2]||(U[2]=x=>o.value.Description=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(K,{label:I(B).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:o.value.DetailLink,"onUpdate:modelValue":U[3]||(U[3]=x=>o.value.DetailLink=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(K,{label:I(B).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:o.value.Slug,"onUpdate:modelValue":U[4]||(U[4]=x=>o.value.Slug=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(he,{label:I(B).formConventionVisible,name:"Visible",modelValue:o.value.Visible,"onUpdate:modelValue":U[5]||(U[5]=x=>o.value.Visible=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[e(dt,{ref_key:"conventionImageForm",ref:u,enctype:"multipart/form-data"},{default:t(()=>[e(rt,{label:I(B).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:r,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:V},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const Mt=F("h3",null,"General Details",-1),qt=["href"],Yt=q({__name:"General",props:{modelValue:{required:!0}},emits:M(["refresh"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=cl(),c=N(()=>l.value.ConventionUUID?n.GetConventionLogoURL(l.value.ConventionUUID):""),o=D(!1),d=()=>{o.value=!1,s("refresh")};return(r,u)=>(f(),h(k,null,[e(ee,{fluid:!0,class:"px-0"},{default:t(()=>[e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[Mt]),_:1}),e(C,{class:"text-right"},{default:t(()=>[e(E,{color:"primary",onClick:u[0]||(u[0]=i=>o.value=!0)},{default:t(()=>[_("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),F("p",null,[c.value?(f(),g(Ul,{key:0,src:c.value,title:l.value.Name},null,8,["src","title"])):b("",!0)]),F("h3",null,$(l.value.Name),1),F("p",null,$(l.value.Description),1),F("p",null,[l.value.DetailLink?(f(),h("a",{key:0,href:l.value.DetailLink},"More Details",8,qt)):b("",!0)]),e(be,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=i=>o.value=i),scrollable:!0},{default:t(()=>[e(wt,{onClose:d,modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=i=>l.value=i)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),Bt=q({__name:"EditConventionInterest",props:M({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=D(W(s.value)),n=Z(),c=({callback:o})=>{n.saveInterest(l.value).then(d=>{d?(s.value=d,o&&o("Interest Saved")):o&&o("Failed to Save Interest")}).catch(()=>{o&&o("Failed to Save Interest")})};return(o,d)=>(f(),g(ee,{class:"px-0"},{default:t(()=>[e(K,{label:I(B).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value.Name=r)},null,8,["label","modelValue"]),e(Xe,{label:I(B).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":d[1]||(d[1]=r=>l.value.Description=r)},null,8,["label","modelValue"]),b("",!0),e(Ve,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":d[3]||(d[3]=r=>l.value.AppliesTags=r),convention:o.convention,organisation:o.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(z,null,{default:t(()=>[e(C,{class:"text-right"},{default:t(()=>[e(ke,{onClick:c})]),_:1})]),_:1})]),_:1}))}}),zt=q({__name:"EditConventionInterests",props:M({convention:{}},{modelValue:{required:!0}}),emits:M(["close"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=Z(),c=()=>{const r={ID:0,InterestUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:l.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};n.saveInterest(r).then(u=>{u&&l.value.push(u)})},o=r=>{n.deleteInterest(l.value[r].InterestUUID).then(u=>{u&&l.value.splice(r,1)})},d=(...r)=>{r.forEach(u=>{u>=0&&u<l.value.length&&n.saveInterest(l.value[u])})};return(r,u)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[e(E,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:t(()=>[_("Edit Interests")]),_:1}),e(oe),e(ye,null,{default:t(()=>[e(E,{variant:"text",onClick:c},{default:t(()=>[_(" Add ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:t(()=>[e(Ee,null,{default:t(()=>[(f(!0),h(k,null,w(l.value,(i,v)=>(f(),g(Se,{key:i.ID,class:"mt-0"},{default:t(()=>[e(xe,null,{actions:t(({expanded:m})=>[e(ke,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>o(v)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(E,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(m=>{I(we)(i,l.value),d(v,v-1)},["stop"])},null,8,["onClick"]),e(E,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(m=>{I(Me)(i,l.value),d(v,v+1)},["stop"])},null,8,["onClick"]),_(" "+$(i.Name)+" ",1)]),_:2},1024),e(Ae,{class:"px-0"},{default:t(()=>[e(Bt,{convention:r.convention,modelValue:l.value[v],"onUpdate:modelValue":m=>l.value[v]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Kt=F("h3",null,"Interests",-1),Gt=F("p",null,"Attendees can tag themselves for particular things.",-1),Ht=q({__name:"Interests",props:{modelValue:{required:!0}},emits:M(["refresh"],["update:modelValue"]),setup(a){const s=H(a,"modelValue"),l=Z(),n=D([]);l.getConventionInterests(s.value.ConventionUUID).then(d=>{Re(d),n.value=d});const c=D([""]),o=D(!1);return(d,r)=>(f(),h(k,null,[e(ee,{fluid:!0,class:"px-0"},{default:t(()=>[e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[Kt]),_:1}),e(C,{class:"text-right"},{default:t(()=>[e(E,{color:"primary",onClick:r[0]||(r[0]=u=>o.value=!0)},{default:t(()=>[_("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Gt,e(qe,{opened:c.value,"onUpdate:opened":r[1]||(r[1]=u=>c.value=u)},{default:t(()=>[(f(!0),h(k,null,w(n.value,u=>(f(),g(se,{key:u.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${u.Name} ${u.Price&&u.Price>0?`(${I(B).currencySymbol}${u.Price})`:""}`},{default:t(()=>[u.Description?(f(),g(ne,{key:0},{default:t(()=>[_($(u.Description),1)]),_:2},1024)):b("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:o.value,"onUpdate:modelValue":r[4]||(r[4]=u=>o.value=u),scrollable:!0},{default:t(()=>[e(zt,{onClose:r[2]||(r[2]=u=>o.value=!1),convention:s.value,modelValue:n.value,"onUpdate:modelValue":r[3]||(r[3]=u=>n.value=u)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),Fe=q({__name:"SelectTickets",props:M({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=c=>c.Type===L.TICKET_TYPE_GROUP?"mdi:mdi-group":c.Type===L.TICKET_TYPE_TICKET?c.RequiresAccommodation?"mdi:mdi-home":c.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":c.Type===L.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":c.Type===L.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",n=N(()=>a.tickets.map(c=>({title:c.Name,value:s.value.find(o=>o&&o.TicketUUID===c.TicketUUID)||c,props:{appendIcon:l(c)}})));return(c,o)=>(f(),h("div",null,[e(mt,{label:c.label,variant:c.variant||"filled",items:n.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=d=>s.value=d),hint:c.hint,chips:c.chips,clearable:c.clearable,multiple:"","persistent-hint":c.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),jt=F("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),Xt=q({__name:"EditConventionTicket",props:M({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=D(W(s.value)),n=Z(),c=N(()=>a.tickets.filter(i=>i.Type===L.TICKET_TYPE_TICKET)),o=N(()=>a.tickets.filter(i=>i.Type===L.TICKET_TYPE_ADD_ON)),d=N(()=>a.tickets.filter(i=>i.Type===L.TICKET_TYPE_TICKET_COMPONENT)),r=i=>a.accommodation.filter(v=>v.Costs.find(m=>m.DateStart===i.DateStart&&m.DateEnd===i.DateEnd)),u=({callback:i})=>{n.saveTicket(l.value).then(v=>{v?(l.value.ID=v.ID,l.value.TicketUUID=v.TicketUUID,s.value=l.value,i&&i("Ticket Saved")):i&&i("Failed to Save Ticket")}).catch(()=>{i&&i("Failed to Save Ticket")})};return(i,v)=>(f(),g(ee,{class:"px-0",fluid:""},{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(ue,{label:"Ticket Type",variant:"outlined",modelValue:l.value.Type,"onUpdate:modelValue":v[0]||(v[0]=m=>l.value.Type=m),items:I(ct),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(K,{label:I(B).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":v[1]||(v[1]=m=>l.value.Name=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(K,{label:I(B).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":v[2]||(v[2]=m=>l.value.Description=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),l.value.Type!==I(L).TICKET_TYPE_GROUP?(f(),h(k,{key:0},[e(C,{cols:"12"},{default:t(()=>[e(he,{label:I(B).formLabelRequiresAccommodation,modelValue:l.value.RequiresAccommodation,"onUpdate:modelValue":v[3]||(v[3]=m=>l.value.RequiresAccommodation=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(K,{label:I(B).formLabelDateStart,type:"date",variant:"outlined",modelValue:l.value.DateStart,"onUpdate:modelValue":v[4]||(v[4]=m=>l.value.DateStart=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(K,{label:I(B).formLabelDateEnd,type:"date",variant:"outlined",modelValue:l.value.DateEnd,"onUpdate:modelValue":v[5]||(v[5]=m=>l.value.DateEnd=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(K,{label:I(B).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":I(B).currencyIcon,modelValue:l.value.Price,"onUpdate:modelValue":v[6]||(v[6]=m=>l.value.Price=m),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(f(),g(C,{key:1,cols:"12"},{default:t(()=>[e(Fe,{label:"Tickets",variant:"outlined",tickets:c.value,modelValue:l.value.Tickets,"onUpdate:modelValue":v[7]||(v[7]=m=>l.value.Tickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(C,{cols:"12"},{default:t(()=>[e(Ve,{label:"Applied Tags",variant:"outlined",modelValue:l.value.AppliesTags,"onUpdate:modelValue":v[8]||(v[8]=m=>l.value.AppliesTags=m),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(Ve,{label:"Required Tags",variant:"outlined",modelValue:l.value.RequiredTags,"onUpdate:modelValue":v[9]||(v[9]=m=>l.value.RequiredTags=m),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),l.value.Type===I(L).TICKET_TYPE_TICKET?(f(),h(k,{key:2},[e(C,{cols:"12"},{default:t(()=>[e(K,{label:"Components Required",type:"number",variant:"outlined",modelValue:l.value.ComponentsRequired,"onUpdate:modelValue":v[10]||(v[10]=m=>l.value.ComponentsRequired=m),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(Fe,{label:"Components",variant:"outlined",tickets:d.value,modelValue:l.value.TicketComponents,"onUpdate:modelValue":v[11]||(v[11]=m=>l.value.TicketComponents=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(Fe,{label:"Addons",variant:"outlined",tickets:o.value,modelValue:l.value.AddonTickets,"onUpdate:modelValue":v[12]||(v[12]=m=>l.value.AddonTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):b("",!0),e(C,{cols:"12"},{default:t(()=>[e(Fe,{label:"Disables Tickets",variant:"outlined",tickets:i.tickets,modelValue:l.value.DisablesTickets,"onUpdate:modelValue":v[13]||(v[13]=m=>l.value.DisablesTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),r(l.value).length?(f(),g(z,{key:0,class:"align-center",dense:!0},{default:t(()=>[e(C,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:t(()=>[jt]),_:1}),e(C,{class:"flex-grow-1"},{default:t(()=>[e(vt,null,{default:t(()=>[(f(!0),h(k,null,w(r(l.value),m=>(f(),g(ft,{key:m.ID,title:"Automatically calculated",disabled:!0},{default:t(()=>[_($(m.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):b("",!0),e(z,null,{default:t(()=>[e(C,{class:"text-right"},{default:t(()=>[e(ke,{onClick:u})]),_:1})]),_:1})]),_:1}))}}),Wt={class:"pr-2"},Jt={class:"mb-2"},Zt={key:0,class:"text-grey-darken-1 font-italic"},Qt={key:1,class:"text-red"},ea={key:0,class:"text-grey-darken-1 font-italic"},la={key:1,class:"text-red"},ta={key:0,class:"text-grey-darken-1 font-italic"},aa={key:1,class:"text-red"},na={class:"text-grey-darken-1"},oa=q({__name:"EditConventionTickets",props:M({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:M(["close"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=Z(),c=()=>{l.value.push({ID:0,TicketUUID:G(),ConventionID:a.convention.ID,ConventionUUID:a.convention.ConventionUUID,Order:l.value.length+1,Name:"New Ticket",Type:L.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},o=r=>{n.deleteTicket(l.value[r].TicketUUID).then(u=>{u&&l.value.splice(r,1)})},d=r=>r.Type===L.TICKET_TYPE_GROUP?"mdi:mdi-group":r.Type===L.TICKET_TYPE_TICKET?r.RequiresAccommodation?"mdi:mdi-home":r.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":r.Type===L.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":r.Type===L.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(r,u)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[e(E,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1}),e(ce,null,{default:t(()=>[_("Edit Tickets")]),_:1}),e(oe),e(ye,null,{default:t(()=>[e(E,{variant:"text",onClick:c},{default:t(()=>[_(" Add Ticket ")]),_:1})]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:t(()=>[e(Ee,null,{default:t(()=>[(f(!0),h(k,null,w(l.value,(i,v)=>(f(),g(Se,{key:i.ID,class:"mt-0"},{default:t(()=>[e(xe,{class:"py-2"},{actions:t(({expanded:m})=>[e(ke,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>o(v)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(E,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(m=>I(we)(i,l.value),["stop"])},null,8,["onClick"]),e(E,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(m=>I(Me)(i,l.value),["stop"])},null,8,["onClick"]),F("div",Wt,[e(J,{icon:d(i)},null,8,["icon"])]),F("div",null,[F("p",Jt,[_($(i.Name)+" ",1),i.Type===I(L).TICKET_TYPE_TICKET?(f(),h(k,{key:0},[l.value.find(m=>m.Type===I(L).TICKET_TYPE_GROUP&&m.Tickets.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),h("span",Zt," ("+$(l.value.filter(m=>m.Type===I(L).TICKET_TYPE_GROUP&&m.Tickets.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),h("span",Qt," (Ticket does not belong to any categories.) "))],64)):b("",!0),i.Type===I(L).TICKET_TYPE_ADD_ON?(f(),h(k,{key:1},[l.value.find(m=>m.Type===I(L).TICKET_TYPE_TICKET&&m.AddonTickets.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),h("span",ea," ("+$(l.value.filter(m=>m.Type===I(L).TICKET_TYPE_TICKET&&m.AddonTickets.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),h("span",la," (Ticket addon must be associated to at least one ticket.) "))],64)):b("",!0),i.Type===I(L).TICKET_TYPE_TICKET_COMPONENT?(f(),h(k,{key:2},[l.value.find(m=>m.Type===I(L).TICKET_TYPE_TICKET&&m.TicketComponents.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),h("span",ta," ("+$(l.value.filter(m=>m.Type===I(L).TICKET_TYPE_TICKET&&m.TicketComponents.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),h("span",aa," (Component has not been assigned to any tickets.) "))],64)):b("",!0)]),F("p",na,[i.Type===I(L).TICKET_TYPE_GROUP?(f(),h(k,{key:0},[_("Category")],64)):i.Type===I(L).TICKET_TYPE_TICKET?(f(),h(k,{key:1},[_(" Ticket "),i.ComponentsRequired>0?(f(),h(k,{key:0},[_(" ("+$(i.ComponentsRequired)+" component"+$(i.ComponentsRequired>1?"s":"")+" required) ",1)],64)):b("",!0)],64)):b("",!0),i.Type===I(L).TICKET_TYPE_TICKET_COMPONENT?(f(),h(k,{key:2},[_("Component")],64)):b("",!0),i.Type===I(L).TICKET_TYPE_ADD_ON?(f(),h(k,{key:3},[_("Addon")],64)):b("",!0)])])]),_:2},1024),e(Ae,{class:"px-0"},{default:t(()=>[e(Xt,{accommodation:r.accommodation,convention:r.convention,tickets:l.value,modelValue:l.value[v],"onUpdate:modelValue":m=>l.value[v]=m},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),ia=F("h3",null,"Tickets",-1),ua=F("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),sa=q({__name:"Tickets",props:{modelValue:{required:!0}},emits:M(["refresh"],["update:modelValue"]),setup(a){var m;const s=H(a,"modelValue"),l=Z(),n=D([]),c=D([]);l.getConventionTickets(((m=s.value)==null?void 0:m.ConventionUUID)||"").then(p=>{Re(p),n.value=p});const o=D([""]),d=D(!1),r=p=>p.AddonTickets&&p.AddonTickets.map(T=>n.value&&n.value.find(V=>V.ID===T.ID)),u=p=>p.TicketComponents&&p.TicketComponents.map(T=>n.value&&n.value.find(V=>V.ID===T.ID)),i=p=>"",v=p=>c.value.filter(T=>T.Costs.find(V=>V.DateStart===p.DateStart&&V.DateEnd===p.DateEnd)).map(T=>T.Name).join(", ");return(p,T)=>(f(),h(k,null,[e(ee,{fluid:!0,class:"px-0"},{default:t(()=>[e(z,null,{default:t(()=>[e(C,null,{default:t(()=>[ia]),_:1}),e(C,{class:"text-right"},{default:t(()=>[e(E,{color:"primary",onClick:T[0]||(T[0]=V=>d.value=!0)},{default:t(()=>[_("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),ua,e(qe,{opened:o.value,"onUpdate:opened":T[1]||(T[1]=V=>o.value=V)},{default:t(()=>[(f(!0),h(k,null,w(n.value.filter(V=>V.Type===I(L).TICKET_TYPE_GROUP),V=>(f(),g(je,{key:V.ID,value:V.ID},{activator:t(({props:y})=>[e(se,Te(y,{"prepend-icon":"mdi:mdi-group",title:V.Name}),null,16,["title"])]),default:t(()=>[(f(!0),h(k,null,w(n.value.filter(y=>V.Tickets.find(U=>U&&y&&U.TicketUUID===y.TicketUUID)),y=>(f(),h(k,{key:y.ID},[y.AddonTickets&&y.AddonTickets.length?(f(),g(je,{key:0,value:y.ID},{activator:t(({props:U})=>[e(se,Te(U,{"prepend-icon":y.RequiresAccommodation?"mdi:mdi-home":y.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${y.Name} ${y.Price>0?`(${I(B).currencySymbol}${y.Price})`:""}`}),{default:t(()=>[y.ComponentsRequired>0?(f(),g(ne,{key:0},{default:t(()=>[_(" Options: "+$(u(y).map(x=>x&&x.Name).join(", ")),1)]),_:2},1024)):b("",!0),y.RequiresAccommodation&&v(y)?(f(),g(ne,{key:1},{default:t(()=>[_(" Accommodation: "+$(v(y)),1)]),_:2},1024)):b("",!0)]),_:2},1040,["prepend-icon","title"])]),default:t(()=>[(f(!0),h(k,null,w(r(y),U=>(f(),h(k,{key:U},[U?(f(),g(se,{key:0,title:`${U.Name} ${U.Price>0?`(${I(B).currencySymbol}${U.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:t(()=>[U.RequiredTags&&U.RequiredTags.length>0?(f(),g(ne,{key:0},{default:t(()=>[_(" Required Tags: "+$(U.RequiredTags.join(", ")),1)]),_:2},1024)):b("",!0),U.RequiredGroupMemberships&&U.RequiredGroupMemberships.length>0?(f(),g(ne,{key:1},{default:t(()=>[_(" Required Groups: "+$(i(U.RequiredGroupMemberships)),1)]),_:2},1024)):b("",!0),v(U)?(f(),g(ne,{key:2},{default:t(()=>[_(" Accommodation: "+$(v(U)),1)]),_:2},1024)):b("",!0)]),_:2},1032,["title"])):b("",!0)],64))),128))]),_:2},1032,["value"])):(f(),g(se,{key:1,"prepend-icon":y.RequiresAccommodation?"mdi:mdi-home":y.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${y.Name} ${y.Price>0?`(${I(B).currencySymbol}${y.Price})`:""}`},{default:t(()=>[y.ComponentsRequired>0?(f(),g(ne,{key:0},{default:t(()=>[_(" Options: "+$(u(y).map(U=>U&&U.Name).join(", ")),1)]),_:2},1024)):b("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:d.value,"onUpdate:modelValue":T[4]||(T[4]=V=>d.value=V),scrollable:!0},{default:t(()=>[e(oa,{onClose:T[2]||(T[2]=V=>d.value=!1),modelValue:n.value,"onUpdate:modelValue":T[3]||(T[3]=V=>n.value=V),accommodation:c.value,convention:s.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),da=(a,s)=>{const l=Le(a,s),n=Le(a,s,void 0,void 0,"item"),c=D(W(n.value));return re(n,()=>{c.value=W(n.value)}),{state:l,model:n,close:()=>{l.value=!1},reset:()=>{n.value=W(c.value)},save:()=>{s("save")}}},ra=q({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(a,{emit:s}){const l=a,{state:n,model:c,close:o,reset:d,save:r}=da(l,s);return(u,i)=>(f(),g(We,{modelValue:I(n),"onUpdate:modelValue":i[0]||(i[0]=v=>Pe(n)?n.value=v:null),onReset:I(d),onSave:I(r),title:u.title,color:"primary","card-class":u.cardClass},{toolbarButtons:t(()=>[_e(u.$slots,"toolbarButtons")]),actions:t(()=>[e(E,{color:"blue-darken-1",variant:"text",onClick:I(o)},{default:t(()=>[_(" Cancel ")]),_:1},8,["onClick"]),e(E,{color:"blue-darken-1",variant:"text",onClick:I(d)},{default:t(()=>[_(" Reset ")]),_:1},8,["onClick"]),e(oe),e(E,{color:"blue-darken-1",variant:"text",onClick:I(r)},{default:t(()=>[_(" Save ")]),_:1},8,["onClick"])]),default:t(()=>[_e(u.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Ne=q({__name:"EditOrderedItems",props:M({closeable:{type:Boolean,default:!1},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:M(["add","save","close"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=()=>{s("save"),s("close")},c=()=>{if(a.newItem){const i=a.newItem();i.Order=l.value.length+1,l.value.push(i)}else l.value.push({Order:l.value.length+1})},o=i=>{l.value.splice(i,1)},d=i=>{Me(i,l.value)},r=i=>{we(i,l.value)},u=i=>a.labelParent&&i[a.labelParent]?i[a.labelParent][a.label]:i[a.label];return l.value.find(i=>i.Order===0)&&Re(l.value),l.value.find(i=>l.value.find(v=>v.Order===i.Order&&v!==i))&&Re(l.value),(i,v)=>(f(),g(me,null,{default:t(()=>[e(ae,{dark:"",color:"primary"},{default:t(()=>[i.closeable?(f(),g(E,{key:0,icon:"",dark:"",onClick:v[0]||(v[0]=m=>s("close"))},{default:t(()=>[e(J,null,{default:t(()=>[_("mdi:mdi-close")]),_:1})]),_:1})):b("",!0),e(ce,null,{default:t(()=>[_($(i.title),1)]),_:1}),e(oe),e(ye,null,{default:t(()=>[i.newItem!==void 0?(f(),g(E,{key:0,variant:"text",onClick:c},{default:t(()=>[_(" Add ")]),_:1})):b("",!0),i.showSave?(f(),g(E,{key:1,variant:"text",onClick:n},{default:t(()=>[_(" Save ")]),_:1})):b("",!0)]),_:1})]),_:1}),e(Ue,{class:"pa-0"},{default:t(()=>[e(Ee,null,{default:t(()=>[(f(!0),h(k,null,w(l.value,(m,p)=>(f(),g(Se,{key:m.Order,class:"mt-0"},{default:t(()=>[e(xe,null,{actions:t(({expanded:T})=>[e(E,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:V=>o(p)},null,8,["onClick"]),e(J,{class:"align-self-center text-h5",icon:T?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(E,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:de(T=>r(m),["stop"])},null,8,["onClick"]),e(E,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:de(T=>d(m),["stop"])},null,8,["onClick"]),_e(i.$slots,`${i.slotNamePrefix}_${p}_title`,{},()=>[_($(u(m)),1)])]),_:2},1024),e(Ae,{class:"px-0"},{default:t(()=>[_e(i.$slots,`${i.slotNamePrefix}_${p}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),ma={class:"pa-0 border-0 ma-0"},ca=F("legend",{class:"mb-2"},"Field Settings",-1),va={class:"pa-0 border-0 ma-0"},fa=F("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),pa=q({__name:"EditFormField",props:M({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=Z(),n=D([]),c=D([]),o=D(""),d=r=>{var u;s.value.Field=(u=c.value.find(i=>i.value===r))==null?void 0:u.field};return l.getConventionFields(a.convention.ConventionUUID).then(r=>{r&&(n.value=r,c.value=r.map(u=>({title:`${u.Label} (${(Wl.find(i=>i.value===u.Type)||{title:""}).title})`,value:u.FieldUUID,field:u})),d(s.value.FieldUUID))}),(r,u)=>(f(),g(z,null,{default:t(()=>[e(C,{cols:"12",md:"6"},{default:t(()=>[F("fieldset",ma,[ca,e(z,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(ue,{modelValue:s.value.FieldUUID,"onUpdate:modelValue":[u[0]||(u[0]=i=>s.value.FieldUUID=i),d],items:c.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"6",sm:"4"},{default:t(()=>[e(K,{modelValue:s.value.MinLength,"onUpdate:modelValue":u[1]||(u[1]=i=>s.value.MinLength=i),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"6",sm:"4"},{default:t(()=>[e(K,{modelValue:s.value.MaxLength,"onUpdate:modelValue":u[2]||(u[2]=i=>s.value.MaxLength=i),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"4"},{default:t(()=>[e(he,{modelValue:s.value.Required,"onUpdate:modelValue":u[3]||(u[3]=i=>s.value.Required=i),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s.value.FieldUUID&&s.value.Field?(f(),g(C,{key:0,cols:"12",md:"6"},{default:t(()=>[F("fieldset",va,[fa,s.value.Field?(f(),g(Jl,{key:0,admin:!0,field:s.value.Field,"persistent-hint":!0,required:s.value.Required,convention:r.convention,modelValue:o.value,"onUpdate:modelValue":u[4]||(u[4]=i=>o.value=i)},null,8,["field","required","convention","modelValue"])):b("",!0)])]),_:1})):b("",!0)]),_:1}))}}),Ta={class:"d-none d-sm-block"},Va=q({__name:"EditFormSectionFields",props:M({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=()=>{var n;return{ID:0,SectionFieldUUID:G(),SectionID:s.value.ID,SectionUUID:s.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((n=s.value.Fields)==null?void 0:n.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(n,c)=>s.value.Fields!==void 0?(f(),g(Ne,{key:0,modelValue:s.value.Fields,"onUpdate:modelValue":c[0]||(c[0]=o=>s.value.Fields=o),closeable:!1,title:"Fields","new-item":l,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},ge({_:2},[w(s.value.Fields,(o,d)=>({name:`field_${d}_title`,fn:t(()=>[o.Field?(f(),h(k,{key:0},[_($(o.Field.Label)+" ("+$(o.Field.Name)+") ",1),F("template",Ta,[_("  ["+$(o.Field.Type)+"] ",1)])],64)):(f(),h(k,{key:1},[_("New Field")],64))])})),w(s.value.Fields,(o,d)=>({name:`field_${d}`,fn:t(()=>[e(pa,{modelValue:s.value.Fields[d],"onUpdate:modelValue":r=>s.value.Fields[d]=r,convention:n.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):b("",!0)}}),Ua=q({__name:"EditFormSections",props:M({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=()=>{const n={ID:0,SectionUUID:G(),FormID:s.value.ID,FormUUID:s.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:G(),SectionID:0,SectionUUID:"",Edit:!0}};return n.State.SectionID=n.ID,n.State.SectionUUID=n.SectionUUID,n};return(n,c)=>(f(),g(Ne,{modelValue:s.value.Sections,"onUpdate:modelValue":c[0]||(c[0]=o=>s.value.Sections=o),"new-item":l,closeable:!1,title:"Sections","slot-name-prefix":"section"},ge({_:2},[w(s.value.Sections,(o,d)=>({name:`section_${d}`,fn:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:o.Name,"onUpdate:modelValue":r=>o.Name=r,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:o.Heading,"onUpdate:modelValue":r=>o.Heading=r,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(z,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(Xe,{modelValue:o.Description,"onUpdate:modelValue":r=>o.Description=r,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),o.Fields?(f(),g(Va,{key:0,modelValue:s.value.Sections[d],"onUpdate:modelValue":r=>s.value.Sections[d]=r,convention:n.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):b("",!0)])}))]),1032,["modelValue"]))}}),ya=q({__name:"FormRendererPopup",props:M({admin:{type:Boolean},convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:M(["update:form"],["update:modelValue"]),setup(a,{emit:s}){const l=a,{admin:n=!1,convention:c,title:o="",cardClass:d=""}=l,r=H(a,"modelValue"),u=Le(l,s,void 0,void 0,"form"),i=D(W(u.value));re(u,()=>{i.value=W(u.value)});const v=()=>{r.value=!1};return(m,p)=>(f(),g(We,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=T=>r.value=T),title:I(o),color:"primary","card-class":I(d)},{toolbarButtons:t(()=>[_e(m.$slots,"toolbarButtons")]),actions:t(()=>[e(E,{color:"blue-darken-1",variant:"text",onClick:v},{default:t(()=>[_(" Close ")]),_:1})]),default:t(()=>[e(_t,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=T=>i.value=T),admin:I(n),convention:I(c),preview:m.preview},null,8,["modelValue","admin","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),Ia=F("template",{class:"d-none d-sm-inline"},[_("Preview")],-1),_a=q({__name:"EditFormDialog",props:M({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:M(["update:form"],["update:modelValue"]),setup(a,{emit:s}){const l=a,{convention:n}=l,c=H(a,"modelValue"),o=Z(),d=Le(l,s,void 0,void 0,"form"),r=D(!1),u=D(W(d.value));re(d,()=>{u.value=W(d.value)});const i=()=>{o.saveForm(u.value).then(m=>{m&&(d.value=m,c.value=!1)})},v=()=>{r.value=!0};return(m,p)=>(f(),g(ra,{modelValue:c.value,"onUpdate:modelValue":p[11]||(p[11]=T=>c.value=T),item:u.value,"onUpdate:item":p[12]||(p[12]=T=>u.value=T),onSave:i,"card-class":"pa-0"},{toolbarButtons:t(()=>[e(gt,null,{default:t(()=>[e(E,{"prepend-icon":"mdi:mdi-developer-board",onClick:v},{default:t(()=>[Ia]),_:1})]),_:1})]),default:t(()=>[e(Ee,null,{default:t(()=>[e(Se,{class:"mt-0"},{default:t(()=>[e(xe,null,{default:t(()=>[_("General Settings")]),_:1}),e(Ae,null,{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(ee,{class:"pa-0",fluid:!0},{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:u.value.Name,"onUpdate:modelValue":p[0]||(p[0]=T=>u.value.Name=T),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:u.value.Heading,"onUpdate:modelValue":p[1]||(p[1]=T=>u.value.Heading=T),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:t(()=>[e(Xe,{modelValue:u.value.Description,"onUpdate:modelValue":p[2]||(p[2]=T=>u.value.Description=T),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:t(()=>[e(ue,{modelValue:u.value.Type,"onUpdate:modelValue":p[3]||(p[3]=T=>u.value.Type=T),label:"Type",variant:"outlined",items:I(Ut),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:u.value.State.Stage,"onUpdate:modelValue":p[4]||(p[4]=T=>u.value.State.Stage=T),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(C,{cols:"6"},{default:t(()=>[e(he,{modelValue:u.value.State.New,"onUpdate:modelValue":p[5]||(p[5]=T=>u.value.State.New=T),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(C,{cols:"6"},{default:t(()=>[e(he,{modelValue:u.value.State.Edit,"onUpdate:modelValue":p[6]||(p[6]=T=>u.value.State.Edit=T),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(C,{cols:"12"},{default:t(()=>[e(Ve,{label:"Required Tags",variant:"outlined",modelValue:u.value.RequiredTags,"onUpdate:modelValue":p[7]||(p[7]=T=>u.value.RequiredTags=T),convention:I(n),organisation:I(n).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),u.value?(f(),g(Ua,{key:0,modelValue:u.value,"onUpdate:modelValue":p[8]||(p[8]=T=>u.value=T),convention:I(n),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):b("",!0),r.value?(f(),g(ya,{key:1,modelValue:r.value,"onUpdate:modelValue":p[9]||(p[9]=T=>r.value=T),form:u.value,"onUpdate:form":p[10]||(p[10]=T=>u.value=T),admin:!0,convention:I(n),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):b("",!0)]),_:1},8,["modelValue","item"]))}}),ga=(a,s)=>{const l=D(!1),n=D(!1),c=D(a),o=D(-1),d=D(s),r=D(s),u=N(()=>o.value===-1?"New Form":"Edit Form"),i=()=>{c.value=a},v=U=>{o.value=c.value.indexOf(U),d.value=Object.assign({},U),l.value=!0},m=U=>{o.value=c.value.indexOf(U),d.value=Object.assign({},U),n.value=!0},p=()=>{n.value=!1,Ge(()=>{d.value=Object.assign({},r.value),o.value=-1}).then()},T=()=>{c.value.splice(o.value,1),p()},V=()=>{l.value=!1,Ge(()=>{d.value=Object.assign({},r.value),o.value=-1}).then()},y=()=>{o.value>-1?Object.assign(c.value[o.value],d.value):c.value.push(d.value),V()};return re(l,U=>{U||V()}),re(n,U=>{U||p()}),{collection:c,defaultItem:r,dialog:l,dialogDelete:n,editedItem:d,formTitle:u,reset:i,editItem:v,deleteItem:m,deleteItemConfirm:T,close:V,save:y}},ha=q({__name:"FormEditor",props:{modelValue:{required:!0}},emits:M(["refresh"],["update:modelValue"]),setup(a){const s=H(a,"modelValue"),l=Z(),n=D([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),c=D([]),o=D([]);l.getConventionFields(s.value.ConventionUUID).then(P=>{c.value=P}),l.getConventionForms(s.value.ConventionUUID).then(P=>{o.value=P});const d={ID:0,FormUUID:G(),ConventionID:s.value.ID,ConventionUUID:s.value.ConventionUUID,ParentID:0,ParentUUID:il,Name:"",Heading:"",Description:"",Type:yt.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:G(),FormID:0,FormUUID:il,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};d.State.FormUUID=d.FormUUID;const{collection:r,defaultItem:u,dialog:i,dialogDelete:v,editedItem:m,formTitle:p,editItem:T,deleteItem:V,deleteItemConfirm:y,save:U}=ga(o,d);r.value.forEach(P=>{P.Sections.forEach(O=>{var S;(S=O.Fields)==null||S.forEach(R=>{R.Field=c.value.find(X=>X.ID===R.FieldID)})})});const x=P=>{l.deleteForm(P.FormUUID).then(O=>{O&&V(P)})};return(P,O)=>(f(),g(I(yl),{headers:n.value,items:I(r),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:t(()=>[e(ae,{color:"primary"},{default:t(()=>[e(ce,null,{default:t(()=>[_("Form Editor")]),_:1}),e(Vl,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(E,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:O[0]||(O[0]=S=>{m.value=Object.assign({},I(u)),i.value=!0})},{default:t(()=>[_(" New Item ")]),_:1}),e(It,{modelValue:I(v),"onUpdate:modelValue":O[1]||(O[1]=S=>Pe(v)?v.value=S:null),onDelete:I(y)},null,8,["modelValue","onDelete"])]),_:1}),I(i)?(f(),g(_a,{key:0,modelValue:I(i),"onUpdate:modelValue":O[2]||(O[2]=S=>Pe(i)?i.value=S:null),form:I(m),"onUpdate:form":[O[3]||(O[3]=S=>Pe(m)?m.value=S:null),I(U)],convention:s.value},null,8,["modelValue","form","onUpdate:form","convention"])):b("",!0)]),"item.actions":t(({item:S})=>[e(J,{size:"small",class:"me-2",onClick:R=>I(T)(S.raw)},{default:t(()=>[_(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),e(J,{size:"small",onClick:R=>x(S.raw)},{default:t(()=>[_(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),Ca=q({__name:"EditAdminLayout",props:M({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:M(["save"],["update:modelValue"]),setup(a,{emit:s}){const l=H(a,"modelValue"),n=D(W(a.layout)),c=D([]),o=Z(),d=({callback:v})=>{const m=()=>{v&&v("Failed to Save Layout")},p=()=>{v&&v("Layout Saved")};o.saveAdminLayout(n.value).then(T=>{T?(p(),s("save",T)):m()}).catch(()=>{m()})},r=()=>({ID:0,LayoutPanelUUID:G(),AdminLayoutID:n.value.ID,AdminLayoutUUID:n.value.AdminLayoutUUID,Name:"",Order:n.value.Panels.length+1,Items:[]}),u=v=>()=>({ID:0,LayoutItemUUID:G(),LayoutPanelID:v.ID,LayoutPanelUUID:v.LayoutPanelUUID,Label:"",SourceType:_l.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:v.Items.length+1}),i=v=>{const m=c.value.find(p=>p.value===v.SectionFieldUUID);m&&(v.SectionFieldID=m.object.ID,v.SectionField=m.object)};return o.getConventionForms(a.layout.ConventionUUID).then(v=>{v.forEach(m=>m.Sections.forEach(p=>p.Fields&&c.value.push(...p.Fields.map(T=>{var y;return{title:`${m.Name} - ${p.Name} - ${(y=T.Field)==null?void 0:y.Name}`,value:T.SectionFieldUUID,object:T}})))),c.value.sort(Zl("title"))}),(v,m)=>(f(),g(We,{modelValue:l.value,"onUpdate:modelValue":m[3]||(m[3]=p=>l.value=p),onSave:d,title:v.title,color:"primary"},{default:t(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:n.value.Name,"onUpdate:modelValue":m[0]||(m[0]=p=>n.value.Name=p),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",sm:"6"},{default:t(()=>[e(ue,{modelValue:n.value.Type,"onUpdate:modelValue":m[1]||(m[1]=p=>n.value.Type=p),label:"Layout Type",items:I(Et),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(Ne,{modelValue:n.value.Panels,"onUpdate:modelValue":m[2]||(m[2]=p=>n.value.Panels=p),"new-item":r,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},ge({_:2},[w(n.value.Panels,(p,T)=>({name:`panel_${T}`,fn:t(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:p.Name,"onUpdate:modelValue":V=>p.Name=V,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Ne,{modelValue:p.Items,"onUpdate:modelValue":V=>p.Items=V,"new-item":u(p),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},ge({_:2},[w(p.Items,(V,y)=>({name:`item_${y}`,fn:t(()=>[e(ee,{class:"px-0 mx-0",fluid:!0},{default:t(()=>[e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(K,{modelValue:V.Label,"onUpdate:modelValue":U=>V.Label=U,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(z,null,{default:t(()=>[e(C,{cols:"12",sm:"6"},{default:t(()=>[e(ue,{modelValue:V.SourceType,"onUpdate:modelValue":U=>V.SourceType=U,label:"Source Type",items:I(St),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(C,{cols:"12",sm:"6"},{default:t(()=>[V.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(f(),g(ue,{key:0,modelValue:V.SectionFieldUUID,"onUpdate:modelValue":U=>V.SectionFieldUUID=U,label:"Form Data",items:c.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:U=>i(V)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):V.SourceType==="LAYOUT_ITEM_SOURCE_META"?(f(),g(ue,{key:1,modelValue:V.MetaField,"onUpdate:modelValue":U=>V.MetaField=U,label:"Miscellaneous Data",items:I(xt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):V.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(f(),g(ue,{key:2,modelValue:V.UserField,"onUpdate:modelValue":U=>V.UserField=U,label:"User Profile Data",items:I(At),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),Da={key:0,class:"addonList"},ka={key:0},ba=q({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(a){const s=N(()=>{if(!a.value)return;const l=JSON.parse(a.value),n=Object.keys(l),c=W(a.extras);return c.forEach(o=>{o.Options=o.Options.filter(d=>n.includes(d.OptionUUID)?(d.Choices=d.Choices.filter(r=>r.TagUUID===l[d.OptionUUID].choiceId),l[d.OptionUUID].checked):!1)}),c.filter(o=>o.Options.length>0),c});return(l,n)=>l.value?(f(),h("ul",Da,[(f(!0),h(k,null,w(s.value,c=>(f(),h("li",{key:c.ExtraUUID},[F("strong",null,$(c.Name),1),F("ul",null,[(f(!0),h(k,null,w(c.Options,o=>(f(),h("li",{key:o.OptionUUID},[_($(o.Name)+" ",1),o.Choices.length==1?(f(),h("small",ka,"("+$(o.Choices[0].Title)+")",1)):b("",!0)]))),128))])]))),128))])):b("",!0)}});const Ea=Ol(ba,[["__scopeId","data-v-4ed6842b"]]),Sa={key:0},xa=q({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(a){const s=N(()=>{if(!a.value)return;const l=JSON.parse(a.value);return Object.entries(l).filter(([,n])=>n).map(([n,c])=>a.interests.find(o=>o.InterestUUID===n)).filter(n=>n!==void 0)});return(l,n)=>l.value?(f(),h("ul",Sa,[(f(!0),h(k,null,w(s.value,c=>(f(),h("li",{key:c.InterestUUID},$(c.Name),1))),128))])):b("",!0)}}),Aa=F("br",null,null,-1),$a=F("small",null,"Options:",-1),Oa=F("br",null,null,-1),Fa=F("small",null,"Addons:",-1),Pa=q({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(a){const s=N(()=>{if(!a.value)return;const l=JSON.parse(a.value);return l.ticket.filter(n=>{const c=a.tickets.find(o=>o.TicketUUID===n);return!(!c||c.Type!==L.TICKET_TYPE_TICKET)}).map(n=>{const c=a.tickets.find(d=>d.TicketUUID===n),o=W(c);return o.TicketComponents=c.TicketComponents.filter(d=>l.componentsChecked.includes(d.TicketUUID)),o.AddonTickets=c.AddonTickets.filter(d=>l.addonsChecked.includes(d.TicketUUID)),o})});return(l,n)=>l.value?(f(!0),h(k,{key:0},w(s.value,c=>(f(),h("div",{key:c.TicketUUID},[F("strong",null,$(c.Name),1),c.TicketComponents.length>0?(f(),h(k,{key:0},[Aa,$a,_("  "),(f(!0),h(k,null,w(c.TicketComponents,o=>(f(),h(k,{key:o.TicketUUID},[F("small",null,$(o.Name),1),_("  ")],64))),128))],64)):b("",!0),c.AddonTickets.length>0?(f(),h(k,{key:1},[Oa,Fa,_("  "),(f(!0),h(k,null,w(c.AddonTickets,o=>(f(),h("small",{key:o.TicketUUID},[_("("),F("em",null,$(o.Name),1),_(")")]))),128))],64)):b("",!0)]))),128)):b("",!0)}}),Ra=q({__name:"RegListRow",props:{header:{},extras:{},item:{},interests:{},tickets:{}},setup(a){const s=l=>{console.log(l)};return(l,n)=>l.header.key=="actions"?(f(),g(E,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:n[0]||(n[0]=c=>s(l.item.raw))})):l.header.type==="EXTRAS"&&l.extras.length>0?(f(),g(Ea,{key:1,value:l.item.raw[l.header.key],extras:l.extras},null,8,["value","extras"])):l.header.type==="INTERESTS"&&l.interests.length>0?(f(),g(xa,{key:2,value:l.item.raw[l.header.key],interests:l.interests},null,8,["value","interests"])):l.header.type==="TICKET"&&l.tickets.length>0?(f(),g(Pa,{key:3,value:l.item.raw[l.header.key],tickets:l.tickets},null,8,["value","tickets"])):(f(),h(k,{key:4},[_($(l.item.raw[l.header.key]),1)],64))}});const gl=Symbol.for("vuetify:v-tabs"),La=Ce({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Fl(lt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Qe=De()({name:"VTab",props:La(),setup(a,s){let{slots:l,attrs:n}=s;const{textColorClasses:c,textColorStyles:o}=ht(a,"sliderColor"),d=N(()=>a.direction==="horizontal"),r=j(!1),u=D(),i=D();function v(m){var T,V;let{value:p}=m;if(r.value=p,p){const y=(V=(T=u.value)==null?void 0:T.$el.parentElement)==null?void 0:V.querySelector(".v-tab--selected .v-tab__slider"),U=i.value;if(!y||!U)return;const x=getComputedStyle(y).color,P=y.getBoundingClientRect(),O=U.getBoundingClientRect(),S=d.value?"x":"y",R=d.value?"X":"Y",X=d.value?"right":"bottom",le=d.value?"width":"height",fe=P[S],Ye=O[S],ie=fe>Ye?P[X]-O[X]:P[S]-O[S],Be=Math.sign(ie)>0?d.value?"right":"bottom":Math.sign(ie)<0?d.value?"left":"top":"center",Q=(Math.abs(ie)+(Math.sign(ie)<0?P[le]:O[le]))/Math.max(P[le],O[le]),Ie=P[le]/O[le],Oe=1.5;ut(U,{backgroundColor:[x,"currentcolor"],transform:[`translate${R}(${ie}px) scale${R}(${Ie})`,`translate${R}(${ie/Oe}px) scale${R}(${(Q-1)/Oe+1})`,"none"],transformOrigin:Array(3).fill(Be)},{duration:225,easing:st})}}return $e(()=>{const[m]=E.filterProps(a);return e(E,Te({symbol:gl,ref:u,class:["v-tab",a.class],style:a.style,tabindex:r.value?0:-1,role:"tab","aria-selected":String(r.value),active:!1,block:a.fixed,maxWidth:a.fixed?300:void 0,rounded:0},m,n,{"onGroup:selected":v}),{default:()=>{var p;return[((p=l.default)==null?void 0:p.call(l))??a.text,!a.hideSlider&&e("div",{ref:i,class:["v-tab__slider",c.value],style:o.value},null)]}})}),{}}});function sl(a){const l=Math.abs(a);return Math.sign(a)*(l/((1/.501-2)*(1-l)+1))}function dl(a){let{selectedElement:s,containerSize:l,contentSize:n,isRtl:c,currentScrollOffset:o,isHorizontal:d}=a;const r=d?s.clientWidth:s.clientHeight,u=d?s.offsetLeft:s.offsetTop,i=c&&d?n-u-r:u,v=l+o,m=r+i,p=r*.4;return i<=o?o=Math.max(i-p,0):v<=m&&(o=Math.min(o-(v-m-p),n-l)),o}function Na(a){let{selectedElement:s,containerSize:l,contentSize:n,isRtl:c,isHorizontal:o}=a;const d=o?s.clientWidth:s.clientHeight,r=o?s.offsetLeft:s.offsetTop,u=c&&o?n-r-d/2-l/2:r+d/2-l/2;return Math.min(n-l,Math.max(0,u))}const wa=Symbol.for("vuetify:v-slide-group"),hl=Ce({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:wa},nextIcon:{type:nl,default:"$next"},prevIcon:{type:nl,default:"$prev"},showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||["always","desktop","mobile"].includes(a)},...Je(),...Ze(),...tt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),rl=De()({name:"VSlideGroup",props:hl(),emits:{"update:modelValue":a=>!0},setup(a,s){let{slots:l}=s;const{isRtl:n}=vl(),{mobile:c}=Pl(),o=Tl(a,a.symbol),d=j(!1),r=j(0),u=j(0),i=j(0),v=N(()=>a.direction==="horizontal"),{resizeRef:m,contentRect:p}=ul(),{resizeRef:T,contentRect:V}=ul(),y=N(()=>o.selected.value.length?o.items.value.findIndex(A=>A.id===o.selected.value[0]):-1),U=N(()=>o.selected.value.length?o.items.value.findIndex(A=>A.id===o.selected.value[o.selected.value.length-1]):-1);if(Rl){let A=-1;re(()=>[o.selected.value,p.value,V.value,v.value],()=>{cancelAnimationFrame(A),A=requestAnimationFrame(()=>{if(p.value&&V.value){const Y=v.value?"width":"height";u.value=p.value[Y],i.value=V.value[Y],d.value=u.value+1<i.value}if(y.value>=0&&T.value){const Y=T.value.children[U.value];y.value===0||!d.value?r.value=0:a.centerActive?r.value=Na({selectedElement:Y,containerSize:u.value,contentSize:i.value,isRtl:n.value,isHorizontal:v.value}):d.value&&(r.value=dl({selectedElement:Y,containerSize:u.value,contentSize:i.value,isRtl:n.value,currentScrollOffset:r.value,isHorizontal:v.value}))}})})}const x=j(!1);let P=0,O=0;function S(A){const Y=v.value?"clientX":"clientY";O=(n.value&&v.value?-1:1)*r.value,P=A.touches[0][Y],x.value=!0}function R(A){if(!d.value)return;const Y=v.value?"clientX":"clientY",te=n.value&&v.value?-1:1;r.value=te*(O+P-A.touches[0][Y])}function X(A){const Y=i.value-u.value;r.value<0||!d.value?r.value=0:r.value>=Y&&(r.value=Y),x.value=!1}function le(){m.value&&(m.value[v.value?"scrollLeft":"scrollTop"]=0)}const fe=j(!1);function Ye(A){if(fe.value=!0,!(!d.value||!T.value)){for(const Y of A.composedPath())for(const te of T.value.children)if(te===Y){r.value=dl({selectedElement:te,containerSize:u.value,contentSize:i.value,isRtl:n.value,currentScrollOffset:r.value,isHorizontal:v.value});return}}}function ie(A){fe.value=!1}function Be(A){var Y;!fe.value&&!(A.relatedTarget&&((Y=T.value)!=null&&Y.contains(A.relatedTarget)))&&Q()}function el(A){T.value&&(v.value?A.key==="ArrowRight"?Q(n.value?"prev":"next"):A.key==="ArrowLeft"&&Q(n.value?"next":"prev"):A.key==="ArrowDown"?Q("next"):A.key==="ArrowUp"&&Q("prev"),A.key==="Home"?Q("first"):A.key==="End"&&Q("last"))}function Q(A){var Y,te,ll,tl,al;if(T.value)if(!A)(Y=Ll(T.value)[0])==null||Y.focus();else if(A==="next"){const pe=(te=T.value.querySelector(":focus"))==null?void 0:te.nextElementSibling;pe?pe.focus():Q("first")}else if(A==="prev"){const pe=(ll=T.value.querySelector(":focus"))==null?void 0:ll.previousElementSibling;pe?pe.focus():Q("last")}else A==="first"?(tl=T.value.firstElementChild)==null||tl.focus():A==="last"&&((al=T.value.lastElementChild)==null||al.focus())}function Ie(A){const Y=r.value+(A==="prev"?-1:1)*u.value;r.value=Nl(Y,0,i.value-u.value)}const Oe=N(()=>{let A=r.value>i.value-u.value?-(i.value-u.value)+sl(i.value-u.value-r.value):-r.value;r.value<=0&&(A=sl(-r.value));const Y=n.value&&v.value?-1:1;return{transform:`translate${v.value?"X":"Y"}(${Y*A}px)`,transition:x.value?"none":"",willChange:x.value?"transform":""}}),ze=N(()=>({next:o.next,prev:o.prev,select:o.select,isSelected:o.isSelected})),Ke=N(()=>{switch(a.showArrows){case"always":return!0;case"desktop":return!c.value;case!0:return d.value||Math.abs(r.value)>0;case"mobile":return c.value||d.value||Math.abs(r.value)>0;default:return!c.value&&(d.value||Math.abs(r.value)>0)}}),xl=N(()=>Math.abs(r.value)>0),Al=N(()=>i.value>Math.abs(r.value)+u.value);return $e(()=>e(a.tag,{class:["v-slide-group",{"v-slide-group--vertical":!v.value,"v-slide-group--has-affixes":Ke.value,"v-slide-group--is-overflowing":d.value},a.class],style:a.style,tabindex:fe.value||o.selected.value.length?-1:0,onFocus:Be},{default:()=>{var A,Y,te;return[Ke.value&&e("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!xl.value}],onClick:()=>Ie("prev")},[((A=l.prev)==null?void 0:A.call(l,ze.value))??e(ol,null,{default:()=>[e(J,{icon:n.value?a.nextIcon:a.prevIcon},null)]})]),e("div",{key:"container",ref:m,class:"v-slide-group__container",onScroll:le},[e("div",{ref:T,class:"v-slide-group__content",style:Oe.value,onTouchstartPassive:S,onTouchmovePassive:R,onTouchendPassive:X,onFocusin:Ye,onFocusout:ie,onKeydown:el},[(Y=l.default)==null?void 0:Y.call(l,ze.value)])]),Ke.value&&e("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Al.value}],onClick:()=>Ie("next")},[((te=l.next)==null?void 0:te.call(l,ze.value))??e(ol,null,{default:()=>[e(J,{icon:n.value?a.prevIcon:a.nextIcon},null)]})])]}})),{selected:o.selected,scrollTo:Ie,scrollOffset:r,focus:Q}}});function Ma(a){return a?a.map(s=>typeof s=="string"?{title:s,value:s}:s):[]}const qa=Ce({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...hl({mandatory:"force"}),...at(),...Ze()},"VTabs"),Cl=De()({name:"VTabs",props:qa(),emits:{"update:modelValue":a=>!0},setup(a,s){let{slots:l}=s;const n=wl(a,"modelValue"),c=N(()=>Ma(a.items)),{densityClasses:o}=nt(a),{backgroundColorClasses:d,backgroundColorStyles:r}=Ct(ve(a,"bgColor"));return Ml({VTab:{color:ve(a,"color"),direction:ve(a,"direction"),stacked:ve(a,"stacked"),fixed:ve(a,"fixedTabs"),sliderColor:ve(a,"sliderColor"),hideSlider:ve(a,"hideSlider")}}),$e(()=>{const[u]=rl.filterProps(a);return e(rl,Te(u,{modelValue:n.value,"onUpdate:modelValue":i=>n.value=i,class:["v-tabs",`v-tabs--${a.direction}`,`v-tabs--align-tabs-${a.alignTabs}`,{"v-tabs--fixed-tabs":a.fixedTabs,"v-tabs--grow":a.grow,"v-tabs--stacked":a.stacked},o.value,d.value,a.class],style:[{"--v-tabs-height":He(a.height)},r.value,a.style],role:"tablist",symbol:gl}),{default:()=>[l.default?l.default():c.value.map(i=>e(Qe,Te(i,{key:i.title}),null))]})}),{}}});const Ya=a=>{const{touchstartX:s,touchendX:l,touchstartY:n,touchendY:c}=a,o=.5,d=16;a.offsetX=l-s,a.offsetY=c-n,Math.abs(a.offsetY)<o*Math.abs(a.offsetX)&&(a.left&&l<s-d&&a.left(a),a.right&&l>s+d&&a.right(a)),Math.abs(a.offsetX)<o*Math.abs(a.offsetY)&&(a.up&&c<n-d&&a.up(a),a.down&&c>n+d&&a.down(a))};function Ba(a,s){var n;const l=a.changedTouches[0];s.touchstartX=l.clientX,s.touchstartY=l.clientY,(n=s.start)==null||n.call(s,{originalEvent:a,...s})}function za(a,s){var n;const l=a.changedTouches[0];s.touchendX=l.clientX,s.touchendY=l.clientY,(n=s.end)==null||n.call(s,{originalEvent:a,...s}),Ya(s)}function Ka(a,s){var n;const l=a.changedTouches[0];s.touchmoveX=l.clientX,s.touchmoveY=l.clientY,(n=s.move)==null||n.call(s,{originalEvent:a,...s})}function Ga(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:a.left,right:a.right,up:a.up,down:a.down,start:a.start,move:a.move,end:a.end};return{touchstart:l=>Ba(l,s),touchend:l=>za(l,s),touchmove:l=>Ka(l,s)}}function Ha(a,s){var r;const l=s.value,n=l!=null&&l.parent?a.parentElement:a,c=(l==null?void 0:l.options)??{passive:!0},o=(r=s.instance)==null?void 0:r.$.uid;if(!n||!o)return;const d=Ga(s.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[o]=d,fl(d).forEach(u=>{n.addEventListener(u,d[u],c)})}function ja(a,s){var o,d;const l=(o=s.value)!=null&&o.parent?a.parentElement:a,n=(d=s.instance)==null?void 0:d.$.uid;if(!(l!=null&&l._touchHandlers)||!n)return;const c=l._touchHandlers[n];fl(c).forEach(r=>{l.removeEventListener(r,c[r])}),delete l._touchHandlers[n]}const Dl={mounted:Ha,unmounted:ja},Xa=Dl,kl=Symbol.for("vuetify:v-window"),bl=Symbol.for("vuetify:v-window-group"),Wa=Ce({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:a=>typeof a=="boolean"||a==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...Je(),...Ze(),...ql()},"VWindow"),El=De()({name:"VWindow",directives:{Touch:Dl},props:Wa(),emits:{"update:modelValue":a=>!0},setup(a,s){let{slots:l}=s;const{themeClasses:n}=Yl(a),{isRtl:c}=vl(),{t:o}=Bl(),d=Tl(a,bl),r=D(),u=N(()=>c.value?!a.reverse:a.reverse),i=j(!1),v=N(()=>{const S=a.direction==="vertical"?"y":"x",X=(u.value?!i.value:i.value)?"-reverse":"";return`v-window-${S}${X}-transition`}),m=j(0),p=D(void 0),T=N(()=>d.items.value.findIndex(S=>d.selected.value.includes(S.id)));re(T,(S,R)=>{const X=d.items.value.length,le=X-1;X<=2?i.value=S<R:S===le&&R===0?i.value=!0:S===0&&R===le?i.value=!1:i.value=S<R}),zl(kl,{transition:v,isReversed:i,transitionCount:m,transitionHeight:p,rootRef:r});const V=N(()=>a.continuous||T.value!==0),y=N(()=>a.continuous||T.value!==d.items.value.length-1);function U(){V.value&&d.prev()}function x(){y.value&&d.next()}const P=N(()=>{const S=[],R={icon:c.value?a.nextIcon:a.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:d.prev,ariaLabel:o("$vuetify.carousel.prev")};S.push(V.value?l.prev?l.prev({props:R}):e(E,R,null):e("div",null,null));const X={icon:c.value?a.prevIcon:a.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:d.next,ariaLabel:o("$vuetify.carousel.next")};return S.push(y.value?l.next?l.next({props:X}):e(E,X,null):e("div",null,null)),S}),O=N(()=>a.touch===!1?a.touch:{...{left:()=>{u.value?U():x()},right:()=>{u.value?x():U()},start:R=>{let{originalEvent:X}=R;X.stopPropagation()}},...a.touch===!0?{}:a.touch});return $e(()=>pl(e(a.tag,{ref:r,class:["v-window",{"v-window--show-arrows-on-hover":a.showArrows==="hover"},n.value,a.class],style:a.style},{default:()=>{var S,R;return[e("div",{class:"v-window__container",style:{height:p.value}},[(S=l.default)==null?void 0:S.call(l,{group:d}),a.showArrows!==!1&&e("div",{class:"v-window__controls"},[P.value])]),(R=l.additional)==null?void 0:R.call(l,{group:d})]}}),[[Kl("touch"),O.value]])),{group:d}}}),Ja=Ce({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Je(),...ot(),...Ql()},"VWindowItem"),Sl=De()({name:"VWindowItem",directives:{Touch:Xa},props:Ja(),emits:{"group:selected":a=>!0},setup(a,s){let{slots:l}=s;const n=Gl(kl),c=it(a,bl),{isBooted:o}=Dt();if(!n||!c)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=j(!1),r=N(()=>o.value&&(n.isReversed.value?a.reverseTransition!==!1:a.transition!==!1));function u(){!d.value||!n||(d.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function i(){var V;d.value||!n||(d.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=He((V=n.rootRef.value)==null?void 0:V.clientHeight)),n.transitionCount.value+=1)}function v(){u()}function m(V){d.value&&Ge(()=>{!r.value||!d.value||!n||(n.transitionHeight.value=He(V.clientHeight))})}const p=N(()=>{const V=n.isReversed.value?a.reverseTransition:a.transition;return r.value?{name:typeof V!="string"?n.transition.value:V,onBeforeEnter:i,onAfterEnter:u,onEnterCancelled:v,onBeforeLeave:i,onAfterLeave:u,onLeaveCancelled:v,onEnter:m}:!1}),{hasContent:T}=et(a,c.isSelected);return $e(()=>e(kt,{transition:p.value,disabled:!o.value},{default:()=>{var V;return[pl(e("div",{class:["v-window-item",c.selectedClass.value,a.class],style:a.style},[T.value&&((V=l.default)==null?void 0:V.call(l))]),[[Hl,c.isSelected.value]])]}})),{}}}),Za=q({__name:"RegList",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(a){const s=H(a,"modelValue"),l=Z(),n=D({ID:0,AdminLayoutUUID:G(),ConventionID:s.value.ID,ConventionUUID:s.value.ConventionUUID,Name:"Registration Table",Type:Il.ADMIN_LAYOUT_TABLE,Panels:[]}),c=D([]),o=D([]),d=D([]),r=D(!1),u=D(""),i=D([]),v=D([]),m=D([]),p=async()=>{c.value=[],o.value=[],d.value=[];try{const T=await l.getConventionAdminLayoutByName(s.value.ConventionUUID,"Registration Table");T&&(n.value=T)}catch{}try{const T=await l.getConventionSubmissions(s.value.ConventionUUID);if(!T)return;o.value=T}catch{return}try{const T=await l.getConventionForms(s.value.ConventionUUID);if(!T)return;c.value=T}catch{return}try{const T=await l.getConventionExtras(s.value.ConventionUUID);if(!T)return;i.value=T}catch{return}try{const T=await l.getConventionInterests(s.value.ConventionUUID);if(!T)return;v.value=T}catch{return}try{const T=await l.getConventionTickets(s.value.ConventionUUID);if(!T)return;m.value=T}catch{return}n.value.Panels.forEach(T=>{T.Items.forEach(V=>{(V.SectionField==null||V.SectionField.Field==null)&&c.value.find(y=>{y.Sections.find(U=>{if(U.Fields){const x=U.Fields.find(P=>P.SectionFieldUUID===V.SectionFieldUUID);if(x)return V.SectionField=x,!0}})})})}),n.value.Panels.length>0&&n.value.Panels.forEach(T=>{const V={uuid:G(),order:T.Order,name:T.Name,headers:[],items:[]},y={key:"actions",title:"Actions",align:"start",sortable:!1,type:""};V.headers=T.Items.map(U=>{var x,P,O,S;return{key:U.LayoutItemUUID,title:U.Label||((P=(x=U.SectionField)==null?void 0:x.Field)==null?void 0:P.Label)||"",align:U.Align==="end"?"end":"start",sortable:!0,type:((S=(O=U.SectionField)==null?void 0:O.Field)==null?void 0:S.Type)||""}}),V.headers.push(y),V.items=o.value.map(U=>{const x={};return V.headers.forEach(P=>{var S;const O=T.Items.find(R=>R.LayoutItemUUID===P.key);O&&O.SectionField&&(x[O.LayoutItemUUID]=((S=U.Data.find(R=>R.SectionFieldUUID===O.SectionFieldUUID))==null?void 0:S.Data)||"")}),x}),d.value.push(V)}),(u.value==null||u.value=="")&&d.value.length>0&&(u.value=d.value[0].uuid)};return p(),(T,V)=>(f(),g(bt,null,{default:t(()=>[e(ae,{color:"primary"},{default:t(()=>[e(ce,null,{default:t(()=>[_("Registration Manager")]),_:1}),e(Vl,{class:"mx-4",inset:!0,vertical:!0}),e(oe),e(E,{icon:"mdi:mdi-cog-outline",onClick:V[0]||(V[0]=y=>r.value=!0)})]),_:1}),d.value?(f(),h(k,{key:0},[e(ae,{color:"blue-darken-4"},{default:t(()=>[e(Cl,{modelValue:u.value,"onUpdate:modelValue":V[1]||(V[1]=y=>u.value=y),"show-arrows":""},{default:t(()=>[(f(!0),h(k,null,w(d.value,y=>(f(),g(Qe,{key:y.uuid,value:y.uuid},{default:t(()=>[_($(y.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(El,{modelValue:u.value,"onUpdate:modelValue":V[2]||(V[2]=y=>u.value=y)},{default:t(()=>[(f(!0),h(k,null,w(d.value,y=>(f(),g(Sl,{key:y.uuid,value:y.uuid},{default:t(()=>[y.uuid===u.value?(f(),g(me,{key:0,class:"pa-2"},{default:t(()=>[e(I(yl),{headers:y.headers,items:y.items,itemsPerPage:"50","item-value":"LayoutItemUUID"},ge({_:2},[w(y.headers,U=>({name:`item.${U.key}`,fn:t(({item:x})=>[e(Ra,{header:U,item:x,extras:i.value,interests:v.value,tickets:m.value},null,8,["header","item","extras","interests","tickets"])])}))]),1032,["headers","items"])]),_:2},1024)):b("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):b("",!0),r.value?(f(),g(Ca,{key:1,title:"Edit Layout",modelValue:r.value,"onUpdate:modelValue":V[3]||(V[3]=y=>r.value=y),layout:n.value,onSave:V[4]||(V[4]=y=>{r.value=!1,p()})},null,8,["modelValue","layout"])):b("",!0)]),_:1}))}}),Bn=q({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(a,{emit:s}){const l=ml(),n=jl.getInstance(),o=D({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[],Visible:!1}),d=D(),r=D([]);re(d,()=>{r.value.find(v=>v.id===d.value&&v.title==="General")&&u()});const u=()=>{n==null||n.getConvention(l.params.convention.toString()).then(i=>{i?(o.value=i,s("pageTitle",`Convention Editor - ${o.value.Name}`)):s("pageTitle","Convention Editor - New Convention")})};return r.value=[{id:G(),title:"General",component:j(Yt),model:o},{id:G(),title:"Accommodation",component:j(Tt),model:o},{id:G(),title:"Additional Purchases",component:j(Nt),model:o},{id:G(),title:"Fields",component:j(Vt),model:o},{id:G(),title:"Forms",component:j(ha),model:o},{id:G(),title:"Interests",component:j(Ht),model:o},{id:G(),title:"Registrations",component:j(Za),model:o},{id:G(),title:"Tickets",component:j(sa),model:o},{id:G(),title:"Venues",component:j(pt),model:o}],s("pageTitle","Convention Editor"),u(),(i,v)=>o.value?(f(),h(k,{key:0},[e(ae,{color:"blue-darken-4"},{default:t(()=>[e(Cl,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=m=>d.value=m),"show-arrows":""},{default:t(()=>[(f(!0),h(k,null,w(r.value,m=>(f(),g(Qe,{key:m.id,value:m.id},{default:t(()=>[_($(m.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(El,{modelValue:d.value,"onUpdate:modelValue":v[1]||(v[1]=m=>d.value=m)},{default:t(()=>[(f(!0),h(k,null,w(r.value,m=>(f(),g(Sl,{key:m.id,value:m.id},{default:t(()=>[m.id===d.value?(f(),g(me,{key:0,class:"pa-2"},{default:t(()=>[(f(),g(Xl(m.component),{modelValue:m.model,"onUpdate:modelValue":p=>m.model=p},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):b("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(f(),h(k,{key:1},[_(" Convention Not Found ")],64))}});export{Bn as default};
