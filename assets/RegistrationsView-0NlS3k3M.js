import{p as tl,d as al,c as se,t as Ke,a0 as ll,a1 as nl,f as t,F as M,m as Ut,i as z,M as J,N as ae,r as E,k as _e,w as Ue,n as o,q as D,v as l,y as S,D as P,x as k,B as T,Q as W,C as _,A as N,P as Te,G as xt,H as qt,_ as mt,a2 as ol,a3 as Je,O as Xe,a4 as il,X as At,o as sl,b as ul,a5 as rl,a6 as dl,a7 as aa,z as Pt,a8 as ml,a9 as la,Z as rt,aa as cl,ab as vl,V as fl,U as Ul,E as Al}from"./index-AeufC2vi.js";import{T as Tl,V as Ta,e as gl,c as ga,d as _l}from"./FormRenderer.vue_vue_type_style_index_0_lang-mmzOzxg6.js";import{F as ge,a as El}from"./form-0fJbSFPv.js";import{u as ct,V as ut}from"./VCheckbox-vwA4IgII.js";import{_ as we}from"./ModelDialog.vue_vue_type_script_setup_true_lang-AX03WUiO.js";import{h as he,b as Tt,a as pl,c as Dl,d as na,P as $t,u as _a}from"./useDisplayTransactions-KtuJap6X.js";import{u as yl,a as me,V as ke}from"./VContainer-MJhHOgEW.js";import{V as Q,a as O}from"./VRow-5VO7Qddr.js";import{V as Le,a as Ve,c as gt,d as Sl}from"./VList-sSF5eRTE.js";import{V as ve}from"./copyToClipboard-yrApk4SP.js";import{G as $e}from"./userData-InK1f7HB.js";import{C as Et}from"./canEditRegistrations-A1ez9bSf.js";import{V as x,a as Ea}from"./VBtn-LYk0FmpX.js";import{b as pa,c as Kt,S as Da,d as oa}from"./submission-40fey8Hx.js";import{G as pt}from"./group-7fhbY6WJ.js";import{C as Dt}from"./canDo-yWCfI_4r.js";import{a as yt,V as Fe}from"./scopeId-B4TYtrLc.js";import{b as Il,_ as dt,V as ya}from"./SaveButton.vue_vue_type_script_setup_true_lang-0vhDv0ty.js";import{V as nt,a as We,c as Ze,d as jt,e as Pe}from"./VCard-Nxe4K3AT.js";import{V as zt}from"./VAvatar-P9IZfO-X.js";import{V as ne}from"./VTextField-louXElbu.js";import{v as Se}from"./v4-yQnnJER4.js";import{m as Cl,k as Rl,l as hl,n as kl,o as Vl,p as Ol,q as bl,u as Ml,r as Nl,s as Ll,t as wl,v as Fl,w as Pl,x as $l,y as Bl,z as ia,A as sa,B as ua,c as St,d as It,e as Qt,b as Ct,V as Rt,a as Sa,h as Ia,i as Ca,_ as Ra,j as Qe,g as ha,f as Bt,C as Gl}from"./VWindowItem-uw9Gm-ix.js";import{_ as ka}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-fdrcm3hg.js";import{a as Va,V as Gt}from"./VToolbar-uu7Dmbob.js";import{V as Yl}from"./VDivider-uBafADLg.js";import{V as Oa}from"./VTextarea-dUmtWp9m.js";import{V as _t}from"./VDialog-RbXtw7vi.js";import{V as Hl,a as Yt}from"./VChip-3C6G5r0R.js";import{V as xl}from"./VForm-sSCD-m7n.js";import{V as ql,b as Kl}from"./VNavigationDrawer-PkicDzqq.js";import{s as jl}from"./sortSubmissions-NKScr9xj.js";import{V as zl,a as Ql}from"./VAlert-1L_cvmBh.js";import{S as Jl}from"./setupLogin-Z1rtthAU.js";import{V as Xl}from"./forwardRefs-00tnSmyo.js";import{u as Lt}from"./nil-rxyd0N8M.js";import{V as ra,a as Wl}from"./VTable-b1uAX0jM.js";import"./index-OKsbKlsK.js";import"./VFileInput-jVBPMCJL.js";import"./createSimpleFunctional-mkvOT4lJ.js";import"./VToolbarItems-ZZ2WrOs7.js";var Me=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(Me||{});const Zl=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Ne=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Ne||{});const en=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var H=(e=>(e.META_DATA_SOURCE_NULL="",e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_ADMIN_FORM="META_DATA_SOURCE_ADMIN_FORM",e.META_DATA_SOURCE_BADGE_DISPLAY="META_DATA_SOURCE_BADGE_DISPLAY",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_CHECKIN_CONTROL="META_DATA_SOURCE_CHECKIN_CONTROL",e.META_DATA_SOURCE_CHECKIN_STATUS="META_DATA_SOURCE_CHECKIN_STATUS",e.META_DATA_SOURCE_DATA_LAYOUT="META_DATA_SOURCE_DATA_LAYOUT",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_EMAILS="META_DATA_SOURCE_EMAILS",e.META_DATA_SOURCE_NOTES="META_DATA_SOURCE_NOTES",e.META_DATA_SOURCE_PAYMENT_STATUS="META_DATA_SOURCE_PAYMENT_STATUS",e.META_DATA_SOURCE_PAYMENTS="META_DATA_SOURCE_PAYMENTS",e.META_DATA_SOURCE_REGISTRATION_ACTIONS="META_DATA_SOURCE_REGISTRATION_ACTIONS",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e.META_DATA_SOURCE_TAGS="META_DATA_SOURCE_TAGS",e))(H||{});const tn=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Actions",value:"META_DATA_SOURCE_REGISTRATION_ACTIONS"},{title:"Badge Display",value:"META_DATA_SOURCE_BADGE_DISPLAY"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Check In Control",value:"META_DATA_SOURCE_CHECKIN_CONTROL"},{title:"Check In Status",value:"META_DATA_SOURCE_CHECKIN_STATUS"},{title:"Data Display",value:"META_DATA_SOURCE_DATA_LAYOUT"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Emails",value:"META_DATA_SOURCE_EMAILS"},{title:"Notes",value:"META_DATA_SOURCE_NOTES"},{title:"Payment Status",value:"META_DATA_SOURCE_PAYMENT_STATUS"},{title:"Payments",value:"META_DATA_SOURCE_PAYMENTS"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"},{title:"Tags",value:"META_DATA_SOURCE_TAGS"}];var ye=(e=>(e.PANEL_STYLE_FLEX="PANEL_STYLE_FLEX",e.PANEL_STYLE_NAV_BOTTOM="PANEL_STYLE_NAV_BOTTOM",e.PANEL_STYLE_NAV_LEFT="PANEL_STYLE_NAV_LEFT",e.PANEL_STYLE_NAV_RIGHT="PANEL_STYLE_NAV_RIGHT",e.PANEL_STYLE_NAV_TOP="PANEL_STYLE_NAV_TOP",e))(ye||{});const an=[{title:"Body Flexible",value:"PANEL_STYLE_FLEX"},{title:"Fixed Bottom",value:"PANEL_STYLE_NAV_BOTTOM"},{title:"Fixed Left",value:"PANEL_STYLE_NAV_LEFT"},{title:"Fixed Right",value:"PANEL_STYLE_NAV_RIGHT"},{title:"Fixed Top",value:"PANEL_STYLE_NAV_TOP"}];var ie=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(ie||{});const ln=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}];var Ee=(e=>(e.CHECK_IN_STATUS_PENDING="CHECK_IN_STATUS_PENDING",e.CHECK_IN_STATUS_COMPLETED="CHECK_IN_STATUS_COMPLETED",e.CHECK_IN_STATUS_REJECTED="CHECK_IN_STATUS_REJECTED",e.CHECK_IN_STATUS_REVOKED="CHECK_IN_STATUS_REVOKED",e))(Ee||{});const nn=[{title:"Pending",value:"CHECK_IN_STATUS_PENDING"},{title:"Completed",value:"CHECK_IN_STATUS_COMPLETED"},{title:"Rejected",value:"CHECK_IN_STATUS_REJECTED"},{title:"Revoked",value:"CHECK_IN_STATUS_REVOKED"}],je=e=>{var c;return((c=nn.find(n=>n.value===e))==null?void 0:c.title)||""},on=e=>{switch(e){case"EMAIL_STATUS_QUEUED":return"Queued";case"EMAIL_STATUS_QUEUE_ERROR":return"Processing";case"EMAIL_STATUS_QUEUE_FAILURE":return"Internal Error";case"EMAIL_STATUS_SENDING":return"Sending";case"EMAIL_STATUS_SENT":return"Sent";case"EMAIL_STATUS_SEND_ERROR":return"Failed to Send"}return"Unknown"},sn=e=>e===void 0?!1:Dt(e,pt.GROUP_TYPE_SYSTEM).ManageUsers,wt=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`,un=tl({itemsLength:{type:[Number,String],required:!0},...Cl(),...Rl(),...hl()},"VDataTableServer"),rn=al()({name:"VDataTableServer",props:un(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,c){let{attrs:n,slots:i}=c;const{groupBy:r}=kl(e),{sortBy:f,multiSort:A,mustSort:u}=Vl(e),{page:a,itemsPerPage:s}=Ol(e),d=se(()=>parseInt(e.itemsLength,10)),{columns:U,headers:v}=bl(e,{groupBy:r,showSelect:Ke(e,"showSelect"),showExpand:Ke(e,"showExpand")}),{items:m}=Ml(e,U),{toggleSort:y}=Nl({sortBy:f,multiSort:A,mustSort:u,page:a}),{opened:V,isGroupOpen:b,toggleGroup:I,extractRows:g}=Ll({groupBy:r,sortBy:f}),{pageCount:R,setItemsPerPage:p}=wl({page:a,itemsPerPage:s,itemsLength:d}),{flatItems:Z}=Fl(m,r,V),{isSelected:j,select:ue,selectAll:B,toggleSelect:Y,someSelected:G,allSelected:$}=Pl(e,{allItems:m,currentPage:m}),{isExpanded:w,toggleExpand:ee}=$l(e),ce=se(()=>g(m.value));Bl({page:a,itemsPerPage:s,sortBy:f,groupBy:r,search:Ke(e,"search")}),ll("v-data-table",{toggleSort:y,sortBy:f}),nl({VDataTableRows:{hideNoData:Ke(e,"hideNoData"),noDataText:Ke(e,"noDataText"),loading:Ke(e,"loading"),loadingText:Ke(e,"loadingText")}});const oe=se(()=>({page:a.value,itemsPerPage:s.value,sortBy:f.value,pageCount:R.value,toggleSort:y,setItemsPerPage:p,someSelected:G.value,allSelected:$.value,isSelected:j,select:ue,selectAll:B,toggleSelect:Y,isExpanded:w,toggleExpand:ee,isGroupOpen:b,toggleGroup:I,items:ce.value.map(pe=>pe.raw),internalItems:ce.value,groupedItems:Z.value,columns:U.value,headers:v.value}));yl(()=>{const pe=ia.filterProps(e),et=sa.filterProps(e),tt=ua.filterProps(e),ot=ra.filterProps(e);return t(ra,Ut({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ot),{top:()=>{var Ce;return(Ce=i.top)==null?void 0:Ce.call(i,oe.value)},default:()=>{var Ce,Be,Ge,Ye,He,De;return i.default?i.default(oe.value):t(M,null,[(Ce=i.colgroup)==null?void 0:Ce.call(i,oe.value),t("thead",{class:"v-data-table__thead",role:"rowgroup"},[t(sa,Ut(et,{sticky:e.fixedHeader}),i)]),(Be=i.thead)==null?void 0:Be.call(i,oe.value),t("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Ge=i["body.prepend"])==null?void 0:Ge.call(i,oe.value),i.body?i.body(oe.value):t(ua,Ut(n,tt,{items:Z.value}),i),(Ye=i["body.append"])==null?void 0:Ye.call(i,oe.value)]),(He=i.tbody)==null?void 0:He.call(i,oe.value),(De=i.tfoot)==null?void 0:De.call(i,oe.value)])},bottom:()=>i.bottom?i.bottom(oe.value):t(ia,pe,{prepend:i["footer.prepend"]})})})}}),dn=P("br",null,null,-1),mn=P("h3",null,"Assigned Accommodation",-1),cn=P("br",null,null,-1),vn=P("br",null,null,-1),fn=P("h3",null,"Accommodation Preferences",-1),Un=P("h3",null,"Selected Tickets",-1),An=P("br",null,null,-1),Tn=z({__name:"EditAccommodationAssignmentDialog",props:J({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:field"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{convention:i,registration:r,title:f=""}=n,A=c,u=Te(),a=ae(e,"modelValue"),s=E({capacity:{max:Y=>{var w;const G=p.value.find(ee=>ee.room.RoomUUID===Y);return!G||G.room.MaximumCapacity===0?!0:(((w=m.value)==null?void 0:w.Members.length)||0)<=G.room.MaximumCapacity||"Too many people in the group for this room"},min:Y=>{var w;const G=p.value.find(ee=>ee.room.RoomUUID===Y);return!G||G.room.MinimumCapacity===0?!0:(((w=m.value)==null?void 0:w.Members.length)||0)>=G.room.MinimumCapacity||"Not enough people in the group for this room"}}}),d=E([]),U=ct(n,A,void 0,void 0,"field"),v=E(_e(U.value));Ue(U,()=>{v.value=_e(U.value)});const m=E(),y=E(""),V=E(""),b=E([]),I=E({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),g=async()=>{var w;const Y=await u.getConventionAvailableAccommodation(i.ConventionUUID);Y&&(d.value=Y);const G=await u.getRegistrationGroup(r.RegistrationUUID||"");G&&(m.value=G);const $=await u.getConventionTickets(i.ConventionUUID);$&&(b.value=$);try{I.value=JSON.parse(((w=m.value)==null?void 0:w.TicketData)||"")}catch{}};Ue(y,()=>{V.value=p.value.length>0?p.value[0].value:""});const R=se(()=>{const Y=Z.value;return d.value.map(G=>{let $;return Y.forEach(w=>{G.Costs.forEach(ee=>{ee.DateStart===(w==null?void 0:w.DateStart)&&ee.DateEnd===w.DateEnd&&($===void 0||$>ee.Availability)&&($=ee.Availability)})}),{label:`${G.Name}`,title:`${G.Name} (${$} Available)`,value:G.AccommodationUUID}})}),p=se(()=>{const Y=Z.value,G=d.value.find($=>$.AccommodationUUID===y.value);return(G==null?void 0:G.Pool.map($=>{var ee,ce;let w;return Y.forEach(oe=>{$.Costs.forEach(pe=>{pe.DateStart===(oe==null?void 0:oe.DateStart)&&pe.DateEnd===oe.DateEnd&&(w===void 0||w>pe.Availability)&&(w=pe.Availability)})}),{label:`${(ee=$.Venue)==null?void 0:ee.Name} - ${$.Name}`,title:`${(ce=$.Venue)==null?void 0:ce.Name} - ${$.Name} (${w} Available)`,value:$.RoomUUID,room:$}}))||[]}),Z=se(()=>[...I.value.Ticket,...I.value.AddonsChecked,...I.value.ComponentsChecked].map(Y=>b.value.find(G=>G.TicketUUID===Y)).filter(Y=>Y!==void 0&&Y.RequiresAccommodation)),j=Y=>{var G;u.assignAccommodation(((G=m.value)==null?void 0:G.Registration.RegistrationUUID)||"",y.value,V.value,!1).then($=>{$?(g(),Y&&Y("Room Assigned")):Y&&Y("Room not assigned")}).catch(()=>{Y&&Y("Room not assigned")})},ue=Y=>{var G,$;(G=m.value)!=null&&G.Registration.AllocationUUID?u.deleteAllocation((($=m.value)==null?void 0:$.Registration.AllocationUUID)||"").then(w=>{w?(g(),Y&&Y("Allocation Deleted")):Y&&Y("Allocation not deleted")}).catch(()=>{Y&&Y("Allocation not deleted")}):Y&&Y("Nothing to Delete")},B=Y=>{var $,w;const G=($=d.value.find(ee=>ee.AccommodationUUID===Y.AccommodationUUID))==null?void 0:$.Pool;if(G){const ee=G.find(ce=>ce.RoomUUID===Y.RoomUUID);if(ee)return`${(w=ee.Venue)==null?void 0:w.Name} - ${ee.Name}`}return""};return g(),(Y,G)=>{var $;return o(),D(we,{modelValue:a.value,"onUpdate:modelValue":G[2]||(G[2]=w=>a.value=w),title:_(f),color:"primary","show-close-action":!0,"show-delete-action":!!(($=m.value)!=null&&$.Registration.Allocation),"show-save-action":!!V.value,"save-button-label":"Assign Room",onDelete:ue,onSave:j,fullscreen:!0,persistent:!0},{default:l(()=>[t(me,{class:"pa-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>{var w;return[t(O,{cols:"12",md:"6"},{default:l(()=>{var ee,ce;return[P("h3",null,"Group Members ("+S((ee=m.value)==null?void 0:ee.Members.length)+")",1),(o(!0),T(M,null,W((ce=m.value)==null?void 0:ce.Members,oe=>(o(),T(M,{key:oe.UUID},[k(" #"+S(oe.Reference)+" "+S(oe.Name),1),dn],64))),128))]}),_:1}),(w=m.value)!=null&&w.Registration.Allocation?(o(),D(O,{key:0,cols:"12",md:"6"},{default:l(()=>[mn,t(Le,null,{default:l(()=>{var ee;return[(o(!0),T(M,null,W((ee=m.value)==null?void 0:ee.Registration.Allocation.Periods,ce=>(o(),D(Ve,{key:ce.AllocationPeriodUUID},{default:l(()=>{var oe;return[k(S((oe=d.value.find(pe=>pe.AccommodationUUID===ce.AccommodationUUID))==null?void 0:oe.Name)+" ",1),cn,k(" "+S(B(ce))+" ",1),vn,P("small",null,"("+S(_(he)(ce.DateStart))+" - "+S(_(he)(ce.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):N("",!0)]}),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12",md:"6"},{default:l(()=>[Y.selectedAccommodation.length?(o(),T(M,{key:0},[fn,t(Le,null,{default:l(()=>[(o(!0),T(M,null,W(Y.selectedAccommodation,(w,ee)=>(o(),D(Ve,{key:w.AccommodationUUID},{default:l(()=>[k(S(ee+1)+". "+S(w.Name),1)]),_:2},1024))),128))]),_:1})],64)):N("",!0)]),_:1}),t(O,{cosl:"12",md:"6"},{default:l(()=>[Un,t(Le,null,{default:l(()=>[(o(!0),T(M,null,W(Z.value,w=>(o(),D(Ve,{key:w==null?void 0:w.TicketUUID},{default:l(()=>[k(S(w.Name)+" ",1),An,P("small",null,"("+S(_(he)(w.DateStart))+" - "+S(_(he)(w.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12",md:"6"},{default:l(()=>[t(ve,{modelValue:y.value,"onUpdate:modelValue":G[0]||(G[0]=w=>y.value=w),items:R.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),t(O,{cols:"12",md:"6"},{default:l(()=>[t(ve,{modelValue:V.value,"onUpdate:modelValue":G[1]||(G[1]=w=>V.value=w),items:p.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[s.value.capacity.min,s.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),gn=e=>(xt("data-v-33548a38"),e=e(),qt(),e),_n={key:0,class:"accommodationList"},En={key:0,class:"text-orange-darken-2"},pn={key:1,class:"accommodationList"},Dn=gn(()=>P("br",null,null,-1)),yn=z({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},forms:{},registration:{},tickets:{default:()=>[]},value:{default:""},venues:{}},setup(e){const c=$e(),n=Et(c,e.convention),i=E(!1),r=se(()=>e.registration.Allocation.Periods.map(u=>{var a;return{DateStart:u.DateStart,DateEnd:u.DateEnd,Accommodation:u.Accommodation||((a=e.accommodations)==null?void 0:a.find(s=>s.AccommodationUUID==u.AccommodationUUID))}}).sort((u,a)=>u.DateStart>a.DateStart?1:u.DateStart==a.DateStart?0:-1));e.registration&&e.registration.Allocation&&e.registration.Allocation.Periods&&e.registration.Allocation.Periods.forEach(u=>{var s;if(u.Accommodation)return;const a=(s=e.accommodations)==null?void 0:s.find(d=>d.AccommodationUUID==u.AccommodationUUID);a&&(u.Accommodation=a)});const f=se(()=>{if(!e.value)return[];const u=JSON.parse(e.value),a=e.accommodations.filter(s=>u.includes(s.AccommodationUUID)).sort((s,d)=>{const U=u.findIndex(m=>m===s.AccommodationUUID),v=u.findIndex(m=>m===d.AccommodationUUID);return U>v?1:-1});return _e(a)}),A=se(()=>{let u;const a=e.forms.find(s=>!!s.Sections.find(d=>{var U;return d.Fields?!!((U=d.Fields)!=null&&U.find(v=>{var m;return((m=v.Field)==null?void 0:m.Type)==="TICKET"?(u=v,!0):!1})):!1}));return u?!!e.registration.Submissions.find(s=>{if(s.FormUUID==(a==null?void 0:a.FormUUID))return!!s.Data.find(d=>{if(d.SectionFieldUUID==(u==null?void 0:u.SectionFieldUUID)){const U=JSON.parse(d.Data);return e.tickets.filter(v=>v.RequiresAccommodation).find(v=>U.Ticket.includes(v.TicketUUID)||U.AddonsChecked.includes(v.TicketUUID)||U.ComponentsChecked.includes(v.TicketUUID))}})}):!1});return(u,a)=>A.value?(o(),T(M,{key:0},[u.value?(o(),T("ol",_n,[(o(!0),T(M,null,W(f.value,s=>(o(),T("li",{key:s.AccommodationUUID},[u.registration&&u.registration.Allocation&&u.registration.Allocation.Periods.find(d=>d.AccommodationUUID===s.AccommodationUUID)?(o(),T("strong",En,S(s.Name),1)):(o(),T(M,{key:1},[k(S(s.Name),1)],64))]))),128))])):(o(),T("ul",pn,[(o(!0),T(M,null,W(r.value,s=>{var d;return o(),T("li",{key:s.DateStart},[k(S((d=s.Accommodation)==null?void 0:d.Name)+" ("+S(_(he)(s.DateStart))+" - "+S(_(he)(s.DateEnd))+")",1),Dn])}),128))])),_(n)?(o(),D(x,{key:2,onClick:a[0]||(a[0]=s=>i.value=!0),variant:"flat",color:"success"},{default:l(()=>[k("Assign Accommodation")]),_:1})):N("",!0),u.convention&&i.value?(o(),D(Tn,{key:3,modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=s=>i.value=s),title:"Accommodation Allocation",convention:u.convention,registration:u.registration,tickets:u.tickets,"selected-accommodation":f.value},null,8,["modelValue","convention","registration","tickets","selected-accommodation"])):N("",!0)],64)):N("",!0)}}),ba=mt(yn,[["__scopeId","data-v-33548a38"]]),Sn={key:0,class:"addonList"},In={key:0},Cn={key:0},Rn=z({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const c=se(()=>{if(!e.value)return;const n=JSON.parse(e.value),i=Object.keys(n),r=_e(e.extras);return r.forEach(f=>{f.Options=f.Options.filter(A=>i.includes(A.OptionUUID)?(A.Choices=A.Choices.filter(u=>u.TagUUID===n[A.OptionUUID].choiceId),n[A.OptionUUID].checked):!1)}),r.filter(f=>f.Options.length>0),r});return(n,i)=>n.value?(o(),T("ul",Sn,[(o(!0),T(M,null,W(c.value,r=>(o(),T(M,{key:r.ExtraUUID},[r.Options.length?(o(),T("li",In,[P("strong",null,S(r.Name),1),P("ul",null,[(o(!0),T(M,null,W(r.Options,f=>(o(),T("li",{key:f.OptionUUID},[k(S(f.Name)+" ",1),f.Choices.length==1?(o(),T("small",Cn,"("+S(f.Choices[0].Title)+")",1)):N("",!0)]))),128))])])):N("",!0)],64))),128))])):N("",!0)}}),Ma=mt(Rn,[["__scopeId","data-v-55786e01"]]),hn={key:0},Na=z({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const c=se(()=>{if(!e.value)return;const n=JSON.parse(e.value);return Object.entries(n).filter(([,i])=>i).map(([i,r])=>e.interests.find(f=>f.InterestUUID===i)).filter(i=>i!==void 0)});return(n,i)=>n.value?(o(),T("ul",hn,[(o(!0),T(M,null,W(c.value,r=>(o(),T("li",{key:r.InterestUUID},S(r.Name),1))),128))])):N("",!0)}}),kn=P("br",null,null,-1),Vn=P("small",null,"Options:",-1),On=P("br",null,null,-1),bn=P("small",null,"Addons:",-1),La=z({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const c=se(()=>{if(!e.value)return;let n={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{n=JSON.parse(e.value),"ticket"in n&&(n.Ticket=n.ticket),"addonsChecked"in n&&(n.AddonsChecked=n.addonsChecked),"componentsChecked"in n&&(n.ComponentsChecked=n.componentsChecked)}catch{}return n.Ticket.filter(i=>{const r=e.tickets.find(f=>f.TicketUUID===i);return!(!r||r.Type!==Tl.TICKET_TYPE_TICKET)}).map(i=>{const r=e.tickets.find(A=>A.TicketUUID===i),f=_e(r);return f.TicketComponents=r.TicketComponents.filter(A=>n.ComponentsChecked.includes(A.TicketUUID)),f.AddonTickets=r.AddonTickets.filter(A=>n.AddonsChecked.includes(A.TicketUUID)),f})});return(n,i)=>n.value?(o(!0),T(M,{key:0},W(c.value,r=>(o(),T("div",{key:r.TicketUUID},[P("strong",null,S(r.Name),1),r.TicketComponents.length>0?(o(),T(M,{key:0},[kn,Vn,k("  "),(o(!0),T(M,null,W(r.TicketComponents,f=>(o(),T(M,{key:f.TicketUUID},[P("small",null,S(f.Name),1),k("  ")],64))),128))],64)):N("",!0),r.AddonTickets.length>0?(o(),T(M,{key:1},[On,bn,k("  "),(o(!0),T(M,null,W(r.AddonTickets,f=>(o(),T("small",{key:f.TicketUUID},[k("("),P("em",null,S(f.Name),1),k(")")]))),128))],64)):N("",!0)]))),128)):N("",!0)}}),wa=z({__name:"DataPanelAccommodation",props:J({accommodations:{},convention:{},data:{},forms:{},tickets:{},venues:{},registration:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){return ae(e,"modelValue"),(c,n)=>(o(),T("div",null,[t(ba,{value:c.data,accommodations:c.accommodations,convention:c.convention,forms:c.forms,registration:c.registration,tickets:c.tickets,venues:c.venues},null,8,["value","accommodations","convention","forms","registration","tickets","venues"])]))}}),Mn={key:0,class:"text-red-darken-4 font-weight-bold"},Nn={key:1,class:"text-orange-darken-2 font-weight-bold"},Ln=z({__name:"DataPanelAge",props:J({data:{},forms:{},registration:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=ae(e,"modelValue"),n=new Date,i=n.getFullYear(),r=(n.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),f=n.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),A=E(!1),u=E(`${i}-${r}-${f}`),a=E(18);e.forms.find(v=>v.Sections.find(m=>m.Fields?m.Fields.find(y=>{var V;return y.SectionFieldUUID===c.value.SectionFieldUUID?(c.value.SectionField=y,(V=y.Field)==null||V.Values.forEach(b=>{switch(b.Title){case"UNDER_AGE_APPLY_TAG":b.Value.length>0&&(A.value=!0);break;case"BEFORE_DATE":u.value=b.Value;break;case"MIN_AGE":a.value=parseInt(b.Value);break}}),!0):!1}):!1));const s=v=>({registration:d(v,e.registration.CreatedAt||"",a.value),convention:d(v,u.value,a.value)}),d=(v,m,y)=>{if(v>=m)return!1;const V=U(v),I=U(m).getTime()-V.getTime(),g=1e3*60*60*24*365.25;return I/g>=y},U=v=>{const[m,y,V]=v.split("-");return new Date(parseInt(m),parseInt(y)-1,parseInt(V))};return(v,m)=>(o(),T("div",null,[P("p",null,[k(S(_(he)(v.data,{withDay:!1,withYear:!0}))+" ",1),A.value&&s(v.data).convention&&s(v.data).registration?(o(),D(ke,{key:0,icon:"mdi:mdi-check",color:"success"})):A.value&&!s(v.data).convention?(o(),D(ke,{key:1,icon:"mdi:mdi-alert",color:"error"})):A.value&&s(v.data).convention&&!s(v.data).registration?(o(),D(ke,{key:2,icon:"mdi:mdi-alert",color:"warning"})):N("",!0)]),A.value?(o(),T(M,{key:0},[s(v.data).convention?s(v.data).registration?N("",!0):(o(),T("p",Nn," Attendee was under "+S(a.value)+" at time of registration ",1)):(o(),T("p",Mn," Attendee is under "+S(a.value),1))],64)):N("",!0)]))}}),Fa=(e,c)=>e===void 0?!1:Dt(e,pt.GROUP_TYPE_CONVENTION,c.ConventionUUID,c).CheckIn,wn={key:0,class:"font-weight-bold pt-2"},Jt=z({__name:"Badges",props:{cardClass:{default:""},convention:{},hideDownload:{type:Boolean,default:!1},hideNfc:{type:Boolean,default:!1},registration:{},showTitle:{type:Boolean,default:!0}},setup(e){const c=Te(),n=yt(),i=E([]);let r;const f=ol();f&&"$NDEFReader"in f.appContext.config.globalProperties&&(r=f.appContext.config.globalProperties.$NDEFReader);const A=E(!!r),u=E(e.registration.BadgeSerialNumber),a=E(""),s=E(!1),d=E(2),U=$e();let v=!1,m=!1;e.convention&&(v=Fa(U,e.convention),m=Et(U,e.convention));const y=I=>{var R;const g=document.createElement("a");g.download=`${((R=e.convention)==null?void 0:R.Name)||""} Badge Image - ${e.registration.Reference} - ${e.registration.User.DisplayName}.jpg`,g.href=I,document.body.appendChild(g),g.click(),document.body.removeChild(g)},V=async I=>n.GetConBadgeImageURL(e.registration.RegistrationUUID,I),b=()=>{if(A.value)try{const I=new r;I.addEventListener("readingerror",()=>{a.value="Error Reading Card",s.value=!0}),I.addEventListener("reading",g=>{if(g.serialNumber){const R=g.serialNumber;a.value="Obtained Card Details",s.value=!0,u.value=R,c.setBadgeSerial(e.registration.RegistrationUUID,u.value).then(p=>{p?(a.value="Badge Serial Saved",s.value=!0):(a.value="Failed to Save Badge Serial",s.value=!0)})}else a.value="Serial Number not Found",s.value=!0}),I.scan&&I.scan()}catch{}};return c.getConBadgeList(e.registration.RegistrationUUID).then(I=>{I.forEach(g=>{V(g).then(R=>{i.value.push({template:g,url:R})})})}).catch(()=>{}),(I,g)=>(o(!0),T(M,null,W(i.value,R=>(o(),D(Pe,{key:R.template,class:Je(I.cardClass)},{default:l(()=>[t(nt,null,{default:l(()=>[I.showTitle?(o(),D(We,{key:0,class:"text-center"},{default:l(()=>[k(" Badges (#"+S(I.registration.Reference)+" "+S(I.registration.User.DisplayName)+") ",1)]),_:1})):N("",!0)]),_:1}),t(Ze,{class:"text-center"},{default:l(()=>[t(zt,{class:"d-block ma-auto",src:R.url,height:"280",width:"280"},null,8,["src"]),u.value?(o(),T("p",wn,S(u.value),1)):N("",!0)]),_:2},1024),!I.hideDownload||!I.hideNfc?(o(),D(jt,{key:0,class:"justify-center"},{default:l(()=>[!I.hideNfc&&A.value&&(_(m)||_(v))?(o(),D(x,{key:0,"prepend-icon":"mdi:mdi-nfc",color:"warning",variant:"flat",onClick:b},{default:l(()=>[k("Link Card")]),_:1})):N("",!0),I.hideDownload?N("",!0):(o(),D(x,{key:1,color:"primary","prepend-icon":"mdi:mdi-download",variant:"flat",onClick:p=>y(R.url)},{default:l(()=>[k("Download")]),_:2},1032,["onClick"]))]),_:2},1024)):N("",!0),t(Il,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=p=>s.value=p),message:a.value,timeout:d.value*1e3},null,8,["modelValue","message","timeout"])]),_:2},1032,["class"]))),128))}}),Fn=z({__name:"DataPanelText",props:J({convention:{},data:{},forms:{}},{modelValue:{required:!0},modelModifiers:{},registration:{required:!0},registrationModifiers:{}}),emits:["update:modelValue","update:registration"],setup(e){const c=ae(e,"modelValue"),n=ae(e,"registration"),i=E(e.data),r=se(()=>a.value?"":i.value!==e.data?"mdi:mdi-content-save":""),f=$e(),A=Te(),u=E(Et(f,e.convention)),a=E(!1),s=()=>{a.value=!0,A.directEditFieldData(n.value.RegistrationUUID,c.value.LayoutItemUUID,i.value).then(d=>{d&&n.value.Submissions.find(U=>!!U.Data.find(v=>{if(v.SectionFieldUUID===c.value.SectionFieldUUID)return v.Data=d,!0})),a.value=!1}).catch(()=>{})};return(d,U)=>c.value.Meta.DirectEdit&&(u.value||c.value.Meta.DirectEditPermission==="View")?(o(),D(ne,{key:0,modelValue:i.value,"onUpdate:modelValue":U[0]||(U[0]=v=>i.value=v),"append-inner-icon":r.value,"onClick:appendInner":s},Xe({_:2},[a.value?{name:"append-inner",fn:l(()=>[t(Ea,{color:"primary",indeterminate:"",size:30})]),key:"0"}:void 0]),1032,["modelValue","append-inner-icon"])):(o(),T(M,{key:1},[k(S(d.data),1)],64))}}),Pn={key:4},$n={key:8},Bn=z({__name:"FormDataItem",props:J({accommodations:{},convention:{},extras:{},forms:{},interests:{},itemClass:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{},registration:{required:!0},registrationModifiers:{}}),emits:["update:modelValue","update:registration"],setup(e){const c=ae(e,"modelValue"),n=ae(e,"registration"),i=se(()=>{var U,v,m,y;const s=c.value,d=()=>{var V;for(let b=0;b<e.forms.length;b+=1)for(let I=0;I<e.forms[b].Sections.length;I+=1)if(e.forms[b].Sections[I].Fields){const g=(V=e.forms[b].Sections[I].Fields)==null?void 0:V.find(R=>R.SectionFieldUUID===s.SectionFieldUUID);if(g)return g}};return((v=(U=s.SectionField)==null?void 0:U.Field)==null?void 0:v.Type)||((y=(m=d())==null?void 0:m.Field)==null?void 0:y.Type)}),r=se(()=>{for(let s=0;s<n.value.Submissions.length;s+=1){const U=n.value.Submissions[s].Data.find(v=>v.SectionFieldUUID===c.value.SectionFieldUUID);if(U)return U.Data}return""}),f=Te(),A=yt(),u=E(""),a=E("");if(i.value==="BADGE_IMAGE")try{const s=JSON.parse(r.value||"{}");s.fileUUID&&(a.value=A.GetBadgeImageURL(s.fileUUID)),n.value&&f.getConBadgeDisplayName(n.value.RegistrationUUID).then(d=>{d&&(u.value=d)}).catch(()=>{})}catch{}return(s,d)=>i.value==="ACCOMMODATION"?(o(),D(wa,{key:0,convention:s.convention,tickets:s.tickets,accommodations:s.accommodations,venues:s.venues,registration:n.value,forms:s.forms,modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=U=>c.value=U),data:r.value},null,8,["convention","tickets","accommodations","venues","registration","forms","modelValue","data"])):i.value==="EXTRAS"?(o(),D(Ma,{key:1,value:r.value,extras:s.extras},null,8,["value","extras"])):i.value==="TICKET"?(o(),D(La,{key:2,value:r.value,tickets:s.tickets},null,8,["value","tickets"])):i.value==="INTERESTS"?(o(),D(Na,{key:3,value:r.value,interests:s.interests},null,8,["value","interests"])):i.value==="CHECKBOX"?(o(),T("div",Pn,[r.value?(o(),D(ke,{key:0,icon:"mdi:mdi-check",color:"success"})):(o(),D(ke,{key:1,icon:"mdi:mdi-close",color:"error"}))])):i.value==="AGE"?(o(),D(Ln,{key:5,data:r.value,forms:s.forms,registration:n.value,modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=U=>c.value=U)},null,8,["data","forms","registration","modelValue"])):i.value==="BADGE_IMAGE"?(o(),D(Jt,{key:6,convention:s.convention,registration:n.value,"show-title":!1,"card-class":s.itemClass},null,8,["convention","registration","card-class"])):i.value==="TEXT"?(o(),D(Fn,{key:7,convention:s.convention,data:r.value,forms:s.forms,modelValue:c.value,"onUpdate:modelValue":d[2]||(d[2]=U=>c.value=U),registration:n.value,"onUpdate:registration":d[3]||(d[3]=U=>n.value=U)},null,8,["convention","data","forms","modelValue","registration"])):(o(),T("div",$n,S(r.value),1))}}),Gn={key:0},Yn={key:0},Hn=P("strong",null,"Total:",-1),xn=z({__name:"DataPanelRegistrationGroup",props:{registration:{}},setup(e){const c=se(()=>{const n=[];let i;return e.registration.Leader?i=e.registration:i=e.registration.Primary,n.push({Name:i.User.DisplayName,UUID:i.UserUUID,UserUUID:i.User.UserUUID,IsLeader:!0,Reference:i.Reference,Paid:i.Paid,Total:i.Total}),n.push(...i.Members.map(r=>({Name:r.User.DisplayName,UUID:r.UserUUID,UserUUID:r.User.UserUUID,IsLeader:!1,Reference:r.Reference,Paid:r.Paid,Total:r.Total}))),n});return(n,i)=>n.registration.Members.length===0&&!n.registration.Primary?(o(),T("em",Gn," Not in a group ")):(o(),T(M,{key:1},[P("ul",null,[(o(!0),T(M,null,W(c.value,r=>(o(),T("li",{key:r.UUID,class:"ml-0"},[k(" #"+S(r.Reference)+" : "+S(r.Name)+" ",1),r.IsLeader?(o(),T("strong",Yn,"(Leader)")):N("",!0)]))),128))]),Hn,k(" "+S(c.value.length),1)],64))}}),qn=z({__name:"DataPanelSubmissionDate",props:{registration:{}},setup(e){const c=se(()=>{const n=e.registration.Submissions.find(i=>{var r;return((r=i.Form)==null?void 0:r.Type)===ge.FORM_TYPE_REGISTRATION});return n?n.CreatedAt||"":e.registration.CreatedAt||""});return(n,i)=>(o(),T("div",null,S(_(he)(c.value,{withDay:!1,withYear:!0})),1))}}),Kn={class:"text-grey-lighten-1"},jn=z({__name:"DataPanelSubmissionStatus",props:{convention:{},forms:{},registration:{}},emits:["showForm"],setup(e,{emit:c}){const n=c,i=$e(),r=Et(i,e.convention),f=se(()=>e.registration.Submissions.map(a=>{const s=e.forms.find(d=>d.FormUUID===a.FormUUID);if(s)return{Heading:s.Heading,Form:s,Submission:a,Registration:e.registration}}).filter(a=>!!a)),A=(a,s,d)=>{n("showForm",a,s,d)},u=a=>({ID:0,SubmissionUUID:Se(),FormID:a.ID,FormUUID:a.FormUUID,Form:a,UserID:e.registration.UserID,UserUUID:e.registration.UserUUID,RegistrationID:e.registration.ID,RegistrationUUID:e.registration.RegistrationUUID,Registration:e.registration,Data:[],Status:Da.SUBMISSION_STATUS_NULL});return(a,s)=>(o(),T(M,null,[P("ul",null,[(o(!0),T(M,null,W(a.forms.filter(d=>d.Type===_(ge).FORM_TYPE_ADMIN&&f.value.findIndex(U=>U.Form.ID===d.ID)<0),d=>(o(),T("li",{key:d.Heading},[P("strong",Kn,S(d.Heading),1),_(r)?(o(),D(x,{key:0,class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:U=>A(a.registration,d,u(d))},null,8,["onClick"])):N("",!0)]))),128))]),P("ul",null,[(o(!0),T(M,null,W(f.value,d=>(o(),T("li",{key:d.Heading},[P("strong",null,[k(S(d.Heading),1),d.Form.Type!==_(ge).FORM_TYPE_ADMIN?(o(),T(M,{key:0},[k(": ")],64)):N("",!0)]),d.Form.Type!==_(ge).FORM_TYPE_ADMIN?(o(),T("span",{key:0,class:Je(_(pa)(d.Submission.Status))},S(_(Kt)(d.Submission.Status)),3)):N("",!0),_(r)?(o(),D(x,{key:1,icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:U=>A(d.Registration,d.Form,d.Submission)},null,8,["onClick"])):N("",!0)]))),128))])],64))}}),zn={key:0,class:"text-blue"},Qn={key:1,class:"text-red"},Jn={key:2,class:"text-orange"},Xn={key:3,class:"text-orange"},Wn={key:4,class:"text-orange"},Zn={key:5,class:"text-orange"},eo={key:6,class:"text-green"},to=z({__name:"DataPanelPaymentStatus",props:{registration:{}},setup(e){const c=se(()=>{if(e.registration.Paid===0&&e.registration.Total)return"REQUIRED";if(e.registration.Total>e.registration.Paid)return"ADDITIONAL_REQUIRED";const n=e.registration.Members.find(i=>i.Paid===0&&(i.Total||0)>0);return n?e.registration.Total===0&&n.Total===0?"NOT_REQUIRED":e.registration.Total===0&&n.Total||e.registration.Total>0&&n.Total===0?"MISSING_REQUIRED":e.registration.Paid>=e.registration.Total?"AWAITING_PARTNER":"ALL_REQUIRED":e.registration.Total===0?"NOT_REQUIRED":"COMPLETE"});return(n,i)=>c.value=="NOT_REQUIRED"?(o(),T("div",zn,"No Payment Requested")):c.value=="MISSING_REQUIRED"?(o(),T("div",Qn,"Partner Payment Not Requested")):c.value=="AWAITING_PARTNER"?(o(),T("div",Jn,"Awaiting Partner Payment")):c.value=="ALL_REQUIRED"?(o(),T("div",Xn,"Awaiting Payments")):c.value=="REQUIRED"?(o(),T("div",Wn,"Awaiting Payment")):c.value=="ADDITIONAL_REQUIRED"?(o(),T("div",Zn,"Awaiting Additional Payments")):(o(),T("div",eo,"Completed"))}});var ao=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],lo=function(e){return ao.map(function(c){return c.toLowerCase()}).indexOf(e.toLowerCase())!==-1},no=function(e,c,n){Object.keys(c).filter(lo).forEach(function(i){var r=c[i];typeof r=="function"&&(i==="onInit"?r(e,n):n.on(i.substring(2),function(f){return r(f,n)}))})},oo=function(e,c,n,i){var r=e.modelEvents?e.modelEvents:null,f=Array.isArray(r)?r.join(" "):r;Ue(i,function(A,u){n&&typeof A=="string"&&A!==u&&A!==n.getContent({format:e.outputFormat})&&n.setContent(A)}),n.on(f||"change input undo redo",function(){c.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},io=function(e,c,n,i,r,f){i.setContent(f()),n.attrs["onUpdate:modelValue"]&&oo(c,n,i,r),no(e,n.attrs,i)},da=0,Pa=function(e){var c=Date.now(),n=Math.floor(Math.random()*1e9);return da++,e+"_"+n+da+String(c)},so=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},ma=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},uo=function(e,c){return ma(e).concat(ma(c))},ro=function(e){return e==null},ca=function(){return{listeners:[],scriptId:Pa("tiny-script"),scriptLoaded:!1}},mo=function(){var e=ca(),c=function(r,f,A,u){var a=f.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=r,a.src=A;var s=function(){a.removeEventListener("load",s),u()};a.addEventListener("load",s),f.head&&f.head.appendChild(a)},n=function(r,f,A){e.scriptLoaded?A():(e.listeners.push(A),r.getElementById(e.scriptId)||c(e.scriptId,r,f,function(){e.listeners.forEach(function(u){return u()}),e.scriptLoaded=!0}))},i=function(){e=ca()};return{load:n,reinitialize:i}},co=mo(),vo=function(){return typeof window<"u"?window:global},ze=function(){var e=vo();return e&&e.tinymce?e.tinymce:null},fo={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},Re=function(){return Re=Object.assign||function(e){for(var c,n=1,i=arguments.length;n<i;n++){c=arguments[n];for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r])}return e},Re.apply(this,arguments)},Uo=function(e,c,n,i){return e(i||"div",{id:c,ref:n})},Ao=function(e,c,n){return e("textarea",{id:c,visibility:"hidden",ref:n})},Ft={selector:void 0,target:void 0},To=z({props:fo,setup:function(e,c){var n=e.init?Re(Re({},e.init),Ft):Re({},Ft),i=il(e),r=i.disabled,f=i.modelValue,A=i.tagName,u=E(null),a=null,s=e.id||Pa("tiny-vue"),d=e.init&&e.init.inline||e.inline,U=!!c.attrs["onUpdate:modelValue"],v=!0,m=e.initialValue?e.initialValue:"",y="",V=function(g){return U?function(){return f!=null&&f.value?f.value:""}:function(){return g?m:y}},b=function(){var g=V(v),R=Re(Re({},n),{readonly:e.disabled,target:u.value,plugins:uo(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:d,setup:function(p){a=p,p.on("init",function(Z){return io(Z,e,c,p,f,g)}),typeof n.setup=="function"&&n.setup(p)}});so(u.value)&&(u.value.style.visibility=""),ze().init(R),v=!1};Ue(r,function(g){var R;a!==null&&(typeof((R=a.mode)===null||R===void 0?void 0:R.set)=="function"?a.mode.set(g?"readonly":"design"):a.setMode(g?"readonly":"design"))}),Ue(A,function(g){var R;U||(y=a.getContent()),(R=ze())===null||R===void 0||R.remove(a),At(function(){return b()})}),sl(function(){if(ze()!==null)b();else if(u.value&&u.value.ownerDocument){var g=e.cloudChannel?e.cloudChannel:"6",R=e.apiKey?e.apiKey:"no-api-key",p=ro(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(R,"/tinymce/").concat(g,"/tinymce.min.js"):e.tinymceScriptSrc;co.load(u.value.ownerDocument,p,b)}}),ul(function(){ze()!==null&&ze().remove(a)}),d||(rl(function(){v||b()}),dl(function(){var g;U||(y=a.getContent()),(g=ze())===null||g===void 0||g.remove(a)}));var I=function(g){var R;y=a.getContent(),(R=ze())===null||R===void 0||R.remove(a),n=Re(Re(Re({},n),g),Ft),At(function(){return b()})};return c.expose({rerender:I,getEditor:function(){return a}}),function(){return d?Uo(aa,s,u,e.tagName):Ao(aa,s,u)}}});const go=["colspan"],_o=P("strong",null,"E-Mail Content",-1),Eo=["innerHTML"],po=z({__name:"Communications",props:{expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean,default:!1},registration:{},showEditor:{type:Boolean}},emits:["close-editor"],setup(e,{emit:c}){const n=Te(),i=E([]),r=E({From:"",Subject:"",HTML:""}),f=E(""),A=E(""),u=E(""),a=E(!1),s=E(e.expanded?["1"]:[]),d=E([]),U=E([]),v=E([{key:"CreatedAt",title:"Date"},{key:"Subject",title:"Subject"},{key:"User.DisplayName",title:"Sender"},{key:"Status",title:"Status"}]),m=E([{key:"CreatedAt",order:"asc"}]);Ue(r,g=>{u.value=g.From||u.value||"",A.value=g.Subject||A.value||"",f.value=g.HTML||f.value||""});const y=c,V=()=>{n.getRegistrationEmails(e.registration.RegistrationUUID).then(g=>{g&&(g.forEach(R=>{R.CreatedAt=Tt(new Date(R.CreatedAt||"")),R.Status=on(R.Status),R.User||(R.User={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),U.value=g)})};V(),(()=>{n.getRegistrationEmailTemplates(e.registration.RegistrationUUID).then(g=>{g&&(i.value=g)})})();const I=({callback:g})=>{n.sendRegistrationEmail(e.registration.RegistrationUUID,u.value,A.value,f.value).then(R=>{R?g&&(g("Email Sent"),V(),setTimeout(()=>{a.value=!1},2e3)):g&&g("Not sent")}).catch(()=>{g&&g("Not sent")})};return(g,R)=>(o(),T(M,null,[g.showEditor?(o(),D(me,{key:0,class:"px-0",style:{"max-width":"calc(100vw - 64px)"}},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[t(Ta,{items:i.value,"item-title":"Subject","return-object":"",label:"Template","hide-details":"",modelValue:r.value,"onUpdate:modelValue":R[0]||(R[0]=p=>r.value=p),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12"},{default:l(()=>[t(ne,{modelValue:u.value,"onUpdate:modelValue":R[1]||(R[1]=p=>u.value=p),label:"From",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12"},{default:l(()=>[t(ne,{modelValue:A.value,"onUpdate:modelValue":R[2]||(R[2]=p=>A.value=p),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12"},{default:l(()=>[t(_(To),{modelValue:f.value,"onUpdate:modelValue":R[3]||(R[3]=p=>f.value=p),"api-key":"g9sce3fktcgvk0i7sp96cahgyk4cos7q27es3ubnlal3xf3z"},null,8,["modelValue"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[t(dt,{onClick:R[4]||(R[4]=p=>y("close-editor")),label:"Close E-mail Editor",color:"secondary","prepend-icon":"mdi:mdi-window-close"})]),_:1}),t(O,{class:"text-right"},{default:l(()=>[t(dt,{onClick:I,label:"Send",color:"error"})]),_:1})]),_:1})]),_:1})):N("",!0),U.value.length&&!g.hideHistory?(o(),D(Rt,{key:1,class:"my-2",multiple:!0,modelValue:s.value,"onUpdate:modelValue":R[7]||(R[7]=p=>s.value=p)},{default:l(()=>[t(Ct,{value:"1"},{default:l(()=>[t(St,null,{default:l(()=>[k(" Email History ")]),_:1}),t(It,null,{default:l(()=>[t(Qt,{items:U.value,headers:v.value,"show-expand":!0,"item-value":"EmailUUID",expanded:d.value,"onUpdate:expanded":R[5]||(R[5]=p=>d.value=p),"sort-by":m.value,"onUpdate:sortBy":R[6]||(R[6]=p=>m.value=p)},{"expanded-row":l(({columns:p,item:Z})=>[P("tr",null,[P("td",{colspan:p.length},[_o,P("div",{class:"communicationsViewEmailPreview",innerHTML:Z.HTML},null,8,Eo)],8,go)])]),"footer.prepend":l(()=>[t(x,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:V},{default:l(()=>[k("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):N("",!0)],64))}}),$a=z({__name:"Emails",props:{allowSending:{type:Boolean,default:!0},expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},registration:{},textClass:{default:""}},setup(e){const c=E(!1);return(n,i)=>(o(),T(M,null,[t(Pe,null,{default:l(()=>[n.showTitle?(o(),D(nt,{key:0},{default:l(()=>[t(We,null,{default:l(()=>[k(" E-Mails (#"+S(n.registration.Reference)+" "+S(n.registration.User.DisplayName)+") ",1)]),_:1})]),_:1})):N("",!0),t(Ze,{class:Je(n.textClass)},{default:l(()=>[n.allowSending?(o(),D(Q,{key:0},{default:l(()=>[t(O,{cols:"12"},{default:l(()=>[t(x,{"prepend-icon":"mdi:mdi-email",color:"primary",onClick:i[0]||(i[0]=r=>c.value=!0)},{default:l(()=>[k(" Prepare Email ")]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1},8,["class"])]),_:1}),t(po,{registration:n.registration,expanded:n.expanded,"hide-history":n.hideHistory,"show-editor":c.value,onCloseEditor:i[1]||(i[1]=r=>c.value=!1)},null,8,["registration","expanded","hide-history","show-editor"])],64))}}),Do=z({__name:"EditNoteCategoryDialog",props:J({convention:{},noteCategory:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:noteCategory"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{title:i=""}=n,r=c,f=ae(e,"modelValue"),A=ct(n,r,void 0,void 0,"noteCategory"),u=E(_e(A.value));Ue(A,()=>{u.value=_e(A.value)});const a=()=>{f.value=!1},s=()=>{u.value=_e(A.value)},d=()=>{A.value=u.value};return(U,v)=>(o(),D(we,{modelValue:f.value,"onUpdate:modelValue":v[2]||(v[2]=m=>f.value=m),onReset:s,onSave:d,title:_(i),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0},{default:l(()=>[t(me,{class:"pa-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(ne,{modelValue:u.value.Name,"onUpdate:modelValue":v[0]||(v[0]=m=>u.value.Name=m),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12",sm:"6",md:"4"},{default:l(()=>[t(Sa,{modelValue:u.value.Groups,"onUpdate:modelValue":v[1]||(v[1]=m=>u.value.Groups=m),convention:U.convention,label:"Groups",variant:"outlined","hide-details":""},null,8,["modelValue","convention"])]),_:1})]),_:1})]),_:1})]),actions:l(()=>[t(x,{color:"blue-darken-1",variant:"text",onClick:a},{default:l(()=>[k(" Cancel ")]),_:1}),t(x,{color:"blue-darken-1",variant:"text",onClick:s},{default:l(()=>[k(" Reset ")]),_:1}),t(Fe),t(x,{color:"blue-darken-1",variant:"text",onClick:d},{default:l(()=>[k(" Save ")]),_:1})]),_:1},8,["modelValue","title"]))}}),yo=()=>{const e=E(""),c=()=>{const n={x:window.innerWidth,y:window.innerHeight};n.x<600?e.value="xs":n.x>=600&&n.x<960?e.value="sm":n.x>=960&&n.x<1280?e.value="md":n.x>=1280&&n.x<1920?e.value="lg":n.x>=1920&&n.x<2560?e.value="xl":n.x>=2560&&(e.value="xxl")};return window.addEventListener("resize",c),c(),e},So={style:{"list-style":"none"}},Io=z({__name:"NoteCategories",props:{hideHistory:{type:Boolean},convention:{},showEditor:{type:Boolean}},emits:["close"],setup(e,{emit:c}){const n=Te(),i=c,r=E(!1),f=E(!1),A=E(""),u=E([]),a=E([{key:"Name",title:"Name"},{key:"Groups",title:"Groups"},{key:"actions",title:"",sortable:!1}]),s=yo();E([{key:"CreatedAt",order:"asc"}]);const d=()=>({ID:0,NoteCategoryUUID:Se(),ConventionID:e.convention.ID,ConventionUUID:e.convention.ConventionUUID,Name:"",Groups:[],Notes:[]}),U=E(-1),v=E(d()),m=E(d()),y=()=>{m.value.NoteCategoryUUID=Se(),v.value=Object.assign({},d()),U.value=-1,r.value=!0},V=j=>{U.value=u.value.indexOf(j),v.value=Object.assign({},j),r.value=!0},b=j=>{U.value=u.value.indexOf(j),v.value=Object.assign({},j),f.value=!0},I=()=>{n.deleteNoteCategory(v.value.NoteCategoryUUID).then(j=>{j&&(u.value.splice(U.value,1),R())})},g=()=>{r.value=!1,At(()=>{v.value=Object.assign({},m.value),U.value=-1})},R=()=>{f.value=!1,At(()=>{v.value=Object.assign({},m.value),U.value=-1})},p=()=>{n.saveNoteCategory(v.value).then(j=>{j&&(U.value>-1?Object.assign(u.value[U.value],j):u.value.push(j),g())})};return(()=>{n.getNoteCategories(e.convention.ConventionUUID).then(j=>{j&&(u.value=j)})})(),(j,ue)=>(o(),D(Qt,{headers:a.value,items:u.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[t(Gt,{color:"primary"},Xe({default:l(()=>[t(Va,null,{default:l(()=>[k("Note Categories")]),_:1}),t(Yl,{class:"mx-4 d-none d-sm-inline-flex",inset:!0,vertical:!0}),t(Fe,{class:"d-none d-sm-inline-flex"}),_(s)!="xs"?(o(),D(x,{key:0,dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:y},{default:l(()=>[k(" New Item ")]),_:1})):N("",!0),t(x,{dark:"",class:"mb-2",icon:"mdi:mdi-window-close",onClick:ue[0]||(ue[0]=B=>i("close"))}),t(ka,{modelValue:f.value,"onUpdate:modelValue":ue[1]||(ue[1]=B=>f.value=B),onDelete:I},null,8,["modelValue"])]),_:2},[_(s)=="xs"?{name:"extension",fn:l(()=>[t(Fe),t(x,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:y},{default:l(()=>[k(" New Item ")]),_:1})]),key:"0"}:void 0]),1024),r.value?(o(),D(Do,{key:0,modelValue:r.value,"onUpdate:modelValue":ue[2]||(ue[2]=B=>r.value=B),"note-category":v.value,"onUpdate:noteCategory":[ue[3]||(ue[3]=B=>v.value=B),p],title:A.value,convention:j.convention},null,8,["modelValue","note-category","title","convention"])):N("",!0)]),"item.Groups":l(({item:B})=>[P("ul",So,[(o(!0),T(M,null,W(B.Groups,Y=>(o(),T("li",{key:Y.GroupUUID,class:"py-1"},S(Y.Name),1))),128))])]),"item.actions":l(({item:B})=>[t(ke,{size:"small",class:"me-2",onClick:Y=>V(B)},{default:l(()=>[k(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(ke,{size:"small",onClick:Y=>b(B)},{default:l(()=>[k(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),Co=z({__name:"SelectNoteCategories",props:J({convention:{},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:""},label:{},variant:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:J(["change"],["update:modelValue"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=c,r=E([]),f=Te(),A=E([]),u=E(""),a=E(0),s=se(()=>[...A.value].map(v=>({title:v.Name,value:r.value.find(m=>m.NoteCategoryUUID===v.NoteCategoryUUID)||v})));return typeof e.convention=="object"?u.value=e.convention.ConventionUUID:u.value=e.convention||"",(async()=>{const U=[];u.value&&U.push(f.getNoteCategories(u.value));const v=await Promise.all(U);if(u.value&&v.length==1&&(A.value=v[0].sort((m,y)=>m.Name.localeCompare(y.Name))),Array.isArray(n.value))a.value=2,s.value.forEach(m=>{Array.isArray(n.value)&&n.value.find(V=>V.NoteCategoryUUID===m.value.NoteCategoryUUID)&&r.value.push(m.value)});else if(typeof n.value=="string"){a.value=1;try{const m=JSON.parse(n.value);s.value.forEach(y=>{m.find(b=>b.NoteCategoryUUID===y.value.NoteCategoryUUID)&&r.value.push(y.value)})}catch{}}})(),Ue(r,()=>{switch(a.value){default:case 2:{n.value=r.value,i("change");break}case 1:{n.value=JSON.stringify(r.value),i("change");break}}}),(U,v)=>(o(),D(Ta,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=m=>r.value=m),chips:U.chips,multiple:"",label:U.label||"Tags",variant:U.variant||"solo",hint:U.hint,"persistent-hint":!0,clearable:U.clearable,items:s.value,"item-title":"title","item-value":"value"},null,8,["modelValue","chips","label","variant","hint","clearable","items"]))}}),Ro=z({__name:"EditNoteDialog",props:J({convention:{},note:{},title:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:note","saved"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{title:i=""}=n,r=Te(),f=c,A=ae(e,"modelValue"),u=ct(n,f,void 0,void 0,"note"),a=E(_e(u.value));Ue(u,()=>{a.value=_e(u.value)});const s=()=>{a.value=_e(u.value)},d=U=>{a.value.NoteCategories===null&&(a.value.NoteCategories=[]),a.value.CreatedAt=void 0,a.value.DeletedAt=void 0,a.value.UpdatedAt=void 0,a.value.Admin=void 0,a.value.AdminID=void 0,a.value.AdminUUID=void 0,r.saveNote(a.value).then(v=>{v?(a.value=_e(v),U&&U("Note Saved"),u.value=a.value,f("saved",u.value)):U&&U("Internal Error Saving Note")}).catch(v=>{U&&U("Error Saving Note:"+v.ErrorMessage)})};return(U,v)=>a.value?(o(),D(we,{key:0,"card-class":"pa-4",modelValue:A.value,"onUpdate:modelValue":v[3]||(v[3]=m=>A.value=m),onReset:s,onSave:d,title:_(i),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0,"show-close-action":!0,"show-reset-action":!0,"show-save-action":!0},{default:l(()=>[t(me,{class:"pa-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12"},{default:l(()=>[t(Co,{modelValue:a.value.NoteCategories,"onUpdate:modelValue":v[0]||(v[0]=m=>a.value.NoteCategories=m),convention:U.convention,label:"Categories",variant:"outlined","hide-details":"",chips:!0},null,8,["modelValue","convention"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12"},{default:l(()=>[t(ne,{modelValue:a.value.Subject,"onUpdate:modelValue":v[1]||(v[1]=m=>a.value.Subject=m),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12"},{default:l(()=>[t(Oa,{modelValue:a.value.Description,"onUpdate:modelValue":v[2]||(v[2]=m=>a.value.Description=m),label:"Note",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])):N("",!0)}}),Ba=z({__name:"Notes",props:{allowAdding:{type:Boolean,default:!0},cardClass:{default:""},convention:{},expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean},registration:{},showControlPanel:{type:Boolean,default:!0},showEditor:{type:Boolean},showTitle:{type:Boolean,default:!0},textClass:{default:""}},setup(e){const c=Te(),n=()=>({ID:0,NoteUUID:Se(),Description:"",NoteCategories:[],Registration:e.registration,RegistrationID:e.registration.ID,RegistrationUUID:e.registration.RegistrationUUID,Subject:""}),i=E(!1),r=E(!1),f=E([]),A=E([]),u=E(n()),a=()=>{u.value=n(),i.value=!0},s=v=>{u.value=v,i.value=!0},d=()=>{c.getRegistrationNotes(e.registration.RegistrationUUID).then(v=>{v&&(v.forEach(m=>{m.CreatedAt=Tt(new Date(m.CreatedAt||"")),m.Admin||(m.Admin={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),f.value=v,e.expanded&&(A.value=v.map(m=>m.NoteUUID)))})},U=()=>{d(),setTimeout(()=>{i.value=!1},2e3)};return d(),(v,m)=>(o(),T(M,null,[t(Pe,{class:Je(v.cardClass)},{default:l(()=>[t(nt,null,{default:l(()=>[t(We,null,{default:l(()=>[t(Q,{class:"flex-row-reverse"},{default:l(()=>[v.showControlPanel?(o(),D(O,{key:0,class:"text-right flex-shrink-1 flex-grow-0",style:{"flex-grow":"0 !important"}},{default:l(()=>[t(x,{class:"d-sm-none",size:"xs",icon:"mdi:mdi-cog",variant:"text",color:"warning",onClick:m[0]||(m[0]=y=>r.value=!0)}),t(x,{class:"d-none d-sm-inline-flex","prepend-icon":"mdi:mdi-cog",variant:"text",color:"warning",onClick:m[1]||(m[1]=y=>r.value=!0)},{default:l(()=>[k("Categories")]),_:1})]),_:1})):N("",!0),v.showTitle?(o(),D(O,{key:1,class:"text-wrap flex-grow-1"},{default:l(()=>[k(" Notes (#"+S(v.registration.Reference)+" "+S(v.registration.User.DisplayName)+") ",1)]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1}),t(Ze,{class:Je(v.textClass)},{default:l(()=>[f.value.length===0?(o(),T(M,{key:0},[k(" No Notes Recorded ")],64)):(o(),D(Rt,{key:1,multiple:!0,variant:"accordion",modelValue:A.value,"onUpdate:modelValue":m[2]||(m[2]=y=>A.value=y)},{default:l(()=>[(o(!0),T(M,null,W(f.value,y=>(o(),D(Ct,{key:`${y.NoteUUID}.${y.UpdatedAt}`,value:y.NoteUUID},{default:l(()=>[t(St,{class:"py-0"},{default:l(()=>[k(S(y.Subject)+" ",1),t(Hl,{class:"ml-4"},{default:l(()=>[y.NoteCategories.length===0?(o(),D(Yt,{key:0},{default:l(()=>[k(" Global ")]),_:1})):N("",!0),(o(!0),T(M,null,W(y.NoteCategories,V=>(o(),D(Yt,{key:V.NoteCategoryUUID},{default:l(()=>[k(S(V.Name),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(It,null,{default:l(()=>[t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[k(S(y.Description),1)]),_:2},1024)]),_:2},1024),t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[k(S(_(he)(y.UpdatedAt||""))+" ",1),y&&y.Admin&&y.Admin.DisplayName?(o(),T(M,{key:0},[k(" - "+S(y.Admin.DisplayName),1)],64)):N("",!0)]),_:2},1024),t(O,{class:"text-right"},{default:l(()=>[t(x,{color:"primary","prepend-icon":"mdi:mdi-pencil",onClick:V=>s(y)},{default:l(()=>[k("Edit")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["class"]),v.allowAdding?(o(),D(jt,{key:0},{default:l(()=>[t(x,{color:"primary",variant:"flat",onClick:a},{default:l(()=>[k("Add Note")]),_:1})]),_:1})):N("",!0)]),_:1},8,["class"]),t(_t,{modelValue:i.value,"onUpdate:modelValue":m[5]||(m[5]=y=>i.value=y),title:"Create Note"},{default:l(()=>[t(Ro,{modelValue:i.value,"onUpdate:modelValue":m[3]||(m[3]=y=>i.value=y),note:u.value,"onUpdate:note":m[4]||(m[4]=y=>u.value=y),convention:v.convention,title:"Create Note",onSaved:U},null,8,["modelValue","note","convention"])]),_:1},8,["modelValue"]),t(_t,{modelValue:r.value,"onUpdate:modelValue":m[7]||(m[7]=y=>r.value=y),title:"Note Configuration"},{default:l(()=>[t(Io,{convention:v.convention,onClose:m[6]||(m[6]=y=>r.value=!1)},null,8,["convention"])]),_:1},8,["modelValue"])],64))}}),ho=z({__name:"StripeRefundPayment",props:J({paymentTransaction:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["refunded"],["update:modelValue"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=c,r=Te(),f=E(!1),A=E("");let u=0;if(e.paymentTransaction.Data&&e.paymentTransaction.Data.PaymentIntent&&typeof e.paymentTransaction.Data.PaymentIntent=="object"){const m=e.paymentTransaction.Data.PaymentIntent;m&&(u=m.amount)}const a=E({Amount:u/100,Description:"",Reason:""}),s=E([{title:"Duplicate",value:"duplicate"},{title:"Fraudulent",value:"fraudulent"},{title:"Requested By Customer",value:"requested_by_customer"}]),d=E(!1);async function U(m){m.preventDefault(),d.value=!0,r.refundStripePayment(e.paymentTransaction.PaymentTransactionUUID,a.value).then(y=>{y?i("refunded",y):v("An unexpected error occurred.")}).catch(y=>{v("An error occurred processing the refund: "+y.toString())}),d.value=!1}const v=m=>{A.value=m,f.value=!0};return(m,y)=>(o(),D(we,{modelValue:n.value,"onUpdate:modelValue":y[7]||(y[7]=V=>n.value=V),title:"Refund a Stripe Payment",color:"blue-darken-4",persistent:""},{default:l(()=>[t(me,{class:"pa-0"},{default:l(()=>[t(xl,{ref:"refundForm",id:"refund-form",onSubmit:y[4]||(y[4]=Pt(V=>U(V),["prevent"]))},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:l(()=>[t(ne,{modelValue:a.value.Amount,"onUpdate:modelValue":y[0]||(y[0]=V=>a.value.Amount=V),modelModifiers:{number:!0},label:"Amount",prefix:"£",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12",sm:"6",md:"8",lg:"9",xl:"10"},{default:l(()=>[t(ve,{modelValue:a.value.Reason,"onUpdate:modelValue":y[1]||(y[1]=V=>a.value.Reason=V),modelModifiers:{number:!0},items:s.value,"item-title":"title","item-value":"value",label:"Stripe Refund Reason",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(O,{cols:"12"},{default:l(()=>[t(ne,{modelValue:a.value.Description,"onUpdate:modelValue":y[2]||(y[2]=V=>a.value.Description=V),modelModifiers:{number:!0},label:"Refund Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:l(()=>[t(x,{color:"error",class:"w-100",onClick:y[3]||(y[3]=V=>n.value=!1)},{default:l(()=>[k("Cancel")]),_:1})]),_:1}),t(Fe),t(O,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:l(()=>[t(x,{type:"submit",color:"success",class:"w-100"},Xe({default:l(()=>[k(" Issue Refund ")]),_:2},[d.value?{name:"prepend",fn:l(()=>[t(Ea,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),t(ya,{modelValue:f.value,"onUpdate:modelValue":y[6]||(y[6]=V=>f.value=V)},{actions:l(()=>[t(x,{variant:"text",onClick:y[5]||(y[5]=V=>f.value=!1)},{default:l(()=>[k(" Close ")]),_:1})]),default:l(()=>[k(S(A.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),ko=["colspan"],Vo=P("strong",null,"Details",-1),Oo=["innerHTML"],Ga=z({__name:"PaymentTransactions",props:{canEdit:{type:Boolean},expanded:{type:Boolean},hideHistory:{type:Boolean},updated:{},registration:{},showEditor:{type:Boolean}},emits:["close-editor","change"],setup(e,{emit:c}){const n=e;let{expanded:i=!0,hideHistory:r=!1,registration:f,showEditor:A}=n;const u=Te(),a=E([]),s=E(i?["1"]:[]),d=E([]),U=E([{key:"CreatedAt",title:"Date"},{key:"Type",title:"Type"},{key:"Source",title:"Source"},{key:"Description",title:"Description"},{key:"Admin",title:"Admin"},{key:"Amount",title:"Amount"},{key:"Controls",title:""}]),v=E(!1),m=E(),y=E(!1),V=E(""),b=E([{key:"CreatedAt",order:"asc"}]),I=c,g=()=>({PaymentTransactionUUID:Se(),Amount:0,Data:{},Description:"",ID:0,RegistrationID:f.ID,RegistrationUUID:f.RegistrationUUID,Source:na.PAYMENT_TRANSACTION_SOURCE_NULL,Type:$t.PAYMENT_TRANSACTION_TYPE_NULL}),R=E(g()),{convertTransactions:p,getPaymentTransactionsDisplay:Z}=_a();Ue(n,()=>{r=n.hideHistory,f=n.registration,A=n.showEditor,Z(f.RegistrationUUID).then(G=>{d.value=G})});const j=()=>{Z(f.RegistrationUUID).then(G=>{d.value=G})};j();const ue=()=>{u.saveRegistrationPaymentTransaction(R.value).then(G=>{G&&(p(G.PaymentTransactions),R.value=g(),I("close-editor"),I("change"))})},B=G=>{const $=d.value.find(w=>w.PaymentTransactionUUID===G);$&&(m.value=$.PaymentTransaction,v.value=!0)},Y=G=>{if(G)try{d.value=p(G.PaymentTransactions),m.value=void 0,v.value=!1,V.value="Refund Processed",y.value=!0,I("change")}catch($){console.error($)}};return(G,$)=>(o(),T(M,null,[_(A)?(o(),T(M,{key:0},[t(We,null,{default:l(()=>[k(" Add Transaction ")]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ve,{items:_(pl),"item-title":"title","item-value":"value",label:"Transaction Type",clearable:!0,"hide-details":"",modelValue:R.value.Type,"onUpdate:modelValue":$[0]||($[0]=w=>R.value.Type=w),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ve,{items:_(Dl),"item-title":"title","item-value":"value",label:"Source",clearable:!0,"hide-details":"",modelValue:R.value.Source,"onUpdate:modelValue":$[1]||($[1]=w=>R.value.Source=w),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"8",md:"10"},{default:l(()=>[t(ne,{label:"Description","hide-details":"",modelValue:R.value.Description,"onUpdate:modelValue":$[2]||($[2]=w=>R.value.Description=w),variant:"outlined"},null,8,["modelValue"])]),_:1}),t(O,{cols:"12",sm:"4",md:"2"},{default:l(()=>[t(ne,{label:"Amount","prepend-inner-icon":"mdi:mdi-currency-gbp","hide-details":"",modelValue:R.value.Amount,"onUpdate:modelValue":$[3]||($[3]=w=>R.value.Amount=w),modelModifiers:{number:!0},variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"3",md:"2",lg:"1"},{default:l(()=>[t(x,{class:"w-100",onClick:$[4]||($[4]=w=>I("close-editor")),color:"warning"},{default:l(()=>[k("Cancel")]),_:1})]),_:1}),t(Fe),t(O,{cols:"12",sm:"6",md:"3",lg:"2",xl:"2"},{default:l(()=>[t(x,{class:"w-100",onClick:ue,color:"primary"},{default:l(()=>[k("Submit Transaction")]),_:1})]),_:1})]),_:1})],64)):N("",!0),d.value.length&&!_(r)?(o(),D(Rt,{key:1,class:"my-2",modelValue:s.value,"onUpdate:modelValue":$[10]||($[10]=w=>s.value=w)},{default:l(()=>[t(Ct,{value:"1"},{default:l(()=>[t(St,null,{default:l(()=>[k(" Transaction History ")]),_:1}),t(It,null,{default:l(()=>[t(Qt,{items:d.value,headers:U.value,"show-expand":!1,"item-value":"PaymentTransactionUUID",expanded:a.value,"onUpdate:expanded":$[5]||($[5]=w=>a.value=w),"sort-by":b.value,"onUpdate:sortBy":$[6]||($[6]=w=>b.value=w),class:"transactionTable"},{"item.Controls":l(({item:w})=>[G.canEdit&&w.PaymentTransaction&&w.PaymentTransaction.Source===_(na).PAYMENT_TRANSACTION_SOURCE_STRIPE&&w.PaymentTransaction.Type===_($t).PAYMENT_TRANSACTION_TYPE_PAYMENT?(o(),D(x,{key:0,icon:"mdi:mdi-credit-card-refund",variant:"text",size:"xs",onClick:ee=>B(w.PaymentTransactionUUID)},null,8,["onClick"])):N("",!0)]),"expanded-row":l(({columns:w,item:ee})=>[P("tr",null,[P("td",{colspan:w.length},[Vo,P("div",{innerHTML:ee.Data},null,8,Oo)],8,ko)])]),"footer.prepend":l(()=>[t(x,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:j},{default:l(()=>[k("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"]),v.value&&m.value?(o(),D(ho,{key:0,modelValue:v.value,"onUpdate:modelValue":$[7]||($[7]=w=>v.value=w),"payment-transaction":m.value,onRefunded:Y},null,8,["modelValue","payment-transaction"])):N("",!0),t(ya,{modelValue:y.value,"onUpdate:modelValue":$[9]||($[9]=w=>y.value=w)},{actions:l(()=>[t(x,{variant:"text",onClick:$[8]||($[8]=w=>y.value=!1)},{default:l(()=>[k(" Close ")]),_:1})]),default:l(()=>[k(S(V.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):N("",!0)],64))}}),bo=z({__name:"DataPanelRegistrationTags",props:J({registration:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=ae(e,"modelValue"),n=se(()=>{if(!c.value.Meta.Tags||!Array.isArray(c.value.Meta.Tags))return e.registration.Tags;const r=c.value.Meta.Tags;return r.length===0?e.registration.Tags:e.registration.Tags.filter(f=>r.includes(f.TagUUID))}),i=se(()=>c.value.Meta.TagColour?c.value.Meta.TagColour:"");return(r,f)=>(o(!0),T(M,null,W(n.value,A=>(o(),D(Yt,{key:A.TagUUID,color:i.value,class:"ma-1"},{default:l(()=>[k(S(A.Title),1)]),_:2},1032,["color"]))),128))}}),Mo=mt(bo,[["__scopeId","data-v-644b07d0"]]),No=P("span",{class:"font-weight-bold pr-2"},"Status:",-1),Lo={key:0,class:"text-green-darken-2"},wo={key:1,class:"text-yellow-darken-4"},Fo={key:2,class:"text-red-darken-4"},Po=P("br",null,null,-1),$o=P("span",{class:"font-weight-bold pr-2"},"Status:",-1),Bo={key:0,class:"text-green-darken-2"},Go={key:1,class:"text-yellow-darken-4"},Yo={key:2,class:"text-red-darken-4"},Ho=P("span",null,"Not Checked In",-1),Ht=z({__name:"DataPanelCheckIn",props:J({convention:{},showControls:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=ae(e,"modelValue"),n=Te(),i=$e(),r=Fa(i,e.convention),f=E([]),A=E(!1),u=E(!1),a=E(Ee.CHECK_IN_STATUS_PENDING),s=E(""),d=V=>{A.value=!0,a.value=V},U=()=>{v()},v=()=>{n.getCheckInHistory(c.value.RegistrationUUID).then(V=>{V&&(f.value=V,u.value=!0,V.length&&(c.value.CheckIn=V[0]))}).catch(()=>{})},m=V=>{n.saveCheckIn(c.value.RegistrationUUID,a.value,s.value).then(b=>{b?(c.value.CheckIn=b,V&&(V("Check In Saved"),setTimeout(()=>{A.value=!1},500))):V&&V("Check In Failed")}).catch(()=>{V&&V("Check In Failed")})},y=se(()=>{switch(a.value){case Ee.CHECK_IN_STATUS_REVOKED:return"yellow-darken-4";case Ee.CHECK_IN_STATUS_REJECTED:return"red-darken-4";case Ee.CHECK_IN_STATUS_COMPLETED:return"green-darken-2"}return""});return(V,b)=>(o(),T(M,null,[V.showControls&&_(r)?(o(),D(me,{key:0,class:"px-0"},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[t(x,{color:"error",class:"w-100","prepend-icon":"mdi:mdi-window-close",onClick:b[0]||(b[0]=I=>d(_(Ee).CHECK_IN_STATUS_REJECTED))},{default:l(()=>[k(" Reject ")]),_:1})]),_:1}),t(O,null,{default:l(()=>[t(x,{color:"warning",class:"w-100","prepend-icon":"mdi:mdi-window-close",onClick:b[1]||(b[1]=I=>d(_(Ee).CHECK_IN_STATUS_REVOKED))},{default:l(()=>[k(" Revoke ")]),_:1})]),_:1}),t(O,null,{default:l(()=>[t(x,{color:"success",class:"w-100","prepend-icon":"mdi:mdi-check",onClick:b[2]||(b[2]=I=>d(_(Ee).CHECK_IN_STATUS_COMPLETED))},{default:l(()=>[k(" Approve ")]),_:1})]),_:1})]),_:1}),t(we,{modelValue:A.value,"onUpdate:modelValue":b[4]||(b[4]=I=>A.value=I),color:y.value,fullscreen:!1,"hide-extension":!0,persistent:!1,scrollable:!1,"show-close-action":!0,"show-save-action":!0,"save-button-label":"Confirm",title:`${_(je)(a.value)} Check-In`,onSave:m},{default:l(()=>[t(Oa,{modelValue:s.value,"onUpdate:modelValue":b[3]||(b[3]=I=>s.value=I),label:"Notes",variant:"outlined"},null,8,["modelValue"])]),_:1},8,["modelValue","color","title"])]),_:1})):N("",!0),c.value.CheckIn?(o(),D(me,{key:1,class:"px-0"},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[No,c.value.CheckIn.Status===_(Ee).CHECK_IN_STATUS_COMPLETED?(o(),T("span",Lo,S(_(je)(c.value.CheckIn.Status)),1)):c.value.CheckIn.Status===_(Ee).CHECK_IN_STATUS_REVOKED?(o(),T("span",wo,S(_(je)(c.value.CheckIn.Status)),1)):c.value.CheckIn.Status===_(Ee).CHECK_IN_STATUS_REJECTED?(o(),T("span",Fo,S(_(je)(c.value.CheckIn.Status)),1)):N("",!0),Po,t(x,{style:{"font-size":"0.75rem","text-transform":"none"},"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"text",onClick:U},{default:l(()=>[k("History")]),_:1})]),_:1}),t(O,{class:"text-right"},{default:l(()=>{var I;return[P("small",null,S((I=c.value.CheckIn.Admin)==null?void 0:I.DisplayName)+" "+S(_(Tt)(c.value.CheckIn.CreatedAt||"")),1)]}),_:1})]),_:1}),t(we,{modelValue:u.value,"onUpdate:modelValue":b[5]||(b[5]=I=>u.value=I),fullscreen:!1,"hide-extension":!0,persistent:!1,scrollable:!0,"show-close-action":!0,"show-save-action":!1,title:"Check-In History"},{default:l(()=>[t(Le,null,{default:l(()=>[(o(!0),T(M,null,W(f.value,I=>(o(),D(Ve,{key:I.CheckInUUID},{default:l(()=>[t(gt,null,{default:l(()=>[t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[$o,I.Status===_(Ee).CHECK_IN_STATUS_COMPLETED?(o(),T("span",Bo,S(_(je)(I.Status)),1)):I.Status===_(Ee).CHECK_IN_STATUS_REVOKED?(o(),T("span",Go,S(_(je)(I.Status)),1)):I.Status===_(Ee).CHECK_IN_STATUS_REJECTED?(o(),T("span",Yo,S(_(je)(I.Status)),1)):N("",!0)]),_:2},1024),t(O,{class:"text-right"},{default:l(()=>{var g;return[P("small",null,S((g=I.Admin)==null?void 0:g.DisplayName)+" "+S(_(Tt)(I.CreatedAt||"")),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),I.Details?(o(),D(Sl,{key:0},{default:l(()=>[k(S(I.Details),1)]),_:2},1024)):N("",!0)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})):(o(),D(me,{key:2,class:"px-0"},{default:l(()=>[Ho]),_:1}))],64))}}),xo=z({__name:"MetaDataItem",props:J({accommodations:{},convention:{},forms:{},interests:{},itemClass:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{},registration:{required:!0},registrationModifiers:{}}),emits:J(["openActions","showForm"],["update:modelValue","update:registration"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=ae(e,"registration"),r=c,f=u=>{r("openActions",u)},A=(u,a,s)=>{r("showForm",u,a,s)};return(u,a)=>n.value.MetaField===_(H).META_DATA_SOURCE_ACCOMMODATION_ALLOCATION?(o(),D(wa,{key:0,convention:u.convention,tickets:u.tickets,accommodations:u.accommodations,venues:u.venues,registration:i.value,forms:u.forms,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),data:""},null,8,["convention","tickets","accommodations","venues","registration","forms","modelValue"])):n.value.MetaField===_(H).META_DATA_SOURCE_BADGE_DISPLAY?(o(),D(Jt,{key:1,"card-class":u.itemClass,convention:u.convention,registration:i.value,"show-title":!1,"hide-download":n.value.Meta.HideDownloadButton,"hide-nfc":n.value.Meta.HideNFCButton},null,8,["card-class","convention","registration","hide-download","hide-nfc"])):n.value.MetaField===_(H).META_DATA_SOURCE_EMAILS?(o(),D($a,{key:2,"allow-sending":!1,expanded:!1,"show-title":!1,registration:i.value,"text-class":"pa-0 ma-0"},null,8,["registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_NOTES?(o(),D(Ba,{key:3,"allow-adding":!0,"card-class":u.itemClass,convention:u.convention,expanded:!1,registration:i.value,"show-control-panel":!1,"show-title":!1,"text-class":"pa-0 ma-0"},null,8,["card-class","convention","registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_PAYMENT_STATUS?(o(),D(to,{key:4,registration:i.value},null,8,["registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_PAYMENTS?(o(),D(Ga,{key:5,registration:i.value,expanded:!1},null,8,["registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_REGISTRATION_ACTIONS?(o(),D(x,{key:6,icon:"mdi:mdi-briefcase",variant:"flat",onClick:a[1]||(a[1]=s=>f(i.value))})):n.value.MetaField===_(H).META_DATA_SOURCE_SUBMISSION_STATUS||n.value.MetaField===_(H).META_DATA_SOURCE_ACCOMMODATION_FORM||n.value.MetaField===_(H).META_DATA_SOURCE_ADMIN_FORM||n.value.MetaField===_(H).META_DATA_SOURCE_DEALER_FORM||n.value.MetaField===_(H).META_DATA_SOURCE_BADGE_FORM||n.value.MetaField===_(H).META_DATA_SOURCE_REGISTRATION_FORM?(o(),D(jn,{key:7,convention:u.convention,forms:u.forms,registration:i.value,onShowForm:A},null,8,["convention","forms","registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_REGISTRATION_GROUP?(o(),D(xn,{key:8,registration:i.value},null,8,["registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_REGISTRATION_REFERENCE?(o(),T(M,{key:9},[k(S(i.value.Reference),1)],64)):n.value.MetaField===_(H).META_DATA_SOURCE_SUBMISSION_DATE?(o(),D(qn,{key:10,registration:i.value},null,8,["registration"])):n.value.MetaField===_(H).META_DATA_SOURCE_TAGS?(o(),D(Mo,{key:11,registration:i.value,modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value=s)},null,8,["registration","modelValue"])):n.value.MetaField===_(H).META_DATA_SOURCE_CHECKIN_CONTROL?(o(),D(Ht,{key:12,convention:u.convention,"show-controls":!0,modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=s=>i.value=s)},null,8,["convention","modelValue"])):n.value.MetaField===_(H).META_DATA_SOURCE_CHECKIN_STATUS?(o(),D(Ht,{key:13,convention:u.convention,"show-controls":!1,modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=s=>i.value=s)},null,8,["convention","modelValue"])):(o(),T(M,{key:14},[k(" Unhandled Meta Item "+S(n.value),1)],64))}}),qo=z({__name:"UserDataItem",props:J({accommodations:{},convention:{},forms:{},interests:{},itemClass:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{},registration:{required:!0},registrationModifiers:{}}),emits:["update:modelValue","update:registration"],setup(e){const c=ae(e,"modelValue"),n=ae(e,"registration"),i=yt(),r=se(()=>i.GetProfileImageURL(n.value.UserUUID));return(f,A)=>c.value.UserField===_(ie).USER_DATA_SOURCE_TELEGRAM&&n.value.User.Handle?(o(),T(M,{key:0},[k(" @"+S(n.value.User.Handle),1)],64)):c.value.UserField===_(ie).USER_DATA_SOURCE_AVATAR?(o(),D(zt,{key:1,class:"rounded-circle",src:r.value,height:"32",width:"32"},null,8,["src"])):c.value.UserField===_(ie).USER_DATA_SOURCE_DATE_OF_BIRTH?(o(),T(M,{key:2},[k(S(_(he)(n.value.User.Additional.DOB,{withYear:!0,withDay:!1})),1)],64)):c.value.UserField===_(ie).USER_DATA_SOURCE_EMAIL?(o(),T(M,{key:3},[k(S(n.value.User.Additional.Email),1)],64)):c.value.UserField===_(ie).USER_DATA_SOURCE_FIRST_NAME?(o(),T(M,{key:4},[k(S(n.value.User.Additional.FirstName),1)],64)):c.value.UserField===_(ie).USER_DATA_SOURCE_LAST_NAME?(o(),T(M,{key:5},[k(S(n.value.User.Additional.LastName),1)],64)):(o(),T(M,{key:6},[k(" Unhandled User Field "+S(c.value),1)],64))}}),va=z({__name:"PanelItem",props:J({accommodations:{},convention:{},extras:{},forms:{},interests:{},itemClass:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{},registration:{required:!0},registrationModifiers:{}}),emits:J(["openActions","showForm"],["update:modelValue","update:registration"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=ae(e,"registration"),r=c,f=u=>{r("openActions",u)},A=(u,a,s)=>{r("showForm",u,a,s)};return(u,a)=>n.value.SourceType===_(Ne).LAYOUT_ITEM_SOURCE_FORM?(o(),D(Bn,{key:0,accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,"item-class":u.itemClass,tickets:u.tickets,venues:u.venues,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),registration:i.value,"onUpdate:registration":a[1]||(a[1]=s=>i.value=s)},null,8,["accommodations","convention","extras","forms","interests","item-class","tickets","venues","modelValue","registration"])):n.value.SourceType===_(Ne).LAYOUT_ITEM_SOURCE_META?(o(),D(xo,{key:1,accommodations:u.accommodations,convention:u.convention,forms:u.forms,interests:u.interests,"item-class":u.itemClass,tickets:u.tickets,venues:u.venues,modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value=s),registration:i.value,"onUpdate:registration":a[3]||(a[3]=s=>i.value=s),onOpenActions:f,onShowForm:A},null,8,["accommodations","convention","forms","interests","item-class","tickets","venues","modelValue","registration"])):n.value.SourceType===_(Ne).LAYOUT_ITEM_SOURCE_USER?(o(),D(qo,{key:2,accommodations:u.accommodations,convention:u.convention,forms:u.forms,interests:u.interests,"item-class":u.itemClass,tickets:u.tickets,venues:u.venues,modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=s=>n.value=s),registration:i.value,"onUpdate:registration":a[5]||(a[5]=s=>i.value=s)},null,8,["accommodations","convention","forms","interests","item-class","tickets","venues","modelValue","registration"])):N("",!0)}}),Ko=["onClick"],jo=["onClick"],zo=z({__name:"PanelLayout",props:J({accommodations:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{}},{layout:{required:!0},layoutModifiers:{},modelValue:{required:!0},modelModifiers:{}}),emits:J(["openActions","showForm"],["update:layout","update:modelValue"]),setup(e,{emit:c}){const n=ml(),i=c,r=ae(e,"layout"),f=ae(e,"modelValue"),A=E({});r.value.Panels.forEach(U=>{A.value[U.LayoutPanelUUID]=!1});const u=U=>{i("openActions",U)},a=(U,v,m)=>{i("showForm",U,v,m)},s=U=>{switch(U.PanelStyle){case ye.PANEL_STYLE_NAV_BOTTOM:return"bottom";case ye.PANEL_STYLE_NAV_LEFT:return"left";case ye.PANEL_STYLE_NAV_RIGHT:return"right";case ye.PANEL_STYLE_NAV_TOP:return"top"}},d=(U,v=!1)=>{switch(U.PanelStyle){case ye.PANEL_STYLE_NAV_BOTTOM:return v?"mdi:mdi-chevron-double-down":"mdi:mdi-chevron-double-up";case ye.PANEL_STYLE_NAV_LEFT:return v?"mdi:mdi-chevron-double-left":"mdi:mdi-chevron-double-right";case ye.PANEL_STYLE_NAV_RIGHT:return v?"mdi:mdi-chevron-double-right":"mdi:mdi-chevron-double-left";case ye.PANEL_STYLE_NAV_TOP:return v?"mdi:mdi-chevron-double-up":"mdi:mdi-chevron-double-down"}};return(U,v)=>(o(),T(M,null,[(o(!0),T(M,null,W(r.value.Panels,m=>(o(),T(M,{key:m.LayoutPanelUUID},[s(m)!==void 0?(o(),D(ql,{key:0,permanent:!0,location:s(m),border:_(n).smAndDown.value?1:0,rail:_(n).smAndDown.value&&!A.value[m.LayoutPanelUUID],"rail-width":"30",width:_(n).smAndDown.value?"100%":256,app:""},{default:l(()=>[_(n).smAndDown.value&&!A.value[m.LayoutPanelUUID]?(o(),T("h3",{key:0,class:Je(`bg-secondary fill-height ${s(m)==="top"||s(m)==="bottom"?"px-3 text-right":"py-3 text-left"}`),style:{cursor:"pointer"},onClick:y=>A.value[m.LayoutPanelUUID]=!0},[t(ke,{icon:d(m,!1)},null,8,["icon"])],10,Ko)):(o(),T(M,{key:1},[P("h3",{class:"bg-secondary pa-3 d-flex",style:la(_(n).smAndDown.value?"cursor: pointer;":""),onClick:y=>A.value[m.LayoutPanelUUID]=!1},[k(S(m.Name)+" ",1),_(n).smAndDown.value?(o(),T(M,{key:0},[t(Fe),t(x,{icon:d(m,!0),variant:"plain",size:"sm"},null,8,["icon"])],64)):N("",!0)],12,jo),t(Le,{class:"bg-panel overflow-y-auto",style:{height:"calc(100vh - 116px)"}},{default:l(()=>[(o(!0),T(M,null,W(m.Items,(y,V)=>(o(),D(Ve,{key:y.LayoutItemUUID},{default:l(()=>[m.Items.length>1?(o(),D(gt,{key:0,class:"font-weight-bold"},{default:l(()=>[k(S(y.Label),1)]),_:2},1024)):N("",!0),t(va,{accommodations:U.accommodations,convention:U.convention,extras:U.extras,forms:U.forms,interests:U.interests,"item-class":"bg-panel border-0",tickets:U.tickets,venues:U.venues,modelValue:m.Items[V],"onUpdate:modelValue":b=>m.Items[V]=b,registration:f.value,onOpenActions:u,onShowForm:a},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","modelValue","onUpdate:modelValue","registration"])]),_:2},1024))),128))]),_:2},1024)],64))]),_:2},1032,["location","border","rail","width"])):N("",!0)],64))),128)),t(Kl,{class:"py-0"},{default:l(()=>[t(me,null,{default:l(()=>[t(Q,null,{default:l(()=>[(o(!0),T(M,null,W(r.value.Panels,m=>{var y,V,b,I,g,R;return o(),T(M,{key:m.LayoutPanelUUID},[m.PanelStyle===_(ye).PANEL_STYLE_FLEX?(o(),D(O,{key:0,cols:((y=m.Meta.cols)==null?void 0:y.toString())||!1,xs:((V=m.Meta.cols_xs)==null?void 0:V.toString())||!1,sm:((b=m.Meta.cols_sm)==null?void 0:b.toString())||!1,md:((I=m.Meta.cols_md)==null?void 0:I.toString())||!1,lg:((g=m.Meta.cols_lg)==null?void 0:g.toString())||!1,xl:((R=m.Meta.cols_xl)==null?void 0:R.toString())||!1,class:"pa-0 pa-sm-2"},{default:l(()=>[t(me,{class:"bg-panel",style:la(_(n).smAndUp.value?"border-radius: 15px;":"")},{default:l(()=>[P("h3",null,S(m.Name),1),t(Le,{class:"bg-panel"},{default:l(()=>[(o(!0),T(M,null,W(m.Items,(p,Z)=>(o(),D(Ve,{key:p.LayoutItemUUID,class:"px-0"},{default:l(()=>[m.Items.length>1?(o(),D(gt,{key:0,class:"font-weight-bold"},{default:l(()=>[k(S(p.Label),1)]),_:2},1024)):N("",!0),t(va,{accommodations:U.accommodations,convention:U.convention,extras:U.extras,forms:U.forms,interests:U.interests,"item-class":"bg-panel border-0",tickets:U.tickets,venues:U.venues,modelValue:m.Items[Z],"onUpdate:modelValue":j=>m.Items[Z]=j,registration:f.value,"onUpdate:registration":v[0]||(v[0]=j=>f.value=j),onOpenActions:u,onShowForm:a},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","modelValue","onUpdate:modelValue","registration"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["style"])]),_:2},1032,["cols","xs","sm","md","lg","xl"])):N("",!0)],64)}),128))]),_:1})]),_:1})]),_:1})],64))}}),Qo=z({__name:"DataTableItemPanel",props:J({accommodations:{},cardClass:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:J(["openActions","showForm"],["update:modelValue"]),setup(e,{emit:c}){const n=E(),i=E(!1),r=s=>{n.value=s,i.value=!0},f=c,A=ae(e,"modelValue"),u=s=>{f("openActions",s)},a=(s,d,U)=>{f("showForm",s,d,U)};return(s,d)=>(o(),T("div",null,[s.layouts?(o(),D(Le,{key:0},{default:l(()=>[(o(!0),T(M,null,W(s.layouts,U=>(o(),D(Ve,{key:U.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:l(()=>[t(gt,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:l(()=>[t(x,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:v=>r(U)},{default:l(()=>[k(S(U.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):N("",!0),i.value&&n.value?(o(),D(we,{key:1,modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=U=>i.value=U),"hide-extension":!0,fullscreen:!0,title:`#${A.value.Reference} ${A.value.User.DisplayName} - ${n.value.Name} `,scrollable:!0,"card-class":"pa-0","card-style":"margin-bottom: -52px"},{default:l(()=>[t(zo,{accommodations:s.accommodations,convention:s.convention,extras:s.extras,forms:s.forms,interests:s.interests,tickets:s.tickets,venues:s.venues,layout:n.value,"onUpdate:layout":d[0]||(d[0]=U=>n.value=U),modelValue:A.value,"onUpdate:modelValue":d[1]||(d[1]=U=>A.value=U),onOpenActions:u,onShowForm:a},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","modelValue"])]),_:1},8,["modelValue","title"])):N("",!0)]))}}),Jo={class:"text-grey-lighten-1"},Xo={key:0,class:"text-blue text-center"},Wo={key:1,class:"text-red text-center"},Zo={key:2,class:"text-orange text-center"},ei={key:3,class:"text-orange text-center"},ti={key:4,class:"text-orange text-center"},ai={key:5,class:"text-orange text-center"},li={key:6,class:"text-green text-center"},ni={key:0},oi={key:0},ii=P("strong",null,"Total:",-1),si=z({__name:"RegListRow",props:J({header:{},accommodations:{},convention:{},extras:{},forms:{},interests:{},item:{},tickets:{},user:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:J(["openActions","openPayments","openTags","reload","showForm","switchUser"],["update:modelValue"]),setup(e,{emit:c}){const n=c,i=ae(e,"modelValue"),r=(a,s,d)=>{n("showForm",{registration:a,form:s,submission:d})},f=a=>{n("openActions",a)},A=a=>{n("switchUser",a)},u=a=>{const s=i.value.registration;return{ID:0,SubmissionUUID:Se(),FormID:a.ID,FormUUID:a.FormUUID,Form:a,UserID:s.UserID,UserUUID:s.UserUUID,RegistrationID:s.ID,RegistrationUUID:s.RegistrationUUID,Registration:s,Data:[],Status:Da.SUBMISSION_STATUS_NULL}};return(a,s)=>a.header.type==="ACCOMMODATION"&&a.accommodations.length>0&&a.item.raw[a.header.key]?(o(),D(ba,{key:0,value:a.item.raw[a.header.key].Data,accommodations:a.accommodations,convention:a.convention,forms:a.forms,tickets:a.tickets,venues:a.venues,registration:a.item.raw[a.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):a.header.type==="EXTRAS"&&a.extras.length>0?(o(),D(Ma,{key:1,value:a.item.raw[a.header.key],extras:a.extras},null,8,["value","extras"])):a.header.type==="INTERESTS"&&a.interests.length>0?(o(),D(Na,{key:2,value:a.item.raw[a.header.key],interests:a.interests},null,8,["value","interests"])):a.header.type==="TICKET"&&a.tickets.length>0?(o(),D(La,{key:3,value:a.item.raw[a.header.key],tickets:a.tickets},null,8,["value","tickets"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_CHECKIN_STATUS"?(o(),D(Ht,{key:4,convention:a.convention,"show-controls":!1,modelValue:a.item.raw.registration,"onUpdate:modelValue":s[0]||(s[0]=d=>a.item.raw.registration=d)},null,8,["convention","modelValue"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(o(),T(M,{key:5},[P("ul",null,[(o(!0),T(M,null,W(a.forms.filter(d=>d.Type===_(ge).FORM_TYPE_ADMIN&&a.item.raw[a.header.key].findIndex(U=>U.Form.ID===d.ID)<0),d=>(o(),T("li",{key:d.Heading},[P("strong",Jo,S(d.Heading),1),t(x,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:U=>r(a.item.raw.registration,d,u(d))},null,8,["onClick"])]))),128))]),P("ul",null,[(o(!0),T(M,null,W(a.item.raw[a.header.key],d=>(o(),T("li",{key:d.Heading},[P("strong",null,[k(S(d.Heading),1),d.Form.Type!==_(ge).FORM_TYPE_ADMIN?(o(),T(M,{key:0},[k(": ")],64)):N("",!0)]),d.Form.Type!==_(ge).FORM_TYPE_ADMIN?(o(),T("span",{key:0,class:Je(_(pa)(d.Submission.Status))},S(_(Kt)(d.Submission.Status)),3)):N("",!0),t(x,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:U=>r(d.Registration,d.Form,d.Submission)},null,8,["onClick"])]))),128))])],64)):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(o(),D(zt,{key:6,class:"rounded-circle",src:a.item.raw[a.header.key],height:"32",width:"32"},null,8,["src"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(o(),T(M,{key:7},[a.item.raw[a.header.key]=="NOT_REQUIRED"?(o(),T("div",Xo,"No Payment Requested")):a.item.raw[a.header.key]=="MISSING_REQUIRED"?(o(),T("div",Wo,"Partner Payment Not Requested")):a.item.raw[a.header.key]=="AWAITING_PARTNER"?(o(),T("div",Zo,"Awaiting Partner Payment")):a.item.raw[a.header.key]=="ALL_REQUIRED"?(o(),T("div",ei,"Awaiting Payments")):a.item.raw[a.header.key]=="REQUIRED"?(o(),T("div",ti,"Awaiting Payment")):a.item.raw[a.header.key]=="ADDITIONAL_REQUIRED"?(o(),T("div",ai,"Awaiting Additional Payments")):(o(),T("div",li,"Completed"))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(o(),T(M,{key:8},[t(x,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:s[1]||(s[1]=d=>f(a.item.raw[a.header.key]))}),_(sn)(a.user)?(o(),D(x,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:s[2]||(s[2]=d=>A(a.item.raw[a.header.key]))})):N("",!0)],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(o(),T(M,{key:9},[a.item.raw[a.header.key].length===1?(o(),T("em",ni," Not in a group ")):(o(),T(M,{key:1},[P("ul",null,[(o(!0),T(M,null,W(a.item.raw[a.header.key],d=>(o(),T("li",{key:d.UUID,class:"ml-0"},[k(" #"+S(d.Reference)+" : "+S(d.Name)+" ",1),d.IsLeader?(o(),T("strong",oi,"(Leader)")):N("",!0)]))),128))]),ii,k(" "+S(a.item.raw[a.header.key].length),1)],64))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(o(),T(M,{key:10},[i.value.registration?(o(),D(Qo,{key:0,accommodations:a.accommodations,convention:a.convention,extras:a.extras,forms:a.forms,interests:a.interests,tickets:a.tickets,venues:a.venues,layouts:a.item.raw[a.header.key].Layouts,modelValue:i.value.registration,"onUpdate:modelValue":s[3]||(s[3]=d=>i.value.registration=d),onOpenActions:f,onShowForm:r},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","modelValue"])):N("",!0)],64)):(o(),T(M,{key:11},[k(S(a.item.raw[a.header.key]),1)],64))}}),fa=z({__name:"RegistrationActionTabs",props:J({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=e,n=ae(e,"modelValue");return(i,r)=>(o(),D(Ia,Ut({modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=f=>n.value=f)},c),{default:l(()=>[(o(!0),T(M,null,W(i.tabs,f=>(o(),D(Ca,{value:f.value,key:f.value},{default:l(()=>[k(S(f.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),ui=(e=void 0,c)=>e===void 0?!1:Dt(e,pt.GROUP_TYPE_CONVENTION,c.ConventionUUID,c).EditPaymentTransactions,ht=e=>(xt("data-v-8af8174d"),e=e(),qt(),e),ri={class:"mb-4"},di={class:"v-row"},mi={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},ci={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},vi={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},fi={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},Ui=ht(()=>P("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),Ai={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ti=ht(()=>P("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),gi={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},_i=ht(()=>P("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),Ei={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},pi=ht(()=>P("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),Di={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},yi=z({__name:"PaymentActions",props:J({forms:{},title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=E(!1),n=E(),i=E([]),r=E(new Date().getTime()),f=E(!1),A=ae(e,"modelValue"),u=E(_e(A.value));Ue(A,()=>{u.value=_e(A.value)});const a=Te();a.getConvention(A.value.ConventionUUID).then(v=>{v&&(f.value=ui($e(),v))});const s=()=>{a.generateRegistrationCharges(A.value.RegistrationUUID,!1).then(v=>{v&&(i.value=v.PaymentTransactions,n.value=v.Registration,r.value=new Date().getTime())}).catch(()=>{})};s();const d=()=>{a.generateRegistrationCharges(A.value.RegistrationUUID,!0).then(v=>{v&&(i.value=v.PaymentTransactions,n.value=v.Registration,r.value=new Date().getTime())})},{totalCharges:U}=_a();return(v,m)=>(o(),D(Pe,null,{default:l(()=>[t(nt,null,{default:l(()=>[t(We,null,{default:l(()=>[k(" Payments (#"+S(A.value.Reference)+" "+S(A.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),t(Ze,null,{default:l(()=>[n.value?(o(),T(M,{key:0},[P("h3",ri,"#"+S(n.value.Reference)+" "+S(n.value.User.DisplayName),1),P("dl",di,[(o(!0),T(M,null,W(i.value,y=>(o(),T(M,{key:y.PaymentTransactionUUID},[y.Type===_($t).PAYMENT_TRANSACTION_TYPE_CHARGE?(o(),T("dt",mi,[P("div",ci,S(y.Description.split(":")[0])+": ",1),P("div",vi,S(y.Description.split(":")[1]),1)])):N("",!0),P("dd",fi," £"+S(y.Amount),1)],64))),128)),Ui,P("dd",Ai," £"+S(_(U)(i.value)),1),Ti,P("dd",gi," £"+S(n.value.Total),1),_i,P("dd",Ei," £"+S(n.value.Paid),1),pi,P("dd",Di," £"+S(n.value.Total-n.value.Paid),1)]),t(Q,{class:"flex-row-reverse"},{default:l(()=>[t(O,{class:"text-right"},{default:l(()=>[t(x,{color:"primary",onClick:d},{default:l(()=>[k("Apply Charges")]),_:1})]),_:1}),!c.value&&f.value?(o(),D(O,{key:0},{default:l(()=>[t(x,{color:"secondary",onClick:m[0]||(m[0]=y=>c.value=!0)},{default:l(()=>[k("Transaction Entry")]),_:1})]),_:1})):N("",!0)]),_:1})],64)):N("",!0),t(Ga,{"can-edit":f.value,registration:A.value,"show-editor":c.value,onCloseEditor:m[1]||(m[1]=y=>c.value=!1),updated:r.value,onChange:s},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}}),Si=mt(yi,[["__scopeId","data-v-8af8174d"]]),Ii=z({__name:"RegistrationFormStatus",props:J({forms:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=Te(),n=ae(e,"modelValue"),i=(r,f)=>{const A=n.value.Submissions.find(u=>u.SubmissionUUID==f);if(!A){r&&r("Submission not found");return}c.setSubmissionStatus(f,A.Status).then(u=>{u?(n.value.Submissions.forEach((a,s)=>{n.value.Submissions[s].Status=a.Status}),r&&r("Status Saved")):r&&r("Status not saved")}).catch(()=>{r&&r("Status not saved")})};return(r,f)=>(o(),D(Pe,null,{default:l(()=>[t(nt,null,{default:l(()=>[t(We,null,{default:l(()=>[k("Status (#"+S(n.value.Reference)+" "+S(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),t(Ze,null,{default:l(()=>[t(Le,null,{default:l(()=>[(o(!0),T(M,null,W(n.value.Submissions,A=>(o(),D(Ve,{key:A.SubmissionUUID,class:"pa-0"},{default:l(()=>[t(Q,{class:"py-2 align-center"},{default:l(()=>[t(O,{cols:"9",sm:"10",md:"10",lg:"9"},{default:l(()=>{var u;return[t(ve,{modelValue:A.Status,"onUpdate:modelValue":a=>A.Status=a,items:_(oa),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((u=r.forms.find(a=>a.FormUUID==A.FormUUID))==null?void 0:u.Name)||""},{selection:l(()=>[t(ke,{class:"mr-4 d-none d-sm-inline"},{default:l(()=>{var a;return[k(S((a=_(oa).find(s=>s.value===A.Status))==null?void 0:a.icon),1)]}),_:2},1024),k(" "+S(_(Kt)(A.Status)),1)]),item:l(({item:a,props:{onClick:s}})=>[t(Ve,{title:a.title,"prepend-icon":a.raw.icon,onClick:s},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),t(O,{cols:"3",sm:"2",md:"2",lg:"1"},{default:l(()=>[t(dt,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,A.SubmissionUUID)},null,8,["onClick"]),t(dt,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:u=>i(u.callback,A.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Ci=e=>(xt("data-v-7d39acf0"),e=e(),qt(),e),Ri=Ci(()=>P("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),hi={class:"mb-4"},ki=z({__name:"RegistrationTags",props:J({title:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=Te(),n=ae(e,"modelValue"),i=E(_e(n.value)),r=E(!1),f=E(i.value.Tags);Ue(n,()=>{i.value=_e(n.value)});const A=({callback:u})=>{const a=[],s=[];i.value.Tags.forEach(d=>{f.value.find(v=>v.TagUUID===d.TagUUID)||a.push(d.TagUUID)}),f.value.forEach(d=>{i.value.Tags.find(v=>d.TagUUID===v.TagUUID)||s.push(d.TagUUID)}),c.updateRegistrationTags(a,s,i.value.RegistrationUUID).then(d=>{d?u&&(u("Tags Saved"),n.value.Tags=d.Tags):u&&u("Error Saving Tags")}).catch(()=>{u&&u("Error Saving Tags")})};return(u,a)=>(o(),D(Pe,null,{default:l(()=>[t(nt,null,{default:l(()=>[t(We,null,{default:l(()=>[k("Tags (#"+S(i.value.Reference)+" "+S(i.value.User.DisplayName)+")",1)]),_:1})]),_:1}),t(Ze,null,{default:l(()=>[t(zl,{class:"my-4"},{default:l(()=>[t(Ql,null,{default:l(()=>[k("Caution")]),_:1}),Ri]),_:1}),P("h3",hi,"#"+S(i.value.Reference)+" "+S(i.value.User.DisplayName),1),t(Ra,{modelValue:i.value.Tags,"onUpdate:modelValue":a[0]||(a[0]=s=>i.value.Tags=s),convention:i.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":r.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),t(jt,{class:"px-4 align-start"},{default:l(()=>[t(ut,{label:"Show UUID",modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=s=>r.value=s)},null,8,["modelValue"]),t(dt,{onClick:A,variant:"flat"})]),_:1})]),_:1}))}}),Vi=mt(ki,[["__scopeId","data-v-7d39acf0"]]),Ua=z({__name:"RegistrationActionWindows",props:J({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:J(["update:registration"],["update:modelValue"]),setup(e,{emit:c}){const n=e,i=ae(e,"modelValue"),f=ct(n,c,void 0,void 0,"registration");return(A,u)=>(o(),D(ha,{modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=a=>i.value=a)},{default:l(()=>[t(Qe,{value:"badges"},{default:l(()=>[i.value=="badges"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t(Jt,{convention:A.convention,registration:_(f)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),t(Qe,{value:"emails"},{default:l(()=>[i.value=="emails"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t($a,{registration:_(f)},null,8,["registration"])]),_:1})):N("",!0)]),_:1}),t(Qe,{value:"notes"},{default:l(()=>[i.value=="notes"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t(Ba,{convention:A.convention,expanded:!1,registration:_(f)},null,8,["convention","registration"])]),_:1})):N("",!0)]),_:1}),t(Qe,{value:"payments"},{default:l(()=>[i.value=="payments"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t(Si,{modelValue:_(f),"onUpdate:modelValue":u[0]||(u[0]=a=>rt(f)?f.value=a:null),forms:A.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),t(Qe,{value:"status"},{default:l(()=>[i.value=="status"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t(Ii,{modelValue:_(f),"onUpdate:modelValue":u[1]||(u[1]=a=>rt(f)?f.value=a:null),forms:A.forms},null,8,["modelValue","forms"])]),_:1})):N("",!0)]),_:1}),t(Qe,{value:"tags"},{default:l(()=>[i.value=="tags"?(o(),D(me,{key:0,class:"pa-0 mx-0",fluid:!0},{default:l(()=>[t(Vi,{modelValue:_(f),"onUpdate:modelValue":u[2]||(u[2]=a=>rt(f)?f.value=a:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):N("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),Oi=(e,c)=>e===void 0?!1:Dt(e,pt.GROUP_TYPE_CONVENTION,c.ConventionUUID,c).ViewPaymentTransactions,bi={key:0},Mi={key:1},Aa=z({__name:"RegistrationActions",props:J({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["update:registration"],["update:modelValue"]),setup(e,{emit:c}){const n=e,i=ae(e,"modelValue"),f=ct(n,c,void 0,void 0,"registration"),A=E("notes"),u=$e(),a=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return Oi(u,n.convention)&&a.splice(2,0,{label:"Payments",value:"payments"}),(s,d)=>s.useDialog?(o(),T("div",bi,[t(we,{modelValue:i.value,"onUpdate:modelValue":d[3]||(d[3]=U=>i.value=U),title:s.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:l(()=>[t(fa,{modelValue:A.value,"onUpdate:modelValue":d[0]||(d[0]=U=>A.value=U),tabs:a,"show-arrows":!0},null,8,["modelValue"])]),default:l(()=>[t(Ua,{modelValue:A.value,"onUpdate:modelValue":d[1]||(d[1]=U=>A.value=U),registration:_(f),"onUpdate:registration":d[2]||(d[2]=U=>rt(f)?f.value=U:null),accommodations:s.accommodations,convention:s.convention,extras:s.extras,forms:s.forms,interests:s.interests,tabs:a,tickets:s.tickets,venues:s.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])])):(o(),T("div",Mi,[t(fa,{modelValue:A.value,"onUpdate:modelValue":d[4]||(d[4]=U=>A.value=U),tabs:a,"show-arrows":!0},null,8,["modelValue"]),t(Ua,{modelValue:A.value,"onUpdate:modelValue":d[5]||(d[5]=U=>A.value=U),registration:_(f),"onUpdate:registration":d[6]||(d[6]=U=>rt(f)?f.value=U:null),accommodations:s.accommodations,convention:s.convention,extras:s.extras,forms:s.forms,interests:s.interests,tabs:a,tickets:s.tickets,venues:s.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]))}}),Ni=(e,c=500,n=!1)=>{let i;return(...r)=>{const A=function(){i=void 0,n||e.apply(void 0,r)},u=n&&!i;clearTimeout(i),i=setTimeout(A,c),u&&e.apply(void 0,r)}},Ya=(e,c)=>{e.forEach(n=>{n.Items.forEach(i=>{(i.SectionField==null||i.SectionField.Field==null)&&c.find(r=>{r.Sections.find(f=>{if(f.Fields){const A=f.Fields.find(u=>u.SectionFieldUUID===i.SectionFieldUUID);if(A)return i.SectionField=A,!0}})})})})},Li={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},wi={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Fi={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Pi={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},$i={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},Bi={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Gi={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Yi={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Hi={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},xi={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},qi={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Ki={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},ji={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},zi={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Qi={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Ji={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Xi={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Wi={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Zi={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},es={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},ts={red:Li,pink:wi,purple:Fi,deepPurple:Pi,indigo:$i,blue:Bi,lightBlue:Gi,cyan:Yi,teal:Hi,green:xi,lightGreen:qi,lime:Ki,yellow:ji,amber:zi,orange:Qi,deepOrange:Ji,brown:Xi,blueGrey:Wi,grey:Zi,shades:es},as=P("h4",null,"Grid Size (Max 12)",-1),ls={key:0,class:"text-warning text-right pl-1"},ns=z({__name:"EditAdminLayout",props:J({convention:{},layouts:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:J(["change","delete"],["update:modelValue"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=E([]),r=Te(),f=c,A=E(Object.assign({},...e.layouts.map(b=>b.Panels.map(I=>I.Items.map(g=>{if(!g.Meta)return{};const R={};return Object.entries(g.Meta).forEach(p=>{Array.isArray(p[1])?(R[`${g.LayoutItemUUID}.${p[0]}`]=[],p[1].forEach(Z=>{R[`${g.LayoutItemUUID}.${p[0]}`].push(Z.toString())})):p[1]!==void 0&&p[1]!==null&&(R[`${g.LayoutItemUUID}.${p[0]}`]=[p[1].toString()])}),R}))).flat(2))),u=E(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),a=E(!1),s=E([]);r.getConventionTags(e.convention.ConventionUUID).then(b=>{b&&(s.value=b)}).catch(()=>{});const d=()=>({ID:0,LayoutPanelUUID:Se(),AdminLayoutID:n.value.ID,AdminLayoutUUID:n.value.AdminLayoutUUID,Name:"",Order:n.value.Panels.length+1,Items:[],PanelStyle:ye.PANEL_STYLE_FLEX,RequiredFormType:ge.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),U=b=>()=>({ID:0,LayoutItemUUID:Se(),LayoutPanelID:b.ID,LayoutPanelUUID:b.LayoutPanelUUID,Label:"",SourceType:Ne.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:b.Items.length+1,DefaultSort:!1,Meta:{}}),v=(b,I)=>{b.Meta[I]=A.value[`${b.LayoutItemUUID}.${I}`]},m=b=>{const I=i.value.find(g=>g.value===b.SectionFieldUUID);I&&(b.SectionFieldID=I.object.ID,b.SectionField=I.object)};r.getConventionForms(n.value.ConventionUUID).then(b=>{b&&(b.forEach(I=>I.Sections.forEach(g=>g.Fields&&i.value.push(...g.Fields.map(R=>{var Z;return{title:`${I.Name} - ${g.Name} - ${(Z=R.Field)==null?void 0:Z.Name}`,value:R.SectionFieldUUID,object:R}})))),i.value.sort(gl("title")),Ya(n.value.Panels,b))});const y=se(()=>{switch(n.value.Type){case Me.ADMIN_LAYOUT_PANELS:return"Panels";case Me.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});Ue(n,()=>{f("change")},{deep:!0});const V=se(()=>{const b=/([a-zA-Z]+)(\d+)/;return Object.entries(ts).map(([I,g])=>Object.entries(g).map(([R,p])=>{const Z=b.exec(R);return!Z||Z.length<3?void 0:{Title:`${wt(I).split(/(?=[A-Z])/).join(" ")} ${wt(Z[1])} ${wt(Z[2])}`,CSSName:`${I}-${Z[1]}-${Z[2]}`,Value:p}})).flat().filter(I=>!!I).sort((I,g)=>I.Title>g.Title?1:I.Title==g.Title?0:-1)});return console.log(V),(b,I)=>(o(),D(me,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ne,{modelValue:n.value.Name,"onUpdate:modelValue":I[0]||(I[0]=g=>n.value.Name=g),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ve,{modelValue:n.value.Type,"onUpdate:modelValue":I[1]||(I[1]=g=>n.value.Type=g),label:"Layout Type",items:_(Zl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[t(Bt,{modelValue:n.value.Panels,"onUpdate:modelValue":I[2]||(I[2]=g=>n.value.Panels=g),"new-item":d,closeable:!1,title:y.value,label:"Name","slot-name-prefix":"panel"},Xe({_:2},[W(n.value.Panels,(g,R)=>({name:`panel_${R}`,fn:l(()=>[t(me,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ne,{modelValue:g.Name,"onUpdate:modelValue":p=>g.Name=p,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.value.Type===_(Me).ADMIN_LAYOUT_PANELS?(o(),D(O,{key:0,cols:"12",sm:"6"},{default:l(()=>[t(ve,{modelValue:g.PanelStyle,"onUpdate:modelValue":p=>g.PanelStyle=p,items:_(an),clearable:!0,label:"Panel Style",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)):N("",!0),t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ve,{modelValue:g.RequiredFormType,"onUpdate:modelValue":p=>g.RequiredFormType=p,items:_(El),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(O,{cols:"12",sm:"6"},{default:l(()=>[t(Sa,{label:"Required Groups",variant:"outlined",modelValue:g.RequiredGroupMemberships,"onUpdate:modelValue":p=>g.RequiredGroupMemberships=p,convention:n.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),t(O,{cols:"12",sm:"6"},{default:l(()=>[t(Ra,{label:"Registration Tags",variant:"outlined",modelValue:g.RequiredRegistrationTags,"onUpdate:modelValue":p=>g.RequiredRegistrationTags=p,convention:n.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),n.value.Type===_(Me).ADMIN_LAYOUT_PANELS&&g.PanelStyle===_(ye).PANEL_STYLE_FLEX?(o(),D(Q,{key:0},{default:l(()=>[t(O,{cols:"12",class:"py-0 my-0"},{default:l(()=>[as]),_:1}),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols,"onUpdate:modelValue":p=>g.Meta.cols=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols_xs,"onUpdate:modelValue":p=>g.Meta.cols_xs=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols_sm,"onUpdate:modelValue":p=>g.Meta.cols_sm=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols_md,"onUpdate:modelValue":p=>g.Meta.cols_md=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols_lg,"onUpdate:modelValue":p=>g.Meta.cols_lg=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ne,{modelValue:g.Meta.cols_xl,"onUpdate:modelValue":p=>g.Meta.cols_xl=p,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]),_:2},1024),t(Bt,{modelValue:g.Items,"onUpdate:modelValue":p=>g.Items=p,"new-item":U(g),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Xe({_:2},[W(g.Items,(p,Z)=>({name:`item_${Z}`,fn:l(()=>[t(me,{class:"px-0 mx-0",fluid:!0},{default:l(()=>{var j,ue;return[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ne,{modelValue:p.Label,"onUpdate:modelValue":B=>p.Label=B,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6"},{default:l(()=>[t(ve,{modelValue:p.SourceType,"onUpdate:modelValue":B=>p.SourceType=B,label:"Source Type",items:_(en),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(O,{cols:"12",sm:"6"},{default:l(()=>[p.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(o(),D(ve,{key:0,modelValue:p.SectionFieldUUID,"onUpdate:modelValue":B=>p.SectionFieldUUID=B,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:B=>m(p)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):p.SourceType==="LAYOUT_ITEM_SOURCE_META"?(o(),D(ve,{key:1,modelValue:p.MetaField,"onUpdate:modelValue":B=>p.MetaField=B,label:"Miscellaneous Data",items:_(tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):p.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(o(),D(ve,{key:2,modelValue:p.UserField,"onUpdate:modelValue":B=>p.UserField=B,label:"User Profile Data",items:_(ln),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):N("",!0)]),_:2},1024)]),_:2},1024),b.layouts&&p.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&((ue=(j=p.SectionField)==null?void 0:j.Field)==null?void 0:ue.Type)===_(ga).TEXT?(o(),D(Q,{key:0},{default:l(()=>[t(O,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:l(()=>[t(ut,{modelValue:p.Meta.DirectEdit,"onUpdate:modelValue":B=>p.Meta.DirectEdit=B,label:"Direct Edit","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"12",xs:"6",sm:"6",lg:"3"},{default:l(()=>[t(ve,{modelValue:p.Meta.DirectEditPermission,"onUpdate:modelValue":B=>p.Meta.DirectEditPermission=B,label:"Minimum Permission Required",items:["View","Edit"],"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),b.layouts&&p.SourceType==="LAYOUT_ITEM_SOURCE_META"&&p.MetaField===_(H).META_DATA_SOURCE_BADGE_DISPLAY?(o(),D(Q,{key:1},{default:l(()=>[t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ut,{modelValue:p.Meta.HideDownloadButton,"onUpdate:modelValue":B=>p.Meta.HideDownloadButton=B,label:"Hide Download Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ut,{modelValue:p.Meta.HideNFCButton,"onUpdate:modelValue":B=>p.Meta.HideNFCButton=B,label:"Hide NFC Button"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0),b.layouts&&p.SourceType==="LAYOUT_ITEM_SOURCE_META"&&p.MetaField===_(H).META_DATA_SOURCE_DATA_LAYOUT?(o(),D(Q,{key:2},{default:l(()=>[t(O,{cols:"6",sm:"4",lg:"2"},{default:l(()=>[t(ve,{modelValue:A.value[`${p.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[B=>A.value[`${p.LayoutItemUUID}.LayoutUUID`]=B,B=>v(p,"LayoutUUID")],clearable:!0,items:b.layouts.filter(B=>B.Type===_(Me).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),b.layouts&&p.SourceType==="LAYOUT_ITEM_SOURCE_META"&&p.MetaField===_(H).META_DATA_SOURCE_TAGS?(o(),D(Q,{key:3},{default:l(()=>[t(O,{cols:"6",sm:"6",md:"6",lg:"6"},{default:l(()=>[t(ve,{modelValue:A.value[`${p.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[B=>A.value[`${p.LayoutItemUUID}.Tags`]=B,B=>v(p,"Tags")],clearable:!0,items:s.value||[],multiple:!0,chips:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!A.value[p.LayoutItemUUID]||A.value[p.LayoutItemUUID].length===0?(o(),T("small",ls," Will show all tags ")):N("",!0)]),_:2},1024),t(O,{cols:"6"},{default:l(()=>[t(ve,{modelValue:p.Meta.TagColour,"onUpdate:modelValue":B=>p.Meta.TagColour=B,items:V.value,label:"Colour","item-title":"Title","item-value":"Value",variant:"outlined","hide-details":""},{selection:l(({item:B})=>[t(x,{size:"x-small",color:B.raw.Value,class:"mr-2"},null,8,["color"]),k(" "+S(B.title),1)]),item:l(({props:B,item:Y})=>[t(Ve,vl(cl(B)),{prepend:l(()=>[t(x,{size:"x-small",color:Y.raw.Value,class:"mr-2"},null,8,["color"])]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):N("",!0),n.value.Type===_(Me).ADMIN_LAYOUT_TABLE&&(p.SourceType!==_(Ne).LAYOUT_ITEM_SOURCE_META||p.MetaField!==_(H).META_DATA_SOURCE_DATA_LAYOUT)?(o(),D(Q,{key:4},{default:l(()=>[t(O,null,{default:l(()=>[t(ut,{modelValue:p.DefaultSort,"onUpdate:modelValue":B=>p.DefaultSort=B,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):N("",!0)]}),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),t(Q,null,{default:l(()=>[t(O,null,{default:l(()=>[t(x,{onClick:I[3]||(I[3]=g=>a.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:l(()=>[k("Delete Layout")]),_:1})]),_:1})]),_:1}),a.value?(o(),D(ka,{key:0,modelValue:a.value,"onUpdate:modelValue":I[4]||(I[4]=g=>a.value=g),message:u.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:I[5]||(I[5]=g=>f("delete"))},null,8,["modelValue","message"])):N("",!0)]),_:1}))}}),os=z({__name:"EditAdminLayouts",props:J({title:{},convention:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:J(["save"],["update:modelValue"]),setup(e,{emit:c}){const n=ae(e,"modelValue"),i=c,r=E([]),f=E([]),A=E([]),u=Te(),a=()=>({ID:0,AdminLayoutUUID:Se(),ConventionID:e.convention.ID,ConventionUUID:e.convention.ConventionUUID,Name:"New Layout",Type:Me.ADMIN_LAYOUT_PANELS,Panels:[]}),s=()=>{let U=!1;[...new Set(A.value)].forEach(m=>{const y=r.value.findIndex(V=>V.AdminLayoutUUID===m);y<0||y>=r.value.length||(u.saveAdminLayout(r.value[y]).then(V=>{V&&r.value.splice(y,1,V)}).catch(()=>{}),U=!0)}),f.value.forEach(m=>{u.deleteAdminLayout(m).catch(()=>{})}),f.value=[],A.value=[],U&&i("save")},d=U=>{const v=r.value.findIndex(m=>m.AdminLayoutUUID===U.AdminLayoutUUID);v<0||v>=r.value.length||(r.value[v].ID>0&&f.value.push(U.AdminLayoutUUID),r.value.splice(v,1))};return u.getConventionAdminLayouts(e.convention.ConventionUUID).then(U=>{U&&(r.value=U)}).catch(()=>[]),(U,v)=>(o(),D(_t,{modelValue:n.value,"onUpdate:modelValue":v[2]||(v[2]=m=>n.value=m),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:l(()=>[t(Bt,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=m=>r.value=m),"new-item":a,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:U.title,label:"Name","slot-name-prefix":"panel",onClose:v[1]||(v[1]=m=>n.value=!1),onSave:s},Xe({_:2},[W(r.value,(m,y)=>({name:`panel_${y}`,fn:l(()=>[t(me,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12"},{default:l(()=>[t(ns,{modelValue:r.value[y],"onUpdate:modelValue":V=>r.value[y]=V,convention:U.convention,layouts:r.value,onChange:V=>A.value.push(m.AdminLayoutUUID),onDelete:V=>d(m)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}}),is=["colspan"],ss={style:{opacity:"var(--v-medium-emphasis-opacity)"}},Qs=z({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:c}){var ea;const n=yt();c("pageTitle","Registration Manager");const r=fl(),f=Ul(),A=E(!0);let u=((ea=r.params.convention)==null?void 0:ea.toString())||"";const a=E({ID:0,ConventionUUID:Se(),OrganisationID:0,OrganisationUUID:Lt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),s=Te(),d=Al.getInstance(),U=E([]),v=E({ID:0,AdminLayoutUUID:Se(),ConventionID:a.value.ID,ConventionUUID:a.value.ConventionUUID,Name:"Registration Table",Type:Me.ADMIN_LAYOUT_TABLE,Panels:[]}),m=E([]),y=E([]),V=E([]),b=E([]),I=E([]),g=E([]),R=E(1),p=E(10),Z=E([]),j=E(0),ue=E(!1),B=E(""),Y=E(""),G=E(""),$=E(""),w=E({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),ee=E({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),ce=E({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),oe=E({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),pe=E(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",w.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",ee.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",ce.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",oe.value]])),et=E(""),tt=E(""),ot=E([]),Ce=E([]),Be=E([]),Ge=E([]),Ye=E([]),He=E([]),De=E(0),Ie=E(),xe=E(!1),Xt=E(!1),Ha=E(!1),vt=E(),Wt=E(),kt=E(),at=E(!1),xa=$e(),Ae=Ni(()=>{Y.value=Date.now().toString()});Ue(B,h=>{const C=g.value.find(F=>F.uuid===h);if(C){const F=C.headers.find(L=>L.defaultSort===!0);F&&(Z.value=[{key:F.key,order:"asc"}],ot.value=[{key:F.key,order:"asc"}])}}),Ue(De,h=>{h===8&&Zt()}),Ue(et,()=>{Ae()}),Ue(tt,()=>{Ae()});const qa=()=>{m.value=[],V.value=[],b.value=[],g.value=[];try{s.getConventionAdminLayoutByName(a.value.ConventionUUID,"Registration Table").then(h=>{De.value+=1,h?v.value=h:(v.value.ConventionID=a.value.ID,v.value.ConventionUUID=a.value.ConventionUUID)})}catch{v.value.ConventionID=a.value.ID,v.value.ConventionUUID=a.value.ConventionUUID}try{s.getConventionAdminLayouts(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(h.forEach(C=>{C.Panels.sort((F,L)=>F.Order>L.Order?1:F.Order===L.Order?0:-1),C.Panels.forEach(F=>{F.Items.sort((L,fe)=>L.Order>fe.Order?1:L.Order===fe.Order?0:-1)})}),V.value=h)})}catch{}try{s.getConventionForms(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(m.value=h)})}catch{}try{s.getConventionAccommodation(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(Ce.value=h)})}catch{}try{s.getConventionVenues(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(He.value=h)})}catch{}try{s.getConventionExtras(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(Be.value=h)})}catch{}try{s.getConventionInterests(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(Ge.value=h)})}catch{}try{s.getConventionTickets(a.value.ConventionUUID).then(h=>{De.value+=1,h&&(Ye.value=h)})}catch{}try{s.getConventionGroups(a.value.ConventionUUID).then(h=>{h&&(y.value=h.sort((C,F)=>C.Name.localeCompare(F.Name)))})}catch{}try{s.getConventionTags(a.value.ConventionUUID).then(h=>{h&&(I.value=h.sort((C,F)=>C.Title.localeCompare(F.Title)).map(C=>(C.Title=`${C.Title} [${C.Key}]`,C)))})}catch{}},Vt=({page:h,itemsPerPage:C,sortBy:F})=>{A.value=!0,R.value=h,Z.value=F;const L=g.value.find(de=>de.uuid==B.value),fe=L==null?void 0:L.layout.Items;let re="",it="";if(F&&fe&&F.length>=1){const de=fe.find(bt=>bt.LayoutItemUUID==F[0].key);switch(it=F[0].order||"asc",de==null?void 0:de.MetaField){case H.META_DATA_SOURCE_ACCOMMODATION_FORM:re="submission.status";break;case H.META_DATA_SOURCE_BADGE_FORM:re="submission.status";break;case H.META_DATA_SOURCE_DEALER_FORM:re="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_FORM:re="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:re="reference";break;case H.META_DATA_SOURCE_SUBMISSION_DATE:re="created";break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:re="submission.status";break}switch(de==null?void 0:de.UserField){case ie.USER_DATA_SOURCE_DISPLAY_NAME:re="user.display_name";break;case ie.USER_DATA_SOURCE_EMAIL:re="user.email";break;case ie.USER_DATA_SOURCE_FIRST_NAME:re="user.firstname";break;case ie.USER_DATA_SOURCE_HANDLE:re="user.handle";break;case ie.USER_DATA_SOURCE_LAST_NAME:re="user.lastname";break}}try{const de={Direction:it,Limit:C,Offset:(h-1)*C,Order:re};L&&L.layout.RequiredRegistrationTags.length>0&&(de.PanelUUID=L==null?void 0:L.layout.LayoutPanelUUID),(L==null?void 0:L.layout.RequiredFormType)===ge.FORM_TYPE_ACCOMMODATION&&(de.Accommodation=!0),(L==null?void 0:L.layout.RequiredFormType)===ge.FORM_TYPE_BADGE&&(de.Badge=!0),(L==null?void 0:L.layout.RequiredFormType)===ge.FORM_TYPE_DEALER&&(de.Dealer=!0),(L==null?void 0:L.layout.RequiredFormType)===ge.FORM_TYPE_REGISTRATION&&(de.Registration=!0),de.GroupUUID=et.value||Lt,de.TagUUID=tt.value||Lt,de.Email=$.value,de.Reference=G.value,de.FieldValues=Array.from(pe.value.values());const bt=Y.value;s.searchConventionRegistrations(a.value.ConventionUUID,de).then(Mt=>{Mt&&bt===Y.value&&(j.value=Mt.Total,b.value=Mt.Registrations,g.value.forEach(Nt=>{const el=Nt.layout;Nt.items=b.value.map(X=>{const ft=[];let Oe;X.Leader?Oe=X:Oe=X.Primary,ft.push({Name:Oe.User.DisplayName,UUID:Oe.UserUUID,UserUUID:Oe.User.UserUUID,IsLeader:!0,Reference:Oe.Reference,Paid:Oe.Paid,Total:Oe.Total}),ft.push(...Oe.Members.map(be=>({Name:be.User.DisplayName,UUID:be.UserUUID,UserUUID:be.User.UserUUID,IsLeader:!1,Reference:be.Reference,Paid:be.Paid,Total:be.Total})));const le={};return Nt.headers.forEach(be=>{var ta;const K=el.Items.find(st=>st.LayoutItemUUID===be.key);if(K){if(K.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&K.SectionField)X.Submissions.forEach(st=>{const lt=st.Data.find(q=>q.SectionFieldUUID===K.SectionFieldUUID);if(lt){be.type===ga.ACCOMMODATION?le[K.LayoutItemUUID]={Data:lt.Data,Registration:X}:le[K.LayoutItemUUID]=lt.Data;return}});else if(K.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&K.UserField)switch(K.UserField){case ie.USER_DATA_SOURCE_AVATAR:le[K.LayoutItemUUID]=n.GetProfileImageURL(X.UserUUID);break;case ie.USER_DATA_SOURCE_DISPLAY_NAME:le[K.LayoutItemUUID]=X.User.DisplayName;break;case ie.USER_DATA_SOURCE_EMAIL:le[K.LayoutItemUUID]=X.User.Additional.Email;break;case ie.USER_DATA_SOURCE_HANDLE:le[K.LayoutItemUUID]=X.User.Handle;break;case ie.USER_DATA_SOURCE_DATE_OF_BIRTH:le[K.LayoutItemUUID]=X.User.Additional.DOB;break;case ie.USER_DATA_SOURCE_FIRST_NAME:le[K.LayoutItemUUID]=X.User.Additional.FirstName;break;case ie.USER_DATA_SOURCE_LAST_NAME:le[K.LayoutItemUUID]=X.User.Additional.LastName;break;case ie.USER_DATA_SOURCE_TELEGRAM:le[K.LayoutItemUUID]="";break}else if(K.SourceType==="LAYOUT_ITEM_SOURCE_META"&&K.MetaField){const st=(ta=m.value.find(q=>q.Type===ge.FORM_TYPE_REGISTRATION))==null?void 0:ta.FormUUID,lt=X.Submissions.find(q=>q.FormUUID===st);switch(K.MetaField){case H.META_DATA_SOURCE_REGISTRATION_ACTIONS:le[K.LayoutItemUUID]=X;break;case H.META_DATA_SOURCE_REGISTRATION_GROUP:le[K.LayoutItemUUID]=ft;break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:le[K.LayoutItemUUID]=X.Reference;break;case H.META_DATA_SOURCE_SUBMISSION_DATE:if(lt){const q=new Date(lt.CreatedAt||"");le[K.LayoutItemUUID]=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}-${q.getDate().toString().padStart(2,"0")} ${q.getHours().toString().padStart(2,"0")}:${q.getMinutes().toString().padStart(2,"0")}:${q.getSeconds().toString().padStart(2,"0")}`}else{const q=new Date(X.CreatedAt||"");le[K.LayoutItemUUID]=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}-${q.getDate().toString().padStart(2,"0")} ${q.getHours().toString().padStart(2,"0")}:${q.getMinutes().toString().padStart(2,"0")}:${q.getSeconds().toString().padStart(2,"0")}`}break;case H.META_DATA_SOURCE_ACCOMMODATION_FORM:le[K.LayoutItemUUID]=X.Submissions.map(q=>{const te=m.value.find(qe=>qe.FormUUID===q.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:q,Registration:X}}).filter(q=>{var te;return((te=q.Form)==null?void 0:te.Type)===ge.FORM_TYPE_ACCOMMODATION});break;case H.META_DATA_SOURCE_BADGE_FORM:le[K.LayoutItemUUID]=X.Submissions.map(q=>{const te=m.value.find(qe=>qe.FormUUID===q.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:q,Registration:X}}).filter(q=>{var te;return((te=q.Form)==null?void 0:te.Type)===ge.FORM_TYPE_BADGE});break;case H.META_DATA_SOURCE_DEALER_FORM:le[K.LayoutItemUUID]=X.Submissions.map(q=>{const te=m.value.find(qe=>qe.FormUUID===q.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:q,Registration:X}}).filter(q=>{var te;return((te=q.Form)==null?void 0:te.Type)===ge.FORM_TYPE_DEALER});break;case H.META_DATA_SOURCE_PAYMENT_STATUS:if(X.Paid===0&&X.Total)le[K.LayoutItemUUID]="REQUIRED";else if(X.Total>X.Paid)le[K.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const q=ft.find(te=>te.Paid===0&&(te.Total||0)>0);if(q){X.Total===0&&q.Total===0?le[K.LayoutItemUUID]="NOT_REQUIRED":X.Total===0&&q.Total||X.Total>0&&q.Total===0?le[K.LayoutItemUUID]="MISSING_REQUIRED":X.Paid>=X.Total?le[K.LayoutItemUUID]="AWAITING_PARTNER":le[K.LayoutItemUUID]="ALL_REQUIRED";break}else X.Total===0?le[K.LayoutItemUUID]="NOT_REQUIRED":le[K.LayoutItemUUID]="COMPLETE"}break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:jl(X.Submissions,m.value),le[K.LayoutItemUUID]=X.Submissions.map(q=>{const te=m.value.find(qe=>qe.FormUUID===q.FormUUID);return{Heading:te==null?void 0:te.Heading,Form:te,Submission:q,Registration:X}});break;case H.META_DATA_SOURCE_DATA_LAYOUT:le[K.LayoutItemUUID]={Registration:X,Layouts:V.value.filter(q=>{if(K.Meta&&K.Meta.LayoutUUID&&Array.isArray(K.Meta.LayoutUUID))return K.Meta.LayoutUUID.includes(q.AdminLayoutUUID)})};break}}}}),{key:X.RegistrationUUID,registration:X,...le}})}),A.value=!1)})}catch{}},Ka=h=>{ue.value=!1,h&&(v.value=h,Zt())},Zt=()=>{Ya(v.value.Panels,m.value),v.value.Panels.length>0&&(g.value=[],v.value.Panels.forEach(h=>{const C={uuid:Se(),order:h.Order,name:h.Name,headers:[],items:[],layout:h};h.Items.sort((F,L)=>F.Order>L.Order?1:F.Order==L.Order?0:-1),C.headers=h.Items.map(F=>{var L,fe;return{key:F.LayoutItemUUID,title:F.Label||((fe=(L=F.SectionField)==null?void 0:L.Field)==null?void 0:fe.Label)||"",align:F.Align==="end"?"end":"start",sortable:za(F),type:ja(F),defaultSort:F.DefaultSort,meta:F.Meta}}),g.value.push(C)}),g.value=g.value.sort((h,C)=>h.order>C.order?1:h.order==C.order?0:-1)),(B.value==null||B.value=="")&&g.value.length>0&&(B.value=g.value[0].uuid)};u?s.getConvention(u).then(h=>{h&&(a.value=h,v.value.ConventionID=a.value.ID,v.value.ConventionUUID=a.value.ConventionUUID,qa())}).catch(()=>{f.push("/")}):f.push("/");const ja=h=>{var C,F;if(h.SourceType===Ne.LAYOUT_ITEM_SOURCE_META)return`${h.SourceType}.${h.MetaField}`;if(h.SourceType===Ne.LAYOUT_ITEM_SOURCE_FORM)return(F=(C=h.SectionField)==null?void 0:C.Field)==null?void 0:F.Type;if(h.SourceType===Ne.LAYOUT_ITEM_SOURCE_USER)return`${h.SourceType}.${h.UserField}`},za=h=>{const C=[H.META_DATA_SOURCE_ACCOMMODATION_FORM,H.META_DATA_SOURCE_BADGE_FORM,H.META_DATA_SOURCE_DEALER_FORM,H.META_DATA_SOURCE_REGISTRATION_FORM,H.META_DATA_SOURCE_REGISTRATION_REFERENCE,H.META_DATA_SOURCE_SUBMISSION_DATE,H.META_DATA_SOURCE_SUBMISSION_STATUS],F=[ie.USER_DATA_SOURCE_DISPLAY_NAME,ie.USER_DATA_SOURCE_EMAIL,ie.USER_DATA_SOURCE_HANDLE,ie.USER_DATA_SOURCE_DATE_OF_BIRTH,ie.USER_DATA_SOURCE_FIRST_NAME,ie.USER_DATA_SOURCE_LAST_NAME];return C.includes(h.MetaField)||F.includes(h.UserField)},Qa=h=>{Ie.value=h,xe.value=!0},Ja=h=>{Ie.value=h,Xt.value=!0},Xa=h=>{Ie.value=h,Ha.value=!0};Ue(xe,h=>{h||(Ie.value=void 0)}),Ue(Xt,h=>{h||(Ie.value=void 0)});const Ot=async(h="")=>{Wt.value=await s.getRegistrationGroup(h)},Wa=({registration:h,form:C,submission:F})=>{Ie.value=h,Ot(h.RegistrationUUID).then(()=>{vt.value=C,kt.value=F,at.value=!0})},Za=h=>{s.switchUser(h.UserUUID).then(C=>{C&&Jl(C.tokens,C.user,f,!1)}).catch(C=>{console.error(C)})};return d.on("registration.group.leave",h=>{s.leaveRegistrationGroup(h).then(C=>{C&&Ot(h).then(()=>{d.emit("registration.group.left",C)})})}),d.on("registration.group.remove.member",h=>{s.leaveRegistrationGroup(h).then(C=>{C&&Ot(h).then(()=>{d.emit("registration.group.left",C)})})}),(h,C)=>(o(),D(Wl,null,{default:l(()=>[t(Gt,{color:"blue-darken-4"},{default:l(()=>[t(Ia,{modelValue:B.value,"onUpdate:modelValue":C[0]||(C[0]=F=>B.value=F),"show-arrows":""},{default:l(()=>[(o(!0),T(M,null,W(g.value,F=>(o(),D(Ca,{key:F.uuid,value:F.uuid},{default:l(()=>[k(S(F.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(Fe),t(x,{icon:"mdi:mdi-cog-outline",onClick:C[1]||(C[1]=F=>ue.value=!0)})]),_:1}),t(ha,{modelValue:B.value,"onUpdate:modelValue":C[23]||(C[23]=F=>B.value=F),disabled:!0,touch:!1},{default:l(()=>[(o(!0),T(M,null,W(g.value,F=>(o(),D(Qe,{key:F.uuid,value:F.uuid},{default:l(()=>[F.uuid===B.value?(o(),D(Pe,{key:0,class:"pa-2"},{default:l(()=>[t(rn,{expanded:U.value,"onUpdate:expanded":C[19]||(C[19]=L=>U.value=L),page:R.value,"onUpdate:page":C[20]||(C[20]=L=>R.value=L),"items-per-page":p.value,"onUpdate:itemsPerPage":C[21]||(C[21]=L=>p.value=L),"sort-by":ot.value,"onUpdate:sortBy":C[22]||(C[22]=L=>ot.value=L),headers:F.headers,"items-length":j.value,items:F.items,"item-value":"key",loading:A.value,search:Y.value,"onUpdate:options":Vt,"show-expand":""},Xe({top:l(()=>[t(Rt,{class:"mb-3"},{default:l(()=>[t(Ct,null,{default:l(()=>[t(St,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:l(()=>[t(O,{class:"pa-0"},{default:l(()=>[k(" Search Criteria "),t(ke,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(O,{class:"d-none d-sm-block pa-0",cols:"0"},{default:l(()=>[t(ne,{modelValue:G.value,"onUpdate:modelValue":C[2]||(C[2]=L=>G.value=L),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:C[3]||(C[3]=Pt(()=>{},["stop"])),"onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{class:"d-none d-md-block pa-0"},{default:l(()=>[t(ne,{modelValue:w.value.Value,"onUpdate:modelValue":C[4]||(C[4]=L=>w.value.Value=L),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:C[5]||(C[5]=Pt(()=>{},["stop"])),"onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),t(It,{class:"pt-2"},{default:l(()=>[t(Q,null,{default:l(()=>[t(O,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:l(()=>[t(ne,{modelValue:G.value,"onUpdate:modelValue":C[6]||(C[6]=L=>G.value=L),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:l(()=>[t(ne,{modelValue:w.value.Value,"onUpdate:modelValue":C[7]||(C[7]=L=>w.value.Value=L),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:l(()=>[t(ne,{modelValue:$.value,"onUpdate:modelValue":C[8]||(C[8]=L=>$.value=L),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:l(()=>[t(ne,{modelValue:ee.value.Value,"onUpdate:modelValue":C[9]||(C[9]=L=>ee.value.Value=L),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:l(()=>[t(ne,{modelValue:ce.value.Value,"onUpdate:modelValue":C[10]||(C[10]=L=>ce.value.Value=L),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:l(()=>[t(ne,{modelValue:oe.value.Value,"onUpdate:modelValue":C[11]||(C[11]=L=>oe.value.Value=L),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":_(Ae),onInput:_(Ae)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(O,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[t(ve,{modelValue:et.value,"onUpdate:modelValue":C[12]||(C[12]=L=>et.value=L),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:y.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),t(O,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:l(()=>[t(ve,{modelValue:tt.value,"onUpdate:modelValue":C[13]||(C[13]=L=>tt.value=L),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:I.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":l(({columns:L,internalItem:fe})=>[P("tr",null,[P("td",{colspan:L.length},[t(Aa,{modelValue:xe.value,"onUpdate:modelValue":C[15]||(C[15]=re=>xe.value=re),registration:fe.raw.registration,"onUpdate:registration":re=>fe.raw.registration=re,accommodations:Ce.value,convention:a.value,extras:Be.value,forms:m.value,interests:Ge.value,tickets:Ye.value,title:`Registration Controls (#${fe.raw.registration.Reference} ${fe.raw.registration.User.DisplayName})`,"use-dialog":!1,venues:He.value,style:{"max-width":"calc(100vw - 48px)"},class:"ml-auto mr-0"},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,is)])]),"item.data-table-expand":l(({internalItem:L})=>[U.value.findIndex(fe=>fe===L.key)>=0?(o(),D(x,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:fe=>U.value.splice(U.value.findIndex(re=>re===L.key),1)},{default:l(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(o(),T(M,{key:0},[k(S(L.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"])):(o(),D(x,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:fe=>U.value.push(L.key)},{default:l(()=>[L.raw.registration.Notes&&L.raw.registration.Notes.length>0?(o(),T(M,{key:0},[k(S(L.raw.registration.Notes.length),1)],64)):N("",!0)]),_:2},1032,["onClick"]))]),bottom:l(()=>[t(me,{fluid:!0},{default:l(()=>[t(Q,{class:"align-center"},{default:l(()=>[t(O,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:l(()=>[t(Gl,{modelValue:R.value,"onUpdate:modelValue":C[16]||(C[16]=L=>R.value=L),length:Math.ceil(j.value/p.value)},null,8,["modelValue","length"])]),_:1}),t(O,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:l(()=>[t(ve,{modelValue:p.value,"onUpdate:modelValue":C[17]||(C[17]=L=>p.value=L),density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}]},null,8,["modelValue"])]),_:1}),t(O,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:l(()=>[t(ne,{modelValue:R.value,"onUpdate:modelValue":C[18]||(C[18]=L=>R.value=L),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(j.value/p.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),t(O,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:l(()=>[P("span",ss,[p.value===-1?(o(),T(M,{key:0},[k(" 1-"+S(j.value)+" of "+S(j.value),1)],64)):(o(),T(M,{key:1},[k(S((R.value-1)*p.value+1)+"-"+S(R.value*p.value>=j.value?j.value:R.value*p.value)+" of "+S(j.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[W(F.headers,L=>({name:`item.${L.key}`,fn:l(({internalItem:fe,index:re})=>[t(si,{header:L,item:fe,accommodations:Ce.value,convention:a.value,extras:Be.value,forms:m.value,interests:Ge.value,tickets:Ye.value,user:_(xa),venues:He.value,modelValue:F.items[re],"onUpdate:modelValue":it=>F.items[re]=it,onOpenActions:Qa,onOpenPayments:Ja,onOpenTags:Xa,onReload:C[14]||(C[14]=it=>Vt({page:R.value,itemsPerPage:p.value,sortBy:Z.value})),onSwitchUser:Za,onShowForm:Wa},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues","modelValue","onUpdate:modelValue"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),ue.value?(o(),D(os,{key:0,title:"Edit Layouts",modelValue:ue.value,"onUpdate:modelValue":C[24]||(C[24]=F=>ue.value=F),convention:a.value,onSave:Ka},null,8,["modelValue","convention"])):N("",!0),Ie.value?(o(),T(M,{key:1},[xe.value?(o(),D(Aa,{key:0,modelValue:xe.value,"onUpdate:modelValue":C[25]||(C[25]=F=>xe.value=F),registration:Ie.value,"onUpdate:registration":C[26]||(C[26]=F=>Ie.value=F),accommodations:Ce.value,convention:a.value,extras:Be.value,forms:m.value,interests:Ge.value,tickets:Ye.value,title:`Registration Controls (#${Ie.value.Reference} ${Ie.value.User.DisplayName})`,"use-dialog":!0,venues:He.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):N("",!0)],64)):N("",!0),at.value&&kt.value&&vt.value?(o(),D(_t,{key:2,modelValue:at.value,"onUpdate:modelValue":C[30]||(C[30]=F=>at.value=F),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[t(Pe,{class:"bg-red-darken-4"},{default:l(()=>[t(Gt,{color:"error"},{default:l(()=>[t(Va,null,{default:l(()=>[k("Submission Editor - Admin Mode")]),_:1}),t(Fe),t(Xl,null,{default:l(()=>[t(x,{icon:"mdi:mdi-window-close",onClick:C[27]||(C[27]=F=>at.value=!1)})]),_:1})]),_:1}),t(Ze,null,{default:l(()=>[t(_l,{modelValue:vt.value,"onUpdate:modelValue":C[28]||(C[28]=F=>vt.value=F),admin:!0,convention:a.value,data:kt.value,editable:!0,"registration-group":Wt.value,onClose:C[29]||(C[29]=F=>{at.value=!1,Vt({page:R.value,itemsPerPage:p.value,sortBy:Z.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):N("",!0)]),_:1}))}});export{Qs as default};
