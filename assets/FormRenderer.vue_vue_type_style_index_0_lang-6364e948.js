import{p as Me,r as E,e as re,W as v,y as yl,ao as nl,as as Fe,a5 as ul,n as Be,ah as bl,s as Ve,u as Re,w as ae,E as Je,au as Il,v as s,H as G,x as pe,P as W,aB as Ul,aC as je,I as ye,a0 as te,a1 as be,a8 as Ye,M as i,V as x,X as J,Q as ee,O as r,a4 as ne,N as k,S as M,K as Te,R as ol,ac as $e,a3 as sl,U as Dl,f as Tl,aD as kl,_ as Cl,ag as ze,a as Vl,aE as Sl,L as El,aF as Qe}from"./index-7b1eb77b.js";import{F as ie}from"./form-29fd1dbb.js";import{S as wl}from"./submission-6136b51d.js";import{a as Al,V as De,u as Ge,m as _l,b as il,c as Ol,d as Rl}from"./VCheckbox-5d16966b.js";import{s as Ee}from"./index-26b71cef.js";import{e as Ll,V as he,a as me,c as Le,d as Se,b as rl}from"./VList-f6b20fe5.js";import{V as z,a as Y}from"./VRow-6372ba71.js";import{m as Ml,u as $l,a as xl,b as Pl,V as qe,c as Fl}from"./copyToClipboard-137a9053.js";import{q as ql,u as Ke,V as we,A as Nl,j as Bl}from"./VContainer-90e5f53a.js";import{d as Yl,_ as Ze}from"./SaveButton.vue_vue_type_script_setup_true_lang-4b98345b.js";import{a as dl}from"./scopeId-3a09694f.js";import{m as Gl,V as ke,a as Ne,b as Kl,c as Hl}from"./VTextField-c1098328.js";import{V as de}from"./VBtn-0a10ab84.js";import{m as Xl,V as el}from"./VAvatar-b4e2e6e9.js";import{V as cl}from"./VForm-8ed2b6c5.js";import{V as Wl}from"./VFileInput-2e0bdfff.js";import{V as Jl}from"./VTextarea-059108ec.js";import{u as jl,f as zl}from"./forwardRefs-a96e62f6.js";import{a as Ql}from"./VChip-67d0b5c1.js";import{G as Zl}from"./userData-2f1dcac3.js";import{v as xe}from"./v4-a960c1f4.js";import{e as et,V as lt,a as tt,c as at}from"./VCard-8d0826c2.js";var se=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(se||{});const ba=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var vl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(vl||{});const Ia=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Ae=e=>{e.sort((y,t)=>(y.Order?y.Order:0)-(t.Order?t.Order:0)),e.forEach((y,t)=>{y.Order=t})},Ua=(e,y)=>{const t=y.indexOf(e);if(t===0)return;const O=e.Order;e.Order=y[t-1].Order,y[t-1].Order=O,Ae(y)},Da=(e,y)=>{const t=y.indexOf(e);if(t>=y.length-1)return;const O=e.Order;e.Order=y[t+1].Order,y[t+1].Order=O,Ae(y)};const nt=(e,y,t)=>e==null||y==null?-1:e.toString().toLocaleLowerCase().indexOf(y.toString().toLocaleLowerCase()),ut=Me({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ot(e,y,t){var D;const O=[],p=(t==null?void 0:t.default)??nt,b=t!=null&&t.filterKeys?nl(t.filterKeys):!1,S=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return O;e:for(let C=0;C<e.length;C++){const c=e[C],l={},d={};let m=-1;if(y&&!(t!=null&&t.noFilter)){if(typeof c=="object"){const U=b||Object.keys(c);for(const n of U){const u=Fe(c,n,c),o=(D=t==null?void 0:t.customKeyFilter)==null?void 0:D[n];if(m=o?o(u,y,c):p(u,y,c),m!==-1&&m!==!1)o?l[n]=m:d[n]=m;else if((t==null?void 0:t.filterMode)==="every")continue e}}else m=p(c,y,c),m!==-1&&m!==!1&&(d.title=m);const T=Object.keys(d).length,a=Object.keys(l).length;if(!T&&!a||(t==null?void 0:t.filterMode)==="union"&&a!==S&&!T||(t==null?void 0:t.filterMode)==="intersection"&&(a!==S||!T))continue}O.push({index:C,matches:{...d,...l}})}return O}function st(e,y,t,O){const p=E([]),b=E(new Map),S=re(()=>O!=null&&O.transform?v(y).map(O==null?void 0:O.transform):v(y));yl(()=>{const C=typeof t=="function"?t():v(t),c=typeof C!="string"&&typeof C!="number"?"":String(C),l=ot(S.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=v(y),m=[],T=new Map;l.forEach(a=>{let{index:U,matches:n}=a;const u=d[U];m.push(u),T.set(u.value,n)}),p.value=m,b.value=T});function D(C){return b.value.get(C.value)}return{filteredItems:p,filteredMatches:b,getMatches:D}}function it(e,y,t){if(y==null)return e;if(Array.isArray(y))throw new Error("Multiple matches is not implemented");return typeof y=="number"&&~y?s(G,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,y)]),s("span",{class:"v-autocomplete__mask"},[e.substr(y,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(y+t)])]):e}const rt=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ml(),...ul(Gl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Xl({transition:!1})},"VAutocomplete"),ll=Be()({name:"VAutocomplete",props:rt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,y){let{slots:t}=y;const{t:O}=bl(),p=E(),b=Ve(!1),S=Ve(!0),D=Ve(!1),C=E(),c=E(),l=Re(e,"menu"),d=re({get:()=>l.value,set:V=>{var H;l.value&&!V&&((H=C.value)!=null&&H.ΨopenChildren)||(l.value=V)}}),m=Ve(-1),T=re(()=>{var V;return(V=p.value)==null?void 0:V.color}),a=re(()=>d.value?e.closeText:e.openText),{items:U,transformIn:n,transformOut:u}=Ll(e),{textColorClasses:o,textColorStyles:_}=ql(T),R=Re(e,"search",""),P=Re(e,"modelValue",[],V=>n(V===null?[null]:nl(V)),V=>{const H=u(V);return e.multiple?H:H[0]??null}),B=jl(),{filteredItems:w,getMatches:I}=st(e,U,()=>S.value?"":R.value),h=re(()=>P.value.map(V=>U.value.find(H=>{const Q=Fe(H.raw,e.itemValue),ge=Fe(V.raw,e.itemValue);return Q===void 0||ge===void 0?!1:e.returnObject?e.valueComparator(Q,ge):e.valueComparator(H.value,V.value)})||V)),f=re(()=>e.hideSelected?w.value.filter(V=>!h.value.some(H=>H.value===V.value)):w.value),L=re(()=>h.value.map(V=>V.props.value)),$=re(()=>h.value[m.value]),A=re(()=>{var H;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&R.value===((H=f.value[0])==null?void 0:H.title))&&f.value.length>0&&!S.value&&!D.value}),N=re(()=>e.hideNoData&&!U.value.length||e.readonly||(B==null?void 0:B.isReadonly.value)),K=E(),{onListScroll:X,onListKeydown:g}=$l(K,p);function F(V){e.openOnClear&&(d.value=!0),R.value=""}function fe(){N.value||(d.value=!0)}function q(V){N.value||(b.value&&(V.preventDefault(),V.stopPropagation()),d.value=!d.value)}function ue(V){var ge,j,oe;if(e.readonly||B!=null&&B.isReadonly.value)return;const H=p.value.selectionStart,Q=L.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(d.value=!0),["Escape"].includes(V.key)&&(d.value=!1),A.value&&["Enter","Tab"].includes(V.key)&&Ie(f.value[0]),V.key==="ArrowDown"&&A.value&&((ge=K.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(m.value<0){V.key==="Backspace"&&!R.value&&(m.value=Q-1);return}const Z=m.value;$.value&&Ie($.value),m.value=Z>=Q-1?Q-2:Z}if(V.key==="ArrowLeft"){if(m.value<0&&H>0)return;const Z=m.value>-1?m.value-1:Q-1;h.value[Z]?m.value=Z:(m.value=-1,p.value.setSelectionRange((j=R.value)==null?void 0:j.length,(oe=R.value)==null?void 0:oe.length))}if(V.key==="ArrowRight"){if(m.value<0)return;const Z=m.value+1;h.value[Z]?m.value=Z:(m.value=-1,p.value.setSelectionRange(0,0))}}}function le(V){R.value=V.target.value}function He(V){if(je(p.value,":autofill")||je(p.value,":-webkit-autofill")){const H=U.value.find(Q=>Q.title===V.target.value);H&&Ie(H)}}function ml(){var V;b.value&&(S.value=!0,(V=p.value)==null||V.focus())}function fl(V){b.value=!0,setTimeout(()=>{D.value=!0})}function gl(V){D.value=!1}function pl(V){(V==null||V===""&&!e.multiple)&&(P.value=[])}const Ce=Ve(!1);function Ie(V){if(e.multiple){const H=L.value.findIndex(Q=>e.valueComparator(Q,V.value));if(H===-1)P.value=[...P.value,V];else{const Q=[...P.value];Q.splice(H,1),P.value=Q}}else P.value=[V],Ce.value=!0,R.value=V.title,d.value=!1,S.value=!0,Je(()=>Ce.value=!1)}return ae(b,(V,H)=>{var Q;V!==H&&(V?(Ce.value=!0,R.value=e.multiple?"":String(((Q=h.value.at(-1))==null?void 0:Q.props.title)??""),S.value=!0,Je(()=>Ce.value=!1)):(!e.multiple&&!R.value?P.value=[]:A.value&&!D.value&&!h.value.some(ge=>{let{value:j}=ge;return j===f.value[0].value})&&Ie(f.value[0]),d.value=!1,R.value="",m.value=-1))}),ae(R,V=>{!b.value||Ce.value||(V&&(d.value=!0),S.value=!V)}),ae(d,()=>{if(!e.hideSelected&&d.value&&h.value.length){const V=f.value.findIndex(H=>h.value.some(Q=>H.value===Q.value));Il&&window.requestAnimationFrame(()=>{var H;V>=0&&((H=c.value)==null||H.scrollToIndex(V))})}}),Ke(()=>{const V=!!(e.chips||t.chip),H=!!(!e.hideNoData||f.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),Q=P.value.length>0,[ge]=ke.filterProps(e);return s(ke,pe({ref:p},ge,{modelValue:R.value,"onUpdate:modelValue":pl,focused:b.value,"onUpdate:focused":j=>b.value=j,validationValue:P.externalValue,dirty:Q,onInput:le,onChange:He,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Q?void 0:e.placeholder,"onClick:clear":F,"onMousedown:control":fe,onKeydown:ue}),{...t,default:()=>s(G,null,[s(xl,pe({ref:C,modelValue:d.value,"onUpdate:modelValue":j=>d.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ml},e.menuProps),{default:()=>[H&&s(he,{ref:K,selected:L.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:g,onFocusin:fl,onFocusout:gl,onScrollPassive:X,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var j,oe,Z;return[(j=t["prepend-item"])==null?void 0:j.call(t),!f.value.length&&!e.hideNoData&&(((oe=t["no-data"])==null?void 0:oe.call(t))??s(me,{title:O(e.noDataText)},null)),s(Pl,{ref:c,renderless:!0,items:f.value},{default:Ue=>{var We;let{item:ce,index:ve,itemRef:hl}=Ue;const Xe=pe(ce.props,{ref:hl,key:ve,active:A.value&&ve===0?!0:void 0,onClick:()=>Ie(ce)});return((We=t.item)==null?void 0:We.call(t,{item:ce,index:ve,props:Xe}))??s(me,Xe,{prepend:_e=>{let{isSelected:Oe}=_e;return s(G,null,[e.multiple&&!e.hideSelected?s(Al,{key:ce.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependIcon&&s(we,{icon:ce.props.prependIcon},null)])},title:()=>{var _e,Oe;return S.value?ce.title:it(ce.title,(_e=I(ce))==null?void 0:_e.title,((Oe=R.value)==null?void 0:Oe.length)??0)}})}}),(Z=t["append-item"])==null?void 0:Z.call(t)]}})]}),h.value.map((j,oe)=>{var ce;function Z(ve){ve.stopPropagation(),ve.preventDefault(),Ie(j)}const Ue={"onClick:close":Z,onMousedown(ve){ve.preventDefault(),ve.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:j.value,class:["v-autocomplete__selection",oe===m.value&&["v-autocomplete__selection--selected",o.value]],style:oe===m.value?_.value:{}},[V?t.chip?s(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>{var ve;return[(ve=t.chip)==null?void 0:ve.call(t,{item:j,index:oe,props:Ue})]}}):s(Ql,pe({key:"chip",closable:e.closableChips,size:"small",text:j.title},Ue),null):((ce=t.selection)==null?void 0:ce.call(t,{item:j,index:oe}))??s("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&oe<h.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[W(",")])])])})]),"append-inner":function(){var Ue;for(var j=arguments.length,oe=new Array(j),Z=0;Z<j;Z++)oe[Z]=arguments[Z];return s(G,null,[(Ue=t["append-inner"])==null?void 0:Ue.call(t,...oe),e.menuIcon?s(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:q,onClick:Ul,"aria-label":O(a.value),title:O(a.value)},null):void 0])}})}),zl({isFocused:b,isPristine:S,menu:d,search:R,filteredItems:w,select:Ie},p)}}),dt={class:"extrasList"},ct=ye({__name:"Extras",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:O=!1,convention:p,disabled:b=!1}=t,S=be(e,"modelValue"),D=Ye.getInstance(),C=E({});try{C.value=JSON.parse(S.value)}catch{}const c=E([]),l=E([]);ae(t,()=>{m()}),ae(C.value,a=>{for(const U in a)if(a[U].checked){const n=c.value.map(u=>{var o;return(o=u.Options)==null?void 0:o.find(_=>_.OptionUUID===U)});if(n&&n.length>0)try{const u=n[0];a[U].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(a[U].choiceId=u.Choices[0].TagUUID),a[U].price=u==null?void 0:u.Price}catch{}}else a[U].choiceId="",a[U].price=0;S.value=JSON.stringify(a),T()});const d=re({get:()=>c.value.map(a=>a.ExtraUUID),set:()=>{}}),m=()=>{var U;const a=((U=t.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:U.Value)||"[]";try{const n=JSON.parse(a);c.value=l.value.filter(u=>n.find(o=>o===u.ExtraUUID))||[],d.value=[...c.value.map(u=>u.ExtraUUID)],c.value.forEach(u=>{var o;(o=u.Options)==null||o.forEach(_=>{C.value[_.OptionUUID]||(C.value[_.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in p&&p.Extras.length?(l.value=p.Extras,m()):"ConventionUUID"in p&&(O?D==null||D.getConventionExtras(p.ConventionUUID).then(a=>{a&&(l.value=a,m())}):D==null||D.getAvailableConventionExtras(p.ConventionUUID).then(a=>{a&&(l.value=a,m())}));const T=(a=void 0)=>{setTimeout(()=>y("change",a),100)};return(a,U)=>(i(),x("div",dt,[J("h4",null,ee(a.label),1),s(he,{opened:d.value,"onUpdate:opened":U[0]||(U[0]=n=>d.value=n)},{default:r(()=>[(i(!0),x(G,null,ne(c.value,n=>(i(),k(rl,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:r(({props:u})=>[s(me,pe({"prepend-icon":"mdi:mdi-group","append-icon":""},u),{default:r(()=>[n.Name?(i(),k(Le,{key:0},{default:r(()=>[J("strong",null,ee(n.Name),1)]),_:2},1024)):M("",!0),n.Description?(i(),k(Se,{key:1,class:"mt-2 d-inline"},{default:r(()=>[W(ee(n.Description),1)]),_:2},1024)):M("",!0)]),_:2},1040)]),default:r(()=>[n.Options?(i(!0),x(G,{key:0},ne(n.Options,u=>(i(),k(me,{key:u.OptionUUID,class:"override-pl"},{default:r(()=>[s(z,null,{default:r(()=>[s(Y,{cols:"12",sm:"6"},{default:r(()=>[s(De,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${v(Ee).currencySymbol}${u.Price})`:""}`,modelValue:C.value[u.OptionUUID].checked,"onUpdate:modelValue":o=>C.value[u.OptionUUID].checked=o,disabled:v(b),"hide-details":"",onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&C.value[u.OptionUUID].checked?(i(),k(Y,{key:0,cols:"12",sm:"6"},{default:r(()=>[s(qe,{items:u.Choices.sort((o,_)=>o.Title.localeCompare(_.Title)).map(o=>({value:o.TagUUID,title:o.Title})),modelValue:C.value[u.OptionUUID].choiceId,"onUpdate:modelValue":o=>C.value[u.OptionUUID].choiceId=o,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(b),"hide-details":"",onChange:T},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):M("",!0)]),_:2},1024)]),_:2},1024))),128)):M("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const vt={class:"interestList"},mt=ye({__name:"Interests",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:O=!1,convention:p,disabled:b=!1}=t,S=be(e,"modelValue"),D=Ye.getInstance(),C=E({});try{C.value=JSON.parse(S.value)}catch{}const c=E([]),l=E([]);ae(C.value,a=>{S.value=JSON.stringify(a)});const d=E([]),m=()=>{var U;const a=((U=t.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:U.Value)||"[]";try{const n=JSON.parse(a);c.value=l.value.filter(u=>n.find(o=>o===u.InterestUUID))||[],d.value=[...c.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in p&&(O?D==null||D.getConventionInterests(p.ConventionUUID).then(a=>{a&&(l.value=a,m())}):D==null||D.getConventionInterests(p.ConventionUUID).then(a=>{a&&(l.value=a,m())})),ae(t,()=>{m()});const T=(a=void 0)=>{setTimeout(()=>y("change",a),100)};return(a,U)=>(i(),x("div",vt,[J("h4",null,ee(a.label),1),s(he,{opened:d.value,"onUpdate:opened":U[0]||(U[0]=n=>d.value=n)},{default:r(()=>[(i(!0),x(G,null,ne(c.value.sort((n,u)=>n.Order>u.Order?1:n.Order==u.Order?0:-1),n=>(i(),k(me,{key:n.InterestUUID},{default:r(()=>[s(z,null,{default:r(()=>[s(Y,null,{default:r(()=>[s(De,{label:`${n.Name} ${n.Price&&n.Price>0?`(${v(Ee).currencySymbol}${n.Price})`:""}`,modelValue:C.value[n.InterestUUID],"onUpdate:modelValue":u=>C.value[n.InterestUUID]=u,disabled:v(b),messages:n.Description,onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const tl=(e,y,t)=>{if(t>=e.length){let O=t-e.length+1;for(;O--;)e.push(void 0)}e.splice(t,0,e.splice(y,1)[0])},Pe=e=>(Ae(e),e),Ta=e=>(y,t)=>y[e]<t[e]?-1:y[e]>t[e]?1:0,ft={class:"ticketList"},gt={key:0,class:"text-orange-darken-1"},pt=ye({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:O=!1,convention:p,disabled:b=!1,registrationGroup:S=void 0}=t,D=be(e,"modelValue"),C=Ye.getInstance(),c=E({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(D.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const l=E([]),d=E([]),m=E([]),T=E({required:(o,_=void 0)=>()=>{if(b||!(S!=null&&S.Registration.Leader))return!0;if(_==null){if(c.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(o&&o.ComponentsRequired>0&&c.value.Ticket.includes(o.TicketUUID||"")){let R=0;if(o.TicketComponents.forEach(P=>{c.value.ComponentsChecked.forEach(B=>{P.TicketUUID===B&&(R+=1)})}),R<o.ComponentsRequired)return`Must select ticket ${o.ComponentsRequired} component${o.ComponentsRequired===1?"":"s"}`}}return!0}}),a=()=>{var _;const o=((_=t.items.find(R=>R.Title==="SelectedTickets"))==null?void 0:_.Value)||"[]";try{const R=JSON.parse(o);l.value=d.value.filter(P=>P.Type==="TICKET_TYPE_GROUP"&&R.find(B=>B===P.TicketUUID))||[],m.value=[...l.value.filter(P=>P.Type==="TICKET_TYPE_GROUP").map(P=>P.TicketUUID)]}catch{}};if("ConventionUUID"in p)if(O)C==null||C.getConventionTickets(p.ConventionUUID).then(o=>{o&&(d.value=o,a())});else{const o=t.items.find(_=>_.Title==="SelectedTickets");o&&(C==null||C.getFieldTickets(o.FieldUUID).then(_=>{_&&(d.value=_,a())}))}ae(t,()=>{a()});const U=o=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const _=[];l.value.forEach(R=>{(c.value.Ticket.includes(R.TicketUUID)||c.value.ComponentsChecked.includes(R.TicketUUID))&&_.push(...R.AddonTickets.map(P=>P.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(R=>_.includes(R)),u(o)},n=o=>{const _=d.value.find(R=>R.TicketUUID===c.value.Ticket[0]);if(_)for(;c.value.ComponentsChecked.length>_.ComponentsRequired;)c.value.ComponentsChecked.shift();u(o)},u=(o=void 0)=>{D.value=JSON.stringify(c.value),setTimeout(()=>y("change",o),100)};try{S!=null&&S.TicketData&&(c.value=JSON.parse(S.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),u())}catch{}return(o,_)=>{var R;return i(),x("div",ft,[J("h4",null,[W(ee(o.label)+" ",1),(R=v(S))!=null&&R.Registration.Leader?M("",!0):(i(),x("small",gt,"(controlled by group leader)"))]),s(he,{opened:m.value,"onUpdate:opened":_[4]||(_[4]=P=>m.value=P)},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(l.value.filter(P=>P.Type===v(vl).TICKET_TYPE_GROUP)),P=>(i(),x(G,{key:P.TicketUUID},[P.Tickets.length>0?(i(),k(rl,{key:0,value:P.TicketUUID},{activator:r(({props:B})=>[s(me,pe(B,{"prepend-icon":"mdi:mdi-group"}),{default:r(()=>[s(Le,null,{default:r(()=>[J("strong",null,ee(P.Name),1)]),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[W(ee(P.Description),1)]),_:2},1024)]),_:2},1040)]),default:r(()=>[(i(!0),x(G,null,ne(P.Tickets,B=>(i(),k(me,{key:B.TicketUUID,class:"override-pl"},{default:r(()=>{var w;return[s(Se,{class:"d-inline"},{default:r(()=>[W(ee(B.Description),1)]),_:2},1024),s(De,{modelValue:c.value.Ticket,"onUpdate:modelValue":_[0]||(_[0]=I=>c.value.Ticket=I),value:B.TicketUUID,onChange:U,rules:[T.value.required(B)],"validate-on":"submit",disabled:v(b)||!((w=v(S))!=null&&w.Registration.Leader)},{label:r(()=>[s(we,{icon:B.RequiresAccommodation?"mdi:mdi-home":B.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+ee(`${B.Name} ${B.Price>0?`(${v(Ee).currencySymbol}${B.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&B.TicketUUID===c.value.Ticket[0]?(i(),x(G,{key:0},[B.AddonTickets.length?(i(),k(he,{key:0},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(B.AddonTickets),I=>(i(),x(G,{key:I==null?void 0:I.TicketUUID},[I?(i(),k(me,{key:0},{default:r(()=>[s(Le,null,{default:r(()=>{var h;return[s(De,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":_[1]||(_[1]=f=>c.value.AddonsChecked=f),value:I.TicketUUID,onChange:_[2]||(_[2]=f=>{c.value.ComponentsChecked=[],u(f)}),disabled:v(b)||!((h=v(S))!=null&&h.Registration.Leader)},{label:r(()=>[s(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+ee(`${I.Name} ${I.Price>0?`(${v(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[W(ee(I.Description),1)]),_:2},1024)]),_:2},1024)):M("",!0)],64))),128))]),_:2},1024)):M("",!0),B.TicketComponents.length?(i(),k(he,{key:1},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(B.TicketComponents),I=>(i(),x(G,{key:I==null?void 0:I.TicketUUID},[I?(i(),k(me,{key:0},{default:r(()=>[s(Le,null,{default:r(()=>{var h;return[s(De,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":_[3]||(_[3]=f=>c.value.ComponentsChecked=f),value:I.TicketUUID,onChange:n,rules:[T.value.required(B,I)],"validate-on":"submit",disabled:v(b)||!((h=v(S))!=null&&h.Registration.Leader)},{label:r(()=>[s(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),W(" "+ee(`${I.Name} ${I.Price>0?`(${v(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Se,null,{default:r(()=>[W(ee(I.Description),1)]),_:2},1024)]),_:2},1024)):M("",!0)],64))),128))]),_:2},1024)):M("",!0)],64)):M("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):M("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ht={key:0},yt=J("strong",null,"Your Sharing Group",-1),bt={class:"d-flex flex-wrap my-2"},It=J("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Ut={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Dt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Tt=J("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),kt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Ct={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Vt=["href","onClick"],St=J("br",null,null,-1),Et=J("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),wt=J("strong",null,"Your Groups Accommodation",-1),At=J("br",null,null,-1),_t=J("small",null,"(in order of preference, controlled by group leader)",-1),Ot=J("strong",null,"Accommodation Options",-1),Rt=J("br",null,null,-1),Lt=J("strong",null,"Your Chosen Accommodation",-1),Mt=J("small",null,"(in order of preference)",-1),$t=ye({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:O=!1,convention:p,disabled:b}=t,S=be(e,"modelValue"),D=Ge(t,y,void 0,void 0,"items"),C=sl(),c=dl(),l=Dl.getInstance(),d=E(Te(S.value)),m=E([]),T=E(),a=E({sharing:!1}),U=()=>{try{const g=JSON.parse(t.data);g&&(a.value=g)}catch{}};U(),ae(t,()=>{U(),t.registrationGroup&&(m.value=t.registrationGroup.Members,T.value=t.registrationGroup.Registration)}),ae(d,g=>{S.value=Te(g)},{deep:!0});const n=E(""),u=E(!1),o=()=>{var g;(g=T.value)!=null&&g.Leader&&C.getRegistrationInvite(p.ConventionUUID).then(F=>{if(F){const fe=new URL(location.href);fe.searchParams.set("token",F),n.value=fe.toString()}})},_=()=>{Fl(n.value),o(),u.value=!0,setTimeout(()=>u.value=!1,2200)},R=(g=void 0)=>{setTimeout(()=>y("change",g),100)},P=E({required:g=>!t.required||g.length>0||"Selections Required"}),B=g=>g?`${g.Reference?`#${g.Reference}`:"(not registered)"} ${g.Name}`:"",w=()=>{var g;l.emit("registration.group.leave",(g=T.value)==null?void 0:g.RegistrationUUID)},I=g=>{l.emit("registration.group.remove.member",g)},h=E([]);ae(D,()=>{f()});const f=()=>{O?C.getConventionAccommodation(p.ConventionUUID).then(g=>{h.value=g.filter(F=>!!(D!=null&&D.value.find(fe=>fe.Value===F.AccommodationUUID)))||[]}):D.value.length>0&&C.getFieldAccommodation(D.value[0].FieldUUID).then(g=>{h.value=g.filter(F=>!!(D!=null&&D.value.find(fe=>fe.Value===F.AccommodationUUID)))||[]})};f(),(()=>{var g;if(t.registrationGroup)if(m.value=t.registrationGroup.Members,T.value=t.registrationGroup.Registration,(g=T.value)!=null&&g.Leader)o();else try{d.value=JSON.parse(t.registrationGroup.AccommodationData),R()}catch{}})();const $=E({column:0,id:""}),A=()=>{!b&&!d.value.includes($.value.id)&&($.value.column===0&&$.value.id!==""&&d.value.push($.value.id),R())},N=()=>{const g=d.value.findIndex(F=>F===$.value.id);!b&&g>=0&&(d.value.splice(g,1),R())},K=()=>{if(b||$.value.column!==1)return;const g=d.value.findIndex(F=>F===$.value.id);g<=0||(tl(d.value,g,g-1),R())},X=()=>{if(b||$.value.column!==1)return;const g=d.value.findIndex(F=>F===$.value.id);g>=d.value.length-1||(tl(d.value,g,g+1),R())};return(g,F)=>{var fe;return i(),x(G,null,[J("h4",null,ee(g.label),1),s(z,null,{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>{var q,ue;return[m.value&&T.value&&a.value.sharing?(i(),x("div",ht,[yt,!v(b)&&((q=m.value.find(le=>le.IsLeader))==null?void 0:q.UUID)!==T.value.RegistrationUUID?(i(),k(de,{key:0,color:"red",variant:"text",onClick:w},{default:r(()=>[W("(leave group)")]),_:1})):M("",!0),J("dl",bt,[It,J("dd",Ut,[s(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((ue=m.value.find(le=>le.IsLeader))==null?void 0:ue.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),J("div",Dt,ee(B(m.value.find(le=>le.IsLeader))),1)]),(i(!0),x(G,null,ne(m.value,le=>(i(),x(G,{key:le.UUID},[le.IsLeader?M("",!0):(i(),x(G,{key:0},[Tt,J("dd",kt,[s(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(le.UserUUID),height:"32",width:"32"},null,8,["src"]),J("div",Ct,[W(ee(B(le))+" ",1),T.value.Leader?(i(),k(de,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:He=>I(le.UUID),disabled:v(b)},null,8,["onClick","disabled"])):M("",!0)])])],64))],64))),128))]),s(Yl,{modelValue:u.value,"onUpdate:modelValue":F[0]||(F[0]=le=>u.value=le),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),n.value&&T.value.Leader&&!v(b)?(i(),x(G,{key:1},[J("a",{href:n.value,onClick:ol(_,["prevent"]),class:"text-white text-decoration-none"},[s(de,{color:"blue",class:"mb-2"},{default:r(()=>[W("Get Invite Link")]),_:1})],8,Vt),St,Et],64)):M("",!0)])):M("",!0)]}),_:1})]),_:1}),T.value&&!T.value.Leader?(i(),k(z,{key:0},{default:r(()=>[s(Y,{cols:"10",md:"5"},{default:r(()=>[wt,At,_t,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(d.value.map(q=>h.value.find(ue=>ue.AccommodationUUID==q)).filter(q=>q!==void 0),(q,ue)=>(i(),x(G,null,[q?(i(),k(me,{key:q.AccommodationUUID,title:`${ue+1}. ${q.Name}`,class:$e($.value.column===1&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):M("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(i(),k(z,{key:1},{default:r(()=>[s(Y,{cols:"12",md:"5"},{default:r(()=>[Ot,Rt,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(h.value,q=>(i(),k(me,{key:q.AccommodationUUID,title:q.Name,class:$e($.value.column===0&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ue=>$.value={column:0,id:q.AccommodationUUID},"append-icon":v(b)?"":"mdi:mdi-gesture-tap",onDblclick:F[1]||(F[1]=ue=>A())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(b)?M("",!0):(i(),k(Y,{key:0,cols:"12",md:"1"},{default:r(()=>[s(z,{class:"d-md-none"},{default:r(()=>[s(Y,{cols:"12",class:"text-center"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:F[2]||(F[2]=q=>A()),color:"primary",title:"Select"}),W("   "),s(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:F[3]||(F[3]=q=>N()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(z,{class:"d-none d-md-flex h-100 align-content-center"},{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-right",size:"small",onClick:F[4]||(F[4]=q=>A()),color:"primary",title:"Select"})]),_:1}),s(Y,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-left",size:"small",onClick:F[5]||(F[5]=q=>N()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(Y,{cols:"10",md:"5"},{default:r(()=>[Lt,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(d.value.map(q=>h.value.find(ue=>ue.AccommodationUUID==q)).filter(q=>q!==void 0),(q,ue)=>(i(),x(G,null,[q?(i(),k(me,{key:q.AccommodationUUID,title:`${ue+1}. ${q.Name}`,class:$e($.value.column===1&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>$.value={column:1,id:(q==null?void 0:q.AccommodationUUID)||""},"append-icon":v(b)?"":"mdi:mdi-gesture-tap",onDblclick:F[6]||(F[6]=le=>N())},null,8,["title","class","onClick","append-icon"])):M("",!0)],64))),256))]),_:1}),Mt]),_:1}),v(b)?M("",!0):(i(),k(Y,{key:1,cols:"2",md:"1"},{default:r(()=>[s(z,{class:"d-flex h-100 align-content-center mt-3"},{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:F[7]||(F[7]=q=>K()),color:"primary",title:"Higher Priority"})]),_:1}),s(Y,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:F[8]||(F[8]=q=>X()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(fe=T.value)!=null&&fe.Leader?(i(),k(Ne,{key:2,modelValue:S.value,"onUpdate:modelValue":F[9]||(F[9]=q=>S.value=q),disabled:v(b)||!1,"persistent-hint":g.persistentHint||!1,"error-messages":g.errorMessages||"",rules:[P.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):M("",!0)],64)}}});const xt=ye({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,O=Ge(t,y,void 0,void 0,"items"),p=be(e,"modelValue"),b=E({required:l=>!t.required||!!l||"Required.",min:l=>{var o,_;const d=new Date,m=d.getFullYear(),T=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),a=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),U=((o=O.value.find(R=>R.Title=="MIN_AGE"))==null?void 0:o.Value)||"18",n=((_=O.value.find(R=>R.Title=="BEFORE_DATE"))==null?void 0:_.Value)||`${m}-${T}-${a}`,u=C(n);return D(l,n,parseInt(U))||`You must be at least ${U} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),S=()=>(y("blur"),!(b.value.min(p.value||"")!==!0||b.value.required(p.value||"")!==!0)),D=(l,d,m)=>{if(l>=d)return!1;const T=C(l),U=C(d).getTime()-T.getTime(),n=1e3*60*60*24*365.25;return U/n>=m},C=l=>{const[d,m,T]=l.split("-");return new Date(parseInt(d),parseInt(m)-1,parseInt(T))},c=(l=void 0)=>{setTimeout(()=>y("change",l),100)};return(l,d)=>(i(),k(ke,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=m=>p.value=m),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[b.value.required,b.value.min],onBlur:S,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Pt={class:"text-center"},Ft={key:0},qt=["src"],Nt=ye({__name:"BadgeImage",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,O=be(e,"modelValue"),p=E({}),b=()=>{p.value.left=parseInt(getComputedStyle(l.value).left),p.value.top=parseInt(getComputedStyle(l.value).top),p.value.height=l.value.height,p.value.width=l.value.width,O.value=JSON.stringify(p.value)},S=dl(),D=E(),C=E(!0),c=E(),l=E(),d=E(""),m=E(0),T=E(),a=E({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),U=E(280),n=E(280);t.items.find(A=>{if(A.Title==="TargetWidth")return n.value=parseInt(A.Value,10)||280,!0}),t.items.find(A=>{if(A.Title==="TargetHeight")return U.value=parseInt(A.Value,10)||280,!0});const u=re(()=>({"--preview-width":`${n.value}px`,"--preview-height":`${U.value}px`})),o=E(!1);try{p.value=JSON.parse(O.value||"{}"),p.value.fileUUID&&(d.value=S.GetBadgeImageURL(p.value.fileUUID))}catch{}const _=E({required:A=>!t.required||!!A||"Required.",saved:()=>!C.value||"File not uploaded."}),R=()=>(y("blur"),_.value.required(O.value||"")!==!0),P=(A=void 0)=>{w().then(()=>{B(),setTimeout(()=>y("change",A),100)})},B=()=>{c.value.files.length>0&&(d.value=URL.createObjectURL(c.value.files[0]))},w=async()=>{var N;const A=new FormData((N=D.value)==null?void 0:N.$el);C.value=!1,S.SaveFormFile(A).then(K=>{K.Saved&&(C.value=!0,p.value.fileUUID=K.FileUUID,o.value=!0)}).catch(()=>{})},I=()=>{l.value.style.left="0px",l.value.style.top="0px",l.value.width>l.value.height?l.value.width=n.value*(l.value.width/l.value.height):l.value.width=n.value,l.value.classList.remove("d-none")},h=(A,N=0,K=void 0)=>{if(K&&K.type)switch(K.type){case"touchstart":case"touchend":K.preventDefault();break}let X=500;if(!m.value)m.value=Date.now();else{const g=Date.now()-m.value;g>=3e3?X=1:g>=2500?X=2:g>=2e3?X=5:g>=1500?X=12:g>=1e3?X=25:g>=500?X=50:g>=250&&(X=100)}switch(N!==X&&(clearInterval(T.value),T.value=setInterval(()=>{h(A,X)},X)),A){case 0:m.value=0,clearInterval(T.value),b();break;case 6:l.value.width-=1;break;case 5:l.value.width+=1;break;case 1:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)-1}px`;break;case 2:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)+1}px`;break;case 3:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)+1}px`;break;case 4:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)-1}px`;break}L()},f=A=>{switch(A.type){case"touchstart":A.preventDefault(),a.value.imageX=parseInt(getComputedStyle(l.value).left),a.value.imageY=parseInt(getComputedStyle(l.value).top),a.value.mouseX=A.touches[0].clientX,a.value.mouseY=A.touches[0].clientY,a.value.mouseDown=!0;break;case"mousedown":a.value.imageX=parseInt(getComputedStyle(l.value).left),a.value.imageY=parseInt(getComputedStyle(l.value).top),a.value.mouseX=A.clientX,a.value.mouseY=A.clientY,a.value.mouseDown=!0;break;case"touchend":A.preventDefault();case"mouseup":a.value.mouseDown=!1,b();break;case"touchmove":if(!a.value.mouseDown)return;l.value.style.left=`${a.value.imageX+(A.touches[0].clientX-a.value.mouseX)}px`,l.value.style.top=`${a.value.imageY+(A.touches[0].clientY-a.value.mouseY)}px`;break;case"mousemove":if(!a.value.mouseDown)return;l.value.style.left=`${a.value.imageX+(A.clientX-a.value.mouseX)}px`,l.value.style.top=`${a.value.imageY+(A.clientY-a.value.mouseY)}px`;break;case"dragstart":A.preventDefault();break;case"keydown":switch(A.key){case"ArrowUp":A.preventDefault(),h(1);break;case"ArrowRight":A.preventDefault(),h(2);break;case"ArrowDown":A.preventDefault(),h(3);break;case"ArrowLeft":A.preventDefault(),h(4);break;case"+":A.preventDefault(),h(5);break;case"-":A.preventDefault(),h(6);break}break;case"keyup":h(0),b();break}L()},L=()=>{if(l.value.width<n.value&&(l.value.width=n.value),l.value.height<U.value){const A=U.value-l.value.height,N=l.value.width/l.value.height;l.value.width+=Math.ceil(A*N)}(parseInt(getComputedStyle(l.value).left)||0)>0&&(l.value.style.left="0px"),(parseInt(getComputedStyle(l.value).top)||0)>0&&(l.value.style.top="0px"),(parseInt(getComputedStyle(l.value).left)||0)<0-(l.value.width-n.value)&&(l.value.style.left=`${0-(l.value.width-n.value)}px`),(parseInt(getComputedStyle(l.value).top)||0)<0-(l.value.height-U.value)&&(l.value.style.top=`${0-(l.value.height-U.value)}px`)},$=()=>{try{clearInterval(T.value)}catch{}a.value.mouseDown=!1,m.value=0,b()};return window.addEventListener("mouseup",$),window.addEventListener("mousemove",f),window.addEventListener("touchend",$),window.addEventListener("touchmove",f),Tl(()=>{window.removeEventListener("mouseup",$),window.removeEventListener("mousemove",f),window.removeEventListener("touchend",$),window.removeEventListener("touchmove",f)}),(A,N)=>(i(),x("div",{style:kl(u.value)},[s(cl,{ref_key:"badgeImageForm",ref:D,enctype:"multipart/form-data"},{default:r(()=>[s(z,null,{default:r(()=>[s(Y,null,{default:r(()=>[s(Wl,{label:A.label||"",name:A.name||"",hint:A.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:c,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[_.value.required],"error-messages":A.errorMessages||"","persistent-hint":A.persistentHint||!1,disabled:!C.value||A.disabled||!1,"hide-details":"",onChange:P,onBlur:R},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),J("p",Pt,[C.value?M("",!0):(i(),x("small",Ft,"File Uploading"))])]),_:1})]),_:1}),s(z,null,{default:r(()=>[s(Y,{class:"text-center"},{default:r(()=>[W(" Preview "),J("div",{class:"image-preview my-auto mx-auto",onMousemove:f,onMousedown:f,onMouseup:f,onTouchstart:f,onTouchmove:f,onTouchend:f},[J("img",{src:d.value,ref_key:"imageDisplay",ref:l,alt:"Your badge image",onLoad:I,onDragstart:f,onKeydown:f,onKeyup:f,tabindex:"0",class:"d-none"},null,40,qt)],32)]),_:1})]),_:1}),o.value?(i(),k(z,{key:0,class:"my-auto mx-auto",style:{"max-width":"280px"}},{default:r(()=>[s(Y,null,{default:r(()=>[s(de,{icon:"mdi:mdi-plus",color:"primary",onMousedown:N[0]||(N[0]=K=>h(5,0,K)),onMouseup:N[1]||(N[1]=K=>h(0,0,K)),onTouchstart:N[2]||(N[2]=K=>h(5,0,K)),onTouchend:N[3]||(N[3]=K=>h(0,0,K))})]),_:1}),s(Y,{class:"text-right"},{default:r(()=>[s(de,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:N[4]||(N[4]=K=>h(6,0,K)),onMouseup:N[5]||(N[5]=K=>h(0,0,K)),onTouchstart:N[6]||(N[6]=K=>h(6,0,K)),onTouchend:N[7]||(N[7]=K=>h(0,0,K))})]),_:1})]),_:1})):M("",!0)]),_:1},512)],4))}});const Bt=Cl(Nt,[["__scopeId","data-v-3af4637d"]]),Yt=Me({..._l({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Gt=Be()({name:"VRadio",props:Yt(),setup(e,y){let{slots:t}=y;return Ke(()=>s(il,pe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}});const Kt=Me({height:{type:[Number,String],default:"auto"},...Kl(),...ul(Ol(),["multiple"]),trueIcon:{type:ze,default:"$radioOn"},falseIcon:{type:ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ht=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Kt(),emits:{"update:modelValue":e=>!0},setup(e,y){let{attrs:t,slots:O}=y;const p=Vl(),b=re(()=>e.id||`radio-group-${p}`),S=Re(e,"modelValue");return Ke(()=>{const[D,C]=Sl(t),[c,l]=Ne.filterProps(e),[d,m]=il.filterProps(e),T=O.label?O.label({label:e.label,props:{for:b.value}}):e.label;return s(Ne,pe({class:["v-radio-group",e.class],style:e.style},D,c,{modelValue:S.value,"onUpdate:modelValue":a=>S.value=a,id:b.value}),{...O,default:a=>{let{id:U,messagesId:n,isDisabled:u,isReadonly:o}=a;return s(G,null,[T&&s(Hl,{id:U.value},{default:()=>[T]}),s(Rl,pe(d,{id:U.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:o.value,"aria-labelledby":T?U.value:void 0,multiple:!1},C,{modelValue:S.value,"onUpdate:modelValue":_=>S.value=_}),O)])}})}),{}}}),al=ye({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:O=!1,disabled:p=!1,persistentHint:b=!1,required:S=!1}=t,D=E(""),C=be(e,"modelValue"),c=Ge(t,y,void 0,void 0,"field"),l=E(Te(c.value)),d=E({maxlength:n=>!t.maxLength||n.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!t.minLength||n.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${n.length})`,required:n=>!t.required||!!n.replace(/\s/g,"")||"Required field."}),m=E(!1),T=E([]),a=E("");try{const n=JSON.parse(C.value);Array.isArray(n)?T.value=n:typeof n=="boolean"?m.value=n:a.value=C.value}catch{m.value=!1,T.value=[],a.value=C.value}ae(m,()=>{C.value=JSON.stringify(m.value),y("input"),y("change")}),ae(T,()=>{C.value=JSON.stringify(T.value),y("input"),y("change")},{deep:!0}),ae(a,()=>{C.value=a.value,y("input"),y("change")}),ae(c.value,()=>{l.value.Type!==c.value.Type?(l.value=Te(c.value),m.value=!1,T.value=[],a.value=""):l.value=Te(c.value)});const U=(n=void 0)=>{y("change",n)};return(n,u)=>l.value.Type===v(se).TEXT?(i(),k(ke,{key:0,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=o=>a.value=o),name:n.name||"",hint:l.value.Hint,label:`${l.value.Label}${v(S)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).DATE?(i(),k(ke,{key:1,modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=o=>a.value=o),type:"date",name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).NUMBER?(i(),k(ke,{key:2,modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=o=>a.value=o),type:"number",name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).TEXTAREA?(i(),k(Jl,{key:3,modelValue:a.value,"onUpdate:modelValue":u[3]||(u[3]=o=>a.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).CHECKBOX?(i(),x(G,{key:4},[l.value.Multiple?(i(!0),x(G,{key:0},ne(l.value.Values,o=>(i(),k(De,{key:o.ID,modelValue:T.value,"onUpdate:modelValue":u[4]||(u[4]=_=>T.value=_),name:n.name||"",hint:l.value.Hint,label:o.Title,value:o.Value,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,rules:[d.value.required],onChange:U},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(i(),k(De,{key:1,modelValue:m.value,"onUpdate:modelValue":u[5]||(u[5]=o=>m.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,required:v(S),rules:[o=>!v(S)||!!o||"You must tick to continue!"],onChange:U},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===v(se).SELECT?(i(),x(G,{key:5},[!l.value.Autofill&&l.value.Multiple?(i(),k(qe,{key:0,modelValue:T.value,"onUpdate:modelValue":u[6]||(u[6]=o=>T.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(i(),k(ll,{key:1,modelValue:T.value,"onUpdate:modelValue":u[7]||(u[7]=o=>T.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(i(),k(ll,{key:3,modelValue:a.value,"onUpdate:modelValue":u[9]||(u[9]=o=>a.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):M("",!0):(i(),k(qe,{key:2,modelValue:a.value,"onUpdate:modelValue":u[8]||(u[8]=o=>a.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(p)||!1,"persistent-hint":v(b)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===v(se).RADIO?(i(),k(Ht,{key:6,modelValue:a.value,"onUpdate:modelValue":u[10]||(u[10]=o=>a.value=o),name:n.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,rules:[d.value.required],onChange:U},{default:r(()=>[(i(!0),x(G,null,ne(l.value.Values,o=>(i(),k(Gt,{key:o.Value,label:o.Title,value:o.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).ACCOMMODATION?(i(),k($t,{key:7,modelValue:T.value,"onUpdate:modelValue":u[11]||(u[11]=o=>T.value=o),name:n.name,admin:v(O),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).AGE?(i(),k(xt,{key:8,modelValue:a.value,"onUpdate:modelValue":u[12]||(u[12]=o=>a.value=o),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,onChange:U},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).BADGE_IMAGE?(i(),k(Bt,{key:9,modelValue:a.value,"onUpdate:modelValue":u[13]||(u[13]=o=>a.value=o),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,onChange:U},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).EXTRAS?(i(),k(ct,{key:10,modelValue:a.value,"onUpdate:modelValue":u[14]||(u[14]=o=>a.value=o),admin:v(O),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).INTERESTS?(i(),k(mt,{key:11,modelValue:a.value,"onUpdate:modelValue":u[15]||(u[15]=o=>a.value=o),admin:v(O),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).TICKET?(i(),k(pt,{key:12,modelValue:a.value,"onUpdate:modelValue":u[16]||(u[16]=o=>a.value=o),admin:v(O),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(p)||!1,"persistent-hint":v(b),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):M("",!0)}}),Xt={key:0,class:"my-2 text-white text-center"},Wt={key:1,class:"admin-header my-2 text-white text-center"},Jt=["innerHTML"],jt=["innerHTML"],ka=ye({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:te(["close"],["update:modelValue"]),setup(e,{emit:y}){const t=be(e,"modelValue");Ae(t.value.Sections),t.value.Sections.forEach(w=>{w.Fields&&Ae(w.Fields)});const O=E(),p=Zl(),b=sl(),S=E(!1),D=E(!1),C=E(!1),c=E(!1),l=E(!1),d=E(!1),m=E(!1),T=E(!1),a=E(!1),U=E(!1),n=E(!1),u=E((()=>{if(e.data!==void 0){const I=Te(e.data);return t.value.Sections.forEach(h=>{h.Fields&&h.Fields.forEach(f=>{const L=e.data.Data.find($=>$.SectionFieldUUID===f.SectionFieldUUID&&$.SectionFieldUUID==f.SectionFieldUUID);if(L)f.Value=L.Data;else{const $={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:h.ID,SectionUUID:h.SectionUUID,SectionFieldID:f.ID,SectionFieldUUID:f.SectionFieldUUID,Data:f.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};I.Data.push($),f.Value=""}})}),I}const w={ID:0,SubmissionUUID:xe(),FormID:t.value.ID,FormUUID:t.value.FormUUID,UserID:(p==null?void 0:p.ID)||0,UserUUID:(p==null?void 0:p.UserUUID)||"",Data:[],Status:wl.SUBMISSION_STATUS_OPEN};return w.Data=t.value.Sections.map(I=>I.Fields?I.Fields.map(h=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:w.ID,SubmissionUUID:w.SubmissionUUID,SectionID:I.ID,SectionUUID:I.SectionUUID,SectionFieldID:h.ID,SectionFieldUUID:h.SectionFieldUUID,Data:""})):[]).flat(),w})()),o=(w,I,h)=>{const f=u.value.Data.find(L=>L.SectionUUID===w&&L.SectionFieldUUID===I);f&&(f.Data=h)},_=(w,I,h,f,L)=>w&&w.Type===ie.FORM_TYPE_REGISTRATION?I?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:h?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_ACCOMMODATION?h?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_DEALER?f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_BADGE?L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(w&&w.Type===ie.FORM_TYPE_ADDITIONAL,"/"),R=({callback:w})=>{b.getRegistrationByConvention(e.convention.ConventionUUID).then(I=>{w&&w("Loading"),b.getAvailableConventionForms(e.convention.ConventionUUID).then(h=>{I.Submissions.forEach((X,g)=>{X.Form||(I.Submissions[g].Form=h.find(F=>F.FormUUID===X.FormUUID))});const f=I.Submissions.find(X=>X.FormUUID===u.value.FormUUID),L=I.Submissions.find(X=>{var g;return((g=X.Form)==null?void 0:g.Type)===ie.FORM_TYPE_ACCOMMODATION}),$=I.Submissions.find(X=>{var g;return((g=X.Form)==null?void 0:g.Type)===ie.FORM_TYPE_ADDITIONAL}),A=I.Submissions.find(X=>{var g;return((g=X.Form)==null?void 0:g.Type)===ie.FORM_TYPE_DEALER}),N=I.Submissions.find(X=>{var g;return((g=X.Form)==null?void 0:g.Type)===ie.FORM_TYPE_BADGE}),K=_(f==null?void 0:f.Form,L==null?void 0:L.Form,A==null?void 0:A.Form,N==null?void 0:N.Form,$==null?void 0:$.Form);Qe.push(K)})})},P=({callback:w})=>{var I;(I=O.value)==null||I.validate().then(h=>{h.valid?b.saveSubmission(u.value).then(f=>{f?setTimeout(()=>{B(f,w,1)},1e3):w&&w("Failed to process request")}).catch(()=>{w&&w("Failed to process request")}):w&&w("Errors in form detected, please review and try again.")})},B=(w,I,h=1)=>{b.checkSubmission(w).then(f=>{if(f)if(f.Ready&&f.Submission){if(S.value=!1,u.value=f.Submission,I&&I("Saved"),e.admin)y("close");else if(f.Forms&&f.Forms.length>0){const L=f.Forms.find(g=>g.FormUUID===u.value.FormUUID),$=f.Forms.find(g=>g.Type===ie.FORM_TYPE_ACCOMMODATION),A=f.Forms.find(g=>g.Type===ie.FORM_TYPE_DEALER),N=f.Forms.find(g=>g.Type===ie.FORM_TYPE_BADGE),K=f.Forms.find(g=>g.Type===ie.FORM_TYPE_ADDITIONAL),X=_(L,$,A,N,K);Qe.push(X)}}else{if(h>5&&(S.value=!0),h>10&&(D.value=!0),h>20&&(C.value=!0),h>30&&(c.value=!0),h>40&&(l.value=!0),h>50&&(d.value=!0),h>60&&(m.value=!0),h>70&&(T.value=!0),h>80&&(a.value=!0),h>90&&(U.value=!0),h>100&&(n.value=!0),h>200){I&&(S.value=!1,D.value=!1,C.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,a.value=!1,U.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{B(w,I,h+1)},h<20?1e3*h:2e4)}else I&&(S.value=!1,D.value=!1,C.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,a.value=!1,U.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."))}).catch(()=>{I&&(S.value=!1,D.value=!1,C.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,a.value=!1,U.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."))})};return(w,I)=>{const h=El("router-link");return i(),k(Bl,null,{default:r(()=>[s(cl,{ref_key:"formValidator",ref:O,autocomplete:"off",onSubmit:I[1]||(I[1]=ol(()=>{},["prevent"]))},{default:r(()=>[t.value.Heading?(i(),x("h1",Xt,ee(t.value.Heading),1)):M("",!0),w.admin?(i(),x("h2",Wt," (Admin Mode) ")):M("",!0),t.value.Description?(i(),x("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:t.value.Description},null,8,Jt)):M("",!0),(i(!0),x(G,null,ne(t.value.Sections,f=>(i(),k(et,{key:`section_${t.value.ID}.${f.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:r(()=>[f.Heading?(i(),k(lt,{key:0},{default:r(()=>[W(ee(f.Heading),1)]),_:2},1024)):M("",!0),f.Description?(i(),k(tt,{key:1,class:"text-wrap"},{default:r(()=>[J("div",{innerHTML:f.Description},null,8,jt)]),_:2},1024)):M("",!0),f.Fields?(i(),k(at,{key:2},{default:r(()=>[(i(!0),x(G,null,ne(f.Fields,L=>(i(),x(G,{key:`field_${t.value.ID}.${f.ID}.${L.ID}`},[L.Field?(i(),k(z,{key:0},{default:r(()=>[s(Y,null,{default:r(()=>[w.editable?(i(),k(al,{key:0,name:L.SectionFieldUUID,field:L.Field,modelValue:L.Value,"onUpdate:modelValue":$=>L.Value=$,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:L.Required,"min-length":L.MinLength,"max-length":L.MaxLength,"persistent-hint":!0,onChange:$=>o(f.SectionUUID,L.SectionFieldUUID,L.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(i(),k(al,{key:1,name:L.SectionFieldUUID,field:L.Field,modelValue:L.Value,"onUpdate:modelValue":$=>L.Value=$,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:L.Required,"min-length":L.MinLength,"max-length":L.MaxLength,"persistent-hint":!0,disabled:"",onChange:$=>o(f.SectionUUID,L.SectionFieldUUID,L.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):M("",!0)],64))),128))]),_:2},1024)):M("",!0)]),_:2},1024))),128)),w.preview?M("",!0):(i(),x(G,{key:3},[s(z,null,{default:r(()=>[w.admin?(i(),k(Y,{key:1,class:"text-right"},{default:r(()=>[s(de,{color:"red",onClick:I[0]||(I[0]=f=>y("close"))},{default:r(()=>[W("Cancel")]),_:1})]),_:1})):(i(),k(Y,{key:0,class:"text-right"},{default:r(()=>[s(h,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:r(()=>[s(de,{color:"red"},{default:r(()=>[W("Close")]),_:1})]),_:1})]),_:1})),w.admin||w.editable?(i(),k(Y,{key:2,class:"text-left"},{default:r(()=>[s(Ze,{onClick:P,type:"submit"})]),_:1})):(i(),k(Y,{key:3,class:"text-left"},{default:r(()=>[s(Ze,{onClick:R,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),S.value?(i(),k(z,{key:0},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):M("",!0),D.value?(i(),k(z,{key:1},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):M("",!0),C.value?(i(),k(z,{key:2},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):M("",!0),c.value?(i(),k(z,{key:3},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Reticulating splines ")]),_:1})]),_:1})):M("",!0),l.value?(i(),k(z,{key:4},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):M("",!0),d.value?(i(),k(z,{key:5},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):M("",!0),m.value?(i(),k(z,{key:6},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):M("",!0),T.value?(i(),k(z,{key:7},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):M("",!0),a.value?(i(),k(z,{key:8},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):M("",!0),U.value?(i(),k(z,{key:9},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):M("",!0),n.value?(i(),k(z,{key:10},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[W(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):M("",!0)],64))]),_:1},512)]),_:1})}}});export{ba as F,vl as T,ll as V,al as _,Da as a,Ia as b,se as c,ka as d,Ta as e,ut as f,Ua as m,Ae as s,st as u};
