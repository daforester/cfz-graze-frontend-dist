import{i as ue,M as z,N as re,W as Ve,r as V,w as ne,c as Te,n,B as q,D as X,y as K,f as m,v as o,F,Q as Z,m as fe,q as b,A as R,x as Y,C as v,k as me,z as Me,a0 as be,P as Ce,E as He,b as Ye,an as Xe,_ as _e,p as qe,d as xe,R as Je,a4 as we,S as We,u as Ke,aK as je,l as ze,aL as Ee}from"./index-ueWa9fY2.js";import{F as le}from"./form-0fJbSFPv.js";import{S as Qe}from"./submission-40fey8Hx.js";import{u as Se}from"./useModel-VCQPTgOc.js";import{s as ce}from"./index-OKsbKlsK.js";import{V as ie,b as Pe,a as se,c as ge,d as ve}from"./VList-unIAQIij.js";import{V as _,a as N}from"./VRow-gI5NkL7C.js";import{V as de}from"./VCheckbox-qSBh-zSq.js";import{V as De}from"./VSelect-7SmNbcSM.js";import{T as Ze,V as Ae}from"./VAutocomplete-joEZePlf.js";import{V as ye,u as Ne,a as el}from"./VContainer-7bP-n_go.js";import{c as ll}from"./copyToClipboard-aCoRGJiH.js";import{a as tl,_ as Oe}from"./SaveButton.vue_vue_type_script_setup_true_lang-UtBavbX4.js";import{u as Be}from"./VSpacer-3WWN8GoN.js";import{V as j,a as al}from"./VBtn-0EIFTArv.js";import{V as $e}from"./VAvatar-omnRSJ8i.js";import{a as ke,V as he,m as nl,b as ol}from"./VTextField-gsp785fL.js";import{V as sl}from"./VFileInput-7XIcXXIb.js";import{V as Fe}from"./VForm-9ttllz_T.js";import{V as il}from"./VTextarea-d40yTLhc.js";import{m as ul,a as Ge,b as rl,c as dl}from"./VCheckboxBtn-UUJPOHs1.js";import{G as ml}from"./userData-ugm4DX5j.js";import{v as Ue}from"./v4-yQnnJER4.js";import{e as vl,a as cl,b as fl,c as pl}from"./VCard-7bgZhcUU.js";var ee=(a=>(a.ACCOMMODATION="ACCOMMODATION",a.AGE="AGE",a.BADGE_IMAGE="BADGE_IMAGE",a.CHECKBOX="CHECKBOX",a.DATE="DATE",a.EXTRAS="EXTRAS",a.INTERESTS="INTERESTS",a.RADIO="RADIO",a.SELECT="SELECT",a.TEXT="TEXT",a.TEXTAREA="TEXTAREA",a.TICKET="TICKET",a.NUMBER="NUMBER",a))(ee||{});const Et=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}],pe=a=>{a.sort((x,p)=>(x.Order?x.Order:0)-(p.Order?p.Order:0)),a.forEach((x,p)=>{x.Order=p})},At=(a,x)=>{const p=x.indexOf(a);if(p===0)return;const A=a.Order;a.Order=x[p-1].Order,x[p-1].Order=A,pe(x)},Ot=(a,x)=>{const p=x.indexOf(a);if(p>=x.length-1)return;const A=a.Order;a.Order=x[p+1].Order,x[p+1].Order=A,pe(x)},gl={class:"extrasList"},hl=ue({__name:"Extras",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:x}){const p=a,{admin:A=!1,convention:O,disabled:y=!1}=p,w=re(a,"modelValue"),M=x,$=Ve.getInstance(),S=V({});try{S.value=JSON.parse(w.value)}catch{}const c=V([]),l=V([]);ne(p,()=>{i()}),ne(S.value,d=>{for(const D in d)if(d[D].checked){const s=c.value.map(t=>{var U;return(U=t.Options)==null?void 0:U.find(u=>u.OptionUUID===D)});if(s&&s.length>0)try{const t=s[0];d[D].choiceId===""&&t&&t.Choices&&t.Choices.length>0&&(d[D].choiceId=t.Choices[0].TagUUID),d[D].price=t==null?void 0:t.Price}catch{}}else d[D].choiceId="",d[D].price=0;w.value=JSON.stringify(d),C()});const f=Te({get:()=>c.value.map(d=>d.ExtraUUID),set:()=>{}}),i=()=>{var D;const d=((D=p.items.find(s=>s.Title==="SelectedExtras"))==null?void 0:D.Value)||"[]";try{const s=JSON.parse(d);c.value=l.value.filter(t=>s.find(U=>U===t.ExtraUUID))||[],f.value=[...c.value.map(t=>t.ExtraUUID)],c.value.forEach(t=>{var U;(U=t.Options)==null||U.forEach(u=>{S.value[u.OptionUUID]||(S.value[u.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in O&&O.Extras.length?(l.value=O.Extras,i()):"ConventionUUID"in O&&(A?$==null||$.getConventionExtras(O.ConventionUUID).then(d=>{d&&(l.value=d,i())}):$==null||$.getAvailableConventionExtras(O.ConventionUUID).then(d=>{d&&(l.value=d,i())}));const C=(d=void 0)=>{setTimeout(()=>M("change",d),100)};return(d,D)=>(n(),q("div",gl,[X("h4",null,K(d.label),1),m(ie,{opened:f.value,"onUpdate:opened":D[0]||(D[0]=s=>f.value=s)},{default:o(()=>[(n(!0),q(F,null,Z(c.value,s=>(n(),b(Pe,{key:s.ExtraUUID,value:s.ExtraUUID},{activator:o(({props:t})=>[m(se,fe({"prepend-icon":"mdi:mdi-group","append-icon":""},t),{default:o(()=>[s.Name?(n(),b(ge,{key:0},{default:o(()=>[X("strong",null,K(s.Name),1)]),_:2},1024)):R("",!0),s.Description?(n(),b(ve,{key:1,class:"mt-2 d-inline"},{default:o(()=>[Y(K(s.Description),1)]),_:2},1024)):R("",!0)]),_:2},1040)]),default:o(()=>[s.Options?(n(!0),q(F,{key:0},Z(s.Options,t=>(n(),b(se,{key:t.OptionUUID,class:"override-pl"},{default:o(()=>[m(_,null,{default:o(()=>[m(N,{cols:"12",sm:"6"},{default:o(()=>[m(de,{label:`${t.Name} ${t.Price&&t.Price!==0?`(${v(ce).currencySymbol}${t.Price})`:""}`,modelValue:S.value[t.OptionUUID].checked,"onUpdate:modelValue":U=>S.value[t.OptionUUID].checked=U,disabled:v(y),"hide-details":"",onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t.Choices&&t.Choices.length>1&&S.value[t.OptionUUID].checked?(n(),b(N,{key:0,cols:"12",sm:"6"},{default:o(()=>[m(De,{items:t.Choices.sort((U,u)=>U.Title.localeCompare(u.Title)).map(U=>({value:U.TagUUID,title:U.Title})),modelValue:S.value[t.OptionUUID].choiceId,"onUpdate:modelValue":U=>S.value[t.OptionUUID].choiceId=U,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(y),"hide-details":"",onChange:C},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):R("",!0)]),_:2},1024)]),_:2},1024))),128)):R("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}}),bl={class:"interestList"},yl=ue({__name:"Interests",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:x}){const p=a,{admin:A=!1,convention:O,disabled:y=!1}=p,w=re(a,"modelValue"),M=x,$=Ve.getInstance(),S=V({});try{S.value=JSON.parse(w.value)}catch{}const c=V([]),l=V([]);ne(S.value,d=>{w.value=JSON.stringify(d)});const f=V([]),i=()=>{var D;const d=((D=p.items.find(s=>s.Title==="SelectedInterests"))==null?void 0:D.Value)||"[]";try{const s=JSON.parse(d);c.value=l.value.filter(t=>s.find(U=>U===t.InterestUUID))||[],f.value=[...c.value.map(t=>t.InterestUUID)]}catch{}};"ConventionUUID"in O&&(A?$==null||$.getConventionInterests(O.ConventionUUID).then(d=>{d&&(l.value=d,i())}):$==null||$.getConventionInterests(O.ConventionUUID).then(d=>{d&&(l.value=d,i())})),ne(p,()=>{i()});const C=(d=void 0)=>{setTimeout(()=>M("change",d),100)};return(d,D)=>(n(),q("div",bl,[X("h4",null,K(d.label),1),m(ie,{opened:f.value,"onUpdate:opened":D[0]||(D[0]=s=>f.value=s)},{default:o(()=>[(n(!0),q(F,null,Z(c.value.sort((s,t)=>s.Order>t.Order?1:s.Order==t.Order?0:-1),s=>(n(),b(se,{key:s.InterestUUID},{default:o(()=>[m(_,null,{default:o(()=>[m(N,null,{default:o(()=>[m(de,{label:`${s.Name} ${s.Price&&s.Price>0?`(${v(ce).currencySymbol}${s.Price})`:""}`,modelValue:S.value[s.InterestUUID],"onUpdate:modelValue":t=>S.value[s.InterestUUID]=t,disabled:v(y),messages:s.Description,onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}}),Re=(a,x,p)=>{if(p>=a.length){let A=p-a.length+1;for(;A--;)a.push(void 0)}a.splice(p,0,a.splice(x,1)[0])},Ie=a=>(pe(a),a),$t=a=>(x,p)=>x[a]<p[a]?-1:x[a]>p[a]?1:0,Ul={class:"ticketList"},Il={key:0,class:"text-orange-darken-1"},Dl=ue({__name:"Tickets",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:x}){const p=a,{admin:A=!1,convention:O,disabled:y=!1,registrationGroup:w=void 0}=p,M=re(a,"modelValue"),$=x,S=Ve.getInstance(),c=V({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(M.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const l=V([]),f=V([]),i=V([]),C=V({required:(U,u=void 0)=>()=>{if(y||!(w!=null&&w.Registration.Leader))return!0;if(u==null){if(c.value.Ticket.length===0&&p.required)return"Must select at least one ticket option.";if(U&&U.ComponentsRequired>0&&c.value.Ticket.includes(U.TicketUUID||"")){let B=0;if(U.TicketComponents.forEach(H=>{c.value.ComponentsChecked.forEach(G=>{H.TicketUUID===G&&(B+=1)})}),B<U.ComponentsRequired)return`Must select ticket ${U.ComponentsRequired} component${U.ComponentsRequired===1?"":"s"}`}}return!0}}),d=()=>{var u;const U=((u=p.items.find(B=>B.Title==="SelectedTickets"))==null?void 0:u.Value)||"[]";try{const B=JSON.parse(U);l.value=f.value.filter(H=>H.Type==="TICKET_TYPE_GROUP"&&B.find(G=>G===H.TicketUUID))||[],i.value=[...l.value.filter(H=>H.Type==="TICKET_TYPE_GROUP").map(H=>H.TicketUUID)]}catch{}};if("ConventionUUID"in O)if(A)S==null||S.getConventionTickets(O.ConventionUUID).then(U=>{U&&(f.value=U,d())});else{const U=p.items.find(u=>u.Title==="SelectedTickets");U&&(S==null||S.getFieldTickets(U.FieldUUID).then(u=>{u&&(f.value=u,d())}))}ne(p,()=>{d()});const D=U=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const u=[];l.value.forEach(B=>{(c.value.Ticket.includes(B.TicketUUID)||c.value.ComponentsChecked.includes(B.TicketUUID))&&u.push(...B.AddonTickets.map(H=>H.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(B=>u.includes(B)),t(U)},s=U=>{const u=f.value.find(B=>B.TicketUUID===c.value.Ticket[0]);if(u)for(;c.value.ComponentsChecked.length>u.ComponentsRequired;)c.value.ComponentsChecked.shift();t(U)},t=(U=void 0)=>{M.value=JSON.stringify(c.value),setTimeout(()=>$("change",U),100)};try{w!=null&&w.TicketData&&(c.value=JSON.parse(w.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),t())}catch{}return(U,u)=>{var B;return n(),q("div",Ul,[X("h4",null,[Y(K(U.label)+" ",1),(B=v(w))!=null&&B.Registration.Leader?R("",!0):(n(),q("small",Il,"(controlled by group leader)"))]),m(ie,{opened:i.value,"onUpdate:opened":u[4]||(u[4]=H=>i.value=H)},{default:o(()=>[(n(!0),q(F,null,Z(v(Ie)(l.value.filter(H=>H.Type===v(Ze).TICKET_TYPE_GROUP)),H=>(n(),q(F,{key:H.TicketUUID},[H.Tickets.length>0?(n(),b(Pe,{key:0,value:H.TicketUUID},{activator:o(({props:G})=>[m(se,fe(G,{"prepend-icon":"mdi:mdi-group"}),{default:o(()=>[m(ge,null,{default:o(()=>[X("strong",null,K(H.Name),1)]),_:2},1024),m(ve,{class:"d-inline"},{default:o(()=>[Y(K(H.Description),1)]),_:2},1024)]),_:2},1040)]),default:o(()=>[(n(!0),q(F,null,Z(H.Tickets,G=>(n(),b(se,{key:G.TicketUUID,class:"override-pl"},{default:o(()=>{var T;return[m(ve,{class:"d-inline"},{default:o(()=>[Y(K(G.Description),1)]),_:2},1024),m(de,{modelValue:c.value.Ticket,"onUpdate:modelValue":u[0]||(u[0]=g=>c.value.Ticket=g),value:G.TicketUUID,onChange:D,rules:[C.value.required(G)],"validate-on":"submit",disabled:v(y)||!((T=v(w))!=null&&T.Registration.Leader)},{label:o(()=>[m(ye,{icon:G.RequiresAccommodation?"mdi:mdi-home":G.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${G.Name} ${G.Price>0?`(${v(ce).currencySymbol}${G.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&G.TicketUUID===c.value.Ticket[0]?(n(),q(F,{key:0},[G.AddonTickets.length?(n(),b(ie,{key:0},{default:o(()=>[(n(!0),q(F,null,Z(v(Ie)(G.AddonTickets),g=>(n(),q(F,{key:g==null?void 0:g.TicketUUID},[g?(n(),b(se,{key:0},{default:o(()=>[m(ge,null,{default:o(()=>{var E;return[m(de,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":u[1]||(u[1]=k=>c.value.AddonsChecked=k),value:g.TicketUUID,onChange:u[2]||(u[2]=k=>{c.value.ComponentsChecked=[],t(k)}),disabled:v(y)||!((E=v(w))!=null&&E.Registration.Leader)},{label:o(()=>[m(ye,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${g.Name} ${g.Price>0?`(${v(ce).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),m(ve,{class:"d-inline"},{default:o(()=>[Y(K(g.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0),G.TicketComponents.length?(n(),b(ie,{key:1},{default:o(()=>[(n(!0),q(F,null,Z(v(Ie)(G.TicketComponents),g=>(n(),q(F,{key:g==null?void 0:g.TicketUUID},[g?(n(),b(se,{key:0},{default:o(()=>[m(ge,null,{default:o(()=>{var E;return[m(de,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":u[3]||(u[3]=k=>c.value.ComponentsChecked=k),value:g.TicketUUID,onChange:s,rules:[C.value.required(G,g)],"validate-on":"submit",disabled:v(y)||!((E=v(w))!=null&&E.Registration.Leader)},{label:o(()=>[m(ye,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${g.Name} ${g.Price>0?`(${v(ce).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),m(ve,null,{default:o(()=>[Y(K(g.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0)],64)):R("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):R("",!0)],64))),128))]),_:1},8,["opened"])])}}}),kl={key:0},Vl=X("strong",null,"Your Sharing Group",-1),Tl={class:"d-flex flex-wrap my-2"},Cl=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Sl={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},wl={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},El=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Al={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Ol={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},$l=["href"],Rl=X("br",null,null,-1),Ll=X("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Ml=X("strong",null,"Your Groups Accommodation",-1),ql=X("br",null,null,-1),xl=X("small",null,"(in order of preference, controlled by group leader)",-1),Pl=X("strong",null,"Accommodation Options",-1),Nl=X("br",null,null,-1),Bl=X("strong",null,"Your Chosen Accommodation",-1),Fl=X("small",null,"(in order of preference)",-1),Gl=ue({__name:"Accommodation",props:z({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change","update:items"],["update:modelValue"]),setup(a,{emit:x}){const p=a,{admin:A=!1,convention:O,disabled:y}=p,w=x,M=re(a,"modelValue"),$=Se(p,w,void 0,void 0,"items"),S=Ce(),c=Be(),l=He.getInstance(),f=V(me(M.value)),i=V([]),C=V(),d=V({sharing:!1}),D=()=>{try{const e=JSON.parse(p.data);e&&(d.value=e)}catch{}};D(),ne(p,()=>{D(),p.registrationGroup&&(i.value=p.registrationGroup.Members,C.value=p.registrationGroup.Registration)}),ne(f,e=>{M.value=me(e)},{deep:!0});const s=V(""),t=V(!1),U=()=>{var e;(e=C.value)!=null&&e.Leader&&S.getRegistrationInvite(O.ConventionUUID).then(r=>{if(r){const W=new URL(location.href);W.searchParams.set("token",r),s.value=W.toString()}})},u=()=>{ll(s.value),U(),t.value=!0,setTimeout(()=>t.value=!1,2200)},B=(e=void 0)=>{setTimeout(()=>w("change",e),100)},H=V({required:e=>!p.required||e.length>0||"Selections Required"}),G=e=>e?`${e.Reference?`#${e.Reference}`:"(not registered)"} ${e.Name}`:"",T=()=>{var e;l.emit("registration.group.leave",(e=C.value)==null?void 0:e.RegistrationUUID)},g=e=>{l.emit("registration.group.remove.member",e)},E=V([]);ne($,()=>{k()});const k=()=>{A?S.getConventionAccommodation(O.ConventionUUID).then(e=>{E.value=e.filter(r=>!!($!=null&&$.value.find(W=>W.Value===r.AccommodationUUID)))||[]}):$.value.length>0&&S.getFieldAccommodation($.value[0].FieldUUID).then(e=>{E.value=e.filter(r=>!!($!=null&&$.value.find(W=>W.Value===r.AccommodationUUID)))||[]})};k(),(()=>{var e;if(p.registrationGroup)if(i.value=p.registrationGroup.Members,C.value=p.registrationGroup.Registration,(e=C.value)!=null&&e.Leader)U();else try{f.value=JSON.parse(p.registrationGroup.AccommodationData),B()}catch{}})();const h=V({column:0,id:""}),J=()=>{!y&&!f.value.includes(h.value.id)&&(h.value.column===0&&h.value.id!==""&&f.value.push(h.value.id),B())},te=()=>{const e=f.value.findIndex(r=>r===h.value.id);!y&&e>=0&&(f.value.splice(e,1),B())},oe=()=>{if(y||h.value.column!==1)return;const e=f.value.findIndex(r=>r===h.value.id);e<=0||(Re(f.value,e,e-1),B())},I=()=>{if(y||h.value.column!==1)return;const e=f.value.findIndex(r=>r===h.value.id);e>=f.value.length-1||(Re(f.value,e,e+1),B())};return(e,r)=>{var W;return n(),q(F,null,[X("h4",null,K(e.label),1),m(_,null,{default:o(()=>[m(N,{cols:"12"},{default:o(()=>{var L,ae;return[i.value&&C.value&&d.value.sharing?(n(),q("div",kl,[Vl,!v(y)&&((L=i.value.find(Q=>Q.IsLeader))==null?void 0:L.UUID)!==C.value.RegistrationUUID?(n(),b(j,{key:0,color:"red",variant:"text",onClick:T},{default:o(()=>[Y("(leave group)")]),_:1})):R("",!0),X("dl",Tl,[Cl,X("dd",Sl,[m($e,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((ae=i.value.find(Q=>Q.IsLeader))==null?void 0:ae.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),X("div",wl,K(G(i.value.find(Q=>Q.IsLeader))),1)]),(n(!0),q(F,null,Z(i.value,Q=>(n(),q(F,{key:Q.UUID},[Q.IsLeader?R("",!0):(n(),q(F,{key:0},[El,X("dd",Al,[m($e,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(Q.UserUUID),height:"32",width:"32"},null,8,["src"]),X("div",Ol,[Y(K(G(Q))+" ",1),C.value.Leader?(n(),b(j,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:nt=>g(Q.UUID),disabled:v(y)},null,8,["onClick","disabled"])):R("",!0)])])],64))],64))),128))]),m(tl,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=Q=>t.value=Q),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),s.value&&C.value.Leader&&!v(y)?(n(),q(F,{key:1},[X("a",{href:s.value,onClick:Me(u,["prevent"]),class:"text-white text-decoration-none"},[m(j,{color:"blue",class:"mb-2"},{default:o(()=>[Y("Get Invite Link")]),_:1})],8,$l),Rl,Ll],64)):R("",!0)])):R("",!0)]}),_:1})]),_:1}),C.value&&!C.value.Leader?(n(),b(_,{key:0},{default:o(()=>[m(N,{cols:"10",md:"5"},{default:o(()=>[Ml,ql,xl,m(ie,null,{default:o(()=>[(n(!0),q(F,null,Z(f.value.map(L=>E.value.find(ae=>ae.AccommodationUUID==L)).filter(L=>L!==void 0),(L,ae)=>(n(),q(F,null,[L?(n(),b(se,{key:L.AccommodationUUID,title:`${ae+1}. ${L.Name}`,class:be(h.value.column===1&&h.value.id===L.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):R("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(n(),b(_,{key:1},{default:o(()=>[m(N,{cols:"12",md:"5"},{default:o(()=>[Pl,Nl,m(ie,null,{default:o(()=>[(n(!0),q(F,null,Z(E.value,L=>(n(),b(se,{key:L.AccommodationUUID,title:L.Name,class:be(h.value.column===0&&h.value.id===L.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ae=>h.value={column:0,id:L.AccommodationUUID},"append-icon":v(y)?"":"mdi:mdi-gesture-tap",onDblclick:r[1]||(r[1]=ae=>J())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(y)?R("",!0):(n(),b(N,{key:0,cols:"12",md:"1"},{default:o(()=>[m(_,{class:"d-md-none"},{default:o(()=>[m(N,{cols:"12",class:"text-center"},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-down",size:"small",onClick:r[2]||(r[2]=L=>J()),color:"primary",title:"Select"}),Y("   "),m(j,{icon:"mdi:mdi-arrow-up",size:"small",onClick:r[3]||(r[3]=L=>te()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),m(_,{class:"d-none d-md-flex h-100 align-content-center"},{default:o(()=>[m(N,{cols:"12"},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-right",size:"small",onClick:r[4]||(r[4]=L=>J()),color:"primary",title:"Select"})]),_:1}),m(N,{cols:"12"},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-left",size:"small",onClick:r[5]||(r[5]=L=>te()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),m(N,{cols:"10",md:"5"},{default:o(()=>[Bl,m(ie,null,{default:o(()=>[(n(!0),q(F,null,Z(f.value.map(L=>E.value.find(ae=>ae.AccommodationUUID==L)).filter(L=>L!==void 0),(L,ae)=>(n(),q(F,null,[L?(n(),b(se,{key:L.AccommodationUUID,title:`${ae+1}. ${L.Name}`,class:be(h.value.column===1&&h.value.id===L.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Q=>h.value={column:1,id:(L==null?void 0:L.AccommodationUUID)||""},"append-icon":v(y)?"":"mdi:mdi-gesture-tap",onDblclick:r[6]||(r[6]=Q=>te())},null,8,["title","class","onClick","append-icon"])):R("",!0)],64))),256))]),_:1}),Fl]),_:1}),v(y)?R("",!0):(n(),b(N,{key:1,cols:"2",md:"1"},{default:o(()=>[m(_,{class:"d-flex h-100 align-content-center mt-3"},{default:o(()=>[m(N,{cols:"12"},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-up",size:"small",onClick:r[7]||(r[7]=L=>oe()),color:"primary",title:"Higher Priority"})]),_:1}),m(N,{cols:"12"},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-down",size:"small",onClick:r[8]||(r[8]=L=>I()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(W=C.value)!=null&&W.Leader?(n(),b(ke,{key:2,modelValue:M.value,"onUpdate:modelValue":r[9]||(r[9]=L=>M.value=L),disabled:v(y)||!1,"persistent-hint":e.persistentHint||!1,"error-messages":e.errorMessages||"",rules:[H.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):R("",!0)],64)}}}),Hl=ue({__name:"AgeCheck",props:z({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["blur","change","update:items"],["update:modelValue"]),setup(a,{emit:x}){const p=x,A=a,O=Se(A,p,void 0,void 0,"items"),y=re(a,"modelValue"),w=V({required:l=>!A.required||!!l||"Required.",min:l=>{var U,u;const f=new Date,i=f.getFullYear(),C=(f.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),d=f.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),D=((U=O.value.find(B=>B.Title=="MIN_AGE"))==null?void 0:U.Value)||"18",s=((u=O.value.find(B=>B.Title=="BEFORE_DATE"))==null?void 0:u.Value)||`${i}-${C}-${d}`,t=S(s);return $(l,s,parseInt(D))||`You must be at least ${D} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),M=()=>(p("blur"),!(w.value.min(y.value||"")!==!0||w.value.required(y.value||"")!==!0)),$=(l,f,i)=>{if(l>=f)return!1;const C=S(l),D=S(f).getTime()-C.getTime(),s=1e3*60*60*24*365.25;return D/s>=i},S=l=>{const[f,i,C]=l.split("-");return new Date(parseInt(f),parseInt(i)-1,parseInt(C))},c=(l=void 0)=>{setTimeout(()=>p("change",l),100)};return(l,f)=>(n(),b(he,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=i=>y.value=i),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[w.value.required,w.value.min],onBlur:M,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Yl={class:"text-center"},Xl={key:0},_l={key:0,class:"image-progress my-auto mx-auto"},Jl=["src"],Wl=ue({__name:"BadgeImage",props:z({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["blur","change","update:items"],["update:modelValue"]),setup(a,{emit:x}){const p=x,A=a,O=re(a,"modelValue"),y=V({}),w=()=>{y.value.left=parseInt(getComputedStyle(i.value).left),y.value.top=parseInt(getComputedStyle(i.value).top),y.value.height=i.value.height,y.value.width=i.value.width,O.value=JSON.stringify(y.value)},M=Ce(),$=Be(),S=V(),c=V(""),l=V(!0),f=V(),i=V(),C=V(""),d=V(!1),D=V(0),s=V(),t=V({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),U=V(280),u=V(280);A.items.find(I=>{if(I.Title==="TargetWidth")return u.value=parseInt(I.Value,10)||280,!0}),A.items.find(I=>{if(I.Title==="TargetHeight")return U.value=parseInt(I.Value,10)||280,!0});const B=Te(()=>({"--preview-width":`${u.value}px`,"--preview-height":`${U.value}px`})),H=V(!1);try{y.value=JSON.parse(O.value||"{}"),y.value.fileUUID&&(C.value=$.GetBadgeImageURL(y.value.fileUUID))}catch{}A.registration&&M.getConBadgeDisplayName(A.registration.RegistrationUUID).then(I=>{I&&(c.value=I)}).catch(()=>{});const G=V({required:I=>!A.required||!!I||"Required.",saved:()=>!l.value||"File not uploaded."}),T=()=>(p("blur"),G.value.required(O.value||"")!==!0),g=(I=void 0)=>{k().then(()=>{E(),setTimeout(()=>p("change",I),100)})},E=()=>{f.value.files.length>0&&(C.value=URL.createObjectURL(f.value.files[0]))},k=async()=>{var e;const I=new FormData((e=S.value)==null?void 0:e.$el);l.value=!1,d.value=!0,$.SaveFormFile(I).then(r=>{r.Saved&&(d.value=!1,l.value=!0,y.value.fileUUID=r.FileUUID,H.value=!0)}).catch(()=>{})},P=()=>{i.value.style.left="0px",i.value.style.top="0px",i.value.width>i.value.height?i.value.width=u.value*(i.value.width/i.value.height):i.value.width=u.value,i.value.classList.remove("d-none")},h=(I,e=0,r=void 0)=>{if(r&&r.type)switch(r.type){case"touchstart":case"touchend":r.preventDefault();break}let W=500;if(!D.value)D.value=Date.now();else{const L=Date.now()-D.value;L>=3e3?W=1:L>=2500?W=2:L>=2e3?W=5:L>=1500?W=12:L>=1e3?W=25:L>=500?W=50:L>=250&&(W=100)}switch(e!==W&&(clearInterval(s.value),s.value=setInterval(()=>{h(I,W)},W)),I){case 0:D.value=0,clearInterval(s.value),w();break;case 6:i.value.width-=1;break;case 5:i.value.width+=1;break;case 1:i.value.style.top=`${(parseInt(getComputedStyle(i.value).top)||0)-1}px`;break;case 2:i.value.style.left=`${(parseInt(getComputedStyle(i.value).left)||0)+1}px`;break;case 3:i.value.style.top=`${(parseInt(getComputedStyle(i.value).top)||0)+1}px`;break;case 4:i.value.style.left=`${(parseInt(getComputedStyle(i.value).left)||0)-1}px`;break}te()},J=I=>{switch(I.type){case"touchstart":I.preventDefault(),t.value.imageX=parseInt(getComputedStyle(i.value).left),t.value.imageY=parseInt(getComputedStyle(i.value).top),t.value.mouseX=I.touches[0].clientX,t.value.mouseY=I.touches[0].clientY,t.value.mouseDown=!0;break;case"mousedown":t.value.imageX=parseInt(getComputedStyle(i.value).left),t.value.imageY=parseInt(getComputedStyle(i.value).top),t.value.mouseX=I.clientX,t.value.mouseY=I.clientY,t.value.mouseDown=!0;break;case"touchend":I.preventDefault();case"mouseup":t.value.mouseDown=!1,w();break;case"touchmove":if(!t.value.mouseDown)return;i.value.style.left=`${t.value.imageX+(I.touches[0].clientX-t.value.mouseX)}px`,i.value.style.top=`${t.value.imageY+(I.touches[0].clientY-t.value.mouseY)}px`;break;case"mousemove":if(!t.value.mouseDown)return;i.value.style.left=`${t.value.imageX+(I.clientX-t.value.mouseX)}px`,i.value.style.top=`${t.value.imageY+(I.clientY-t.value.mouseY)}px`;break;case"dragstart":I.preventDefault();break;case"keydown":switch(I.key){case"ArrowUp":I.preventDefault(),h(1);break;case"ArrowRight":I.preventDefault(),h(2);break;case"ArrowDown":I.preventDefault(),h(3);break;case"ArrowLeft":I.preventDefault(),h(4);break;case"+":I.preventDefault(),h(5);break;case"-":I.preventDefault(),h(6);break}break;case"keyup":h(0),w();break}te()},te=()=>{if(i.value.width<u.value&&(i.value.width=u.value),i.value.height<U.value){const I=U.value-i.value.height,e=i.value.width/i.value.height;i.value.width+=Math.ceil(I*e)}(parseInt(getComputedStyle(i.value).left)||0)>0&&(i.value.style.left="0px"),(parseInt(getComputedStyle(i.value).top)||0)>0&&(i.value.style.top="0px"),(parseInt(getComputedStyle(i.value).left)||0)<0-(i.value.width-u.value)&&(i.value.style.left=`${0-(i.value.width-u.value)}px`),(parseInt(getComputedStyle(i.value).top)||0)<0-(i.value.height-U.value)&&(i.value.style.top=`${0-(i.value.height-U.value)}px`)},oe=()=>{try{clearInterval(s.value)}catch{}t.value.mouseDown=!1,D.value=0,w()};return window.addEventListener("mouseup",oe),window.addEventListener("mousemove",J),window.addEventListener("touchend",oe),window.addEventListener("touchmove",J),Ye(()=>{window.removeEventListener("mouseup",oe),window.removeEventListener("mousemove",J),window.removeEventListener("touchend",oe),window.removeEventListener("touchmove",J)}),(I,e)=>(n(),q("div",{style:Xe(B.value)},[m(Fe,{ref_key:"badgeImageForm",ref:S,enctype:"multipart/form-data"},{default:o(()=>[m(_,null,{default:o(()=>[m(N,null,{default:o(()=>[m(sl,{label:I.label||"",name:I.name||"",hint:I.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:f,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[G.value.required],"error-messages":I.errorMessages||"","persistent-hint":I.persistentHint||!1,disabled:!l.value||I.disabled||!1,"hide-details":"",onChange:g,onBlur:T},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),X("p",Yl,[l.value?R("",!0):(n(),q("small",Xl,"File Uploading"))])]),_:1})]),_:1}),m(_,{class:"justify-center scale-down"},{default:o(()=>[m(N,{cols:"12",class:"text-center"},{default:o(()=>[Y(" Preview "),d.value?(n(),q("div",_l,[m(al,{indeterminate:"",color:"primary",size:128,width:10},{default:o(()=>[Y("Uploading")]),_:1})])):(n(),q(F,{key:1},[X("div",{class:"image-preview my-auto mx-auto",onMousemove:J,onMousedown:J,onMouseup:J,onTouchstart:J,onTouchmove:J,onTouchend:J},[X("img",{src:C.value,ref_key:"imageDisplay",ref:i,alt:"Your badge image",onLoad:P,onDragstart:J,onKeydown:J,onKeyup:J,tabindex:"0",class:"d-none"},null,40,Jl)],32),X("h3",null,K(c.value),1)],64))]),_:1}),H.value?(n(),b(N,{key:0,cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:o(()=>[m(j,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:e[0]||(e[0]=r=>h(4,0,r)),onMouseup:e[1]||(e[1]=r=>h(0,0,r)),onTouchstart:e[2]||(e[2]=r=>h(4,0,r)),onTouchend:e[3]||(e[3]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:e[4]||(e[4]=r=>h(1,0,r)),onMouseup:e[5]||(e[5]=r=>h(0,0,r)),onTouchstart:e[6]||(e[6]=r=>h(1,0,r)),onTouchend:e[7]||(e[7]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:e[8]||(e[8]=r=>h(3,0,r)),onMouseup:e[9]||(e[9]=r=>h(0,0,r)),onTouchstart:e[10]||(e[10]=r=>h(3,0,r)),onTouchend:e[11]||(e[11]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:e[12]||(e[12]=r=>h(2,0,r)),onMouseup:e[13]||(e[13]=r=>h(0,0,r)),onTouchstart:e[14]||(e[14]=r=>h(2,0,r)),onTouchend:e[15]||(e[15]=r=>h(0,0,r))})]),_:1})):R("",!0)]),_:1}),H.value?(n(),b(_,{key:0,class:"justify-center scale-down"},{default:o(()=>[m(N,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:o(()=>[m(j,{icon:"mdi:mdi-plus",color:"primary",onMousedown:e[16]||(e[16]=r=>h(5,0,r)),onMouseup:e[17]||(e[17]=r=>h(0,0,r)),onTouchstart:e[18]||(e[18]=r=>h(5,0,r)),onTouchend:e[19]||(e[19]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:e[20]||(e[20]=r=>h(6,0,r)),onMouseup:e[21]||(e[21]=r=>h(0,0,r)),onTouchstart:e[22]||(e[22]=r=>h(6,0,r)),onTouchend:e[23]||(e[23]=r=>h(0,0,r))})]),_:1})]),_:1})):R("",!0)]),_:1},512)],4))}}),Kl=_e(Wl,[["__scopeId","data-v-0b5f466b"]]),jl=qe({...ul({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),zl=xe()({name:"VRadio",props:jl(),setup(a,x){let{slots:p}=x;return Ne(()=>m(Ge,fe(a,{class:["v-radio",a.class],style:a.style,type:"radio"}),p)),{}}}),Ql=qe({height:{type:[Number,String],default:"auto"},...nl(),...Je(rl(),["multiple"]),trueIcon:{type:we,default:"$radioOn"},falseIcon:{type:we,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Zl=xe()({name:"VRadioGroup",inheritAttrs:!1,props:Ql(),emits:{"update:modelValue":a=>!0},setup(a,x){let{attrs:p,slots:A}=x;const O=We(),y=Te(()=>a.id||`radio-group-${O}`),w=Ke(a,"modelValue");return Ne(()=>{const[M,$]=je(p),S=ke.filterProps(a),c=Ge.filterProps(a),l=A.label?A.label({label:a.label,props:{for:y.value}}):a.label;return m(ke,fe({class:["v-radio-group",a.class],style:a.style},M,S,{modelValue:w.value,"onUpdate:modelValue":f=>w.value=f,id:y.value}),{...A,default:f=>{let{id:i,messagesId:C,isDisabled:d,isReadonly:D}=f;return m(F,null,[l&&m(ol,{id:i.value},{default:()=>[l]}),m(dl,fe(c,{id:i.value,"aria-describedby":C.value,defaultsTarget:"VRadio",trueIcon:a.trueIcon,falseIcon:a.falseIcon,type:a.type,disabled:d.value,readonly:D.value,"aria-labelledby":l?i.value:void 0,multiple:!1},$,{modelValue:w.value,"onUpdate:modelValue":s=>w.value=s}),A)])}})}),{}}}),Le=ue({__name:"FormField",props:z({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change","input","update:field"],["update:modelValue"]),setup(a,{emit:x}){const p=a,{admin:A=!1,disabled:O=!1,persistentHint:y=!1,required:w=!1}=p,M=V(""),$=re(a,"modelValue"),S=x,c=Se(p,S,void 0,void 0,"field"),l=V(me(c.value)),f=V({maxlength:s=>!p.maxLength||s.length<=p.maxLength||`Maximum length is ${p.maxLength} characters. (Current length: ${s.length})`,minlength:s=>!p.minLength||s.length>=p.minLength||`Minimum length is ${p.minLength} characters. (Current length: ${s.length})`,required:s=>!p.required||!!s.replace(/\s/g,"")||"Required field."}),i=V(!1),C=V([]),d=V("");try{const s=JSON.parse($.value);Array.isArray(s)?C.value=s:typeof s=="boolean"?i.value=s:d.value=$.value}catch{i.value=!1,C.value=[],d.value=$.value}ne(i,()=>{$.value=JSON.stringify(i.value),S("input"),S("change")}),ne(C,()=>{$.value=JSON.stringify(C.value),S("input"),S("change")},{deep:!0}),ne(d,()=>{$.value=d.value,S("input"),S("change")}),ne(c.value,()=>{l.value.Type!==c.value.Type?(l.value=me(c.value),i.value=!1,C.value=[],d.value=""):l.value=me(c.value)});const D=(s=void 0)=>{S("change",s)};return(s,t)=>{var U;return l.value.Type===v(ee).TEXT?(n(),b(he,{key:0,modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=u=>d.value=u),name:s.name||"",hint:l.value.Hint,label:`${l.value.Label}${v(w)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(ee).DATE?(n(),b(he,{key:1,modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=u=>d.value=u),type:"date",name:s.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(ee).NUMBER?(n(),b(he,{key:2,modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=u=>d.value=u),type:"number",name:s.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(ee).TEXTAREA?(n(),b(il,{key:3,modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=u=>d.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.maxlength,f.value.minlength,f.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(ee).CHECKBOX?(n(),q(F,{key:4},[l.value.Multiple?(n(!0),q(F,{key:0},Z(l.value.Values,u=>(n(),b(de,{key:u.ID,modelValue:C.value,"onUpdate:modelValue":t[4]||(t[4]=B=>C.value=B),name:s.name||"",hint:l.value.Hint,label:u.Title,value:u.Value,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,rules:[f.value.required],onChange:D},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(n(),b(de,{key:1,modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=u=>i.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,required:v(w),rules:[u=>!v(w)||!!u||"You must tick to continue!"],onChange:D},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===v(ee).SELECT?(n(),q(F,{key:5},[!l.value.Autofill&&l.value.Multiple?(n(),b(De,{key:0,modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=u=>C.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(n(),b(Ae,{key:1,modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=u=>C.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(n(),b(Ae,{key:3,modelValue:d.value,"onUpdate:modelValue":t[9]||(t[9]=u=>d.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):R("",!0):(n(),b(De,{key:2,modelValue:d.value,"onUpdate:modelValue":t[8]||(t[8]=u=>d.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(O)||!1,"persistent-hint":v(y)||!1,"error-messages":M.value,rules:[f.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===v(ee).RADIO?(n(),b(Zl,{key:6,modelValue:d.value,"onUpdate:modelValue":t[10]||(t[10]=u=>d.value=u),name:s.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,rules:[f.value.required],onChange:D},{default:o(()=>[(n(!0),q(F,null,Z(l.value.Values,u=>(n(),b(zl,{key:u.Value,label:u.Title,value:u.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(ee).ACCOMMODATION?(n(),b(Gl,{key:7,modelValue:C.value,"onUpdate:modelValue":t[11]||(t[11]=u=>C.value=u),name:s.name,admin:v(A),convention:s.convention,"registration-group":s.registrationGroup,data:s.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,required:v(w),onChange:D},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(ee).AGE?(n(),b(Hl,{key:8,modelValue:d.value,"onUpdate:modelValue":t[12]||(t[12]=u=>d.value=u),name:s.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,onChange:D},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(ee).BADGE_IMAGE?(n(),b(Kl,{key:9,modelValue:d.value,"onUpdate:modelValue":t[13]||(t[13]=u=>d.value=u),name:s.name,registration:(U=s.registrationGroup)==null?void 0:U.Registration,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,onChange:D},null,8,["modelValue","name","registration","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(ee).EXTRAS?(n(),b(hl,{key:10,modelValue:d.value,"onUpdate:modelValue":t[14]||(t[14]=u=>d.value=u),admin:v(A),convention:s.convention,name:s.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,required:v(w),onChange:D},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(ee).INTERESTS?(n(),b(yl,{key:11,modelValue:d.value,"onUpdate:modelValue":t[15]||(t[15]=u=>d.value=u),admin:v(A),convention:s.convention,name:s.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,required:v(w),onChange:D},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(ee).TICKET?(n(),b(Dl,{key:12,modelValue:d.value,"onUpdate:modelValue":t[16]||(t[16]=u=>d.value=u),admin:v(A),convention:s.convention,name:s.name,"registration-group":s.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(O)||!1,"persistent-hint":v(y),"error-messages":M.value,required:v(w),onChange:D},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):R("",!0)}}}),et={key:0,class:"my-2 text-white text-center"},lt={key:1,class:"admin-header my-2 text-white text-center"},tt=["innerHTML"],at=["innerHTML"],Rt=ue({__name:"FormRenderer",props:z({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["close"],["update:modelValue"]),setup(a,{emit:x}){const p=x,A=re(a,"modelValue");pe(A.value.Sections),A.value.Sections.forEach(T=>{T.Fields&&pe(T.Fields)});const O=V(),y=ml(),w=Ce(),M=V(!1),$=V(!1),S=V(!1),c=V(!1),l=V(!1),f=V(!1),i=V(!1),C=V(!1),d=V(!1),D=V(!1),s=V(!1),t=V((()=>{if(a.data!==void 0){const g=me(a.data);return A.value.Sections.forEach(E=>{E.Fields&&E.Fields.forEach(k=>{const P=a.data.Data.find(h=>h.SectionFieldUUID===k.SectionFieldUUID&&h.SectionFieldUUID==k.SectionFieldUUID);if(P)k.Value=P.Data;else{const h={ID:0,SubmissionDataUUID:Ue(),SubmissionID:a.data.ID,SubmissionUUID:a.data.SubmissionUUID,SectionID:E.ID,SectionUUID:E.SectionUUID,SectionFieldID:k.ID,SectionFieldUUID:k.SectionFieldUUID,Data:k.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};g.Data.push(h),k.Value=""}})}),g}const T={ID:0,SubmissionUUID:Ue(),FormID:A.value.ID,FormUUID:A.value.FormUUID,UserID:(y==null?void 0:y.ID)||0,UserUUID:(y==null?void 0:y.UserUUID)||"",Data:[],Status:Qe.SUBMISSION_STATUS_OPEN};return T.Data=A.value.Sections.map(g=>g.Fields?g.Fields.map(E=>({ID:0,SubmissionDataUUID:Ue(),SubmissionID:T.ID,SubmissionUUID:T.SubmissionUUID,SectionID:g.ID,SectionUUID:g.SectionUUID,SectionFieldID:E.ID,SectionFieldUUID:E.SectionFieldUUID,Data:""})):[]).flat(),T})()),U=(T,g,E)=>{const k=t.value.Data.find(P=>P.SectionUUID===T&&P.SectionFieldUUID===g);k&&(k.Data=E)},u=(T,g,E,k,P)=>T&&T.Type===le.FORM_TYPE_REGISTRATION?g?`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`:E?`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`:k?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badgeForm`:P?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===le.FORM_TYPE_ACCOMMODATION?E?`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`:k?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`:P?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===le.FORM_TYPE_DEALER?k?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`:P?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===le.FORM_TYPE_BADGE?P?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":(T&&T.Type===le.FORM_TYPE_ADDITIONAL,"/"),B=({callback:T})=>{w.getRegistrationByConvention(a.convention.ConventionUUID).then(g=>{T&&T("Loading"),w.getAvailableConventionForms(a.convention.ConventionUUID).then(E=>{g.Submissions.forEach((I,e)=>{I.Form||(g.Submissions[e].Form=E.find(r=>r.FormUUID===I.FormUUID))});const k=g.Submissions.find(I=>I.FormUUID===t.value.FormUUID),P=g.Submissions.find(I=>{var e;return((e=I.Form)==null?void 0:e.Type)===le.FORM_TYPE_ACCOMMODATION}),h=g.Submissions.find(I=>{var e;return((e=I.Form)==null?void 0:e.Type)===le.FORM_TYPE_ADDITIONAL}),J=g.Submissions.find(I=>{var e;return((e=I.Form)==null?void 0:e.Type)===le.FORM_TYPE_DEALER}),te=g.Submissions.find(I=>{var e;return((e=I.Form)==null?void 0:e.Type)===le.FORM_TYPE_BADGE}),oe=u(k==null?void 0:k.Form,P==null?void 0:P.Form,J==null?void 0:J.Form,te==null?void 0:te.Form,h==null?void 0:h.Form);Ee.push(oe)})})},H=({callback:T})=>{var g;(g=O.value)==null||g.validate().then(E=>{E.valid?w.saveSubmission(t.value).then(k=>{k?setTimeout(()=>{G(k,T,1)},1e3):T&&T("Failed to process request")}).catch(()=>{T&&T("Failed to process request")}):T&&T("Errors in form detected, please review and try again.")})},G=(T,g,E=1)=>{w.checkSubmission(T).then(k=>{if(k)if(k.Ready&&k.Submission){if(M.value=!1,t.value=k.Submission,g&&g("Saved"),a.admin)p("close");else if(k.Forms&&k.Forms.length>0){const P=k.Forms.find(e=>e.FormUUID===t.value.FormUUID),h=k.Forms.find(e=>e.Type===le.FORM_TYPE_ACCOMMODATION),J=k.Forms.find(e=>e.Type===le.FORM_TYPE_DEALER),te=k.Forms.find(e=>e.Type===le.FORM_TYPE_BADGE),oe=k.Forms.find(e=>e.Type===le.FORM_TYPE_ADDITIONAL),I=u(P,h,J,te,oe);Ee.push(I)}}else{if(E>5&&(M.value=!0),E>10&&($.value=!0),E>20&&(S.value=!0),E>30&&(c.value=!0),E>40&&(l.value=!0),E>50&&(f.value=!0),E>60&&(i.value=!0),E>70&&(C.value=!0),E>80&&(d.value=!0),E>90&&(D.value=!0),E>100&&(s.value=!0),E>200){g&&(M.value=!1,$.value=!1,S.value=!1,c.value=!1,l.value=!1,f.value=!1,i.value=!1,C.value=!1,d.value=!1,D.value=!1,s.value=!1,g("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{G(T,g,E+1)},E<20?1e3*E:2e4)}else g&&(M.value=!1,$.value=!1,S.value=!1,c.value=!1,l.value=!1,f.value=!1,i.value=!1,C.value=!1,d.value=!1,D.value=!1,s.value=!1,g("A problem was encountered during saving, please check form and try again."))}).catch(()=>{g&&(M.value=!1,$.value=!1,S.value=!1,c.value=!1,l.value=!1,f.value=!1,i.value=!1,C.value=!1,d.value=!1,D.value=!1,s.value=!1,g("A problem was encountered during saving, please check form and try again."))})};return(T,g)=>{const E=ze("router-link");return n(),b(el,null,{default:o(()=>[m(Fe,{ref_key:"formValidator",ref:O,autocomplete:"off",onSubmit:g[1]||(g[1]=Me(()=>{},["prevent"]))},{default:o(()=>[A.value.Heading?(n(),q("h1",et,K(A.value.Heading),1)):R("",!0),T.admin?(n(),q("h2",lt," (Admin Mode) ")):R("",!0),A.value.Description?(n(),q("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:A.value.Description},null,8,tt)):R("",!0),(n(!0),q(F,null,Z(A.value.Sections,k=>(n(),b(vl,{key:`section_${A.value.ID}.${k.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:o(()=>[k.Heading?(n(),b(cl,{key:0},{default:o(()=>[Y(K(k.Heading),1)]),_:2},1024)):R("",!0),k.Description?(n(),b(fl,{key:1,class:"text-wrap"},{default:o(()=>[X("div",{innerHTML:k.Description},null,8,at)]),_:2},1024)):R("",!0),k.Fields?(n(),b(pl,{key:2},{default:o(()=>[(n(!0),q(F,null,Z(k.Fields,P=>(n(),q(F,{key:`field_${A.value.ID}.${k.ID}.${P.ID}`},[P.Field?(n(),b(_,{key:0},{default:o(()=>[m(N,null,{default:o(()=>[T.editable?(n(),b(Le,{key:0,name:P.SectionFieldUUID,field:P.Field,modelValue:P.Value,"onUpdate:modelValue":h=>P.Value=h,admin:T.admin,convention:T.convention,"registration-group":T.registrationGroup,required:P.Required,"min-length":P.MinLength,"max-length":P.MaxLength,"persistent-hint":!0,onChange:h=>U(k.SectionUUID,P.SectionFieldUUID,P.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(n(),b(Le,{key:1,name:P.SectionFieldUUID,field:P.Field,modelValue:P.Value,"onUpdate:modelValue":h=>P.Value=h,admin:T.admin,convention:T.convention,"registration-group":T.registrationGroup,required:P.Required,"min-length":P.MinLength,"max-length":P.MaxLength,"persistent-hint":!0,disabled:"",onChange:h=>U(k.SectionUUID,P.SectionFieldUUID,P.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0)]),_:2},1024))),128)),T.preview?R("",!0):(n(),q(F,{key:3},[m(_,null,{default:o(()=>[T.admin?(n(),b(N,{key:1,class:"text-right"},{default:o(()=>[m(j,{color:"red",onClick:g[0]||(g[0]=k=>p("close"))},{default:o(()=>[Y("Cancel")]),_:1})]),_:1})):(n(),b(N,{key:0,class:"text-right"},{default:o(()=>[m(E,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:o(()=>[m(j,{color:"red"},{default:o(()=>[Y("Close")]),_:1})]),_:1})]),_:1})),T.admin||T.editable?(n(),b(N,{key:2,class:"text-left"},{default:o(()=>[m(Oe,{onClick:H,type:"submit"})]),_:1})):(n(),b(N,{key:3,class:"text-left"},{default:o(()=>[m(Oe,{onClick:B,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),M.value?(n(),b(_,{key:0},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):R("",!0),$.value?(n(),b(_,{key:1},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):R("",!0),S.value?(n(),b(_,{key:2},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):R("",!0),c.value?(n(),b(_,{key:3},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Reticulating splines ")]),_:1})]),_:1})):R("",!0),l.value?(n(),b(_,{key:4},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):R("",!0),f.value?(n(),b(_,{key:5},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):R("",!0),i.value?(n(),b(_,{key:6},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):R("",!0),C.value?(n(),b(_,{key:7},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):R("",!0),d.value?(n(),b(_,{key:8},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):R("",!0),D.value?(n(),b(_,{key:9},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):R("",!0),s.value?(n(),b(_,{key:10},{default:o(()=>[m(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:o(()=>[Y(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):R("",!0)],64))]),_:1},512)]),_:1})}}});export{Et as F,Le as _,Ot as a,ee as b,Rt as c,$t as d,At as m,pe as s};
