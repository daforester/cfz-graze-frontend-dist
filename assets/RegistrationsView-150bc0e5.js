import{p as ua,n as ra,e as ae,t as pe,c as Wa,G as Ot,v as t,H as N,x as Ve,I as Q,a0 as Z,a1 as re,r as T,K as Te,w as me,M as s,N as D,O as a,W as y,X as B,Q as S,V as _,a4 as J,P as C,S as F,a3 as _e,Y as bt,Z as Nt,_ as ot,ac as vt,ad as Ja,E as Je,k as Xa,f as Za,d as el,o as tl,ae as Qt,a2 as Xe,R as Vt,aa as lt,af as al,ag as dt,z as ll,u as nl,ah as ol,A as il,B as sl,D as ul,s as rl,ai as mt,aj as Kt,a7 as dl,a6 as ml,U as cl}from"./index-f4dfa9da.js";import{T as vl,V as da,e as fl,d as Ul,c as Al}from"./FormRenderer.vue_vue_type_style_index_0_lang-dd82f752.js";import{F as Ae,a as gl}from"./form-3a7bf7fd.js";import{u as it,V as ma}from"./VCheckbox-4df9a671.js";import{_ as Ze}from"./ModelDialog.vue_vue_type_script_setup_true_lang-fd21e735.js";import{h as Se,b as ca,a as Tl,c as _l,d as Wt,P as ht,u as va}from"./useDisplayTransactions-4323c8a5.js";import{V as W,a as b}from"./VRow-16ac617f.js";import{V as We,a as Ge,c as fa}from"./VList-dfafd759.js";import{V as Ue}from"./copyToClipboard-3adb5cd8.js";import{u as Ua,j as ge,V as he,b as pl,m as yl,k as El,c as Dl,d as Il,l as Sl,a as Rl,n as Cl}from"./VContainer-bc54992d.js";import{G as st}from"./userData-71226c4a.js";import{C as Aa}from"./canEditRegistrations-68b5b4be.js";import{V as z,a as Ol,u as Vl}from"./VBtn-ce8bd16e.js";import{b as ga,c as Lt,S as Ta,d as Jt}from"./submission-6136b51d.js";import{G as wt}from"./group-d2a77946.js";import{C as Ft}from"./canDo-99eb87c2.js";import{a as ft,V as Ye}from"./scopeId-6037e5e9.js";import{V as xe,b as et,c as He,d as Pt,e as be}from"./VCard-8a2cb23d.js";import{V as $t}from"./VAvatar-90a5597b.js";import{v as ye}from"./v4-a960c1f4.js";import{_ as nt,V as _a}from"./SaveButton.vue_vue_type_script_setup_true_lang-1f150420.js";import{V as ne}from"./VTextField-71352b43.js";import{m as hl,k as Ml,l as kl,n as bl,o as Nl,p as Ll,q as wl,u as Fl,r as Pl,s as $l,t as Bl,v as Gl,w as Yl,x as xl,y as Hl,z as Xt,A as Zt,B as ea,c as Ut,d as At,e as Bt,b as gt,V as Tt,a as pa,g as ya,h as Ea,_ as Da,j as Ia,i as Be,f as Mt}from"./VWindowItem-f0617bf6.js";import{_ as Sa}from"./DeleteDialog.vue_vue_type_script_setup_true_lang-f6229dd2.js";import{a as Ra,V as kt}from"./VToolbar-d074f7e1.js";import{V as ql}from"./VDivider-c72a65c6.js";import{V as jl}from"./VTextarea-6fbaa28e.js";import{V as Ca,a as Oa}from"./VChip-2cb1dc75.js";import{V as ct}from"./VDialog-7569a6cd.js";import{V as zl}from"./VForm-165281d2.js";import{s as Ql}from"./sortSubmissions-4bc1d48e.js";import{V as Kl,a as Wl}from"./VAlert-85067166.js";import{S as Jl}from"./setupLogin-9c33e608.js";import{V as Xl}from"./forwardRefs-865d510e.js";import{u as Rt}from"./nil-d01db1aa.js";import{V as ta,a as Zl}from"./VTable-b8b66024.js";import"./index-26b71cef.js";import"./VFileInput-662e56e1.js";import"./createSimpleFunctional-cdebcc59.js";import"./VToolbarItems-422f08f5.js";var ke=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(ke||{});const en=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Me=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Me||{});const tn=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var H=(e=>(e.META_DATA_SOURCE_NULL="",e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_ADMIN_FORM="META_DATA_SOURCE_ADMIN_FORM",e.META_DATA_SOURCE_BADGE_DISPLAY="META_DATA_SOURCE_BADGE_DISPLAY",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DATA_LAYOUT="META_DATA_SOURCE_DATA_LAYOUT",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_EMAILS="META_DATA_SOURCE_EMAILS",e.META_DATA_SOURCE_NOTES="META_DATA_SOURCE_NOTES",e.META_DATA_SOURCE_PAYMENT_STATUS="META_DATA_SOURCE_PAYMENT_STATUS",e.META_DATA_SOURCE_PAYMENTS="META_DATA_SOURCE_PAYMENTS",e.META_DATA_SOURCE_REGISTRATION_ACTIONS="META_DATA_SOURCE_REGISTRATION_ACTIONS",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e.META_DATA_SOURCE_TAGS="META_DATA_SOURCE_TAGS",e))(H||{});const an=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Actions",value:"META_DATA_SOURCE_REGISTRATION_ACTIONS"},{title:"Badge Display",value:"META_DATA_SOURCE_BADGE_DISPLAY"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Data Display",value:"META_DATA_SOURCE_DATA_LAYOUT"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Emails",value:"META_DATA_SOURCE_EMAILS"},{title:"Notes",value:"META_DATA_SOURCE_NOTES"},{title:"Payment Status",value:"META_DATA_SOURCE_PAYMENT_STATUS"},{title:"Payments",value:"META_DATA_SOURCE_PAYMENTS"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"},{title:"Tags",value:"META_DATA_SOURCE_TAGS"}];var le=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(le||{});const ln=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],nn=e=>{switch(e){case"EMAIL_STATUS_QUEUED":return"Queued";case"EMAIL_STATUS_QUEUE_ERROR":return"Processing";case"EMAIL_STATUS_QUEUE_FAILURE":return"Internal Error";case"EMAIL_STATUS_SENDING":return"Sending";case"EMAIL_STATUS_SENT":return"Sent";case"EMAIL_STATUS_SEND_ERROR":return"Failed to Send"}return"Unknown"},on=e=>e===void 0?!1:Ft(e,wt.GROUP_TYPE_SYSTEM).ManageUsers,sn=ua({itemsLength:{type:[Number,String],required:!0},...hl(),...Ml(),...kl()},"VDataTableServer"),un=ra()({name:"VDataTableServer",props:sn(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,c)=>!0},setup(e,c){let{emit:n,slots:i}=c;const{groupBy:u}=bl(e),{sortBy:d,multiSort:l,mustSort:o}=Nl(e),{page:r,itemsPerPage:v}=Ll(e),f=ae(()=>parseInt(e.itemsLength,10)),{columns:p,headers:m}=wl(e,{groupBy:u,showSelect:pe(e,"showSelect"),showExpand:pe(e,"showExpand")}),{items:g}=Fl(e,p),{toggleSort:A}=Pl({sortBy:d,multiSort:l,mustSort:o,page:r}),{opened:P,isGroupOpen:M,toggleGroup:L,extractRows:U}=$l({groupBy:u,sortBy:d}),{pageCount:w,setItemsPerPage:Y}=Bl({page:r,itemsPerPage:v,itemsLength:f}),{flatItems:x}=Gl(g,u,P),{isSelected:ie,select:ee,selectAll:O,toggleSelect:h,someSelected:V,allSelected:R}=Yl(e,{allItems:g,currentPage:g}),{isExpanded:G,toggleExpand:oe}=xl(e),fe=ae(()=>U(g.value));Hl({page:r,itemsPerPage:v,sortBy:d,groupBy:u,search:pe(e,"search")}),Wa("v-data-table",{toggleSort:A,sortBy:d}),Ot({VDataTableRows:{hideNoData:pe(e,"hideNoData"),noDataText:pe(e,"noDataText"),loading:pe(e,"loading"),loadingText:pe(e,"loadingText")}});const ce=ae(()=>({page:r.value,itemsPerPage:v.value,sortBy:d.value,pageCount:w.value,toggleSort:A,setItemsPerPage:Y,someSelected:V.value,allSelected:R.value,isSelected:ie,select:ee,selectAll:O,toggleSelect:h,isExpanded:G,toggleExpand:oe,isGroupOpen:M,toggleGroup:L,items:fe.value,groupedItems:x.value,columns:p.value,headers:m.value}));Ua(()=>{const[qe]=Xt.filterProps(e),[je]=Zt.filterProps(e),[tt]=ea.filterProps(e),[ze]=ta.filterProps(e);return t(ta,Ve({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ze),{top:()=>{var De;return(De=i.top)==null?void 0:De.call(i,ce.value)},default:()=>{var De,Ne,Le,we;return i.default?i.default(ce.value):t(N,null,[(De=i.colgroup)==null?void 0:De.call(i,ce.value),t("thead",{class:"v-data-table__thead",role:"rowgroup"},[t(Zt,Ve(je,{sticky:e.fixedHeader}),i)]),(Ne=i.thead)==null?void 0:Ne.call(i,ce.value),t("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i.body?i.body(ce.value):t(ea,Ve(tt,{items:x.value}),i)]),(Le=i.tbody)==null?void 0:Le.call(i,ce.value),(we=i.tfoot)==null?void 0:we.call(i,ce.value)])},bottom:()=>i.bottom?i.bottom(ce.value):t(Xt,qe,{prepend:i["footer.prepend"]})})})}}),rn=B("br",null,null,-1),dn=B("h3",null,"Assigned Accommodation",-1),mn=B("br",null,null,-1),cn=B("br",null,null,-1),vn=B("h3",null,"Accommodation Preferences",-1),fn=B("h3",null,"Selected Tickets",-1),Un=B("br",null,null,-1),An=Q({__name:"EditAccommodationAssignmentDialog",props:Z({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["update:field"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{convention:i,registration:u,title:d=""}=n,l=_e(),o=re(e,"modelValue"),r=T({capacity:{max:O=>{var R;const h=w.value.find(G=>G.room.RoomUUID===O);return!h||h.room.MaximumCapacity===0?!0:(((R=m.value)==null?void 0:R.Members.length)||0)<=h.room.MaximumCapacity||"Too many people in the group for this room"},min:O=>{var R;const h=w.value.find(G=>G.room.RoomUUID===O);return!h||h.room.MinimumCapacity===0?!0:(((R=m.value)==null?void 0:R.Members.length)||0)>=h.room.MinimumCapacity||"Not enough people in the group for this room"}}}),v=T([]),f=it(n,c,void 0,void 0,"field"),p=T(Te(f.value));me(f,()=>{p.value=Te(f.value)});const m=T(),g=T(""),A=T(""),P=T([]),M=T({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),L=async()=>{var R;const O=await l.getConventionAvailableAccommodation(i.ConventionUUID);O&&(v.value=O);const h=await l.getRegistrationGroup(u.RegistrationUUID||"");h&&(m.value=h);const V=await l.getConventionTickets(i.ConventionUUID);V&&(P.value=V);try{M.value=JSON.parse(((R=m.value)==null?void 0:R.TicketData)||"")}catch{}};me(g,()=>{A.value=w.value.length>0?w.value[0].value:""});const U=ae(()=>{const O=Y.value;return v.value.map(h=>{let V;return O.forEach(R=>{h.Costs.forEach(G=>{G.DateStart===(R==null?void 0:R.DateStart)&&G.DateEnd===R.DateEnd&&(V===void 0||V>G.Availability)&&(V=G.Availability)})}),{label:`${h.Name}`,title:`${h.Name} (${V} Available)`,value:h.AccommodationUUID}})}),w=ae(()=>{const O=Y.value,h=v.value.find(V=>V.AccommodationUUID===g.value);return(h==null?void 0:h.Pool.map(V=>{var G,oe;let R;return O.forEach(fe=>{V.Costs.forEach(ce=>{ce.DateStart===(fe==null?void 0:fe.DateStart)&&ce.DateEnd===fe.DateEnd&&(R===void 0||R>ce.Availability)&&(R=ce.Availability)})}),{label:`${(G=V.Venue)==null?void 0:G.Name} - ${V.Name}`,title:`${(oe=V.Venue)==null?void 0:oe.Name} - ${V.Name} (${R} Available)`,value:V.RoomUUID,room:V}}))||[]}),Y=ae(()=>[...M.value.Ticket,...M.value.AddonsChecked,...M.value.ComponentsChecked].map(O=>P.value.find(h=>h.TicketUUID===O)).filter(O=>O!==void 0&&O.RequiresAccommodation)),x=O=>{var h;l.assignAccommodation(((h=m.value)==null?void 0:h.Registration.RegistrationUUID)||"",g.value,A.value,!1).then(V=>{V?(L(),O&&O("Room Assigned")):O&&O("Room not assigned")}).catch(()=>{O&&O("Room not assigned")})},ie=O=>{var h,V;(h=m.value)!=null&&h.Registration.AllocationUUID?l.deleteAllocation(((V=m.value)==null?void 0:V.Registration.AllocationUUID)||"").then(R=>{R?(L(),O&&O("Allocation Deleted")):O&&O("Allocation not deleted")}).catch(()=>{O&&O("Allocation not deleted")}):O&&O("Nothing to Delete")},ee=O=>{var V,R;const h=(V=v.value.find(G=>G.AccommodationUUID===O.AccommodationUUID))==null?void 0:V.Pool;if(h){const G=h.find(oe=>oe.RoomUUID===O.RoomUUID);if(G)return`${(R=G.Venue)==null?void 0:R.Name} - ${G.Name}`}return""};return L(),(O,h)=>{var V;return s(),D(Ze,{modelValue:o.value,"onUpdate:modelValue":h[2]||(h[2]=R=>o.value=R),title:y(d),color:"primary","show-close-action":!0,"show-delete-action":!!((V=m.value)!=null&&V.Registration.Allocation),"show-save-action":!!A.value,"save-button-label":"Assign Room",onDelete:ie,onSave:x,fullscreen:!0,persistent:!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>{var R;return[t(b,{cols:"12",md:"6"},{default:a(()=>{var G,oe;return[B("h3",null,"Group Members ("+S((G=m.value)==null?void 0:G.Members.length)+")",1),(s(!0),_(N,null,J((oe=m.value)==null?void 0:oe.Members,fe=>(s(),_(N,{key:fe.UUID},[C(" #"+S(fe.Reference)+" "+S(fe.Name),1),rn],64))),128))]}),_:1}),(R=m.value)!=null&&R.Registration.Allocation?(s(),D(b,{key:0,cols:"12",md:"6"},{default:a(()=>[dn,t(We,null,{default:a(()=>{var G;return[(s(!0),_(N,null,J((G=m.value)==null?void 0:G.Registration.Allocation.Periods,oe=>(s(),D(Ge,{key:oe.AllocationPeriodUUID},{default:a(()=>{var fe;return[C(S((fe=v.value.find(ce=>ce.AccommodationUUID===oe.AccommodationUUID))==null?void 0:fe.Name)+" ",1),mn,C(" "+S(ee(oe))+" ",1),cn,B("small",null,"("+S(y(Se)(oe.DateStart))+" - "+S(y(Se)(oe.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):F("",!0)]}),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12",md:"6"},{default:a(()=>[O.selectedAccommodation.length?(s(),_(N,{key:0},[vn,t(We,null,{default:a(()=>[(s(!0),_(N,null,J(O.selectedAccommodation,(R,G)=>(s(),D(Ge,{key:R.AccommodationUUID},{default:a(()=>[C(S(G+1)+". "+S(R.Name),1)]),_:2},1024))),128))]),_:1})],64)):F("",!0)]),_:1}),t(b,{cosl:"12",md:"6"},{default:a(()=>[fn,t(We,null,{default:a(()=>[(s(!0),_(N,null,J(Y.value,R=>(s(),D(Ge,{key:R==null?void 0:R.TicketUUID},{default:a(()=>[C(S(R.Name)+" ",1),Un,B("small",null,"("+S(y(Se)(R.DateStart))+" - "+S(y(Se)(R.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12",md:"6"},{default:a(()=>[t(Ue,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=R=>g.value=R),items:U.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),t(b,{cols:"12",md:"6"},{default:a(()=>[t(Ue,{modelValue:A.value,"onUpdate:modelValue":h[1]||(h[1]=R=>A.value=R),items:w.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[r.value.capacity.min,r.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),gn=e=>(bt("data-v-33548a38"),e=e(),Nt(),e),Tn={key:0,class:"accommodationList"},_n={key:0,class:"text-orange-darken-2"},pn={key:1,class:"accommodationList"},yn=gn(()=>B("br",null,null,-1)),En=Q({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},forms:{},registration:{},tickets:{default:()=>[]},value:{default:""},venues:{}},setup(e){const c=st(),n=Aa(c,e.convention),i=T(!1),u=ae(()=>e.registration.Allocation.Periods.map(o=>{var r;return{DateStart:o.DateStart,DateEnd:o.DateEnd,Accommodation:o.Accommodation||((r=e.accommodations)==null?void 0:r.find(v=>v.AccommodationUUID==o.AccommodationUUID))}}).sort((o,r)=>o.DateStart>r.DateStart?1:o.DateStart==r.DateStart?0:-1));e.registration&&e.registration.Allocation&&e.registration.Allocation.Periods&&e.registration.Allocation.Periods.forEach(o=>{var v;if(o.Accommodation)return;const r=(v=e.accommodations)==null?void 0:v.find(f=>f.AccommodationUUID==o.AccommodationUUID);r&&(o.Accommodation=r)});const d=ae(()=>{if(!e.value)return[];const o=JSON.parse(e.value),r=e.accommodations.filter(v=>o.includes(v.AccommodationUUID)).sort((v,f)=>{const p=o.findIndex(g=>g===v.AccommodationUUID),m=o.findIndex(g=>g===f.AccommodationUUID);return p>m?1:-1});return Te(r)}),l=ae(()=>{let o;const r=e.forms.find(v=>!!v.Sections.find(f=>{var p;return f.Fields?!!((p=f.Fields)!=null&&p.find(m=>{var g;return((g=m.Field)==null?void 0:g.Type)==="TICKET"?(o=m,!0):!1})):!1}));return o?!!e.registration.Submissions.find(v=>{if(v.FormUUID==(r==null?void 0:r.FormUUID))return!!v.Data.find(f=>{if(f.SectionFieldUUID==(o==null?void 0:o.SectionFieldUUID)){const p=JSON.parse(f.Data);return e.tickets.filter(m=>m.RequiresAccommodation).find(m=>p.Ticket.includes(m.TicketUUID)||p.AddonsChecked.includes(m.TicketUUID)||p.ComponentsChecked.includes(m.TicketUUID))}})}):!1});return(o,r)=>l.value?(s(),_(N,{key:0},[o.value?(s(),_("ol",Tn,[(s(!0),_(N,null,J(d.value,v=>(s(),_("li",{key:v.AccommodationUUID},[o.registration&&o.registration.Allocation&&o.registration.Allocation.Periods.find(f=>f.AccommodationUUID===v.AccommodationUUID)?(s(),_("strong",_n,S(v.Name),1)):(s(),_(N,{key:1},[C(S(v.Name),1)],64))]))),128))])):(s(),_("ul",pn,[(s(!0),_(N,null,J(u.value,v=>{var f;return s(),_("li",{key:v.DateStart},[C(S((f=v.Accommodation)==null?void 0:f.Name)+" ("+S(y(Se)(v.DateStart))+" - "+S(y(Se)(v.DateEnd))+")",1),yn])}),128))])),y(n)?(s(),D(z,{key:2,onClick:r[0]||(r[0]=v=>i.value=!0),variant:"flat",color:"success"},{default:a(()=>[C("Assign Accommodation")]),_:1})):F("",!0),o.convention&&i.value?(s(),D(An,{key:3,modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=v=>i.value=v),title:"Accommodation Allocation",convention:o.convention,registration:o.registration,tickets:o.tickets,"selected-accommodation":d.value},null,8,["modelValue","convention","registration","tickets","selected-accommodation"])):F("",!0)],64)):F("",!0)}});const Va=ot(En,[["__scopeId","data-v-33548a38"]]),Dn={key:0,class:"addonList"},In={key:0},Sn={key:0},Rn=Q({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const c=ae(()=>{if(!e.value)return;const n=JSON.parse(e.value),i=Object.keys(n),u=Te(e.extras);return u.forEach(d=>{d.Options=d.Options.filter(l=>i.includes(l.OptionUUID)?(l.Choices=l.Choices.filter(o=>o.TagUUID===n[l.OptionUUID].choiceId),n[l.OptionUUID].checked):!1)}),u.filter(d=>d.Options.length>0),u});return(n,i)=>n.value?(s(),_("ul",Dn,[(s(!0),_(N,null,J(c.value,u=>(s(),_(N,{key:u.ExtraUUID},[u.Options.length?(s(),_("li",In,[B("strong",null,S(u.Name),1),B("ul",null,[(s(!0),_(N,null,J(u.Options,d=>(s(),_("li",{key:d.OptionUUID},[C(S(d.Name)+" ",1),d.Choices.length==1?(s(),_("small",Sn,"("+S(d.Choices[0].Title)+")",1)):F("",!0)]))),128))])])):F("",!0)],64))),128))])):F("",!0)}});const ha=ot(Rn,[["__scopeId","data-v-55786e01"]]),Cn={key:0},Ma=Q({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const c=ae(()=>{if(!e.value)return;const n=JSON.parse(e.value);return Object.entries(n).filter(([,i])=>i).map(([i,u])=>e.interests.find(d=>d.InterestUUID===i)).filter(i=>i!==void 0)});return(n,i)=>n.value?(s(),_("ul",Cn,[(s(!0),_(N,null,J(c.value,u=>(s(),_("li",{key:u.InterestUUID},S(u.Name),1))),128))])):F("",!0)}}),On=B("br",null,null,-1),Vn=B("small",null,"Options:",-1),hn=B("br",null,null,-1),Mn=B("small",null,"Addons:",-1),ka=Q({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const c=ae(()=>{if(!e.value)return;let n={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{n=JSON.parse(e.value),"ticket"in n&&(n.Ticket=n.ticket),"addonsChecked"in n&&(n.AddonsChecked=n.addonsChecked),"componentsChecked"in n&&(n.ComponentsChecked=n.componentsChecked)}catch{}return n.Ticket.filter(i=>{const u=e.tickets.find(d=>d.TicketUUID===i);return!(!u||u.Type!==vl.TICKET_TYPE_TICKET)}).map(i=>{const u=e.tickets.find(l=>l.TicketUUID===i),d=Te(u);return d.TicketComponents=u.TicketComponents.filter(l=>n.ComponentsChecked.includes(l.TicketUUID)),d.AddonTickets=u.AddonTickets.filter(l=>n.AddonsChecked.includes(l.TicketUUID)),d})});return(n,i)=>n.value?(s(!0),_(N,{key:0},J(c.value,u=>(s(),_("div",{key:u.TicketUUID},[B("strong",null,S(u.Name),1),u.TicketComponents.length>0?(s(),_(N,{key:0},[On,Vn,C("  "),(s(!0),_(N,null,J(u.TicketComponents,d=>(s(),_(N,{key:d.TicketUUID},[B("small",null,S(d.Name),1),C("  ")],64))),128))],64)):F("",!0),u.AddonTickets.length>0?(s(),_(N,{key:1},[hn,Mn,C("  "),(s(!0),_(N,null,J(u.AddonTickets,d=>(s(),_("small",{key:d.TicketUUID},[C("("),B("em",null,S(d.Name),1),C(")")]))),128))],64)):F("",!0)]))),128)):F("",!0)}}),ba=Q({__name:"DataPanelAccommodation",props:Z({accommodations:{},convention:{},data:{},forms:{},tickets:{},venues:{},registration:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){return re(e,"modelValue"),(c,n)=>(s(),_("div",null,[t(Va,{value:c.data,accommodations:c.accommodations,convention:c.convention,forms:c.forms,registration:c.registration,tickets:c.tickets,venues:c.venues},null,8,["value","accommodations","convention","forms","registration","tickets","venues"])]))}}),kn={key:0,class:"text-red-darken-4 font-weight-bold"},bn={key:1,class:"text-orange-darken-2 font-weight-bold"},Nn=Q({__name:"DataPanelAge",props:Z({data:{},forms:{},registration:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=re(e,"modelValue"),n=new Date,i=n.getFullYear(),u=(n.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),d=n.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),l=T(!1),o=T(`${i}-${u}-${d}`),r=T(18);e.forms.find(m=>m.Sections.find(g=>g.Fields?g.Fields.find(A=>{var P;return A.SectionFieldUUID===c.value.SectionFieldUUID?(c.value.SectionField=A,(P=A.Field)==null||P.Values.forEach(M=>{switch(M.Title){case"UNDER_AGE_APPLY_TAG":M.Value.length>0&&(l.value=!0);break;case"BEFORE_DATE":o.value=M.Value;break;case"MIN_AGE":r.value=parseInt(M.Value);break}}),!0):!1}):!1));const v=m=>({registration:f(m,e.registration.CreatedAt||"",r.value),convention:f(m,o.value,r.value)}),f=(m,g,A)=>{if(m>=g)return!1;const P=p(m),L=p(g).getTime()-P.getTime(),U=1e3*60*60*24*365.25;return L/U>=A},p=m=>{const[g,A,P]=m.split("-");return new Date(parseInt(g),parseInt(A)-1,parseInt(P))};return(m,g)=>(s(),_("div",null,[B("p",null,[C(S(y(Se)(m.data,{withDay:!1,withYear:!0}))+" ",1),l.value&&v(m.data).convention&&v(m.data).registration?(s(),D(he,{key:0,icon:"mdi:mdi-check",color:"success"})):l.value&&!v(m.data).convention?(s(),D(he,{key:1,icon:"mdi:mdi-alert",color:"error"})):l.value&&v(m.data).convention&&!v(m.data).registration?(s(),D(he,{key:2,icon:"mdi:mdi-alert",color:"warning"})):F("",!0)]),l.value?(s(),_(N,{key:0},[v(m.data).convention?v(m.data).registration?F("",!0):(s(),_("p",bn," Attendee was under "+S(r.value)+" at time of registration ",1)):(s(),_("p",kn," Attendee is under "+S(r.value),1))],64)):F("",!0)]))}}),Gt=Q({__name:"Badges",props:{convention:{},registration:{},showTitle:{type:Boolean,default:!0}},setup(e){const c=_e(),n=ft(),i=T([]),u=l=>{var r;const o=document.createElement("a");o.download=`${((r=e.convention)==null?void 0:r.Name)||""} Badge Image - ${e.registration.Reference} - ${e.registration.User.DisplayName}.jpg`,o.href=l,document.body.appendChild(o),o.click(),document.body.removeChild(o)},d=async l=>n.GetConBadgeImageURL(e.registration.RegistrationUUID,l);return c.getConBadgeList(e.registration.RegistrationUUID).then(l=>{l.forEach(o=>{d(o).then(r=>{i.value.push({template:o,url:r})})})}).catch(()=>{}),(l,o)=>(s(!0),_(N,null,J(i.value,r=>(s(),D(be,{key:r.template},{default:a(()=>[t(et,null,{default:a(()=>[l.showTitle?(s(),D(xe,{key:0},{default:a(()=>[t(W,{class:"flex-row-reverse"},{default:a(()=>[t(b,{class:"text-wrap flex-grow-1"},{default:a(()=>[C(" Badges (#"+S(l.registration.Reference)+" "+S(l.registration.User.DisplayName)+") ",1)]),_:1})]),_:1})]),_:1})):F("",!0)]),_:1}),t(He,null,{default:a(()=>[t($t,{src:r.url,height:"280",width:"280"},null,8,["src"])]),_:2},1024),t(Pt,null,{default:a(()=>[t(z,{color:"primary","prepend-icon":"mdi:mdi-download",variant:"flat",onClick:v=>u(r.url)},{default:a(()=>[C("Download")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))}}),Ln={key:4},wn={key:7},Fn=Q({__name:"FormDataItem",props:Z({accommodations:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},registration:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=re(e,"modelValue"),n=ae(()=>{var f,p,m,g;const r=c.value,v=()=>{var A;for(let P=0;P<e.forms.length;P+=1)for(let M=0;M<e.forms[P].Sections.length;M+=1)if(e.forms[P].Sections[M].Fields){const L=(A=e.forms[P].Sections[M].Fields)==null?void 0:A.find(U=>U.SectionFieldUUID===r.SectionFieldUUID);if(L)return L}};return((p=(f=r.SectionField)==null?void 0:f.Field)==null?void 0:p.Type)||((g=(m=v())==null?void 0:m.Field)==null?void 0:g.Type)}),i=ae(()=>{for(let r=0;r<e.registration.Submissions.length;r+=1){const f=e.registration.Submissions[r].Data.find(p=>p.SectionFieldUUID===c.value.SectionFieldUUID);if(f)return f.Data}return""}),u=_e(),d=ft(),l=T(""),o=T("");if(n.value==="BADGE_IMAGE")try{const r=JSON.parse(i.value||"{}");r.fileUUID&&(o.value=d.GetBadgeImageURL(r.fileUUID)),e.registration&&u.getConBadgeDisplayName(e.registration.RegistrationUUID).then(v=>{v&&(l.value=v)}).catch(()=>{})}catch{}return(r,v)=>n.value==="ACCOMMODATION"?(s(),D(ba,{key:0,convention:r.convention,tickets:r.tickets,accommodations:r.accommodations,venues:r.venues,registration:r.registration,forms:r.forms,modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=f=>c.value=f),data:i.value},null,8,["convention","tickets","accommodations","venues","registration","forms","modelValue","data"])):n.value==="EXTRAS"?(s(),D(ha,{key:1,value:i.value,extras:r.extras},null,8,["value","extras"])):n.value==="TICKET"?(s(),D(ka,{key:2,value:i.value,tickets:r.tickets},null,8,["value","tickets"])):n.value==="INTERESTS"?(s(),D(Ma,{key:3,value:i.value,interests:r.interests},null,8,["value","interests"])):n.value==="CHECKBOX"?(s(),_("div",Ln,[i.value?(s(),D(he,{key:0,icon:"mdi:mdi-check",color:"success"})):(s(),D(he,{key:1,icon:"mdi:mdi-close",color:"error"}))])):n.value==="AGE"?(s(),D(Nn,{key:5,data:i.value,forms:r.forms,registration:r.registration,modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=f=>c.value=f)},null,8,["data","forms","registration","modelValue"])):n.value==="BADGE_IMAGE"?(s(),D(Gt,{key:6,convention:r.convention,registration:r.registration,"show-title":!1},null,8,["convention","registration"])):(s(),_("div",wn,S(i.value),1))}}),Pn={key:0},$n={key:0},Bn=B("strong",null,"Total:",-1),Gn=Q({__name:"DataPanelRegistrationGroup",props:{registration:{}},setup(e){const c=ae(()=>{const n=[];let i;return e.registration.Leader?i=e.registration:i=e.registration.Primary,n.push({Name:i.User.DisplayName,UUID:i.UserUUID,UserUUID:i.User.UserUUID,IsLeader:!0,Reference:i.Reference,Paid:i.Paid,Total:i.Total}),n.push(...i.Members.map(u=>({Name:u.User.DisplayName,UUID:u.UserUUID,UserUUID:u.User.UserUUID,IsLeader:!1,Reference:u.Reference,Paid:u.Paid,Total:u.Total}))),n});return(n,i)=>n.registration.Members.length===0&&!n.registration.Primary?(s(),_("em",Pn," Not in a group ")):(s(),_(N,{key:1},[B("ul",null,[(s(!0),_(N,null,J(c.value,u=>(s(),_("li",{key:u.UUID,class:"ml-0"},[C(" #"+S(u.Reference)+" : "+S(u.Name)+" ",1),u.IsLeader?(s(),_("strong",$n,"(Leader)")):F("",!0)]))),128))]),Bn,C(" "+S(c.value.length),1)],64))}}),Yn=Q({__name:"DataPanelSubmissionDate",props:{registration:{}},setup(e){const c=ae(()=>{const n=e.registration.Submissions.find(i=>{var u;return((u=i.Form)==null?void 0:u.Type)===Ae.FORM_TYPE_REGISTRATION});return n?n.CreatedAt||"":e.registration.CreatedAt||""});return(n,i)=>(s(),_("div",null,S(y(Se)(c.value,{withDay:!1,withYear:!0})),1))}}),xn={class:"text-grey-lighten-1"},Hn=Q({__name:"DataPanelSubmissionStatus",props:{convention:{},forms:{},registration:{}},emits:["showForm"],setup(e,{emit:c}){const n=st(),i=Aa(n,e.convention),u=ae(()=>e.registration.Submissions.map(o=>{const r=e.forms.find(v=>v.FormUUID===o.FormUUID);if(r)return{Heading:r.Heading,Form:r,Submission:o,Registration:e.registration}}).filter(o=>!!o)),d=(o,r,v)=>{c("showForm",o,r,v)},l=o=>({ID:0,SubmissionUUID:ye(),FormID:o.ID,FormUUID:o.FormUUID,Form:o,UserID:e.registration.UserID,UserUUID:e.registration.UserUUID,RegistrationID:e.registration.ID,RegistrationUUID:e.registration.RegistrationUUID,Registration:e.registration,Data:[],Status:Ta.SUBMISSION_STATUS_NULL});return(o,r)=>(s(),_(N,null,[B("ul",null,[(s(!0),_(N,null,J(o.forms.filter(v=>v.Type===y(Ae).FORM_TYPE_ADMIN&&u.value.findIndex(f=>f.Form.ID===v.ID)<0),v=>(s(),_("li",{key:v.Heading},[B("strong",xn,S(v.Heading),1),y(i)?(s(),D(z,{key:0,class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:f=>d(o.registration,v,l(v))},null,8,["onClick"])):F("",!0)]))),128))]),B("ul",null,[(s(!0),_(N,null,J(u.value,v=>(s(),_("li",{key:v.Heading},[B("strong",null,[C(S(v.Heading),1),v.Form.Type!==y(Ae).FORM_TYPE_ADMIN?(s(),_(N,{key:0},[C(": ")],64)):F("",!0)]),v.Form.Type!==y(Ae).FORM_TYPE_ADMIN?(s(),_("span",{key:0,class:vt(y(ga)(v.Submission.Status))},S(y(Lt)(v.Submission.Status)),3)):F("",!0),y(i)?(s(),D(z,{key:1,icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:f=>d(v.Registration,v.Form,v.Submission)},null,8,["onClick"])):F("",!0)]))),128))])],64))}}),qn={key:0,class:"text-blue"},jn={key:1,class:"text-red"},zn={key:2,class:"text-orange"},Qn={key:3,class:"text-orange"},Kn={key:4,class:"text-orange"},Wn={key:5,class:"text-orange"},Jn={key:6,class:"text-green"},Xn=Q({__name:"DataPanelPaymentStatus",props:{registration:{}},setup(e){const c=ae(()=>{if(e.registration.Paid===0&&e.registration.Total)return"REQUIRED";if(e.registration.Total>e.registration.Paid)return"ADDITIONAL_REQUIRED";const n=e.registration.Members.find(i=>i.Paid===0&&(i.Total||0)>0);return n?e.registration.Total===0&&n.Total===0?"NOT_REQUIRED":e.registration.Total===0&&n.Total||e.registration.Total>0&&n.Total===0?"MISSING_REQUIRED":e.registration.Paid>=e.registration.Total?"AWAITING_PARTNER":"ALL_REQUIRED":e.registration.Total===0?"NOT_REQUIRED":"COMPLETE"});return(n,i)=>c.value=="NOT_REQUIRED"?(s(),_("div",qn,"No Payment Requested")):c.value=="MISSING_REQUIRED"?(s(),_("div",jn,"Partner Payment Not Requested")):c.value=="AWAITING_PARTNER"?(s(),_("div",zn,"Awaiting Partner Payment")):c.value=="ALL_REQUIRED"?(s(),_("div",Qn,"Awaiting Payments")):c.value=="REQUIRED"?(s(),_("div",Kn,"Awaiting Payment")):c.value=="ADDITIONAL_REQUIRED"?(s(),_("div",Wn,"Awaiting Additional Payments")):(s(),_("div",Jn,"Completed"))}});var Zn=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],eo=function(e){return Zn.map(function(c){return c.toLowerCase()}).indexOf(e.toLowerCase())!==-1},to=function(e,c,n){Object.keys(c).filter(eo).forEach(function(i){var u=c[i];typeof u=="function"&&(i==="onInit"?u(e,n):n.on(i.substring(2),function(d){return u(d,n)}))})},ao=function(e,c,n,i){var u=e.modelEvents?e.modelEvents:null,d=Array.isArray(u)?u.join(" "):u;me(i,function(l,o){n&&typeof l=="string"&&l!==o&&l!==n.getContent({format:e.outputFormat})&&n.setContent(l)}),n.on(d||"change input undo redo",function(){c.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},lo=function(e,c,n,i,u,d){i.setContent(d()),n.attrs["onUpdate:modelValue"]&&ao(c,n,i,u),to(e,n.attrs,i)},aa=0,Na=function(e){var c=Date.now(),n=Math.floor(Math.random()*1e9);return aa++,e+"_"+n+aa+String(c)},no=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},la=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},oo=function(e,c){return la(e).concat(la(c))},io=function(e){return e==null},na=function(){return{listeners:[],scriptId:Na("tiny-script"),scriptLoaded:!1}},so=function(){var e=na(),c=function(u,d,l,o){var r=d.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=u,r.src=l;var v=function(){r.removeEventListener("load",v),o()};r.addEventListener("load",v),d.head&&d.head.appendChild(r)},n=function(u,d,l){e.scriptLoaded?l():(e.listeners.push(l),u.getElementById(e.scriptId)||c(e.scriptId,u,d,function(){e.listeners.forEach(function(o){return o()}),e.scriptLoaded=!0}))},i=function(){e=na()};return{load:n,reinitialize:i}},uo=so(),ro=function(){return typeof window<"u"?window:global},$e=function(){var e=ro();return e&&e.tinymce?e.tinymce:null},mo={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var c,n=1,i=arguments.length;n<i;n++){c=arguments[n];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(e[u]=c[u])}return e},Ie.apply(this,arguments)},co=function(e,c,n,i){return e(i||"div",{id:c,ref:n})},vo=function(e,c,n){return e("textarea",{id:c,visibility:"hidden",ref:n})},Ct={selector:void 0,target:void 0},fo=Q({props:mo,setup:function(e,c){var n=e.init?Ie(Ie({},e.init),Ct):Ie({},Ct),i=Ja(e),u=i.disabled,d=i.modelValue,l=i.tagName,o=T(null),r=null,v=e.id||Na("tiny-vue"),f=e.init&&e.init.inline||e.inline,p=!!c.attrs["onUpdate:modelValue"],m=!0,g=e.initialValue?e.initialValue:"",A="",P=function(U){return p?function(){return d!=null&&d.value?d.value:""}:function(){return U?g:A}},M=function(){var U=P(m),w=Ie(Ie({},n),{readonly:e.disabled,target:o.value,plugins:oo(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:f,setup:function(Y){r=Y,Y.on("init",function(x){return lo(x,e,c,Y,d,U)}),typeof n.setup=="function"&&n.setup(Y)}});no(o.value)&&(o.value.style.visibility=""),$e().init(w),m=!1};me(u,function(U){var w;r!==null&&(typeof((w=r.mode)===null||w===void 0?void 0:w.set)=="function"?r.mode.set(U?"readonly":"design"):r.setMode(U?"readonly":"design"))}),me(l,function(U){var w;p||(A=r.getContent()),(w=$e())===null||w===void 0||w.remove(r),Je(function(){return M()})}),Xa(function(){if($e()!==null)M();else if(o.value&&o.value.ownerDocument){var U=e.cloudChannel?e.cloudChannel:"6",w=e.apiKey?e.apiKey:"no-api-key",Y=io(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(w,"/tinymce/").concat(U,"/tinymce.min.js"):e.tinymceScriptSrc;uo.load(o.value.ownerDocument,Y,M)}}),Za(function(){$e()!==null&&$e().remove(r)}),f||(el(function(){m||M()}),tl(function(){var U;p||(A=r.getContent()),(U=$e())===null||U===void 0||U.remove(r)}));var L=function(U){var w;A=r.getContent(),(w=$e())===null||w===void 0||w.remove(r),n=Ie(Ie(Ie({},n),U),Ct),Je(function(){return M()})};return c.expose({rerender:L,getEditor:function(){return r}}),function(){return f?co(Qt,v,o,e.tagName):vo(Qt,v,o)}}});const Uo=["colspan"],Ao=B("strong",null,"E-Mail Content",-1),go=["innerHTML"],To=Q({__name:"Communications",props:{expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean,default:!1},registration:{},showEditor:{type:Boolean}},emits:["close-editor"],setup(e,{emit:c}){const n=_e(),i=T([]),u=T({From:"",Subject:"",HTML:""}),d=T(""),l=T(""),o=T(""),r=T(!1),v=T(e.expanded?["1"]:[]),f=T([]),p=T([]),m=T([{key:"CreatedAt",title:"Date"},{key:"Subject",title:"Subject"},{key:"User.DisplayName",title:"Sender"},{key:"Status",title:"Status"}]),g=T([{key:"CreatedAt",order:"asc"}]);me(u,L=>{o.value=L.From||o.value||"",l.value=L.Subject||l.value||"",d.value=L.HTML||d.value||""});const A=()=>{n.getRegistrationEmails(e.registration.RegistrationUUID).then(L=>{L&&(L.forEach(U=>{U.CreatedAt=ca(new Date(U.CreatedAt||"")),U.Status=nn(U.Status),U.User||(U.User={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),p.value=L)})};A(),(()=>{n.getRegistrationEmailTemplates(e.registration.RegistrationUUID).then(L=>{L&&(i.value=L)})})();const M=({callback:L})=>{n.sendRegistrationEmail(e.registration.RegistrationUUID,o.value,l.value,d.value).then(U=>{U?L&&(L("Email Sent"),A(),setTimeout(()=>{r.value=!1},2e3)):L&&L("Not sent")}).catch(()=>{L&&L("Not sent")})};return(L,U)=>(s(),_(N,null,[L.showEditor?(s(),_(N,{key:0},[t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[t(da,{items:i.value,"item-title":"Subject","return-object":"",label:"Template","hide-details":"",modelValue:u.value,"onUpdate:modelValue":U[0]||(U[0]=w=>u.value=w),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12"},{default:a(()=>[t(ne,{modelValue:o.value,"onUpdate:modelValue":U[1]||(U[1]=w=>o.value=w),label:"From",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12"},{default:a(()=>[t(ne,{modelValue:l.value,"onUpdate:modelValue":U[2]||(U[2]=w=>l.value=w),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12"},{default:a(()=>[t(y(fo),{modelValue:d.value,"onUpdate:modelValue":U[3]||(U[3]=w=>d.value=w),"api-key":"g9sce3fktcgvk0i7sp96cahgyk4cos7q27es3ubnlal3xf3z"},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[t(nt,{onClick:U[4]||(U[4]=w=>c("close-editor")),label:"Close E-mail Editor",color:"secondary","prepend-icon":"mdi:mdi-window-close"})]),_:1}),t(b,{class:"text-right"},{default:a(()=>[t(nt,{onClick:M,label:"Send",color:"error"})]),_:1})]),_:1})],64)):F("",!0),p.value.length&&!L.hideHistory?(s(),D(Tt,{key:1,class:"my-2",multiple:!0,modelValue:v.value,"onUpdate:modelValue":U[7]||(U[7]=w=>v.value=w)},{default:a(()=>[t(gt,{value:"1"},{default:a(()=>[t(Ut,null,{default:a(()=>[C(" Email History ")]),_:1}),t(At,null,{default:a(()=>[t(y(Bt),{items:p.value,headers:m.value,"show-expand":!0,"item-value":"EmailUUID",expanded:f.value,"onUpdate:expanded":U[5]||(U[5]=w=>f.value=w),"sort-by":g.value,"onUpdate:sortBy":U[6]||(U[6]=w=>g.value=w)},{"expanded-row":a(({columns:w,item:Y})=>[B("tr",null,[B("td",{colspan:w.length},[Ao,B("div",{class:"communicationsViewEmailPreview",innerHTML:Y.raw.HTML},null,8,go)],8,Uo)])]),"footer.prepend":a(()=>[t(z,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:A},{default:a(()=>[C("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):F("",!0)],64))}});const La=Q({__name:"Emails",props:{allowSending:{type:Boolean,default:!0},expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},registration:{},textClass:{default:""}},setup(e){const c=T(!1);return(n,i)=>(s(),D(be,null,{default:a(()=>[n.showTitle?(s(),D(et,{key:0},{default:a(()=>[t(xe,null,{default:a(()=>[C(" E-Mails (#"+S(n.registration.Reference)+" "+S(n.registration.User.DisplayName)+") ",1)]),_:1})]),_:1})):F("",!0),t(He,{class:vt(n.textClass)},{default:a(()=>[n.allowSending?(s(),D(W,{key:0},{default:a(()=>[t(b,{cols:"12"},{default:a(()=>[t(z,{"prepend-icon":"mdi:mdi-email",color:"primary",onClick:i[0]||(i[0]=u=>c.value=!0)},{default:a(()=>[C(" Prepare Email ")]),_:1})]),_:1})]),_:1})):F("",!0),t(To,{registration:n.registration,expanded:n.expanded,"hide-history":n.hideHistory,"show-editor":c.value,onCloseEditor:i[1]||(i[1]=u=>c.value=!1)},null,8,["registration","expanded","hide-history","show-editor"])]),_:1},8,["class"])]),_:1}))}}),_o=Q({__name:"EditNoteCategoryDialog",props:Z({convention:{},noteCategory:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["update:noteCategory"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{title:i=""}=n,u=re(e,"modelValue"),d=it(n,c,void 0,void 0,"noteCategory"),l=T(Te(d.value));me(d,()=>{l.value=Te(d.value)});const o=()=>{u.value=!1},r=()=>{l.value=Te(d.value)},v=()=>{d.value=l.value};return(f,p)=>(s(),D(Ze,{modelValue:u.value,"onUpdate:modelValue":p[2]||(p[2]=m=>u.value=m),onReset:r,onSave:v,title:y(i),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(ne,{modelValue:l.value.Name,"onUpdate:modelValue":p[0]||(p[0]=m=>l.value.Name=m),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(pa,{modelValue:l.value.Groups,"onUpdate:modelValue":p[1]||(p[1]=m=>l.value.Groups=m),convention:f.convention,label:"Groups",variant:"outlined","hide-details":""},null,8,["modelValue","convention"])]),_:1})]),_:1})]),_:1})]),actions:a(()=>[t(z,{color:"blue-darken-1",variant:"text",onClick:o},{default:a(()=>[C(" Cancel ")]),_:1}),t(z,{color:"blue-darken-1",variant:"text",onClick:r},{default:a(()=>[C(" Reset ")]),_:1}),t(Ye),t(z,{color:"blue-darken-1",variant:"text",onClick:v},{default:a(()=>[C(" Save ")]),_:1})]),_:1},8,["modelValue","title"]))}}),po=()=>{const e=T(""),c=()=>{const n={x:window.innerWidth,y:window.innerHeight};n.x<600?e.value="xs":n.x>=600&&n.x<960?e.value="sm":n.x>=960&&n.x<1280?e.value="md":n.x>=1280&&n.x<1920?e.value="lg":n.x>=1920&&n.x<2560?e.value="xl":n.x>=2560&&(e.value="xxl")};return window.addEventListener("resize",c),c(),e},yo={style:{"list-style":"none"}},Eo=Q({__name:"NoteCategories",props:{hideHistory:{type:Boolean},convention:{},showEditor:{type:Boolean}},emits:["close"],setup(e,{emit:c}){const n=_e(),i=T(!1),u=T(!1),d=T(""),l=T([]),o=T([{key:"Name",title:"Name"},{key:"Groups",title:"Groups"},{key:"actions",title:"",sortable:!1}]),r=po();T([{key:"CreatedAt",order:"asc"}]);const v=()=>({ID:0,NoteCategoryUUID:ye(),ConventionID:e.convention.ID,ConventionUUID:e.convention.ConventionUUID,Name:"",Groups:[],Notes:[]}),f=T(-1),p=T(v()),m=T(v()),g=()=>{m.value.NoteCategoryUUID=ye(),p.value=Object.assign({},v()),f.value=-1,i.value=!0},A=x=>{f.value=l.value.indexOf(x),p.value=Object.assign({},x),i.value=!0},P=x=>{f.value=l.value.indexOf(x),p.value=Object.assign({},x),u.value=!0},M=()=>{n.deleteNoteCategory(p.value.NoteCategoryUUID).then(x=>{x&&(l.value.splice(f.value,1),U())})},L=()=>{i.value=!1,Je(()=>{p.value=Object.assign({},m.value),f.value=-1})},U=()=>{u.value=!1,Je(()=>{p.value=Object.assign({},m.value),f.value=-1})},w=()=>{n.saveNoteCategory(p.value).then(x=>{x&&(f.value>-1?Object.assign(l.value[f.value],x):l.value.push(x),L())})};return(()=>{n.getNoteCategories(e.convention.ConventionUUID).then(x=>{x&&(l.value=x)})})(),(x,ie)=>(s(),D(y(Bt),{headers:o.value,items:l.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:a(()=>[t(kt,{color:"primary"},Xe({default:a(()=>[t(Ra,null,{default:a(()=>[C("Note Categories")]),_:1}),t(ql,{class:"mx-4 d-none d-sm-inline-flex",inset:!0,vertical:!0}),t(Ye,{class:"d-none d-sm-inline-flex"}),y(r)!="xs"?(s(),D(z,{key:0,dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:g},{default:a(()=>[C(" New Item ")]),_:1})):F("",!0),t(z,{dark:"",class:"mb-2",icon:"mdi:mdi-window-close",onClick:ie[0]||(ie[0]=ee=>c("close"))}),t(Sa,{modelValue:u.value,"onUpdate:modelValue":ie[1]||(ie[1]=ee=>u.value=ee),onDelete:M},null,8,["modelValue"])]),_:2},[y(r)=="xs"?{name:"extension",fn:a(()=>[t(Ye),t(z,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:g},{default:a(()=>[C(" New Item ")]),_:1})]),key:"0"}:void 0]),1024),i.value?(s(),D(_o,{key:0,modelValue:i.value,"onUpdate:modelValue":ie[2]||(ie[2]=ee=>i.value=ee),"note-category":p.value,"onUpdate:noteCategory":[ie[3]||(ie[3]=ee=>p.value=ee),w],title:d.value,convention:x.convention},null,8,["modelValue","note-category","title","convention"])):F("",!0)]),"item.Groups":a(({item:ee})=>[B("ul",yo,[(s(!0),_(N,null,J(ee.selectable.Groups,O=>(s(),_("li",{key:O.GroupUUID,class:"py-1"},S(O.Name),1))),128))])]),"item.actions":a(({item:ee})=>[t(he,{size:"small",class:"me-2",onClick:O=>A(ee.raw)},{default:a(()=>[C(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(he,{size:"small",onClick:O=>P(ee.raw)},{default:a(()=>[C(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),Do=Q({__name:"SelectNoteCategories",props:Z({convention:{},chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:""},label:{},variant:{}},{modelValue:{required:!0}}),emits:Z(["change"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=T([]),u=_e(),d=T([]),l=T(""),o=T(0),r=ae(()=>[...d.value].map(p=>({title:p.Name,value:i.value.find(m=>m.NoteCategoryUUID===p.NoteCategoryUUID)||p})));return typeof e.convention=="object"?l.value=e.convention.ConventionUUID:l.value=e.convention||"",(async()=>{const f=[];l.value&&f.push(u.getNoteCategories(l.value));const p=await Promise.all(f);if(l.value&&p.length==1&&(d.value=p[0].sort((m,g)=>m.Name.localeCompare(g.Name))),Array.isArray(n.value))o.value=2,r.value.forEach(m=>{Array.isArray(n.value)&&n.value.find(A=>A.NoteCategoryUUID===m.value.NoteCategoryUUID)&&i.value.push(m.value)});else if(typeof n.value=="string"){o.value=1;try{const m=JSON.parse(n.value);r.value.forEach(g=>{m.find(P=>P.NoteCategoryUUID===g.value.NoteCategoryUUID)&&i.value.push(g.value)})}catch{}}})(),me(i,()=>{switch(o.value){default:case 2:{n.value=i.value,c("change");break}case 1:{n.value=JSON.stringify(i.value),c("change");break}}}),(f,p)=>(s(),D(da,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=m=>i.value=m),chips:f.chips,multiple:"",label:f.label||"Tags",variant:f.variant||"solo",hint:f.hint,"persistent-hint":!0,clearable:f.clearable,items:r.value,"item-title":"title","item-value":"value"},null,8,["modelValue","chips","label","variant","hint","clearable","items"]))}}),Io=Q({__name:"EditNoteDialog",props:Z({convention:{},note:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["update:note","saved"],["update:modelValue"]),setup(e,{emit:c}){const n=e,{title:i=""}=n,u=_e(),d=re(e,"modelValue"),l=it(n,c,void 0,void 0,"note"),o=T(Te(l.value));me(l,()=>{o.value=Te(l.value)});const r=()=>{o.value=Te(l.value)},v=f=>{o.value.NoteCategories===null&&(o.value.NoteCategories=[]),o.value.CreatedAt=void 0,o.value.DeletedAt=void 0,o.value.UpdatedAt=void 0,o.value.Admin=void 0,o.value.AdminID=void 0,o.value.AdminUUID=void 0,u.saveNote(o.value).then(p=>{p?(o.value=Te(p),f&&f("Note Saved"),l.value=o.value,c("saved",l.value)):f&&f("Internal Error Saving Note")}).catch(p=>{f&&f("Error Saving Note:"+p.ErrorMessage)})};return(f,p)=>o.value?(s(),D(Ze,{key:0,"card-class":"pa-4",modelValue:d.value,"onUpdate:modelValue":p[3]||(p[3]=m=>d.value=m),onReset:r,onSave:v,title:y(i),color:"primary",persistent:!0,fullscreen:!1,"hide-extension":!0,"show-close-action":!0,"show-reset-action":!0,"show-save-action":!0},{default:a(()=>[t(ge,{class:"pa-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12"},{default:a(()=>[t(Do,{modelValue:o.value.NoteCategories,"onUpdate:modelValue":p[0]||(p[0]=m=>o.value.NoteCategories=m),convention:f.convention,label:"Categories",variant:"outlined","hide-details":"",chips:!0},null,8,["modelValue","convention"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12"},{default:a(()=>[t(ne,{modelValue:o.value.Subject,"onUpdate:modelValue":p[1]||(p[1]=m=>o.value.Subject=m),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12"},{default:a(()=>[t(jl,{modelValue:o.value.Description,"onUpdate:modelValue":p[2]||(p[2]=m=>o.value.Description=m),label:"Note",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])):F("",!0)}}),wa=Q({__name:"Notes",props:{allowAdding:{type:Boolean,default:!0},convention:{},expanded:{type:Boolean,default:!0},hideHistory:{type:Boolean},registration:{},showControlPanel:{type:Boolean,default:!0},showEditor:{type:Boolean},showTitle:{type:Boolean,default:!0},textClass:{default:""}},setup(e){const c=_e(),n=()=>({ID:0,NoteUUID:ye(),Description:"",NoteCategories:[],Registration:e.registration,RegistrationID:e.registration.ID,RegistrationUUID:e.registration.RegistrationUUID,Subject:""}),i=T(!1),u=T(!1),d=T([]),l=T([]),o=T(n()),r=()=>{o.value=n(),i.value=!0},v=m=>{o.value=m,i.value=!0},f=()=>{c.getRegistrationNotes(e.registration.RegistrationUUID).then(m=>{m&&(m.forEach(g=>{g.CreatedAt=ca(new Date(g.CreatedAt||"")),g.Admin||(g.Admin={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),d.value=m,e.expanded&&(l.value=m.map(g=>g.NoteUUID)))})},p=()=>{f(),setTimeout(()=>{i.value=!1},2e3)};return f(),(m,g)=>(s(),_(N,null,[t(be,null,{default:a(()=>[t(et,null,{default:a(()=>[t(xe,null,{default:a(()=>[t(W,{class:"flex-row-reverse"},{default:a(()=>[m.showControlPanel?(s(),D(b,{key:0,class:"text-right flex-shrink-1 flex-grow-0",style:{"flex-grow":"0 !important"}},{default:a(()=>[t(z,{class:"d-sm-none",size:"xs",icon:"mdi:mdi-cog",variant:"text",color:"warning",onClick:g[0]||(g[0]=A=>u.value=!0)}),t(z,{class:"d-none d-sm-inline-flex","prepend-icon":"mdi:mdi-cog",variant:"text",color:"warning",onClick:g[1]||(g[1]=A=>u.value=!0)},{default:a(()=>[C("Categories")]),_:1})]),_:1})):F("",!0),m.showTitle?(s(),D(b,{key:1,class:"text-wrap flex-grow-1"},{default:a(()=>[C(" Notes (#"+S(m.registration.Reference)+" "+S(m.registration.User.DisplayName)+") ",1)]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1}),t(He,{class:vt(m.textClass)},{default:a(()=>[d.value.length===0?(s(),_(N,{key:0},[C(" No Notes Recorded ")],64)):(s(),D(Tt,{key:1,multiple:!0,variant:"accordion",modelValue:l.value,"onUpdate:modelValue":g[2]||(g[2]=A=>l.value=A)},{default:a(()=>[(s(!0),_(N,null,J(d.value,A=>(s(),D(gt,{key:`${A.NoteUUID}.${A.UpdatedAt}`,value:A.NoteUUID},{default:a(()=>[t(Ut,{class:"py-0"},{default:a(()=>[C(S(A.Subject)+" ",1),t(Ca,{class:"ml-4"},{default:a(()=>[(s(!0),_(N,null,J(A.NoteCategories,P=>(s(),D(Oa,{key:P.NoteCategoryUUID},{default:a(()=>[C(S(P.Name),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(At,null,{default:a(()=>[t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[C(S(A.Description),1)]),_:2},1024)]),_:2},1024),t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[C(S(y(Se)(A.UpdatedAt||""))+" ",1),A&&A.Admin&&A.Admin.DisplayName?(s(),_(N,{key:0},[C(" - "+S(A.Admin.DisplayName),1)],64)):F("",!0)]),_:2},1024),t(b,{class:"text-right"},{default:a(()=>[t(z,{color:"primary","prepend-icon":"mdi:mdi-pencil",onClick:P=>v(A)},{default:a(()=>[C("Edit")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["class"]),m.allowAdding?(s(),D(Pt,{key:0},{default:a(()=>[t(z,{color:"primary",variant:"flat",onClick:r},{default:a(()=>[C("Add Note")]),_:1})]),_:1})):F("",!0)]),_:1}),t(ct,{modelValue:i.value,"onUpdate:modelValue":g[5]||(g[5]=A=>i.value=A),title:"Create Note"},{default:a(()=>[t(Io,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=A=>i.value=A),note:o.value,"onUpdate:note":g[4]||(g[4]=A=>o.value=A),convention:m.convention,title:"Create Note",onSaved:p},null,8,["modelValue","note","convention"])]),_:1},8,["modelValue"]),t(ct,{modelValue:u.value,"onUpdate:modelValue":g[7]||(g[7]=A=>u.value=A),title:"Note Configuration"},{default:a(()=>[t(Eo,{convention:m.convention,onClose:g[6]||(g[6]=A=>u.value=!1)},null,8,["convention"])]),_:1},8,["modelValue"])],64))}}),So=Q({__name:"StripeRefundPayment",props:Z({paymentTransaction:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["refunded"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=_e(),u=T(!1),d=T("");let l=0;if(e.paymentTransaction.Data&&e.paymentTransaction.Data.PaymentIntent&&typeof e.paymentTransaction.Data.PaymentIntent=="object"){const m=e.paymentTransaction.Data.PaymentIntent;m&&(l=m.amount)}const o=T({Amount:l/100,Description:"",Reason:""}),r=T([{title:"Duplicate",value:"duplicate"},{title:"Fraudulent",value:"fraudulent"},{title:"Requested By Customer",value:"requested_by_customer"}]),v=T(!1);async function f(m){m.preventDefault(),v.value=!0,i.refundStripePayment(e.paymentTransaction.PaymentTransactionUUID,o.value).then(g=>{g?c("refunded",g):p("An unexpected error occurred.")}).catch(g=>{p("An error occurred processing the refund: "+g.toString())}),v.value=!1}const p=m=>{d.value=m,u.value=!0};return(m,g)=>(s(),D(Ze,{modelValue:n.value,"onUpdate:modelValue":g[7]||(g[7]=A=>n.value=A),title:"Refund a Stripe Payment",color:"blue-darken-4",persistent:""},{default:a(()=>[t(ge,{class:"pa-0"},{default:a(()=>[t(zl,{ref:"refundForm",id:"refund-form",onSubmit:g[4]||(g[4]=Vt(A=>f(A),["prevent"]))},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:a(()=>[t(ne,{modelValue:o.value.Amount,"onUpdate:modelValue":g[0]||(g[0]=A=>o.value.Amount=A),modelModifiers:{number:!0},label:"Amount",prefix:"£",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",sm:"6",md:"8",lg:"9",xl:"10"},{default:a(()=>[t(Ue,{modelValue:o.value.Reason,"onUpdate:modelValue":g[1]||(g[1]=A=>o.value.Reason=A),modelModifiers:{number:!0},items:r.value,"item-title":"title","item-value":"value",label:"Stripe Refund Reason",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(b,{cols:"12"},{default:a(()=>[t(ne,{modelValue:o.value.Description,"onUpdate:modelValue":g[2]||(g[2]=A=>o.value.Description=A),modelModifiers:{number:!0},label:"Refund Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:a(()=>[t(z,{color:"error",class:"w-100",onClick:g[3]||(g[3]=A=>n.value=!1)},{default:a(()=>[C("Cancel")]),_:1})]),_:1}),t(Ye),t(b,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:a(()=>[t(z,{type:"submit",color:"success",class:"w-100"},Xe({default:a(()=>[C(" Issue Refund ")]),_:2},[v.value?{name:"prepend",fn:a(()=>[t(Ol,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),t(_a,{modelValue:u.value,"onUpdate:modelValue":g[6]||(g[6]=A=>u.value=A)},{actions:a(()=>[t(z,{variant:"text",onClick:g[5]||(g[5]=A=>u.value=!1)},{default:a(()=>[C(" Close ")]),_:1})]),default:a(()=>[C(S(d.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Ro=["colspan"],Co=B("strong",null,"Details",-1),Oo=["innerHTML"],Fa=Q({__name:"PaymentTransactions",props:{canEdit:{type:Boolean},expanded:{type:Boolean},hideHistory:{type:Boolean},updated:{},registration:{},showEditor:{type:Boolean}},emits:["close-editor","change"],setup(e,{emit:c}){const n=e;let{expanded:i=!0,hideHistory:u=!1,registration:d,showEditor:l}=n;const o=_e(),r=T([]),v=T(i?["1"]:[]),f=T([]),p=T([{key:"CreatedAt",title:"Date"},{key:"Type",title:"Type"},{key:"Source",title:"Source"},{key:"Description",title:"Description"},{key:"Admin",title:"Admin"},{key:"Amount",title:"Amount"},{key:"Controls",title:""}]),m=T(!1),g=T(),A=T(!1),P=T(""),M=T([{key:"CreatedAt",order:"asc"}]),L=()=>({PaymentTransactionUUID:ye(),Amount:0,Data:{},Description:"",ID:0,RegistrationID:d.ID,RegistrationUUID:d.RegistrationUUID,Source:Wt.PAYMENT_TRANSACTION_SOURCE_NULL,Type:ht.PAYMENT_TRANSACTION_TYPE_NULL}),U=T(L()),{convertTransactions:w,getPaymentTransactionsDisplay:Y}=va();me(n,()=>{u=n.hideHistory,d=n.registration,l=n.showEditor,Y(d.RegistrationUUID).then(h=>{f.value=h})});const x=()=>{Y(d.RegistrationUUID).then(h=>{f.value=h})};x();const ie=()=>{o.saveRegistrationPaymentTransaction(U.value).then(h=>{h&&(w(h.PaymentTransactions),U.value=L(),c("close-editor"),c("change"))})},ee=h=>{const V=f.value.find(R=>R.PaymentTransactionUUID===h);V&&(g.value=V.PaymentTransaction,m.value=!0)},O=h=>{if(h)try{f.value=w(h.PaymentTransactions),g.value=void 0,m.value=!1,P.value="Refund Processed",A.value=!0,c("change")}catch(V){console.error(V)}};return(h,V)=>(s(),_(N,null,[y(l)?(s(),_(N,{key:0},[t(xe,null,{default:a(()=>[C(" Add Transaction ")]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{items:y(Tl),"item-title":"title","item-value":"value",label:"Transaction Type",clearable:!0,"hide-details":"",modelValue:U.value.Type,"onUpdate:modelValue":V[0]||(V[0]=R=>U.value.Type=R),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{items:y(_l),"item-title":"title","item-value":"value",label:"Source",clearable:!0,"hide-details":"",modelValue:U.value.Source,"onUpdate:modelValue":V[1]||(V[1]=R=>U.value.Source=R),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"8",md:"10"},{default:a(()=>[t(ne,{label:"Description","hide-details":"",modelValue:U.value.Description,"onUpdate:modelValue":V[2]||(V[2]=R=>U.value.Description=R),variant:"outlined"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",sm:"4",md:"2"},{default:a(()=>[t(ne,{label:"Amount","prepend-inner-icon":"mdi:mdi-currency-gbp","hide-details":"",modelValue:U.value.Amount,"onUpdate:modelValue":V[3]||(V[3]=R=>U.value.Amount=R),modelModifiers:{number:!0},variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"3",md:"2",lg:"1"},{default:a(()=>[t(z,{class:"w-100",onClick:V[4]||(V[4]=R=>c("close-editor")),color:"warning"},{default:a(()=>[C("Cancel")]),_:1})]),_:1}),t(Ye),t(b,{cols:"12",sm:"6",md:"3",lg:"2",xl:"2"},{default:a(()=>[t(z,{class:"w-100",onClick:ie,color:"primary"},{default:a(()=>[C("Submit Transaction")]),_:1})]),_:1})]),_:1})],64)):F("",!0),f.value.length&&!y(u)?(s(),D(Tt,{key:1,class:"my-2",modelValue:v.value,"onUpdate:modelValue":V[10]||(V[10]=R=>v.value=R)},{default:a(()=>[t(gt,{value:"1"},{default:a(()=>[t(Ut,null,{default:a(()=>[C(" Transaction History ")]),_:1}),t(At,null,{default:a(()=>[t(y(Bt),{items:f.value,headers:p.value,"show-expand":!1,"item-value":"PaymentTransactionUUID",expanded:r.value,"onUpdate:expanded":V[5]||(V[5]=R=>r.value=R),"sort-by":M.value,"onUpdate:sortBy":V[6]||(V[6]=R=>M.value=R),class:"transactionTable"},{"item.Controls":a(({item:R})=>[h.canEdit&&R.raw.PaymentTransaction.Source===y(Wt).PAYMENT_TRANSACTION_SOURCE_STRIPE&&R.raw.PaymentTransaction.Type===y(ht).PAYMENT_TRANSACTION_TYPE_PAYMENT?(s(),D(z,{key:0,icon:"mdi:mdi-credit-card-refund",variant:"text",size:"xs",onClick:G=>ee(R.key)},null,8,["onClick"])):F("",!0)]),"expanded-row":a(({columns:R,item:G})=>[B("tr",null,[B("td",{colspan:R.length},[Co,B("div",{innerHTML:G.raw.HTML},null,8,Oo)],8,Ro)])]),"footer.prepend":a(()=>[t(z,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:x},{default:a(()=>[C("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"]),m.value&&g.value?(s(),D(So,{key:0,modelValue:m.value,"onUpdate:modelValue":V[7]||(V[7]=R=>m.value=R),"payment-transaction":g.value,onRefunded:O},null,8,["modelValue","payment-transaction"])):F("",!0),t(_a,{modelValue:A.value,"onUpdate:modelValue":V[9]||(V[9]=R=>A.value=R)},{actions:a(()=>[t(z,{variant:"text",onClick:V[8]||(V[8]=R=>A.value=!1)},{default:a(()=>[C(" Close ")]),_:1})]),default:a(()=>[C(S(P.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):F("",!0)],64))}});const Vo=Q({__name:"DataPanelRegistrationTags",props:Z({registration:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=re(e,"modelValue"),n=ae(()=>!c.value.Meta.Tags||!Array.isArray(c.value.Meta.Tags)||c.value.Meta.Tags.length===0?e.registration.Tags:e.registration.Tags.filter(i=>c.value.Meta.Tags.includes(i.TagUUID)));return(i,u)=>(s(),D(Ca,null,{default:a(()=>[(s(!0),_(N,null,J(n.value,d=>(s(),D(Oa,{key:d.TagUUID},{default:a(()=>[C(S(d.Title),1)]),_:2},1024))),128))]),_:1}))}});const ho=ot(Vo,[["__scopeId","data-v-8cc2c172"]]),Mo=Q({__name:"MetaDataItem",props:Z({accommodations:{},convention:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0}}),emits:Z(["openActions","showForm"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=d=>{c("openActions",d)},u=(d,l,o)=>{c("showForm",d,l,o)};return(d,l)=>n.value.MetaField===y(H).META_DATA_SOURCE_ACCOMMODATION_ALLOCATION?(s(),D(ba,{key:0,convention:d.convention,tickets:d.tickets,accommodations:d.accommodations,venues:d.venues,registration:d.registration,forms:d.forms,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o),data:""},null,8,["convention","tickets","accommodations","venues","registration","forms","modelValue"])):n.value.MetaField===y(H).META_DATA_SOURCE_BADGE_DISPLAY?(s(),D(Gt,{key:1,registration:d.registration,"show-title":!1},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_EMAILS?(s(),D(La,{key:2,"allow-sending":!1,expanded:!1,"show-title":!1,registration:d.registration,"text-class":"pa-0 ma-0"},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_NOTES?(s(),D(wa,{key:3,"allow-adding":!0,convention:d.convention,expanded:!1,registration:d.registration,"show-control-panel":!1,"show-title":!1,"text-class":"pa-0 ma-0"},null,8,["convention","registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_PAYMENT_STATUS?(s(),D(Xn,{key:4,registration:d.registration},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_PAYMENTS?(s(),D(Fa,{key:5,registration:d.registration,expanded:!1},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_REGISTRATION_ACTIONS?(s(),D(z,{key:6,icon:"mdi:mdi-briefcase",variant:"flat",onClick:l[1]||(l[1]=o=>i(d.registration))})):n.value.MetaField===y(H).META_DATA_SOURCE_SUBMISSION_STATUS||n.value.MetaField===y(H).META_DATA_SOURCE_ACCOMMODATION_FORM||n.value.MetaField===y(H).META_DATA_SOURCE_ADMIN_FORM||n.value.MetaField===y(H).META_DATA_SOURCE_DEALER_FORM||n.value.MetaField===y(H).META_DATA_SOURCE_BADGE_FORM||n.value.MetaField===y(H).META_DATA_SOURCE_REGISTRATION_FORM?(s(),D(Hn,{key:7,convention:d.convention,forms:d.forms,registration:d.registration,onShowForm:u},null,8,["convention","forms","registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_REGISTRATION_GROUP?(s(),D(Gn,{key:8,registration:d.registration},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_REGISTRATION_REFERENCE?(s(),_(N,{key:9},[C(S(d.registration.Reference),1)],64)):n.value.MetaField===y(H).META_DATA_SOURCE_SUBMISSION_DATE?(s(),D(Yn,{key:10,registration:d.registration},null,8,["registration"])):n.value.MetaField===y(H).META_DATA_SOURCE_TAGS?(s(),D(ho,{key:11,registration:d.registration,modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value=o)},null,8,["registration","modelValue"])):(s(),_(N,{key:12},[C(" Unhandled Meta Item "+S(n.value),1)],64))}}),ko=Q({__name:"UserDataItem",props:Z({accommodations:{},convention:{},forms:{},interests:{},tickets:{},venues:{},registration:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=re(e,"modelValue"),n=ft(),i=ae(()=>n.GetProfileImageURL(e.registration.UserUUID));return(u,d)=>c.value.UserField===y(le).USER_DATA_SOURCE_TELEGRAM&&u.registration.User.Handle?(s(),_(N,{key:0},[C(" @"+S(u.registration.User.Handle),1)],64)):c.value.UserField===y(le).USER_DATA_SOURCE_AVATAR?(s(),D($t,{key:1,class:"rounded-circle",src:i.value,height:"32",width:"32"},null,8,["src"])):c.value.UserField===y(le).USER_DATA_SOURCE_DATE_OF_BIRTH?(s(),_(N,{key:2},[C(S(y(Se)(u.registration.User.Additional.DOB,{withYear:!0,withDay:!1})),1)],64)):c.value.UserField===y(le).USER_DATA_SOURCE_EMAIL?(s(),_(N,{key:3},[C(S(u.registration.User.Additional.Email),1)],64)):c.value.UserField===y(le).USER_DATA_SOURCE_FIRST_NAME?(s(),_(N,{key:4},[C(S(u.registration.User.Additional.FirstName),1)],64)):c.value.UserField===y(le).USER_DATA_SOURCE_LAST_NAME?(s(),_(N,{key:5},[C(S(u.registration.User.Additional.LastName),1)],64)):(s(),_(N,{key:6},[C(" Unhandled User Field "+S(c.value),1)],64))}}),bo=Q({__name:"PanelItem",props:Z({accommodations:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},registration:{}},{modelValue:{required:!0}}),emits:Z(["openActions","showForm"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=d=>{c("openActions",d)},u=(d,l,o)=>{c("showForm",d,l,o)};return(d,l)=>n.value.SourceType===y(Me).LAYOUT_ITEM_SOURCE_FORM?(s(),D(Fn,{key:0,accommodations:d.accommodations,convention:d.convention,extras:d.extras,forms:d.forms,interests:d.interests,registration:d.registration,tickets:d.tickets,venues:d.venues,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o)},null,8,["accommodations","convention","extras","forms","interests","registration","tickets","venues","modelValue"])):n.value.SourceType===y(Me).LAYOUT_ITEM_SOURCE_META?(s(),D(Mo,{key:1,accommodations:d.accommodations,convention:d.convention,forms:d.forms,interests:d.interests,registration:d.registration,tickets:d.tickets,venues:d.venues,modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value=o),onOpenActions:i,onShowForm:u},null,8,["accommodations","convention","forms","interests","registration","tickets","venues","modelValue"])):n.value.SourceType===y(Me).LAYOUT_ITEM_SOURCE_USER?(s(),D(ko,{key:2,accommodations:d.accommodations,convention:d.convention,forms:d.forms,interests:d.interests,registration:d.registration,tickets:d.tickets,venues:d.venues,modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value=o)},null,8,["accommodations","convention","forms","interests","registration","tickets","venues","modelValue"])):F("",!0)}}),No=Q({__name:"PanelLayout",props:{accommodations:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layout:{},registration:{}},emits:["openActions","showForm"],setup(e,{emit:c}){const n=u=>{c("openActions",u)},i=(u,d,l)=>{c("showForm",u,d,l)};return(u,d)=>(s(),D(W,null,{default:a(()=>[(s(!0),_(N,null,J(u.layout.Panels,l=>{var o,r,v,f,p,m;return s(),D(b,{key:l.LayoutPanelUUID,cols:((o=l.Meta.cols)==null?void 0:o.toString())||!1,xs:((r=l.Meta.cols_xs)==null?void 0:r.toString())||!1,sm:((v=l.Meta.cols_sm)==null?void 0:v.toString())||!1,md:((f=l.Meta.cols_md)==null?void 0:f.toString())||!1,lg:((p=l.Meta.cols_lg)==null?void 0:p.toString())||!1,xl:((m=l.Meta.cols_xl)==null?void 0:m.toString())||!1},{default:a(()=>[t(ge,{class:"border rounded bg-white"},{default:a(()=>[B("h3",null,S(l.Name),1),t(We,{class:"bg-white"},{default:a(()=>[(s(!0),_(N,null,J(l.Items,(g,A)=>(s(),D(Ge,{key:g.LayoutItemUUID,class:"px-0"},{default:a(()=>[l.Items.length>1?(s(),D(fa,{key:0,class:"font-weight-bold"},{default:a(()=>[C(S(g.Label),1)]),_:2},1024)):F("",!0),t(bo,{accommodations:u.accommodations,convention:u.convention,extras:u.extras,forms:u.forms,interests:u.interests,tickets:u.tickets,venues:u.venues,modelValue:l.Items[A],"onUpdate:modelValue":P=>l.Items[A]=P,registration:u.registration,onOpenActions:n,onShowForm:i},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","modelValue","onUpdate:modelValue","registration"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["cols","xs","sm","md","lg","xl"])}),128))]),_:1}))}}),Lo=Q({__name:"DataTableItemPanel",props:{accommodations:{},convention:{},extras:{},forms:{},interests:{},tickets:{},venues:{},layouts:{},registration:{}},emits:["openActions","showForm"],setup(e,{emit:c}){const n=T(),i=T(!1),u=o=>{n.value=o,i.value=!0},d=o=>{c("openActions",o)},l=(o,r,v)=>{c("showForm",o,r,v)};return(o,r)=>(s(),_("div",null,[o.layouts?(s(),D(We,{key:0},{default:a(()=>[(s(!0),_(N,null,J(o.layouts,v=>(s(),D(Ge,{key:v.AdminLayoutUUID,class:"d-block pa-0 ma-0"},{default:a(()=>[t(fa,{style:{"text-overflow":"inherit"},class:"overflow-visible text-wrap"},{default:a(()=>[t(z,{"prepend-icon":"mdi:mdi-page-layout-body",variant:"flat",onClick:f=>u(v)},{default:a(()=>[C(S(v.Name),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):F("",!0),i.value&&n.value?(s(),D(Ze,{key:1,modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=v=>i.value=v),"hide-extension":!0,fullscreen:!0,title:`#${o.registration.Reference} ${o.registration.User.DisplayName} - ${n.value.Name} `},{default:a(()=>[t(No,{accommodations:o.accommodations,convention:o.convention,extras:o.extras,forms:o.forms,interests:o.interests,tickets:o.tickets,venues:o.venues,layout:n.value,registration:o.registration,onOpenActions:d,onShowForm:l},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layout","registration"])]),_:1},8,["modelValue","title"])):F("",!0)]))}}),wo={class:"text-grey-lighten-1"},Fo={key:0,class:"text-blue text-center"},Po={key:1,class:"text-red text-center"},$o={key:2,class:"text-orange text-center"},Bo={key:3,class:"text-orange text-center"},Go={key:4,class:"text-orange text-center"},Yo={key:5,class:"text-orange text-center"},xo={key:6,class:"text-green text-center"},Ho={key:0},qo={key:0},jo=B("strong",null,"Total:",-1),zo=Q({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},forms:{},item:{},interests:{},tickets:{},user:{},venues:{}},emits:["openActions","openPayments","openTags","reload","showForm","switchUser"],setup(e,{emit:c}){const n=(l,o,r)=>{c("showForm",{registration:l,form:o,submission:r})},i=l=>{c("openActions",l)},u=l=>{c("switchUser",l)},d=l=>{const o=e.item.raw.registration;return{ID:0,SubmissionUUID:ye(),FormID:l.ID,FormUUID:l.FormUUID,Form:l,UserID:o.UserID,UserUUID:o.UserUUID,RegistrationID:o.ID,RegistrationUUID:o.RegistrationUUID,Registration:o,Data:[],Status:Ta.SUBMISSION_STATUS_NULL}};return(l,o)=>l.header.type==="ACCOMMODATION"&&l.accommodations.length>0&&l.item.raw[l.header.key]?(s(),D(Va,{key:0,value:l.item.raw[l.header.key].Data,accommodations:l.accommodations,convention:l.convention,forms:l.forms,tickets:l.tickets,venues:l.venues,registration:l.item.raw[l.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):l.header.type==="EXTRAS"&&l.extras.length>0?(s(),D(ha,{key:1,value:l.item.raw[l.header.key],extras:l.extras},null,8,["value","extras"])):l.header.type==="INTERESTS"&&l.interests.length>0?(s(),D(Ma,{key:2,value:l.item.raw[l.header.key],interests:l.interests},null,8,["value","interests"])):l.header.type==="TICKET"&&l.tickets.length>0?(s(),D(ka,{key:3,value:l.item.raw[l.header.key],tickets:l.tickets},null,8,["value","tickets"])):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ADMIN_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(s(),_(N,{key:4},[B("ul",null,[(s(!0),_(N,null,J(l.forms.filter(r=>r.Type===y(Ae).FORM_TYPE_ADMIN&&l.item.raw[l.header.key].findIndex(v=>v.Form.ID===r.ID)<0),r=>(s(),_("li",{key:r.Heading},[B("strong",wo,S(r.Heading),1),t(z,{class:"text-grey-lighten-1",icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:v=>n(l.item.raw.registration,r,d(r))},null,8,["onClick"])]))),128))]),B("ul",null,[(s(!0),_(N,null,J(l.item.raw[l.header.key],r=>(s(),_("li",{key:r.Heading},[B("strong",null,[C(S(r.Heading),1),r.Form.Type!==y(Ae).FORM_TYPE_ADMIN?(s(),_(N,{key:0},[C(": ")],64)):F("",!0)]),r.Form.Type!==y(Ae).FORM_TYPE_ADMIN?(s(),_("span",{key:0,class:vt(y(ga)(r.Submission.Status))},S(y(Lt)(r.Submission.Status)),3)):F("",!0),t(z,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:v=>n(r.Registration,r.Form,r.Submission)},null,8,["onClick"])]))),128))])],64)):l.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(s(),D($t,{key:5,class:"rounded-circle",src:l.item.raw[l.header.key],height:"32",width:"32"},null,8,["src"])):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(s(),_(N,{key:6},[l.item.raw[l.header.key]=="NOT_REQUIRED"?(s(),_("div",Fo,"No Payment Requested")):l.item.raw[l.header.key]=="MISSING_REQUIRED"?(s(),_("div",Po,"Partner Payment Not Requested")):l.item.raw[l.header.key]=="AWAITING_PARTNER"?(s(),_("div",$o,"Awaiting Partner Payment")):l.item.raw[l.header.key]=="ALL_REQUIRED"?(s(),_("div",Bo,"Awaiting Payments")):l.item.raw[l.header.key]=="REQUIRED"?(s(),_("div",Go,"Awaiting Payment")):l.item.raw[l.header.key]=="ADDITIONAL_REQUIRED"?(s(),_("div",Yo,"Awaiting Additional Payments")):(s(),_("div",xo,"Completed"))],64)):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(s(),_(N,{key:7},[t(z,{icon:"mdi:mdi-briefcase",variant:"flat",onClick:o[0]||(o[0]=r=>i(l.item.raw[l.header.key]))}),y(on)(l.user)?(s(),D(z,{key:0,icon:"mdi:mdi-account-switch-outline",variant:"flat",onClick:o[1]||(o[1]=r=>u(l.item.raw[l.header.key]))})):F("",!0)],64)):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(s(),_(N,{key:8},[l.item.raw[l.header.key].length===1?(s(),_("em",Ho," Not in a group ")):(s(),_(N,{key:1},[B("ul",null,[(s(!0),_(N,null,J(l.item.raw[l.header.key],r=>(s(),_("li",{key:r.UUID,class:"ml-0"},[C(" #"+S(r.Reference)+" : "+S(r.Name)+" ",1),r.IsLeader?(s(),_("strong",qo,"(Leader)")):F("",!0)]))),128))]),jo,C(" "+S(l.item.raw[l.header.key].length),1)],64))],64)):l.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DATA_LAYOUT"?(s(),D(Lo,{key:9,accommodations:l.accommodations,convention:l.convention,extras:l.extras,forms:l.forms,interests:l.interests,tickets:l.tickets,venues:l.venues,layouts:l.item.raw[l.header.key].Layouts,registration:l.item.raw[l.header.key].Registration,onOpenActions:i,onShowForm:n},null,8,["accommodations","convention","extras","forms","interests","tickets","venues","layouts","registration"])):(s(),_(N,{key:10},[C(S(l.item.raw[l.header.key]),1)],64))}}),oa=Q({__name:"RegistrationActionTabs",props:Z({alignTabs:{},class:{},fixedTabs:{type:Boolean},showArrows:{type:[String,Boolean]},tabs:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=e,n=re(e,"modelValue");return(i,u)=>(s(),D(ya,Ve({modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=d=>n.value=d)},c),{default:a(()=>[(s(!0),_(N,null,J(i.tabs,d=>(s(),D(Ea,{value:d.value,key:d.value},{default:a(()=>[C(S(d.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"]))}}),Qo=(e=void 0,c)=>e===void 0?!1:Ft(e,wt.GROUP_TYPE_CONVENTION,c.ConventionUUID,c).EditPaymentTransactions,_t=e=>(bt("data-v-861debd5"),e=e(),Nt(),e),Ko={class:"mb-4"},Wo={class:"v-row"},Jo={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Xo={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Zo={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ei={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},ti=_t(()=>B("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),ai={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},li=_t(()=>B("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),ni={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},oi=_t(()=>B("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),ii={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},si=_t(()=>B("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),ui={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},ri=Q({__name:"PaymentActions",props:Z({forms:{},title:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=T(!1),n=T(),i=T([]),u=T(new Date().getTime()),d=T(!1),l=re(e,"modelValue"),o=T(Te(l.value));me(l,()=>{o.value=Te(l.value)});const r=_e();r.getConvention(l.value.ConventionUUID).then(m=>{m&&(d.value=Qo(st(),m))});const v=()=>{r.generateRegistrationCharges(l.value.RegistrationUUID,!1).then(m=>{m&&(i.value=m.PaymentTransactions,n.value=m.Registration,u.value=new Date().getTime())}).catch(()=>{})};v();const f=()=>{r.generateRegistrationCharges(l.value.RegistrationUUID,!0).then(m=>{m&&(i.value=m.PaymentTransactions,n.value=m.Registration,u.value=new Date().getTime())})},{totalCharges:p}=va();return(m,g)=>(s(),D(be,null,{default:a(()=>[t(et,null,{default:a(()=>[t(xe,null,{default:a(()=>[C(" Payments (#"+S(l.value.Reference)+" "+S(l.value.User.DisplayName)+") ",1)]),_:1})]),_:1}),t(He,null,{default:a(()=>[n.value?(s(),_(N,{key:0},[B("h3",Ko,"#"+S(n.value.Reference)+" "+S(n.value.User.DisplayName),1),B("dl",Wo,[(s(!0),_(N,null,J(i.value,A=>(s(),_(N,{key:A.PaymentTransactionUUID},[A.Type===y(ht).PAYMENT_TRANSACTION_TYPE_CHARGE?(s(),_("dt",Jo,[B("div",Xo,S(A.Description.split(":")[0])+": ",1),B("div",Zo,S(A.Description.split(":")[1]),1)])):F("",!0),B("dd",ei," £"+S(A.Amount),1)],64))),128)),ti,B("dd",ai," £"+S(y(p)(i.value)),1),li,B("dd",ni," £"+S(n.value.Total),1),oi,B("dd",ii," £"+S(n.value.Paid),1),si,B("dd",ui," £"+S(n.value.Total-n.value.Paid),1)]),t(W,{class:"flex-row-reverse"},{default:a(()=>[t(b,{class:"text-right"},{default:a(()=>[t(z,{color:"primary",onClick:f},{default:a(()=>[C("Apply Charges")]),_:1})]),_:1}),!c.value&&d.value?(s(),D(b,{key:0},{default:a(()=>[t(z,{color:"secondary",onClick:g[0]||(g[0]=A=>c.value=!0)},{default:a(()=>[C("Transaction Entry")]),_:1})]),_:1})):F("",!0)]),_:1})],64)):F("",!0),t(Fa,{"can-edit":d.value,registration:l.value,"show-editor":c.value,onCloseEditor:g[1]||(g[1]=A=>c.value=!1),updated:u.value,onChange:v},null,8,["can-edit","registration","show-editor","updated"])]),_:1})]),_:1}))}});const di=ot(ri,[["__scopeId","data-v-861debd5"]]),mi=Q({__name:"RegistrationFormStatus",props:Z({forms:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=_e(),n=re(e,"modelValue"),i=(u,d)=>{const l=n.value.Submissions.find(o=>o.SubmissionUUID==d);if(!l){u&&u("Submission not found");return}c.setSubmissionStatus(d,l.Status).then(o=>{o?(n.value.Submissions.forEach((r,v)=>{n.value.Submissions[v].Status=r.Status}),u&&u("Status Saved")):u&&u("Status not saved")}).catch(()=>{u&&u("Status not saved")})};return(u,d)=>(s(),D(be,null,{default:a(()=>[t(et,null,{default:a(()=>[t(xe,null,{default:a(()=>[C("Status (#"+S(n.value.Reference)+" "+S(n.value.User.DisplayName)+")",1)]),_:1})]),_:1}),t(He,null,{default:a(()=>[t(We,null,{default:a(()=>[(s(!0),_(N,null,J(n.value.Submissions,l=>(s(),D(Ge,{key:l.SubmissionUUID,class:"pa-0"},{default:a(()=>[t(W,{class:"py-2 align-center"},{default:a(()=>[t(b,{cols:"9",sm:"10",md:"10",lg:"9"},{default:a(()=>{var o;return[t(Ue,{modelValue:l.Status,"onUpdate:modelValue":r=>l.Status=r,items:y(Jt),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((o=u.forms.find(r=>r.FormUUID==l.FormUUID))==null?void 0:o.Name)||""},{selection:a(()=>[t(he,{class:"mr-4 d-none d-sm-inline"},{default:a(()=>{var r;return[C(S((r=y(Jt).find(v=>v.value===l.Status))==null?void 0:r.icon),1)]}),_:2},1024),C(" "+S(y(Lt)(l.Status)),1)]),item:a(({item:r,props:{onClick:v}})=>[t(Ge,{title:r.title,"prepend-icon":r.raw.icon,onClick:v},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),t(b,{cols:"3",sm:"2",md:"2",lg:"1"},{default:a(()=>[t(nt,{class:"d-none d-sm-inline-flex",title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:o=>i(o.callback,l.SubmissionUUID)},null,8,["onClick"]),t(nt,{class:"d-sm-none",size:"35",icon:"mdi:mdi-content-save",color:"warning",onClick:o=>i(o.callback,l.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),ci=e=>(bt("data-v-a4024c39"),e=e(),Nt(),e),vi=ci(()=>B("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),fi={class:"mb-4"},Ui=Q({__name:"RegistrationTags",props:Z({title:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const c=_e(),n=re(e,"modelValue"),i=T(Te(n.value)),u=T(!1),d=T(i.value.Tags);me(n,()=>{i.value=Te(n.value)});const l=({callback:o})=>{const r=[],v=[];i.value.Tags.forEach(f=>{d.value.find(m=>m.TagUUID===f.TagUUID)||r.push(f.TagUUID)}),d.value.forEach(f=>{i.value.Tags.find(m=>f.TagUUID===m.TagUUID)||v.push(f.TagUUID)}),c.updateRegistrationTags(r,v,i.value.RegistrationUUID).then(f=>{f?o&&(o("Tags Saved"),n.value.Tags=f.Tags):o&&o("Error Saving Tags")}).catch(()=>{o&&o("Error Saving Tags")})};return(o,r)=>(s(),D(be,null,{default:a(()=>[t(et,null,{default:a(()=>[t(xe,null,{default:a(()=>[C("Tags (#"+S(i.value.Reference)+" "+S(i.value.User.DisplayName)+")",1)]),_:1})]),_:1}),t(He,null,{default:a(()=>[t(Kl,{class:"my-4"},{default:a(()=>[t(Wl,null,{default:a(()=>[C("Caution")]),_:1}),vi]),_:1}),B("h3",fi,"#"+S(i.value.Reference)+" "+S(i.value.User.DisplayName),1),t(Da,{modelValue:i.value.Tags,"onUpdate:modelValue":r[0]||(r[0]=v=>i.value.Tags=v),convention:i.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":u.value},null,8,["modelValue","convention","show-uuid"])]),_:1}),t(Pt,{class:"px-4 align-start"},{default:a(()=>[t(ma,{label:"Show UUID",modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=v=>u.value=v)},null,8,["modelValue"]),t(nt,{onClick:l,variant:"flat"})]),_:1})]),_:1}))}});const Ai=ot(Ui,[["__scopeId","data-v-a4024c39"]]),ia=Q({__name:"RegistrationActionWindows",props:Z({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},venues:{}},{modelValue:{required:!0}}),emits:Z(["update:registration"],["update:modelValue"]),setup(e,{emit:c}){const n=e,i=re(e,"modelValue"),u=it(n,c,void 0,void 0,"registration");return(d,l)=>(s(),D(Ia,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=o=>i.value=o)},{default:a(()=>[t(Be,{value:"badges"},{default:a(()=>[i.value=="badges"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(Gt,{convention:d.convention,registration:y(u)},null,8,["convention","registration"])]),_:1})):F("",!0)]),_:1}),t(Be,{value:"emails"},{default:a(()=>[i.value=="emails"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(La,{registration:y(u)},null,8,["registration"])]),_:1})):F("",!0)]),_:1}),t(Be,{value:"notes"},{default:a(()=>[i.value=="notes"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(wa,{convention:d.convention,registration:y(u)},null,8,["convention","registration"])]),_:1})):F("",!0)]),_:1}),t(Be,{value:"payments"},{default:a(()=>[i.value=="payments"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(di,{modelValue:y(u),"onUpdate:modelValue":l[0]||(l[0]=o=>lt(u)?u.value=o:null),forms:d.forms,title:"Registration Payments"},null,8,["modelValue","forms"])]),_:1})):F("",!0)]),_:1}),t(Be,{value:"status"},{default:a(()=>[i.value=="status"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(mi,{modelValue:y(u),"onUpdate:modelValue":l[1]||(l[1]=o=>lt(u)?u.value=o:null),forms:d.forms},null,8,["modelValue","forms"])]),_:1})):F("",!0)]),_:1}),t(Be,{value:"tags"},{default:a(()=>[i.value=="tags"?(s(),D(ge,{key:0,class:"pa-0 mx-0",fluid:!0},{default:a(()=>[t(Ai,{modelValue:y(u),"onUpdate:modelValue":l[2]||(l[2]=o=>lt(u)?u.value=o:null),title:"Registration Tags"},null,8,["modelValue"])]),_:1})):F("",!0)]),_:1})]),_:1},8,["modelValue"]))}}),gi=(e,c)=>e===void 0?!1:Ft(e,wt.GROUP_TYPE_CONVENTION,c.ConventionUUID,c).ViewPaymentTransactions,sa=Q({__name:"RegistrationActions",props:Z({accommodations:{},convention:{},extras:{},forms:{},interests:{},registration:{},tickets:{},title:{},useDialog:{type:Boolean},venues:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["update:registration"],["update:modelValue"]),setup(e,{emit:c}){const n=e,i=re(e,"modelValue"),u=it(n,c,void 0,void 0,"registration"),d=T("notes"),l=st(),o=[{label:"Badge",value:"badges"},{label:"Emails",value:"emails"},{label:"Notes",value:"notes"},{label:"Status",value:"status"},{label:"Tags",value:"tags"}];return gi(l,n.convention)&&o.splice(2,0,{label:"Payments",value:"payments"}),(r,v)=>r.useDialog?(s(),D(Ze,{key:0,modelValue:i.value,"onUpdate:modelValue":v[3]||(v[3]=f=>i.value=f),title:r.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:"","card-class":"ma-0 pa-0"},{extension:a(()=>[t(oa,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=f=>d.value=f),tabs:o,"show-arrows":!0},null,8,["modelValue"])]),default:a(()=>[t(ia,{modelValue:d.value,"onUpdate:modelValue":v[1]||(v[1]=f=>d.value=f),registration:y(u),"onUpdate:registration":v[2]||(v[2]=f=>lt(u)?u.value=f:null),accommodations:r.accommodations,convention:r.convention,extras:r.extras,forms:r.forms,interests:r.interests,tabs:o,tickets:r.tickets,venues:r.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])]),_:1},8,["modelValue","title"])):(s(),_(N,{key:1},[t(oa,{modelValue:d.value,"onUpdate:modelValue":v[4]||(v[4]=f=>d.value=f),tabs:o,"show-arrows":!0},null,8,["modelValue"]),t(ia,{modelValue:d.value,"onUpdate:modelValue":v[5]||(v[5]=f=>d.value=f),registration:y(u),"onUpdate:registration":v[6]||(v[6]=f=>lt(u)?u.value=f:null),accommodations:r.accommodations,convention:r.convention,extras:r.extras,forms:r.forms,interests:r.interests,tabs:o,tickets:r.tickets,venues:r.venues},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])],64))}});const Ti=(e,c=500,n=!1)=>{let i;return(...u)=>{const l=function(){i=void 0,n||e.apply(void 0,u)},o=n&&!i;clearTimeout(i),i=setTimeout(l,c),o&&e.apply(void 0,u)}},_i=B("h4",null,"Grid Size (Max 12)",-1),pi={key:0,class:"text-warning text-right pl-1"},yi=Q({__name:"EditAdminLayout",props:Z({convention:{},layouts:{}},{modelValue:{required:!0}}),emits:Z(["change","delete"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=T([]),u=_e(),d=T(Object.assign({},...e.layouts.map(A=>A.Panels.map(P=>P.Items.map(M=>{if(!M.Meta)return{};const L={};return Object.entries(M.Meta).forEach(U=>{Array.isArray(U[1])?(L[`${M.LayoutItemUUID}.${U[0]}`]=[],U[1].forEach(w=>{L[`${M.LayoutItemUUID}.${U[0]}`].push(w.toString())})):U[1]!==void 0&&U[1]!==null&&(L[`${M.LayoutItemUUID}.${U[0]}`]=[U[1].toString()])}),L}))).flat(2))),l=T(`
Are you sure you wish to delete this layout? All panels relating to it will be
removed and can not be recovered. This action can not be undone once saved.
You will have to create a new layout.
`),o=T(!1),r=T([]);u.getConventionTags(e.convention.ConventionUUID).then(A=>{A&&(r.value=A)}).catch(()=>{});const v=()=>({ID:0,LayoutPanelUUID:ye(),AdminLayoutID:n.value.ID,AdminLayoutUUID:n.value.AdminLayoutUUID,Name:"",Order:n.value.Panels.length+1,Items:[],RequiredFormType:Ae.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[],Meta:{}}),f=A=>()=>({ID:0,LayoutItemUUID:ye(),LayoutPanelID:A.ID,LayoutPanelUUID:A.LayoutPanelUUID,Label:"",SourceType:Me.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:A.Items.length+1,DefaultSort:!1,Meta:{}}),p=(A,P)=>{A.Meta[P]=d.value[`${A.LayoutItemUUID}.${P}`]},m=A=>{const P=i.value.find(M=>M.value===A.SectionFieldUUID);P&&(A.SectionFieldID=P.object.ID,A.SectionField=P.object)};u.getConventionForms(n.value.ConventionUUID).then(A=>{A.forEach(P=>P.Sections.forEach(M=>M.Fields&&i.value.push(...M.Fields.map(L=>{var w;return{title:`${P.Name} - ${M.Name} - ${(w=L.Field)==null?void 0:w.Name}`,value:L.SectionFieldUUID,object:L}})))),i.value.sort(fl("title"))});const g=ae(()=>{switch(n.value.Type){case ke.ADMIN_LAYOUT_PANELS:return"Panels";case ke.ADMIN_LAYOUT_TABLE:return"Tabs"}return"Unknown"});return me(n,()=>{c("change")},{deep:!0}),(A,P)=>(s(),D(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(ne,{modelValue:n.value.Name,"onUpdate:modelValue":P[0]||(P[0]=M=>n.value.Name=M),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:n.value.Type,"onUpdate:modelValue":P[1]||(P[1]=M=>n.value.Type=M),label:"Layout Type",items:y(en),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[t(Mt,{modelValue:n.value.Panels,"onUpdate:modelValue":P[2]||(P[2]=M=>n.value.Panels=M),"new-item":v,closeable:!1,title:g.value,label:"Name","slot-name-prefix":"panel"},Xe({_:2},[J(n.value.Panels,(M,L)=>({name:`panel_${L}`,fn:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(ne,{modelValue:M.Name,"onUpdate:modelValue":U=>M.Name=U,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:M.RequiredFormType,"onUpdate:modelValue":U=>M.RequiredFormType=U,items:y(gl),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(pa,{label:"Required Groups",variant:"outlined",modelValue:M.RequiredGroupMemberships,"onUpdate:modelValue":U=>M.RequiredGroupMemberships=U,convention:n.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this panel. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Da,{label:"Registration Tags",variant:"outlined",modelValue:M.RequiredRegistrationTags,"onUpdate:modelValue":U=>M.RequiredRegistrationTags=U,convention:n.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024),n.value.Type===y(ke).ADMIN_LAYOUT_PANELS?(s(),D(W,{key:0},{default:a(()=>[t(b,{cols:"12",class:"py-0 my-0"},{default:a(()=>[_i]),_:1}),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols,"onUpdate:modelValue":U=>M.Meta.cols=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"Default",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols_xs,"onUpdate:modelValue":U=>M.Meta.cols_xs=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XS",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols_sm,"onUpdate:modelValue":U=>M.Meta.cols_sm=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"SM",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols_md,"onUpdate:modelValue":U=>M.Meta.cols_md=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"MD",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols_lg,"onUpdate:modelValue":U=>M.Meta.cols_lg=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"LG",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(ne,{modelValue:M.Meta.cols_xl,"onUpdate:modelValue":U=>M.Meta.cols_xl=U,modelModifiers:{number:!0},clearable:!0,"hide-details":"",label:"XL",type:"number",min:"1",max:"12"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0)]),_:2},1024),t(Mt,{modelValue:M.Items,"onUpdate:modelValue":U=>M.Items=U,"new-item":f(M),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Xe({_:2},[J(M.Items,(U,w)=>({name:`item_${w}`,fn:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(ne,{modelValue:U.Label,"onUpdate:modelValue":Y=>U.Label=Y,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6"},{default:a(()=>[t(Ue,{modelValue:U.SourceType,"onUpdate:modelValue":Y=>U.SourceType=Y,label:"Source Type",items:y(tn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(b,{cols:"12",sm:"6"},{default:a(()=>[U.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(s(),D(Ue,{key:0,modelValue:U.SectionFieldUUID,"onUpdate:modelValue":Y=>U.SectionFieldUUID=Y,label:"Form Data",items:i.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:Y=>m(U)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):U.SourceType==="LAYOUT_ITEM_SOURCE_META"?(s(),D(Ue,{key:1,modelValue:U.MetaField,"onUpdate:modelValue":Y=>U.MetaField=Y,label:"Miscellaneous Data",items:y(an),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):U.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(s(),D(Ue,{key:2,modelValue:U.UserField,"onUpdate:modelValue":Y=>U.UserField=Y,label:"User Profile Data",items:y(ln),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):F("",!0)]),_:2},1024)]),_:2},1024),A.layouts&&U.SourceType==="LAYOUT_ITEM_SOURCE_META"&&U.MetaField===y(H).META_DATA_SOURCE_DATA_LAYOUT?(s(),D(W,{key:0},{default:a(()=>[t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(Ue,{modelValue:d.value[`${U.LayoutItemUUID}.LayoutUUID`],"onUpdate:modelValue":[Y=>d.value[`${U.LayoutItemUUID}.LayoutUUID`]=Y,Y=>p(U,"LayoutUUID")],clearable:!0,items:A.layouts.filter(Y=>Y.Type===y(ke).ADMIN_LAYOUT_PANELS)||[],multiple:!0,label:"Data Display","item-title":"Name","item-value":"AdminLayoutUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024)):F("",!0),A.layouts&&U.SourceType==="LAYOUT_ITEM_SOURCE_META"&&U.MetaField===y(H).META_DATA_SOURCE_TAGS?(s(),D(W,{key:1},{default:a(()=>[t(b,{cols:"6",sm:"4",lg:"2"},{default:a(()=>[t(Ue,{modelValue:d.value[`${U.LayoutItemUUID}.Tags`],"onUpdate:modelValue":[Y=>d.value[`${U.LayoutItemUUID}.Tags`]=Y,Y=>p(U,"Tags")],clearable:!0,items:r.value||[],multiple:!0,label:"Tags to Display","item-title":"Title","item-value":"TagUUID",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"]),!d.value[U.LayoutItemUUID]||d.value[U.LayoutItemUUID].length===0?(s(),_("small",pi," Will show all tags ")):F("",!0)]),_:2},1024)]),_:2},1024)):F("",!0),n.value.Type===y(ke).ADMIN_LAYOUT_TABLE&&(U.SourceType!==y(Me).LAYOUT_ITEM_SOURCE_META||U.MetaField!==y(H).META_DATA_SOURCE_DATA_LAYOUT)?(s(),D(W,{key:2},{default:a(()=>[t(b,null,{default:a(()=>[t(ma,{modelValue:U.DefaultSort,"onUpdate:modelValue":Y=>U.DefaultSort=Y,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):F("",!0)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue","title"])]),_:1})]),_:1}),t(W,null,{default:a(()=>[t(b,null,{default:a(()=>[t(z,{onClick:P[3]||(P[3]=M=>o.value=!0),"prepend-icon":"mdi:mdi-delete",color:"red-darken-4"},{default:a(()=>[C("Delete Layout")]),_:1})]),_:1})]),_:1}),o.value?(s(),D(Sa,{key:0,modelValue:o.value,"onUpdate:modelValue":P[4]||(P[4]=M=>o.value=M),message:l.value,title:"Delete Layout",subtitle:"Removes this layout and all it's panels",onDelete:P[5]||(P[5]=M=>c("delete"))},null,8,["modelValue","message"])):F("",!0)]),_:1}))}}),Ei=Q({__name:"EditAdminLayouts",props:Z({title:{},convention:{}},{modelValue:{type:Boolean,required:!0}}),emits:Z(["save"],["update:modelValue"]),setup(e,{emit:c}){const n=re(e,"modelValue"),i=T([]),u=T([]),d=T([]),l=_e(),o=()=>({ID:0,AdminLayoutUUID:ye(),ConventionID:e.convention.ID,ConventionUUID:e.convention.ConventionUUID,Name:"New Layout",Type:ke.ADMIN_LAYOUT_PANELS,Panels:[]}),r=()=>{let f=!1;[...new Set(d.value)].forEach(m=>{const g=i.value.findIndex(A=>A.AdminLayoutUUID===m);g<0||g>=i.value.length||(l.saveAdminLayout(i.value[g]).then(A=>{A&&i.value.splice(g,1,A)}).catch(()=>{}),f=!0)}),u.value.forEach(m=>{l.deleteAdminLayout(m).catch(()=>{})}),u.value=[],d.value=[],f&&c("save")},v=f=>{const p=i.value.findIndex(m=>m.AdminLayoutUUID===f.AdminLayoutUUID);p<0||p>=i.value.length||(i.value[p].ID>0&&u.value.push(f.AdminLayoutUUID),i.value.splice(p,1))};return l.getConventionAdminLayouts(e.convention.ConventionUUID).then(f=>{f&&(i.value=f)}).catch(()=>[]),(f,p)=>(s(),D(ct,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=m=>n.value=m),scrollable:!0,"retain-focus":!0,persistent:!0,fullscreen:!0},{default:a(()=>[t(Mt,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=m=>i.value=m),"new-item":o,closeable:!0,"show-delete":!1,"show-save":!0,"has-order":!1,title:f.title,label:"Name","slot-name-prefix":"panel",onClose:p[1]||(p[1]=m=>n.value=!1),onSave:r},Xe({_:2},[J(i.value,(m,g)=>({name:`panel_${g}`,fn:a(()=>[t(ge,{class:"px-0 mx-0",fluid:!0},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12"},{default:a(()=>[t(yi,{modelValue:i.value[g],"onUpdate:modelValue":A=>i.value[g]=A,convention:f.convention,layouts:i.value,onChange:A=>d.value.push(m.AdminLayoutUUID),onDelete:A=>v(m)},null,8,["modelValue","onUpdate:modelValue","convention","layouts","onChange","onDelete"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","title"])]),_:1},8,["modelValue"]))}});function Di(){const e=T([]);al(()=>e.value=[]);function c(n,i){e.value[i]=n}return{refs:e,updateRef:c}}const Ii=ua({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:dt,default:"$first"},prevIcon:{type:dt,default:"$prev"},nextIcon:{type:dt,default:"$next"},lastIcon:{type:dt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...pl(),...yl(),...El(),...Dl(),...Il(),...Sl(),...Rl({tag:"nav"}),...ll(),...Cl({variant:"text"})},"VPagination"),Si=ra()({name:"VPagination",props:Ii(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,c){let{slots:n,emit:i}=c;const u=nl(e,"modelValue"),{t:d,n:l}=ol(),{isRtl:o}=il(),{themeClasses:r}=sl(e),{width:v}=ul(),f=rl(-1);Ot(void 0,{scoped:!0});const{resizeRef:p}=Vl(O=>{if(!O.length)return;const{target:h,contentRect:V}=O[0],R=h.querySelector(".v-pagination__list > *");if(!R)return;const G=V.width,oe=R.offsetWidth+parseFloat(getComputedStyle(R).marginRight)*2;f.value=P(G,oe)}),m=ae(()=>parseInt(e.length,10)),g=ae(()=>parseInt(e.start,10)),A=ae(()=>e.totalVisible?parseInt(e.totalVisible,10):f.value>=0?f.value:P(v.value,58));function P(O,h){const V=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((O-h*V)/h).toFixed(2)))}const M=ae(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(A.value<=1)return[u.value];if(m.value<=A.value)return mt(m.value,g.value);const O=A.value%2===0,h=O?A.value/2:Math.floor(A.value/2),V=O?h:h+1,R=m.value-h;if(V-u.value>=0)return[...mt(Math.max(1,A.value-1),g.value),e.ellipsis,m.value];if(u.value-R>=(O?1:0)){const G=A.value-1,oe=m.value-G+g.value;return[g.value,e.ellipsis,...mt(G,oe)]}else{const G=Math.max(1,A.value-3),oe=G===1?u.value:u.value-Math.ceil(G/2)+g.value;return[g.value,e.ellipsis,...mt(G,oe),e.ellipsis,m.value]}});function L(O,h,V){O.preventDefault(),u.value=h,V&&i(V,h)}const{refs:U,updateRef:w}=Di();Ot({VPaginationBtn:{color:pe(e,"color"),border:pe(e,"border"),density:pe(e,"density"),size:pe(e,"size"),variant:pe(e,"variant"),rounded:pe(e,"rounded"),elevation:pe(e,"elevation")}});const Y=ae(()=>M.value.map((O,h)=>{const V=R=>w(R,h);if(typeof O=="string")return{isActive:!1,key:`ellipsis-${h}`,page:O,props:{ref:V,ellipsis:!0,icon:!0,disabled:!0}};{const R=O===u.value;return{isActive:R,key:O,page:l(O),props:{ref:V,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:R?e.activeColor:e.color,ariaCurrent:R,ariaLabel:d(R?e.currentPageAriaLabel:e.pageAriaLabel,O),onClick:G=>L(G,O)}}}})),x=ae(()=>{const O=!!e.disabled||u.value<=g.value,h=!!e.disabled||u.value>=g.value+m.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:V=>L(V,g.value,"first"),disabled:O,ariaLabel:d(e.firstAriaLabel),ariaDisabled:O}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:V=>L(V,u.value-1,"prev"),disabled:O,ariaLabel:d(e.previousAriaLabel),ariaDisabled:O},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:V=>L(V,u.value+1,"next"),disabled:h,ariaLabel:d(e.nextAriaLabel),ariaDisabled:h},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:V=>L(V,g.value+m.value-1,"last"),disabled:h,ariaLabel:d(e.lastAriaLabel),ariaDisabled:h}:void 0}});function ie(){var h;const O=u.value-g.value;(h=U.value[O])==null||h.$el.focus()}function ee(O){O.key===Kt.left&&!e.disabled&&u.value>+e.start?(u.value=u.value-1,Je(ie)):O.key===Kt.right&&!e.disabled&&u.value<g.value+m.value-1&&(u.value=u.value+1,Je(ie))}return Ua(()=>t(e.tag,{ref:p,class:["v-pagination",r.value,e.class],style:e.style,role:"navigation","aria-label":d(e.ariaLabel),onKeydown:ee,"data-test":"v-pagination-root"},{default:()=>[t("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&t("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(x.value.first):t(z,Ve({_as:"VPaginationBtn"},x.value.first),null)]),t("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(x.value.prev):t(z,Ve({_as:"VPaginationBtn"},x.value.prev),null)]),Y.value.map((O,h)=>t("li",{key:O.key,class:["v-pagination__item",{"v-pagination__item--is-active":O.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(O):t(z,Ve({_as:"VPaginationBtn"},O.props),{default:()=>[O.page]})])),t("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(x.value.next):t(z,Ve({_as:"VPaginationBtn"},x.value.next),null)]),e.showFirstLastPage&&t("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(x.value.last):t(z,Ve({_as:"VPaginationBtn"},x.value.last),null)])])]})),{}}}),Ri=["colspan"],Ci={style:{opacity:"var(--v-medium-emphasis-opacity)"}},fs=Q({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:c}){var qt;const n=ft();c("pageTitle","Registration Manager");const i=dl(),u=ml(),d=T(!0);let l=((qt=i.params.convention)==null?void 0:qt.toString())||"";const o=T({ID:0,ConventionUUID:ye(),OrganisationID:0,OrganisationUUID:Rt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),r=_e(),v=cl.getInstance(),f=T([]),p=T({ID:0,AdminLayoutUUID:ye(),ConventionID:o.value.ID,ConventionUUID:o.value.ConventionUUID,Name:"Registration Table",Type:ke.ADMIN_LAYOUT_TABLE,Panels:[]}),m=T([]),g=T([]),A=T([]),P=T([]),M=T([]),L=T([]),U=T(1),w=T(10),Y=T([]),x=T(0),ie=T(!1),ee=T(""),O=T(""),h=T(""),V=T(""),R=T({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),G=T({FieldUUID:"50189b21-6c55-4c99-a38f-7740a01ec4a4",Value:""}),oe=T({FieldUUID:"1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",Value:""}),fe=T({FieldUUID:"926d43c6-a743-4ab7-bef2-060d762d37a9",Value:""}),ce=T(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",R.value],["50189b21-6c55-4c99-a38f-7740a01ec4a4",G.value],["1523ef15-f2c3-46b9-a687-dcd7bc2c0a50",oe.value],["926d43c6-a743-4ab7-bef2-060d762d37a9",fe.value]])),qe=T(""),je=T(""),tt=T([]),ze=T([]),De=T([]),Ne=T([]),Le=T([]),we=T([]),Re=T(0),Ee=T(),Fe=T(!1),Yt=T(!1),Pa=T(!1),ut=T(),xt=T(),pt=T(),Qe=T(!1),$a=st(),ve=Ti(()=>{O.value=Date.now().toString()});me(ee,I=>{const E=L.value.find($=>$.uuid===I);if(E){const $=E.headers.find(k=>k.defaultSort===!0);$&&(Y.value=[{key:$.key,order:"asc"}],tt.value=[{key:$.key,order:"asc"}])}}),me(Re,I=>{I===8&&Ht()}),me(qe,()=>{ve()}),me(je,()=>{ve()});const Ba=()=>{m.value=[],A.value=[],P.value=[],L.value=[];try{r.getConventionAdminLayoutByName(o.value.ConventionUUID,"Registration Table").then(I=>{Re.value+=1,I?p.value=I:(p.value.ConventionID=o.value.ID,p.value.ConventionUUID=o.value.ConventionUUID)})}catch{p.value.ConventionID=o.value.ID,p.value.ConventionUUID=o.value.ConventionUUID}try{r.getConventionAdminLayouts(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(A.value=I)})}catch{}try{r.getConventionForms(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(m.value=I)})}catch{}try{r.getConventionAccommodation(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(ze.value=I)})}catch{}try{r.getConventionVenues(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(we.value=I)})}catch{}try{r.getConventionExtras(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(De.value=I)})}catch{}try{r.getConventionInterests(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(Ne.value=I)})}catch{}try{r.getConventionTickets(o.value.ConventionUUID).then(I=>{Re.value+=1,I&&(Le.value=I)})}catch{}try{r.getConventionGroups(o.value.ConventionUUID).then(I=>{I&&(g.value=I.sort((E,$)=>E.Name.localeCompare($.Name)))})}catch{}try{r.getConventionTags(o.value.ConventionUUID).then(I=>{I&&(M.value=I.sort((E,$)=>E.Title.localeCompare($.Title)).map(E=>(E.Title=`${E.Title} [${E.Key}]`,E)))})}catch{}},yt=({page:I,itemsPerPage:E,sortBy:$})=>{d.value=!0,U.value=I,Y.value=$;const k=L.value.find(ue=>ue.uuid==ee.value),de=k==null?void 0:k.layout.Items;let se="",jt="";if($&&de&&$.length>=1){const ue=de.find(Dt=>Dt.LayoutItemUUID==$[0].key);switch(jt=$[0].order||"asc",ue==null?void 0:ue.MetaField){case H.META_DATA_SOURCE_ACCOMMODATION_FORM:se="submission.status";break;case H.META_DATA_SOURCE_BADGE_FORM:se="submission.status";break;case H.META_DATA_SOURCE_DEALER_FORM:se="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_FORM:se="submission.status";break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:se="reference";break;case H.META_DATA_SOURCE_SUBMISSION_DATE:se="created";break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:se="submission.status";break}switch(ue==null?void 0:ue.UserField){case le.USER_DATA_SOURCE_DISPLAY_NAME:se="user.display_name";break;case le.USER_DATA_SOURCE_EMAIL:se="user.email";break;case le.USER_DATA_SOURCE_FIRST_NAME:se="user.firstname";break;case le.USER_DATA_SOURCE_HANDLE:se="user.handle";break;case le.USER_DATA_SOURCE_LAST_NAME:se="user.lastname";break}}try{const ue={Direction:jt,Limit:E,Offset:(I-1)*E,Order:se};k&&k.layout.RequiredRegistrationTags.length>0&&(ue.PanelUUID=k==null?void 0:k.layout.LayoutPanelUUID),(k==null?void 0:k.layout.RequiredFormType)===Ae.FORM_TYPE_ACCOMMODATION&&(ue.Accommodation=!0),(k==null?void 0:k.layout.RequiredFormType)===Ae.FORM_TYPE_BADGE&&(ue.Badge=!0),(k==null?void 0:k.layout.RequiredFormType)===Ae.FORM_TYPE_DEALER&&(ue.Dealer=!0),(k==null?void 0:k.layout.RequiredFormType)===Ae.FORM_TYPE_REGISTRATION&&(ue.Registration=!0),ue.GroupUUID=qe.value||Rt,ue.TagUUID=je.value||Rt,ue.Email=V.value,ue.Reference=h.value,ue.FieldValues=Array.from(ce.value.values());const Dt=O.value;r.searchConventionRegistrations(o.value.ConventionUUID,ue).then(It=>{It&&Dt===O.value&&(x.value=It.Total,P.value=It.Registrations,L.value.forEach(St=>{const Ka=St.layout;St.items=P.value.map(K=>{const rt=[];let Ce;K.Leader?Ce=K:Ce=K.Primary,rt.push({Name:Ce.User.DisplayName,UUID:Ce.UserUUID,UserUUID:Ce.User.UserUUID,IsLeader:!0,Reference:Ce.Reference,Paid:Ce.Paid,Total:Ce.Total}),rt.push(...Ce.Members.map(Oe=>({Name:Oe.User.DisplayName,UUID:Oe.UserUUID,UserUUID:Oe.User.UserUUID,IsLeader:!1,Reference:Oe.Reference,Paid:Oe.Paid,Total:Oe.Total})));const te={};return St.headers.forEach(Oe=>{var zt;const j=Ka.Items.find(at=>at.LayoutItemUUID===Oe.key);if(j){if(j.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&j.SectionField)K.Submissions.forEach(at=>{const Ke=at.Data.find(q=>q.SectionFieldUUID===j.SectionFieldUUID);if(Ke){Oe.type===Al.ACCOMMODATION?te[j.LayoutItemUUID]={Data:Ke.Data,Registration:K}:te[j.LayoutItemUUID]=Ke.Data;return}});else if(j.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&j.UserField)switch(j.UserField){case le.USER_DATA_SOURCE_AVATAR:te[j.LayoutItemUUID]=n.GetProfileImageURL(K.UserUUID);break;case le.USER_DATA_SOURCE_DISPLAY_NAME:te[j.LayoutItemUUID]=K.User.DisplayName;break;case le.USER_DATA_SOURCE_EMAIL:te[j.LayoutItemUUID]=K.User.Additional.Email;break;case le.USER_DATA_SOURCE_HANDLE:te[j.LayoutItemUUID]=K.User.Handle;break;case le.USER_DATA_SOURCE_DATE_OF_BIRTH:te[j.LayoutItemUUID]=K.User.Additional.DOB;break;case le.USER_DATA_SOURCE_FIRST_NAME:te[j.LayoutItemUUID]=K.User.Additional.FirstName;break;case le.USER_DATA_SOURCE_LAST_NAME:te[j.LayoutItemUUID]=K.User.Additional.LastName;break;case le.USER_DATA_SOURCE_TELEGRAM:te[j.LayoutItemUUID]="";break}else if(j.SourceType==="LAYOUT_ITEM_SOURCE_META"&&j.MetaField){const at=(zt=m.value.find(q=>q.Type===Ae.FORM_TYPE_REGISTRATION))==null?void 0:zt.FormUUID,Ke=K.Submissions.find(q=>q.FormUUID===at);switch(j.MetaField){case H.META_DATA_SOURCE_REGISTRATION_ACTIONS:te[j.LayoutItemUUID]=K;break;case H.META_DATA_SOURCE_REGISTRATION_GROUP:te[j.LayoutItemUUID]=rt;break;case H.META_DATA_SOURCE_REGISTRATION_REFERENCE:te[j.LayoutItemUUID]=K.Reference;break;case H.META_DATA_SOURCE_SUBMISSION_DATE:if(Ke){const q=new Date(Ke.CreatedAt||"");te[j.LayoutItemUUID]=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}-${q.getDate().toString().padStart(2,"0")} ${q.getHours().toString().padStart(2,"0")}:${q.getMinutes().toString().padStart(2,"0")}:${q.getSeconds().toString().padStart(2,"0")}`}else{const q=new Date(K.CreatedAt||"");te[j.LayoutItemUUID]=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}-${q.getDate().toString().padStart(2,"0")} ${q.getHours().toString().padStart(2,"0")}:${q.getMinutes().toString().padStart(2,"0")}:${q.getSeconds().toString().padStart(2,"0")}`}break;case H.META_DATA_SOURCE_ACCOMMODATION_FORM:te[j.LayoutItemUUID]=K.Submissions.map(q=>{const X=m.value.find(Pe=>Pe.FormUUID===q.FormUUID);return{Heading:X==null?void 0:X.Heading,Form:X,Submission:q,Registration:K}}).filter(q=>{var X;return((X=q.Form)==null?void 0:X.Type)===Ae.FORM_TYPE_ACCOMMODATION});break;case H.META_DATA_SOURCE_BADGE_FORM:te[j.LayoutItemUUID]=K.Submissions.map(q=>{const X=m.value.find(Pe=>Pe.FormUUID===q.FormUUID);return{Heading:X==null?void 0:X.Heading,Form:X,Submission:q,Registration:K}}).filter(q=>{var X;return((X=q.Form)==null?void 0:X.Type)===Ae.FORM_TYPE_BADGE});break;case H.META_DATA_SOURCE_DEALER_FORM:te[j.LayoutItemUUID]=K.Submissions.map(q=>{const X=m.value.find(Pe=>Pe.FormUUID===q.FormUUID);return{Heading:X==null?void 0:X.Heading,Form:X,Submission:q,Registration:K}}).filter(q=>{var X;return((X=q.Form)==null?void 0:X.Type)===Ae.FORM_TYPE_DEALER});break;case H.META_DATA_SOURCE_PAYMENT_STATUS:if(K.Paid===0&&K.Total)te[j.LayoutItemUUID]="REQUIRED";else if(K.Total>K.Paid)te[j.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const q=rt.find(X=>X.Paid===0&&(X.Total||0)>0);if(q){K.Total===0&&q.Total===0?te[j.LayoutItemUUID]="NOT_REQUIRED":K.Total===0&&q.Total||K.Total>0&&q.Total===0?te[j.LayoutItemUUID]="MISSING_REQUIRED":K.Paid>=K.Total?te[j.LayoutItemUUID]="AWAITING_PARTNER":te[j.LayoutItemUUID]="ALL_REQUIRED";break}else K.Total===0?te[j.LayoutItemUUID]="NOT_REQUIRED":te[j.LayoutItemUUID]="COMPLETE"}break;case H.META_DATA_SOURCE_SUBMISSION_STATUS:Ql(K.Submissions,m.value),te[j.LayoutItemUUID]=K.Submissions.map(q=>{const X=m.value.find(Pe=>Pe.FormUUID===q.FormUUID);return{Heading:X==null?void 0:X.Heading,Form:X,Submission:q,Registration:K}});break;case H.META_DATA_SOURCE_DATA_LAYOUT:te[j.LayoutItemUUID]={Registration:K,Layouts:A.value.filter(q=>{if(j.Meta&&j.Meta.LayoutUUID&&Array.isArray(j.Meta.LayoutUUID))return j.Meta.LayoutUUID.includes(q.AdminLayoutUUID)})};break}}}}),{key:K.RegistrationUUID,registration:K,...te}})}),d.value=!1)})}catch{}},Ga=I=>{ie.value=!1,I&&(p.value=I,Ht())},Ht=()=>{p.value.Panels.forEach(I=>{I.Items.forEach(E=>{(E.SectionField==null||E.SectionField.Field==null)&&m.value.find($=>{$.Sections.find(k=>{if(k.Fields){const de=k.Fields.find(se=>se.SectionFieldUUID===E.SectionFieldUUID);if(de)return E.SectionField=de,!0}})})})}),p.value.Panels.length>0&&(L.value=[],p.value.Panels.forEach(I=>{const E={uuid:ye(),order:I.Order,name:I.Name,headers:[],items:[],layout:I};I.Items.sort(($,k)=>$.Order>k.Order?1:$.Order==k.Order?0:-1),E.headers=I.Items.map($=>{var k,de;return{key:$.LayoutItemUUID,title:$.Label||((de=(k=$.SectionField)==null?void 0:k.Field)==null?void 0:de.Label)||"",align:$.Align==="end"?"end":"start",sortable:xa($),type:Ya($),defaultSort:$.DefaultSort,meta:$.Meta}}),L.value.push(E)}),L.value=L.value.sort((I,E)=>I.order>E.order?1:I.order==E.order?0:-1)),(ee.value==null||ee.value=="")&&L.value.length>0&&(ee.value=L.value[0].uuid)};l?r.getConvention(l).then(I=>{I&&(o.value=I,p.value.ConventionID=o.value.ID,p.value.ConventionUUID=o.value.ConventionUUID,Ba())}).catch(()=>{u.push("/")}):u.push("/");const Ya=I=>{var E,$;if(I.SourceType===Me.LAYOUT_ITEM_SOURCE_META)return`${I.SourceType}.${I.MetaField}`;if(I.SourceType===Me.LAYOUT_ITEM_SOURCE_FORM)return($=(E=I.SectionField)==null?void 0:E.Field)==null?void 0:$.Type;if(I.SourceType===Me.LAYOUT_ITEM_SOURCE_USER)return`${I.SourceType}.${I.UserField}`},xa=I=>{const E=[H.META_DATA_SOURCE_ACCOMMODATION_FORM,H.META_DATA_SOURCE_BADGE_FORM,H.META_DATA_SOURCE_DEALER_FORM,H.META_DATA_SOURCE_REGISTRATION_FORM,H.META_DATA_SOURCE_REGISTRATION_REFERENCE,H.META_DATA_SOURCE_SUBMISSION_DATE,H.META_DATA_SOURCE_SUBMISSION_STATUS],$=[le.USER_DATA_SOURCE_DISPLAY_NAME,le.USER_DATA_SOURCE_EMAIL,le.USER_DATA_SOURCE_HANDLE,le.USER_DATA_SOURCE_DATE_OF_BIRTH,le.USER_DATA_SOURCE_FIRST_NAME,le.USER_DATA_SOURCE_LAST_NAME];return E.includes(I.MetaField)||$.includes(I.UserField)},Ha=I=>{Ee.value=I,Fe.value=!0},qa=I=>{Ee.value=I,Yt.value=!0},ja=I=>{Ee.value=I,Pa.value=!0};me(Fe,I=>{I||(Ee.value=void 0)}),me(Yt,I=>{I||(Ee.value=void 0)});const Et=async(I="")=>{xt.value=await r.getRegistrationGroup(I)},za=({registration:I,form:E,submission:$})=>{Ee.value=I,Et(I.RegistrationUUID).then(()=>{ut.value=E,pt.value=$,Qe.value=!0})},Qa=I=>{r.switchUser(I.UserUUID).then(E=>{E&&Jl(E.tokens,E.user,u,!1)}).catch(E=>{console.error(E)})};return v.on("registration.group.leave",I=>{r.leaveRegistrationGroup(I).then(E=>{E&&Et(I).then(()=>{v.emit("registration.group.left",E)})})}),v.on("registration.group.remove.member",I=>{r.leaveRegistrationGroup(I).then(E=>{E&&Et(I).then(()=>{v.emit("registration.group.left",E)})})}),(I,E)=>(s(),D(Zl,null,{default:a(()=>[t(kt,{color:"blue-darken-4"},{default:a(()=>[t(ya,{modelValue:ee.value,"onUpdate:modelValue":E[0]||(E[0]=$=>ee.value=$),"show-arrows":""},{default:a(()=>[(s(!0),_(N,null,J(L.value,$=>(s(),D(Ea,{key:$.uuid,value:$.uuid},{default:a(()=>[C(S($.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(Ye),t(z,{icon:"mdi:mdi-cog-outline",onClick:E[1]||(E[1]=$=>ie.value=!0)})]),_:1}),t(Ia,{modelValue:ee.value,"onUpdate:modelValue":E[23]||(E[23]=$=>ee.value=$),disabled:!0,touch:!1},{default:a(()=>[(s(!0),_(N,null,J(L.value,$=>(s(),D(Be,{key:$.uuid,value:$.uuid},{default:a(()=>[$.uuid===ee.value?(s(),D(be,{key:0,class:"pa-2"},{default:a(()=>[t(y(un),{expanded:f.value,"onUpdate:expanded":E[19]||(E[19]=k=>f.value=k),page:U.value,"onUpdate:page":E[20]||(E[20]=k=>U.value=k),"items-per-page":w.value,"onUpdate:itemsPerPage":E[21]||(E[21]=k=>w.value=k),"sort-by":tt.value,"onUpdate:sortBy":E[22]||(E[22]=k=>tt.value=k),headers:$.headers,"items-length":x.value,items:$.items,"item-value":"key",loading:d.value,search:O.value,"onUpdate:options":yt,"show-expand":""},Xe({top:a(()=>[t(Tt,{class:"mb-3"},{default:a(()=>[t(gt,null,{default:a(()=>[t(Ut,{color:"secondary",class:"font-weight-bold pb-0 pt-0"},{default:a(()=>[t(b,{class:"pa-0"},{default:a(()=>[C(" Search Criteria "),t(he,{class:"pl-5",icon:"mdi:mdi-credit-card-search-outline"})]),_:1}),t(b,{class:"d-none d-sm-block pa-0",cols:"0"},{default:a(()=>[t(ne,{modelValue:h.value,"onUpdate:modelValue":E[2]||(E[2]=k=>h.value=k),label:"Badge No.",clearable:!0,"hide-details":"",variant:"plain",onClick:E[3]||(E[3]=Vt(()=>{},["stop"])),"onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{class:"d-none d-md-block pa-0"},{default:a(()=>[t(ne,{modelValue:R.value.Value,"onUpdate:modelValue":E[4]||(E[4]=k=>R.value.Value=k),label:"Furry Name",clearable:!0,"hide-details":"",variant:"plain",onClick:E[5]||(E[5]=Vt(()=>{},["stop"])),"onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1})]),_:1}),t(At,{class:"pt-2"},{default:a(()=>[t(W,null,{default:a(()=>[t(b,{cols:"12",sm:"6",md:"3",lg:"2",xl:"1"},{default:a(()=>[t(ne,{modelValue:h.value,"onUpdate:modelValue":E[6]||(E[6]=k=>h.value=k),label:"Badge No.",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"6",md:"4",lg:"5",xl:"2"},{default:a(()=>[t(ne,{modelValue:R.value.Value,"onUpdate:modelValue":E[7]||(E[7]=k=>R.value.Value=k),label:"Furry Name",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:a(()=>[t(ne,{modelValue:V.value,"onUpdate:modelValue":E[8]||(E[8]=k=>V.value=k),label:"E-mail",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:a(()=>[t(ne,{modelValue:G.value.Value,"onUpdate:modelValue":E[9]||(E[9]=k=>G.value.Value=k),label:"Legal Forename",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"6",md:"4",lg:"4",xl:"2"},{default:a(()=>[t(ne,{modelValue:oe.value.Value,"onUpdate:modelValue":E[10]||(E[10]=k=>oe.value.Value=k),label:"Legal Surname",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"12",md:"4",lg:"4",xl:"2"},{default:a(()=>[t(ne,{modelValue:fe.value.Value,"onUpdate:modelValue":E[11]||(E[11]=k=>fe.value.Value=k),type:"date",label:"Date of Birth",clearable:!0,"hide-details":"",variant:"outlined","onClick:clear":y(ve),onInput:y(ve)},null,8,["modelValue","onClick:clear","onInput"])]),_:1}),t(b,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:a(()=>[t(Ue,{modelValue:qe.value,"onUpdate:modelValue":E[12]||(E[12]=k=>qe.value=k),label:"Permission Groups",clearable:!0,"hide-details":"",variant:"outlined",items:g.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),t(b,{cols:"12",sm:"6",md:"6",lg:"6",xl:"6"},{default:a(()=>[t(Ue,{modelValue:je.value,"onUpdate:modelValue":E[13]||(E[13]=k=>je.value=k),label:"Tags",clearable:!0,"hide-details":"",variant:"outlined",items:M.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),"expanded-row":a(({columns:k,item:de})=>[B("tr",null,[B("td",{colspan:k.length},[t(sa,{modelValue:Fe.value,"onUpdate:modelValue":E[15]||(E[15]=se=>Fe.value=se),registration:de.selectable.registration,"onUpdate:registration":se=>de.selectable.registration=se,accommodations:ze.value,convention:o.value,extras:De.value,forms:m.value,interests:Ne.value,tickets:Le.value,title:`Registration Controls (#${de.selectable.registration.Reference} ${de.selectable.registration.User.DisplayName})`,"use-dialog":!1,venues:we.value},null,8,["modelValue","registration","onUpdate:registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])],8,Ri)])]),"item.data-table-expand":a(({item:k})=>[f.value.findIndex(de=>de===k.key)>=0?(s(),D(z,{key:0,"append-icon":"mdi:mdi-chevron-up",size:"xs",variant:"flat",onClick:de=>f.value.splice(f.value.findIndex(se=>se===k.key),1)},{default:a(()=>[k.selectable.registration.Notes&&k.selectable.registration.Notes.length>0?(s(),_(N,{key:0},[C(S(k.selectable.registration.Notes.length),1)],64)):F("",!0)]),_:2},1032,["onClick"])):(s(),D(z,{key:1,"append-icon":"mdi:mdi-chevron-down",size:"xs",variant:"flat",onClick:de=>f.value.push(k.key)},{default:a(()=>[k.selectable.registration.Notes&&k.selectable.registration.Notes.length>0?(s(),_(N,{key:0},[C(S(k.selectable.registration.Notes.length),1)],64)):F("",!0)]),_:2},1032,["onClick"]))]),bottom:a(()=>[t(ge,{fluid:!0},{default:a(()=>[t(W,{class:"align-center"},{default:a(()=>[t(b,{cols:"12",lg:"7","order-lg":"3",xl:"8"},{default:a(()=>[t(Si,{modelValue:U.value,"onUpdate:modelValue":E[16]||(E[16]=k=>U.value=k),length:Math.ceil(x.value/w.value)},null,8,["modelValue","length"])]),_:1}),t(b,{cols:"6",sm:"4",md:"2",lg:"2",xl:"1","order-lg":"1"},{default:a(()=>[t(Ue,{"model-value":w.value,density:"compact","hide-details":"","item-title":"title","item-value":"value",label:"Items per page",min:"-1",max:"100",type:"number",variant:"outlined",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}],"onUpdate:modelValue":E[17]||(E[17]=k=>w.value=parseInt(k,10))},null,8,["model-value"])]),_:1}),t(b,{cols:"6",sm:"3",md:"2",lg:"1",xl:"1","order-lg":"2"},{default:a(()=>[t(ne,{modelValue:U.value,"onUpdate:modelValue":E[18]||(E[18]=k=>U.value=k),modelModifiers:{number:!0},density:"compact","hide-details":"",label:"Page",min:"1",max:Math.ceil(x.value/w.value),type:"number",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),t(b,{class:"text-right",cols:"12",sm:"5",md:"8",lg:"2",xl:"2","order-lg":"4"},{default:a(()=>[B("span",Ci,[w.value===-1?(s(),_(N,{key:0},[C(" 1-"+S(x.value)+" of "+S(x.value),1)],64)):(s(),_(N,{key:1},[C(S((U.value-1)*w.value+1)+"-"+S(U.value*w.value>=x.value?x.value:U.value*w.value)+" of "+S(x.value),1)],64))])]),_:1})]),_:1})]),_:1})]),_:2},[J($.headers,k=>({name:`item.${k.key}`,fn:a(({item:de})=>[t(zo,{header:k,item:de,accommodations:ze.value,convention:o.value,extras:De.value,forms:m.value,interests:Ne.value,tickets:Le.value,user:y($a),venues:we.value,onOpenActions:Ha,onOpenPayments:qa,onOpenTags:ja,onReload:E[14]||(E[14]=se=>yt({page:U.value,itemsPerPage:w.value,sortBy:Y.value})),onSwitchUser:Qa,onShowForm:za},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","user","venues"])])}))]),1032,["expanded","page","items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):F("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),ie.value?(s(),D(Ei,{key:0,title:"Edit Layouts",modelValue:ie.value,"onUpdate:modelValue":E[24]||(E[24]=$=>ie.value=$),convention:o.value,onSave:Ga},null,8,["modelValue","convention"])):F("",!0),Ee.value?(s(),_(N,{key:1},[Fe.value?(s(),D(sa,{key:0,modelValue:Fe.value,"onUpdate:modelValue":E[25]||(E[25]=$=>Fe.value=$),registration:Ee.value,"onUpdate:registration":E[26]||(E[26]=$=>Ee.value=$),accommodations:ze.value,convention:o.value,extras:De.value,forms:m.value,interests:Ne.value,tickets:Le.value,title:`Registration Controls (#${Ee.value.Reference} ${Ee.value.User.DisplayName})`,"use-dialog":!0,venues:we.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","title","venues"])):F("",!0)],64)):F("",!0),Qe.value&&pt.value&&ut.value?(s(),D(ct,{key:2,modelValue:Qe.value,"onUpdate:modelValue":E[30]||(E[30]=$=>Qe.value=$),scrollable:!0,fullscreen:!0,persistent:!0},{default:a(()=>[t(be,{class:"bg-red-darken-4"},{default:a(()=>[t(kt,{color:"error"},{default:a(()=>[t(Ra,null,{default:a(()=>[C("Submission Editor - Admin Mode")]),_:1}),t(Ye),t(Xl,null,{default:a(()=>[t(z,{icon:"mdi:mdi-window-close",onClick:E[27]||(E[27]=$=>Qe.value=!1)})]),_:1})]),_:1}),t(He,null,{default:a(()=>[t(Ul,{modelValue:ut.value,"onUpdate:modelValue":E[28]||(E[28]=$=>ut.value=$),admin:!0,convention:o.value,data:pt.value,editable:!0,"registration-group":xt.value,onClose:E[29]||(E[29]=$=>{Qe.value=!1,yt({page:U.value,itemsPerPage:w.value,sortBy:Y.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):F("",!0)]),_:1}))}});export{fs as default};
