import{m as Ve,u as Ie,a as Ee,b as Fe}from"./VSelect-TUBqX_o2.js";import{c as Pe,V as le}from"./VTextField-fOc6anT2.js";import{j as ke,u as we,V as te,A as Ke}from"./VContainer-hkDLDWg4.js";import{p as re,r as O,c as K,C as L,h as Se,aC as Z,aG as be,R as Me,d as xe,ad as pe,s as Y,u as J,w as z,X as ae,a9 as Ae,f as s,F as Q,m as H,aM as Oe,x as De,aN as Re,aO as ue}from"./index-qMvE5g7-.js";import{u as Ne,f as Le}from"./forwardRefs-Sfz4S4-7.js";import{e as Ye,V as Ue,a as ne}from"./VList-GlF2Awim.js";import{m as je,a as Be}from"./VAvatar-G0U33xIE.js";import{V as Ge}from"./VCheckboxBtn-kD2PNXnM.js";import{a as ze}from"./VChip-pgaMUUdk.js";var He=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(He||{});const sl=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Qe=(e,i,t)=>e==null||i==null?-1:e.toString().toLocaleLowerCase().indexOf(i.toString().toLocaleLowerCase()),We=re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Xe(e,i,t){var P;const m=[],v=(t==null?void 0:t.default)??Qe,h=t!=null&&t.filterKeys?Z(t.filterKeys):!1,_=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return m;e:for(let d=0;d<e.length;d++){const[V,k=V]=Z(e[d]),r={},u={};let y=-1;if(i&&!(t!=null&&t.noFilter)){if(typeof V=="object"){const D=h||Object.keys(k);for(const w of D){const U=be(k,w,k),R=(P=t==null?void 0:t.customKeyFilter)==null?void 0:P[w];if(y=R?R(U,i,V):v(U,i,V),y!==-1&&y!==!1)R?r[w]=y:u[w]=y;else if((t==null?void 0:t.filterMode)==="every")continue e}}else y=v(V,i,V),y!==-1&&y!==!1&&(u.title=y);const S=Object.keys(u).length,b=Object.keys(r).length;if(!S&&!b||(t==null?void 0:t.filterMode)==="union"&&b!==_&&!S||(t==null?void 0:t.filterMode)==="intersection"&&(b!==_||!S))continue}m.push({index:d,matches:{...u,...r}})}return m}function $e(e,i,t,m){const v=O([]),h=O(new Map),_=K(()=>m!=null&&m.transform?L(i).map(d=>[d,m.transform(d)]):L(i));Se(()=>{const d=typeof t=="function"?t():L(t),V=typeof d!="string"&&typeof d!="number"?"":String(d),k=Xe(_.value,V,{customKeyFilter:{...e.customKeyFilter,...L(m==null?void 0:m.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),r=L(i),u=[],y=new Map;k.forEach(S=>{let{index:b,matches:D}=S;const w=r[b];u.push(w),y.set(w.value,D)}),v.value=u,h.value=y});function P(d){return h.value.get(d.value)}return{filteredItems:v,filteredMatches:h,getMatches:P}}function Je(e,i,t){if(i==null)return e;if(Array.isArray(i))throw new Error("Multiple matches is not implemented");return typeof i=="number"&&~i?s(Q,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,i)]),s("span",{class:"v-autocomplete__mask"},[e.substr(i,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(i+t)])]):e}const Ze=re({autoSelectFirst:{type:[Boolean,String]},search:String,...We({filterKeys:["title"]}),...Ve(),...Me(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...je({transition:!1})},"VAutocomplete"),il=xe()({name:"VAutocomplete",props:Ze(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,i){let{slots:t}=i;const{t:m}=pe(),v=O(),h=Y(!1),_=Y(!0),P=Y(!1),d=O(),V=O(),k=J(e,"menu"),r=K({get:()=>k.value,set:l=>{var a;k.value&&!l&&((a=d.value)!=null&&a.Î¨openChildren)||(k.value=l)}}),u=Y(-1),y=K(()=>{var l;return(l=v.value)==null?void 0:l.color}),S=K(()=>r.value?e.closeText:e.openText),{items:b,transformIn:D,transformOut:w}=Ye(e),{textColorClasses:U,textColorStyles:R}=ke(y),g=J(e,"search",""),o=J(e,"modelValue",[],l=>D(l===null?[null]:Z(l)),l=>{const a=w(l);return e.multiple?a:a[0]??null}),oe=K(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),A=Ne(),{filteredItems:W,getMatches:se}=$e(e,b,()=>_.value?"":g.value),I=K(()=>e.hideSelected?W.value.filter(l=>!o.value.some(a=>a.value===l.value)):W.value),ie=K(()=>o.value.map(l=>l.props.value)),j=K(()=>{var a;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&g.value===((a=I.value[0])==null?void 0:a.title))&&I.value.length>0&&!_.value&&!P.value}),X=K(()=>e.hideNoData&&!I.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),$=O(),{onListScroll:ce,onListKeydown:fe}=Ie($,v);function ve(l){e.openOnClear&&(r.value=!0),g.value=""}function de(){X.value||(r.value=!0)}function me(l){X.value||(h.value&&(l.preventDefault(),l.stopPropagation()),r.value=!r.value)}function he(l){var E,n,T;if(e.readonly||A!=null&&A.isReadonly.value)return;const a=v.value.selectionStart,f=o.value.length;if((u.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(r.value=!0),["Escape"].includes(l.key)&&(r.value=!1),j.value&&["Enter","Tab"].includes(l.key)&&M(I.value[0]),l.key==="ArrowDown"&&j.value&&((E=$.value)==null||E.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(u.value<0){l.key==="Backspace"&&!g.value&&(u.value=f-1);return}const c=u.value,F=o.value[u.value];F&&!F.props.disabled&&M(F),u.value=c>=f-1?f-2:c}if(l.key==="ArrowLeft"){if(u.value<0&&a>0)return;const c=u.value>-1?u.value-1:f-1;o.value[c]?u.value=c:(u.value=-1,v.value.setSelectionRange((n=g.value)==null?void 0:n.length,(T=g.value)==null?void 0:T.length))}if(l.key==="ArrowRight"){if(u.value<0)return;const c=u.value+1;o.value[c]?u.value=c:(u.value=-1,v.value.setSelectionRange(0,0))}}}function ge(l){if(ue(v.value,":autofill")||ue(v.value,":-webkit-autofill")){const a=b.value.find(f=>f.title===l.target.value);a&&M(a)}}function ye(){var l;h.value&&(_.value=!0,(l=v.value)==null||l.focus())}function Te(l){h.value=!0,setTimeout(()=>{P.value=!0})}function Ce(l){P.value=!1}function _e(l){(l==null||l===""&&!e.multiple)&&(o.value=[])}const N=Y(!1);function M(l){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!l.props.disabled)if(e.multiple){const f=o.value.findIndex(E=>e.valueComparator(E.value,l.value));if(f===-1)o.value=[...o.value,l];else{const E=[...o.value];E.splice(f,1),o.value=E}}else o.value=a?[l]:[],N.value=!0,g.value=a?l.title:"",r.value=!1,_.value=!0,ae(()=>N.value=!1)}return z(h,(l,a)=>{var f;l!==a&&(l?(N.value=!0,g.value=e.multiple?"":String(((f=o.value.at(-1))==null?void 0:f.props.title)??""),_.value=!0,ae(()=>N.value=!1)):(!e.multiple&&g.value==null?o.value=[]:j.value&&!P.value&&!o.value.some(E=>{let{value:n}=E;return n===I.value[0].value})&&M(I.value[0]),r.value=!1,g.value="",u.value=-1))}),z(g,l=>{!h.value||N.value||(l&&(r.value=!0),_.value=!l)}),z(r,()=>{if(!e.hideSelected&&r.value&&o.value.length){const l=I.value.findIndex(a=>o.value.some(f=>a.value===f.value));Ae&&window.requestAnimationFrame(()=>{var a;l>=0&&((a=V.value)==null||a.scrollToIndex(l))})}}),z(I,(l,a)=>{h.value&&(!l.length&&e.hideNoData&&(r.value=!1),!a.length&&l.length&&(r.value=!0))}),we(()=>{const l=!!(e.chips||t.chip),a=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),f=o.value.length>0,E=le.filterProps(e);return s(le,H({ref:v},E,{modelValue:g.value,"onUpdate:modelValue":[n=>g.value=n,_e],focused:h.value,"onUpdate:focused":n=>h.value=n,validationValue:o.externalValue,counterValue:oe.value,dirty:f,onChange:ge,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":r.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":u.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:f?void 0:e.placeholder,"onClick:clear":ve,"onMousedown:control":de,onKeydown:he}),{...t,default:()=>s(Q,null,[s(Ee,H({ref:d,modelValue:r.value,"onUpdate:modelValue":n=>r.value=n,activator:"parent",contentClass:"v-autocomplete__content",disabled:X.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ye},e.menuProps),{default:()=>[a&&s(Ue,{ref:$,selected:ie.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:fe,onFocusin:Te,onFocusout:Ce,onScrollPassive:ce,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},{default:()=>{var n,T,c;return[(n=t["prepend-item"])==null?void 0:n.call(t),!I.value.length&&!e.hideNoData&&(((T=t["no-data"])==null?void 0:T.call(t))??s(ne,{title:m(e.noDataText)},null)),s(Fe,{ref:V,renderless:!0,items:I.value},{default:F=>{var ee;let{item:C,index:x,itemRef:p}=F;const q=H(C.props,{ref:p,key:x,active:j.value&&x===0?!0:void 0,onClick:()=>M(C)});return((ee=t.item)==null?void 0:ee.call(t,{item:C,index:x,props:q}))??s(ne,q,{prepend:B=>{let{isSelected:G}=B;return s(Q,null,[e.multiple&&!e.hideSelected?s(Ge,{key:C.value,modelValue:G,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&s(Be,{image:C.props.prependAvatar},null),C.props.prependIcon&&s(te,{icon:C.props.prependIcon},null)])},title:()=>{var B,G;return _.value?C.title:Je(C.title,(B=se(C))==null?void 0:B.title,((G=g.value)==null?void 0:G.length)??0)}})}}),(c=t["append-item"])==null?void 0:c.call(t)]}})]}),o.value.map((n,T)=>{function c(p){p.stopPropagation(),p.preventDefault(),M(n,!1)}const F={"onClick:close":c,onMousedown(p){p.preventDefault(),p.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=l?!!t.chip:!!t.selection,x=C?Oe(l?t.chip({item:n,index:T,props:F}):t.selection({item:n,index:T})):void 0;if(!(C&&!x))return s("div",{key:n.value,class:["v-autocomplete__selection",T===u.value&&["v-autocomplete__selection--selected",U.value]],style:T===u.value?R.value:{}},[l?t.chip?s(Ke,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[x]}):s(ze,H({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},F),null):x??s("span",{class:"v-autocomplete__selection-text"},[n.title,e.multiple&&T<o.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[De(",")])])])})]),"append-inner":function(){var F;for(var n=arguments.length,T=new Array(n),c=0;c<n;c++)T[c]=arguments[c];return s(Q,null,[(F=t["append-inner"])==null?void 0:F.call(t,...T),e.menuIcon?s(te,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:me,onClick:Re,"aria-label":m(S.value),title:m(S.value)},null):void 0])}})}),Le({isFocused:h,isPristine:_,menu:r,search:g,filteredItems:W,select:M},v)}});export{He as T,il as V,sl as a,We as m,$e as u};
