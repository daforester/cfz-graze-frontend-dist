import{p as he,n as Oe,e as B,t as Y,c as ge,G as ke,v as i,H as h,x as de,I as $,a1 as _e,a2 as Le,r as D,a3 as ne,K as s,L as O,M as U,$ as Ie,S as K,a8 as ve,Z as g,Q as N,R as _,O as M,_ as fe,U as P,N as w,a4 as Ve,a0 as be,w as Ne}from"./index-df29916c.js";import{_ as Me}from"./ModelDialog.vue_vue_type_script_setup_true_lang-19c9cb75.js";import{m as Fe,j as Pe,k as we,l as xe,n as Ye,o as Be,p as $e,u as He,q as Ge,r as je,s as Je,t as Ke,v as qe,w as ze,x as We,y as Ae,z as Te,A as Se,_ as Ee,f as Qe,g as Xe,h as Ze,i as et,d as tt}from"./VWindowItem-d2821b52.js";import{c as at,T as lt}from"./filter-86814a27.js";import{a as oe,V as H}from"./VRow-3b5d91ea.js";import{V as me}from"./VTextField-0fd1da76.js";import{V as J}from"./VSelect-84ead75f.js";import{u as ot,j as ce}from"./VContainer-191f98a5.js";import{v as q}from"./v4-a960c1f4.js";import{V as pe}from"./VBtn-b98a03a6.js";import{u as nt,V as st}from"./VToolbar-b5b1a284.js";import{V as it}from"./VSpacer-2c377dbd.js";import{e as ut}from"./VCard-5e19215e.js";import{V as De}from"./VTable-30f34e3c.js";import"./VChip-eeb2c0cc.js";import"./scopeId-a34467fc.js";import"./VAvatar-a3479c39.js";import"./VDialog-3f903fa8.js";import"./VCheckboxBtn-01817d4f.js";import"./VToolbarItems-de5600cd.js";import"./VList-46543805.js";var ye=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(ye||{});const rt=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Re=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Re||{});const dt=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}],mt=[{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var b=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(b||{});const ct=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],vt=he({itemsLength:{type:[Number,String],required:!0},...Fe(),...Pe(),...we()},"VDataTableServer"),Ut=Oe()({name:"VDataTableServer",props:vt(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,f)=>!0},setup(e,f){let{emit:t,slots:a}=f;const{groupBy:l}=xe(e),{sortBy:n,multiSort:u,mustSort:I}=Ye(e),{page:T,itemsPerPage:F}=Be(e),A=B(()=>parseInt(e.itemsLength,10)),{columns:r,headers:c}=$e(e,{groupBy:l,showSelect:Y(e,"showSelect"),showExpand:Y(e,"showExpand")}),{items:p}=He(e,r),{toggleSort:d}=Ge({sortBy:n,multiSort:u,mustSort:I,page:T}),{opened:y,isGroupOpen:C,toggleGroup:z,extractRows:W}=je({groupBy:l,sortBy:n}),{pageCount:Q,setItemsPerPage:X}=Je({page:T,itemsPerPage:F,itemsLength:A}),{flatItems:k}=Ke(p,l,y),{isSelected:se,select:ie,selectAll:Z,toggleSelect:ue,someSelected:ee,allSelected:o}=qe(e,{allItems:p,currentPage:p}),{isExpanded:v,toggleExpand:m}=ze(e),S=B(()=>W(p.value));We({page:T,itemsPerPage:F,sortBy:n,groupBy:l,search:Y(e,"search")}),ge("v-data-table",{toggleSort:d,sortBy:n}),ke({VDataTableRows:{hideNoData:Y(e,"hideNoData"),noDataText:Y(e,"noDataText"),loading:Y(e,"loading"),loadingText:Y(e,"loadingText")}});const E=B(()=>({page:T.value,itemsPerPage:F.value,sortBy:n.value,pageCount:Q.value,toggleSort:d,setItemsPerPage:X,someSelected:ee.value,allSelected:o.value,isSelected:se,select:ie,selectAll:Z,toggleSelect:ue,isExpanded:v,toggleExpand:m,isGroupOpen:C,toggleGroup:z,items:S.value,groupedItems:k.value,columns:r.value,headers:c.value}));ot(()=>{const[L]=Ae.filterProps(e),[R]=Te.filterProps(e),[V]=Se.filterProps(e),[G]=De.filterProps(e);return i(De,de({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},G),{top:()=>{var x;return(x=a.top)==null?void 0:x.call(a,E.value)},default:()=>{var x,te,j,ae;return a.default?a.default(E.value):i(h,null,[(x=a.colgroup)==null?void 0:x.call(a,E.value),i("thead",{class:"v-data-table__thead",role:"rowgroup"},[i(Te,de(R,{sticky:e.fixedHeader}),a)]),(te=a.thead)==null?void 0:te.call(a,E.value),i("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a.body?a.body(E.value):i(Se,de(V,{items:k.value}),a)]),(j=a.tbody)==null?void 0:j.call(a,E.value),(ae=a.tfoot)==null?void 0:ae.call(a,E.value)])},bottom:()=>a.bottom?a.bottom(E.value):i(Ae,L,{prepend:a["footer.prepend"]})})})}}),_t=$({__name:"EditAdminLayout",props:_e({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:_e(["save"],["update:modelValue"]),setup(e,{emit:f}){const t=Le(e,"modelValue"),a=D(ne(e.layout)),l=D([]),n=Ie(),u=({callback:A})=>{const r=()=>{A&&A("Failed to Save Layout")},c=()=>{A&&A("Layout Saved")};n.saveAdminLayout(a.value).then(p=>{p?(c(),f("save",p)):r()}).catch(()=>{r()})},I=()=>({ID:0,LayoutPanelUUID:q(),AdminLayoutID:a.value.ID,AdminLayoutUUID:a.value.AdminLayoutUUID,Name:"",Order:a.value.Panels.length+1,Items:[]}),T=A=>()=>({ID:0,LayoutItemUUID:q(),LayoutPanelID:A.ID,LayoutPanelUUID:A.LayoutPanelUUID,Label:"",SourceType:Re.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:A.Items.length+1}),F=A=>{const r=l.value.find(c=>c.value===A.SectionFieldUUID);r&&(A.SectionFieldID=r.object.ID,A.SectionField=r.object)};return n.getConventionForms(e.layout.ConventionUUID).then(A=>{A.forEach(r=>r.Sections.forEach(c=>c.Fields&&l.value.push(...c.Fields.map(p=>{var y;return{title:`${r.Name} - ${c.Name} - ${(y=p.Field)==null?void 0:y.Name}`,value:p.SectionFieldUUID,object:p}})))),l.value.sort(at("title"))}),(A,r)=>(s(),O(Me,{modelValue:t.value,"onUpdate:modelValue":r[3]||(r[3]=c=>t.value=c),onSave:u,title:A.title,color:"primary"},{default:U(()=>[i(ce,{class:"px-0 mx-0",fluid:!0},{default:U(()=>[i(oe,null,{default:U(()=>[i(H,{cols:"12",sm:"6"},{default:U(()=>[i(me,{modelValue:a.value.Name,"onUpdate:modelValue":r[0]||(r[0]=c=>a.value.Name=c),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),i(H,{cols:"12",sm:"6"},{default:U(()=>[i(J,{modelValue:a.value.Type,"onUpdate:modelValue":r[1]||(r[1]=c=>a.value.Type=c),label:"Layout Type",items:K(rt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),i(Ee,{modelValue:a.value.Panels,"onUpdate:modelValue":r[2]||(r[2]=c=>a.value.Panels=c),"new-item":I,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},ve({_:2},[g(a.value.Panels,(c,p)=>({name:`panel_${p}`,fn:U(()=>[i(ce,{class:"px-0 mx-0",fluid:!0},{default:U(()=>[i(oe,null,{default:U(()=>[i(H,{cols:"12",sm:"6"},{default:U(()=>[i(me,{modelValue:c.Name,"onUpdate:modelValue":d=>c.Name=d,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),i(Ee,{modelValue:c.Items,"onUpdate:modelValue":d=>c.Items=d,"new-item":T(c),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},ve({_:2},[g(c.Items,(d,y)=>({name:`item_${y}`,fn:U(()=>[i(ce,{class:"px-0 mx-0",fluid:!0},{default:U(()=>[i(oe,null,{default:U(()=>[i(H,{cols:"12",sm:"6"},{default:U(()=>[i(me,{modelValue:d.Label,"onUpdate:modelValue":C=>d.Label=C,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i(oe,null,{default:U(()=>[i(H,{cols:"12",sm:"6"},{default:U(()=>[i(J,{modelValue:d.SourceType,"onUpdate:modelValue":C=>d.SourceType=C,label:"Source Type",items:K(dt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),i(H,{cols:"12",sm:"6"},{default:U(()=>[d.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(s(),O(J,{key:0,modelValue:d.SectionFieldUUID,"onUpdate:modelValue":C=>d.SectionFieldUUID=C,label:"Form Data",items:l.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:C=>F(d)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):d.SourceType==="LAYOUT_ITEM_SOURCE_META"?(s(),O(J,{key:1,modelValue:d.MetaField,"onUpdate:modelValue":C=>d.MetaField=C,label:"Miscellaneous Data",items:K(mt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):d.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(s(),O(J,{key:2,modelValue:d.UserField,"onUpdate:modelValue":C=>d.UserField=C,label:"User Profile Data",items:K(ct),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):N("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),At={key:0,class:"accommodationList"},Tt=$({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},value:{default:""}},setup(e){const f=B(()=>{if(!e.value)return[];const t=JSON.parse(e.value),a=e.accommodations.filter(l=>t.includes(l.AccommodationUUID)).sort((l,n)=>{const u=t.findIndex(T=>T===l.AccommodationUUID),I=t.findIndex(T=>T===n.AccommodationUUID);return u>I?1:-1});return ne(a)});return(t,a)=>t.value?(s(),_("ol",At,[(s(!0),_(h,null,g(f.value,l=>(s(),_("li",{key:l.AccommodationUUID},M(l.Name),1))),128))])):N("",!0)}});const St=fe(Tt,[["__scopeId","data-v-1ba5f67a"]]),Et={key:0,class:"addonList"},Dt={key:0},It=$({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const f=B(()=>{if(!e.value)return;const t=JSON.parse(e.value),a=Object.keys(t),l=ne(e.extras);return l.forEach(n=>{n.Options=n.Options.filter(u=>a.includes(u.OptionUUID)?(u.Choices=u.Choices.filter(I=>I.TagUUID===t[u.OptionUUID].choiceId),t[u.OptionUUID].checked):!1)}),l.filter(n=>n.Options.length>0),l});return(t,a)=>t.value?(s(),_("ul",Et,[(s(!0),_(h,null,g(f.value,l=>(s(),_("li",{key:l.ExtraUUID},[P("strong",null,M(l.Name),1),P("ul",null,[(s(!0),_(h,null,g(l.Options,n=>(s(),_("li",{key:n.OptionUUID},[w(M(n.Name)+" ",1),n.Choices.length==1?(s(),_("small",Dt,"("+M(n.Choices[0].Title)+")",1)):N("",!0)]))),128))])]))),128))])):N("",!0)}});const ft=fe(It,[["__scopeId","data-v-4ed6842b"]]),pt={key:0},yt=$({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const f=B(()=>{if(!e.value)return;const t=JSON.parse(e.value);return Object.entries(t).filter(([,a])=>a).map(([a,l])=>e.interests.find(n=>n.InterestUUID===a)).filter(a=>a!==void 0)});return(t,a)=>t.value?(s(),_("ul",pt,[(s(!0),_(h,null,g(f.value,l=>(s(),_("li",{key:l.InterestUUID},M(l.Name),1))),128))])):N("",!0)}}),Rt=P("br",null,null,-1),Ct=P("small",null,"Options:",-1),ht=P("br",null,null,-1),Ot=P("small",null,"Addons:",-1),gt=$({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const f=B(()=>{if(!e.value)return;let t={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{t=JSON.parse(e.value),"ticket"in t&&(t.Ticket=t.ticket),"addonsChecked"in t&&(t.AddonsChecked=t.addonsChecked),"componentsChecked"in t&&(t.ComponentsChecked=t.componentsChecked)}catch{}return t.Ticket.filter(a=>{const l=e.tickets.find(n=>n.TicketUUID===a);return!(!l||l.Type!==lt.TICKET_TYPE_TICKET)}).map(a=>{const l=e.tickets.find(u=>u.TicketUUID===a),n=ne(l);return n.TicketComponents=l.TicketComponents.filter(u=>t.ComponentsChecked.includes(u.TicketUUID)),n.AddonTickets=l.AddonTickets.filter(u=>t.AddonsChecked.includes(u.TicketUUID)),n})});return(t,a)=>t.value?(s(!0),_(h,{key:0},g(f.value,l=>(s(),_("div",{key:l.TicketUUID},[P("strong",null,M(l.Name),1),l.TicketComponents.length>0?(s(),_(h,{key:0},[Rt,Ct,w("  "),(s(!0),_(h,null,g(l.TicketComponents,n=>(s(),_(h,{key:n.TicketUUID},[P("small",null,M(n.Name),1),w("  ")],64))),128))],64)):N("",!0),l.AddonTickets.length>0?(s(),_(h,{key:1},[ht,Ot,w("  "),(s(!0),_(h,null,g(l.AddonTickets,n=>(s(),_("small",{key:n.TicketUUID},[w("("),P("em",null,M(n.Name),1),w(")")]))),128))],64)):N("",!0)]))),128)):N("",!0)}}),kt=$({__name:"RegListRow",props:{header:{},accommodations:{},extras:{},item:{},interests:{},tickets:{},venues:{}},setup(e){const f=t=>{console.log(t)};return(t,a)=>t.header.key=="actions"?(s(),O(pe,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:a[0]||(a[0]=l=>f(t.item.raw))})):t.header.type==="ACCOMMODATION"&&t.accommodations.length>0?(s(),O(St,{key:1,value:t.item.raw[t.header.key],accommodations:t.accommodations},null,8,["value","accommodations"])):t.header.type==="EXTRAS"&&t.extras.length>0?(s(),O(ft,{key:2,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(s(),O(yt,{key:3,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(s(),O(gt,{key:4,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):(s(),_(h,{key:5},[w(M(t.item.raw[t.header.key]),1)],64))}}),Xt=$({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:f}){var ee;f("pageTitle","Registration Manager");const t=Ve(),a=be(),l=D(!0);let n=((ee=t.params.convention)==null?void 0:ee.toString())||"";const u=D({ID:0,ConventionUUID:q(),OrganisationID:0,OrganisationUUID:nt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),I=Ie(),T=D({ID:0,AdminLayoutUUID:q(),ConventionID:u.value.ID,ConventionUUID:u.value.ConventionUUID,Name:"Registration Table",Type:ye.ADMIN_LAYOUT_TABLE,Panels:[]}),F=D([]),A=D([]),r=D([]),c=D(10),p=D(0),d=D(!1),y=D(""),C=D([]),z=D([]),W=D([]),Q=D([]),X=D([]),k=D(0);Ne(k,o=>{o===7&&Z()});const se=()=>{F.value=[],A.value=[],r.value=[];try{I.getConventionAdminLayoutByName(u.value.ConventionUUID,"Registration Table").then(o=>{k.value+=1,o?T.value=o:(T.value.ConventionID=u.value.ID,T.value.ConventionUUID=u.value.ConventionUUID)})}catch{T.value.ConventionID=u.value.ID,T.value.ConventionUUID=u.value.ConventionUUID}try{I.getConventionForms(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(F.value=o)})}catch{}try{I.getConventionAccommodation(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(C.value=o)})}catch{}try{I.getConventionVenues(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(X.value=o)})}catch{}try{I.getConventionExtras(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(z.value=o)})}catch{}try{I.getConventionInterests(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(W.value=o)})}catch{}try{I.getConventionTickets(u.value.ConventionUUID).then(o=>{k.value+=1,o&&(Q.value=o)})}catch{}},ie=({page:o,itemsPerPage:v,sortBy:m})=>{const S=r.value.find(R=>R.uuid==y.value),E=S==null?void 0:S.layout.Items;let L="";if(m&&E&&m.length>=1){const R=E.find(V=>V.LayoutItemUUID==m[0].key);switch(console.log(R==null?void 0:R.UserField),R==null?void 0:R.UserField){case b.USER_DATA_SOURCE_DISPLAY_NAME:L="user.display_name";break;case b.USER_DATA_SOURCE_HANDLE:L="user.handle";break;case b.USER_DATA_SOURCE_EMAIL:L="user.email";break}}try{const R={Offset:(o-1)*v,Order:L,Limit:v};I.searchConventionRegistrations(u.value.ConventionUUID,R).then(V=>{V&&(p.value=V.Total,A.value=V.Registrations,r.value.forEach(G=>{const x=G.layout;G.items=A.value.map(te=>{const j={};return G.headers.forEach(ae=>{const le=x.Items.find(re=>re.LayoutItemUUID===ae.key);le&&le.SectionField&&te.Submissions.forEach(re=>{const Ue=re.Data.find(Ce=>Ce.SectionFieldUUID===le.SectionFieldUUID);if(Ue){j[le.LayoutItemUUID]=Ue.Data;return}})}),j})}),l.value=!1)})}catch{}},Z=()=>{T.value.Panels.forEach(o=>{o.Items.forEach(v=>{(v.SectionField==null||v.SectionField.Field==null)&&F.value.find(m=>{m.Sections.find(S=>{if(S.Fields){const E=S.Fields.find(L=>L.SectionFieldUUID===v.SectionFieldUUID);if(E)return v.SectionField=E,!0}})})})}),T.value.Panels.length>0&&(r.value=[],T.value.Panels.forEach(o=>{const v={uuid:q(),order:o.Order,name:o.Name,headers:[],items:[],layout:o},m={key:"actions",title:"Actions",align:"start",sortable:!1,type:""};v.headers=o.Items.map(S=>{var E,L,R,V;return{key:S.LayoutItemUUID,title:S.Label||((L=(E=S.SectionField)==null?void 0:E.Field)==null?void 0:L.Label)||"",align:S.Align==="end"?"end":"start",sortable:ue(S),type:((V=(R=S.SectionField)==null?void 0:R.Field)==null?void 0:V.Type)||""}}),v.headers.push(m),r.value.push(v)})),(y.value==null||y.value=="")&&r.value.length>0&&(y.value=r.value[0].uuid)};n?I.getConvention(n).then(o=>{o&&(u.value=o,se())}).catch(()=>{a.push("/")}):a.push("/");const ue=o=>!![b.USER_DATA_SOURCE_DISPLAY_NAME,b.USER_DATA_SOURCE_EMAIL,b.USER_DATA_SOURCE_HANDLE,b.USER_DATA_SOURCE_DATE_OF_BIRTH,b.USER_DATA_SOURCE_FIRST_NAME,b.USER_DATA_SOURCE_LAST_NAME].includes(o.UserField);return(o,v)=>(s(),O(tt,null,{default:U(()=>[i(st,{color:"blue-darken-4"},{default:U(()=>[i(Qe,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=m=>y.value=m),"show-arrows":""},{default:U(()=>[(s(!0),_(h,null,g(r.value,m=>(s(),O(Xe,{key:m.uuid,value:m.uuid},{default:U(()=>[w(M(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),i(it),i(pe,{icon:"mdi:mdi-cog-outline",onClick:v[1]||(v[1]=m=>d.value=!0)})]),_:1}),i(et,{modelValue:y.value,"onUpdate:modelValue":v[3]||(v[3]=m=>y.value=m)},{default:U(()=>[(s(!0),_(h,null,g(r.value,m=>(s(),O(Ze,{key:m.uuid,value:m.uuid},{default:U(()=>[m.uuid===y.value?(s(),O(ut,{key:0,class:"pa-2"},{default:U(()=>[i(K(Ut),{"items-per-page":c.value,"onUpdate:itemsPerPage":v[2]||(v[2]=S=>c.value=S),headers:m.headers,"items-length":p.value,items:m.items,"item-value":"LayoutItemUUID",loading:l.value,"onUpdate:options":ie},ve({_:2},[g(m.headers,S=>({name:`item.${S.key}`,fn:U(({item:E})=>[i(kt,{header:S,item:E,accommodations:C.value,extras:z.value,interests:W.value,tickets:Q.value,venues:X.value},null,8,["header","item","accommodations","extras","interests","tickets","venues"])])}))]),1032,["items-per-page","headers","items-length","items","loading"])]),_:2},1024)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),d.value?(s(),O(_t,{key:0,title:"Edit Layout",modelValue:d.value,"onUpdate:modelValue":v[4]||(v[4]=m=>d.value=m),layout:T.value,onSave:v[5]||(v[5]=m=>{d.value=!1,Z()})},null,8,["modelValue","layout"])):N("",!0)]),_:1}))}});export{Xt as default};
