import{p as Me,an as rl,n as Le,ae as yl,r as x,s as De,u as Te,e as W,w as Y,E as Se,v as n,H as A,x as oe,N,aA as Vl,ah as Il,y as bl,k as kl,f as Cl,j as Dl,ax as dl,aa as Ze,ad as Tl,aB as Sl,ay as Al,m as El,I as Ue,a1 as te,a2 as ye,a5 as je,K as o,R,U as B,O as j,M as s,Z as K,L as S,S as h,Q as _,a3 as Ie,P as cl,ar as Be,$ as vl,Y as ml,ac as Qe,a as Rl,aC as re}from"./index-96688d16.js";import{F as he}from"./form-aee596e2.js";import{V as ge,u as Ke}from"./VCheckbox-836c7f99.js";import{s as Ae}from"./index-71069b21.js";import{f as xl,V as ue,a as z,c as fl,d as Oe,e as ke}from"./VList-63ab4ca8.js";import{a as de,V as X}from"./VRow-95c7b2e3.js";import{m as wl,u as $l,a as Ol,b as Pl,V as Je}from"./VSelect-d91dc33d.js";import{d as Ml,u as Ll,e as Ge,T as Nl,s as We}from"./filter-bc7cbc1e.js";import{C as Fl,a as Ne,l as Ee,G as _l,V as ie,n as ql}from"./VContainer-dfb741a9.js";import{c as Bl}from"./copyToClipboard-54de8978.js";import{a as Gl,e as Hl,_ as Yl}from"./VChip-48a18c22.js";import{k as Jl,l as jl,j as pl,V as be,m as hl,e as Kl,u as Xl,f as Pe,g as zl,h as Zl,i as Ql,n as Wl}from"./VTextField-ef5ccc4d.js";import{m as et,I as lt}from"./index-f469acc5.js";import{V as tt,m as at,a as gl,b as nt,c as ot}from"./VCheckboxBtn-8c71efcf.js";import{G as ut}from"./userData-297f3f84.js";import{v as He}from"./v4-a960c1f4.js";import{e as el,V as ll,a as tl,b as al,c as nl,d as ol}from"./VCard-27e6f9b9.js";import{V as Ye}from"./VAvatar-1ceafa44.js";import{V as it}from"./VForm-7a5a7d09.js";const ul=(e,C,u)=>{if(u>=e.length){let O=u-e.length+1;for(;O--;)e.push(void 0)}e.splice(u,0,e.splice(C,1)[0])};var le=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(le||{});const ia=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function st(e,C,u){if(C==null)return e;if(Array.isArray(C))throw new Error("Multiple matches is not implemented");return typeof C=="number"&&~C?n(A,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,C)]),n("span",{class:"v-autocomplete__mask"},[e.substr(C,u)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(C+u)])]):e}const rt=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...Ml({filterKeys:["title"]}),...wl(),...rl(Jl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...et({transition:!1})},"VAutocomplete"),il=Le()({name:"VAutocomplete",props:rt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,C){let{slots:u}=C;const{t:O}=yl(),V=x(),U=De(!1),I=De(!0),b=x(!1),m=x(),E=Te(e,"menu"),l=W({get:()=>E.value,set:y=>{var G;E.value&&!y&&((G=m.value)!=null&&G.ΨopenChildren)||(E.value=y)}}),c=De(-1),w=W(()=>{var y;return(y=V.value)==null?void 0:y.color}),{items:v,transformIn:p,transformOut:f}=xl(e),{textColorClasses:d,textColorStyles:t}=Fl(w),a=Te(e,"search",""),i=Te(e,"modelValue",[],y=>p(y===null?[null]:Il(y)),y=>{const G=f(y);return e.multiple?G:G[0]??null}),r=jl(),{filteredItems:$,getMatches:g}=Ll(e,v,()=>I.value?"":a.value),M=W(()=>i.value.map(y=>v.value.find(G=>e.valueComparator(G.value,y.value))||y)),F=W(()=>e.hideSelected?$.value.filter(y=>!M.value.some(G=>G.value===y.value)):$.value),H=W(()=>M.value.map(y=>y.props.value)),ee=W(()=>M.value[c.value]),P=W(()=>{var G;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((G=F.value[0])==null?void 0:G.title))&&F.value.length>0&&!I.value&&!b.value}),T=W(()=>e.hideNoData&&!v.value.length||e.readonly||(r==null?void 0:r.isReadonly.value)),D=x(),{onListScroll:k,onListKeydown:L}=$l(D,V);function ce(y){e.openOnClear&&(l.value=!0),a.value=""}function Ce(){T.value||(l.value=!0)}function se(y){T.value||(U.value&&(y.preventDefault(),y.stopPropagation()),l.value=!l.value)}function me(y){var Ve,q,Q;if(e.readonly||r!=null&&r.isReadonly.value)return;const G=V.value.selectionStart,Z=H.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(l.value=!0),["Escape"].includes(y.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(P.value&&["Enter","Tab"].includes(y.key)&&ve($.value[0]),I.value=!0),y.key==="ArrowDown"&&P.value&&((Ve=D.value)==null||Ve.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(c.value<0){y.key==="Backspace"&&!a.value&&(c.value=Z-1);return}const J=c.value;ee.value&&ve(ee.value),c.value=J>=Z-1?Z-2:J}if(y.key==="ArrowLeft"){if(c.value<0&&G>0)return;const J=c.value>-1?c.value-1:Z-1;M.value[J]?c.value=J:(c.value=-1,V.value.setSelectionRange((q=a.value)==null?void 0:q.length,(Q=a.value)==null?void 0:Q.length))}if(y.key==="ArrowRight"){if(c.value<0)return;const J=c.value+1;M.value[J]?c.value=J:(c.value=-1,V.value.setSelectionRange(0,0))}}}function Re(y){a.value=y.target.value}function Fe(){var y;U.value&&(I.value=!0,(y=V.value)==null||y.focus())}function _e(y){U.value=!0,setTimeout(()=>{b.value=!0})}function qe(y){b.value=!1}function xe(y){(y==null||y===""&&!e.multiple)&&(i.value=[])}const fe=De(!1);function ve(y){if(e.multiple){const G=H.value.findIndex(Z=>e.valueComparator(Z,y.value));if(G===-1)i.value=[...i.value,y];else{const Z=[...i.value];Z.splice(G,1),i.value=Z}}else i.value=[y],fe.value=!0,a.value=y.title,l.value=!1,I.value=!0,Se(()=>fe.value=!1)}return Y(U,(y,G)=>{var Z;y!==G&&(y?(fe.value=!0,a.value=e.multiple?"":String(((Z=M.value.at(-1))==null?void 0:Z.props.title)??""),I.value=!0,Se(()=>fe.value=!1)):(!e.multiple&&!a.value?i.value=[]:P.value&&!b.value&&!M.value.some(Ve=>{let{value:q}=Ve;return q===F.value[0].value})&&ve(F.value[0]),l.value=!1,a.value="",c.value=-1))}),Y(a,y=>{!U.value||fe.value||(y&&(l.value=!0),I.value=!y)}),Ne(()=>{const y=!!(e.chips||u.chip),G=!!(!e.hideNoData||F.value.length||u["prepend-item"]||u["append-item"]||u["no-data"]),Z=i.value.length>0,[Ve]=be.filterProps(e);return n(be,oe({ref:V},Ve,{modelValue:a.value,"onUpdate:modelValue":xe,focused:U.value,"onUpdate:focused":q=>U.value=q,validationValue:i.externalValue,dirty:Z,onInput:Re,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!u.selection,"v-autocomplete--selecting-index":c.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Z?void 0:e.placeholder,"onClick:clear":ce,"onMousedown:control":Ce,onKeydown:me}),{...u,default:()=>n(A,null,[n(Ol,oe({ref:m,modelValue:l.value,"onUpdate:modelValue":q=>l.value=q,activator:"parent",contentClass:"v-autocomplete__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Fe},e.menuProps),{default:()=>[G&&n(ue,{ref:D,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:L,onFocusin:_e,onFocusout:qe,onScrollPassive:k,tabindex:"-1"},{default:()=>{var q,Q,J;return[(q=u["prepend-item"])==null?void 0:q.call(u),!F.value.length&&!e.hideNoData&&(((Q=u["no-data"])==null?void 0:Q.call(u))??n(z,{title:O(e.noDataText)},null)),n(Pl,{renderless:!0,items:F.value},{default:pe=>{var ze;let{item:ae,index:ne,itemRef:Ul}=pe;const Xe=oe(ae.props,{ref:Ul,key:ne,active:P.value&&ne===0?!0:void 0,onClick:()=>ve(ae)});return((ze=u.item)==null?void 0:ze.call(u,{item:ae,index:ne,props:Xe}))??n(z,Xe,{prepend:we=>{let{isSelected:$e}=we;return n(A,null,[e.multiple&&!e.hideSelected?n(tt,{key:ae.value,modelValue:$e,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependIcon&&n(Ee,{icon:ae.props.prependIcon},null)])},title:()=>{var we,$e;return I.value?ae.title:st(ae.title,(we=g(ae))==null?void 0:we.title,(($e=a.value)==null?void 0:$e.length)??0)}})}}),(J=u["append-item"])==null?void 0:J.call(u)]}})]}),M.value.map((q,Q)=>{var ae;function J(ne){ne.stopPropagation(),ne.preventDefault(),ve(q)}const pe={"onClick:close":J,onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:q.value,class:["v-autocomplete__selection",Q===c.value&&["v-autocomplete__selection--selected",d.value]],style:Q===c.value?t.value:{}},[y?u.chip?n(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:q.title}}},{default:()=>{var ne;return[(ne=u.chip)==null?void 0:ne.call(u,{item:q,index:Q,props:pe})]}}):n(Gl,oe({key:"chip",closable:e.closableChips,size:"small",text:q.title},pe),null):((ae=u.selection)==null?void 0:ae.call(u,{item:q,index:Q}))??n("span",{class:"v-autocomplete__selection-text"},[q.title,e.multiple&&Q<M.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[N(",")])])])})]),"append-inner":function(){var pe;for(var q=arguments.length,Q=new Array(q),J=0;J<q;J++)Q[J]=arguments[J];return n(A,null,[(pe=u["append-inner"])==null?void 0:pe.call(u,...Q),e.menuIcon?n(Ee,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:se,onClick:Vl},null):void 0])}})}),pl({isFocused:U,isPristine:I,menu:l,search:a,filteredItems:$,select:ve},V)}});const dt=Me({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...hl(),...Kl()},"VTextarea"),ct=Le()({name:"VTextarea",directives:{Intersect:lt},inheritAttrs:!1,props:dt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,C){let{attrs:u,emit:O,slots:V}=C;const U=Te(e,"modelValue"),{isFocused:I,focus:b,blur:m}=Xl(e),E=W(()=>typeof e.counterValue=="function"?e.counterValue(U.value):(U.value||"").toString().length),l=W(()=>{if(u.maxlength)return u.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function c(P,T){var D,k;!e.autofocus||!P||(k=(D=T[0].target)==null?void 0:D.focus)==null||k.call(D)}const w=x(),v=x(),p=De(""),f=x(),d=W(()=>e.persistentPlaceholder||I.value||e.active);function t(){var P;f.value!==document.activeElement&&((P=f.value)==null||P.focus()),I.value||b()}function a(P){t(),O("click:control",P)}function i(P){O("mousedown:control",P)}function r(P){P.stopPropagation(),t(),Se(()=>{U.value="",Al(e["onClick:clear"],P)})}function $(P){var D;const T=P.target;if(U.value=T.value,(D=e.modelModifiers)!=null&&D.trim){const k=[T.selectionStart,T.selectionEnd];Se(()=>{T.selectionStart=k[0],T.selectionEnd=k[1]})}}const g=x(),M=x(+e.rows),F=W(()=>["plain","underlined"].includes(e.variant));bl(()=>{e.autoGrow||(M.value=+e.rows)});function H(){e.autoGrow&&Se(()=>{if(!g.value||!v.value)return;const P=getComputedStyle(g.value),T=getComputedStyle(v.value.$el),D=parseFloat(P.getPropertyValue("--v-field-padding-top"))+parseFloat(P.getPropertyValue("--v-input-padding-top"))+parseFloat(P.getPropertyValue("--v-field-padding-bottom")),k=g.value.scrollHeight,L=parseFloat(P.lineHeight),ce=Math.max(parseFloat(e.rows)*L+D,parseFloat(T.getPropertyValue("--v-input-control-height"))),Ce=parseFloat(e.maxRows)*L+D||1/0,se=El(k??0,ce,Ce);M.value=Math.floor((se-D)/L),p.value=Dl(se)})}kl(H),Y(U,H),Y(()=>e.rows,H),Y(()=>e.maxRows,H),Y(()=>e.density,H);let ee;return Y(g,P=>{P?(ee=new ResizeObserver(H),ee.observe(g.value)):ee==null||ee.disconnect()}),Cl(()=>{ee==null||ee.disconnect()}),Ne(()=>{const P=!!(V.counter||e.counter||e.counterValue),T=!!(P||V.details),[D,k]=dl(u),[{modelValue:L,...ce}]=Pe.filterProps(e),[Ce]=zl(e);return n(Pe,oe({ref:w,modelValue:U.value,"onUpdate:modelValue":se=>U.value=se,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":F.value},e.class],style:e.style},D,ce,{centerAffix:M.value===1&&!F.value,focused:I.value}),{...V,default:se=>{let{isDisabled:me,isDirty:Re,isReadonly:Fe,isValid:_e}=se;return n(Zl,oe({ref:v,style:{"--v-textarea-control-height":p.value},onClick:a,onMousedown:i,"onClick:clear":r,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},Ce,{active:d.value||Re.value,centerAffix:M.value===1&&!F.value,dirty:Re.value||e.dirty,disabled:me.value,focused:I.value,error:_e.value===!1}),{...V,default:qe=>{let{props:{class:xe,...fe}}=qe;return n(A,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),Ze(n("textarea",oe({ref:f,class:xe,value:U.value,onInput:$,autofocus:e.autofocus,readonly:Fe.value,disabled:me.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:t,onBlur:m},fe,k),null),[[Tl("intersect"),{handler:c},null,{once:!0}]]),e.autoGrow&&Ze(n("textarea",{class:[xe,"v-textarea__sizer"],"onUpdate:modelValue":ve=>U.value=ve,ref:g,readonly:!0,"aria-hidden":"true"},null),[[Sl,U.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:T?se=>{var me;return n(A,null,[(me=V.details)==null?void 0:me.call(V,se),P&&n(A,null,[n("span",null,null),n(Ql,{active:e.persistentCounter||I.value,value:E.value,max:l.value},V.counter)])])}:void 0})}),pl({},w,v,f)}}),vt=Ue({__name:"Extras",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:C}){const u=e,{convention:O,disabled:V=!1}=u,U=ye(e,"modelValue"),I=je.getInstance(),b=x({});try{b.value=JSON.parse(U.value)}catch{}const m=x([]),E=x([]);Y(u,()=>{c()}),Y(b.value,v=>{for(const p in v)if(v[p].checked){const f=m.value.map(d=>{var t;return(t=d.Options)==null?void 0:t.find(a=>a.OptionUUID===p)});if(f&&f.length>0)try{const d=f[0];v[p].choiceId===""&&d&&d.Choices&&d.Choices.length>0&&(v[p].choiceId=d.Choices[0].TagUUID),v[p].price=d==null?void 0:d.Price}catch{}}else v[p].choiceId="",v[p].price=0;U.value=JSON.stringify(v),w()});const l=W({get:()=>m.value.map(v=>v.ExtraUUID),set:()=>{}}),c=()=>{var p;const v=((p=u.items.find(f=>f.Title==="SelectedExtras"))==null?void 0:p.Value)||"[]";try{const f=JSON.parse(v);m.value=E.value.filter(d=>f.find(t=>t===d.ExtraUUID))||[],l.value=[...m.value.map(d=>d.ExtraUUID)],m.value.forEach(d=>{var t;(t=d.Options)==null||t.forEach(a=>{b.value[a.OptionUUID]||(b.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in O&&(I==null||I.getConventionExtras(O.ConventionUUID).then(v=>{v&&(E.value=v,c())}));const w=(v=void 0)=>{setTimeout(()=>C("change",v),100)};return(v,p)=>(o(),R(A,null,[B("h4",null,j(v.label),1),n(ue,{opened:l.value,"onUpdate:opened":p[0]||(p[0]=f=>l.value=f)},{default:s(()=>[(o(!0),R(A,null,K(m.value,f=>(o(),S(fl,{key:f.ExtraUUID,value:f.ExtraUUID},{activator:s(({props:d})=>[n(z,oe({"prepend-icon":"mdi:mdi-group","append-icon":"",title:f.Name},d),null,16,["title"])]),default:s(()=>[f.Options?(o(!0),R(A,{key:0},K(f.Options,d=>(o(),S(z,{key:d.OptionUUID},{default:s(()=>[n(de,null,{default:s(()=>[n(X,{cols:"12",sm:"6"},{default:s(()=>[n(ge,{label:`${d.Name} ${d.Price&&d.Price>0?`(${h(Ae).currencySymbol}${d.Price})`:""}`,modelValue:b.value[d.OptionUUID].checked,"onUpdate:modelValue":t=>b.value[d.OptionUUID].checked=t,disabled:h(V),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),d.Choices&&d.Choices.length>1&&b.value[d.OptionUUID].checked?(o(),S(X,{key:0,cols:"12",sm:"6"},{default:s(()=>[n(Je,{items:d.Choices.map(t=>({value:t.TagUUID,title:t.Title})),modelValue:b.value[d.OptionUUID].choiceId,"onUpdate:modelValue":t=>b.value[d.OptionUUID].choiceId=t,"item-value":"value","item-title":"title",variant:"outlined",disabled:h(V),"hide-details":"",onChange:w},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024))),128)):_("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),mt=Ue({__name:"Interests",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:C}){const u=e,{convention:O,disabled:V=!1}=u,U=ye(e,"modelValue"),I=je.getInstance(),b=x({});try{b.value=JSON.parse(U.value)}catch{}const m=x([]),E=x([]);Y(b.value,v=>{U.value=JSON.stringify(v)});const l=x([]),c=()=>{var p;const v=((p=u.items.find(f=>f.Title==="SelectedInterests"))==null?void 0:p.Value)||"[]";try{const f=JSON.parse(v);m.value=E.value.filter(d=>f.find(t=>t===d.InterestUUID))||[],l.value=[...m.value.map(d=>d.InterestUUID)]}catch{}};"ConventionUUID"in O&&(I==null||I.getConventionInterests(O.ConventionUUID).then(v=>{v&&(E.value=v,c())})),Y(u,()=>{c()});const w=(v=void 0)=>{setTimeout(()=>C("change",v),100)};return(v,p)=>(o(),R(A,null,[B("h4",null,j(v.label),1),n(ue,{opened:l.value,"onUpdate:opened":p[0]||(p[0]=f=>l.value=f)},{default:s(()=>[(o(!0),R(A,null,K(m.value,f=>(o(),S(z,{key:f.InterestUUID},{default:s(()=>[n(de,null,{default:s(()=>[n(X,null,{default:s(()=>[n(ge,{label:`${f.Name} ${f.Price&&f.Price>0?`(${h(Ae).currencySymbol}${f.Price})`:""}`,modelValue:b.value[f.InterestUUID],"onUpdate:modelValue":d=>b.value[f.InterestUUID]=d,disabled:h(V),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),ft=Ue({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:C}){const u=e,{admin:O=!1,convention:V,disabled:U=!1}=u,I=ye(e,"modelValue"),b=je.getInstance(),m=x({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{m.value=JSON.parse(I.value),"ticket"in m.value&&(m.value.Ticket=m.value.ticket),"addonsChecked"in m.value&&(m.value.AddonsChecked=m.value.addonsChecked),"componentsChecked"in m.value&&(m.value.ComponentsChecked=m.value.componentsChecked)}catch{}const E=x([]),l=x([]);Y(m.value,t=>{I.value=JSON.stringify(t)});const c=x([]),w=x({required:(t,a=void 0)=>()=>{if(a==null){if(m.value.Ticket.length===0&&u.required)return"Must select at least one ticket option.";if(t&&t.ComponentsRequired>0&&m.value.Ticket.includes(t.TicketUUID||"")){let i=0;if(t.TicketComponents.forEach(r=>{m.value.ComponentsChecked.forEach($=>{r.TicketUUID===$&&(i+=1)})}),i<t.ComponentsRequired)return`Must select ticket ${t.ComponentsRequired} component${t.ComponentsRequired===1?"":"s"}`}}return!0}}),v=()=>{var a;const t=((a=u.items.find(i=>i.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const i=JSON.parse(t);E.value=l.value.filter(r=>r.Type==="TICKET_TYPE_GROUP"&&i.find($=>$===r.TicketUUID))||[],c.value=[...E.value.filter(r=>r.Type==="TICKET_TYPE_GROUP").map(r=>r.TicketUUID)]}catch{}};if("ConventionUUID"in V)if(O)b==null||b.getConventionTickets(V.ConventionUUID).then(t=>{t&&(l.value=t,v())});else{const t=u.items.find(a=>a.Title==="SelectedTickets");t&&(b==null||b.getFieldTickets(t.FieldUUID).then(a=>{a&&(l.value=a,v())}))}Y(u,()=>{v()});const p=t=>{m.value.Ticket.length>1&&m.value.Ticket.shift(),m.value.ComponentsChecked=[];const a=[];E.value.forEach(i=>{(m.value.Ticket.includes(i.TicketUUID)||m.value.ComponentsChecked.includes(i.TicketUUID))&&a.push(...i.AddonTickets.map(r=>r.TicketUUID))}),m.value.AddonsChecked=m.value.AddonsChecked.filter(i=>a.includes(i)),d(t)},f=t=>{const a=l.value.find(i=>i.TicketUUID===m.value.Ticket[0]);if(a)for(;m.value.ComponentsChecked.length>a.ComponentsRequired;)m.value.ComponentsChecked.shift();d(t)},d=(t=void 0)=>{setTimeout(()=>C("change",t),100)};return(t,a)=>(o(),R(A,null,[B("h4",null,j(t.label),1),n(ue,{opened:c.value,"onUpdate:opened":a[4]||(a[4]=i=>c.value=i)},{default:s(()=>[(o(!0),R(A,null,K(h(Ge)(E.value.filter(i=>i.Type===h(Nl).TICKET_TYPE_GROUP)),i=>(o(),R(A,{key:i.TicketUUID},[i.Tickets.length>0?(o(),S(fl,{key:0,value:i.TicketUUID},{activator:s(({props:r})=>[n(z,oe(r,{"prepend-icon":"mdi:mdi-group",title:i.Name}),{default:s(()=>[n(Oe,{title:i.Description},null,8,["title"])]),_:2},1040,["title"])]),default:s(()=>[(o(!0),R(A,null,K(i.Tickets,r=>(o(),S(z,{key:r.TicketUUID},{default:s(()=>{var $;return[n(Oe,null,{default:s(()=>[N(j(r.Description),1)]),_:2},1024),n(ge,{modelValue:m.value.Ticket,"onUpdate:modelValue":a[0]||(a[0]=g=>m.value.Ticket=g),value:r.TicketUUID,onChange:p,rules:[w.value.required(r)],"validate-on":"submit",disabled:h(U)||!(($=t.registrationGroup)!=null&&$.Registration.Leader)},{label:s(()=>[n(Ee,{icon:r.RequiresAccommodation?"mdi:mdi-home":r.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+j(`${r.Name} ${r.Price>0?`(${h(Ae).currencySymbol}${r.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),m.value.Ticket.length>0&&r.TicketUUID===m.value.Ticket[0]?(o(),R(A,{key:0},[r.AddonTickets.length?(o(),S(ue,{key:0},{default:s(()=>[(o(!0),R(A,null,K(h(Ge)(r.AddonTickets),g=>(o(),R(A,{key:g==null?void 0:g.TicketUUID},[g?(o(),S(z,{key:0},{default:s(()=>[n(ke,null,{default:s(()=>{var M;return[n(ge,{modelValue:m.value.AddonsChecked,"onUpdate:modelValue":a[1]||(a[1]=F=>m.value.AddonsChecked=F),value:g.TicketUUID,onChange:a[2]||(a[2]=F=>{m.value.ComponentsChecked=[],d(F)}),disabled:h(U)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:s(()=>[n(Ee,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+j(`${g.Name} ${g.Price>0?`(${h(Ae).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),n(Oe,null,{default:s(()=>[N(j(g.Description),1)]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128))]),_:2},1024)):_("",!0),r.TicketComponents.length?(o(),S(ue,{key:1},{default:s(()=>[(o(!0),R(A,null,K(h(Ge)(r.TicketComponents),g=>(o(),R(A,{key:g==null?void 0:g.TicketUUID},[g?(o(),S(z,{key:0},{default:s(()=>[n(ke,null,{default:s(()=>{var M;return[n(ge,{modelValue:m.value.ComponentsChecked,"onUpdate:modelValue":a[3]||(a[3]=F=>m.value.ComponentsChecked=F),value:g.TicketUUID,onChange:f,rules:[w.value.required(r,g)],"validate-on":"submit",disabled:h(U)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:s(()=>[n(Ee,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+j(`${g.Name} ${g.Price>0?`(${h(Ae).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),n(Oe,null,{default:s(()=>[N(j(g.Description),1)]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128))]),_:2},1024)):_("",!0)],64)):_("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):_("",!0)],64))),128))]),_:1},8,["opened"])],64))}}),pt={key:0},ht=B("strong",null,"Your Sharing Group",-1),gt=["href","onClick"],Ut=B("br",null,null,-1),yt=B("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Vt=B("strong",null,"Your Groups Accommodation",-1),It=B("br",null,null,-1),bt=B("small",null,"(in order of preference, controlled by group leader)",-1),kt=B("strong",null,"Accommodation Options",-1),Ct=B("br",null,null,-1),Dt=B("strong",null,"Your Chosen Accommodation",-1),Tt=B("small",null,"(in order of preference)",-1),St=Ue({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:C}){const u=e,{admin:O=!1,convention:V}=u,U=ye(e,"modelValue"),I=Ke(u,C,void 0,void 0,"items"),b=vl(),m=ml.getInstance(),E=x(Ie(U.value)),l=x([]),c=x(),w=x({sharing:!1}),v=()=>{try{const T=JSON.parse(u.data);T&&(w.value=T)}catch{}};v(),Y(u,()=>{v(),u.registrationGroup&&(l.value=u.registrationGroup.Members,c.value=u.registrationGroup.Registration)}),Y(E,T=>{U.value=Ie(T)},{deep:!0});const p=x(""),f=x(!1),d=()=>{var T;(T=c.value)!=null&&T.Leader&&b.getRegistrationInvite(V.ConventionUUID).then(D=>{if(D){const k=new URL(location.href);k.searchParams.set("token",D),p.value=k.toString()}})},t=()=>{Bl(p.value),d(),f.value=!0,setTimeout(()=>f.value=!1,2200)},a=()=>{m.emit("registration.group.leave")},i=x([]);Y(I,()=>{r()});const r=()=>{O?b.getConventionAccommodation(V.ConventionUUID).then(T=>{i.value=T.filter(D=>!!(I!=null&&I.value.find(k=>k.Value===D.AccommodationUUID)))||[]}):I.value.length>0&&b.getFieldAccommodation(I.value[0].FieldUUID).then(T=>{i.value=T.filter(D=>!!(I!=null&&I.value.find(k=>k.Value===D.AccommodationUUID)))||[]})};r(),(()=>{var T;if(u.registrationGroup)if(l.value=u.registrationGroup.Members,c.value=u.registrationGroup.Registration,(T=c.value)!=null&&T.Leader)d();else try{E.value=JSON.parse(u.registrationGroup.AccommodationData)}catch{}})();const g=x({column:0,id:""}),M=()=>{E.value.includes(g.value.id)||(g.value.column===0&&g.value.id!==""&&E.value.push(g.value.id),P())},F=()=>{const T=E.value.findIndex(D=>D===g.value.id);T>=0&&(E.value.splice(T,1),P())},H=()=>{if(g.value.column!==1)return;const T=E.value.findIndex(D=>D===g.value.id);T<=0||(ul(E.value,T,T-1),P())},ee=()=>{if(g.value.column!==1)return;const T=E.value.findIndex(D=>D===g.value.id);T>=E.value.length-1||(ul(E.value,T,T+1),P())},P=(T=void 0)=>{setTimeout(()=>C("change",T),100)};return(T,D)=>(o(),R(A,null,[B("h4",null,j(T.label),1),n(de,null,{default:s(()=>[n(X,{cols:"12"},{default:s(()=>{var k;return[l.value&&c.value&&w.value.sharing?(o(),R("div",pt,[ht,((k=l.value.find(L=>L.IsLeader))==null?void 0:k.UUID)!==c.value.RegistrationUUID?(o(),S(ie,{key:0,color:"red",variant:"text",onClick:a},{default:s(()=>[N("(leave group)")]),_:1})):_("",!0),n(ue,null,{default:s(()=>[n(z,null,{default:s(()=>{var L;return[n(ke,{class:"float-left pr-2 font-weight-bold"},{default:s(()=>[N(" Leader: ")]),_:1}),N(" "+j((L=l.value.find(ce=>ce.IsLeader))==null?void 0:L.Name),1)]}),_:1}),(o(!0),R(A,null,K(l.value,L=>(o(),R(A,{key:L.UUID},[L.IsLeader?_("",!0):(o(),S(z,{key:0},{default:s(()=>[n(ke,{class:"float-left pr-2"},{default:s(()=>[N(" Member: ")]),_:1}),N(" "+j(L.Name),1)]),_:2},1024))],64))),128))]),_:1}),n(Hl,{modelValue:f.value,"onUpdate:modelValue":D[0]||(D[0]=L=>f.value=L),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),p.value&&c.value.Leader?(o(),R(A,{key:1},[n(ie,{color:"blue"},{default:s(()=>[B("a",{href:p.value,onClick:cl(t,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,gt)]),_:1}),Ut,yt],64)):_("",!0)])):_("",!0)]}),_:1})]),_:1}),c.value&&!c.value.Leader?(o(),S(de,{key:0},{default:s(()=>[n(X,{cols:"10",md:"5"},{default:s(()=>[Vt,It,bt,n(ue,null,{default:s(()=>[(o(!0),R(A,null,K(E.value.map(k=>i.value.find(L=>L.AccommodationUUID==k)).filter(k=>k!==void 0),(k,L)=>(o(),R(A,null,[k?(o(),S(z,{key:k.AccommodationUUID,title:`${L+1}. ${k.Name}`,class:Be(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):_("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),S(de,{key:1},{default:s(()=>[n(X,{cols:"12",md:"5"},{default:s(()=>[kt,Ct,n(ue,null,{default:s(()=>[(o(!0),R(A,null,K(i.value,k=>(o(),S(z,{key:k.AccommodationUUID,title:k.Name,class:Be(g.value.column===0&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:L=>g.value={column:0,id:k.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:D[1]||(D[1]=L=>M())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),n(X,{cols:"12",md:"1"},{default:s(()=>[n(de,{class:"d-md-none"},{default:s(()=>[n(X,{cols:"12",class:"text-center"},{default:s(()=>[n(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[2]||(D[2]=k=>M()),color:"primary",title:"Select"}),N("   "),n(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[3]||(D[3]=k=>F()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),n(de,{class:"d-none d-md-flex h-100 align-content-center"},{default:s(()=>[n(X,{cols:"12"},{default:s(()=>[n(ie,{icon:"mdi:mdi-arrow-right",size:"small",onClick:D[4]||(D[4]=k=>M()),color:"primary",title:"Select"})]),_:1}),n(X,{cols:"12"},{default:s(()=>[n(ie,{icon:"mdi:mdi-arrow-left",size:"small",onClick:D[5]||(D[5]=k=>F()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),n(X,{cols:"10",md:"5"},{default:s(()=>[Dt,n(ue,null,{default:s(()=>[(o(!0),R(A,null,K(E.value.map(k=>i.value.find(L=>L.AccommodationUUID==k)).filter(k=>k!==void 0),(k,L)=>(o(),R(A,null,[k?(o(),S(z,{key:k.AccommodationUUID,title:`${L+1}. ${k.Name}`,class:Be(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ce=>g.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:D[6]||(D[6]=ce=>F())},null,8,["title","class","onClick"])):_("",!0)],64))),256))]),_:1}),Tt]),_:1}),n(X,{cols:"2",md:"1"},{default:s(()=>[n(de,{class:"d-flex h-100 align-content-center mt-3"},{default:s(()=>[n(X,{cols:"12"},{default:s(()=>[n(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:D[7]||(D[7]=k=>H()),color:"primary",title:"Higher Priority"})]),_:1}),n(X,{cols:"12"},{default:s(()=>[n(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:D[8]||(D[8]=k=>ee()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),At=Ue({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:C}){const u=e,O=Ke(u,C,void 0,void 0,"items"),V=ye(e,"modelValue"),U=x({required:l=>!u.required||!!l||"Required.",min:l=>{var a,i;const c=new Date,w=c.getFullYear(),v=(c.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),p=c.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),f=((a=O.value.find(r=>r.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",d=((i=O.value.find(r=>r.Title=="BEFORE_DATE"))==null?void 0:i.Value)||`${w}-${v}-${p}`,t=m(d);return b(l,d,parseInt(f))||`You must be at least ${f} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),I=()=>(C("blur"),!(U.value.min(V.value||"")!==!0||U.value.required(V.value||"")!==!0)),b=(l,c,w)=>{if(l>=c)return!1;const v=m(l),f=m(c).getTime()-v.getTime(),d=1e3*60*60*24*365.25;return f/d>=w},m=l=>{const[c,w,v]=l.split("-");return new Date(parseInt(c),parseInt(w)-1,parseInt(v))},E=(l=void 0)=>{setTimeout(()=>C("change",l),100)};return(l,c)=>(o(),S(be,{modelValue:V.value,"onUpdate:modelValue":c[0]||(c[0]=w=>V.value=w),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[U.value.required,U.value.min],onBlur:I,onChange:E},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Et=Me({...at({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Rt=Le()({name:"VRadio",props:Et(),setup(e,C){let{slots:u}=C;return Ne(()=>n(gl,oe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),u)),{}}});const xt=Me({height:{type:[Number,String],default:"auto"},...hl(),...rl(nt(),["multiple"]),trueIcon:{type:Qe,default:"$radioOn"},falseIcon:{type:Qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),wt=Le()({name:"VRadioGroup",inheritAttrs:!1,props:xt(),emits:{"update:modelValue":e=>!0},setup(e,C){let{attrs:u,slots:O}=C;const V=Rl(),U=W(()=>e.id||`radio-group-${V}`),I=Te(e,"modelValue");return Ne(()=>{const[b,m]=dl(u),[E,l]=Pe.filterProps(e),[c,w]=gl.filterProps(e),v=O.label?O.label({label:e.label,props:{for:U.value}}):e.label;return n(Pe,oe({class:["v-radio-group",e.class],style:e.style},b,E,{modelValue:I.value,"onUpdate:modelValue":p=>I.value=p,id:U.value}),{...O,default:p=>{let{id:f,messagesId:d,isDisabled:t,isReadonly:a}=p;return n(A,null,[v&&n(Wl,{id:f.value},{default:()=>[v]}),n(ot,oe(c,{id:f.value,"aria-describedby":d.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:t.value,readonly:a.value,"aria-labelledby":v?f.value:void 0,multiple:!1},m,{modelValue:I.value,"onUpdate:modelValue":i=>I.value=i}),O)])}})}),{}}}),sl=Ue({__name:"FormField",props:te({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:C}){const u=e,{admin:O=!1,disabled:V=!1,persistentHint:U=!1,required:I=!1}=u,b=x(""),m=ye(e,"modelValue"),E=Ke(u,C,void 0,void 0,"field"),l=x(Ie(E.value)),c=x({maxlength:d=>!u.maxLength||d.length<=u.maxLength||`Maximum length is ${u.maxLength} characters. (Current length: ${d.length})`,minlength:d=>!u.minLength||d.length>=u.minLength||`Minimum length is ${u.minLength} characters. (Current length: ${d.length})`,required:d=>!u.required||!!d||"Required field."}),w=x(!1),v=x([]),p=x("");try{const d=JSON.parse(m.value);Array.isArray(d)?v.value=d:typeof d=="boolean"?w.value=d:p.value=m.value}catch{w.value=!1,v.value=[],p.value=m.value}Y(w,()=>{m.value=JSON.stringify(w.value),C("input")}),Y(v,()=>{m.value=JSON.stringify(v.value),C("input")},{deep:!0}),Y(p,()=>{m.value=p.value,C("input")}),Y(E.value,()=>{l.value.Type!==E.value.Type?(l.value=Ie(E.value),w.value=!1,v.value=[],p.value=""):l.value=Ie(E.value)});const f=(d=void 0)=>{C("change",d)};return(d,t)=>l.value.Type===h(le).TEXT?(o(),S(be,{key:0,modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),hint:l.value.Hint,label:`${l.value.Label}${h(I)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:f},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(le).DATE?(o(),S(be,{key:1,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:f},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(le).NUMBER?(o(),S(be,{key:2,modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=a=>p.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:f},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(le).TEXTAREA?(o(),S(ct,{key:3,modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=a=>p.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:f},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(le).CHECKBOX?(o(),R(A,{key:4},[l.value.Multiple?(o(!0),R(A,{key:0},K(l.value.Values,a=>(o(),S(ge,{key:a.ID,modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=i=>v.value=i),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,rules:[c.value.required],onChange:f},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),S(ge,{key:1,modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=a=>w.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,required:h(I),rules:[a=>!h(I)||!!a||"You must tick to continue!"],onChange:f},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===h(le).SELECT?(o(),R(A,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),S(Je,{key:0,modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.required],onChange:f},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),S(il,{key:1,modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.required],onChange:f},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),S(il,{key:3,modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=a=>p.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.required],onChange:f},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):_("",!0):(o(),S(Je,{key:2,modelValue:p.value,"onUpdate:modelValue":t[8]||(t[8]=a=>p.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:h(V)||!1,"persistent-hint":h(U)||!1,"error-messages":b.value,rules:[c.value.required],onChange:f},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===h(le).RADIO?(o(),S(wt,{key:6,modelValue:p.value,"onUpdate:modelValue":t[10]||(t[10]=a=>p.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,rules:[c.value.required],onChange:f},{default:s(()=>[(o(!0),R(A,null,K(l.value.Values,a=>(o(),S(Rt,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===h(le).ACCOMMODATION?(o(),S(St,{key:7,modelValue:v.value,"onUpdate:modelValue":t[11]||(t[11]=a=>v.value=a),admin:h(O),convention:d.convention,"registration-group":d.registrationGroup,data:d.field.Data,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,onChange:f},null,8,["modelValue","admin","convention","registration-group","data","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===h(le).AGE?(o(),S(At,{key:8,modelValue:p.value,"onUpdate:modelValue":t[12]||(t[12]=a=>p.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,onChange:f},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===h(le).EXTRAS?(o(),S(vt,{key:9,modelValue:p.value,"onUpdate:modelValue":t[13]||(t[13]=a=>p.value=a),convention:d.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,required:h(I),onChange:f},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===h(le).INTERESTS?(o(),S(mt,{key:10,modelValue:p.value,"onUpdate:modelValue":t[14]||(t[14]=a=>p.value=a),convention:d.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,required:h(I),onChange:f},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===h(le).TICKET?(o(),S(ft,{key:11,modelValue:p.value,"onUpdate:modelValue":t[15]||(t[15]=a=>p.value=a),admin:h(O),convention:d.convention,"registration-group":d.registrationGroup,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:h(V)||!1,"persistent-hint":h(U),"error-messages":b.value,required:h(I),onChange:f},null,8,["modelValue","admin","convention","registration-group","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):_("",!0)}}),$t=B("strong",null,"These ticket options will be removed",-1),Ot=B("br",null,null,-1),Pt=B("strong",null,"These ticket options will be added",-1),Mt=B("p",null,[N(" If you do not wish to attend for the same days please "),B("span",{class:"text-red-darken-1 font-weight-bold"},"reject"),N(" this join request. ")],-1),Lt=B("p",null,[N(" If you wish to adjust your choices to match the group leader's please "),B("span",{class:"text-green font-weight-bold"},"accept"),N(" this join request. ")],-1),Nt={key:0,class:"my-2"},Ft={key:1,class:"my-2"},_t={key:0,class:"my-2"},qt={key:1,class:"my-2"},sa=Ue({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const C=ye(e,"modelValue");We(C.value.Sections),C.value.Sections.forEach(t=>{t.Fields&&We(t.Fields)});const u=x(),O=ut(),V=vl(),U=ml.getInstance(),I=x(!0),b=x(""),m=x(),E=(t,a=!1)=>{V.validateRegistrationInviteToken(c,a).then(i=>{i&&(m.value=i)}).catch(()=>{b.value="Invalid Token"})},c=new URL(location.href).searchParams.get("token")||"";c!==""?E():I.value=!1;const w=()=>{E(c,!0)},v=x((()=>{if(e.data!==void 0){const a=Ie(e.data);return C.value.Sections.forEach(i=>{i.Fields&&i.Fields.forEach(r=>{const $=e.data.Data.find(g=>g.SectionFieldUUID===r.SectionFieldUUID&&g.SectionFieldUUID==r.SectionFieldUUID);if($)r.Value=$.Data;else{const g={ID:0,SubmissionDataUUID:He(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:i.ID,SectionUUID:i.SectionUUID,SectionFieldID:r.ID,SectionFieldUUID:r.SectionFieldUUID,Data:r.Value};a.Data.push(g)}})}),a}const t={ID:0,SubmissionUUID:He(),FormID:C.value.ID,FormUUID:C.value.FormUUID,UserID:(O==null?void 0:O.ID)||0,UserUUID:(O==null?void 0:O.UserUUID)||"",Data:[]};return t.Data=C.value.Sections.map(a=>a.Fields?a.Fields.map(i=>({ID:0,SubmissionDataUUID:He(),SubmissionID:t.ID,SubmissionUUID:t.SubmissionUUID,SectionID:a.ID,SectionUUID:a.SectionUUID,SectionFieldID:i.ID,SectionFieldUUID:i.SectionFieldUUID,Data:i.Value})):[]).flat(),t})()),p=(t,a,i)=>{const r=v.value.Data.find($=>$.SectionUUID===t&&$.SectionFieldUUID===a);r&&(r.Data=i)},f=({callback:t})=>{var a;(a=u.value)==null||a.validate().then(i=>{i.valid?V.saveSubmission(v.value).then(r=>{if(r){if(v.value=r.Submission,t&&t("Saved"),r.Forms&&r.Forms.length>0){const $=r.Forms.find(H=>H.FormUUID===v.value.FormUUID),g=r.Forms.find(H=>H.Type===he.FORM_TYPE_ACCOMMODATION),M=r.Forms.find(H=>H.Type===he.FORM_TYPE_DEALER),F=r.Forms.find(H=>H.Type===he.FORM_TYPE_BADGE);$&&$.Type===he.FORM_TYPE_REGISTRATION?g?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`):M?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):F?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`):re.push("/"):$&&$.Type===he.FORM_TYPE_ACCOMMODATION?M?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):F?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):$&&$.Type===he.FORM_TYPE_DEALER?F?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):$&&$.Type===he.FORM_TYPE_BADGE&&re.push("/")}}else t&&t("Failed to process request")}).catch(()=>{t&&t("Failed to process request")}):t&&t("Errors in form detected, please review and try again.")})},d=()=>{I.value=!1,U.emit("registration.group.join")};return(t,a)=>(o(),S(ql,null,{default:s(()=>[I.value&&m.value?(o(),R(A,{key:0},[m.value.Match?(o(),S(el,{key:0},{default:s(()=>[n(al,null,{default:s(()=>[n(ll,null,{default:s(()=>[N(" Joined Group ")]),_:1}),n(tl,{class:"text-wrap"},{default:s(()=>[N(" You have successfully linked your registration. The leader of your group will be responsible for deciding on your accommodation and days you're attending. If you are not happy with this you can leave the group and ask them to join you. Alternatively, if you're unable to agree on options you will need to find a different partner. ")]),_:1})]),_:1}),n(nl,null,{default:s(()=>[N(" Your accommodation and ticket options that require accommodation will now be controlled by your group leader. ")]),_:1}),n(ol,null,{default:s(()=>[n(Ye),n(ie,{color:"error",variant:"elevated",onClick:d},{default:s(()=>[N("Okay")]),_:1}),n(Ye)]),_:1})]),_:1})):(o(),S(el,{key:1},{default:s(()=>[n(al,null,{default:s(()=>[n(ll,null,{default:s(()=>[N(" Join Group - Warning ")]),_:1}),n(tl,{class:"text-wrap"},{default:s(()=>[N(" The leader of the sharing group you're joining has selected different ticket options for the accommodation. ")]),_:1})]),_:1}),n(nl,null,{default:s(()=>[m.value.MemberTickets.length?(o(),R(A,{key:0},[$t,Ot,n(ue,null,{default:s(()=>[(o(!0),R(A,null,K(m.value.MemberTickets,i=>(o(),S(z,{key:i.TicketUUID},{default:s(()=>[n(ke,null,{default:s(()=>[N(j(i.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):_("",!0),m.value.LeaderTickets.length?(o(),R(A,{key:1},[Pt,n(ue,null,{default:s(()=>[(o(!0),R(A,null,K(m.value.LeaderTickets,i=>(o(),S(z,{key:i.TicketUUID,"prepend-icon":"mdi:mdi-home"},{default:s(()=>[n(ke,null,{default:s(()=>[N(j(i.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):_("",!0),Mt,Lt]),_:1}),n(ol,null,{default:s(()=>[n(ie,{color:"error",variant:"elevated",onClick:a[0]||(a[0]=i=>I.value=!1)},{default:s(()=>[N("Reject")]),_:1}),n(Ye),n(ie,{color:"success",variant:"elevated",onClick:w},{default:s(()=>[N("Accept")]),_:1})]),_:1})]),_:1}))],64)):(o(),S(it,{key:1,ref_key:"formValidator",ref:u,onSubmit:a[1]||(a[1]=cl(()=>{},["prevent"]))},{default:s(()=>[C.value.Heading?(o(),R("h2",Nt,j(C.value.Heading),1)):_("",!0),C.value.Description?(o(),R("p",Ft,j(C.value.Description),1)):_("",!0),(o(!0),R(A,null,K(C.value.Sections,i=>(o(),R(A,{key:`section_${C.value.ID}.${i.ID}`},[i.Heading?(o(),R("h3",_t,j(i.Heading),1)):_("",!0),i.Description?(o(),R("p",qt,j(i.Description),1)):_("",!0),i.Fields?(o(!0),R(A,{key:2},K(i.Fields,r=>(o(),R(A,{key:`field_${C.value.ID}.${i.ID}.${r.ID}`},[r.Field?(o(),S(de,{key:0},{default:s(()=>[n(X,null,{default:s(()=>[t.editable?(o(),S(sl,{key:0,field:r.Field,modelValue:r.Value,"onUpdate:modelValue":$=>r.Value=$,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:r.Required,"min-length":r.MinLength,"max-length":r.MaxLength,"persistent-hint":!0,onChange:$=>p(i.SectionUUID,r.SectionFieldUUID,r.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),S(sl,{key:1,field:r.Field,modelValue:r.Value,"onUpdate:modelValue":$=>r.Value=$,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:r.Required,"min-length":r.MinLength,"max-length":r.MaxLength,"persistent-hint":!0,disabled:"",onChange:$=>p(i.SectionUUID,r.SectionFieldUUID,r.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128)):_("",!0)],64))),128)),t.editable&&!t.preview?(o(),S(de,{key:2},{default:s(()=>[n(X,{class:"text-center"},{default:s(()=>[n(Yl,{onClick:f,type:"submit"})]),_:1})]),_:1})):_("",!0)]),_:1},512))]),_:1}))}});export{ia as F,il as V,sl as _,ct as a,le as b,sa as c};
