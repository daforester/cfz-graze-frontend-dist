import{I as b,r as R,e as w,w as B,L,M as e,N as n,O as o,v as g,S as l,P as r,Q as T,X as A,V as u,H as S,a0 as P,W as m,a1 as $,Y as H,Z as q,_ as x}from"./index-a2539a30.js";import{G}from"./userData-229899c9.js";import{_ as Q}from"./LoginView.vue_vue_type_script_setup_true_lang-99076cd2.js";import{s as N}from"./index-26b71cef.js";import{F as v}from"./form-29fd1dbb.js";import{S as W}from"./submission-fa749080.js";import{V as X,u as Z}from"./VSpacer-e80b0540.js";import{c as V}from"./canEditForm-adf1a54d.js";import{s as J}from"./sortSubmissions-8ed80f07.js";import{V as K}from"./VAvatar-935d6ee6.js";import{V as ee,a as te,b as oe,c as ne,d as ae,e as ie}from"./VCard-bfa3ad63.js";import{V as s}from"./VBtn-7e2675d0.js";import{V as re,a as se}from"./VRow-0272e6c7.js";import{j}from"./VContainer-f2b55bc8.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-7549dad2.js";const le=c=>(H("data-v-49bff5de"),c=c(),q(),c),ue=["innerHTML"],ce={key:0},de={key:0,class:"font-weight-bold float-left pt-1 w-50"},me={key:1,class:"pa-1"},ve={key:0,class:"font-weight-bold float-left pt-1 w-50"},fe={key:1},_e={class:"font-weight-bold float-left pt-1 w-50"},ge={class:"text-red-darken-4"},pe={key:1,class:"text-red-darken-4 mt-4"},ye=le(()=>A("strong",null,"There are forms above that require completion, please edit and save them.",-1)),ke=[ye],Se=b({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(c){const p=Z(),I=$(),y=R(p.GetConventionLogoURL(c.convention.ConventionUUID)),i=R(),d=w(()=>{var t;return V(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],v.FORM_TYPE_REGISTRATION)}),U=w(()=>{var t;return V(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],v.FORM_TYPE_DEALER)}),F=w(()=>{var t;return V(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],v.FORM_TYPE_ACCOMMODATION)}),h=w(()=>{var t;return V(c.forms,((t=i.value)==null?void 0:t.Submissions)||[],v.FORM_TYPE_ADDITIONAL)});return B(()=>c.forms,()=>{I.getRegistrationByConvention(c.convention.ConventionUUID).then(t=>{t&&(t.Submissions?(t.Submissions.forEach((M,k)=>{M.Form||(t.Submissions[k].Form=c.forms.find(O=>O.FormUUID===M.FormUUID))}),J(t.Submissions)):t.Submissions=[],i.value=t)})}),(t,M)=>{const k=L("router-link"),O=L("RouterLink");return e(),n(ie,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[g(oe,{class:"flex-1-1 align-content-start"},{default:o(()=>[y.value?(e(),n(K,{key:0,src:y.value,title:t.convention.Name,class:"logo text-center"},null,8,["src","title"])):l("",!0),t.convention.Name?(e(),n(ee,{key:1,class:"text-center"},{default:o(()=>[r(T(t.convention.Name),1)]),_:1})):l("",!0),t.convention.Description?(e(),n(te,{key:2,class:"text-wrap subtitle"},{default:o(()=>[A("div",{innerHTML:t.convention.Description},null,8,ue)]),_:1})):l("",!0)]),_:1}),g(ne,null,{default:o(()=>{var C,D;return[i.value?(e(),u("dl",ce,[i.value.Reference?(e(),u("dt",de," Badge No: ")):l("",!0),i.value.Reference?(e(),u("dd",me," #"+T(i.value.Reference),1)):l("",!0),(e(!0),u(S,null,P((C=i.value)==null?void 0:C.Submissions,a=>{var f,E,z,Y;return e(),u(S,{key:a.SubmissionUUID},[a.Form?(e(),u(S,{key:0},[a.Form?(e(),u("dt",ve,T(a.Form.Heading),1)):l("",!0),a.Form?(e(),u("dd",fe,[r(T(m(W)(a.Status))+" ",1),((f=a.Form)==null?void 0:f.Type)===m(v).FORM_TYPE_REGISTRATION?(e(),n(k,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/registration`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&d.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((E=a.Form)==null?void 0:E.Type)===m(v).FORM_TYPE_ACCOMMODATION?(e(),n(k,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/accommodation`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&F.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((z=a.Form)==null?void 0:z.Type)===m(v).FORM_TYPE_DEALER?(e(),n(k,{key:2,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/dealer`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&U.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):((Y=a.Form)==null?void 0:Y.Type)===m(v).FORM_TYPE_ADDITIONAL?(e(),n(k,{key:3,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/additional`},{default:o(()=>{var _;return[(_=a.Form)!=null&&_.State.Edit&&h.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]}),_:2},1032,["to"])):l("",!0)])):l("",!0)],64)):l("",!0)],64)}),128)),((D=i.value)==null?void 0:D.Submissions.length)>=1?(e(!0),u(S,{key:2},P(t.forms,a=>{var f;return e(),u(S,{key:a.FormUUID},[(f=i.value)!=null&&f.Submissions.find(E=>E.FormUUID===a.FormUUID)?l("",!0):(e(),u(S,{key:0},[A("dt",_e,T(a.Heading),1),A("dd",ge,[r(" Requires Completion "),a.Type===m(v).FORM_TYPE_REGISTRATION?(e(),n(k,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/registration`},{default:o(()=>[a.State.Edit&&d.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===m(v).FORM_TYPE_ACCOMMODATION?(e(),n(k,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/accommodation`},{default:o(()=>[a.State.Edit&&F.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===m(v).FORM_TYPE_DEALER?(e(),n(k,{key:2,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/dealer`},{default:o(()=>[a.State.Edit&&U.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):a.Type===m(v).FORM_TYPE_ADDITIONAL?(e(),n(k,{key:3,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}/additional`},{default:o(()=>[a.State.Edit&&h.value?(e(),n(s,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[r(" Edit ")]),_:1})):(e(),n(s,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[r("View")]),_:1}))]),_:2},1032,["to"])):l("",!0)])],64))],64)}),128)):l("",!0)])):l("",!0),i.value&&i.value.Submissions.length>=1&&t.forms.filter(a=>{var f;return!((f=i.value)!=null&&f.Submissions.find(E=>E.FormUUID==a.FormUUID))}).length?(e(),u("div",pe,ke)):l("",!0)]}),_:1}),g(ae,null,{default:o(()=>{var C,D;return[t.convention.DetailLink?(e(),n(s,{key:0,color:"orange",href:t.convention.DetailLink},{default:o(()=>[r(T(m(N).buttonDetails),1)]),_:1},8,["href"])):l("",!0),g(X),d.value?(e(),u(S,{key:1},[(C=i.value)!=null&&C.Submissions.find(a=>{var f;return((f=a.Form)==null?void 0:f.Type)===m(v).FORM_TYPE_REGISTRATION})?(e(),n(O,{key:1,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}`},{default:o(()=>[g(s,{color:"primary"},{default:o(()=>[r(T(m(N).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),u(S,{key:0},[(D=t.forms.find(a=>a.Type===m(v).FORM_TYPE_REGISTRATION))!=null&&D.State.New?(e(),n(O,{key:0,to:`/register/${t.convention.Slug||t.convention.ConventionUUID}`},{default:o(()=>[g(s,{color:"primary"},{default:o(()=>[r(T(m(N).buttonRegister),1)]),_:1})]),_:1},8,["to"])):l("",!0)],64))],64)):l("",!0)]}),_:1})]),_:1})}}});const Ie=x(Se,[["__scopeId","data-v-49bff5de"]]),Te=b({__name:"Conventions",setup(c){const p=$(),I=R([]),y=R([]);return p.getOpenConventionsList().then(i=>{i&&(I.value=[...I.value,...i],p.getAvailableConventionForms(I.value.map(d=>d.ConventionUUID)).then(d=>{y.value=[...y.value,...d]}).catch(d=>{console.error(d)}))}),(i,d)=>(e(),n(j,null,{default:o(()=>[g(se,{class:"justify-center"},{default:o(()=>[(e(!0),u(S,null,P(I.value,U=>(e(),n(re,{key:U.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[g(Ie,{convention:U,forms:y.value.filter(F=>F.ConventionUUID===U.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Ue={};function Ee(c,p){return e(),u("div")}const Fe=x(Ue,[["render",Ee]]),Ce=b({__name:"MainView",emits:["pageTitle"],setup(c,{emit:p}){p("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const y=localStorage.getItem("gjt_token"),i=localStorage.getItem("ajt_token");y?(localStorage.removeItem("gjt_token"),location.href=y):i&&(localStorage.removeItem("ajt_token"),location.href=i);const d=R(G());return(U,F)=>{const h=L("router-link");return e(),u(S,null,[d.value&&!d.value.Additional.Email?(e(),n(j,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:o(()=>[r(" Please enter a Contact Email on the "),g(h,{to:"/profile",class:"text-white font-weight-bold"},{default:o(()=>[r("manage account page")]),_:1}),r(" to ensure we can contact you. ")]),_:1})):l("",!0),g(Te),g(Fe)],64)}}}),Ge=b({__name:"Home",emits:["pageTitle"],setup(c,{emit:p}){const I=G();return p("pageTitle","Telegram Login"),(y,i)=>(e(),u("div",null,[m(I)?(e(),n(Ce,{key:0,onPageTitle:i[0]||(i[0]=d=>p("pageTitle",d))})):(e(),n(Q,{key:1}))]))}});export{Ge as default};
