import{I as L,a0 as re,a1 as ue,J as ce,r as A,w as K,M as e,N as r,O as t,v as c,P as n,R as de,Q as I,S as T,a2 as me,X as y,a3 as J,K as oe,V as u,H as _,a4 as H,W as v,p as ve,a5 as fe,n as pe,u as _e,a as ye,e as D,x as q,L as W,Y as ge,Z as Se,_ as le}from"./index-fd039bbf.js";import{G as Q}from"./userData-b06ffc8d.js";import{_ as Te}from"./LoginView.vue_vue_type_script_setup_true_lang-8b37e265.js";import{s as j}from"./index-26b71cef.js";import{F as P}from"./form-29fd1dbb.js";import{S as V,a as he}from"./submission-2c955912.js";import{V as ie,u as ke,a as Ie}from"./scopeId-f6a90536.js";import{c as G}from"./canEditForm-1bd557fa.js";import{s as Ue}from"./sortSubmissions-8ed80f07.js";import{P as B,a as Ee,f as Ae,u as Ce}from"./useDisplayTransactions-395bb5bc.js";import{V as we,l as Pe}from"./VAlert-7b8309dc.js";import{_ as be}from"./ModelDialog.vue_vue_type_script_setup_true_lang-23af8286.js";import{V as Ve}from"./VForm-8848c8b5.js";import{V as z,a as Y}from"./VRow-eb7ca009.js";import{V as p,a as Oe}from"./VBtn-ea688579.js";import{j as X,u as De}from"./VContainer-6c2443d8.js";import{V as Re,m as Ne,a as ae}from"./SaveButton.vue_vue_type_script_setup_true_lang-aabba4c8.js";import{V as Me}from"./VAvatar-7993a765.js";import{V as ne,a as Fe,b as $e,c as se,d as xe,e as Ye}from"./VCard-3209ead3.js";import{f as Le}from"./forwardRefs-9945fb57.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-66d4d93d.js";import"./createSimpleFunctional-36978db2.js";import"./VDialog-e7697d0a.js";import"./VToolbar-3fb450ae.js";const Be=y("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),y("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),ze=y("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),Ge=y("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),He=y("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),je=y("p",{class:"my-4"},[n(" Please contact "),y("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),qe=y("div",{id:"link-authentication-element"},null,-1),We=y("div",{id:"payment-element"},null,-1),Ke=L({__name:"StripePayment",props:re({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(l){const g=ue(l,"modelValue"),h=J(),k=Q(),m=ce(),a=A(),f=A(),U=A((k==null?void 0:k.Additional.Email)||""),C=A(!1),N=A("");let R;const M=A(!1);K(g,d=>{d&&h.stripePublicKey().then(async i=>{i&&(f.value=await Pe(i),await O(f.value))})});const $=d=>{N.value=d,C.value=!0};async function O(d){var E;if(!d)return;const i=await h.stripePaymentIntent(((E=l.registration)==null?void 0:E.RegistrationUUID)||""),S={theme:"stripe"};m.current.value.dark&&(S.theme="night"),R=d.elements({clientSecret:i,appearance:S});const b=R.create("linkAuthentication",{defaultValues:{email:U.value}});b.mount("#link-authentication-element"),b.on("change",F=>{U.value=F.value.email});const x={layout:"tabs"};R.create("payment",x).mount("#payment-element")}async function o(d,i){if(!i)return;d.preventDefault(),M.value=!0;const S=new URL(location.href);S.pathname+="payment/stripe/processing";const{error:b}=await i.confirmPayment({elements:R,confirmParams:{return_url:S.toString(),receipt_email:U.value}});b.type==="card_error"||b.type==="validation_error"?$(b.message):$("An unexpected error occurred."),M.value=!1}return(d,i)=>(e(),r(be,{modelValue:g.value,"onUpdate:modelValue":i[4]||(i[4]=S=>g.value=S),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[c(X,{class:"pa-0"},{default:t(()=>[c(we,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[Be,ze,Ge,He,je]),_:1}),c(Ve,{ref_key:"paymentForm",ref:a,id:"payment-form",onSubmit:i[1]||(i[1]=de(S=>o(S,f.value),["prevent"]))},{default:t(()=>[c(z,null,{default:t(()=>[c(Y,null,{default:t(()=>[qe]),_:1})]),_:1}),c(z,null,{default:t(()=>[c(Y,null,{default:t(()=>[We]),_:1})]),_:1}),c(z,null,{default:t(()=>[d.registration?(e(),r(Y,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+I(d.registration.Total-d.registration.Paid),1)]),_:1})):T("",!0)]),_:1}),c(z,null,{default:t(()=>[c(Y,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(p,{color:"error",class:"w-100",onClick:i[0]||(i[0]=S=>g.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),c(ie),c(Y,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(p,{type:"submit",color:"success",class:"w-100"},me({default:t(()=>[n(" Pay Now ")]),_:2},[M.value?{name:"prepend",fn:t(()=>[c(Oe,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),c(Re,{modelValue:C.value,"onUpdate:modelValue":i[3]||(i[3]=S=>C.value=S)},{actions:t(()=>[c(p,{variant:"text",onClick:i[2]||(i[2]=S=>C.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(I(N.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Je={key:0},Qe={key:1,class:"v-row"},Xe={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Ze={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},et={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},tt={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},ot={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},at={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},nt={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},st=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),lt={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},it=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),rt={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},ut=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),ct={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},dt=L({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(l){const g=l,h=A(oe(g.paymentTransactions));K(g,()=>{h.value=oe(g.paymentTransactions)});const k=(m,a)=>m.Type===B.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type!==B.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:m.Type!==B.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type===B.PAYMENT_TRANSACTION_TYPE_CHARGE||(m.UpdatedAt||0)>(a.UpdatedAt||0)?1:m.UpdatedAt===a.UpdatedAt?0:-1;return(m,a)=>m.registration.Total==0?(e(),u("p",Je," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),u("dl",Qe,[(e(!0),u(_,null,H(h.value.sort(k),f=>{var U;return e(),u(_,{key:f.PaymentTransactionUUID},[f.Type===v(B).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),u("dt",Xe,[y("div",Ze,I(f.Description.split(":")[0]),1),y("div",et,I(f.Description.split(":")[1]),1)])):(e(),u("dt",tt,[y("div",ot,I((U=v(Ee).find(C=>C.value===f.Type))==null?void 0:U.title),1),y("div",at," [ "+I(v(Ae)(f.UpdatedAt||""))+" ] "+I(f.Description),1)])),y("dd",nt," £"+I(f.Amount),1)],64)}),128)),st,y("dd",lt," £"+I(m.registration.Total),1),it,y("dd",rt," £"+I(m.registration.Paid),1),ut,y("dd",ct," £"+I(m.registration.Total-m.registration.Paid),1)]))}});const mt=ve({id:String,text:String,...fe(Ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),vt=pe()({name:"VTooltip",props:mt(),emits:{"update:modelValue":l=>!0},setup(l,g){let{slots:h}=g;const k=_e(l,"modelValue"),{scopeId:m}=ke(),a=ye(),f=D(()=>l.id||`v-tooltip-${a}`),U=A(),C=D(()=>l.location.split(" ").length>1?l.location:l.location+" center"),N=D(()=>l.origin==="auto"||l.origin==="overlap"||l.origin.split(" ").length>1||l.location.split(" ").length>1?l.origin:l.origin+" center"),R=D(()=>l.transition?l.transition:k.value?"scale-transition":"fade-transition"),M=D(()=>q({"aria-describedby":f.value},l.activatorProps));return De(()=>{const[$]=ae.filterProps(l);return c(ae,q({ref:U,class:["v-tooltip",l.class],style:l.style,id:f.value},$,{modelValue:k.value,"onUpdate:modelValue":O=>k.value=O,transition:R.value,absolute:!0,location:C.value,origin:N.value,persistent:!0,role:"tooltip",activatorProps:M.value,_disableGlobalStack:!0},m),{activator:h.activator,default:function(){var i;for(var O=arguments.length,o=new Array(O),d=0;d<O;d++)o[d]=arguments[d];return((i=h.default)==null?void 0:i.call(h,...o))??l.text}})}),Le({},U)}}),ft=l=>(ge("data-v-d36fcf45"),l=l(),Se(),l),pt=["innerHTML"],_t={key:0},yt={key:0,class:"font-weight-bold float-left pt-1 w-50"},gt={key:1,class:"pa-1"},St={key:0,class:"font-weight-bold float-left pt-1 w-50"},Tt={key:1},ht={class:"font-weight-bold float-left pt-1 w-50"},kt={class:"text-red-darken-4"},It={key:1,class:"text-red-darken-4 mt-4"},Ut=ft(()=>y("strong",null,"There are forms above that require completion, please edit and save them.",-1)),Et=[Ut],At=L({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const g=Ie(),h=J(),{getPaymentTransactions:k}=Ce(),m=A(g.GetConventionLogoURL(l.convention.ConventionUUID)),a=A(),f=A([]),U=A(!1),C=A([]),N=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],P.FORM_TYPE_REGISTRATION)}),R=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],P.FORM_TYPE_DEALER)}),M=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],P.FORM_TYPE_ACCOMMODATION)}),$=D(()=>{var o;return G(l.forms,((o=a.value)==null?void 0:o.Submissions)||[],P.FORM_TYPE_ADDITIONAL)}),O=D(()=>{var o,d;return a.value&&((o=a.value)!=null&&o.Submissions)?!!((d=a.value)!=null&&d.Submissions.find(i=>{var S;return((S=i.Form)==null?void 0:S.Type)==P.FORM_TYPE_REGISTRATION&&(i.Status==V.SUBMISSION_STATUS_ACCEPTED||i.Status==V.SUBMISSION_STATUS_COMPLETED)})):!1});return K(()=>l.forms,()=>{h.getRegistrationByConvention(l.convention.ConventionUUID).then(o=>{var d;o&&(o.Submissions?(o.Submissions.forEach((i,S)=>{i.Form||(o.Submissions[S].Form=l.forms.find(b=>b.FormUUID===i.FormUUID))}),Ue(o.Submissions)):o.Submissions=[],a.value=o,O.value&&k(((d=a.value)==null?void 0:d.RegistrationUUID)||"").then(i=>{f.value=i}))})}),(o,d)=>{const i=W("router-link"),S=W("RouterLink");return e(),r(Ye,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[c($e,{class:"flex-1-1 align-content-start"},{default:t(()=>[m.value?(e(),r(Me,{key:0,src:m.value,title:o.convention.Name,class:"logo text-center"},null,8,["src","title"])):T("",!0),o.convention.Name?(e(),r(ne,{key:1,class:"text-center"},{default:t(()=>[n(I(o.convention.Name),1)]),_:1})):T("",!0),o.convention.Description?(e(),r(Fe,{key:2,class:"text-wrap subtitle"},{default:t(()=>[y("div",{innerHTML:o.convention.Description},null,8,pt)]),_:1})):T("",!0)]),_:1}),c(se,null,{default:t(()=>{var b,x;return[a.value?(e(),u("dl",_t,[a.value.Reference?(e(),u("dt",yt," Badge No: ")):T("",!0),a.value.Reference?(e(),u("dd",gt," #"+I(a.value.Reference),1)):T("",!0),(e(!0),u(_,null,H((b=a.value)==null?void 0:b.Submissions,(s,E)=>{var F,Z,ee,te;return e(),u(_,{key:s.SubmissionUUID},[s.Form?(e(),u(_,{key:0},[s.Form?(e(),u("dt",St,I(s.Form.Heading),1)):T("",!0),s.Form?(e(),u("dd",Tt,[c(vt,{modelValue:C.value[E],"onUpdate:modelValue":w=>C.value[E]=w},{activator:t(({props:w})=>[c(p,q(w,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:Dt=>C.value[E]=!C.value[E]}),null,16,["onClick"])]),default:t(()=>[s.Status===v(V).SUBMISSION_STATUS_NULL?(e(),u(_,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):s.Status===v(V).SUBMISSION_STATUS_INCOMPLETE?(e(),u(_,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):s.Status===v(V).SUBMISSION_STATUS_OPEN?(e(),u(_,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):s.Status===v(V).SUBMISSION_STATUS_LOCKED?(e(),u(_,{key:3},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_ACCEPTED?(e(),u(_,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_COMPLETED?(e(),u(_,{key:5},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):s.Status===v(V).SUBMISSION_STATUS_REJECTED?(e(),u(_,{key:6},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):s.Status===v(V).SUBMISSION_STATUS_INVALID?(e(),u(_,{key:7},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):s.Status===v(V).SUBMISSION_STATUS_CANCELLED?(e(),u(_,{key:8},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),u(_,{key:9},[n(" Please contact the registration team for support. ")],64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(" "+I(v(he)(s.Status))+" ",1),((F=s.Form)==null?void 0:F.Type)===v(P).FORM_TYPE_REGISTRATION?(e(),r(i,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>{var w;return[(w=s.Form)!=null&&w.State.Edit&&N.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((Z=s.Form)==null?void 0:Z.Type)===v(P).FORM_TYPE_ACCOMMODATION?(e(),r(i,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>{var w;return[(w=s.Form)!=null&&w.State.Edit&&M.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ee=s.Form)==null?void 0:ee.Type)===v(P).FORM_TYPE_DEALER?(e(),r(i,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>{var w;return[(w=s.Form)!=null&&w.State.Edit&&R.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((te=s.Form)==null?void 0:te.Type)===v(P).FORM_TYPE_ADDITIONAL?(e(),r(i,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>{var w;return[(w=s.Form)!=null&&w.State.Edit&&$.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):T("",!0)])):T("",!0)],64)):T("",!0)],64)}),128)),((x=a.value)==null?void 0:x.Submissions.length)>=1?(e(!0),u(_,{key:2},H(o.forms,s=>{var E;return e(),u(_,{key:s.FormUUID},[(E=a.value)!=null&&E.Submissions.find(F=>F.FormUUID===s.FormUUID)?T("",!0):(e(),u(_,{key:0},[y("dt",ht,I(s.Heading),1),y("dd",kt,[n(" Requires Completion "),s.Type===v(P).FORM_TYPE_REGISTRATION?(e(),r(i,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>[s.State.Edit&&N.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(P).FORM_TYPE_ACCOMMODATION?(e(),r(i,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>[s.State.Edit&&M.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(P).FORM_TYPE_DEALER?(e(),r(i,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>[s.State.Edit&&R.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(P).FORM_TYPE_ADDITIONAL?(e(),r(i,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>[s.State.Edit&&$.value?(e(),r(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),r(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):T("",!0)])],64))],64)}),128)):T("",!0)])):T("",!0),a.value&&a.value.Submissions.length>=1&&o.forms.filter(s=>{var E;return!((E=a.value)!=null&&E.Submissions.find(F=>F.FormUUID==s.FormUUID))}).length?(e(),u("div",It,Et)):T("",!0)]}),_:1}),O.value&&a.value?(e(),u(_,{key:0},[c(ne,{class:"pb-4 text-center"},{default:t(()=>[n("Payment Information")]),_:1}),c(se,null,{default:t(()=>[c(dt,{"payment-transactions":f.value,registration:a.value},null,8,["payment-transactions","registration"])]),_:1})],64)):T("",!0),c(xe,null,{default:t(()=>{var b,x;return[o.convention.DetailLink?(e(),r(p,{key:0,color:"orange",href:o.convention.DetailLink},{default:t(()=>[n(I(v(j).buttonDetails),1)]),_:1},8,["href"])):T("",!0),c(ie),N.value?(e(),u(_,{key:1},[(b=a.value)!=null&&b.Submissions.find(s=>{var E;return((E=s.Form)==null?void 0:E.Type)===v(P).FORM_TYPE_REGISTRATION})?(e(),r(S,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(p,{color:"primary"},{default:t(()=>[n(I(v(j).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),u(_,{key:0},[(x=o.forms.find(s=>s.Type===v(P).FORM_TYPE_REGISTRATION))!=null&&x.State.New?(e(),r(S,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(p,{color:"primary"},{default:t(()=>[n(I(v(j).buttonRegister),1)]),_:1})]),_:1},8,["to"])):T("",!0)],64))],64)):O.value&&a.value&&a.value.Total>a.value.Paid?(e(),u(_,{key:2},[c(p,{color:"success",variant:"elevated",onClick:d[0]||(d[0]=s=>U.value=!0)},{default:t(()=>[n("Make Payment")]),_:1}),a.value?(e(),r(Ke,{key:0,"payment-transactions":f.value,registration:a.value,modelValue:U.value,"onUpdate:modelValue":d[1]||(d[1]=s=>U.value=s)},null,8,["payment-transactions","registration","modelValue"])):T("",!0)],64)):T("",!0)]}),_:1})]),_:1})}}});const Ct=le(At,[["__scopeId","data-v-d36fcf45"]]),wt=L({__name:"Conventions",setup(l){const g=J(),h=A([]),k=A([]);return g.getOpenConventionsList().then(m=>{m&&(h.value=[...h.value,...m],g.getAvailableConventionForms(h.value.map(a=>a.ConventionUUID)).then(a=>{k.value=[...k.value,...a]}).catch(a=>{console.error(a)}))}),(m,a)=>(e(),r(X,null,{default:t(()=>[c(z,{class:"justify-center"},{default:t(()=>[(e(!0),u(_,null,H(h.value,f=>(e(),r(Y,{key:f.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[c(Ct,{convention:f,forms:k.value.filter(U=>U.ConventionUUID===f.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Pt={};function bt(l,g){return e(),u("div")}const Vt=le(Pt,[["render",bt]]),Ot=L({__name:"MainView",emits:["pageTitle"],setup(l,{emit:g}){g("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const k=localStorage.getItem("gjt_token"),m=localStorage.getItem("ajt_token");k?(localStorage.removeItem("gjt_token"),location.href=k):m&&(localStorage.removeItem("ajt_token"),location.href=m);const a=A(Q());return(f,U)=>{const C=W("router-link");return e(),u(_,null,[a.value&&!a.value.Additional.Email?(e(),r(X,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),c(C,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):T("",!0),c(wt),c(Vt)],64)}}}),so=L({__name:"Home",emits:["pageTitle"],setup(l,{emit:g}){const h=Q();return g("pageTitle","Telegram Login"),(k,m)=>(e(),u("div",null,[v(h)?(e(),r(Ot,{key:0,onPageTitle:m[0]||(m[0]=a=>g("pageTitle",a))})):(e(),r(Te,{key:1}))]))}});export{so as default};
