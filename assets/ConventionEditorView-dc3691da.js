var Ot=Object.defineProperty;var $t=(n,r,e)=>r in n?Ot(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var Ue=(n,r,e)=>($t(n,typeof r!="symbol"?r+"":r,e),e);import{s as q}from"./index-ba0d422e.js";import{d as B,X as L,Y as G,y,R as Z,o as U,b as _,w as l,c as t,e as D,L as V,K as P,h as w,N as h,F as k,O as H,G as R,f as z,H as re,m as Te,V as vt,D as Ft,M as ft,k as de,$ as Ce,Z as Fe,a0 as Le,z as je,p as ye,a1 as Rt,a as he,s as j,a2 as it,u as pt,v as Lt,a3 as wt,a4 as Nt,I as Mt,x as Yt,t as ce,B as qt,i as Xe,a5 as Ut,n as Bt,q as zt,a6 as Gt,a7 as Kt,a8 as It,a9 as Ht,aa as jt,ab as Xt,W as Wt,ac as Jt}from"./index-ad583c67.js";import{m as Ye,a as qe,s as we,u as Ne,F as Zt,V as We,_ as Qt,b as el}from"./FormField.vue_vue_type_script_setup_true_lang-39420a24.js";import{u as J}from"./useGrazeAPI-8f74a332.js";import{_ as ge,N as st}from"./SelectTags.vue_vue_type_script_setup_true_lang-dfd6daef.js";import{_ as be}from"./SaveButton.vue_vue_type_script_setup_true_lang-ed6b7e27.js";import{e as ve,c as Ve}from"./VCard-387bb51f.js";import{V as b,a as W,m as tl,b as ll,c as Tt,d as nl,e as ol,f as al,g as il}from"./VBtn-282d2b58.js";import{V as me,b as oe}from"./VToolbar-07d80ae3.js";import{V as ae}from"./VSpacer-2d2b4767.js";import{V as De,a as sl}from"./VSheet-ab000da5.js";import{V as ee}from"./VContainer-fbb15823.js";import{V as N,a as ul,s as rl}from"./VTextField-bcf26082.js";import{V as Ee}from"./VDialog-410f5634.js";import{V as Be,d as ne,a as ue,e as Je,b as gt}from"./VList-f69a734e.js";import{a as M,V as C}from"./VRow-055430d7.js";import{v as K}from"./v4-a960c1f4.js";import{V as Se,a as ke,b as Pe,c as Ae}from"./VExpansionPanel-ae399930.js";import{V as Vt}from"./VImg-4e76607d.js";import{V as dl}from"./VForm-ff8a8b9c.js";import{V as ml}from"./VFileInput-692bc010.js";import{V as Ze}from"./VTextarea-25d06374.js";import{T as O,a as cl}from"./ticket-b671e8ba.js";import{V as vl}from"./VAutocomplete-272f0cb3.js";import{V as se}from"./VSelect-31dd40d2.js";import{V as fl,a as pl}from"./VChip-f7150b31.js";import{_ as Ul}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-a7026189.js";import{_ as Il}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-55dd6dab.js";import{_ as Qe,a as Tl,V as Dt,b as gl}from"./FieldEditor.vue_vue_type_script_setup_true_lang-51e50380.js";import{_ as Vl}from"./FormRenderer.vue_vue_type_script_setup_true_lang-6a55fbd4.js";import{V as Dl,a as ut}from"./index-d4774cfe.js";import{i as _l,u as xe,m as et,d as tt,j as rt,f as Cl}from"./rounded-7a345354.js";import{m as yl,u as hl}from"./VOverlay-401ee4b7.js";import{u as bl}from"./ssrBoot-4e7347f1.js";import{M as El}from"./index-0c409218.js";import"./scopeId-230b3d07.js";import"./createSimpleFunctional-2a2dbdcd.js";import"./VAvatar-b27f27a9.js";import"./VTable-86ef7ccf.js";import"./userData-d733b0cf.js";const Sl=[{ID:1,AdminLayoutUUID:"",ConventionID:1,ConventionUUID:"97d5c243-674f-47f3-abc0-9eb5dca4316f",Name:"Registration Table",Type:"TABLE",Panels:[{ID:1,LayoutPanelUUID:"",AdminLayoutID:1,AdminLayoutUUID:"",Name:"Row",Order:1,Items:[{ID:1,LayoutItemUUID:"a",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Date of Birth",SourceType:"FORM",SectionFieldID:13,SectionFieldUUID:"8a14640f-d443-4b9c-8a5b-3afbd9e6c2b9",Align:"start",Order:1},{ID:2,LayoutItemUUID:"b",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Legal Name",SourceType:"FORM",SectionFieldID:19,SectionFieldUUID:"9b9b40ba-7e88-4456-9bfa-63a7db70012f",Align:"start",Order:2},{ID:3,LayoutItemUUID:"c",LayoutPanelID:1,LayoutPanelUUID:"",Label:"Furry Name",SourceType:"FORM",SectionFieldID:23,SectionFieldUUID:"229f72c6-a3c2-4f18-8c23-edbe8b7eae78",Align:"start",Order:3}]}]}],kl=(n,r)=>{const e=new Map;n.forEach(d=>{const i=r(d);i&&e.set(i.toString(),[...e.get(i.toString())||[],d])});const o={};return e.forEach((d,i)=>{o[i]=d}),o},Pl=[],Al=Sl,xl=[],Ol=[],Ie=class extends Object{constructor(){super();Ue(this,"accommodation");Ue(this,"adminLayouts");Ue(this,"conventions");Ue(this,"conventionTags");this.accommodation=Pl,this.adminLayouts=Al,this.conventions=xl,this.conventionTags=Ol}static getInstance(){return Ie.instance===void 0&&(Ie.instance=new Ie),Ie.instance}deleteCredential(e){return Promise.resolve(!1)}getConvention(e){return console.warn(`StubAPI: getConvention("${e}")`),new Promise(o=>{const d=this.conventions.find(i=>i.ConventionUUID===e||i.Slug===e);d&&(d.Accommodation=this.accommodation.filter(i=>i.ConventionUUID===d.ConventionUUID),o(d)),o(void 0)})}getConventionAccommodation(e){return console.warn(`StubAPI: getConventionAccommodation("${e}")`),new Promise(o=>{o(this.accommodation.filter(d=>d.ConventionUUID===e))})}getConventionAdminLayout(e,o){return new Promise(d=>{d(this.adminLayouts.find(i=>i.Name===o))})}getConventionExtras(e){return console.warn(`StubAPI: getConventionExtras("${e}")`),new Promise(o=>{const d=this.conventions.flatMap(i=>i.ConventionUUID===e?i.Extras||[]:[]);d.forEach(i=>{var m;(m=i.Options)==null||m.forEach(u=>{var s,a;(((s=u.Choices)==null?void 0:s.length)||0)>(((a=u.Choices)==null?void 0:a.length)||0)&&(u.Choices=this.conventionTags.filter(v=>{var c;return(c=u.Choices)==null?void 0:c.find(f=>f.TagUUID===v.TagUUID)}))})}),o(d)})}getConventionInterests(e){return console.warn(`StubAPI: getConventionInterests("${e}")`),new Promise(o=>{o(this.conventions.flatMap(d=>d.ConventionUUID===e?d.Interests||[]:[]))})}getConventionList(e){return console.warn(`StubAPI: getConventionList("${e}")`),new Promise(o=>{o(this.conventions.filter(d=>d.OrganisationUUID===e))})}getInterestsByUUID(e,o){return console.warn(`StubAPI: getInterestsById(["${o.join('","')}"])`),new Promise(d=>{d(this.conventions.flatMap(i=>i.Interests||[]).filter(i=>o.includes(i.InterestUUID)))})}getLoginURLs(e){throw new Error("Method not implemented.")}getProfile(){throw new Error("Method not implemented.")}oAuthLogin(e,o,d,i,m){throw console.warn(`StubAPI: oAuthLogin("${e}", "${o}", "${d}", "${i}")`),new Error("Method not implemented.")}registerAccount(e,o){throw console.warn(`StubAPI: registerAccount("${e}", "${o}")`),new Error("Method not implemented.")}saveInterest(e){return console.warn(`StubAPI: saveInterest({${e}})`),new Promise((o,d)=>{const i=this.conventions.find(m=>m.ConventionUUID===e.ConventionUUID);if(!i)d("convention not found");else if(!i.Interests)i.Interests=[e];else{let m;(m=i.Interests.findIndex(u=>u.InterestUUID===e.InterestUUID))>-1&&i.Interests.splice(m,1),i.Interests.push(e)}o(e)})}saveExtras(e,o=!1,d=""){return console.warn(`StubAPI: saveExtras("${d}")`),this.saveCollection("Extras",e,o,d)}saveInterests(e,o=!1,d=""){return console.warn(`StubAPI: saveInterests("${d}")`),this.saveCollection("Interests",e,o,d)}saveTickets(e,o=!1,d=""){return console.warn(`StubAPI: saveTickets("${d}")`),this.saveCollection("Tickets",e,o,d)}saveCollection(e,o,d=!1,i=""){return console.warn(`StubAPI: saveCollection("${e}", [{${o.map(m=>m.Name)}.join("},{")}], ${d?"true":"false"}, "${i}")`),new Promise((m,u)=>{o.forEach(a=>{a.ConventionUUID===""&&(i!==""?a.ConventionUUID=i:u("missing convention id on interest and no default specified"))});const s=kl(o,a=>a.ConventionUUID);Object.keys(s).forEach(a=>{const v=s[a],c=this.conventions.find(f=>f.ConventionUUID===a);c&&(d?c[e]=v:v.forEach(f=>{if(c[e]===void 0)c[e]=[f];else{const p=c[e].findIndex(g=>g.ConventionUUID===f.ConventionUUID);if(p&&p>=0){c[e][p]=f;return}c[e].push(f)}}))}),m(o)})}saveProfile(e,o,d){throw new Error("Method not implemented.")}validateAccount(e){throw console.warn(`StubAPI: validateAccount("${e}")`),new Error("Method not implemented.")}deleteExtra(e){return Promise.resolve(!1)}deleteField(e){return Promise.resolve(!1)}deleteForm(e){return Promise.resolve(!1)}deleteInterest(e){return Promise.resolve(!1)}deleteRoom(e){return Promise.resolve(!1)}deleteTicket(e){return Promise.resolve(!1)}getConventionFields(e){return Promise.resolve([])}getConventionForms(e){return Promise.resolve([])}getConventionTags(e){return Promise.resolve([])}getConventionTickets(e){return Promise.resolve([])}getConventionVenues(e){return Promise.resolve([])}getOrganisation(e){return Promise.resolve(void 0)}getOrganisationTags(e){return Promise.resolve([])}getOrganisations(){return Promise.resolve([])}getVenueRooms(e){return Promise.resolve([])}saveAccommodation(e){return Promise.resolve(void 0)}saveConvention(e){return Promise.resolve(void 0)}saveExtra(e){return Promise.resolve(void 0)}saveField(e){return Promise.resolve(void 0)}saveForm(e){return Promise.resolve(void 0)}saveOrganisation(e){return Promise.resolve(void 0)}saveRoom(e){return Promise.resolve(void 0)}saveTag(e){return Promise.resolve(void 0)}saveTicket(e){return Promise.resolve(void 0)}saveVenue(e){return Promise.resolve(void 0)}deleteAccommodation(e){return Promise.resolve(!1)}deleteVenue(e){return Promise.resolve(!1)}deleteConvention(e){return Promise.resolve(!1)}deleteOrganisation(e){return Promise.resolve(!1)}deleteSubmission(e){return Promise.resolve(!1)}getConventionSubmissions(e){return Promise.resolve(void 0)}getSubmission(e){return Promise.resolve(void 0)}getUserConventionSubmissions(e,o){return Promise.resolve(void 0)}getUserSubmissions(e){return Promise.resolve(void 0)}saveSubmission(e){return Promise.resolve(void 0)}};let Re=Ie;Ue(Re,"instance");var _t=(n=>(n.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",n.FORM_TYPE_BADGE="BADGE",n.FORM_TYPE_DEALER="DEALER",n.FORM_TYPE_REGISTRATION="REGISTRATION",n.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",n))(_t||{});const $l=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],Fl=B({__name:"EditConventionExtraOptions",props:L({convention:{}},{modelValue:{}}),emits:L(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=y(Z(e.value)),d=()=>{e.value=o.value,r("close")};return(i,m)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(b,{icon:"",dark:"",onClick:m[0]||(m[0]=u=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Option Choice")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(b,{variant:"text",onClick:d},{default:l(()=>[D(" Apply ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:l(()=>[t(ee,null,{default:l(()=>[t(N,{label:V(q).formLabelName,type:"text",variant:"outlined",modelValue:o.value.Name,"onUpdate:modelValue":m[1]||(m[1]=u=>o.value.Name=u)},null,8,["label","modelValue"]),t(N,{label:V(q).formLabelDescription,type:"text",variant:"outlined",modelValue:o.value.Description,"onUpdate:modelValue":m[2]||(m[2]=u=>o.value.Description=u)},null,8,["label","modelValue"]),t(N,{label:V(q).formLabelPrice,type:"text",variant:"outlined","prepend-icon":V(q).currencyIcon,modelValue:o.value.Price,"onUpdate:modelValue":m[3]||(m[3]=u=>o.value.Price=u),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),o.value.Choices?(U(),_(ge,{key:0,modelValue:o.value.Choices,"onUpdate:modelValue":m[4]||(m[4]=u=>o.value.Choices=u),convention:i.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):P("",!0)]),_:1})]),_:1})]),_:1}))}}),Rl=z("h3",null,"Options",-1),Ll=B({__name:"EditConventionExtra",props:L({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=y(Z(r.value)),o=y(!1),d=y(0),i=J(),m=y([""]),u=y([]),s=y([]);n.convention&&(i.getConventionTags(n.convention.ConventionUUID).then(g=>{s.value=g.sort((I,T)=>I.Title.localeCompare(T.Title))}),i.getOrganisationTags(n.convention.OrganisationUUID).then(g=>{u.value=g.sort((I,T)=>I.Title.localeCompare(T.Title))}));const a=w(()=>[...u.value,...s.value]),v=({callback:g})=>{i.saveExtra(e.value).then(I=>{I?(r.value=I,g&&g("Extra Saved")):g&&g("Failed to Save Extra")}).catch(()=>{g&&g("Failed to Save Extra")})},c=g=>{var I;g.Options||(g.Options=[]),g.Options.push({ID:0,OptionUUID:K(),ExtraID:g.ID,ExtraUUID:g.ExtraUUID,Order:((I=g.Options)==null?void 0:I.length)+1,Name:"",Description:"",Price:0,Choices:[]})},f=(g,I)=>{g.Options&&g.Options.splice(I,1)},p=g=>{if(g.Choices&&g.Choices.length>0)return g.Choices.map(I=>{const T=a.value.find(A=>A.TagUUID===I.TagUUID);if(T)return T.Title}).join(", ")};return(g,I)=>(U(),h(k,null,[t(ee,{class:"px-0"},{default:l(()=>[t(N,{label:V(q).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":I[0]||(I[0]=T=>e.value.Name=T)},null,8,["label","modelValue"]),t(N,{label:V(q).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":I[1]||(I[1]=T=>e.value.Description=T)},null,8,["label","modelValue"]),t(ge,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":I[2]||(I[2]=T=>e.value.AppliesTags=T),convention:g.convention,organisation:g.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),Rl,t(Be,{opened:m.value,"onUpdate:opened":I[3]||(I[3]=T=>m.value=T)},{default:l(()=>[(U(!0),h(k,null,H(e.value.Options,(T,A)=>(U(),h(k,{key:T.ID},[T?(U(),_(ue,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${T.Name} ${T.Price&&T.Price>0?`(${V(q).currencySymbol}${T.Price})`:""}`},{append:l(()=>[t(b,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:x=>f(e.value,A)},null,8,["onClick"]),t(b,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:x=>{o.value=!0,d.value=A}},null,8,["onClick"])]),default:l(()=>[T.Choices&&T.Choices.length>0?(U(),_(ne,{key:0},{default:l(()=>[D(" Options: "+R(p(T)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:1},8,["opened"]),t(b,{color:"primary",onClick:I[4]||(I[4]=T=>c(e.value))},{default:l(()=>[D("Add Option")]),_:1}),t(M,null,{default:l(()=>[t(C,{class:"text-right"},{default:l(()=>[t(be,{onClick:v})]),_:1})]),_:1})]),_:1}),t(Ee,{modelValue:o.value,"onUpdate:modelValue":I[7]||(I[7]=T=>o.value=T),scrollable:""},{default:l(()=>[t(Fl,{modelValue:e.value.Options[d.value],"onUpdate:modelValue":I[5]||(I[5]=T=>e.value.Options[d.value]=T),convention:g.convention,onClose:I[6]||(I[6]=T=>o.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),wl=B({__name:"EditConventionExtras",props:L({convention:{}},{modelValue:{required:!0}}),emits:L(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{const u={ID:0,ExtraUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};o.saveExtra(u).then(s=>{s&&e.value.push(s)})},i=u=>{o.deleteExtra(e.value[u].ExtraUUID).then(s=>{s&&e.value.splice(u,1)})},m=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveExtra(e.value[s])})};return(u,s)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(b,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Extras")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(b,{variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:l(()=>[t(Se,null,{default:l(()=>[(U(!0),h(k,null,H(e.value,(a,v)=>(U(),_(ke,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:c})=>[t(b,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>{V(Ye)(a,e.value),m(v,v-1)},["stop"])},null,8,["onClick"]),t(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>{V(qe)(a,e.value),m(v,v+1)},["stop"])},null,8,["onClick"]),D(" "+R(a.Name)+" ",1)]),_:2},1024),t(Ae,{class:"px-0"},{default:l(()=>[t(Ll,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Nl=z("h3",null,"Additional Purchases",-1),Ml=z("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Yl=B({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=y([]),o=J(),d=y([""]),i=y(!1),m=s=>{if(s.Choices&&s.Choices.length>0)return s.Choices.map(a=>a.Title).join(", ")},u=()=>{i.value=!1};return o==null||o.getConventionExtras(r.value.ConventionUUID||"").then(s=>{s&&(e.value=s)}),(s,a)=>(U(),h(k,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[Nl]),_:1}),t(C,{class:"text-right"},{default:l(()=>[t(b,{color:"primary",onClick:a[0]||(a[0]=v=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ml,t(Be,{opened:d.value,"onUpdate:opened":a[1]||(a[1]=v=>d.value=v)},{default:l(()=>[(U(!0),h(k,null,H(e.value,v=>(U(),_(Je,{key:v.ID,value:v.ID},{activator:l(({props:c})=>[t(ue,Te(c,{"prepend-icon":"mdi:mdi-group",title:v.Name}),null,16,["title"])]),default:l(()=>[v.Options?(U(!0),h(k,{key:0},H(v.Options,c=>(U(),_(ue,{key:c.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${c.Name} ${c.Price&&c.Price>0?`(${V(q).currencySymbol}${c.Price})`:""}`},{default:l(()=>[c.Choices&&c.Choices.length>0?(U(),_(ne,{key:0},{default:l(()=>[D(" Options: "+R(m(c)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(Ee,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=v=>i.value=v),scrollable:!0},{default:l(()=>[t(wl,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=v=>e.value=v),convention:r.value,onClose:u},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),ql=B({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:L(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=J(),o=ft(),d=G(n,"modelValue"),i=y(Z(d.value)),m=y(`${o.GetConventionLogoURL(i.value.ConventionUUID)}?${new Date().getTime()}`),u=y(),s=y(),a=vt(),v=Ft(),c=()=>{i.value=JSON.parse(JSON.stringify(d.value))},f=async()=>{var T;const I=new FormData((T=s.value)==null?void 0:T.$el);if(I.get("Image")&&I.get("Image").size>0)return I.set("ConventionUUID",i.value.ConventionUUID),await o.SaveConventionLogo(I)},p=()=>{f(),e.saveConvention(i.value).then(()=>{const I=d.value.Slug,T=i.value.Slug;d.value=i.value,I!==T&&v.push(`/dashboard/admin/${a.params.organisation.toString()}/convention/${i.value.Slug}`),r("close")})},g=()=>{m.value=URL.createObjectURL(u.value.files[0])};return(I,T)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(b,{icon:"",dark:"",onClick:T[0]||(T[0]=A=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Convention Settings")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(b,{variant:"text",onClick:c},{default:l(()=>[D(" Reset ")]),_:1}),t(b,{variant:"text",onClick:p},{default:l(()=>[D(" Save ")]),_:1})]),_:1})]),_:1}),t(Ve,null,{default:l(()=>[t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(Vt,{class:"imgLogo mx-auto",src:m.value||""},null,8,["src"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(N,{label:V(q).formLabelName,name:"Name",variant:"outlined",modelValue:i.value.Name,"onUpdate:modelValue":T[1]||(T[1]=A=>i.value.Name=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(N,{label:V(q).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:i.value.Description,"onUpdate:modelValue":T[2]||(T[2]=A=>i.value.Description=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(N,{label:V(q).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:i.value.DetailLink,"onUpdate:modelValue":T[3]||(T[3]=A=>i.value.DetailLink=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(N,{label:V(q).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:i.value.Slug,"onUpdate:modelValue":T[4]||(T[4]=A=>i.value.Slug=A)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[t(dl,{ref_key:"conventionImageForm",ref:s,enctype:"multipart/form-data"},{default:l(()=>[t(ml,{label:V(q).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:u,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:g},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const Bl=z("h3",null,"General Details",-1),zl=["href"],Gl=B({__name:"General",props:{modelValue:{required:!0}},emits:L(["refresh"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=ft(),d=w(()=>e.value.ConventionUUID?o.GetConventionLogoURL(e.value.ConventionUUID):""),i=y(!1),m=()=>{i.value=!1,r("refresh")};return(u,s)=>(U(),h(k,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[Bl]),_:1}),t(C,{class:"text-right"},{default:l(()=>[t(b,{color:"primary",onClick:s[0]||(s[0]=a=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),z("p",null,[d.value?(U(),_(Vt,{key:0,src:d.value,title:e.value.Name},null,8,["src","title"])):P("",!0)]),z("h3",null,R(e.value.Name),1),z("p",null,R(e.value.Description),1),z("p",null,[e.value.DetailLink?(U(),h("a",{key:0,href:e.value.DetailLink},"More Details",8,zl)):P("",!0)]),t(Ee,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=a=>i.value=a),scrollable:!0},{default:l(()=>[t(ql,{onClose:m,modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value=a)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),Kl=B({__name:"EditConventionInterest",props:L({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=y(Z(r.value)),o=J(),d=({callback:i})=>{o.saveInterest(e.value).then(m=>{m?(r.value=m,i&&i("Interest Saved")):i&&i("Failed to Save Interest")}).catch(()=>{i&&i("Failed to Save Interest")})};return(i,m)=>(U(),_(ee,{class:"px-0"},{default:l(()=>[t(N,{label:V(q).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":m[0]||(m[0]=u=>e.value.Name=u)},null,8,["label","modelValue"]),t(Ze,{label:V(q).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":m[1]||(m[1]=u=>e.value.Description=u)},null,8,["label","modelValue"]),P("",!0),t(ge,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":m[3]||(m[3]=u=>e.value.AppliesTags=u),convention:i.convention,organisation:i.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),t(M,null,{default:l(()=>[t(C,{class:"text-right"},{default:l(()=>[t(be,{onClick:d})]),_:1})]),_:1})]),_:1}))}}),Hl=B({__name:"EditConventionInterests",props:L({convention:{}},{modelValue:{required:!0}}),emits:L(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{const u={ID:0,InterestUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};o.saveInterest(u).then(s=>{s&&e.value.push(s)})},i=u=>{o.deleteInterest(e.value[u].InterestUUID).then(s=>{s&&e.value.splice(u,1)})},m=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveInterest(e.value[s])})};return(u,s)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(b,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Interests")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(b,{variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:l(()=>[t(Se,null,{default:l(()=>[(U(!0),h(k,null,H(e.value,(a,v)=>(U(),_(ke,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:c})=>[t(be,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>{V(Ye)(a,e.value),m(v,v-1)},["stop"])},null,8,["onClick"]),t(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>{V(qe)(a,e.value),m(v,v+1)},["stop"])},null,8,["onClick"]),D(" "+R(a.Name)+" ",1)]),_:2},1024),t(Ae,{class:"px-0"},{default:l(()=>[t(Kl,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),jl=z("h3",null,"Interests",-1),Xl=z("p",null,"Attendees can tag themselves for particular things.",-1),Wl=B({__name:"Interests",props:{modelValue:{required:!0}},emits:L(["refresh"],["update:modelValue"]),setup(n){const r=G(n,"modelValue"),e=J(),o=y([]);e.getConventionInterests(r.value.ConventionUUID).then(m=>{we(m),o.value=m});const d=y([""]),i=y(!1);return(m,u)=>(U(),h(k,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[jl]),_:1}),t(C,{class:"text-right"},{default:l(()=>[t(b,{color:"primary",onClick:u[0]||(u[0]=s=>i.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Xl,t(Be,{opened:d.value,"onUpdate:opened":u[1]||(u[1]=s=>d.value=s)},{default:l(()=>[(U(!0),h(k,null,H(o.value,s=>(U(),_(ue,{key:s.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${s.Name} ${s.Price&&s.Price>0?`(${V(q).currencySymbol}${s.Price})`:""}`},{default:l(()=>[s.Description?(U(),_(ne,{key:0},{default:l(()=>[D(R(s.Description),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),t(Ee,{modelValue:i.value,"onUpdate:modelValue":u[4]||(u[4]=s=>i.value=s),scrollable:!0},{default:l(()=>[t(Hl,{onClose:u[2]||(u[2]=s=>i.value=!1),convention:r.value,modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=s=>o.value=s)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),$e=B({__name:"SelectTickets",props:L({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=d=>d.Type===O.TICKET_TYPE_GROUP?"mdi:mdi-group":d.Type===O.TICKET_TYPE_TICKET?d.RequiresAccommodation?"mdi:mdi-home":d.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":d.Type===O.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":d.Type===O.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",o=w(()=>n.tickets.map(d=>({title:d.Name,value:r.value.find(i=>i&&i.TicketUUID===d.TicketUUID)||d,props:{appendIcon:e(d)}})));return(d,i)=>(U(),h("div",null,[t(vl,{label:d.label,variant:d.variant||"filled",items:o.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=m=>r.value=m),hint:d.hint,chips:d.chips,clearable:d.clearable,multiple:"","persistent-hint":d.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),Jl=z("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),Zl=B({__name:"EditConventionTicket",props:L({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=y(Z(r.value)),o=J(),d=w(()=>n.tickets.filter(a=>a.Type===O.TICKET_TYPE_TICKET)),i=w(()=>n.tickets.filter(a=>a.Type===O.TICKET_TYPE_ADD_ON)),m=w(()=>n.tickets.filter(a=>a.Type===O.TICKET_TYPE_TICKET_COMPONENT)),u=a=>n.accommodation.filter(v=>v.Costs.find(c=>c.DateStart===a.DateStart&&c.DateEnd===a.DateEnd)),s=({callback:a})=>{o.saveTicket(e.value).then(v=>{v?(e.value.ID=v.ID,e.value.TicketUUID=v.TicketUUID,r.value=e.value,a&&a("Ticket Saved")):a&&a("Failed to Save Ticket")}).catch(()=>{a&&a("Failed to Save Ticket")})};return(a,v)=>(U(),_(ee,{class:"px-0",fluid:""},{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12"},{default:l(()=>[t(se,{label:"Ticket Type",variant:"outlined",modelValue:e.value.Type,"onUpdate:modelValue":v[0]||(v[0]=c=>e.value.Type=c),items:V(cl),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(N,{label:V(q).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":v[1]||(v[1]=c=>e.value.Name=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(N,{label:V(q).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":v[2]||(v[2]=c=>e.value.Description=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e.value.Type!==V(O).TICKET_TYPE_GROUP?(U(),h(k,{key:0},[t(C,{cols:"12"},{default:l(()=>[t(N,{label:V(q).formLabelDateStart,type:"date",variant:"outlined",modelValue:e.value.DateStart,"onUpdate:modelValue":v[3]||(v[3]=c=>e.value.DateStart=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(N,{label:V(q).formLabelDateEnd,type:"date",variant:"outlined",modelValue:e.value.DateEnd,"onUpdate:modelValue":v[4]||(v[4]=c=>e.value.DateEnd=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(N,{label:V(q).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":V(q).currencyIcon,modelValue:e.value.Price,"onUpdate:modelValue":v[5]||(v[5]=c=>e.value.Price=c),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(U(),_(C,{key:1,cols:"12"},{default:l(()=>[t($e,{label:"Tickets",variant:"outlined",tickets:d.value,modelValue:e.value.Tickets,"onUpdate:modelValue":v[6]||(v[6]=c=>e.value.Tickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),t(C,{cols:"12"},{default:l(()=>[t(ge,{label:"Applied Tags",variant:"outlined",modelValue:e.value.AppliesTags,"onUpdate:modelValue":v[7]||(v[7]=c=>e.value.AppliesTags=c),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(ge,{label:"Required Tags",variant:"outlined",modelValue:e.value.RequiredTags,"onUpdate:modelValue":v[8]||(v[8]=c=>e.value.RequiredTags=c),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e.value.Type===V(O).TICKET_TYPE_TICKET?(U(),h(k,{key:2},[t(C,{cols:"12"},{default:l(()=>[t(N,{label:"Components Required",type:"number",variant:"outlined",modelValue:e.value.ComponentsRequired,"onUpdate:modelValue":v[9]||(v[9]=c=>e.value.ComponentsRequired=c),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t($e,{label:"Components",variant:"outlined",tickets:m.value,modelValue:e.value.TicketComponents,"onUpdate:modelValue":v[10]||(v[10]=c=>e.value.TicketComponents=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t($e,{label:"Addons",variant:"outlined",tickets:i.value,modelValue:e.value.AddonTickets,"onUpdate:modelValue":v[11]||(v[11]=c=>e.value.AddonTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):P("",!0),t(C,{cols:"12"},{default:l(()=>[t($e,{label:"Disables Tickets",variant:"outlined",tickets:a.tickets,modelValue:e.value.DisablesTickets,"onUpdate:modelValue":v[12]||(v[12]=c=>e.value.DisablesTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),u(e.value).length?(U(),_(M,{key:0,class:"align-center",dense:!0},{default:l(()=>[t(C,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:l(()=>[Jl]),_:1}),t(C,{class:"flex-grow-1"},{default:l(()=>[t(fl,null,{default:l(()=>[(U(!0),h(k,null,H(u(e.value),c=>(U(),_(pl,{key:c.ID,title:"Automatically calculated",disabled:!0},{default:l(()=>[D(R(c.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):P("",!0),t(M,null,{default:l(()=>[t(C,{class:"text-right"},{default:l(()=>[t(be,{onClick:s})]),_:1})]),_:1})]),_:1}))}}),Ql={class:"pr-2"},en={class:"mb-2"},tn={key:0,class:"text-grey-darken-1 font-italic"},ln={key:1,class:"text-red"},nn={key:0,class:"text-grey-darken-1 font-italic"},on={key:1,class:"text-red"},an={key:0,class:"text-grey-darken-1 font-italic"},sn={key:1,class:"text-red"},un={class:"text-grey-darken-1"},rn=B({__name:"EditConventionTickets",props:L({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:L(["close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=J(),d=()=>{e.value.push({ID:0,TicketUUID:K(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:e.value.length+1,Name:"New Ticket",Type:O.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},i=u=>{o.deleteTicket(e.value[u].TicketUUID).then(s=>{s&&e.value.splice(u,1)})},m=u=>u.Type===O.TICKET_TYPE_GROUP?"mdi:mdi-group":u.Type===O.TICKET_TYPE_TICKET?u.RequiresAccommodation?"mdi:mdi-home":u.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":u.Type===O.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":u.Type===O.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(u,s)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[t(b,{icon:"",dark:"",onClick:s[0]||(s[0]=a=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:l(()=>[D("Edit Tickets")]),_:1}),t(ae),t(De,null,{default:l(()=>[t(b,{variant:"text",onClick:d},{default:l(()=>[D(" Add Ticket ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:l(()=>[t(Se,null,{default:l(()=>[(U(!0),h(k,null,H(e.value,(a,v)=>(U(),_(ke,{key:a.ID,class:"mt-0"},{default:l(()=>[t(Pe,{class:"py-2"},{actions:l(({expanded:c})=>[t(be,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>i(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(c=>V(Ye)(a,e.value),["stop"])},null,8,["onClick"]),t(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(c=>V(qe)(a,e.value),["stop"])},null,8,["onClick"]),z("div",Ql,[t(W,{icon:m(a)},null,8,["icon"])]),z("div",null,[z("p",en,[D(R(a.Name)+" ",1),a.Type===V(O).TICKET_TYPE_TICKET?(U(),h(k,{key:0},[e.value.find(c=>c.Type===V(O).TICKET_TYPE_GROUP&&c.Tickets.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),h("span",tn," ("+R(e.value.filter(c=>c.Type===V(O).TICKET_TYPE_GROUP&&c.Tickets.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),h("span",ln," (Ticket does not belong to any categories.) "))],64)):P("",!0),a.Type===V(O).TICKET_TYPE_ADD_ON?(U(),h(k,{key:1},[e.value.find(c=>c.Type===V(O).TICKET_TYPE_TICKET&&c.AddonTickets.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),h("span",nn," ("+R(e.value.filter(c=>c.Type===V(O).TICKET_TYPE_TICKET&&c.AddonTickets.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),h("span",on," (Ticket addon must be associated to at least one ticket.) "))],64)):P("",!0),a.Type===V(O).TICKET_TYPE_TICKET_COMPONENT?(U(),h(k,{key:2},[e.value.find(c=>c.Type===V(O).TICKET_TYPE_TICKET&&c.TicketComponents.find(f=>f&&f.TicketUUID===a.TicketUUID))?(U(),h("span",an," ("+R(e.value.filter(c=>c.Type===V(O).TICKET_TYPE_TICKET&&c.TicketComponents.find(f=>f&&f.TicketUUID===a.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(U(),h("span",sn," (Component has not been assigned to any tickets.) "))],64)):P("",!0)]),z("p",un,[a.Type===V(O).TICKET_TYPE_GROUP?(U(),h(k,{key:0},[D("Category")],64)):a.Type===V(O).TICKET_TYPE_TICKET?(U(),h(k,{key:1},[D(" Ticket "),a.ComponentsRequired>0?(U(),h(k,{key:0},[D(" ("+R(a.ComponentsRequired)+" component"+R(a.ComponentsRequired>1?"s":"")+" required) ",1)],64)):P("",!0)],64)):P("",!0),a.Type===V(O).TICKET_TYPE_TICKET_COMPONENT?(U(),h(k,{key:2},[D("Component")],64)):P("",!0),a.Type===V(O).TICKET_TYPE_ADD_ON?(U(),h(k,{key:3},[D("Addon")],64)):P("",!0)])])]),_:2},1024),t(Ae,{class:"px-0"},{default:l(()=>[t(Zl,{accommodation:u.accommodation,convention:u.convention,tickets:e.value,modelValue:e.value[v],"onUpdate:modelValue":c=>e.value[v]=c},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),dn=z("h3",null,"Tickets",-1),mn=z("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),cn=B({__name:"Tickets",props:{modelValue:{required:!0}},emits:L(["refresh"],["update:modelValue"]),setup(n){var c;const r=G(n,"modelValue"),e=J(),o=y([]),d=y([]);e.getConventionTickets(((c=r.value)==null?void 0:c.ConventionUUID)||"").then(f=>{we(f),o.value=f});const i=y([""]),m=y(!1),u=f=>f.AddonTickets&&f.AddonTickets.map(p=>o.value&&o.value.find(g=>g.ID===p.ID)),s=f=>f.TicketComponents&&f.TicketComponents.map(p=>o.value&&o.value.find(g=>g.ID===p.ID)),a=f=>"",v=f=>d.value.filter(p=>p.Costs.find(g=>g.DateStart===f.DateStart&&g.DateEnd===f.DateEnd)).map(p=>p.Name).join(", ");return(f,p)=>(U(),h(k,null,[t(ee,{fluid:!0,class:"px-0"},{default:l(()=>[t(M,null,{default:l(()=>[t(C,null,{default:l(()=>[dn]),_:1}),t(C,{class:"text-right"},{default:l(()=>[t(b,{color:"primary",onClick:p[0]||(p[0]=g=>m.value=!0)},{default:l(()=>[D("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),mn,t(Be,{opened:i.value,"onUpdate:opened":p[1]||(p[1]=g=>i.value=g)},{default:l(()=>[(U(!0),h(k,null,H(o.value.filter(g=>g.Type===V(O).TICKET_TYPE_GROUP),g=>(U(),_(Je,{key:g.ID,value:g.ID},{activator:l(({props:I})=>[t(ue,Te(I,{"prepend-icon":"mdi:mdi-group",title:g.Name}),null,16,["title"])]),default:l(()=>[(U(!0),h(k,null,H(o.value.filter(I=>g.Tickets.find(T=>T&&I&&T.TicketUUID===I.TicketUUID)),I=>(U(),h(k,{key:I.ID},[I.AddonTickets&&I.AddonTickets.length?(U(),_(Je,{key:0,value:I.ID},{activator:l(({props:T})=>[t(ue,Te(T,{"prepend-icon":I.RequiresAccommodation?"mdi:mdi-home":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${I.Name} ${I.Price>0?`(${V(q).currencySymbol}${I.Price})`:""}`}),{default:l(()=>[I.ComponentsRequired>0?(U(),_(ne,{key:0},{default:l(()=>[D(" Options: "+R(s(I).map(A=>A&&A.Name).join(", ")),1)]),_:2},1024)):P("",!0),I.RequiresAccommodation&&v(I)?(U(),_(ne,{key:1},{default:l(()=>[D(" Accommodation: "+R(v(I)),1)]),_:2},1024)):P("",!0)]),_:2},1040,["prepend-icon","title"])]),default:l(()=>[(U(!0),h(k,null,H(u(I),T=>(U(),h(k,{key:T},[T?(U(),_(ue,{key:0,title:`${T.Name} ${T.Price>0?`(${V(q).currencySymbol}${T.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:l(()=>[T.RequiredTags&&T.RequiredTags.length>0?(U(),_(ne,{key:0},{default:l(()=>[D(" Required Tags: "+R(T.RequiredTags.join(", ")),1)]),_:2},1024)):P("",!0),T.RequiredGroupMemberships&&T.RequiredGroupMemberships.length>0?(U(),_(ne,{key:1},{default:l(()=>[D(" Required Groups: "+R(a(T.RequiredGroupMemberships)),1)]),_:2},1024)):P("",!0),v(T)?(U(),_(ne,{key:2},{default:l(()=>[D(" Accommodation: "+R(v(T)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:2},1032,["value"])):(U(),_(ue,{key:1,"prepend-icon":I.RequiresAccommodation?"mdi:mdi-home":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${I.Name} ${I.Price>0?`(${V(q).currencySymbol}${I.Price})`:""}`},{default:l(()=>[I.ComponentsRequired>0?(U(),_(ne,{key:0},{default:l(()=>[D(" Options: "+R(s(I).map(T=>T&&T.Name).join(", ")),1)]),_:2},1024)):P("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(Ee,{modelValue:m.value,"onUpdate:modelValue":p[4]||(p[4]=g=>m.value=g),scrollable:!0},{default:l(()=>[t(rn,{onClose:p[2]||(p[2]=g=>m.value=!1),modelValue:o.value,"onUpdate:modelValue":p[3]||(p[3]=g=>o.value=g),accommodation:d.value,convention:r.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),vn=(n,r)=>{const e=Ne(n,r),o=Ne(n,r,void 0,void 0,"item"),d=y(Z(o.value));return de(o,()=>{d.value=Z(o.value)}),{state:e,model:o,close:()=>{e.value=!1},reset:()=>{o.value=Z(d.value)},save:()=>{r("save")}}},fn=B({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(n,{emit:r}){const e=n,{state:o,model:d,close:i,reset:m,save:u}=vn(e,r);return(s,a)=>(U(),_(Qe,{modelValue:V(o),"onUpdate:modelValue":a[0]||(a[0]=v=>Fe(o)?o.value=v:null),onReset:V(m),onSave:V(u),title:s.title,color:"primary","card-class":s.cardClass},{toolbarButtons:l(()=>[Ce(s.$slots,"toolbarButtons")]),actions:l(()=>[t(b,{color:"blue-darken-1",variant:"text",onClick:V(i)},{default:l(()=>[D(" Cancel ")]),_:1},8,["onClick"]),t(b,{color:"blue-darken-1",variant:"text",onClick:V(m)},{default:l(()=>[D(" Reset ")]),_:1},8,["onClick"]),t(ae),t(b,{color:"blue-darken-1",variant:"text",onClick:V(u)},{default:l(()=>[D(" Save ")]),_:1},8,["onClick"])]),default:l(()=>[Ce(s.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Me=B({__name:"EditOrderedItems",props:L({closeable:{type:Boolean,default:!1},newItem:{type:[Function,Boolean]},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:L(["add","save","close"],["update:modelValue"]),setup(n,{emit:r}){const e=G(n,"modelValue"),o=()=>{r("save"),r("close")},d=()=>{if(n.newItem){const a=n.newItem();a.Order=e.value.length+1,e.value.push(a)}else e.value.push({Order:e.value.length+1})},i=a=>{e.value.splice(a,1)},m=a=>{qe(a,e.value)},u=a=>{Ye(a,e.value)},s=a=>n.labelParent&&a[n.labelParent]?a[n.labelParent][n.label]:a[n.label];return e.value.find(a=>a.Order===0)&&we(e.value),e.value.find(a=>e.value.find(v=>v.Order===a.Order&&v!==a))&&we(e.value),(a,v)=>(U(),_(ve,null,{default:l(()=>[t(oe,{dark:"",color:"primary"},{default:l(()=>[a.closeable?(U(),_(b,{key:0,icon:"",dark:"",onClick:v[0]||(v[0]=c=>r("close"))},{default:l(()=>[t(W,null,{default:l(()=>[D("mdi:mdi-close")]),_:1})]),_:1})):P("",!0),t(me,null,{default:l(()=>[D(R(a.title),1)]),_:1}),t(ae),t(De,null,{default:l(()=>[a.newItem!==void 0?(U(),_(b,{key:0,variant:"text",onClick:d},{default:l(()=>[D(" Add ")]),_:1})):P("",!0),a.showSave?(U(),_(b,{key:1,variant:"text",onClick:o},{default:l(()=>[D(" Save ")]),_:1})):P("",!0)]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:l(()=>[t(Se,null,{default:l(()=>[(U(!0),h(k,null,H(e.value,(c,f)=>(U(),_(ke,{key:c.Order,class:"mt-0"},{default:l(()=>[t(Pe,null,{actions:l(({expanded:p})=>[t(b,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:g=>i(f)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:p?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:l(()=>[t(b,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:re(p=>u(c),["stop"])},null,8,["onClick"]),t(b,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:re(p=>m(c),["stop"])},null,8,["onClick"]),Ce(a.$slots,`${a.slotNamePrefix}_${f}_title`,{},()=>[D(R(s(c)),1)])]),_:2},1024),t(Ae,{class:"px-0"},{default:l(()=>[Ce(a.$slots,`${a.slotNamePrefix}_${f}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),pn={class:"pa-0 border-0 ma-0"},Un=z("legend",{class:"mb-2"},"Field Settings",-1),In={class:"pa-0 border-0 ma-0"},Tn=z("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),gn=B({__name:"EditFormField",props:L({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=J(),o=y([]),d=y([]),i=y(""),m=u=>{var s;r.value.Field=(s=d.value.find(a=>a.value===u))==null?void 0:s.field};return e.getConventionFields(n.convention.ConventionUUID).then(u=>{u&&(o.value=u,d.value=u.map(s=>({title:`${s.Label} (${(Zt.find(a=>a.value===s.Type)||{title:""}).title})`,value:s.FieldUUID,field:s})),m(r.value.FieldUUID))}),(u,s)=>(U(),_(M,null,{default:l(()=>[t(C,{cols:"12",md:"6"},{default:l(()=>[z("fieldset",pn,[Un,t(M,null,{default:l(()=>[t(C,{cols:"12"},{default:l(()=>[t(se,{modelValue:r.value.FieldUUID,"onUpdate:modelValue":[s[0]||(s[0]=a=>r.value.FieldUUID=a),m],items:d.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(C,{cols:"6",sm:"4"},{default:l(()=>[t(N,{modelValue:r.value.MinLength,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value.MinLength=a),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"6",sm:"4"},{default:l(()=>[t(N,{modelValue:r.value.MaxLength,"onUpdate:modelValue":s[2]||(s[2]=a=>r.value.MaxLength=a),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"4"},{default:l(()=>[t(We,{modelValue:r.value.Required,"onUpdate:modelValue":s[3]||(s[3]=a=>r.value.Required=a),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),r.value.FieldUUID&&r.value.Field?(U(),_(C,{key:0,cols:"12",md:"6"},{default:l(()=>[z("fieldset",In,[Tn,r.value.Field?(U(),_(Qt,{key:0,field:r.value.Field,"persistent-hint":!0,required:r.value.Required,convention:u.convention,modelValue:i.value,"onUpdate:modelValue":s[4]||(s[4]=a=>i.value=a)},null,8,["field","required","convention","modelValue"])):P("",!0)])]),_:1})):P("",!0)]),_:1}))}}),Vn={class:"d-none d-sm-block"},Dn=B({__name:"EditFormSectionFields",props:L({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=()=>{var o;return{ID:0,SectionFieldUUID:K(),SectionID:r.value.ID,SectionUUID:r.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((o=r.value.Fields)==null?void 0:o.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(o,d)=>r.value.Fields!==void 0?(U(),_(Me,{key:0,modelValue:r.value.Fields,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value.Fields=i),closeable:!1,title:"Fields","new-item":e,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},Le({_:2},[H(r.value.Fields,(i,m)=>({name:`field_${m}_title`,fn:l(()=>[i.Field?(U(),h(k,{key:0},[D(R(i.Field.Label)+" ("+R(i.Field.Name)+") ",1),z("template",Vn,[D(" Â ["+R(i.Field.Type)+"] ",1)])],64)):(U(),h(k,{key:1},[D("New Field")],64))])})),H(r.value.Fields,(i,m)=>({name:`field_${m}`,fn:l(()=>[t(gn,{modelValue:r.value.Fields[m],"onUpdate:modelValue":u=>r.value.Fields[m]=u,convention:o.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):P("",!0)}}),_n=B({__name:"EditFormSections",props:L({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=()=>{const o={ID:0,SectionUUID:K(),FormID:r.value.ID,FormUUID:r.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:K(),SectionID:0,SectionUUID:"",Edit:!0}};return o.State.SectionID=o.ID,o.State.SectionUUID=o.SectionUUID,o};return(o,d)=>(U(),_(Me,{modelValue:r.value.Sections,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value.Sections=i),"new-item":e,closeable:!1,title:"Sections","slot-name-prefix":"section"},Le({_:2},[H(r.value.Sections,(i,m)=>({name:`section_${m}`,fn:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:i.Name,"onUpdate:modelValue":u=>i.Name=u,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:i.Heading,"onUpdate:modelValue":u=>i.Heading=u,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(M,null,{default:l(()=>[t(C,{cols:"12"},{default:l(()=>[t(Ze,{modelValue:i.Description,"onUpdate:modelValue":u=>i.Description=u,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),i.Fields?(U(),_(Dn,{key:0,modelValue:r.value.Sections[m],"onUpdate:modelValue":u=>r.value.Sections[m]=u,convention:o.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):P("",!0)])}))]),1032,["modelValue"]))}}),Cn=B({__name:"FormRendererPopup",props:L({convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:L(["update:form"],["update:modelValue"]),setup(n,{emit:r}){const e=n,{convention:o,title:d="",cardClass:i=""}=e,m=G(n,"modelValue"),u=Ne(e,r,void 0,void 0,"form"),s=y(Z(u.value));de(u,()=>{s.value=Z(u.value)});const a=()=>{m.value=!1};return(v,c)=>(U(),_(Qe,{modelValue:m.value,"onUpdate:modelValue":c[1]||(c[1]=f=>m.value=f),title:V(d),color:"primary","card-class":V(i)},{toolbarButtons:l(()=>[Ce(v.$slots,"toolbarButtons")]),actions:l(()=>[t(b,{color:"blue-darken-1",variant:"text",onClick:a},{default:l(()=>[D(" Close ")]),_:1})]),default:l(()=>[t(Vl,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f),convention:V(o),preview:v.preview},null,8,["modelValue","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),yn=z("template",{class:"d-none d-sm-inline"},[D("Preview")],-1),hn=B({__name:"EditFormDialog",props:L({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:L(["update:form"],["update:modelValue"]),setup(n,{emit:r}){const e=n,{convention:o}=e,d=G(n,"modelValue"),i=J(),m=Ne(e,r,void 0,void 0,"form"),u=y(!1),s=y(Z(m.value));de(m,()=>{s.value=Z(m.value)});const a=()=>{i.saveForm(s.value).then(c=>{c&&(m.value=c,d.value=!1)})},v=()=>{u.value=!0};return(c,f)=>(U(),_(fn,{modelValue:d.value,"onUpdate:modelValue":f[11]||(f[11]=p=>d.value=p),item:s.value,"onUpdate:item":f[12]||(f[12]=p=>s.value=p),onSave:a,"card-class":"pa-0"},{toolbarButtons:l(()=>[t(Dl,null,{default:l(()=>[t(b,{"prepend-icon":"mdi:mdi-developer-board",onClick:v},{default:l(()=>[yn]),_:1})]),_:1})]),default:l(()=>[t(Se,null,{default:l(()=>[t(ke,{class:"mt-0"},{default:l(()=>[t(Pe,null,{default:l(()=>[D("General Settings")]),_:1}),t(Ae,null,{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12"},{default:l(()=>[t(ee,{class:"pa-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.Name,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value.Name=p),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.Heading,"onUpdate:modelValue":f[1]||(f[1]=p=>s.value.Heading=p),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12"},{default:l(()=>[t(Ze,{modelValue:s.value.Description,"onUpdate:modelValue":f[2]||(f[2]=p=>s.value.Description=p),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:s.value.Type,"onUpdate:modelValue":f[3]||(f[3]=p=>s.value.Type=p),label:"Type",variant:"outlined",items:V($l),"hide-details":""},null,8,["modelValue","items"])]),_:1}),t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:s.value.State.Stage,"onUpdate:modelValue":f[4]||(f[4]=p=>s.value.State.Stage=p),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),t(C,{cols:"6"},{default:l(()=>[t(We,{modelValue:s.value.State.New,"onUpdate:modelValue":f[5]||(f[5]=p=>s.value.State.New=p),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),t(C,{cols:"6"},{default:l(()=>[t(We,{modelValue:s.value.State.Edit,"onUpdate:modelValue":f[6]||(f[6]=p=>s.value.State.Edit=p),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),t(M,null,{default:l(()=>[t(C,{cols:"12"},{default:l(()=>[t(ge,{label:"Required Tags",variant:"outlined",modelValue:s.value.RequiredTags,"onUpdate:modelValue":f[7]||(f[7]=p=>s.value.RequiredTags=p),convention:V(o),organisation:V(o).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.value?(U(),_(_n,{key:0,modelValue:s.value,"onUpdate:modelValue":f[8]||(f[8]=p=>s.value=p),convention:V(o),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):P("",!0),u.value?(U(),_(Cn,{key:1,modelValue:u.value,"onUpdate:modelValue":f[9]||(f[9]=p=>u.value=p),form:s.value,"onUpdate:form":f[10]||(f[10]=p=>s.value=p),convention:V(o),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):P("",!0)]),_:1},8,["modelValue","item"]))}}),bn=(n,r)=>{const e=y(!1),o=y(!1),d=y(n),i=y(-1),m=y(r),u=y(r),s=w(()=>i.value===-1?"New Form":"Edit Form"),a=()=>{d.value=n},v=T=>{i.value=d.value.indexOf(T),m.value=Object.assign({},T),e.value=!0},c=T=>{i.value=d.value.indexOf(T),m.value=Object.assign({},T),o.value=!0},f=()=>{o.value=!1,je(()=>{m.value=Object.assign({},u.value),i.value=-1}).then()},p=()=>{d.value.splice(i.value,1),f()},g=()=>{e.value=!1,je(()=>{m.value=Object.assign({},u.value),i.value=-1}).then()},I=()=>{i.value>-1?Object.assign(d.value[i.value],m.value):d.value.push(m.value),g()};return de(e,T=>{T||g()}),de(o,T=>{T||f()}),{collection:d,defaultItem:u,dialog:e,dialogDelete:o,editedItem:m,formTitle:s,reset:a,editItem:v,deleteItem:c,deleteItemConfirm:p,close:g,save:I}},En=B({__name:"FormEditor",props:{modelValue:{required:!0}},emits:L(["refresh"],["update:modelValue"]),setup(n){const r=G(n,"modelValue"),e=J(),o=y([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),d=y([]),i=y([]);e.getConventionFields(r.value.ConventionUUID).then(x=>{d.value=x}),e.getConventionForms(r.value.ConventionUUID).then(x=>{i.value=x});const m={ID:0,FormUUID:K(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,ParentID:0,ParentUUID:st,Name:"",Heading:"",Description:"",Type:_t.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:K(),FormID:0,FormUUID:st,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};m.State.FormUUID=m.FormUUID;const{collection:u,defaultItem:s,dialog:a,dialogDelete:v,editedItem:c,formTitle:f,editItem:p,deleteItem:g,deleteItemConfirm:I,save:T}=bn(i,m);u.value.forEach(x=>{x.Sections.forEach($=>{var E;(E=$.Fields)==null||E.forEach(Y=>{Y.Field=d.value.find(X=>X.ID===Y.FieldID)})})});const A=x=>{e.deleteForm(x.FormUUID).then($=>{$&&g(x)})};return(x,$)=>(U(),_(V(Dt),{headers:o.value,items:V(u),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:l(()=>[t(oe,{color:"primary"},{default:l(()=>[t(me,null,{default:l(()=>[D("Form Editor")]),_:1}),t(gt,{class:"mx-4",inset:!0,vertical:!0}),t(ae),t(b,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:$[0]||($[0]=E=>{c.value=Object.assign({},V(s)),a.value=!0})},{default:l(()=>[D(" New Item ")]),_:1}),t(Tl,{modelValue:V(v),"onUpdate:modelValue":$[1]||($[1]=E=>Fe(v)?v.value=E:null),onDelete:V(I)},null,8,["modelValue","onDelete"])]),_:1}),V(a)?(U(),_(hn,{key:0,modelValue:V(a),"onUpdate:modelValue":$[2]||($[2]=E=>Fe(a)?a.value=E:null),form:V(c),"onUpdate:form":[$[3]||($[3]=E=>Fe(c)?c.value=E:null),V(T)],convention:r.value},null,8,["modelValue","form","onUpdate:form","convention"])):P("",!0)]),"item.actions":l(({item:E})=>[t(W,{size:"small",class:"me-2",onClick:Y=>V(p)(E.raw)},{default:l(()=>[D(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(W,{size:"small",onClick:Y=>A(E.raw)},{default:l(()=>[D(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}});var Ct=(n=>(n.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",n.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",n))(Ct||{});const Sn=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var yt=(n=>(n.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",n.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",n.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",n))(yt||{});const kn=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}],Pn=[{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}],An=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],xn=B({__name:"EditAdminLayout",props:L({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=y(Z(n.layout)),o=y([]),d=J(),i=()=>{},m=()=>({ID:0,LayoutPanelUUID:K(),AdminLayoutID:e.value.ID,AdminLayoutUUID:e.value.AdminLayoutUUID,Name:"",Order:e.value.Panels.length+1,Items:[]}),u=a=>()=>({ID:0,LayoutItemUUID:K(),LayoutPanelID:a.ID,LayoutPanelUUID:a.LayoutPanelUUID,Label:"",SourceType:yt.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:a.Items.length+1}),s=a=>{const v=o.value.find(c=>c.value===a.SectionFieldUUID);v&&(a.SectionFieldID=v.object.ID,a.SectionField=v.object)};return d.getConventionForms(n.layout.ConventionUUID).then(a=>{a.forEach(v=>v.Sections.forEach(c=>c.Fields&&o.value.push(...c.Fields.map(f=>{var g;return{title:`${v.Name} - ${c.Name} - ${(g=f.Field)==null?void 0:g.Name}`,value:f.SectionFieldUUID,object:f}})))),o.value.sort(el("title"))}),(a,v)=>(U(),_(Qe,{modelValue:r.value,"onUpdate:modelValue":v[3]||(v[3]=c=>r.value=c),onSave:i,title:a.title,color:"primary"},{default:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:e.value.Name,"onUpdate:modelValue":v[0]||(v[0]=c=>e.value.Name=c),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:e.value.Type,"onUpdate:modelValue":v[1]||(v[1]=c=>e.value.Type=c),label:"Layout Type",items:V(Sn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(Me,{modelValue:e.value.Panels,"onUpdate:modelValue":v[2]||(v[2]=c=>e.value.Panels=c),"new-item":m,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Le({_:2},[H(e.value.Panels,(c,f)=>({name:`panel_${f}`,fn:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:c.Name,"onUpdate:modelValue":p=>c.Name=p,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Me,{modelValue:c.Items,"onUpdate:modelValue":p=>c.Items=p,"new-item":u(c),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Le({_:2},[H(c.Items,(p,g)=>({name:`item_${g}`,fn:l(()=>[t(ee,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(N,{modelValue:p.Label,"onUpdate:modelValue":I=>p.Label=I,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(M,null,{default:l(()=>[t(C,{cols:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:p.SourceType,"onUpdate:modelValue":I=>p.SourceType=I,label:"Source Type",items:V(kn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(C,{cols:"12",sm:"6"},{default:l(()=>[p.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(U(),_(se,{key:0,modelValue:p.SectionFieldUUID,"onUpdate:modelValue":I=>p.SectionFieldUUID=I,label:"Form Data",items:o.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:I=>s(p)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):p.SourceType==="LAYOUT_ITEM_SOURCE_META"?(U(),_(se,{key:1,modelValue:p.MetaField,"onUpdate:modelValue":I=>p.MetaField=I,label:"Miscellaneous Data",items:V(Pn),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):p.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(U(),_(se,{key:2,modelValue:p.UserField,"onUpdate:modelValue":I=>p.UserField=I,label:"User Profile Data",items:V(An),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):P("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),On=B({__name:"RegList",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(n){const r=G(n,"modelValue"),e=J(),o=Re.getInstance(),d=y({ID:0,AdminLayoutUUID:"",ConventionID:0,ConventionUUID:"",Name:"",Type:Ct.ADMIN_LAYOUT_PANELS,Panels:[]}),i=y([]),m=y([]),u=y([]),s=y(!1);return(async()=>{const v=await o.getConventionAdminLayout(r.value.ConventionUUID,"Registration Table");if(!v)return;const c=await e.getConventionSubmissions(r.value.ConventionUUID);if(!c)return;const f=await e.getConventionForms(r.value.ConventionUUID);f&&(d.value=v,m.value=c,i.value=f,d.value.Panels.forEach(p=>{p.Items.forEach(g=>{g.SectionField==null&&i.value.find(I=>{I.Sections.find(T=>{if(T.Fields){const A=T.Fields.find(x=>x.SectionFieldUUID===g.SectionFieldUUID);if(A)return g.SectionField=A,!0}})})})}),d.value.Panels.length>0&&d.value.Panels.forEach(p=>{const g={name:p.Name,headers:[],items:[]};g.headers=d.value.Panels[0].Items.map(I=>{var T,A;return{key:I.LayoutItemUUID,title:I.Label||((A=(T=I.SectionField)==null?void 0:T.Field)==null?void 0:A.Label)||"",align:I.Align==="end"?"end":"start",sortable:!0}}),g.items=m.value.map(I=>{const T={};return g.headers.forEach(A=>{var $;const x=d.value.Panels[0].Items.find(E=>E.LayoutItemUUID===A.key);x&&x.SectionField&&(T[x.LayoutItemUUID]=(($=I.Data.find(E=>E.SectionFieldUUID===x.SectionFieldUUID))==null?void 0:$.Data)||"")}),T}),u.value.push(g)}))})(),(v,c)=>(U(),_(sl,null,{default:l(()=>[t(oe,{color:"primary"},{default:l(()=>[t(me,null,{default:l(()=>[D("Registration Manager")]),_:1}),t(gt,{class:"mx-4",inset:!0,vertical:!0}),t(ae),t(b,{icon:"mdi:mdi-cog-outline",onClick:c[0]||(c[0]=f=>s.value=!0)})]),_:1}),(U(!0),h(k,null,H(u.value,f=>(U(),h(k,{key:f},[D(R(f.name)+" ",1),t(V(Dt),{headers:f.headers,items:f.items,"item-value":"LayoutItemUUID"},{"item.actions":l(({item:p})=>[t(W,{size:"small",class:"me-2"},{default:l(()=>[D(" mdi:mdi-pencil ")]),_:1})]),_:2},1032,["headers","items"])],64))),128)),s.value?(U(),_(xn,{key:0,title:"Edit Layout",modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=f=>s.value=f),layout:d.value},null,8,["modelValue","layout"])):P("",!0)]),_:1}))}});const ht=Symbol.for("vuetify:v-tabs"),$n=ye({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Rt(tl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),bt=he()({name:"VTab",props:$n(),setup(n,r){let{slots:e,attrs:o}=r;const{textColorClasses:d,textColorStyles:i}=_l(n,"sliderColor"),m=w(()=>n.direction==="horizontal"),u=j(!1),s=y(),a=y();function v(c){var p,g;let{value:f}=c;if(u.value=f,f){const I=(g=(p=s.value)==null?void 0:p.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),T=a.value;if(!I||!T)return;const A=getComputedStyle(I).color,x=I.getBoundingClientRect(),$=T.getBoundingClientRect(),E=m.value?"x":"y",Y=m.value?"X":"Y",X=m.value?"right":"bottom",te=m.value?"width":"height",fe=x[E],ze=$[E],ie=fe>ze?x[X]-$[X]:x[E]-$[E],Ge=Math.sign(ie)>0?m.value?"right":"bottom":Math.sign(ie)<0?m.value?"left":"top":"center",Q=(Math.abs(ie)+(Math.sign(ie)<0?x[te]:$[te]))/Math.max(x[te],$[te]),_e=x[te]/$[te],Oe=1.5;ul(T,{backgroundColor:[A,""],transform:[`translate${Y}(${ie}px) scale${Y}(${_e})`,`translate${Y}(${ie/Oe}px) scale${Y}(${(Q-1)/Oe+1})`,""],transformOrigin:Array(3).fill(Ge)},{duration:225,easing:rl})}}return xe(()=>{const[c]=b.filterProps(n);return t(b,Te({symbol:ht,ref:s,class:["v-tab",n.class],style:n.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1,block:n.fixed,maxWidth:n.fixed?300:void 0,rounded:0},c,o,{"onGroup:selected":v}),{default:()=>{var f;return[((f=e.default)==null?void 0:f.call(e))??n.text,!n.hideSlider&&t("div",{ref:a,class:["v-tab__slider",d.value],style:i.value},null)]}})}),{}}});function dt(n){const e=Math.abs(n);return Math.sign(n)*(e/((1/.501-2)*(1-e)+1))}function mt(n){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,currentScrollOffset:i,isHorizontal:m}=n;const u=m?r.clientWidth:r.clientHeight,s=m?r.offsetLeft:r.offsetTop,a=d&&m?o-s-u:s,v=e+i,c=u+a,f=u*.4;return a<=i?i=Math.max(a-f,0):v<=c&&(i=Math.min(i-(v-c-f),o-e)),i}function Fn(n){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,isHorizontal:i}=n;const m=i?r.clientWidth:r.clientHeight,u=i?r.offsetLeft:r.offsetTop,s=d&&i?o-u-m/2-e/2:u+m/2-e/2;return Math.min(o-e,Math.max(0,s))}const Rn=Symbol.for("vuetify:v-slide-group"),Et=ye({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Rn},nextIcon:{type:it,default:"$next"},prevIcon:{type:it,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...et(),...tt(),...ll({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),ct=he()({name:"VSlideGroup",props:Et(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const{isRtl:o}=pt(),{mobile:d}=Lt(),i=Tt(n,n.symbol),m=j(!1),u=j(0),s=j(0),a=j(0),v=w(()=>n.direction==="horizontal"),{resizeRef:c,contentRect:f}=rt(),{resizeRef:p,contentRect:g}=rt(),I=w(()=>i.selected.value.length?i.items.value.findIndex(S=>S.id===i.selected.value[0]):-1),T=w(()=>i.selected.value.length?i.items.value.findIndex(S=>S.id===i.selected.value[i.selected.value.length-1]):-1);if(wt){let S=-1;de(()=>[i.selected.value,f.value,g.value,v.value],()=>{cancelAnimationFrame(S),S=requestAnimationFrame(()=>{if(f.value&&g.value){const F=v.value?"width":"height";s.value=f.value[F],a.value=g.value[F],m.value=s.value+1<a.value}if(I.value>=0&&p.value){const F=p.value.children[T.value];I.value===0||!m.value?u.value=0:n.centerActive?u.value=Fn({selectedElement:F,containerSize:s.value,contentSize:a.value,isRtl:o.value,isHorizontal:v.value}):m.value&&(u.value=mt({selectedElement:F,containerSize:s.value,contentSize:a.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value}))}})})}const A=j(!1);let x=0,$=0;function E(S){const F=v.value?"clientX":"clientY";$=(o.value&&v.value?-1:1)*u.value,x=S.touches[0][F],A.value=!0}function Y(S){if(!m.value)return;const F=v.value?"clientX":"clientY",le=o.value&&v.value?-1:1;u.value=le*($+x-S.touches[0][F])}function X(S){const F=a.value-s.value;u.value<0||!m.value?u.value=0:u.value>=F&&(u.value=F),A.value=!1}function te(){c.value&&(c.value[v.value?"scrollLeft":"scrollTop"]=0)}const fe=j(!1);function ze(S){if(fe.value=!0,!(!m.value||!p.value)){for(const F of S.composedPath())for(const le of p.value.children)if(le===F){u.value=mt({selectedElement:le,containerSize:s.value,contentSize:a.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value});return}}}function ie(S){fe.value=!1}function Ge(S){var F;!fe.value&&!(S.relatedTarget&&((F=p.value)!=null&&F.contains(S.relatedTarget)))&&Q()}function lt(S){p.value&&(v.value?S.key==="ArrowRight"?Q(o.value?"prev":"next"):S.key==="ArrowLeft"&&Q(o.value?"next":"prev"):S.key==="ArrowDown"?Q("next"):S.key==="ArrowUp"&&Q("prev"),S.key==="Home"?Q("first"):S.key==="End"&&Q("last"))}function Q(S){var F,le,nt,ot,at;if(p.value)if(!S)(F=Nt(p.value)[0])==null||F.focus();else if(S==="next"){const pe=(le=p.value.querySelector(":focus"))==null?void 0:le.nextElementSibling;pe?pe.focus():Q("first")}else if(S==="prev"){const pe=(nt=p.value.querySelector(":focus"))==null?void 0:nt.previousElementSibling;pe?pe.focus():Q("last")}else S==="first"?(ot=p.value.firstElementChild)==null||ot.focus():S==="last"&&((at=p.value.lastElementChild)==null||at.focus())}function _e(S){const F=u.value+(S==="prev"?-1:1)*s.value;u.value=Mt(F,0,a.value-s.value)}const Oe=w(()=>{let S=u.value>a.value-s.value?-(a.value-s.value)+dt(a.value-s.value-u.value):-u.value;u.value<=0&&(S=dt(-u.value));const F=o.value&&v.value?-1:1;return{transform:`translate${v.value?"X":"Y"}(${F*S}px)`,transition:A.value?"none":"",willChange:A.value?"transform":""}}),Ke=w(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),He=w(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return m.value||Math.abs(u.value)>0;case"mobile":return d.value||m.value||Math.abs(u.value)>0;default:return!d.value&&(m.value||Math.abs(u.value)>0)}}),At=w(()=>Math.abs(u.value)>0),xt=w(()=>a.value>Math.abs(u.value)+s.value);return xe(()=>t(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!v.value,"v-slide-group--has-affixes":He.value,"v-slide-group--is-overflowing":m.value},n.class],style:n.style,tabindex:fe.value||i.selected.value.length?-1:0,onFocus:Ge},{default:()=>{var S,F,le;return[He.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!At.value}],onClick:()=>_e("prev")},[((S=e.prev)==null?void 0:S.call(e,Ke.value))??t(ut,null,{default:()=>[t(W,{icon:o.value?n.nextIcon:n.prevIcon},null)]})]),t("div",{key:"container",ref:c,class:"v-slide-group__container",onScroll:te},[t("div",{ref:p,class:"v-slide-group__content",style:Oe.value,onTouchstartPassive:E,onTouchmovePassive:Y,onTouchendPassive:X,onFocusin:ze,onFocusout:ie,onKeydown:lt},[(F=e.default)==null?void 0:F.call(e,Ke.value)])]),He.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!xt.value}],onClick:()=>_e("next")},[((le=e.next)==null?void 0:le.call(e,Ke.value))??t(ut,null,{default:()=>[t(W,{icon:o.value?n.prevIcon:n.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:_e,scrollOffset:u,focus:Q}}});function Ln(n){return n?n.map(r=>typeof r=="string"?{title:r,value:r}:r):[]}const wn=ye({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Et({mandatory:"force"}),...nl(),...tt()},"VTabs"),Nn=he()({name:"VTabs",props:wn(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const o=Yt(n,"modelValue"),d=w(()=>Ln(n.items)),{densityClasses:i}=ol(n),{backgroundColorClasses:m,backgroundColorStyles:u}=Cl(ce(n,"bgColor"));return qt({VTab:{color:ce(n,"color"),direction:ce(n,"direction"),stacked:ce(n,"stacked"),fixed:ce(n,"fixedTabs"),sliderColor:ce(n,"sliderColor"),hideSlider:ce(n,"hideSlider")}}),xe(()=>{const[s]=ct.filterProps(n);return t(ct,Te(s,{modelValue:o.value,"onUpdate:modelValue":a=>o.value=a,class:["v-tabs",`v-tabs--${n.direction}`,`v-tabs--align-tabs-${n.alignTabs}`,{"v-tabs--fixed-tabs":n.fixedTabs,"v-tabs--grow":n.grow,"v-tabs--stacked":n.stacked},i.value,m.value,n.class],style:[{"--v-tabs-height":Xe(n.height)},u.value,n.style],role:"tablist",symbol:ht}),{default:()=>[e.default?e.default():d.value.map(a=>t(bt,Te(a,{key:a.title}),null))]})}),{}}});const Mn=n=>{const{touchstartX:r,touchendX:e,touchstartY:o,touchendY:d}=n,i=.5,m=16;n.offsetX=e-r,n.offsetY=d-o,Math.abs(n.offsetY)<i*Math.abs(n.offsetX)&&(n.left&&e<r-m&&n.left(n),n.right&&e>r+m&&n.right(n)),Math.abs(n.offsetX)<i*Math.abs(n.offsetY)&&(n.up&&d<o-m&&n.up(n),n.down&&d>o+m&&n.down(n))};function Yn(n,r){var o;const e=n.changedTouches[0];r.touchstartX=e.clientX,r.touchstartY=e.clientY,(o=r.start)==null||o.call(r,{originalEvent:n,...r})}function qn(n,r){var o;const e=n.changedTouches[0];r.touchendX=e.clientX,r.touchendY=e.clientY,(o=r.end)==null||o.call(r,{originalEvent:n,...r}),Mn(r)}function Bn(n,r){var o;const e=n.changedTouches[0];r.touchmoveX=e.clientX,r.touchmoveY=e.clientY,(o=r.move)==null||o.call(r,{originalEvent:n,...r})}function zn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:e=>Yn(e,r),touchend:e=>qn(e,r),touchmove:e=>Bn(e,r)}}function Gn(n,r){var u;const e=r.value,o=e!=null&&e.parent?n.parentElement:n,d=(e==null?void 0:e.options)??{passive:!0},i=(u=r.instance)==null?void 0:u.$.uid;if(!o||!i)return;const m=zn(r.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=m,Ut(m).forEach(s=>{o.addEventListener(s,m[s],d)})}function Kn(n,r){var i,m;const e=(i=r.value)!=null&&i.parent?n.parentElement:n,o=(m=r.instance)==null?void 0:m.$.uid;if(!(e!=null&&e._touchHandlers)||!o)return;const d=e._touchHandlers[o];Ut(d).forEach(u=>{e.removeEventListener(u,d[u])}),delete e._touchHandlers[o]}const St={mounted:Gn,unmounted:Kn},Hn=St,kt=Symbol.for("vuetify:v-window"),Pt=Symbol.for("vuetify:v-window-group"),jn=ye({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...et(),...tt(),...Bt()},"VWindow"),Xn=he()({name:"VWindow",directives:{Touch:St},props:jn(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:e}=r;const{themeClasses:o}=zt(n),{isRtl:d}=pt(),{t:i}=Gt(),m=Tt(n,Pt),u=y(),s=w(()=>d.value?!n.reverse:n.reverse),a=j(!1),v=w(()=>{const E=n.direction==="vertical"?"y":"x",X=(s.value?!a.value:a.value)?"-reverse":"";return`v-window-${E}${X}-transition`}),c=j(0),f=y(void 0),p=w(()=>m.items.value.findIndex(E=>m.selected.value.includes(E.id)));de(p,(E,Y)=>{const X=m.items.value.length,te=X-1;X<=2?a.value=E<Y:E===te&&Y===0?a.value=!0:E===0&&Y===te?a.value=!1:a.value=E<Y}),Kt(kt,{transition:v,isReversed:a,transitionCount:c,transitionHeight:f,rootRef:u});const g=w(()=>n.continuous||p.value!==0),I=w(()=>n.continuous||p.value!==m.items.value.length-1);function T(){g.value&&m.prev()}function A(){I.value&&m.next()}const x=w(()=>{const E=[],Y={icon:d.value?n.nextIcon:n.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:m.prev,ariaLabel:i("$vuetify.carousel.prev")};E.push(g.value?e.prev?e.prev({props:Y}):t(b,Y,null):t("div",null,null));const X={icon:d.value?n.prevIcon:n.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:m.next,ariaLabel:i("$vuetify.carousel.next")};return E.push(I.value?e.next?e.next({props:X}):t(b,X,null):t("div",null,null)),E}),$=w(()=>n.touch===!1?n.touch:{...{left:()=>{s.value?T():A()},right:()=>{s.value?A():T()},start:Y=>{let{originalEvent:X}=Y;X.stopPropagation()}},...n.touch===!0?{}:n.touch});return xe(()=>It(t(n.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},o.value,n.class],style:n.style},{default:()=>{var E,Y;return[t("div",{class:"v-window__container",style:{height:f.value}},[(E=e.default)==null?void 0:E.call(e,{group:m}),n.showArrows!==!1&&t("div",{class:"v-window__controls"},[x.value])]),(Y=e.additional)==null?void 0:Y.call(e,{group:m})]}}),[[Ht("touch"),$.value]])),{group:m}}}),Wn=ye({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...et(),...al(),...yl()},"VWindowItem"),Jn=he()({name:"VWindowItem",directives:{Touch:Hn},props:Wn(),emits:{"group:selected":n=>!0},setup(n,r){let{slots:e}=r;const o=jt(kt),d=il(n,Pt),{isBooted:i}=bl();if(!o||!d)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const m=j(!1),u=w(()=>i.value&&(o.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function s(){!m.value||!o||(m.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function a(){var g;m.value||!o||(m.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Xe((g=o.rootRef.value)==null?void 0:g.clientHeight)),o.transitionCount.value+=1)}function v(){s()}function c(g){m.value&&je(()=>{!u.value||!m.value||!o||(o.transitionHeight.value=Xe(g.clientHeight))})}const f=w(()=>{const g=o.isReversed.value?n.reverseTransition:n.transition;return u.value?{name:typeof g!="string"?o.transition.value:g,onBeforeEnter:a,onAfterEnter:s,onEnterCancelled:v,onBeforeLeave:a,onAfterLeave:s,onLeaveCancelled:v,onEnter:c}:!1}),{hasContent:p}=hl(n,d.isSelected);return xe(()=>t(El,{transition:f.value,disabled:!i.value},{default:()=>{var g;return[It(t("div",{class:["v-window-item",d.selectedClass.value,n.class],style:n.style},[p.value&&((g=e.default)==null?void 0:g.call(e))]),[[Xt,d.isSelected.value]])]}})),{}}}),Mo=B({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(n,{emit:r}){const e=vt(),o=Wt.getInstance(),d=y({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),i=y(),m=y([]);de(i,()=>{m.value.find(a=>a.id===i.value&&a.title==="General")&&u()});const u=()=>{o==null||o.getConvention(e.params.convention.toString()).then(s=>{s?(d.value=s,r("pageTitle",`Convention Editor - ${d.value.Name}`)):r("pageTitle","Convention Editor - New Convention")})};return m.value=[{id:K(),title:"General",component:j(Gl),model:d},{id:K(),title:"Accommodation",component:j(Il),model:d},{id:K(),title:"Additional Purchases",component:j(Yl),model:d},{id:K(),title:"Fields",component:j(gl),model:d},{id:K(),title:"Forms",component:j(En),model:d},{id:K(),title:"Interests",component:j(Wl),model:d},{id:K(),title:"Registrations",component:j(On),model:d},{id:K(),title:"Tickets",component:j(cn),model:d},{id:K(),title:"Venues",component:j(Ul),model:d}],r("pageTitle","Convention Editor"),u(),(s,a)=>d.value?(U(),h(k,{key:0},[t(oe,{color:"blue-darken-4"},{default:l(()=>[t(Nn,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=v=>i.value=v),"show-arrows":""},{default:l(()=>[(U(!0),h(k,null,H(m.value,v=>(U(),_(bt,{key:v.id,value:v.id},{default:l(()=>[D(R(v.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Xn,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=v=>i.value=v)},{default:l(()=>[(U(!0),h(k,null,H(m.value,v=>(U(),_(Jn,{key:v.id,value:v.id},{default:l(()=>[v.id===i.value?(U(),_(ve,{key:0,class:"pa-2"},{default:l(()=>[(U(),_(Jt(v.component),{modelValue:v.model,"onUpdate:modelValue":c=>v.model=c},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(U(),h(k,{key:1},[D(" Convention Not Found ")],64))}});export{Mo as default};
