import{s as A}from"./index-ba0d422e.js";import{d as Y,X as w,Y as K,y as b,R as Q,o as f,b as h,w as t,c as e,e as C,L as I,K as x,h as R,N as U,F as S,O as j,G as F,f as z,H as ie,m as pe,V as ul,D as kl,M as sl,k as ue,$ as Ie,Z as Pe,a0 as dl,z as ze,p as Ce,a1 as Dl,a as he,s as G,a2 as el,u as rl,v as El,a3 as Sl,a4 as xl,I as $l,x as Pl,t as re,B as Ol,i as Be,a5 as cl,n as Rl,q as Fl,a6 as wl,a7 as Nl,a8 as ml,a9 as Al,aa as Ll,ab as ql,W as Ml,ac as zl}from"./index-5e493a3b.js";import{m as Fe,a as we,s as Oe,u as Re,F as Bl,V as Ye,_ as Yl}from"./FormField.vue_vue_type_script_setup_true_lang-de5eccc9.js";import{u as J}from"./useGrazeAPI-80056164.js";import{_ as Ve,N as ll}from"./SelectTags.vue_vue_type_script_setup_true_lang-36413e46.js";import{_ as _e}from"./SaveButton.vue_vue_type_script_setup_true_lang-755a326f.js";import{e as ce,c as Te}from"./VCard-915ac533.js";import{V as k,a as W,m as Kl,b as Gl,c as vl,d as Hl,e as jl,f as Xl,g as Wl}from"./VBtn-e1be72ea.js";import{V as me,b as se}from"./VToolbar-537f4f00.js";import{V as de}from"./VSpacer-0ccfe1ba.js";import{V as ge}from"./VSheet-161b2601.js";import{V as ne}from"./VContainer-fffa8f57.js";import{V as M,a as Jl,s as Zl}from"./VTextField-0487b8d0.js";import{V as be}from"./VDialog-05004bde.js";import{V as Ne,d as te,a as oe,e as Ke,b as Ql}from"./VList-a3f732c4.js";import{a as B,V as _}from"./VRow-c26e9f47.js";import{v as H}from"./v4-a960c1f4.js";import{V as Ue,a as ke,b as De,c as Ee}from"./VExpansionPanel-a815eba0.js";import{V as fl}from"./VImg-704c46a4.js";import{V as et}from"./VForm-8fa843b1.js";import{V as lt}from"./VFileInput-eeb2ed8e.js";import{V as Ge}from"./VTextarea-58205683.js";import{T as P,a as tt}from"./ticket-b671e8ba.js";import{V as nt}from"./VAutocomplete-10b727e1.js";import{V as He}from"./VSelect-6c177737.js";import{V as at,a as ot}from"./VChip-516ad58b.js";import{_ as it}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-2e11d90f.js";import{_ as ut}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-bebf8721.js";import{R as st}from"./Registrations-8d774987.js";import{_ as pl,a as dt,V as rt,b as ct}from"./FieldEditor.vue_vue_type_script_setup_true_lang-3abf906a.js";import{_ as mt}from"./FormRenderer.vue_vue_type_script_setup_true_lang-48ab6ea2.js";import{V as vt,a as tl}from"./index-5e09e9be.js";import{i as ft,u as Se,m as je,d as Xe,j as nl,f as pt}from"./rounded-0a3be993.js";import{m as Vt,u as Tt}from"./VOverlay-683cba78.js";import{u as gt}from"./ssrBoot-f958b7ac.js";import{M as yt}from"./index-698cb397.js";import"./scopeId-cb1f2ef2.js";import"./createSimpleFunctional-153c61b7.js";import"./VAvatar-18a6c16b.js";import"./VTable-42fce341.js";import"./userData-d733b0cf.js";var Vl=(n=>(n.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",n.FORM_TYPE_BADGE="BADGE",n.FORM_TYPE_DEALER="DEALER",n.FORM_TYPE_REGISTRATION="REGISTRATION",n.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",n))(Vl||{});const It=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],Ct=Y({__name:"EditConventionExtraOptions",props:w({convention:{}},{modelValue:{}}),emits:w(["close"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=b(Q(l.value)),v=()=>{l.value=u.value,s("close")};return(d,r)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[e(k,{icon:"",dark:"",onClick:r[0]||(r[0]=i=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:t(()=>[C("Edit Option Choice")]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:v},{default:t(()=>[C(" Apply ")]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:t(()=>[e(ne,null,{default:t(()=>[e(M,{label:I(A).formLabelName,type:"text",variant:"outlined",modelValue:u.value.Name,"onUpdate:modelValue":r[1]||(r[1]=i=>u.value.Name=i)},null,8,["label","modelValue"]),e(M,{label:I(A).formLabelDescription,type:"text",variant:"outlined",modelValue:u.value.Description,"onUpdate:modelValue":r[2]||(r[2]=i=>u.value.Description=i)},null,8,["label","modelValue"]),e(M,{label:I(A).formLabelPrice,type:"text",variant:"outlined","prepend-icon":I(A).currencyIcon,modelValue:u.value.Price,"onUpdate:modelValue":r[3]||(r[3]=i=>u.value.Price=i),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),u.value.Choices?(f(),h(Ve,{key:0,modelValue:u.value.Choices,"onUpdate:modelValue":r[4]||(r[4]=i=>u.value.Choices=i),convention:d.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):x("",!0)]),_:1})]),_:1})]),_:1}))}}),ht=z("h3",null,"Options",-1),_t=Y({__name:"EditConventionExtra",props:w({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=b(Q(s.value)),u=b(!1),v=b(0),d=J(),r=b([""]),i=b([]),o=b([]);n.convention&&(d.getConventionTags(n.convention.ConventionUUID).then(T=>{o.value=T.sort((g,V)=>g.Title.localeCompare(V.Title))}),d.getOrganisationTags(n.convention.OrganisationUUID).then(T=>{i.value=T.sort((g,V)=>g.Title.localeCompare(V.Title))}));const a=R(()=>[...i.value,...o.value]),c=({callback:T})=>{d.saveExtra(l.value).then(g=>{g?(s.value=g,T&&T("Extra Saved")):T&&T("Failed to Save Extra")}).catch(()=>{T&&T("Failed to Save Extra")})},m=T=>{var g;T.Options||(T.Options=[]),T.Options.push({ID:0,OptionUUID:H(),ExtraID:T.ID,ExtraUUID:T.ExtraUUID,Order:((g=T.Options)==null?void 0:g.length)+1,Name:"",Description:"",Price:0,Choices:[]})},p=(T,g)=>{T.Options&&T.Options.splice(g,1)},y=T=>{if(T.Choices&&T.Choices.length>0)return T.Choices.map(g=>{const V=a.value.find($=>$.TagUUID===g.TagUUID);if(V)return V.Title}).join(", ")};return(T,g)=>(f(),U(S,null,[e(ne,{class:"px-0"},{default:t(()=>[e(M,{label:I(A).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":g[0]||(g[0]=V=>l.value.Name=V)},null,8,["label","modelValue"]),e(M,{label:I(A).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":g[1]||(g[1]=V=>l.value.Description=V)},null,8,["label","modelValue"]),e(Ve,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":g[2]||(g[2]=V=>l.value.AppliesTags=V),convention:T.convention,organisation:T.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),ht,e(Ne,{opened:r.value,"onUpdate:opened":g[3]||(g[3]=V=>r.value=V)},{default:t(()=>[(f(!0),U(S,null,j(l.value.Options,(V,$)=>(f(),U(S,{key:V.ID},[V?(f(),h(oe,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${V.Name} ${V.Price&&V.Price>0?`(${I(A).currencySymbol}${V.Price})`:""}`},{append:t(()=>[e(k,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:q=>p(l.value,$)},null,8,["onClick"]),e(k,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:q=>{u.value=!0,v.value=$}},null,8,["onClick"])]),default:t(()=>[V.Choices&&V.Choices.length>0?(f(),h(te,{key:0},{default:t(()=>[C(" Options: "+F(y(V)),1)]),_:2},1024)):x("",!0)]),_:2},1032,["title"])):x("",!0)],64))),128))]),_:1},8,["opened"]),e(k,{color:"primary",onClick:g[4]||(g[4]=V=>m(l.value))},{default:t(()=>[C("Add Option")]),_:1}),e(B,null,{default:t(()=>[e(_,{class:"text-right"},{default:t(()=>[e(_e,{onClick:c})]),_:1})]),_:1})]),_:1}),e(be,{modelValue:u.value,"onUpdate:modelValue":g[7]||(g[7]=V=>u.value=V),scrollable:""},{default:t(()=>[e(Ct,{modelValue:l.value.Options[v.value],"onUpdate:modelValue":g[5]||(g[5]=V=>l.value.Options[v.value]=V),convention:T.convention,onClose:g[6]||(g[6]=V=>u.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),bt=Y({__name:"EditConventionExtras",props:w({convention:{}},{modelValue:{required:!0}}),emits:w(["close"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=J(),v=()=>{const i={ID:0,ExtraUUID:H(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:l.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};u.saveExtra(i).then(o=>{o&&l.value.push(o)})},d=i=>{u.deleteExtra(l.value[i].ExtraUUID).then(o=>{o&&l.value.splice(i,1)})},r=(...i)=>{i.forEach(o=>{o>=0&&o<l.value.length&&u.saveExtra(l.value[o])})};return(i,o)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[e(k,{icon:"",dark:"",onClick:o[0]||(o[0]=a=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:t(()=>[C("Edit Extras")]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:v},{default:t(()=>[C(" Add ")]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:t(()=>[e(Ue,null,{default:t(()=>[(f(!0),U(S,null,j(l.value,(a,c)=>(f(),h(ke,{key:a.ID,class:"mt-0"},{default:t(()=>[e(De,null,{actions:t(({expanded:m})=>[e(k,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:p=>d(c)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>{I(Fe)(a,l.value),r(c,c-1)},["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>{I(we)(a,l.value),r(c,c+1)},["stop"])},null,8,["onClick"]),C(" "+F(a.Name)+" ",1)]),_:2},1024),e(Ee,{class:"px-0"},{default:t(()=>[e(_t,{convention:i.convention,modelValue:l.value[c],"onUpdate:modelValue":m=>l.value[c]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Ut=z("h3",null,"Additional Purchases",-1),kt=z("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Dt=Y({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=b([]),u=J(),v=b([""]),d=b(!1),r=o=>{if(o.Choices&&o.Choices.length>0)return o.Choices.map(a=>a.Title).join(", ")},i=()=>{d.value=!1};return u==null||u.getConventionExtras(s.value.ConventionUUID||"").then(o=>{o&&(l.value=o)}),(o,a)=>(f(),U(S,null,[e(ne,{fluid:!0,class:"px-0"},{default:t(()=>[e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[Ut]),_:1}),e(_,{class:"text-right"},{default:t(()=>[e(k,{color:"primary",onClick:a[0]||(a[0]=c=>d.value=!0)},{default:t(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),kt,e(Ne,{opened:v.value,"onUpdate:opened":a[1]||(a[1]=c=>v.value=c)},{default:t(()=>[(f(!0),U(S,null,j(l.value,c=>(f(),h(Ke,{key:c.ID,value:c.ID},{activator:t(({props:m})=>[e(oe,pe(m,{"prepend-icon":"mdi:mdi-group",title:c.Name}),null,16,["title"])]),default:t(()=>[c.Options?(f(!0),U(S,{key:0},j(c.Options,m=>(f(),h(oe,{key:m.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${m.Name} ${m.Price&&m.Price>0?`(${I(A).currencySymbol}${m.Price})`:""}`},{default:t(()=>[m.Choices&&m.Choices.length>0?(f(),h(te,{key:0},{default:t(()=>[C(" Options: "+F(r(m)),1)]),_:2},1024)):x("",!0)]),_:2},1032,["title"]))),128)):x("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=c=>d.value=c),scrollable:!0},{default:t(()=>[e(bt,{modelValue:l.value,"onUpdate:modelValue":a[2]||(a[2]=c=>l.value=c),convention:s.value,onClose:i},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Et=Y({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:w(["close"],["update:modelValue"]),setup(n,{emit:s}){const l=J(),u=sl(),v=K(n,"modelValue"),d=b(Q(v.value)),r=b(`${u.GetConventionLogoURL(d.value.ConventionUUID)}?${new Date().getTime()}`),i=b(),o=b(),a=ul(),c=kl(),m=()=>{d.value=JSON.parse(JSON.stringify(v.value))},p=async()=>{var V;const g=new FormData((V=o.value)==null?void 0:V.$el);if(g.get("Image")&&g.get("Image").size>0)return g.set("ConventionUUID",d.value.ConventionUUID),await u.SaveConventionLogo(g)},y=()=>{p(),l.saveConvention(d.value).then(()=>{const g=v.value.Slug,V=d.value.Slug;v.value=d.value,g!==V&&c.push(`/dashboard/admin/${a.params.organisation.toString()}/convention/${d.value.Slug}`),s("close")})},T=()=>{r.value=URL.createObjectURL(i.value.files[0])};return(g,V)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[e(k,{icon:"",dark:"",onClick:V[0]||(V[0]=$=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:t(()=>[C("Convention Settings")]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:m},{default:t(()=>[C(" Reset ")]),_:1}),e(k,{variant:"text",onClick:y},{default:t(()=>[C(" Save ")]),_:1})]),_:1})]),_:1}),e(Te,null,{default:t(()=>[e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(fl,{class:"imgLogo mx-auto",src:r.value||""},null,8,["src"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(M,{label:I(A).formLabelName,name:"Name",variant:"outlined",modelValue:d.value.Name,"onUpdate:modelValue":V[1]||(V[1]=$=>d.value.Name=$)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(M,{label:I(A).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:d.value.Description,"onUpdate:modelValue":V[2]||(V[2]=$=>d.value.Description=$)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(M,{label:I(A).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:d.value.DetailLink,"onUpdate:modelValue":V[3]||(V[3]=$=>d.value.DetailLink=$)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(M,{label:I(A).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:d.value.Slug,"onUpdate:modelValue":V[4]||(V[4]=$=>d.value.Slug=$)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[e(et,{ref_key:"conventionImageForm",ref:o,enctype:"multipart/form-data"},{default:t(()=>[e(lt,{label:I(A).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:i,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:T},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const St=z("h3",null,"General Details",-1),xt=["href"],$t=Y({__name:"General",props:{modelValue:{required:!0}},emits:w(["refresh"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=sl(),v=R(()=>l.value.ConventionUUID?u.GetConventionLogoURL(l.value.ConventionUUID):""),d=b(!1),r=()=>{d.value=!1,s("refresh")};return(i,o)=>(f(),U(S,null,[e(ne,{fluid:!0,class:"px-0"},{default:t(()=>[e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[St]),_:1}),e(_,{class:"text-right"},{default:t(()=>[e(k,{color:"primary",onClick:o[0]||(o[0]=a=>d.value=!0)},{default:t(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),z("p",null,[v.value?(f(),h(fl,{key:0,src:v.value,title:l.value.Name},null,8,["src","title"])):x("",!0)]),z("h3",null,F(l.value.Name),1),z("p",null,F(l.value.Description),1),z("p",null,[l.value.DetailLink?(f(),U("a",{key:0,href:l.value.DetailLink},"More Details",8,xt)):x("",!0)]),e(be,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=a=>d.value=a),scrollable:!0},{default:t(()=>[e(Et,{onClose:r,modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value=a)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),Pt=Y({__name:"EditConventionInterest",props:w({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=b(Q(s.value)),u=J(),v=({callback:d})=>{u.saveInterest(l.value).then(r=>{r?(s.value=r,d&&d("Interest Saved")):d&&d("Failed to Save Interest")}).catch(()=>{d&&d("Failed to Save Interest")})};return(d,r)=>(f(),h(ne,{class:"px-0"},{default:t(()=>[e(M,{label:I(A).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":r[0]||(r[0]=i=>l.value.Name=i)},null,8,["label","modelValue"]),e(Ge,{label:I(A).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":r[1]||(r[1]=i=>l.value.Description=i)},null,8,["label","modelValue"]),x("",!0),e(Ve,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":r[3]||(r[3]=i=>l.value.AppliesTags=i),convention:d.convention,organisation:d.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(B,null,{default:t(()=>[e(_,{class:"text-right"},{default:t(()=>[e(_e,{onClick:v})]),_:1})]),_:1})]),_:1}))}}),Ot=Y({__name:"EditConventionInterests",props:w({convention:{}},{modelValue:{required:!0}}),emits:w(["close"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=J(),v=()=>{const i={ID:0,InterestUUID:H(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:l.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};u.saveInterest(i).then(o=>{o&&l.value.push(o)})},d=i=>{u.deleteInterest(l.value[i].InterestUUID).then(o=>{o&&l.value.splice(i,1)})},r=(...i)=>{i.forEach(o=>{o>=0&&o<l.value.length&&u.saveInterest(l.value[o])})};return(i,o)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[e(k,{icon:"",dark:"",onClick:o[0]||(o[0]=a=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:t(()=>[C("Edit Interests")]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:v},{default:t(()=>[C(" Add ")]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:t(()=>[e(Ue,null,{default:t(()=>[(f(!0),U(S,null,j(l.value,(a,c)=>(f(),h(ke,{key:a.ID,class:"mt-0"},{default:t(()=>[e(De,null,{actions:t(({expanded:m})=>[e(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>d(c)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>{I(Fe)(a,l.value),r(c,c-1)},["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>{I(we)(a,l.value),r(c,c+1)},["stop"])},null,8,["onClick"]),C(" "+F(a.Name)+" ",1)]),_:2},1024),e(Ee,{class:"px-0"},{default:t(()=>[e(Pt,{convention:i.convention,modelValue:l.value[c],"onUpdate:modelValue":m=>l.value[c]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Rt=z("h3",null,"Interests",-1),Ft=z("p",null,"Attendees can tag themselves for particular things.",-1),wt=Y({__name:"Interests",props:{modelValue:{required:!0}},emits:w(["refresh"],["update:modelValue"]),setup(n){const s=K(n,"modelValue"),l=J(),u=b([]);l.getConventionInterests(s.value.ConventionUUID).then(r=>{Oe(r),u.value=r});const v=b([""]),d=b(!1);return(r,i)=>(f(),U(S,null,[e(ne,{fluid:!0,class:"px-0"},{default:t(()=>[e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[Rt]),_:1}),e(_,{class:"text-right"},{default:t(()=>[e(k,{color:"primary",onClick:i[0]||(i[0]=o=>d.value=!0)},{default:t(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ft,e(Ne,{opened:v.value,"onUpdate:opened":i[1]||(i[1]=o=>v.value=o)},{default:t(()=>[(f(!0),U(S,null,j(u.value,o=>(f(),h(oe,{key:o.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${o.Name} ${o.Price&&o.Price>0?`(${I(A).currencySymbol}${o.Price})`:""}`},{default:t(()=>[o.Description?(f(),h(te,{key:0},{default:t(()=>[C(F(o.Description),1)]),_:2},1024)):x("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=o=>d.value=o),scrollable:!0},{default:t(()=>[e(Ot,{onClose:i[2]||(i[2]=o=>d.value=!1),convention:s.value,modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=o=>u.value=o)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),$e=Y({__name:"SelectTickets",props:w({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=v=>v.Type===P.TICKET_TYPE_GROUP?"mdi:mdi-group":v.Type===P.TICKET_TYPE_TICKET?v.RequiresAccommodation?"mdi:mdi-home":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":v.Type===P.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":v.Type===P.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",u=R(()=>n.tickets.map(v=>({title:v.Name,value:s.value.find(d=>d&&d.TicketUUID===v.TicketUUID)||v,props:{appendIcon:l(v)}})));return(v,d)=>(f(),U("div",null,[e(nt,{label:v.label,variant:v.variant||"filled",items:u.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=r=>s.value=r),hint:v.hint,chips:v.chips,clearable:v.clearable,multiple:"","persistent-hint":v.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),Nt=z("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),At=Y({__name:"EditConventionTicket",props:w({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=b(Q(s.value)),u=J(),v=R(()=>n.tickets.filter(a=>a.Type===P.TICKET_TYPE_TICKET)),d=R(()=>n.tickets.filter(a=>a.Type===P.TICKET_TYPE_ADD_ON)),r=R(()=>n.tickets.filter(a=>a.Type===P.TICKET_TYPE_TICKET_COMPONENT)),i=a=>n.accommodation.filter(c=>c.Costs.find(m=>m.DateStart===a.DateStart&&m.DateEnd===a.DateEnd)),o=({callback:a})=>{u.saveTicket(l.value).then(c=>{c?(l.value.ID=c.ID,l.value.TicketUUID=c.TicketUUID,s.value=l.value,a&&a("Ticket Saved")):a&&a("Failed to Save Ticket")}).catch(()=>{a&&a("Failed to Save Ticket")})};return(a,c)=>(f(),h(ne,{class:"px-0",fluid:""},{default:t(()=>[e(B,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(He,{label:"Ticket Type",variant:"outlined",modelValue:l.value.Type,"onUpdate:modelValue":c[0]||(c[0]=m=>l.value.Type=m),items:I(tt),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(M,{label:I(A).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":c[1]||(c[1]=m=>l.value.Name=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(M,{label:I(A).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":c[2]||(c[2]=m=>l.value.Description=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),l.value.Type!==I(P).TICKET_TYPE_GROUP?(f(),U(S,{key:0},[e(_,{cols:"12"},{default:t(()=>[e(M,{label:I(A).formLabelDateStart,type:"date",variant:"outlined",modelValue:l.value.DateStart,"onUpdate:modelValue":c[3]||(c[3]=m=>l.value.DateStart=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(M,{label:I(A).formLabelDateEnd,type:"date",variant:"outlined",modelValue:l.value.DateEnd,"onUpdate:modelValue":c[4]||(c[4]=m=>l.value.DateEnd=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(M,{label:I(A).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":I(A).currencyIcon,modelValue:l.value.Price,"onUpdate:modelValue":c[5]||(c[5]=m=>l.value.Price=m),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(f(),h(_,{key:1,cols:"12"},{default:t(()=>[e($e,{label:"Tickets",variant:"outlined",tickets:v.value,modelValue:l.value.Tickets,"onUpdate:modelValue":c[6]||(c[6]=m=>l.value.Tickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(_,{cols:"12"},{default:t(()=>[e(Ve,{label:"Applied Tags",variant:"outlined",modelValue:l.value.AppliesTags,"onUpdate:modelValue":c[7]||(c[7]=m=>l.value.AppliesTags=m),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(Ve,{label:"Required Tags",variant:"outlined",modelValue:l.value.RequiredTags,"onUpdate:modelValue":c[8]||(c[8]=m=>l.value.RequiredTags=m),convention:a.convention,organisation:a.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),l.value.Type===I(P).TICKET_TYPE_TICKET?(f(),U(S,{key:2},[e(_,{cols:"12"},{default:t(()=>[e(M,{label:"Components Required",type:"number",variant:"outlined",modelValue:l.value.ComponentsRequired,"onUpdate:modelValue":c[9]||(c[9]=m=>l.value.ComponentsRequired=m),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e($e,{label:"Components",variant:"outlined",tickets:r.value,modelValue:l.value.TicketComponents,"onUpdate:modelValue":c[10]||(c[10]=m=>l.value.TicketComponents=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e($e,{label:"Addons",variant:"outlined",tickets:d.value,modelValue:l.value.AddonTickets,"onUpdate:modelValue":c[11]||(c[11]=m=>l.value.AddonTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):x("",!0),e(_,{cols:"12"},{default:t(()=>[e($e,{label:"Disables Tickets",variant:"outlined",tickets:a.tickets,modelValue:l.value.DisablesTickets,"onUpdate:modelValue":c[12]||(c[12]=m=>l.value.DisablesTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),i(l.value).length?(f(),h(B,{key:0,class:"align-center",dense:!0},{default:t(()=>[e(_,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:t(()=>[Nt]),_:1}),e(_,{class:"flex-grow-1"},{default:t(()=>[e(at,null,{default:t(()=>[(f(!0),U(S,null,j(i(l.value),m=>(f(),h(ot,{key:m.ID,title:"Automatically calculated",disabled:!0},{default:t(()=>[C(F(m.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):x("",!0),e(B,null,{default:t(()=>[e(_,{class:"text-right"},{default:t(()=>[e(_e,{onClick:o})]),_:1})]),_:1})]),_:1}))}}),Lt={class:"pr-2"},qt={class:"mb-2"},Mt={key:0,class:"text-grey-darken-1 font-italic"},zt={key:1,class:"text-red"},Bt={key:0,class:"text-grey-darken-1 font-italic"},Yt={key:1,class:"text-red"},Kt={key:0,class:"text-grey-darken-1 font-italic"},Gt={key:1,class:"text-red"},Ht={class:"text-grey-darken-1"},jt=Y({__name:"EditConventionTickets",props:w({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:w(["close"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=J(),v=()=>{l.value.push({ID:0,TicketUUID:H(),ConventionID:n.convention.ID,ConventionUUID:n.convention.ConventionUUID,Order:l.value.length+1,Name:"New Ticket",Type:P.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},d=i=>{u.deleteTicket(l.value[i].TicketUUID).then(o=>{o&&l.value.splice(i,1)})},r=i=>i.Type===P.TICKET_TYPE_GROUP?"mdi:mdi-group":i.Type===P.TICKET_TYPE_TICKET?i.RequiresAccommodation?"mdi:mdi-home":i.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":i.Type===P.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":i.Type===P.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(i,o)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[e(k,{icon:"",dark:"",onClick:o[0]||(o[0]=a=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:t(()=>[C("Edit Tickets")]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:v},{default:t(()=>[C(" Add Ticket ")]),_:1})]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:t(()=>[e(Ue,null,{default:t(()=>[(f(!0),U(S,null,j(l.value,(a,c)=>(f(),h(ke,{key:a.ID,class:"mt-0"},{default:t(()=>[e(De,{class:"py-2"},{actions:t(({expanded:m})=>[e(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>d(c)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>I(Fe)(a,l.value),["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>I(we)(a,l.value),["stop"])},null,8,["onClick"]),z("div",Lt,[e(W,{icon:r(a)},null,8,["icon"])]),z("div",null,[z("p",qt,[C(F(a.Name)+" ",1),a.Type===I(P).TICKET_TYPE_TICKET?(f(),U(S,{key:0},[l.value.find(m=>m.Type===I(P).TICKET_TYPE_GROUP&&m.Tickets.find(p=>p&&p.TicketUUID===a.TicketUUID))?(f(),U("span",Mt," ("+F(l.value.filter(m=>m.Type===I(P).TICKET_TYPE_GROUP&&m.Tickets.find(p=>p&&p.TicketUUID===a.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),U("span",zt," (Ticket does not belong to any categories.) "))],64)):x("",!0),a.Type===I(P).TICKET_TYPE_ADD_ON?(f(),U(S,{key:1},[l.value.find(m=>m.Type===I(P).TICKET_TYPE_TICKET&&m.AddonTickets.find(p=>p&&p.TicketUUID===a.TicketUUID))?(f(),U("span",Bt," ("+F(l.value.filter(m=>m.Type===I(P).TICKET_TYPE_TICKET&&m.AddonTickets.find(p=>p&&p.TicketUUID===a.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),U("span",Yt," (Ticket addon must be associated to at least one ticket.) "))],64)):x("",!0),a.Type===I(P).TICKET_TYPE_TICKET_COMPONENT?(f(),U(S,{key:2},[l.value.find(m=>m.Type===I(P).TICKET_TYPE_TICKET&&m.TicketComponents.find(p=>p&&p.TicketUUID===a.TicketUUID))?(f(),U("span",Kt," ("+F(l.value.filter(m=>m.Type===I(P).TICKET_TYPE_TICKET&&m.TicketComponents.find(p=>p&&p.TicketUUID===a.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(f(),U("span",Gt," (Component has not been assigned to any tickets.) "))],64)):x("",!0)]),z("p",Ht,[a.Type===I(P).TICKET_TYPE_GROUP?(f(),U(S,{key:0},[C("Category")],64)):a.Type===I(P).TICKET_TYPE_TICKET?(f(),U(S,{key:1},[C(" Ticket "),a.ComponentsRequired>0?(f(),U(S,{key:0},[C(" ("+F(a.ComponentsRequired)+" component"+F(a.ComponentsRequired>1?"s":"")+" required) ",1)],64)):x("",!0)],64)):x("",!0),a.Type===I(P).TICKET_TYPE_TICKET_COMPONENT?(f(),U(S,{key:2},[C("Component")],64)):x("",!0),a.Type===I(P).TICKET_TYPE_ADD_ON?(f(),U(S,{key:3},[C("Addon")],64)):x("",!0)])])]),_:2},1024),e(Ee,{class:"px-0"},{default:t(()=>[e(At,{accommodation:i.accommodation,convention:i.convention,tickets:l.value,modelValue:l.value[c],"onUpdate:modelValue":m=>l.value[c]=m},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Xt=z("h3",null,"Tickets",-1),Wt=z("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),Jt=Y({__name:"Tickets",props:{modelValue:{required:!0}},emits:w(["refresh"],["update:modelValue"]),setup(n){var m;const s=K(n,"modelValue"),l=J(),u=b([]),v=b([]);l.getConventionTickets(((m=s.value)==null?void 0:m.ConventionUUID)||"").then(p=>{Oe(p),u.value=p});const d=b([""]),r=b(!1),i=p=>p.AddonTickets&&p.AddonTickets.map(y=>u.value&&u.value.find(T=>T.ID===y.ID)),o=p=>p.TicketComponents&&p.TicketComponents.map(y=>u.value&&u.value.find(T=>T.ID===y.ID)),a=p=>"",c=p=>v.value.filter(y=>y.Costs.find(T=>T.DateStart===p.DateStart&&T.DateEnd===p.DateEnd)).map(y=>y.Name).join(", ");return(p,y)=>(f(),U(S,null,[e(ne,{fluid:!0,class:"px-0"},{default:t(()=>[e(B,null,{default:t(()=>[e(_,null,{default:t(()=>[Xt]),_:1}),e(_,{class:"text-right"},{default:t(()=>[e(k,{color:"primary",onClick:y[0]||(y[0]=T=>r.value=!0)},{default:t(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Wt,e(Ne,{opened:d.value,"onUpdate:opened":y[1]||(y[1]=T=>d.value=T)},{default:t(()=>[(f(!0),U(S,null,j(u.value.filter(T=>T.Type===I(P).TICKET_TYPE_GROUP),T=>(f(),h(Ke,{key:T.ID,value:T.ID},{activator:t(({props:g})=>[e(oe,pe(g,{"prepend-icon":"mdi:mdi-group",title:T.Name}),null,16,["title"])]),default:t(()=>[(f(!0),U(S,null,j(u.value.filter(g=>T.Tickets.find(V=>V&&g&&V.TicketUUID===g.TicketUUID)),g=>(f(),U(S,{key:g.ID},[g.AddonTickets&&g.AddonTickets.length?(f(),h(Ke,{key:0,value:g.ID},{activator:t(({props:V})=>[e(oe,pe(V,{"prepend-icon":g.RequiresAccommodation?"mdi:mdi-home":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${g.Name} ${g.Price>0?`(${I(A).currencySymbol}${g.Price})`:""}`}),{default:t(()=>[g.ComponentsRequired>0?(f(),h(te,{key:0},{default:t(()=>[C(" Options: "+F(o(g).map($=>$&&$.Name).join(", ")),1)]),_:2},1024)):x("",!0),g.RequiresAccommodation&&c(g)?(f(),h(te,{key:1},{default:t(()=>[C(" Accommodation: "+F(c(g)),1)]),_:2},1024)):x("",!0)]),_:2},1040,["prepend-icon","title"])]),default:t(()=>[(f(!0),U(S,null,j(i(g),V=>(f(),U(S,{key:V},[V?(f(),h(oe,{key:0,title:`${V.Name} ${V.Price>0?`(${I(A).currencySymbol}${V.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:t(()=>[V.RequiredTags&&V.RequiredTags.length>0?(f(),h(te,{key:0},{default:t(()=>[C(" Required Tags: "+F(V.RequiredTags.join(", ")),1)]),_:2},1024)):x("",!0),V.RequiredGroupMemberships&&V.RequiredGroupMemberships.length>0?(f(),h(te,{key:1},{default:t(()=>[C(" Required Groups: "+F(a(V.RequiredGroupMemberships)),1)]),_:2},1024)):x("",!0),c(V)?(f(),h(te,{key:2},{default:t(()=>[C(" Accommodation: "+F(c(V)),1)]),_:2},1024)):x("",!0)]),_:2},1032,["title"])):x("",!0)],64))),128))]),_:2},1032,["value"])):(f(),h(oe,{key:1,"prepend-icon":g.RequiresAccommodation?"mdi:mdi-home":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${g.Name} ${g.Price>0?`(${I(A).currencySymbol}${g.Price})`:""}`},{default:t(()=>[g.ComponentsRequired>0?(f(),h(te,{key:0},{default:t(()=>[C(" Options: "+F(o(g).map(V=>V&&V.Name).join(", ")),1)]),_:2},1024)):x("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:r.value,"onUpdate:modelValue":y[4]||(y[4]=T=>r.value=T),scrollable:!0},{default:t(()=>[e(jt,{onClose:y[2]||(y[2]=T=>r.value=!1),modelValue:u.value,"onUpdate:modelValue":y[3]||(y[3]=T=>u.value=T),accommodation:v.value,convention:s.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),Zt=(n,s)=>{const l=Re(n,s),u=Re(n,s,void 0,void 0,"item"),v=b(Q(u.value));return ue(u,()=>{v.value=Q(u.value)}),{state:l,model:u,close:()=>{l.value=!1},reset:()=>{u.value=Q(v.value)},save:()=>{s("save")}}},Qt=Y({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(n,{emit:s}){const l=n,{state:u,model:v,close:d,reset:r,save:i}=Zt(l,s);return(o,a)=>(f(),h(pl,{modelValue:I(u),"onUpdate:modelValue":a[0]||(a[0]=c=>Pe(u)?u.value=c:null),onReset:I(r),onSave:I(i),title:o.title,color:"primary","card-class":o.cardClass},{toolbarButtons:t(()=>[Ie(o.$slots,"toolbarButtons")]),actions:t(()=>[e(k,{color:"blue-darken-1",variant:"text",onClick:I(d)},{default:t(()=>[C(" Cancel ")]),_:1},8,["onClick"]),e(k,{color:"blue-darken-1",variant:"text",onClick:I(r)},{default:t(()=>[C(" Reset ")]),_:1},8,["onClick"]),e(de),e(k,{color:"blue-darken-1",variant:"text",onClick:I(i)},{default:t(()=>[C(" Save ")]),_:1},8,["onClick"])]),default:t(()=>[Ie(o.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Tl=Y({__name:"EditOrderedItems",props:w({closeable:{type:Boolean,default:!1},newItem:{type:Function},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:w(["save","close"],["update:modelValue"]),setup(n,{emit:s}){const l=K(n,"modelValue"),u=()=>{s("save"),s("close")},v=()=>{if(n.newItem){const a=n.newItem();a.Order=l.value.length+1,l.value.push(a)}else l.value.push({Order:l.value.length+1})},d=a=>{l.value.splice(a,1)},r=a=>{we(a,l.value)},i=a=>{Fe(a,l.value)},o=a=>n.labelParent&&a[n.labelParent]?a[n.labelParent][n.label]:a[n.label];return l.value.find(a=>a.Order===0)&&Oe(l.value),l.value.find(a=>l.value.find(c=>c.Order===a.Order&&c!==a))&&Oe(l.value),(a,c)=>(f(),h(ce,null,{default:t(()=>[e(se,{dark:"",color:"primary"},{default:t(()=>[a.closeable?(f(),h(k,{key:0,icon:"",dark:"",onClick:c[0]||(c[0]=m=>s("close"))},{default:t(()=>[e(W,null,{default:t(()=>[C("mdi:mdi-close")]),_:1})]),_:1})):x("",!0),e(me,null,{default:t(()=>[C(F(a.title),1)]),_:1}),e(de),e(ge,null,{default:t(()=>[e(k,{variant:"text",onClick:v},{default:t(()=>[C(" Add ")]),_:1}),a.showSave?(f(),h(k,{key:0,variant:"text",onClick:u},{default:t(()=>[C(" Save ")]),_:1})):x("",!0)]),_:1})]),_:1}),e(Te,{class:"pa-0"},{default:t(()=>[e(Ue,null,{default:t(()=>[(f(!0),U(S,null,j(l.value,(m,p)=>(f(),h(ke,{key:m.Order,class:"mt-0"},{default:t(()=>[e(De,null,{actions:t(({expanded:y})=>[e(k,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:T=>d(p)},null,8,["onClick"]),e(W,{class:"align-self-center text-h5",icon:y?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:t(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(y=>i(m),["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(y=>r(m),["stop"])},null,8,["onClick"]),Ie(a.$slots,`${a.slotNamePrefix}_${p}_title`,{},()=>[C(F(o(m)),1)])]),_:2},1024),e(Ee,{class:"px-0"},{default:t(()=>[Ie(a.$slots,`${a.slotNamePrefix}_${p}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),en={class:"pa-0 border-0 ma-0"},ln=z("legend",{class:"mb-2"},"Field Settings",-1),tn={class:"pa-0 border-0 ma-0"},nn=z("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),an=Y({__name:"EditFormField",props:w({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=J(),u=b([]),v=b([]),d=b(""),r=i=>{var o;s.value.Field=(o=v.value.find(a=>a.value===i))==null?void 0:o.field};return l.getConventionFields(n.convention.ConventionUUID).then(i=>{i&&(u.value=i,v.value=i.map(o=>({title:`${o.Label} (${(Bl.find(a=>a.value===o.Type)||{title:""}).title})`,value:o.FieldUUID,field:o})),r(s.value.FieldUUID))}),(i,o)=>(f(),h(B,null,{default:t(()=>[e(_,{cols:"12",md:"6"},{default:t(()=>[z("fieldset",en,[ln,e(B,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(He,{modelValue:s.value.FieldUUID,"onUpdate:modelValue":[o[0]||(o[0]=a=>s.value.FieldUUID=a),r],items:v.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"6",sm:"4"},{default:t(()=>[e(M,{modelValue:s.value.MinLength,"onUpdate:modelValue":o[1]||(o[1]=a=>s.value.MinLength=a),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"6",sm:"4"},{default:t(()=>[e(M,{modelValue:s.value.MaxLength,"onUpdate:modelValue":o[2]||(o[2]=a=>s.value.MaxLength=a),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"4"},{default:t(()=>[e(Ye,{modelValue:s.value.Required,"onUpdate:modelValue":o[3]||(o[3]=a=>s.value.Required=a),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),s.value.FieldUUID&&s.value.Field?(f(),h(_,{key:0,cols:"12",md:"6"},{default:t(()=>[z("fieldset",tn,[nn,s.value.Field?(f(),h(Yl,{key:0,field:s.value.Field,"persistent-hint":!0,required:s.value.Required,convention:i.convention,modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=a=>d.value=a)},null,8,["field","required","convention","modelValue"])):x("",!0)])]),_:1})):x("",!0)]),_:1}))}}),on={class:"d-none d-sm-block"},un=Y({__name:"EditFormSectionFields",props:w({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=()=>{var u;return{ID:0,SectionFieldUUID:H(),SectionID:s.value.ID,SectionUUID:s.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((u=s.value.Fields)==null?void 0:u.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(u,v)=>s.value.Fields!==void 0?(f(),h(Tl,{key:0,modelValue:s.value.Fields,"onUpdate:modelValue":v[0]||(v[0]=d=>s.value.Fields=d),closeable:!1,title:"Fields","new-item":l,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},dl({_:2},[j(s.value.Fields,(d,r)=>({name:`field_${r}_title`,fn:t(()=>[d.Field?(f(),U(S,{key:0},[C(F(d.Field.Label)+" ("+F(d.Field.Name)+") ",1),z("template",on,[C("  ["+F(d.Field.Type)+"] ",1)])],64)):(f(),U(S,{key:1},[C("New Field")],64))])})),j(s.value.Fields,(d,r)=>({name:`field_${r}`,fn:t(()=>[e(an,{modelValue:s.value.Fields[r],"onUpdate:modelValue":i=>s.value.Fields[r]=i,convention:u.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):x("",!0)}}),sn=Y({__name:"EditFormSections",props:w({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(n){const s=K(n,"modelValue"),l=()=>{const u={ID:0,SectionUUID:H(),FormID:s.value.ID,FormUUID:s.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:H(),SectionID:0,SectionUUID:"",Edit:!0}};return u.State.SectionID=u.ID,u.State.SectionUUID=u.SectionUUID,u};return(u,v)=>(f(),h(Tl,{modelValue:s.value.Sections,"onUpdate:modelValue":v[0]||(v[0]=d=>s.value.Sections=d),"new-item":l,closeable:!1,title:"Sections","slot-name-prefix":"section"},dl({_:2},[j(s.value.Sections,(d,r)=>({name:`section_${r}`,fn:t(()=>[e(B,null,{default:t(()=>[e(_,{cols:"12",sm:"6"},{default:t(()=>[e(M,{modelValue:d.Name,"onUpdate:modelValue":i=>d.Name=i,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(_,{cols:"12",sm:"6"},{default:t(()=>[e(M,{modelValue:d.Heading,"onUpdate:modelValue":i=>d.Heading=i,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(B,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(Ge,{modelValue:d.Description,"onUpdate:modelValue":i=>d.Description=i,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),d.Fields?(f(),h(un,{key:0,modelValue:s.value.Sections[r],"onUpdate:modelValue":i=>s.value.Sections[r]=i,convention:u.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):x("",!0)])}))]),1032,["modelValue"]))}}),dn=Y({__name:"FormRendererPopup",props:w({convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:w(["update:form"],["update:modelValue"]),setup(n,{emit:s}){const l=n,{convention:u,title:v="",cardClass:d=""}=l,r=K(n,"modelValue"),i=Re(l,s,void 0,void 0,"form"),o=b(Q(i.value));ue(i,()=>{o.value=Q(i.value)});const a=()=>{r.value=!1};return(c,m)=>(f(),h(pl,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=p=>r.value=p),title:I(v),color:"primary","card-class":I(d)},{toolbarButtons:t(()=>[Ie(c.$slots,"toolbarButtons")]),actions:t(()=>[e(k,{color:"blue-darken-1",variant:"text",onClick:a},{default:t(()=>[C(" Close ")]),_:1})]),default:t(()=>[e(mt,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=p=>o.value=p),convention:I(u),preview:c.preview},null,8,["modelValue","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),rn=z("template",{class:"d-none d-sm-inline"},[C("Preview")],-1),cn=Y({__name:"EditFormDialog",props:w({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:w(["update:form"],["update:modelValue"]),setup(n,{emit:s}){const l=n,{convention:u}=l,v=K(n,"modelValue"),d=J(),r=Re(l,s,void 0,void 0,"form"),i=b(!1),o=b(Q(r.value));ue(r,()=>{o.value=Q(r.value)});const a=()=>{d.saveForm(o.value).then(m=>{m&&(r.value=m,v.value=!1)})},c=()=>{i.value=!0};return(m,p)=>(f(),h(Qt,{modelValue:v.value,"onUpdate:modelValue":p[11]||(p[11]=y=>v.value=y),item:o.value,"onUpdate:item":p[12]||(p[12]=y=>o.value=y),onSave:a,"card-class":"pa-0"},{toolbarButtons:t(()=>[e(vt,null,{default:t(()=>[e(k,{"prepend-icon":"mdi:mdi-developer-board",onClick:c},{default:t(()=>[rn]),_:1})]),_:1})]),default:t(()=>[e(Ue,null,{default:t(()=>[e(ke,{class:"mt-0"},{default:t(()=>[e(De,null,{default:t(()=>[C("General Settings")]),_:1}),e(Ee,null,{default:t(()=>[e(B,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(ne,{class:"pa-0",fluid:!0},{default:t(()=>[e(B,null,{default:t(()=>[e(_,{cols:"12",sm:"6"},{default:t(()=>[e(M,{modelValue:o.value.Name,"onUpdate:modelValue":p[0]||(p[0]=y=>o.value.Name=y),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:t(()=>[e(M,{modelValue:o.value.Heading,"onUpdate:modelValue":p[1]||(p[1]=y=>o.value.Heading=y),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(Ge,{modelValue:o.value.Description,"onUpdate:modelValue":p[2]||(p[2]=y=>o.value.Description=y),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:t(()=>[e(He,{modelValue:o.value.Type,"onUpdate:modelValue":p[3]||(p[3]=y=>o.value.Type=y),label:"Type",variant:"outlined",items:I(It),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:t(()=>[e(M,{modelValue:o.value.State.Stage,"onUpdate:modelValue":p[4]||(p[4]=y=>o.value.State.Stage=y),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:t(()=>[e(Ye,{modelValue:o.value.State.New,"onUpdate:modelValue":p[5]||(p[5]=y=>o.value.State.New=y),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:t(()=>[e(Ye,{modelValue:o.value.State.Edit,"onUpdate:modelValue":p[6]||(p[6]=y=>o.value.State.Edit=y),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(Ve,{label:"Required Tags",variant:"outlined",modelValue:o.value.RequiredTags,"onUpdate:modelValue":p[7]||(p[7]=y=>o.value.RequiredTags=y),convention:I(u),organisation:I(u).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o.value?(f(),h(sn,{key:0,modelValue:o.value,"onUpdate:modelValue":p[8]||(p[8]=y=>o.value=y),convention:I(u),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):x("",!0),i.value?(f(),h(dn,{key:1,modelValue:i.value,"onUpdate:modelValue":p[9]||(p[9]=y=>i.value=y),form:o.value,"onUpdate:form":p[10]||(p[10]=y=>o.value=y),convention:I(u),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):x("",!0)]),_:1},8,["modelValue","item"]))}}),mn=(n,s)=>{const l=b(!1),u=b(!1),v=b(n),d=b(-1),r=b(s),i=b(s),o=R(()=>d.value===-1?"New Form":"Edit Form"),a=()=>{v.value=n},c=V=>{d.value=v.value.indexOf(V),r.value=Object.assign({},V),l.value=!0},m=V=>{d.value=v.value.indexOf(V),r.value=Object.assign({},V),u.value=!0},p=()=>{u.value=!1,ze(()=>{r.value=Object.assign({},i.value),d.value=-1}).then()},y=()=>{v.value.splice(d.value,1),p()},T=()=>{l.value=!1,ze(()=>{r.value=Object.assign({},i.value),d.value=-1}).then()},g=()=>{d.value>-1?Object.assign(v.value[d.value],r.value):v.value.push(r.value),T()};return ue(l,V=>{V||T()}),ue(u,V=>{V||p()}),{collection:v,defaultItem:i,dialog:l,dialogDelete:u,editedItem:r,formTitle:o,reset:a,editItem:c,deleteItem:m,deleteItemConfirm:y,close:T,save:g}},vn=Y({__name:"FormEditor",props:{modelValue:{required:!0}},emits:w(["refresh"],["update:modelValue"]),setup(n){const s=K(n,"modelValue"),l=J(),u=b([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),v=b([]),d=b([]);l.getConventionFields(s.value.ConventionUUID).then(q=>{v.value=q}),l.getConventionForms(s.value.ConventionUUID).then(q=>{d.value=q});const r={ID:0,FormUUID:H(),ConventionID:s.value.ID,ConventionUUID:s.value.ConventionUUID,ParentID:0,ParentUUID:ll,Name:"",Heading:"",Description:"",Type:Vl.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:H(),FormID:0,FormUUID:ll,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};r.State.FormUUID=r.FormUUID;const{collection:i,defaultItem:o,dialog:a,dialogDelete:c,editedItem:m,formTitle:p,editItem:y,deleteItem:T,deleteItemConfirm:g,save:V}=mn(d,r);i.value.forEach(q=>{q.Sections.forEach(L=>{var E;(E=L.Fields)==null||E.forEach(N=>{N.Field=v.value.find(X=>X.ID===N.FieldID)})})});const $=q=>{l.deleteForm(q.FormUUID).then(L=>{L&&T(q)})};return(q,L)=>(f(),h(I(rt),{headers:u.value,items:I(i),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:t(()=>[e(se,{color:"primary"},{default:t(()=>[e(me,null,{default:t(()=>[C("Form Editor")]),_:1}),e(Ql,{class:"mx-4",inset:!0,vertical:!0}),e(de),e(k,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:L[0]||(L[0]=E=>{m.value=Object.assign({},I(o)),a.value=!0})},{default:t(()=>[C(" New Item ")]),_:1}),e(dt,{modelValue:I(c),"onUpdate:modelValue":L[1]||(L[1]=E=>Pe(c)?c.value=E:null),onDelete:I(g)},null,8,["modelValue","onDelete"])]),_:1}),I(a)?(f(),h(cn,{key:0,modelValue:I(a),"onUpdate:modelValue":L[2]||(L[2]=E=>Pe(a)?a.value=E:null),form:I(m),"onUpdate:form":[L[3]||(L[3]=E=>Pe(m)?m.value=E:null),I(V)],convention:s.value},null,8,["modelValue","form","onUpdate:form","convention"])):x("",!0)]),"item.actions":t(({item:E})=>[e(W,{size:"small",class:"me-2",onClick:N=>I(y)(E.raw)},{default:t(()=>[C(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),e(W,{size:"small",onClick:N=>$(E.raw)},{default:t(()=>[C(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}});const gl=Symbol.for("vuetify:v-tabs"),fn=Ce({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Dl(Kl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yl=he()({name:"VTab",props:fn(),setup(n,s){let{slots:l,attrs:u}=s;const{textColorClasses:v,textColorStyles:d}=ft(n,"sliderColor"),r=R(()=>n.direction==="horizontal"),i=G(!1),o=b(),a=b();function c(m){var y,T;let{value:p}=m;if(i.value=p,p){const g=(T=(y=o.value)==null?void 0:y.$el.parentElement)==null?void 0:T.querySelector(".v-tab--selected .v-tab__slider"),V=a.value;if(!g||!V)return;const $=getComputedStyle(g).color,q=g.getBoundingClientRect(),L=V.getBoundingClientRect(),E=r.value?"x":"y",N=r.value?"X":"Y",X=r.value?"right":"bottom",ee=r.value?"width":"height",ve=q[E],Ae=L[E],ae=ve>Ae?q[X]-L[X]:q[E]-L[E],Le=Math.sign(ae)>0?r.value?"right":"bottom":Math.sign(ae)<0?r.value?"left":"top":"center",Z=(Math.abs(ae)+(Math.sign(ae)<0?q[ee]:L[ee]))/Math.max(q[ee],L[ee]),ye=q[ee]/L[ee],xe=1.5;Jl(V,{backgroundColor:[$,""],transform:[`translate${N}(${ae}px) scale${N}(${ye})`,`translate${N}(${ae/xe}px) scale${N}(${(Z-1)/xe+1})`,""],transformOrigin:Array(3).fill(Le)},{duration:225,easing:Zl})}}return Se(()=>{const[m]=k.filterProps(n);return e(k,pe({symbol:gl,ref:o,class:["v-tab",n.class],style:n.style,tabindex:i.value?0:-1,role:"tab","aria-selected":String(i.value),active:!1,block:n.fixed,maxWidth:n.fixed?300:void 0,rounded:0},m,u,{"onGroup:selected":c}),{default:()=>{var p;return[((p=l.default)==null?void 0:p.call(l))??n.text,!n.hideSlider&&e("div",{ref:a,class:["v-tab__slider",v.value],style:d.value},null)]}})}),{}}});function al(n){const l=Math.abs(n);return Math.sign(n)*(l/((1/.501-2)*(1-l)+1))}function ol(n){let{selectedElement:s,containerSize:l,contentSize:u,isRtl:v,currentScrollOffset:d,isHorizontal:r}=n;const i=r?s.clientWidth:s.clientHeight,o=r?s.offsetLeft:s.offsetTop,a=v&&r?u-o-i:o,c=l+d,m=i+a,p=i*.4;return a<=d?d=Math.max(a-p,0):c<=m&&(d=Math.min(d-(c-m-p),u-l)),d}function pn(n){let{selectedElement:s,containerSize:l,contentSize:u,isRtl:v,isHorizontal:d}=n;const r=d?s.clientWidth:s.clientHeight,i=d?s.offsetLeft:s.offsetTop,o=v&&d?u-i-r/2-l/2:i+r/2-l/2;return Math.min(u-l,Math.max(0,o))}const Vn=Symbol.for("vuetify:v-slide-group"),Il=Ce({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Vn},nextIcon:{type:el,default:"$next"},prevIcon:{type:el,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...je(),...Xe(),...Gl({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),il=he()({name:"VSlideGroup",props:Il(),emits:{"update:modelValue":n=>!0},setup(n,s){let{slots:l}=s;const{isRtl:u}=rl(),{mobile:v}=El(),d=vl(n,n.symbol),r=G(!1),i=G(0),o=G(0),a=G(0),c=R(()=>n.direction==="horizontal"),{resizeRef:m,contentRect:p}=nl(),{resizeRef:y,contentRect:T}=nl(),g=R(()=>d.selected.value.length?d.items.value.findIndex(D=>D.id===d.selected.value[0]):-1),V=R(()=>d.selected.value.length?d.items.value.findIndex(D=>D.id===d.selected.value[d.selected.value.length-1]):-1);if(Sl){let D=-1;ue(()=>[d.selected.value,p.value,T.value,c.value],()=>{cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(p.value&&T.value){const O=c.value?"width":"height";o.value=p.value[O],a.value=T.value[O],r.value=o.value+1<a.value}if(g.value>=0&&y.value){const O=y.value.children[V.value];g.value===0||!r.value?i.value=0:n.centerActive?i.value=pn({selectedElement:O,containerSize:o.value,contentSize:a.value,isRtl:u.value,isHorizontal:c.value}):r.value&&(i.value=ol({selectedElement:O,containerSize:o.value,contentSize:a.value,isRtl:u.value,currentScrollOffset:i.value,isHorizontal:c.value}))}})})}const $=G(!1);let q=0,L=0;function E(D){const O=c.value?"clientX":"clientY";L=(u.value&&c.value?-1:1)*i.value,q=D.touches[0][O],$.value=!0}function N(D){if(!r.value)return;const O=c.value?"clientX":"clientY",le=u.value&&c.value?-1:1;i.value=le*(L+q-D.touches[0][O])}function X(D){const O=a.value-o.value;i.value<0||!r.value?i.value=0:i.value>=O&&(i.value=O),$.value=!1}function ee(){m.value&&(m.value[c.value?"scrollLeft":"scrollTop"]=0)}const ve=G(!1);function Ae(D){if(ve.value=!0,!(!r.value||!y.value)){for(const O of D.composedPath())for(const le of y.value.children)if(le===O){i.value=ol({selectedElement:le,containerSize:o.value,contentSize:a.value,isRtl:u.value,currentScrollOffset:i.value,isHorizontal:c.value});return}}}function ae(D){ve.value=!1}function Le(D){var O;!ve.value&&!(D.relatedTarget&&((O=y.value)!=null&&O.contains(D.relatedTarget)))&&Z()}function We(D){y.value&&(c.value?D.key==="ArrowRight"?Z(u.value?"prev":"next"):D.key==="ArrowLeft"&&Z(u.value?"next":"prev"):D.key==="ArrowDown"?Z("next"):D.key==="ArrowUp"&&Z("prev"),D.key==="Home"?Z("first"):D.key==="End"&&Z("last"))}function Z(D){var O,le,Je,Ze,Qe;if(y.value)if(!D)(O=xl(y.value)[0])==null||O.focus();else if(D==="next"){const fe=(le=y.value.querySelector(":focus"))==null?void 0:le.nextElementSibling;fe?fe.focus():Z("first")}else if(D==="prev"){const fe=(Je=y.value.querySelector(":focus"))==null?void 0:Je.previousElementSibling;fe?fe.focus():Z("last")}else D==="first"?(Ze=y.value.firstElementChild)==null||Ze.focus():D==="last"&&((Qe=y.value.lastElementChild)==null||Qe.focus())}function ye(D){const O=i.value+(D==="prev"?-1:1)*o.value;i.value=$l(O,0,a.value-o.value)}const xe=R(()=>{let D=i.value>a.value-o.value?-(a.value-o.value)+al(a.value-o.value-i.value):-i.value;i.value<=0&&(D=al(-i.value));const O=u.value&&c.value?-1:1;return{transform:`translate${c.value?"X":"Y"}(${O*D}px)`,transition:$.value?"none":"",willChange:$.value?"transform":""}}),qe=R(()=>({next:d.next,prev:d.prev,select:d.select,isSelected:d.isSelected})),Me=R(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!v.value;case!0:return r.value||Math.abs(i.value)>0;case"mobile":return v.value||r.value||Math.abs(i.value)>0;default:return!v.value&&(r.value||Math.abs(i.value)>0)}}),bl=R(()=>Math.abs(i.value)>0),Ul=R(()=>a.value>Math.abs(i.value)+o.value);return Se(()=>e(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!c.value,"v-slide-group--has-affixes":Me.value,"v-slide-group--is-overflowing":r.value},n.class],style:n.style,tabindex:ve.value||d.selected.value.length?-1:0,onFocus:Le},{default:()=>{var D,O,le;return[Me.value&&e("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!bl.value}],onClick:()=>ye("prev")},[((D=l.prev)==null?void 0:D.call(l,qe.value))??e(tl,null,{default:()=>[e(W,{icon:u.value?n.nextIcon:n.prevIcon},null)]})]),e("div",{key:"container",ref:m,class:"v-slide-group__container",onScroll:ee},[e("div",{ref:y,class:"v-slide-group__content",style:xe.value,onTouchstartPassive:E,onTouchmovePassive:N,onTouchendPassive:X,onFocusin:Ae,onFocusout:ae,onKeydown:We},[(O=l.default)==null?void 0:O.call(l,qe.value)])]),Me.value&&e("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ul.value}],onClick:()=>ye("next")},[((le=l.next)==null?void 0:le.call(l,qe.value))??e(tl,null,{default:()=>[e(W,{icon:u.value?n.prevIcon:n.nextIcon},null)]})])]}})),{selected:d.selected,scrollTo:ye,scrollOffset:i,focus:Z}}});function Tn(n){return n?n.map(s=>typeof s=="string"?{title:s,value:s}:s):[]}const gn=Ce({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Il({mandatory:"force"}),...Hl(),...Xe()},"VTabs"),yn=he()({name:"VTabs",props:gn(),emits:{"update:modelValue":n=>!0},setup(n,s){let{slots:l}=s;const u=Pl(n,"modelValue"),v=R(()=>Tn(n.items)),{densityClasses:d}=jl(n),{backgroundColorClasses:r,backgroundColorStyles:i}=pt(re(n,"bgColor"));return Ol({VTab:{color:re(n,"color"),direction:re(n,"direction"),stacked:re(n,"stacked"),fixed:re(n,"fixedTabs"),sliderColor:re(n,"sliderColor"),hideSlider:re(n,"hideSlider")}}),Se(()=>{const[o]=il.filterProps(n);return e(il,pe(o,{modelValue:u.value,"onUpdate:modelValue":a=>u.value=a,class:["v-tabs",`v-tabs--${n.direction}`,`v-tabs--align-tabs-${n.alignTabs}`,{"v-tabs--fixed-tabs":n.fixedTabs,"v-tabs--grow":n.grow,"v-tabs--stacked":n.stacked},d.value,r.value,n.class],style:[{"--v-tabs-height":Be(n.height)},i.value,n.style],role:"tablist",symbol:gl}),{default:()=>[l.default?l.default():v.value.map(a=>e(yl,pe(a,{key:a.title}),null))]})}),{}}});const In=n=>{const{touchstartX:s,touchendX:l,touchstartY:u,touchendY:v}=n,d=.5,r=16;n.offsetX=l-s,n.offsetY=v-u,Math.abs(n.offsetY)<d*Math.abs(n.offsetX)&&(n.left&&l<s-r&&n.left(n),n.right&&l>s+r&&n.right(n)),Math.abs(n.offsetX)<d*Math.abs(n.offsetY)&&(n.up&&v<u-r&&n.up(n),n.down&&v>u+r&&n.down(n))};function Cn(n,s){var u;const l=n.changedTouches[0];s.touchstartX=l.clientX,s.touchstartY=l.clientY,(u=s.start)==null||u.call(s,{originalEvent:n,...s})}function hn(n,s){var u;const l=n.changedTouches[0];s.touchendX=l.clientX,s.touchendY=l.clientY,(u=s.end)==null||u.call(s,{originalEvent:n,...s}),In(s)}function _n(n,s){var u;const l=n.changedTouches[0];s.touchmoveX=l.clientX,s.touchmoveY=l.clientY,(u=s.move)==null||u.call(s,{originalEvent:n,...s})}function bn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:l=>Cn(l,s),touchend:l=>hn(l,s),touchmove:l=>_n(l,s)}}function Un(n,s){var i;const l=s.value,u=l!=null&&l.parent?n.parentElement:n,v=(l==null?void 0:l.options)??{passive:!0},d=(i=s.instance)==null?void 0:i.$.uid;if(!u||!d)return;const r=bn(s.value);u._touchHandlers=u._touchHandlers??Object.create(null),u._touchHandlers[d]=r,cl(r).forEach(o=>{u.addEventListener(o,r[o],v)})}function kn(n,s){var d,r;const l=(d=s.value)!=null&&d.parent?n.parentElement:n,u=(r=s.instance)==null?void 0:r.$.uid;if(!(l!=null&&l._touchHandlers)||!u)return;const v=l._touchHandlers[u];cl(v).forEach(i=>{l.removeEventListener(i,v[i])}),delete l._touchHandlers[u]}const Cl={mounted:Un,unmounted:kn},Dn=Cl,hl=Symbol.for("vuetify:v-window"),_l=Symbol.for("vuetify:v-window-group"),En=Ce({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...je(),...Xe(),...Rl()},"VWindow"),Sn=he()({name:"VWindow",directives:{Touch:Cl},props:En(),emits:{"update:modelValue":n=>!0},setup(n,s){let{slots:l}=s;const{themeClasses:u}=Fl(n),{isRtl:v}=rl(),{t:d}=wl(),r=vl(n,_l),i=b(),o=R(()=>v.value?!n.reverse:n.reverse),a=G(!1),c=R(()=>{const E=n.direction==="vertical"?"y":"x",X=(o.value?!a.value:a.value)?"-reverse":"";return`v-window-${E}${X}-transition`}),m=G(0),p=b(void 0),y=R(()=>r.items.value.findIndex(E=>r.selected.value.includes(E.id)));ue(y,(E,N)=>{const X=r.items.value.length,ee=X-1;X<=2?a.value=E<N:E===ee&&N===0?a.value=!0:E===0&&N===ee?a.value=!1:a.value=E<N}),Nl(hl,{transition:c,isReversed:a,transitionCount:m,transitionHeight:p,rootRef:i});const T=R(()=>n.continuous||y.value!==0),g=R(()=>n.continuous||y.value!==r.items.value.length-1);function V(){T.value&&r.prev()}function $(){g.value&&r.next()}const q=R(()=>{const E=[],N={icon:v.value?n.nextIcon:n.prevIcon,class:`v-window__${o.value?"right":"left"}`,onClick:r.prev,ariaLabel:d("$vuetify.carousel.prev")};E.push(T.value?l.prev?l.prev({props:N}):e(k,N,null):e("div",null,null));const X={icon:v.value?n.prevIcon:n.nextIcon,class:`v-window__${o.value?"left":"right"}`,onClick:r.next,ariaLabel:d("$vuetify.carousel.next")};return E.push(g.value?l.next?l.next({props:X}):e(k,X,null):e("div",null,null)),E}),L=R(()=>n.touch===!1?n.touch:{...{left:()=>{o.value?V():$()},right:()=>{o.value?$():V()},start:N=>{let{originalEvent:X}=N;X.stopPropagation()}},...n.touch===!0?{}:n.touch});return Se(()=>ml(e(n.tag,{ref:i,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},u.value,n.class],style:n.style},{default:()=>{var E,N;return[e("div",{class:"v-window__container",style:{height:p.value}},[(E=l.default)==null?void 0:E.call(l,{group:r}),n.showArrows!==!1&&e("div",{class:"v-window__controls"},[q.value])]),(N=l.additional)==null?void 0:N.call(l,{group:r})]}}),[[Al("touch"),L.value]])),{group:r}}}),xn=Ce({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...je(),...Xl(),...Vt()},"VWindowItem"),$n=he()({name:"VWindowItem",directives:{Touch:Dn},props:xn(),emits:{"group:selected":n=>!0},setup(n,s){let{slots:l}=s;const u=Ll(hl),v=Wl(n,_l),{isBooted:d}=gt();if(!u||!v)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=G(!1),i=R(()=>d.value&&(u.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function o(){!r.value||!u||(r.value=!1,u.transitionCount.value>0&&(u.transitionCount.value-=1,u.transitionCount.value===0&&(u.transitionHeight.value=void 0)))}function a(){var T;r.value||!u||(r.value=!0,u.transitionCount.value===0&&(u.transitionHeight.value=Be((T=u.rootRef.value)==null?void 0:T.clientHeight)),u.transitionCount.value+=1)}function c(){o()}function m(T){r.value&&ze(()=>{!i.value||!r.value||!u||(u.transitionHeight.value=Be(T.clientHeight))})}const p=R(()=>{const T=u.isReversed.value?n.reverseTransition:n.transition;return i.value?{name:typeof T!="string"?u.transition.value:T,onBeforeEnter:a,onAfterEnter:o,onEnterCancelled:c,onBeforeLeave:a,onAfterLeave:o,onLeaveCancelled:c,onEnter:m}:!1}),{hasContent:y}=Tt(n,v.isSelected);return Se(()=>e(yt,{transition:p.value,disabled:!d.value},{default:()=>{var T;return[ml(e("div",{class:["v-window-item",v.selectedClass.value,n.class],style:n.style},[y.value&&((T=l.default)==null?void 0:T.call(l))]),[[ql,v.isSelected.value]])]}})),{}}}),ya=Y({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(n,{emit:s}){const l=ul(),u=Ml.getInstance(),v=b({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),d=b(),r=b([]);ue(d,()=>{r.value.find(a=>a.id===d.value&&a.title==="General")&&i()});const i=()=>{u==null||u.getConvention(l.params.convention.toString()).then(o=>{o?(v.value=o,s("pageTitle",`Convention Editor - ${v.value.Name}`)):s("pageTitle","Convention Editor - New Convention")})};return r.value=[{id:H(),title:"General",component:G($t),model:v},{id:H(),title:"Accommodation",component:G(ut),model:v},{id:H(),title:"Additional Purchases",component:G(Dt),model:v},{id:H(),title:"Fields",component:G(ct),model:v},{id:H(),title:"Forms",component:G(vn),model:v},{id:H(),title:"Interests",component:G(wt),model:v},{id:H(),title:"Registrations",component:G(st),model:v},{id:H(),title:"Tickets",component:G(Jt),model:v},{id:H(),title:"Venues",component:G(it),model:v}],s("pageTitle","Convention Editor"),i(),(o,a)=>v.value?(f(),U(S,{key:0},[e(se,{color:"blue-darken-4"},{default:t(()=>[e(yn,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=c=>d.value=c),"show-arrows":""},{default:t(()=>[(f(!0),U(S,null,j(r.value,c=>(f(),h(yl,{key:c.id,value:c.id},{default:t(()=>[C(F(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(Sn,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=c=>d.value=c)},{default:t(()=>[(f(!0),U(S,null,j(r.value,c=>(f(),h($n,{key:c.id,value:c.id},{default:t(()=>[c.id===d.value?(f(),h(ce,{key:0,class:"pa-2"},{default:t(()=>[(f(),h(zl(c.component),{modelValue:c.model,"onUpdate:modelValue":m=>c.model=m},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):x("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(f(),U(S,{key:1},[C(" Convention Not Found ")],64))}});export{ya as default};
