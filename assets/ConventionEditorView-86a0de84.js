var Pt=Object.defineProperty;var xt=(l,r,e)=>r in l?Pt(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e;var pe=(l,r,e)=>(xt(l,typeof r!="symbol"?r+"":r,e),e);import{s as N}from"./index-ba0d422e.js";import{d as B,X as R,Y as K,y as D,R as Q,o as p,b as h,w as n,c as t,e as C,L as T,K as P,h as F,N as b,F as S,O as j,G as O,f as z,H as ie,m as Ie,V as dt,D as $t,M as ct,k as se,$ as he,Z as Ae,a0 as mt,z as Ke,p as De,a1 as wt,a as ye,s as G,a2 as nt,u as vt,v as At,a3 as Ft,a4 as Ot,I as Rt,x as Lt,t as de,B as Nt,i as Ge,a5 as ft,n as Mt,q as qt,a6 as zt,a7 as Bt,a8 as pt,a9 as Yt,aa as Kt,ab as Gt,W as Ht,ac as jt}from"./index-0085e4e0.js";import{m as Le,a as Ne,s as Oe,u as Re,F as Xt,V as He,_ as Wt}from"./FormField.vue_vue_type_script_setup_true_lang-ae50e20a.js";import{u as J}from"./useGrazeAPI-df8c1e39.js";import{_ as Ue,N as ot}from"./SelectTags.vue_vue_type_script_setup_true_lang-1e8bc0b8.js";import{_ as be}from"./SaveButton.vue_vue_type_script_setup_true_lang-0560d0dd.js";import{e as ce,c as Ve}from"./VCard-5c28dba8.js";import{V as _,a as W,m as Jt,b as Zt,c as gt,d as Qt,e as el,f as tl,g as ll}from"./VBtn-1a4cf250.js";import{V as me,b as ue}from"./VToolbar-fbfc308f.js";import{V as re}from"./VSpacer-aa9e32e7.js";import{V as Te}from"./VSheet-d98c0058.js";import{V as ne}from"./VContainer-5c295873.js";import{V as q,a as nl,s as ol}from"./VTextField-3b0954d6.js";import{V as _e}from"./VDialog-200449af.js";import{V as Me,d as le,a as ae,e as je,b as al}from"./VList-b7d80e38.js";import{a as Y,V as y}from"./VRow-b02a39ca.js";import{v as H}from"./v4-a960c1f4.js";import{V as ke,a as Ee,b as Se,c as Pe}from"./VExpansionPanel-5d7289c6.js";import{V as It}from"./VImg-3a226b68.js";import{V as il}from"./VForm-b44e1711.js";import{V as sl}from"./VFileInput-038ebdd5.js";import{V as Xe}from"./VTextarea-3c843272.js";import{T as w,a as ul}from"./ticket-b671e8ba.js";import{V as rl}from"./VAutocomplete-fb002900.js";import{V as We}from"./VSelect-f0602ef2.js";import{V as dl,a as cl}from"./VChip-245ad5a6.js";import{_ as ml}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-fab5d697.js";import{_ as vl}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-5f01afe6.js";import{_ as Ut,a as fl,V as Vt,b as pl}from"./FieldEditor.vue_vue_type_script_setup_true_lang-992375a6.js";import{_ as gl}from"./FormRenderer.vue_vue_type_script_setup_true_lang-2afb093f.js";import{V as Il,a as at}from"./index-caa33a51.js";import{i as Ul,u as xe,m as Je,d as Ze,j as it,f as Vl}from"./rounded-5da1b7ec.js";import{m as Tl,u as Cl}from"./VOverlay-17ca2d9e.js";import{u as hl}from"./ssrBoot-3be527e0.js";import{M as Dl}from"./index-2624a541.js";import"./scopeId-f660b109.js";import"./createSimpleFunctional-12293369.js";import"./VAvatar-9561e478.js";import"./VTable-1a47aff7.js";import"./userData-d733b0cf.js";const yl=[{ID:1,AdminLayoutUUID:"",ConventionID:1,ConventionUUID:"97d5c243-674f-47f3-abc0-9eb5dca4316f",Name:"Registration Table",Type:"table",Panels:[{ID:1,LayoutPanelUUID:"",AdminLayoutID:1,AdminLayoutUUID:"",Items:[{ID:1,LayoutItemUUID:"a",LayoutPanelID:1,LayoutPanelUUID:"",Label:"",SectionFieldID:13,SectionFieldUUID:"8a14640f-d443-4b9c-8a5b-3afbd9e6c2b9",Align:"start"},{ID:2,LayoutItemUUID:"b",LayoutPanelID:1,LayoutPanelUUID:"",Label:"",SectionFieldID:19,SectionFieldUUID:"9b9b40ba-7e88-4456-9bfa-63a7db70012f",Align:"start"},{ID:3,LayoutItemUUID:"c",LayoutPanelID:1,LayoutPanelUUID:"",Label:"",SectionFieldID:23,SectionFieldUUID:"229f72c6-a3c2-4f18-8c23-edbe8b7eae78",Align:"start"}]}]}],bl=(l,r)=>{const e=new Map;l.forEach(d=>{const a=r(d);a&&e.set(a.toString(),[...e.get(a.toString())||[],d])});const o={};return e.forEach((d,a)=>{o[a]=d}),o},_l=[],kl=yl,El=[],Sl=[],ge=class extends Object{constructor(){super();pe(this,"accommodation");pe(this,"adminLayouts");pe(this,"conventions");pe(this,"conventionTags");this.accommodation=_l,this.adminLayouts=kl,this.conventions=El,this.conventionTags=Sl}static getInstance(){return ge.instance===void 0&&(ge.instance=new ge),ge.instance}deleteCredential(e){return Promise.resolve(!1)}getConvention(e){return console.warn(`StubAPI: getConvention("${e}")`),new Promise(o=>{const d=this.conventions.find(a=>a.ConventionUUID===e||a.Slug===e);d&&(d.Accommodation=this.accommodation.filter(a=>a.ConventionUUID===d.ConventionUUID),o(d)),o(void 0)})}getConventionAccommodation(e){return console.warn(`StubAPI: getConventionAccommodation("${e}")`),new Promise(o=>{o(this.accommodation.filter(d=>d.ConventionUUID===e))})}getConventionAdminLayout(e,o){return new Promise(d=>{d(this.adminLayouts.find(a=>a.ConventionUUID===e&&a.Name===o))})}getConventionExtras(e){return console.warn(`StubAPI: getConventionExtras("${e}")`),new Promise(o=>{const d=this.conventions.flatMap(a=>a.ConventionUUID===e?a.Extras||[]:[]);d.forEach(a=>{var c;(c=a.Options)==null||c.forEach(u=>{var s,i;(((s=u.Choices)==null?void 0:s.length)||0)>(((i=u.Choices)==null?void 0:i.length)||0)&&(u.Choices=this.conventionTags.filter(v=>{var m;return(m=u.Choices)==null?void 0:m.find(f=>f.TagUUID===v.TagUUID)}))})}),o(d)})}getConventionInterests(e){return console.warn(`StubAPI: getConventionInterests("${e}")`),new Promise(o=>{o(this.conventions.flatMap(d=>d.ConventionUUID===e?d.Interests||[]:[]))})}getConventionList(e){return console.warn(`StubAPI: getConventionList("${e}")`),new Promise(o=>{o(this.conventions.filter(d=>d.OrganisationUUID===e))})}getInterestsByUUID(e,o){return console.warn(`StubAPI: getInterestsById(["${o.join('","')}"])`),new Promise(d=>{d(this.conventions.flatMap(a=>a.Interests||[]).filter(a=>o.includes(a.InterestUUID)))})}getLoginURLs(e){throw new Error("Method not implemented.")}getProfile(){throw new Error("Method not implemented.")}oAuthLogin(e,o,d,a,c){throw console.warn(`StubAPI: oAuthLogin("${e}", "${o}", "${d}", "${a}")`),new Error("Method not implemented.")}registerAccount(e,o){throw console.warn(`StubAPI: registerAccount("${e}", "${o}")`),new Error("Method not implemented.")}saveInterest(e){return console.warn(`StubAPI: saveInterest({${e}})`),new Promise((o,d)=>{const a=this.conventions.find(c=>c.ConventionUUID===e.ConventionUUID);if(!a)d("convention not found");else if(!a.Interests)a.Interests=[e];else{let c;(c=a.Interests.findIndex(u=>u.InterestUUID===e.InterestUUID))>-1&&a.Interests.splice(c,1),a.Interests.push(e)}o(e)})}saveExtras(e,o=!1,d=""){return console.warn(`StubAPI: saveExtras("${d}")`),this.saveCollection("Extras",e,o,d)}saveInterests(e,o=!1,d=""){return console.warn(`StubAPI: saveInterests("${d}")`),this.saveCollection("Interests",e,o,d)}saveTickets(e,o=!1,d=""){return console.warn(`StubAPI: saveTickets("${d}")`),this.saveCollection("Tickets",e,o,d)}saveCollection(e,o,d=!1,a=""){return console.warn(`StubAPI: saveCollection("${e}", [{${o.map(c=>c.Name)}.join("},{")}], ${d?"true":"false"}, "${a}")`),new Promise((c,u)=>{o.forEach(i=>{i.ConventionUUID===""&&(a!==""?i.ConventionUUID=a:u("missing convention id on interest and no default specified"))});const s=bl(o,i=>i.ConventionUUID);Object.keys(s).forEach(i=>{const v=s[i],m=this.conventions.find(f=>f.ConventionUUID===i);m&&(d?m[e]=v:v.forEach(f=>{if(m[e]===void 0)m[e]=[f];else{const U=m[e].findIndex(I=>I.ConventionUUID===f.ConventionUUID);if(U&&U>=0){m[e][U]=f;return}m[e].push(f)}}))}),c(o)})}saveProfile(e,o,d){throw new Error("Method not implemented.")}validateAccount(e){throw console.warn(`StubAPI: validateAccount("${e}")`),new Error("Method not implemented.")}deleteExtra(e){return Promise.resolve(!1)}deleteField(e){return Promise.resolve(!1)}deleteForm(e){return Promise.resolve(!1)}deleteInterest(e){return Promise.resolve(!1)}deleteRoom(e){return Promise.resolve(!1)}deleteTicket(e){return Promise.resolve(!1)}getConventionFields(e){return Promise.resolve([])}getConventionForms(e){return Promise.resolve([])}getConventionTags(e){return Promise.resolve([])}getConventionTickets(e){return Promise.resolve([])}getConventionVenues(e){return Promise.resolve([])}getOrganisation(e){return Promise.resolve(void 0)}getOrganisationTags(e){return Promise.resolve([])}getOrganisations(){return Promise.resolve([])}getVenueRooms(e){return Promise.resolve([])}saveAccommodation(e){return Promise.resolve(void 0)}saveConvention(e){return Promise.resolve(void 0)}saveExtra(e){return Promise.resolve(void 0)}saveField(e){return Promise.resolve(void 0)}saveForm(e){return Promise.resolve(void 0)}saveOrganisation(e){return Promise.resolve(void 0)}saveRoom(e){return Promise.resolve(void 0)}saveTag(e){return Promise.resolve(void 0)}saveTicket(e){return Promise.resolve(void 0)}saveVenue(e){return Promise.resolve(void 0)}deleteAccommodation(e){return Promise.resolve(!1)}deleteVenue(e){return Promise.resolve(!1)}deleteConvention(e){return Promise.resolve(!1)}deleteOrganisation(e){return Promise.resolve(!1)}deleteSubmission(e){return Promise.resolve(!1)}getConventionSubmissions(e){return Promise.resolve(void 0)}getSubmission(e){return Promise.resolve(void 0)}getUserConventionSubmissions(e,o){return Promise.resolve(void 0)}getUserSubmissions(e){return Promise.resolve(void 0)}saveSubmission(e){return Promise.resolve(void 0)}};let Fe=ge;pe(Fe,"instance");var Tt=(l=>(l.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",l.FORM_TYPE_BADGE="BADGE",l.FORM_TYPE_DEALER="DEALER",l.FORM_TYPE_REGISTRATION="REGISTRATION",l.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",l))(Tt||{});const Pl=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],xl=B({__name:"EditConventionExtraOptions",props:R({convention:{}},{modelValue:{}}),emits:R(["close"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=D(Q(e.value)),d=()=>{e.value=o.value,r("close")};return(a,c)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[t(_,{icon:"",dark:"",onClick:c[0]||(c[0]=u=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:n(()=>[C("Edit Option Choice")]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:d},{default:n(()=>[C(" Apply ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:n(()=>[t(ne,null,{default:n(()=>[t(q,{label:T(N).formLabelName,type:"text",variant:"outlined",modelValue:o.value.Name,"onUpdate:modelValue":c[1]||(c[1]=u=>o.value.Name=u)},null,8,["label","modelValue"]),t(q,{label:T(N).formLabelDescription,type:"text",variant:"outlined",modelValue:o.value.Description,"onUpdate:modelValue":c[2]||(c[2]=u=>o.value.Description=u)},null,8,["label","modelValue"]),t(q,{label:T(N).formLabelPrice,type:"text",variant:"outlined","prepend-icon":T(N).currencyIcon,modelValue:o.value.Price,"onUpdate:modelValue":c[3]||(c[3]=u=>o.value.Price=u),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),o.value.Choices?(p(),h(Ue,{key:0,modelValue:o.value.Choices,"onUpdate:modelValue":c[4]||(c[4]=u=>o.value.Choices=u),convention:a.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):P("",!0)]),_:1})]),_:1})]),_:1}))}}),$l=z("h3",null,"Options",-1),wl=B({__name:"EditConventionExtra",props:R({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=D(Q(r.value)),o=D(!1),d=D(0),a=J(),c=D([""]),u=D([]),s=D([]);l.convention&&(a.getConventionTags(l.convention.ConventionUUID).then(I=>{s.value=I.sort((V,g)=>V.Title.localeCompare(g.Title))}),a.getOrganisationTags(l.convention.OrganisationUUID).then(I=>{u.value=I.sort((V,g)=>V.Title.localeCompare(g.Title))}));const i=F(()=>[...u.value,...s.value]),v=({callback:I})=>{a.saveExtra(e.value).then(V=>{V?(r.value=V,I&&I("Extra Saved")):I&&I("Failed to Save Extra")}).catch(()=>{I&&I("Failed to Save Extra")})},m=I=>{var V;I.Options||(I.Options=[]),I.Options.push({ID:0,OptionUUID:H(),ExtraID:I.ID,ExtraUUID:I.ExtraUUID,Order:((V=I.Options)==null?void 0:V.length)+1,Name:"",Description:"",Price:0,Choices:[]})},f=(I,V)=>{I.Options&&I.Options.splice(V,1)},U=I=>{if(I.Choices&&I.Choices.length>0)return I.Choices.map(V=>{const g=i.value.find(x=>x.TagUUID===V.TagUUID);if(g)return g.Title}).join(", ")};return(I,V)=>(p(),b(S,null,[t(ne,{class:"px-0"},{default:n(()=>[t(q,{label:T(N).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":V[0]||(V[0]=g=>e.value.Name=g)},null,8,["label","modelValue"]),t(q,{label:T(N).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":V[1]||(V[1]=g=>e.value.Description=g)},null,8,["label","modelValue"]),t(Ue,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":V[2]||(V[2]=g=>e.value.AppliesTags=g),convention:I.convention,organisation:I.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),$l,t(Me,{opened:c.value,"onUpdate:opened":V[3]||(V[3]=g=>c.value=g)},{default:n(()=>[(p(!0),b(S,null,j(e.value.Options,(g,x)=>(p(),b(S,{key:g.ID},[g?(p(),h(ae,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${g.Name} ${g.Price&&g.Price>0?`(${T(N).currencySymbol}${g.Price})`:""}`},{append:n(()=>[t(_,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:$=>f(e.value,x)},null,8,["onClick"]),t(_,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:$=>{o.value=!0,d.value=x}},null,8,["onClick"])]),default:n(()=>[g.Choices&&g.Choices.length>0?(p(),h(le,{key:0},{default:n(()=>[C(" Options: "+O(U(g)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:1},8,["opened"]),t(_,{color:"primary",onClick:V[4]||(V[4]=g=>m(e.value))},{default:n(()=>[C("Add Option")]),_:1}),t(Y,null,{default:n(()=>[t(y,{class:"text-right"},{default:n(()=>[t(be,{onClick:v})]),_:1})]),_:1})]),_:1}),t(_e,{modelValue:o.value,"onUpdate:modelValue":V[7]||(V[7]=g=>o.value=g),scrollable:""},{default:n(()=>[t(xl,{modelValue:e.value.Options[d.value],"onUpdate:modelValue":V[5]||(V[5]=g=>e.value.Options[d.value]=g),convention:I.convention,onClose:V[6]||(V[6]=g=>o.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Al=B({__name:"EditConventionExtras",props:R({convention:{}},{modelValue:{required:!0}}),emits:R(["close"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=J(),d=()=>{const u={ID:0,ExtraUUID:H(),ConventionID:l.convention.ID,ConventionUUID:l.convention.ConventionUUID,Order:e.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};o.saveExtra(u).then(s=>{s&&e.value.push(s)})},a=u=>{o.deleteExtra(e.value[u].ExtraUUID).then(s=>{s&&e.value.splice(u,1)})},c=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveExtra(e.value[s])})};return(u,s)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=i=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:n(()=>[C("Edit Extras")]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:d},{default:n(()=>[C(" Add ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:n(()=>[t(ke,null,{default:n(()=>[(p(!0),b(S,null,j(e.value,(i,v)=>(p(),h(Ee,{key:i.ID,class:"mt-0"},{default:n(()=>[t(Se,null,{actions:n(({expanded:m})=>[t(_,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:f=>a(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>{T(Le)(i,e.value),c(v,v-1)},["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>{T(Ne)(i,e.value),c(v,v+1)},["stop"])},null,8,["onClick"]),C(" "+O(i.Name)+" ",1)]),_:2},1024),t(Pe,{class:"px-0"},{default:n(()=>[t(wl,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":m=>e.value[v]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Fl=z("h3",null,"Additional Purchases",-1),Ol=z("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Rl=B({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=D([]),o=J(),d=D([""]),a=D(!1),c=s=>{if(s.Choices&&s.Choices.length>0)return s.Choices.map(i=>i.Title).join(", ")},u=()=>{a.value=!1};return o==null||o.getConventionExtras(r.value.ConventionUUID||"").then(s=>{s&&(e.value=s)}),(s,i)=>(p(),b(S,null,[t(ne,{fluid:!0,class:"px-0"},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[Fl]),_:1}),t(y,{class:"text-right"},{default:n(()=>[t(_,{color:"primary",onClick:i[0]||(i[0]=v=>a.value=!0)},{default:n(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ol,t(Me,{opened:d.value,"onUpdate:opened":i[1]||(i[1]=v=>d.value=v)},{default:n(()=>[(p(!0),b(S,null,j(e.value,v=>(p(),h(je,{key:v.ID,value:v.ID},{activator:n(({props:m})=>[t(ae,Ie(m,{"prepend-icon":"mdi:mdi-group",title:v.Name}),null,16,["title"])]),default:n(()=>[v.Options?(p(!0),b(S,{key:0},j(v.Options,m=>(p(),h(ae,{key:m.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${m.Name} ${m.Price&&m.Price>0?`(${T(N).currencySymbol}${m.Price})`:""}`},{default:n(()=>[m.Choices&&m.Choices.length>0?(p(),h(le,{key:0},{default:n(()=>[C(" Options: "+O(c(m)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(_e,{modelValue:a.value,"onUpdate:modelValue":i[3]||(i[3]=v=>a.value=v),scrollable:!0},{default:n(()=>[t(Al,{modelValue:e.value,"onUpdate:modelValue":i[2]||(i[2]=v=>e.value=v),convention:r.value,onClose:u},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Ll=B({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:R(["close"],["update:modelValue"]),setup(l,{emit:r}){const e=J(),o=ct(),d=K(l,"modelValue"),a=D(Q(d.value)),c=D(`${o.GetConventionLogoURL(a.value.ConventionUUID)}?${new Date().getTime()}`),u=D(),s=D(),i=dt(),v=$t(),m=()=>{a.value=JSON.parse(JSON.stringify(d.value))},f=async()=>{var g;const V=new FormData((g=s.value)==null?void 0:g.$el);if(V.get("Image")&&V.get("Image").size>0)return V.set("ConventionUUID",a.value.ConventionUUID),await o.SaveConventionLogo(V)},U=()=>{f(),e.saveConvention(a.value).then(()=>{const V=d.value.Slug,g=a.value.Slug;d.value=a.value,V!==g&&v.push(`/dashboard/admin/${i.params.organisation.toString()}/convention/${a.value.Slug}`),r("close")})},I=()=>{c.value=URL.createObjectURL(u.value.files[0])};return(V,g)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[t(_,{icon:"",dark:"",onClick:g[0]||(g[0]=x=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:n(()=>[C("Convention Settings")]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:m},{default:n(()=>[C(" Reset ")]),_:1}),t(_,{variant:"text",onClick:U},{default:n(()=>[C(" Save ")]),_:1})]),_:1})]),_:1}),t(Ve,null,{default:n(()=>[t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(It,{class:"imgLogo mx-auto",src:c.value||""},null,8,["src"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(q,{label:T(N).formLabelName,name:"Name",variant:"outlined",modelValue:a.value.Name,"onUpdate:modelValue":g[1]||(g[1]=x=>a.value.Name=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(q,{label:T(N).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:a.value.Description,"onUpdate:modelValue":g[2]||(g[2]=x=>a.value.Description=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(q,{label:T(N).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:a.value.DetailLink,"onUpdate:modelValue":g[3]||(g[3]=x=>a.value.DetailLink=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(q,{label:T(N).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:a.value.Slug,"onUpdate:modelValue":g[4]||(g[4]=x=>a.value.Slug=x)},null,8,["label","modelValue"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[t(il,{ref_key:"conventionImageForm",ref:s,enctype:"multipart/form-data"},{default:n(()=>[t(sl,{label:T(N).formLabelLogo,name:"Image",variant:"outlined",ref_key:"imageFileInput",ref:u,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":"",onChange:I},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const Nl=z("h3",null,"General Details",-1),Ml=["href"],ql=B({__name:"General",props:{modelValue:{required:!0}},emits:R(["refresh"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=ct(),d=F(()=>e.value.ConventionUUID?o.GetConventionLogoURL(e.value.ConventionUUID):""),a=D(!1),c=()=>{a.value=!1,r("refresh")};return(u,s)=>(p(),b(S,null,[t(ne,{fluid:!0,class:"px-0"},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[Nl]),_:1}),t(y,{class:"text-right"},{default:n(()=>[t(_,{color:"primary",onClick:s[0]||(s[0]=i=>a.value=!0)},{default:n(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),z("p",null,[d.value?(p(),h(It,{key:0,src:d.value,title:e.value.Name},null,8,["src","title"])):P("",!0)]),z("h3",null,O(e.value.Name),1),z("p",null,O(e.value.Description),1),z("p",null,[e.value.DetailLink?(p(),b("a",{key:0,href:e.value.DetailLink},"More Details",8,Ml)):P("",!0)]),t(_e,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value=i),scrollable:!0},{default:n(()=>[t(Ll,{onClose:c,modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=i=>e.value=i)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),zl=B({__name:"EditConventionInterest",props:R({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=D(Q(r.value)),o=J(),d=({callback:a})=>{o.saveInterest(e.value).then(c=>{c?(r.value=c,a&&a("Interest Saved")):a&&a("Failed to Save Interest")}).catch(()=>{a&&a("Failed to Save Interest")})};return(a,c)=>(p(),h(ne,{class:"px-0"},{default:n(()=>[t(q,{label:T(N).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":c[0]||(c[0]=u=>e.value.Name=u)},null,8,["label","modelValue"]),t(Xe,{label:T(N).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":c[1]||(c[1]=u=>e.value.Description=u)},null,8,["label","modelValue"]),P("",!0),t(Ue,{modelValue:e.value.AppliesTags,"onUpdate:modelValue":c[3]||(c[3]=u=>e.value.AppliesTags=u),convention:a.convention,organisation:a.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),t(Y,null,{default:n(()=>[t(y,{class:"text-right"},{default:n(()=>[t(be,{onClick:d})]),_:1})]),_:1})]),_:1}))}}),Bl=B({__name:"EditConventionInterests",props:R({convention:{}},{modelValue:{required:!0}}),emits:R(["close"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=J(),d=()=>{const u={ID:0,InterestUUID:H(),ConventionID:l.convention.ID,ConventionUUID:l.convention.ConventionUUID,Order:e.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};o.saveInterest(u).then(s=>{s&&e.value.push(s)})},a=u=>{o.deleteInterest(e.value[u].InterestUUID).then(s=>{s&&e.value.splice(u,1)})},c=(...u)=>{u.forEach(s=>{s>=0&&s<e.value.length&&o.saveInterest(e.value[s])})};return(u,s)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=i=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:n(()=>[C("Edit Interests")]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:d},{default:n(()=>[C(" Add ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:n(()=>[t(ke,null,{default:n(()=>[(p(!0),b(S,null,j(e.value,(i,v)=>(p(),h(Ee,{key:i.ID,class:"mt-0"},{default:n(()=>[t(Se,null,{actions:n(({expanded:m})=>[t(be,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>a(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>{T(Le)(i,e.value),c(v,v-1)},["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>{T(Ne)(i,e.value),c(v,v+1)},["stop"])},null,8,["onClick"]),C(" "+O(i.Name)+" ",1)]),_:2},1024),t(Pe,{class:"px-0"},{default:n(()=>[t(zl,{convention:u.convention,modelValue:e.value[v],"onUpdate:modelValue":m=>e.value[v]=m},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Yl=z("h3",null,"Interests",-1),Kl=z("p",null,"Attendees can tag themselves for particular things.",-1),Gl=B({__name:"Interests",props:{modelValue:{required:!0}},emits:R(["refresh"],["update:modelValue"]),setup(l){const r=K(l,"modelValue"),e=J(),o=D([]);e.getConventionInterests(r.value.ConventionUUID).then(c=>{Oe(c),o.value=c});const d=D([""]),a=D(!1);return(c,u)=>(p(),b(S,null,[t(ne,{fluid:!0,class:"px-0"},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[Yl]),_:1}),t(y,{class:"text-right"},{default:n(()=>[t(_,{color:"primary",onClick:u[0]||(u[0]=s=>a.value=!0)},{default:n(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Kl,t(Me,{opened:d.value,"onUpdate:opened":u[1]||(u[1]=s=>d.value=s)},{default:n(()=>[(p(!0),b(S,null,j(o.value,s=>(p(),h(ae,{key:s.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${s.Name} ${s.Price&&s.Price>0?`(${T(N).currencySymbol}${s.Price})`:""}`},{default:n(()=>[s.Description?(p(),h(le,{key:0},{default:n(()=>[C(O(s.Description),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),t(_e,{modelValue:a.value,"onUpdate:modelValue":u[4]||(u[4]=s=>a.value=s),scrollable:!0},{default:n(()=>[t(Bl,{onClose:u[2]||(u[2]=s=>a.value=!1),convention:r.value,modelValue:o.value,"onUpdate:modelValue":u[3]||(u[3]=s=>o.value=s)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),we=B({__name:"SelectTickets",props:R({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=d=>d.Type===w.TICKET_TYPE_GROUP?"mdi:mdi-group":d.Type===w.TICKET_TYPE_TICKET?d.RequiresAccommodation?"mdi:mdi-home":d.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":d.Type===w.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":d.Type===w.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",o=F(()=>l.tickets.map(d=>({title:d.Name,value:r.value.find(a=>a&&a.TicketUUID===d.TicketUUID)||d,props:{appendIcon:e(d)}})));return(d,a)=>(p(),b("div",null,[t(rl,{label:d.label,variant:d.variant||"filled",items:o.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c),hint:d.hint,chips:d.chips,clearable:d.clearable,multiple:"","persistent-hint":d.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),Hl=z("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),jl=B({__name:"EditConventionTicket",props:R({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=D(Q(r.value)),o=J(),d=F(()=>l.tickets.filter(i=>i.Type===w.TICKET_TYPE_TICKET)),a=F(()=>l.tickets.filter(i=>i.Type===w.TICKET_TYPE_ADD_ON)),c=F(()=>l.tickets.filter(i=>i.Type===w.TICKET_TYPE_TICKET_COMPONENT)),u=i=>l.accommodation.filter(v=>v.Costs.find(m=>m.DateStart===i.DateStart&&m.DateEnd===i.DateEnd)),s=({callback:i})=>{o.saveTicket(e.value).then(v=>{v?(e.value.ID=v.ID,e.value.TicketUUID=v.TicketUUID,r.value=e.value,i&&i("Ticket Saved")):i&&i("Failed to Save Ticket")}).catch(()=>{i&&i("Failed to Save Ticket")})};return(i,v)=>(p(),h(ne,{class:"px-0",fluid:""},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,{cols:"12"},{default:n(()=>[t(We,{label:"Ticket Type",variant:"outlined",modelValue:e.value.Type,"onUpdate:modelValue":v[0]||(v[0]=m=>e.value.Type=m),items:T(ul),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(q,{label:T(N).formLabelName,type:"text",variant:"outlined",modelValue:e.value.Name,"onUpdate:modelValue":v[1]||(v[1]=m=>e.value.Name=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(q,{label:T(N).formLabelDescription,type:"text",variant:"outlined",modelValue:e.value.Description,"onUpdate:modelValue":v[2]||(v[2]=m=>e.value.Description=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e.value.Type!==T(w).TICKET_TYPE_GROUP?(p(),b(S,{key:0},[t(y,{cols:"12"},{default:n(()=>[t(q,{label:T(N).formLabelDateStart,type:"date",variant:"outlined",modelValue:e.value.DateStart,"onUpdate:modelValue":v[3]||(v[3]=m=>e.value.DateStart=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(q,{label:T(N).formLabelDateEnd,type:"date",variant:"outlined",modelValue:e.value.DateEnd,"onUpdate:modelValue":v[4]||(v[4]=m=>e.value.DateEnd=m),"hide-details":""},null,8,["label","modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(q,{label:T(N).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":T(N).currencyIcon,modelValue:e.value.Price,"onUpdate:modelValue":v[5]||(v[5]=m=>e.value.Price=m),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(p(),h(y,{key:1,cols:"12"},{default:n(()=>[t(we,{label:"Tickets",variant:"outlined",tickets:d.value,modelValue:e.value.Tickets,"onUpdate:modelValue":v[6]||(v[6]=m=>e.value.Tickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),t(y,{cols:"12"},{default:n(()=>[t(Ue,{label:"Applied Tags",variant:"outlined",modelValue:e.value.AppliesTags,"onUpdate:modelValue":v[7]||(v[7]=m=>e.value.AppliesTags=m),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(Ue,{label:"Required Tags",variant:"outlined",modelValue:e.value.RequiredTags,"onUpdate:modelValue":v[8]||(v[8]=m=>e.value.RequiredTags=m),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e.value.Type===T(w).TICKET_TYPE_TICKET?(p(),b(S,{key:2},[t(y,{cols:"12"},{default:n(()=>[t(q,{label:"Components Required",type:"number",variant:"outlined",modelValue:e.value.ComponentsRequired,"onUpdate:modelValue":v[9]||(v[9]=m=>e.value.ComponentsRequired=m),modelModifiers:{number:!0},"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(we,{label:"Components",variant:"outlined",tickets:c.value,modelValue:e.value.TicketComponents,"onUpdate:modelValue":v[10]||(v[10]=m=>e.value.TicketComponents=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(we,{label:"Addons",variant:"outlined",tickets:a.value,modelValue:e.value.AddonTickets,"onUpdate:modelValue":v[11]||(v[11]=m=>e.value.AddonTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):P("",!0),t(y,{cols:"12"},{default:n(()=>[t(we,{label:"Disables Tickets",variant:"outlined",tickets:i.tickets,modelValue:e.value.DisablesTickets,"onUpdate:modelValue":v[12]||(v[12]=m=>e.value.DisablesTickets=m),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),u(e.value).length?(p(),h(Y,{key:0,class:"align-center",dense:!0},{default:n(()=>[t(y,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:n(()=>[Hl]),_:1}),t(y,{class:"flex-grow-1"},{default:n(()=>[t(dl,null,{default:n(()=>[(p(!0),b(S,null,j(u(e.value),m=>(p(),h(cl,{key:m.ID,title:"Automatically calculated",disabled:!0},{default:n(()=>[C(O(m.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):P("",!0),t(Y,null,{default:n(()=>[t(y,{class:"text-right"},{default:n(()=>[t(be,{onClick:s})]),_:1})]),_:1})]),_:1}))}}),Xl={class:"pr-2"},Wl={class:"mb-2"},Jl={key:0,class:"text-grey-darken-1 font-italic"},Zl={key:1,class:"text-red"},Ql={key:0,class:"text-grey-darken-1 font-italic"},en={key:1,class:"text-red"},tn={key:0,class:"text-grey-darken-1 font-italic"},ln={key:1,class:"text-red"},nn={class:"text-grey-darken-1"},on=B({__name:"EditConventionTickets",props:R({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:R(["close"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=J(),d=()=>{e.value.push({ID:0,TicketUUID:H(),ConventionID:l.convention.ID,ConventionUUID:l.convention.ConventionUUID,Order:e.value.length+1,Name:"New Ticket",Type:w.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},a=u=>{o.deleteTicket(e.value[u].TicketUUID).then(s=>{s&&e.value.splice(u,1)})},c=u=>u.Type===w.TICKET_TYPE_GROUP?"mdi:mdi-group":u.Type===w.TICKET_TYPE_TICKET?u.RequiresAccommodation?"mdi:mdi-home":u.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":u.Type===w.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":u.Type===w.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(u,s)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[t(_,{icon:"",dark:"",onClick:s[0]||(s[0]=i=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1}),t(me,null,{default:n(()=>[C("Edit Tickets")]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:d},{default:n(()=>[C(" Add Ticket ")]),_:1})]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:n(()=>[t(ke,null,{default:n(()=>[(p(!0),b(S,null,j(e.value,(i,v)=>(p(),h(Ee,{key:i.ID,class:"mt-0"},{default:n(()=>[t(Se,{class:"py-2"},{actions:n(({expanded:m})=>[t(be,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:f=>a(v)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:m?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(m=>T(Le)(i,e.value),["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(m=>T(Ne)(i,e.value),["stop"])},null,8,["onClick"]),z("div",Xl,[t(W,{icon:c(i)},null,8,["icon"])]),z("div",null,[z("p",Wl,[C(O(i.Name)+" ",1),i.Type===T(w).TICKET_TYPE_TICKET?(p(),b(S,{key:0},[e.value.find(m=>m.Type===T(w).TICKET_TYPE_GROUP&&m.Tickets.find(f=>f&&f.TicketUUID===i.TicketUUID))?(p(),b("span",Jl," ("+O(e.value.filter(m=>m.Type===T(w).TICKET_TYPE_GROUP&&m.Tickets.find(f=>f&&f.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(p(),b("span",Zl," (Ticket does not belong to any categories.) "))],64)):P("",!0),i.Type===T(w).TICKET_TYPE_ADD_ON?(p(),b(S,{key:1},[e.value.find(m=>m.Type===T(w).TICKET_TYPE_TICKET&&m.AddonTickets.find(f=>f&&f.TicketUUID===i.TicketUUID))?(p(),b("span",Ql," ("+O(e.value.filter(m=>m.Type===T(w).TICKET_TYPE_TICKET&&m.AddonTickets.find(f=>f&&f.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(p(),b("span",en," (Ticket addon must be associated to at least one ticket.) "))],64)):P("",!0),i.Type===T(w).TICKET_TYPE_TICKET_COMPONENT?(p(),b(S,{key:2},[e.value.find(m=>m.Type===T(w).TICKET_TYPE_TICKET&&m.TicketComponents.find(f=>f&&f.TicketUUID===i.TicketUUID))?(p(),b("span",tn," ("+O(e.value.filter(m=>m.Type===T(w).TICKET_TYPE_TICKET&&m.TicketComponents.find(f=>f&&f.TicketUUID===i.TicketUUID)).map(m=>m.Name).join(", "))+") ",1)):(p(),b("span",ln," (Component has not been assigned to any tickets.) "))],64)):P("",!0)]),z("p",nn,[i.Type===T(w).TICKET_TYPE_GROUP?(p(),b(S,{key:0},[C("Category")],64)):i.Type===T(w).TICKET_TYPE_TICKET?(p(),b(S,{key:1},[C(" Ticket "),i.ComponentsRequired>0?(p(),b(S,{key:0},[C(" ("+O(i.ComponentsRequired)+" component"+O(i.ComponentsRequired>1?"s":"")+" required) ",1)],64)):P("",!0)],64)):P("",!0),i.Type===T(w).TICKET_TYPE_TICKET_COMPONENT?(p(),b(S,{key:2},[C("Component")],64)):P("",!0),i.Type===T(w).TICKET_TYPE_ADD_ON?(p(),b(S,{key:3},[C("Addon")],64)):P("",!0)])])]),_:2},1024),t(Pe,{class:"px-0"},{default:n(()=>[t(jl,{accommodation:u.accommodation,convention:u.convention,tickets:e.value,modelValue:e.value[v],"onUpdate:modelValue":m=>e.value[v]=m},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),an=z("h3",null,"Tickets",-1),sn=z("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),un=B({__name:"Tickets",props:{modelValue:{required:!0}},emits:R(["refresh"],["update:modelValue"]),setup(l){var m;const r=K(l,"modelValue"),e=J(),o=D([]),d=D([]);e.getConventionTickets(((m=r.value)==null?void 0:m.ConventionUUID)||"").then(f=>{Oe(f),o.value=f});const a=D([""]),c=D(!1),u=f=>f.AddonTickets&&f.AddonTickets.map(U=>o.value&&o.value.find(I=>I.ID===U.ID)),s=f=>f.TicketComponents&&f.TicketComponents.map(U=>o.value&&o.value.find(I=>I.ID===U.ID)),i=f=>"",v=f=>d.value.filter(U=>U.Costs.find(I=>I.DateStart===f.DateStart&&I.DateEnd===f.DateEnd)).map(U=>U.Name).join(", ");return(f,U)=>(p(),b(S,null,[t(ne,{fluid:!0,class:"px-0"},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,null,{default:n(()=>[an]),_:1}),t(y,{class:"text-right"},{default:n(()=>[t(_,{color:"primary",onClick:U[0]||(U[0]=I=>c.value=!0)},{default:n(()=>[C("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),sn,t(Me,{opened:a.value,"onUpdate:opened":U[1]||(U[1]=I=>a.value=I)},{default:n(()=>[(p(!0),b(S,null,j(o.value.filter(I=>I.Type===T(w).TICKET_TYPE_GROUP),I=>(p(),h(je,{key:I.ID,value:I.ID},{activator:n(({props:V})=>[t(ae,Ie(V,{"prepend-icon":"mdi:mdi-group",title:I.Name}),null,16,["title"])]),default:n(()=>[(p(!0),b(S,null,j(o.value.filter(V=>I.Tickets.find(g=>g&&V&&g.TicketUUID===V.TicketUUID)),V=>(p(),b(S,{key:V.ID},[V.AddonTickets&&V.AddonTickets.length?(p(),h(je,{key:0,value:V.ID},{activator:n(({props:g})=>[t(ae,Ie(g,{"prepend-icon":V.RequiresAccommodation?"mdi:mdi-home":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${V.Name} ${V.Price>0?`(${T(N).currencySymbol}${V.Price})`:""}`}),{default:n(()=>[V.ComponentsRequired>0?(p(),h(le,{key:0},{default:n(()=>[C(" Options: "+O(s(V).map(x=>x&&x.Name).join(", ")),1)]),_:2},1024)):P("",!0),V.RequiresAccommodation&&v(V)?(p(),h(le,{key:1},{default:n(()=>[C(" Accommodation: "+O(v(V)),1)]),_:2},1024)):P("",!0)]),_:2},1040,["prepend-icon","title"])]),default:n(()=>[(p(!0),b(S,null,j(u(V),g=>(p(),b(S,{key:g},[g?(p(),h(ae,{key:0,title:`${g.Name} ${g.Price>0?`(${T(N).currencySymbol}${g.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:n(()=>[g.RequiredTags&&g.RequiredTags.length>0?(p(),h(le,{key:0},{default:n(()=>[C(" Required Tags: "+O(g.RequiredTags.join(", ")),1)]),_:2},1024)):P("",!0),g.RequiredGroupMemberships&&g.RequiredGroupMemberships.length>0?(p(),h(le,{key:1},{default:n(()=>[C(" Required Groups: "+O(i(g.RequiredGroupMemberships)),1)]),_:2},1024)):P("",!0),v(g)?(p(),h(le,{key:2},{default:n(()=>[C(" Accommodation: "+O(v(g)),1)]),_:2},1024)):P("",!0)]),_:2},1032,["title"])):P("",!0)],64))),128))]),_:2},1032,["value"])):(p(),h(ae,{key:1,"prepend-icon":V.RequiresAccommodation?"mdi:mdi-home":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${V.Name} ${V.Price>0?`(${T(N).currencySymbol}${V.Price})`:""}`},{default:n(()=>[V.ComponentsRequired>0?(p(),h(le,{key:0},{default:n(()=>[C(" Options: "+O(s(V).map(g=>g&&g.Name).join(", ")),1)]),_:2},1024)):P("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),t(_e,{modelValue:c.value,"onUpdate:modelValue":U[4]||(U[4]=I=>c.value=I),scrollable:!0},{default:n(()=>[t(on,{onClose:U[2]||(U[2]=I=>c.value=!1),modelValue:o.value,"onUpdate:modelValue":U[3]||(U[3]=I=>o.value=I),accommodation:d.value,convention:r.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),rn=(l,r)=>{const e=Re(l,r),o=Re(l,r,void 0,void 0,"item"),d=D(Q(o.value));return se(o,()=>{d.value=Q(o.value)}),{state:e,model:o,close:()=>{e.value=!1},reset:()=>{o.value=Q(d.value)},save:()=>{r("save")}}},dn=B({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(l,{emit:r}){const e=l,{state:o,model:d,close:a,reset:c,save:u}=rn(e,r);return(s,i)=>(p(),h(Ut,{modelValue:T(o),"onUpdate:modelValue":i[0]||(i[0]=v=>Ae(o)?o.value=v:null),onReset:T(c),onSave:T(u),title:s.title,color:"primary","card-class":s.cardClass},{toolbarButtons:n(()=>[he(s.$slots,"toolbarButtons")]),actions:n(()=>[t(_,{color:"blue-darken-1",variant:"text",onClick:T(a)},{default:n(()=>[C(" Cancel ")]),_:1},8,["onClick"]),t(_,{color:"blue-darken-1",variant:"text",onClick:T(c)},{default:n(()=>[C(" Reset ")]),_:1},8,["onClick"]),t(re),t(_,{color:"blue-darken-1",variant:"text",onClick:T(u)},{default:n(()=>[C(" Save ")]),_:1},8,["onClick"])]),default:n(()=>[he(s.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Ct=B({__name:"EditOrderedItems",props:R({closeable:{type:Boolean,default:!1},newItem:{type:Function},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:R(["save","close"],["update:modelValue"]),setup(l,{emit:r}){const e=K(l,"modelValue"),o=()=>{r("save"),r("close")},d=()=>{if(l.newItem){const i=l.newItem();i.Order=e.value.length+1,e.value.push(i)}else e.value.push({Order:e.value.length+1})},a=i=>{e.value.splice(i,1)},c=i=>{Ne(i,e.value)},u=i=>{Le(i,e.value)},s=i=>l.labelParent&&i[l.labelParent]?i[l.labelParent][l.label]:i[l.label];return e.value.find(i=>i.Order===0)&&Oe(e.value),e.value.find(i=>e.value.find(v=>v.Order===i.Order&&v!==i))&&Oe(e.value),(i,v)=>(p(),h(ce,null,{default:n(()=>[t(ue,{dark:"",color:"primary"},{default:n(()=>[i.closeable?(p(),h(_,{key:0,icon:"",dark:"",onClick:v[0]||(v[0]=m=>r("close"))},{default:n(()=>[t(W,null,{default:n(()=>[C("mdi:mdi-close")]),_:1})]),_:1})):P("",!0),t(me,null,{default:n(()=>[C(O(i.title),1)]),_:1}),t(re),t(Te,null,{default:n(()=>[t(_,{variant:"text",onClick:d},{default:n(()=>[C(" Add ")]),_:1}),i.showSave?(p(),h(_,{key:0,variant:"text",onClick:o},{default:n(()=>[C(" Save ")]),_:1})):P("",!0)]),_:1})]),_:1}),t(Ve,{class:"pa-0"},{default:n(()=>[t(ke,null,{default:n(()=>[(p(!0),b(S,null,j(e.value,(m,f)=>(p(),h(Ee,{key:m.Order,class:"mt-0"},{default:n(()=>[t(Se,null,{actions:n(({expanded:U})=>[t(_,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:I=>a(f)},null,8,["onClick"]),t(W,{class:"align-self-center text-h5",icon:U?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[t(_,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(U=>u(m),["stop"])},null,8,["onClick"]),t(_,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(U=>c(m),["stop"])},null,8,["onClick"]),he(i.$slots,`${i.slotNamePrefix}_${f}_title`,{},()=>[C(O(s(m)),1)])]),_:2},1024),t(Pe,{class:"px-0"},{default:n(()=>[he(i.$slots,`${i.slotNamePrefix}_${f}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),cn={class:"pa-0 border-0 ma-0"},mn=z("legend",{class:"mb-2"},"Field Settings",-1),vn={class:"pa-0 border-0 ma-0"},fn=z("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),pn=B({__name:"EditFormField",props:R({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=J(),o=D([]),d=D([]),a=D(""),c=u=>{var s;r.value.Field=(s=d.value.find(i=>i.value===u))==null?void 0:s.field};return e.getConventionFields(l.convention.ConventionUUID).then(u=>{u&&(o.value=u,d.value=u.map(s=>({title:`${s.Label} (${(Xt.find(i=>i.value===s.Type)||{title:""}).title})`,value:s.FieldUUID,field:s})),c(r.value.FieldUUID))}),(u,s)=>(p(),h(Y,null,{default:n(()=>[t(y,{cols:"12",md:"6"},{default:n(()=>[z("fieldset",cn,[mn,t(Y,null,{default:n(()=>[t(y,{cols:"12"},{default:n(()=>[t(We,{modelValue:r.value.FieldUUID,"onUpdate:modelValue":[s[0]||(s[0]=i=>r.value.FieldUUID=i),c],items:d.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(y,{cols:"6",sm:"4"},{default:n(()=>[t(q,{modelValue:r.value.MinLength,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value.MinLength=i),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"6",sm:"4"},{default:n(()=>[t(q,{modelValue:r.value.MaxLength,"onUpdate:modelValue":s[2]||(s[2]=i=>r.value.MaxLength=i),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"4"},{default:n(()=>[t(He,{modelValue:r.value.Required,"onUpdate:modelValue":s[3]||(s[3]=i=>r.value.Required=i),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),r.value.FieldUUID&&r.value.Field?(p(),h(y,{key:0,cols:"12",md:"6"},{default:n(()=>[z("fieldset",vn,[fn,r.value.Field?(p(),h(Wt,{key:0,field:r.value.Field,"persistent-hint":!0,required:r.value.Required,convention:u.convention,modelValue:a.value,"onUpdate:modelValue":s[4]||(s[4]=i=>a.value=i)},null,8,["field","required","convention","modelValue"])):P("",!0)])]),_:1})):P("",!0)]),_:1}))}}),gn={class:"d-none d-sm-block"},In=B({__name:"EditFormSectionFields",props:R({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=()=>{var o;return{ID:0,SectionFieldUUID:H(),SectionID:r.value.ID,SectionUUID:r.value.SectionUUID,FieldID:0,FieldUUID:"",Order:(((o=r.value.Fields)==null?void 0:o.length)||0)+1,MinLength:0,MaxLength:0,Required:!1,Value:""}};return(o,d)=>r.value.Fields!==void 0?(p(),h(Ct,{key:0,modelValue:r.value.Fields,"onUpdate:modelValue":d[0]||(d[0]=a=>r.value.Fields=a),closeable:!1,title:"Fields","new-item":e,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},mt({_:2},[j(r.value.Fields,(a,c)=>({name:`field_${c}_title`,fn:n(()=>[a.Field?(p(),b(S,{key:0},[C(O(a.Field.Label)+" ("+O(a.Field.Name)+") ",1),z("template",gn,[C("  ["+O(a.Field.Type)+"] ",1)])],64)):(p(),b(S,{key:1},[C("New Field")],64))])})),j(r.value.Fields,(a,c)=>({name:`field_${c}`,fn:n(()=>[t(pn,{modelValue:r.value.Fields[c],"onUpdate:modelValue":u=>r.value.Fields[c]=u,convention:o.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):P("",!0)}}),Un=B({__name:"EditFormSections",props:R({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=()=>{const o={ID:0,SectionUUID:H(),FormID:r.value.ID,FormUUID:r.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:H(),SectionID:0,SectionUUID:"",Edit:!0}};return o.State.SectionID=o.ID,o.State.SectionUUID=o.SectionUUID,o};return(o,d)=>(p(),h(Ct,{modelValue:r.value.Sections,"onUpdate:modelValue":d[0]||(d[0]=a=>r.value.Sections=a),"new-item":e,closeable:!1,title:"Sections","slot-name-prefix":"section"},mt({_:2},[j(r.value.Sections,(a,c)=>({name:`section_${c}`,fn:n(()=>[t(Y,null,{default:n(()=>[t(y,{cols:"12",sm:"6"},{default:n(()=>[t(q,{modelValue:a.Name,"onUpdate:modelValue":u=>a.Name=u,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(y,{cols:"12",sm:"6"},{default:n(()=>[t(q,{modelValue:a.Heading,"onUpdate:modelValue":u=>a.Heading=u,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(Y,null,{default:n(()=>[t(y,{cols:"12"},{default:n(()=>[t(Xe,{modelValue:a.Description,"onUpdate:modelValue":u=>a.Description=u,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a.Fields?(p(),h(In,{key:0,modelValue:r.value.Sections[c],"onUpdate:modelValue":u=>r.value.Sections[c]=u,convention:o.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):P("",!0)])}))]),1032,["modelValue"]))}}),Vn=B({__name:"FormRendererPopup",props:R({convention:{},form:{},title:{},cardClass:{},preview:{type:Boolean}},{modelValue:{type:Boolean,required:!0}}),emits:R(["update:form"],["update:modelValue"]),setup(l,{emit:r}){const e=l,{convention:o,title:d="",cardClass:a=""}=e,c=K(l,"modelValue"),u=Re(e,r,void 0,void 0,"form"),s=D(Q(u.value));se(u,()=>{s.value=Q(u.value)});const i=()=>{c.value=!1};return(v,m)=>(p(),h(Ut,{modelValue:c.value,"onUpdate:modelValue":m[1]||(m[1]=f=>c.value=f),title:T(d),color:"primary","card-class":T(a)},{toolbarButtons:n(()=>[he(v.$slots,"toolbarButtons")]),actions:n(()=>[t(_,{color:"blue-darken-1",variant:"text",onClick:i},{default:n(()=>[C(" Close ")]),_:1})]),default:n(()=>[t(gl,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=f=>s.value=f),convention:T(o),preview:v.preview},null,8,["modelValue","convention","preview"])]),_:3},8,["modelValue","title","card-class"]))}}),Tn=z("template",{class:"d-none d-sm-inline"},[C("Preview")],-1),Cn=B({__name:"EditFormDialog",props:R({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:R(["update:form"],["update:modelValue"]),setup(l,{emit:r}){const e=l,{convention:o}=e,d=K(l,"modelValue"),a=J(),c=Re(e,r,void 0,void 0,"form"),u=D(!1),s=D(Q(c.value));se(c,()=>{s.value=Q(c.value)});const i=()=>{a.saveForm(s.value).then(m=>{m&&(c.value=m,d.value=!1)})},v=()=>{u.value=!0};return(m,f)=>(p(),h(dn,{modelValue:d.value,"onUpdate:modelValue":f[11]||(f[11]=U=>d.value=U),item:s.value,"onUpdate:item":f[12]||(f[12]=U=>s.value=U),onSave:i,"card-class":"pa-0"},{toolbarButtons:n(()=>[t(Il,null,{default:n(()=>[t(_,{"prepend-icon":"mdi:mdi-developer-board",onClick:v},{default:n(()=>[Tn]),_:1})]),_:1})]),default:n(()=>[t(ke,null,{default:n(()=>[t(Ee,{class:"mt-0"},{default:n(()=>[t(Se,null,{default:n(()=>[C("General Settings")]),_:1}),t(Pe,null,{default:n(()=>[t(Y,null,{default:n(()=>[t(y,{cols:"12"},{default:n(()=>[t(ne,{class:"pa-0",fluid:!0},{default:n(()=>[t(Y,null,{default:n(()=>[t(y,{cols:"12",sm:"6"},{default:n(()=>[t(q,{modelValue:s.value.Name,"onUpdate:modelValue":f[0]||(f[0]=U=>s.value.Name=U),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:n(()=>[t(q,{modelValue:s.value.Heading,"onUpdate:modelValue":f[1]||(f[1]=U=>s.value.Heading=U),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"12"},{default:n(()=>[t(Xe,{modelValue:s.value.Description,"onUpdate:modelValue":f[2]||(f[2]=U=>s.value.Description=U),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:n(()=>[t(We,{modelValue:s.value.Type,"onUpdate:modelValue":f[3]||(f[3]=U=>s.value.Type=U),label:"Type",variant:"outlined",items:T(Pl),"hide-details":""},null,8,["modelValue","items"])]),_:1}),t(y,{cols:"12",sm:"6"},{default:n(()=>[t(q,{modelValue:s.value.State.Stage,"onUpdate:modelValue":f[4]||(f[4]=U=>s.value.State.Stage=U),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),t(y,{cols:"6"},{default:n(()=>[t(He,{modelValue:s.value.State.New,"onUpdate:modelValue":f[5]||(f[5]=U=>s.value.State.New=U),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),t(y,{cols:"6"},{default:n(()=>[t(He,{modelValue:s.value.State.Edit,"onUpdate:modelValue":f[6]||(f[6]=U=>s.value.State.Edit=U),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1}),t(Y,null,{default:n(()=>[t(y,{cols:"12"},{default:n(()=>[t(Ue,{label:"Required Tags",variant:"outlined",modelValue:s.value.RequiredTags,"onUpdate:modelValue":f[7]||(f[7]=U=>s.value.RequiredTags=U),convention:T(o),organisation:T(o).OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this form."},null,8,["modelValue","convention","organisation"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.value?(p(),h(Un,{key:0,modelValue:s.value,"onUpdate:modelValue":f[8]||(f[8]=U=>s.value=U),convention:T(o),style:{"border-radius":"0"}},null,8,["modelValue","convention"])):P("",!0),u.value?(p(),h(Vn,{key:1,modelValue:u.value,"onUpdate:modelValue":f[9]||(f[9]=U=>u.value=U),form:s.value,"onUpdate:form":f[10]||(f[10]=U=>s.value=U),convention:T(o),title:"Form Preview",preview:!0,"card-class":"pa-0"},null,8,["modelValue","form","convention"])):P("",!0)]),_:1},8,["modelValue","item"]))}}),hn=(l,r)=>{const e=D(!1),o=D(!1),d=D(l),a=D(-1),c=D(r),u=D(r),s=F(()=>a.value===-1?"New Form":"Edit Form"),i=()=>{d.value=l},v=g=>{a.value=d.value.indexOf(g),c.value=Object.assign({},g),e.value=!0},m=g=>{a.value=d.value.indexOf(g),c.value=Object.assign({},g),o.value=!0},f=()=>{o.value=!1,Ke(()=>{c.value=Object.assign({},u.value),a.value=-1}).then()},U=()=>{d.value.splice(a.value,1),f()},I=()=>{e.value=!1,Ke(()=>{c.value=Object.assign({},u.value),a.value=-1}).then()},V=()=>{a.value>-1?Object.assign(d.value[a.value],c.value):d.value.push(c.value),I()};return se(e,g=>{g||I()}),se(o,g=>{g||f()}),{collection:d,defaultItem:u,dialog:e,dialogDelete:o,editedItem:c,formTitle:s,reset:i,editItem:v,deleteItem:m,deleteItemConfirm:U,close:I,save:V}},Dn=B({__name:"FormEditor",props:{modelValue:{required:!0}},emits:R(["refresh"],["update:modelValue"]),setup(l){const r=K(l,"modelValue"),e=J(),o=D([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),d=D([]),a=D([]);e.getConventionFields(r.value.ConventionUUID).then($=>{d.value=$}),e.getConventionForms(r.value.ConventionUUID).then($=>{a.value=$});const c={ID:0,FormUUID:H(),ConventionID:r.value.ID,ConventionUUID:r.value.ConventionUUID,ParentID:0,ParentUUID:ot,Name:"",Heading:"",Description:"",Type:Tt.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:H(),FormID:0,FormUUID:ot,New:!1,Edit:!1,Stage:0},RequiredGroupMemberships:[],RequiredTags:[]};c.State.FormUUID=c.FormUUID;const{collection:u,defaultItem:s,dialog:i,dialogDelete:v,editedItem:m,formTitle:f,editItem:U,deleteItem:I,deleteItemConfirm:V,save:g}=hn(a,c);u.value.forEach($=>{$.Sections.forEach(M=>{var E;(E=M.Fields)==null||E.forEach(L=>{L.Field=d.value.find(X=>X.ID===L.FieldID)})})});const x=$=>{e.deleteForm($.FormUUID).then(M=>{M&&I($)})};return($,M)=>(p(),h(T(Vt),{headers:o.value,items:T(u),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:n(()=>[t(ue,{color:"primary"},{default:n(()=>[t(me,null,{default:n(()=>[C("Form Editor")]),_:1}),t(al,{class:"mx-4",inset:!0,vertical:!0}),t(re),t(_,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:M[0]||(M[0]=E=>{m.value=Object.assign({},T(s)),i.value=!0})},{default:n(()=>[C(" New Item ")]),_:1}),t(fl,{modelValue:T(v),"onUpdate:modelValue":M[1]||(M[1]=E=>Ae(v)?v.value=E:null),onDelete:T(V)},null,8,["modelValue","onDelete"])]),_:1}),T(i)?(p(),h(Cn,{key:0,modelValue:T(i),"onUpdate:modelValue":M[2]||(M[2]=E=>Ae(i)?i.value=E:null),form:T(m),"onUpdate:form":[M[3]||(M[3]=E=>Ae(m)?m.value=E:null),T(g)],convention:r.value},null,8,["modelValue","form","onUpdate:form","convention"])):P("",!0)]),"item.actions":n(({item:E})=>[t(W,{size:"small",class:"me-2",onClick:L=>T(U)(E.raw)},{default:n(()=>[C(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),t(W,{size:"small",onClick:L=>x(E.raw)},{default:n(()=>[C(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}}),yn=B({__name:"RegList",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(l){const r=K(l,"modelValue"),e=J(),o=Fe.getInstance(),d=D({ID:0,AdminLayoutUUID:"",ConventionID:0,ConventionUUID:"",Name:"",Type:"",Panels:[]}),a=D([]),c=D([]),u=D([]),s=D([]);return(async()=>{const v=await o.getConventionAdminLayout(r.value.ConventionUUID,"Registration Table");if(!v)return;const m=await e.getConventionSubmissions(r.value.ConventionUUID);if(!m)return;const f=await e.getConventionForms(r.value.ConventionUUID);f&&(d.value=v,c.value=m,a.value=f,d.value.Panels.forEach(U=>{U.Items.forEach(I=>{I.SectionField==null&&a.value.find(V=>{V.Sections.find(g=>{if(g.Fields){const x=g.Fields.find($=>$.SectionFieldUUID===I.SectionFieldUUID);if(x)return I.SectionField=x,!0}})})})}),d.value.Panels.length>0&&(u.value=d.value.Panels[0].Items.map(U=>{var I,V;return{key:U.LayoutItemUUID,title:U.Label||((V=(I=U.SectionField)==null?void 0:I.Field)==null?void 0:V.Label)||"",align:U.Align==="end"?"end":"start",sortable:!0}}),s.value=c.value.map(U=>{const I={};return u.value.forEach(V=>{var x;const g=d.value.Panels[0].Items.find($=>$.LayoutItemUUID===V.key);g&&g.SectionField&&(I[g.LayoutItemUUID]=((x=U.Data.find($=>$.SectionFieldUUID===g.SectionFieldUUID))==null?void 0:x.Data)||"")}),console.log(I),I})))})(),(v,m)=>(p(),h(T(Vt),{headers:u.value,items:s.value,"item-value":"LayoutItemUUID"},null,8,["headers","items"]))}});const ht=Symbol.for("vuetify:v-tabs"),bn=De({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...wt(Jt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Dt=ye()({name:"VTab",props:bn(),setup(l,r){let{slots:e,attrs:o}=r;const{textColorClasses:d,textColorStyles:a}=Ul(l,"sliderColor"),c=F(()=>l.direction==="horizontal"),u=G(!1),s=D(),i=D();function v(m){var U,I;let{value:f}=m;if(u.value=f,f){const V=(I=(U=s.value)==null?void 0:U.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),g=i.value;if(!V||!g)return;const x=getComputedStyle(V).color,$=V.getBoundingClientRect(),M=g.getBoundingClientRect(),E=c.value?"x":"y",L=c.value?"X":"Y",X=c.value?"right":"bottom",ee=c.value?"width":"height",ve=$[E],qe=M[E],oe=ve>qe?$[X]-M[X]:$[E]-M[E],ze=Math.sign(oe)>0?c.value?"right":"bottom":Math.sign(oe)<0?c.value?"left":"top":"center",Z=(Math.abs(oe)+(Math.sign(oe)<0?$[ee]:M[ee]))/Math.max($[ee],M[ee]),Ce=$[ee]/M[ee],$e=1.5;nl(g,{backgroundColor:[x,""],transform:[`translate${L}(${oe}px) scale${L}(${Ce})`,`translate${L}(${oe/$e}px) scale${L}(${(Z-1)/$e+1})`,""],transformOrigin:Array(3).fill(ze)},{duration:225,easing:ol})}}return xe(()=>{const[m]=_.filterProps(l);return t(_,Ie({symbol:ht,ref:s,class:["v-tab",l.class],style:l.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1,block:l.fixed,maxWidth:l.fixed?300:void 0,rounded:0},m,o,{"onGroup:selected":v}),{default:()=>{var f;return[((f=e.default)==null?void 0:f.call(e))??l.text,!l.hideSlider&&t("div",{ref:i,class:["v-tab__slider",d.value],style:a.value},null)]}})}),{}}});function st(l){const e=Math.abs(l);return Math.sign(l)*(e/((1/.501-2)*(1-e)+1))}function ut(l){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,currentScrollOffset:a,isHorizontal:c}=l;const u=c?r.clientWidth:r.clientHeight,s=c?r.offsetLeft:r.offsetTop,i=d&&c?o-s-u:s,v=e+a,m=u+i,f=u*.4;return i<=a?a=Math.max(i-f,0):v<=m&&(a=Math.min(a-(v-m-f),o-e)),a}function _n(l){let{selectedElement:r,containerSize:e,contentSize:o,isRtl:d,isHorizontal:a}=l;const c=a?r.clientWidth:r.clientHeight,u=a?r.offsetLeft:r.offsetTop,s=d&&a?o-u-c/2-e/2:u+c/2-e/2;return Math.min(o-e,Math.max(0,s))}const kn=Symbol.for("vuetify:v-slide-group"),yt=De({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:kn},nextIcon:{type:nt,default:"$next"},prevIcon:{type:nt,default:"$prev"},showArrows:{type:[Boolean,String],validator:l=>typeof l=="boolean"||["always","desktop","mobile"].includes(l)},...Je(),...Ze(),...Zt({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),rt=ye()({name:"VSlideGroup",props:yt(),emits:{"update:modelValue":l=>!0},setup(l,r){let{slots:e}=r;const{isRtl:o}=vt(),{mobile:d}=At(),a=gt(l,l.symbol),c=G(!1),u=G(0),s=G(0),i=G(0),v=F(()=>l.direction==="horizontal"),{resizeRef:m,contentRect:f}=it(),{resizeRef:U,contentRect:I}=it(),V=F(()=>a.selected.value.length?a.items.value.findIndex(k=>k.id===a.selected.value[0]):-1),g=F(()=>a.selected.value.length?a.items.value.findIndex(k=>k.id===a.selected.value[a.selected.value.length-1]):-1);if(Ft){let k=-1;se(()=>[a.selected.value,f.value,I.value,v.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(f.value&&I.value){const A=v.value?"width":"height";s.value=f.value[A],i.value=I.value[A],c.value=s.value+1<i.value}if(V.value>=0&&U.value){const A=U.value.children[g.value];V.value===0||!c.value?u.value=0:l.centerActive?u.value=_n({selectedElement:A,containerSize:s.value,contentSize:i.value,isRtl:o.value,isHorizontal:v.value}):c.value&&(u.value=ut({selectedElement:A,containerSize:s.value,contentSize:i.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value}))}})})}const x=G(!1);let $=0,M=0;function E(k){const A=v.value?"clientX":"clientY";M=(o.value&&v.value?-1:1)*u.value,$=k.touches[0][A],x.value=!0}function L(k){if(!c.value)return;const A=v.value?"clientX":"clientY",te=o.value&&v.value?-1:1;u.value=te*(M+$-k.touches[0][A])}function X(k){const A=i.value-s.value;u.value<0||!c.value?u.value=0:u.value>=A&&(u.value=A),x.value=!1}function ee(){m.value&&(m.value[v.value?"scrollLeft":"scrollTop"]=0)}const ve=G(!1);function qe(k){if(ve.value=!0,!(!c.value||!U.value)){for(const A of k.composedPath())for(const te of U.value.children)if(te===A){u.value=ut({selectedElement:te,containerSize:s.value,contentSize:i.value,isRtl:o.value,currentScrollOffset:u.value,isHorizontal:v.value});return}}}function oe(k){ve.value=!1}function ze(k){var A;!ve.value&&!(k.relatedTarget&&((A=U.value)!=null&&A.contains(k.relatedTarget)))&&Z()}function Qe(k){U.value&&(v.value?k.key==="ArrowRight"?Z(o.value?"prev":"next"):k.key==="ArrowLeft"&&Z(o.value?"next":"prev"):k.key==="ArrowDown"?Z("next"):k.key==="ArrowUp"&&Z("prev"),k.key==="Home"?Z("first"):k.key==="End"&&Z("last"))}function Z(k){var A,te,et,tt,lt;if(U.value)if(!k)(A=Ot(U.value)[0])==null||A.focus();else if(k==="next"){const fe=(te=U.value.querySelector(":focus"))==null?void 0:te.nextElementSibling;fe?fe.focus():Z("first")}else if(k==="prev"){const fe=(et=U.value.querySelector(":focus"))==null?void 0:et.previousElementSibling;fe?fe.focus():Z("last")}else k==="first"?(tt=U.value.firstElementChild)==null||tt.focus():k==="last"&&((lt=U.value.lastElementChild)==null||lt.focus())}function Ce(k){const A=u.value+(k==="prev"?-1:1)*s.value;u.value=Rt(A,0,i.value-s.value)}const $e=F(()=>{let k=u.value>i.value-s.value?-(i.value-s.value)+st(i.value-s.value-u.value):-u.value;u.value<=0&&(k=st(-u.value));const A=o.value&&v.value?-1:1;return{transform:`translate${v.value?"X":"Y"}(${A*k}px)`,transition:x.value?"none":"",willChange:x.value?"transform":""}}),Be=F(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),Ye=F(()=>{switch(l.showArrows){case"always":return!0;case"desktop":return!d.value;case!0:return c.value||Math.abs(u.value)>0;case"mobile":return d.value||c.value||Math.abs(u.value)>0;default:return!d.value&&(c.value||Math.abs(u.value)>0)}}),Et=F(()=>Math.abs(u.value)>0),St=F(()=>i.value>Math.abs(u.value)+s.value);return xe(()=>t(l.tag,{class:["v-slide-group",{"v-slide-group--vertical":!v.value,"v-slide-group--has-affixes":Ye.value,"v-slide-group--is-overflowing":c.value},l.class],style:l.style,tabindex:ve.value||a.selected.value.length?-1:0,onFocus:ze},{default:()=>{var k,A,te;return[Ye.value&&t("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!Et.value}],onClick:()=>Ce("prev")},[((k=e.prev)==null?void 0:k.call(e,Be.value))??t(at,null,{default:()=>[t(W,{icon:o.value?l.nextIcon:l.prevIcon},null)]})]),t("div",{key:"container",ref:m,class:"v-slide-group__container",onScroll:ee},[t("div",{ref:U,class:"v-slide-group__content",style:$e.value,onTouchstartPassive:E,onTouchmovePassive:L,onTouchendPassive:X,onFocusin:qe,onFocusout:oe,onKeydown:Qe},[(A=e.default)==null?void 0:A.call(e,Be.value)])]),Ye.value&&t("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!St.value}],onClick:()=>Ce("next")},[((te=e.next)==null?void 0:te.call(e,Be.value))??t(at,null,{default:()=>[t(W,{icon:o.value?l.prevIcon:l.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:Ce,scrollOffset:u,focus:Z}}});function En(l){return l?l.map(r=>typeof r=="string"?{title:r,value:r}:r):[]}const Sn=De({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...yt({mandatory:"force"}),...Qt(),...Ze()},"VTabs"),Pn=ye()({name:"VTabs",props:Sn(),emits:{"update:modelValue":l=>!0},setup(l,r){let{slots:e}=r;const o=Lt(l,"modelValue"),d=F(()=>En(l.items)),{densityClasses:a}=el(l),{backgroundColorClasses:c,backgroundColorStyles:u}=Vl(de(l,"bgColor"));return Nt({VTab:{color:de(l,"color"),direction:de(l,"direction"),stacked:de(l,"stacked"),fixed:de(l,"fixedTabs"),sliderColor:de(l,"sliderColor"),hideSlider:de(l,"hideSlider")}}),xe(()=>{const[s]=rt.filterProps(l);return t(rt,Ie(s,{modelValue:o.value,"onUpdate:modelValue":i=>o.value=i,class:["v-tabs",`v-tabs--${l.direction}`,`v-tabs--align-tabs-${l.alignTabs}`,{"v-tabs--fixed-tabs":l.fixedTabs,"v-tabs--grow":l.grow,"v-tabs--stacked":l.stacked},a.value,c.value,l.class],style:[{"--v-tabs-height":Ge(l.height)},u.value,l.style],role:"tablist",symbol:ht}),{default:()=>[e.default?e.default():d.value.map(i=>t(Dt,Ie(i,{key:i.title}),null))]})}),{}}});const xn=l=>{const{touchstartX:r,touchendX:e,touchstartY:o,touchendY:d}=l,a=.5,c=16;l.offsetX=e-r,l.offsetY=d-o,Math.abs(l.offsetY)<a*Math.abs(l.offsetX)&&(l.left&&e<r-c&&l.left(l),l.right&&e>r+c&&l.right(l)),Math.abs(l.offsetX)<a*Math.abs(l.offsetY)&&(l.up&&d<o-c&&l.up(l),l.down&&d>o+c&&l.down(l))};function $n(l,r){var o;const e=l.changedTouches[0];r.touchstartX=e.clientX,r.touchstartY=e.clientY,(o=r.start)==null||o.call(r,{originalEvent:l,...r})}function wn(l,r){var o;const e=l.changedTouches[0];r.touchendX=e.clientX,r.touchendY=e.clientY,(o=r.end)==null||o.call(r,{originalEvent:l,...r}),xn(r)}function An(l,r){var o;const e=l.changedTouches[0];r.touchmoveX=e.clientX,r.touchmoveY=e.clientY,(o=r.move)==null||o.call(r,{originalEvent:l,...r})}function Fn(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:l.left,right:l.right,up:l.up,down:l.down,start:l.start,move:l.move,end:l.end};return{touchstart:e=>$n(e,r),touchend:e=>wn(e,r),touchmove:e=>An(e,r)}}function On(l,r){var u;const e=r.value,o=e!=null&&e.parent?l.parentElement:l,d=(e==null?void 0:e.options)??{passive:!0},a=(u=r.instance)==null?void 0:u.$.uid;if(!o||!a)return;const c=Fn(r.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[a]=c,ft(c).forEach(s=>{o.addEventListener(s,c[s],d)})}function Rn(l,r){var a,c;const e=(a=r.value)!=null&&a.parent?l.parentElement:l,o=(c=r.instance)==null?void 0:c.$.uid;if(!(e!=null&&e._touchHandlers)||!o)return;const d=e._touchHandlers[o];ft(d).forEach(u=>{e.removeEventListener(u,d[u])}),delete e._touchHandlers[o]}const bt={mounted:On,unmounted:Rn},Ln=bt,_t=Symbol.for("vuetify:v-window"),kt=Symbol.for("vuetify:v-window-group"),Nn=De({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:l=>typeof l=="boolean"||l==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...Je(),...Ze(),...Mt()},"VWindow"),Mn=ye()({name:"VWindow",directives:{Touch:bt},props:Nn(),emits:{"update:modelValue":l=>!0},setup(l,r){let{slots:e}=r;const{themeClasses:o}=qt(l),{isRtl:d}=vt(),{t:a}=zt(),c=gt(l,kt),u=D(),s=F(()=>d.value?!l.reverse:l.reverse),i=G(!1),v=F(()=>{const E=l.direction==="vertical"?"y":"x",X=(s.value?!i.value:i.value)?"-reverse":"";return`v-window-${E}${X}-transition`}),m=G(0),f=D(void 0),U=F(()=>c.items.value.findIndex(E=>c.selected.value.includes(E.id)));se(U,(E,L)=>{const X=c.items.value.length,ee=X-1;X<=2?i.value=E<L:E===ee&&L===0?i.value=!0:E===0&&L===ee?i.value=!1:i.value=E<L}),Bt(_t,{transition:v,isReversed:i,transitionCount:m,transitionHeight:f,rootRef:u});const I=F(()=>l.continuous||U.value!==0),V=F(()=>l.continuous||U.value!==c.items.value.length-1);function g(){I.value&&c.prev()}function x(){V.value&&c.next()}const $=F(()=>{const E=[],L={icon:d.value?l.nextIcon:l.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:c.prev,ariaLabel:a("$vuetify.carousel.prev")};E.push(I.value?e.prev?e.prev({props:L}):t(_,L,null):t("div",null,null));const X={icon:d.value?l.prevIcon:l.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:c.next,ariaLabel:a("$vuetify.carousel.next")};return E.push(V.value?e.next?e.next({props:X}):t(_,X,null):t("div",null,null)),E}),M=F(()=>l.touch===!1?l.touch:{...{left:()=>{s.value?g():x()},right:()=>{s.value?x():g()},start:L=>{let{originalEvent:X}=L;X.stopPropagation()}},...l.touch===!0?{}:l.touch});return xe(()=>pt(t(l.tag,{ref:u,class:["v-window",{"v-window--show-arrows-on-hover":l.showArrows==="hover"},o.value,l.class],style:l.style},{default:()=>{var E,L;return[t("div",{class:"v-window__container",style:{height:f.value}},[(E=e.default)==null?void 0:E.call(e,{group:c}),l.showArrows!==!1&&t("div",{class:"v-window__controls"},[$.value])]),(L=e.additional)==null?void 0:L.call(e,{group:c})]}}),[[Yt("touch"),M.value]])),{group:c}}}),qn=De({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Je(),...tl(),...Tl()},"VWindowItem"),zn=ye()({name:"VWindowItem",directives:{Touch:Ln},props:qn(),emits:{"group:selected":l=>!0},setup(l,r){let{slots:e}=r;const o=Kt(_t),d=ll(l,kt),{isBooted:a}=hl();if(!o||!d)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const c=G(!1),u=F(()=>a.value&&(o.isReversed.value?l.reverseTransition!==!1:l.transition!==!1));function s(){!c.value||!o||(c.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function i(){var I;c.value||!o||(c.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Ge((I=o.rootRef.value)==null?void 0:I.clientHeight)),o.transitionCount.value+=1)}function v(){s()}function m(I){c.value&&Ke(()=>{!u.value||!c.value||!o||(o.transitionHeight.value=Ge(I.clientHeight))})}const f=F(()=>{const I=o.isReversed.value?l.reverseTransition:l.transition;return u.value?{name:typeof I!="string"?o.transition.value:I,onBeforeEnter:i,onAfterEnter:s,onEnterCancelled:v,onBeforeLeave:i,onAfterLeave:s,onLeaveCancelled:v,onEnter:m}:!1}),{hasContent:U}=Cl(l,d.isSelected);return xe(()=>t(Dl,{transition:f.value,disabled:!a.value},{default:()=>{var I;return[pt(t("div",{class:["v-window-item",d.selectedClass.value,l.class],style:l.style},[U.value&&((I=e.default)==null?void 0:I.call(e))]),[[Gt,d.isSelected.value]])]}})),{}}}),xo=B({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(l,{emit:r}){const e=dt(),o=Ht.getInstance(),d=D({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),a=D(),c=D([]);se(a,()=>{c.value.find(i=>i.id===a.value&&i.title==="General")&&u()});const u=()=>{o==null||o.getConvention(e.params.convention.toString()).then(s=>{s?(d.value=s,r("pageTitle",`Convention Editor - ${d.value.Name}`)):r("pageTitle","Convention Editor - New Convention")})};return c.value=[{id:H(),title:"General",component:G(ql),model:d},{id:H(),title:"Accommodation",component:G(vl),model:d},{id:H(),title:"Additional Purchases",component:G(Rl),model:d},{id:H(),title:"Fields",component:G(pl),model:d},{id:H(),title:"Forms",component:G(Dn),model:d},{id:H(),title:"Interests",component:G(Gl),model:d},{id:H(),title:"Registrations",component:G(yn),model:d},{id:H(),title:"Tickets",component:G(un),model:d},{id:H(),title:"Venues",component:G(ml),model:d}],r("pageTitle","Convention Editor"),u(),(s,i)=>d.value?(p(),b(S,{key:0},[t(ue,{color:"blue-darken-4"},{default:n(()=>[t(Pn,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=v=>a.value=v),"show-arrows":""},{default:n(()=>[(p(!0),b(S,null,j(c.value,v=>(p(),h(Dt,{key:v.id,value:v.id},{default:n(()=>[C(O(v.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Mn,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=v=>a.value=v)},{default:n(()=>[(p(!0),b(S,null,j(c.value,v=>(p(),h(zn,{key:v.id,value:v.id},{default:n(()=>[v.id===a.value?(p(),h(ce,{key:0,class:"pa-2"},{default:n(()=>[(p(),h(jt(v.component),{modelValue:v.model,"onUpdate:modelValue":m=>v.model=m},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(p(),b(S,{key:1},[C(" Convention Not Found ")],64))}});export{xo as default};
