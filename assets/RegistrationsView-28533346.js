import{p as Xe,n as Ze,e as le,t as _e,c as xe,G as et,v as l,H as M,x as Le,I as re,a1 as fe,a2 as je,r as I,a3 as ce,K as n,L as P,M as s,$ as Ce,S as x,a8 as Ne,Z as H,Q as W,w as ke,U as N,O as g,R as c,N as Y,_ as Je,a4 as tt,a0 as at}from"./index-253b4565.js";import{e as ot,T as lt,d as nt,c as it}from"./FormRenderer.vue_vue_type_style_index_0_lang-0548111c.js";import{a as st,F as ie}from"./form-29fd1dbb.js";import{_ as Ke}from"./ModelDialog.vue_vue_type_script_setup_true_lang-7c3cb2c5.js";import{m as ut,j as rt,k as dt,l as mt,n as At,o as _t,p as Ut,u as ct,q as Tt,r as Et,s as vt,t as St,v as Rt,w as Dt,x as It,y as Ge,z as Be,A as Ye,_ as Ot,e as He,f as ft,g as pt,h as Ct,i as yt}from"./VWindowItem-a7747469.js";import{a as oe,V as J}from"./VRow-d880c4d2.js";import{V as Ee}from"./VTextField-30c5acee.js";import{V as ue}from"./copyToClipboard-33e66edd.js";import{u as gt,j as ve}from"./VContainer-2c3fed6d.js";import{V as Mt,u as ht}from"./VCheckbox-ce550f28.js";import{v as Se}from"./v4-a960c1f4.js";import{V as be,a as Fe}from"./VList-a6eb26a6.js";import{V as pe}from"./VBtn-183aeea4.js";import{S as Lt}from"./submission-830079be.js";import{V as bt}from"./VAvatar-f268c0ef.js";import{c as Ft,e as ze}from"./VCard-cefbfc79.js";import{V as Nt}from"./VDialog-fccd2b18.js";import{s as Ie}from"./sortSubmissions-8ed80f07.js";import{u as kt}from"./useStoreAPI-b9a5486e.js";import{u as Vt,V as Pt}from"./VToolbar-c2875143.js";import{V as $t}from"./VSpacer-07ffae07.js";import{V as qe,a as wt}from"./VTable-5189de53.js";import"./index-26b71cef.js";import"./VChip-3c30e7f5.js";import"./scopeId-ab681c10.js";import"./VTextarea-b43013f3.js";import"./userData-4f6fe910.js";import"./VForm-9badb0c5.js";import"./VToolbarItems-eccead6e.js";import"./VDivider-a421d4fb.js";var We=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(We||{});const Gt=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Re=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Re||{});const Bt=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var V=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(V||{});const Yt=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var w=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(w||{});const Ht=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],qt=Xe({itemsLength:{type:[Number,String],required:!0},...ut(),...rt(),...dt()},"VDataTableServer"),jt=Ze()({name:"VDataTableServer",props:qt(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,$)=>!0},setup(e,$){let{emit:E,slots:a}=$;const{groupBy:r}=mt(e),{sortBy:u,multiSort:p,mustSort:f}=At(e),{page:F,itemsPerPage:h}=_t(e),t=le(()=>parseInt(e.itemsLength,10)),{columns:S,headers:o}=Ut(e,{groupBy:r,showSelect:_e(e,"showSelect"),showExpand:_e(e,"showExpand")}),{items:b}=ct(e,S),{toggleSort:R}=Tt({sortBy:u,multiSort:p,mustSort:f,page:F}),{opened:Z,isGroupOpen:k,toggleGroup:ee,extractRows:Q}=Et({groupBy:r,sortBy:u}),{pageCount:te,setItemsPerPage:ne}=vt({page:F,itemsPerPage:h,itemsLength:t}),{flatItems:se}=St(b,r,Z),{isSelected:de,select:Ue,selectAll:_,toggleSelect:U,someSelected:O,allSelected:d}=Rt(e,{allItems:b,currentPage:b}),{isExpanded:D,toggleExpand:q}=Dt(e),K=le(()=>Q(b.value));It({page:F,itemsPerPage:h,sortBy:u,groupBy:r,search:_e(e,"search")}),xe("v-data-table",{toggleSort:R,sortBy:u}),et({VDataTableRows:{hideNoData:_e(e,"hideNoData"),noDataText:_e(e,"noDataText"),loading:_e(e,"loading"),loadingText:_e(e,"loadingText")}});const G=le(()=>({page:F.value,itemsPerPage:h.value,sortBy:u.value,pageCount:te.value,toggleSort:R,setItemsPerPage:ne,someSelected:O.value,allSelected:d.value,isSelected:de,select:Ue,selectAll:_,toggleSelect:U,isExpanded:D,toggleExpand:q,isGroupOpen:k,toggleGroup:ee,items:K.value,groupedItems:se.value,columns:S.value,headers:o.value}));gt(()=>{const[ye]=Ge.filterProps(e),[ge]=Be.filterProps(e),[De]=Ye.filterProps(e),[i]=qe.filterProps(e);return l(qe,Le({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},i),{top:()=>{var m;return(m=a.top)==null?void 0:m.call(a,G.value)},default:()=>{var m,A,T,X;return a.default?a.default(G.value):l(M,null,[(m=a.colgroup)==null?void 0:m.call(a,G.value),l("thead",{class:"v-data-table__thead",role:"rowgroup"},[l(Be,Le(ge,{sticky:e.fixedHeader}),a)]),(A=a.thead)==null?void 0:A.call(a,G.value),l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a.body?a.body(G.value):l(Ye,Le(De,{items:se.value}),a)]),(T=a.tbody)==null?void 0:T.call(a,G.value),(X=a.tfoot)==null?void 0:X.call(a,G.value)])},bottom:()=>a.bottom?a.bottom(G.value):l(Ge,ye,{prepend:a["footer.prepend"]})})})}}),Jt=re({__name:"EditAdminLayout",props:fe({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["save"],["update:modelValue"]),setup(e,{emit:$}){const E=je(e,"modelValue"),a=I(ce(e.layout)),r=I([]),u=Ce(),p=({callback:t})=>{const S=()=>{t&&t("Failed to Save Layout")},o=()=>{t&&t("Layout Saved")};u.saveAdminLayout(a.value).then(b=>{b?(o(),$("save",b)):S()}).catch(()=>{S()})},f=()=>({ID:0,LayoutPanelUUID:Se(),AdminLayoutID:a.value.ID,AdminLayoutUUID:a.value.AdminLayoutUUID,Name:"",Order:a.value.Panels.length+1,Items:[],RequiredFormType:ie.FORM_TYPE_NIL,RequiredGroupMemberships:[]}),F=t=>()=>({ID:0,LayoutItemUUID:Se(),LayoutPanelID:t.ID,LayoutPanelUUID:t.LayoutPanelUUID,Label:"",SourceType:Re.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:t.Items.length+1,DefaultSort:!1}),h=t=>{const S=r.value.find(o=>o.value===t.SectionFieldUUID);S&&(t.SectionFieldID=S.object.ID,t.SectionField=S.object)};return u.getConventionForms(e.layout.ConventionUUID).then(t=>{t.forEach(S=>S.Sections.forEach(o=>o.Fields&&r.value.push(...o.Fields.map(b=>{var Z;return{title:`${S.Name} - ${o.Name} - ${(Z=b.Field)==null?void 0:Z.Name}`,value:b.SectionFieldUUID,object:b}})))),r.value.sort(ot("title"))}),(t,S)=>(n(),P(Ke,{modelValue:E.value,"onUpdate:modelValue":S[3]||(S[3]=o=>E.value=o),onSave:p,title:t.title,color:"primary"},{default:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:a.value.Name,"onUpdate:modelValue":S[0]||(S[0]=o=>a.value.Name=o),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:a.value.Type,"onUpdate:modelValue":S[1]||(S[1]=o=>a.value.Type=o),label:"Layout Type",items:x(Gt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(He,{modelValue:a.value.Panels,"onUpdate:modelValue":S[2]||(S[2]=o=>a.value.Panels=o),"new-item":f,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Ne({_:2},[H(a.value.Panels,(o,b)=>({name:`panel_${b}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:o.Name,"onUpdate:modelValue":R=>o.Name=R,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:o.RequiredFormType,"onUpdate:modelValue":R=>o.RequiredFormType=R,items:x(st),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,{cols:"12"},{default:s(()=>[l(Ot,{label:"Required Groups",variant:"outlined",modelValue:o.RequiredGroupMemberships,"onUpdate:modelValue":R=>o.RequiredGroupMemberships=R,convention:a.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(He,{modelValue:o.Items,"onUpdate:modelValue":R=>o.Items=R,"new-item":F(o),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Ne({_:2},[H(o.Items,(R,Z)=>({name:`item_${Z}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:R.Label,"onUpdate:modelValue":k=>R.Label=k,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,{cols:"12",sm:"6"},{default:s(()=>[l(ue,{modelValue:R.SourceType,"onUpdate:modelValue":k=>R.SourceType=k,label:"Source Type",items:x(Bt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(J,{cols:"12",sm:"6"},{default:s(()=>[R.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(n(),P(ue,{key:0,modelValue:R.SectionFieldUUID,"onUpdate:modelValue":k=>R.SectionFieldUUID=k,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:k=>h(R)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):R.SourceType==="LAYOUT_ITEM_SOURCE_META"?(n(),P(ue,{key:1,modelValue:R.MetaField,"onUpdate:modelValue":k=>R.MetaField=k,label:"Miscellaneous Data",items:x(Yt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):R.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(n(),P(ue,{key:2,modelValue:R.UserField,"onUpdate:modelValue":k=>R.UserField=k,label:"User Profile Data",items:x(Ht),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):W("",!0)]),_:2},1024)]),_:2},1024),l(oe,null,{default:s(()=>[l(J,null,{default:s(()=>[l(Mt,{modelValue:R.DefaultSort,"onUpdate:modelValue":k=>R.DefaultSort=k,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),Oe=e=>(typeof e=="string"&&(e=new Date(e)),`${e.toLocaleString("default",{weekday:"long"})} ${e.getDate()}${Kt(e.getDate())} ${e.toLocaleString("default",{month:"long"})}`),Kt=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},zt=N("br",null,null,-1),Wt=N("h3",null,"Assigned Accommodation",-1),Qt=N("br",null,null,-1),Xt=N("br",null,null,-1),Zt=N("h3",null,"Accommodation Preferences",-1),xt=N("h3",null,"Selected Tickets",-1),ea=N("br",null,null,-1),ta=re({__name:"EditAccommodationAssignmentDialog",props:fe({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["update:field"],["update:modelValue"]),setup(e,{emit:$}){const E=e,{convention:a,registration:r,title:u=""}=E,p=Ce(),f=je(e,"modelValue"),F=I({capacity:{max:_=>{var d;const U=te.value.find(D=>D.room.RoomUUID===_);return!U||U.room.MaximumCapacity===0?!0:(((d=o.value)==null?void 0:d.Members.length)||0)<=U.room.MaximumCapacity||"Too many people in the group for this room"},min:_=>{var d;const U=te.value.find(D=>D.room.RoomUUID===_);return!U||U.room.MinimumCapacity===0?!0:(((d=o.value)==null?void 0:d.Members.length)||0)>=U.room.MinimumCapacity||"Not enough people in the group for this room"}}}),h=I([]),t=ht(E,$,void 0,void 0,"field"),S=I(ce(t.value));ke(t,()=>{S.value=ce(t.value)});const o=I(),b=I(""),R=I(""),Z=I([]),k=I({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),ee=async()=>{var d;const _=await p.getConventionAvailableAccommodation(a.ConventionUUID);_&&(h.value=_);const U=await p.getRegistrationGroup(r.RegistrationUUID||"");U&&(o.value=U);const O=await p.getConventionTickets(a.ConventionUUID);O&&(Z.value=O);try{k.value=JSON.parse(((d=o.value)==null?void 0:d.TicketData)||"")}catch{}};ke(b,()=>{R.value=te.value.length>0?te.value[0].value:""});const Q=le(()=>{const _=ne.value;return h.value.map(U=>{let O;return _.forEach(d=>{U.Costs.forEach(D=>{D.DateStart===(d==null?void 0:d.DateStart)&&D.DateEnd===d.DateEnd&&(O===void 0||O>D.Availability)&&(O=D.Availability)})}),{label:`${U.Name}`,title:`${U.Name} (${O} Available)`,value:U.AccommodationUUID}})}),te=le(()=>{const _=ne.value,U=h.value.find(O=>O.AccommodationUUID===b.value);return(U==null?void 0:U.Pool.map(O=>{var D,q;let d;return _.forEach(K=>{O.Costs.forEach(G=>{G.DateStart===(K==null?void 0:K.DateStart)&&G.DateEnd===K.DateEnd&&(d===void 0||d>G.Availability)&&(d=G.Availability)})}),{label:`${(D=O.Venue)==null?void 0:D.Name} - ${O.Name}`,title:`${(q=O.Venue)==null?void 0:q.Name} - ${O.Name} (${d} Available)`,value:O.RoomUUID,room:O}}))||[]}),ne=le(()=>[...k.value.Ticket,...k.value.AddonsChecked,...k.value.ComponentsChecked].map(_=>Z.value.find(U=>U.TicketUUID===_)).filter(_=>_!==void 0&&_.RequiresAccommodation)),se=_=>{var U;p.assignAccommodation(((U=o.value)==null?void 0:U.Registration.RegistrationUUID)||"",b.value,R.value,!1).then(O=>{O?(ee(),_&&_("Room Assigned")):_&&_("Room not assigned")}).catch(()=>{_&&_("Room not assigned")})},de=_=>{var U,O;(U=o.value)!=null&&U.Registration.AllocationUUID?p.deleteAllocation(((O=o.value)==null?void 0:O.Registration.AllocationUUID)||"").then(d=>{d?(ee(),_&&_("Allocation Deleted")):_&&_("Allocation not deleted")}).catch(()=>{_&&_("Allocation not deleted")}):_&&_("Nothing to Delete")},Ue=_=>{var O,d;const U=(O=h.value.find(D=>D.AccommodationUUID===_.AccommodationUUID))==null?void 0:O.Pool;if(U){const D=U.find(q=>q.RoomUUID===_.RoomUUID);if(D)return`${(d=D.Venue)==null?void 0:d.Name} - ${D.Name}`}return""};return ee(),(_,U)=>{var O;return n(),P(Ke,{modelValue:f.value,"onUpdate:modelValue":U[2]||(U[2]=d=>f.value=d),title:x(u),color:"primary","show-close-action":!0,"show-delete-action":!!((O=o.value)!=null&&O.Registration.Allocation),"show-save-action":!!R.value,"save-button-label":"Assign Room",onDelete:de,onSave:se},{default:s(()=>[l(ve,{class:"pa-0",fluid:!0},{default:s(()=>[l(oe,null,{default:s(()=>{var d;return[l(J,{cols:"12",md:"6"},{default:s(()=>{var D,q;return[N("h3",null,"Group Members ("+g((D=o.value)==null?void 0:D.Members.length)+")",1),(n(!0),c(M,null,H((q=o.value)==null?void 0:q.Members,K=>(n(),c(M,{key:K.UUID},[Y(" #"+g(K.Reference)+" "+g(K.Name),1),zt],64))),128))]}),_:1}),(d=o.value)!=null&&d.Registration.Allocation?(n(),P(J,{key:0,cols:"12",md:"6"},{default:s(()=>[Wt,l(be,null,{default:s(()=>{var D;return[(n(!0),c(M,null,H((D=o.value)==null?void 0:D.Registration.Allocation.Periods,q=>(n(),P(Fe,{key:q.AllocationPeriodUUID},{default:s(()=>{var K;return[Y(g((K=h.value.find(G=>G.AccommodationUUID===q.AccommodationUUID))==null?void 0:K.Name)+" ",1),Qt,Y(" "+g(Ue(q))+" ",1),Xt,N("small",null,"("+g(x(Oe)(q.DateStart))+" - "+g(x(Oe)(q.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):W("",!0)]}),_:1}),l(oe,null,{default:s(()=>[l(J,{cols:"12",md:"6"},{default:s(()=>[_.selectedAccommodation.length?(n(),c(M,{key:0},[Zt,l(be,null,{default:s(()=>[(n(!0),c(M,null,H(_.selectedAccommodation,(d,D)=>(n(),P(Fe,{key:d.AccommodationUUID},{default:s(()=>[Y(g(D+1)+". "+g(d.Name),1)]),_:2},1024))),128))]),_:1})],64)):W("",!0)]),_:1}),l(J,{cosl:"12",md:"6"},{default:s(()=>[xt,l(be,null,{default:s(()=>[(n(!0),c(M,null,H(ne.value,d=>(n(),P(Fe,{key:d==null?void 0:d.TicketUUID},{default:s(()=>[Y(g(d.Name)+" ",1),ea,N("small",null,"("+g(x(Oe)(d.DateStart))+" - "+g(x(Oe)(d.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),l(oe,null,{default:s(()=>[l(J,{cols:"12",md:"6"},{default:s(()=>[l(ue,{modelValue:b.value,"onUpdate:modelValue":U[0]||(U[0]=d=>b.value=d),items:Q.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),l(J,{cols:"12",md:"6"},{default:s(()=>[l(ue,{modelValue:R.value,"onUpdate:modelValue":U[1]||(U[1]=d=>R.value=d),items:te.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[F.value.capacity.min,F.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),aa={key:0,class:"accommodationList"},oa={key:0,class:"text-orange-darken-2"},la=re({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},registration:{},value:{default:""},venues:{}},setup(e){const $=I(!1),E=le(()=>{if(!e.value)return[];const a=JSON.parse(e.value),r=e.accommodations.filter(u=>a.includes(u.AccommodationUUID)).sort((u,p)=>{const f=a.findIndex(h=>h===u.AccommodationUUID),F=a.findIndex(h=>h===p.AccommodationUUID);return f>F?1:-1});return ce(r)});return(a,r)=>(n(),c(M,null,[a.value?(n(),c("ol",aa,[(n(!0),c(M,null,H(E.value,u=>(n(),c("li",{key:u.AccommodationUUID},[a.registration&&a.registration.Allocation&&a.registration.Allocation.Periods.find(p=>p.AccommodationUUID===u.AccommodationUUID)?(n(),c("strong",oa,g(u.Name),1)):(n(),c(M,{key:1},[Y(g(u.Name),1)],64))]))),128))])):W("",!0),l(pe,{onClick:r[0]||(r[0]=u=>$.value=!0),variant:"flat",color:"success"},{default:s(()=>[Y("Assign Accommodation")]),_:1}),a.convention&&$.value?(n(),P(ta,{key:1,modelValue:$.value,"onUpdate:modelValue":r[1]||(r[1]=u=>$.value=u),title:"Accommodation Allocation",convention:a.convention,registration:a.registration,"selected-accommodation":E.value},null,8,["modelValue","convention","registration","selected-accommodation"])):W("",!0)],64))}});const na=Je(la,[["__scopeId","data-v-c426aacc"]]),ia={key:0,class:"addonList"},sa={key:0},ua={key:0},ra=re({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;const E=JSON.parse(e.value),a=Object.keys(E),r=ce(e.extras);return r.forEach(u=>{u.Options=u.Options.filter(p=>a.includes(p.OptionUUID)?(p.Choices=p.Choices.filter(f=>f.TagUUID===E[p.OptionUUID].choiceId),E[p.OptionUUID].checked):!1)}),r.filter(u=>u.Options.length>0),r});return(E,a)=>E.value?(n(),c("ul",ia,[(n(!0),c(M,null,H($.value,r=>(n(),c(M,{key:r.ExtraUUID},[r.Options.length?(n(),c("li",sa,[N("strong",null,g(r.Name),1),N("ul",null,[(n(!0),c(M,null,H(r.Options,u=>(n(),c("li",{key:u.OptionUUID},[Y(g(u.Name)+" ",1),u.Choices.length==1?(n(),c("small",ua,"("+g(u.Choices[0].Title)+")",1)):W("",!0)]))),128))])])):W("",!0)],64))),128))])):W("",!0)}});const da=Je(ra,[["__scopeId","data-v-55786e01"]]),ma={key:0},Aa=re({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;const E=JSON.parse(e.value);return Object.entries(E).filter(([,a])=>a).map(([a,r])=>e.interests.find(u=>u.InterestUUID===a)).filter(a=>a!==void 0)});return(E,a)=>E.value?(n(),c("ul",ma,[(n(!0),c(M,null,H($.value,r=>(n(),c("li",{key:r.InterestUUID},g(r.Name),1))),128))])):W("",!0)}}),_a=N("br",null,null,-1),Ua=N("small",null,"Options:",-1),ca=N("br",null,null,-1),Ta=N("small",null,"Addons:",-1),Ea=re({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const $=le(()=>{if(!e.value)return;let E={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{E=JSON.parse(e.value),"ticket"in E&&(E.Ticket=E.ticket),"addonsChecked"in E&&(E.AddonsChecked=E.addonsChecked),"componentsChecked"in E&&(E.ComponentsChecked=E.componentsChecked)}catch{}return E.Ticket.filter(a=>{const r=e.tickets.find(u=>u.TicketUUID===a);return!(!r||r.Type!==lt.TICKET_TYPE_TICKET)}).map(a=>{const r=e.tickets.find(p=>p.TicketUUID===a),u=ce(r);return u.TicketComponents=r.TicketComponents.filter(p=>E.ComponentsChecked.includes(p.TicketUUID)),u.AddonTickets=r.AddonTickets.filter(p=>E.AddonsChecked.includes(p.TicketUUID)),u})});return(E,a)=>E.value?(n(!0),c(M,{key:0},H($.value,r=>(n(),c("div",{key:r.TicketUUID},[N("strong",null,g(r.Name),1),r.TicketComponents.length>0?(n(),c(M,{key:0},[_a,Ua,Y("  "),(n(!0),c(M,null,H(r.TicketComponents,u=>(n(),c(M,{key:u.TicketUUID},[N("small",null,g(u.Name),1),Y("  ")],64))),128))],64)):W("",!0),r.AddonTickets.length>0?(n(),c(M,{key:1},[ca,Ta,Y("  "),(n(!0),c(M,null,H(r.AddonTickets,u=>(n(),c("small",{key:u.TicketUUID},[Y("("),N("em",null,g(u.Name),1),Y(")")]))),128))],64)):W("",!0)]))),128)):W("",!0)}}),va={key:0},Sa={key:0},Ra=N("strong",null,"Total:",-1),Da=re({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},item:{},interests:{},tickets:{},venues:{}},emits:["reload"],setup(e,{emit:$}){const E=Ce(),a=I(),r=I(),u=I(),p=I(),f=I(!1),F=t=>{console.log(t)},h=(t,S,o)=>{r.value=t,E.getRegistrationGroup(o.RegistrationUUID||"").then(b=>{u.value=b,a.value=S,p.value=o,f.value=!0})};return(t,S)=>(n(),c(M,null,[t.header.key=="actions"?(n(),P(pe,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:S[0]||(S[0]=o=>F(t.item.raw))})):t.header.type==="ACCOMMODATION"&&t.accommodations.length>0&&t.item.raw[t.header.key]?(n(),P(na,{key:1,value:t.item.raw[t.header.key].Data,accommodations:t.accommodations,convention:t.convention,venues:t.venues,registration:t.item.raw[t.header.key].Registration},null,8,["value","accommodations","convention","venues","registration"])):t.header.type==="EXTRAS"&&t.extras.length>0?(n(),P(da,{key:2,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(n(),P(Aa,{key:3,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(n(),P(Ea,{key:4,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(n(!0),c(M,{key:5},H(t.item.raw[t.header.key],o=>(n(),c("ul",{key:o.Heading},[N("li",null,[N("strong",null,g(o.Heading)+":",1),Y(" "+g(x(Lt)(o.Submission.Status))+" ",1),l(pe,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:b=>h(o.Registration,o.Form,o.Submission)},null,8,["onClick"])])]))),128)):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(n(),P(bt,{key:6,class:"rounded-circle",src:t.item.raw[t.header.key],height:"32",width:"32"},null,8,["src"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(n(),c(M,{key:7},[t.item.raw[t.header.key].length===1?(n(),c("em",va," Not in a group ")):(n(),c(M,{key:1},[N("ul",null,[(n(!0),c(M,null,H(t.item.raw[t.header.key],o=>(n(),c("li",{key:o.UUID,class:"ml-0"},[Y(" #"+g(o.Reference)+" : "+g(o.Name)+" ",1),o.IsLeader?(n(),c("strong",Sa,"(Leader)")):W("",!0)]))),128))]),Ra,Y(" "+g(t.item.raw[t.header.key].length),1)],64))],64)):(n(),c(M,{key:8},[Y(g(t.item.raw[t.header.key]),1)],64)),f.value&&p.value&&a.value?(n(),P(Nt,{key:9,modelValue:f.value,"onUpdate:modelValue":S[3]||(S[3]=o=>f.value=o),scrollable:!0},{default:s(()=>[l(ze,{class:"bg-red-darken-4"},{default:s(()=>[l(Ft,null,{default:s(()=>[l(nt,{modelValue:a.value,"onUpdate:modelValue":S[1]||(S[1]=o=>a.value=o),admin:!0,convention:t.convention,data:p.value,editable:!0,"registration-group":u.value,onClose:S[2]||(S[2]=o=>{f.value=!1,$("reload")})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):W("",!0)],64))}}),Za=re({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:$}){var De;const E=kt();$("pageTitle","Registration Manager");const a=tt(),r=at(),u=I(!0);let p=((De=a.params.convention)==null?void 0:De.toString())||"";const f=I({ID:0,ConventionUUID:Se(),OrganisationID:0,OrganisationUUID:Vt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),F=Ce(),h=I({ID:0,AdminLayoutUUID:Se(),ConventionID:f.value.ID,ConventionUUID:f.value.ConventionUUID,Name:"Registration Table",Type:We.ADMIN_LAYOUT_TABLE,Panels:[]}),t=I([]),S=I([]),o=I([]),b=I(1),R=I(10),Z=I([]),k=I(0),ee=I(!1),Q=I(""),te=I(""),ne=I(""),se=I(""),de=I([]),Ue=I([]),_=I([]),U=I([]),O=I([]),d=I([]),D=I(0);ke(D,i=>{i===7&&G()});const q=()=>{t.value=[],S.value=[],o.value=[];try{F.getConventionAdminLayoutByName(f.value.ConventionUUID,"Registration Table").then(i=>{D.value+=1,i?h.value=i:(h.value.ConventionID=f.value.ID,h.value.ConventionUUID=f.value.ConventionUUID)})}catch{h.value.ConventionID=f.value.ID,h.value.ConventionUUID=f.value.ConventionUUID}try{F.getConventionForms(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(t.value=i)})}catch{}try{F.getConventionAccommodation(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(Ue.value=i)})}catch{}try{F.getConventionVenues(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(d.value=i)})}catch{}try{F.getConventionExtras(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(_.value=i)})}catch{}try{F.getConventionInterests(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(U.value=i)})}catch{}try{F.getConventionTickets(f.value.ConventionUUID).then(i=>{D.value+=1,i&&(O.value=i)})}catch{}},K=({page:i,itemsPerPage:m,sortBy:A})=>{b.value=i,Z.value=A;const T=o.value.find(j=>j.uuid==Q.value),X=T==null?void 0:T.layout.Items;let z="",Ve="";if(A&&X&&A.length>=1){const j=X.find(Te=>Te.LayoutItemUUID==A[0].key);switch(Ve=A[0].order,j==null?void 0:j.MetaField){case V.META_DATA_SOURCE_ACCOMMODATION_FORM:z="submission.status";break;case V.META_DATA_SOURCE_BADGE_FORM:z="submission.status";break;case V.META_DATA_SOURCE_DEALER_FORM:z="submission.status";break;case V.META_DATA_SOURCE_REGISTRATION_FORM:z="submission.status";break;case V.META_DATA_SOURCE_REGISTRATION_REFERENCE:z="reference";break;case V.META_DATA_SOURCE_SUBMISSION_DATE:z="created";break;case V.META_DATA_SOURCE_SUBMISSION_STATUS:z="submission.status";break}switch(j==null?void 0:j.UserField){case w.USER_DATA_SOURCE_DISPLAY_NAME:z="user.display_name";break;case w.USER_DATA_SOURCE_EMAIL:z="user.email";break;case w.USER_DATA_SOURCE_FIRST_NAME:z="user.firstname";break;case w.USER_DATA_SOURCE_HANDLE:z="user.handle";break;case w.USER_DATA_SOURCE_LAST_NAME:z="user.lastname";break}}try{const j={Direction:Ve,Limit:m,Offset:(i-1)*m,Order:z};(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_ACCOMMODATION&&(j.Accommodation=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_BADGE&&(j.Badge=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_DEALER&&(j.Dealer=!0),(T==null?void 0:T.layout.RequiredFormType)===ie.FORM_TYPE_REGISTRATION&&(j.Registration=!0),j.Email=se.value,j.Reference=ne.value,F.searchConventionRegistrations(f.value.ConventionUUID,j).then(Te=>{Te&&(k.value=Te.Total,S.value=Te.Registrations,o.value.forEach(Me=>{const Qe=Me.layout;Me.items=S.value.map(L=>{const B={};return Me.headers.forEach(Pe=>{var $e;const C=Qe.Items.find(me=>me.LayoutItemUUID===Pe.key);if(C){if(C.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&C.SectionField)L.Submissions.forEach(me=>{const ae=me.Data.find(he=>he.SectionFieldUUID===C.SectionFieldUUID);if(ae){Pe.type===it.ACCOMMODATION?B[C.LayoutItemUUID]={Data:ae.Data,Registration:L}:B[C.LayoutItemUUID]=ae.Data;return}});else if(C.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&C.UserField)switch(C.UserField){case w.USER_DATA_SOURCE_AVATAR:B[C.LayoutItemUUID]=E.GetProfileImageURL(L.UserUUID);break;case w.USER_DATA_SOURCE_DISPLAY_NAME:B[C.LayoutItemUUID]=L.User.DisplayName;break;case w.USER_DATA_SOURCE_EMAIL:B[C.LayoutItemUUID]=L.User.Additional.Email;break;case w.USER_DATA_SOURCE_HANDLE:B[C.LayoutItemUUID]=L.User.Handle;break;case w.USER_DATA_SOURCE_DATE_OF_BIRTH:B[C.LayoutItemUUID]=L.User.Additional.DOB;break;case w.USER_DATA_SOURCE_FIRST_NAME:B[C.LayoutItemUUID]=L.User.Additional.FirstName;break;case w.USER_DATA_SOURCE_LAST_NAME:B[C.LayoutItemUUID]=L.User.Additional.LastName;break;case w.USER_DATA_SOURCE_TELEGRAM:B[C.LayoutItemUUID]="";break}else if(C.SourceType==="LAYOUT_ITEM_SOURCE_META"&&C.MetaField){const me=[];let ae;const he=($e=t.value.find(v=>v.Type===ie.FORM_TYPE_REGISTRATION))==null?void 0:$e.FormUUID,we=L.Submissions.find(v=>v.FormUUID===he);switch(C.MetaField){case V.META_DATA_SOURCE_REGISTRATION_GROUP:L.Leader?ae=L:ae=L.Primary,me.push({Name:ae.User.DisplayName,UUID:ae.UserUUID,IsLeader:!0,Reference:ae.Reference}),me.push(...ae.Members.map(v=>({Name:v.User.DisplayName,UUID:v.UserUUID,IsLeader:!1,Reference:v.Reference}))),B[C.LayoutItemUUID]=me;break;case V.META_DATA_SOURCE_REGISTRATION_REFERENCE:B[C.LayoutItemUUID]=L.Reference;break;case V.META_DATA_SOURCE_SUBMISSION_DATE:if(we){const v=new Date(we.CreatedAt||"");B[C.LayoutItemUUID]=`${v.getFullYear()}-${(v.getMonth()+1).toString().padStart(2,"0")}-${v.getDate().toString().padStart(2,"0")} ${v.getHours().toString().padStart(2,"0")}:${v.getMinutes().toString().padStart(2,"0")}:${v.getSeconds().toString().padStart(2,"0")}`}else{const v=new Date(L.CreatedAt||"");B[C.LayoutItemUUID]=`${v.getFullYear()}-${(v.getMonth()+1).toString().padStart(2,"0")}-${v.getDate().toString().padStart(2,"0")} ${v.getHours().toString().padStart(2,"0")}:${v.getMinutes().toString().padStart(2,"0")}:${v.getSeconds().toString().padStart(2,"0")}`}break;case V.META_DATA_SOURCE_ACCOMMODATION_FORM:Ie(L.Submissions,t.value),B[C.LayoutItemUUID]=L.Submissions.map(v=>{const y=t.value.find(Ae=>Ae.FormUUID===v.FormUUID);return{Heading:y==null?void 0:y.Heading,Form:y,Submission:v,Registration:L}}).filter(v=>{var y;return((y=v.Form)==null?void 0:y.Type)===ie.FORM_TYPE_ACCOMMODATION});break;case V.META_DATA_SOURCE_BADGE_FORM:Ie(L.Submissions,t.value),B[C.LayoutItemUUID]=L.Submissions.map(v=>{const y=t.value.find(Ae=>Ae.FormUUID===v.FormUUID);return{Heading:y==null?void 0:y.Heading,Form:y,Submission:v,Registration:L}}).filter(v=>{var y;return((y=v.Form)==null?void 0:y.Type)===ie.FORM_TYPE_BADGE});break;case V.META_DATA_SOURCE_DEALER_FORM:Ie(L.Submissions,t.value),B[C.LayoutItemUUID]=L.Submissions.map(v=>{const y=t.value.find(Ae=>Ae.FormUUID===v.FormUUID);return{Heading:y==null?void 0:y.Heading,Form:y,Submission:v,Registration:L}}).filter(v=>{var y;return((y=v.Form)==null?void 0:y.Type)===ie.FORM_TYPE_DEALER});break;case V.META_DATA_SOURCE_SUBMISSION_STATUS:Ie(L.Submissions,t.value),B[C.LayoutItemUUID]=L.Submissions.map(v=>{const y=t.value.find(Ae=>Ae.FormUUID===v.FormUUID);return{Heading:y==null?void 0:y.Heading,Form:y,Submission:v,Registration:L}});break}}}}),B})}),u.value=!1)})}catch{}},G=()=>{h.value.Panels.forEach(i=>{i.Items.forEach(m=>{(m.SectionField==null||m.SectionField.Field==null)&&t.value.find(A=>{A.Sections.find(T=>{if(T.Fields){const X=T.Fields.find(z=>z.SectionFieldUUID===m.SectionFieldUUID);if(X)return m.SectionField=X,!0}})})})}),h.value.Panels.length>0&&(o.value=[],h.value.Panels.forEach(i=>{const m={uuid:Se(),order:i.Order,name:i.Name,headers:[],items:[],layout:i};i.Items.sort((A,T)=>A.Order>T.Order?1:A.Order==T.Order?0:-1),m.headers=i.Items.map(A=>{var T,X;return A.DefaultSort&&de.value.push({key:A.LayoutItemUUID,order:"asc"}),{key:A.LayoutItemUUID,title:A.Label||((X=(T=A.SectionField)==null?void 0:T.Field)==null?void 0:X.Label)||"",align:A.Align==="end"?"end":"start",sortable:ge(A),type:ye(A)}}),o.value.push(m)})),(Q.value==null||Q.value=="")&&o.value.length>0&&(Q.value=o.value[0].uuid)};p?F.getConvention(p).then(i=>{i&&(f.value=i,q())}).catch(()=>{r.push("/")}):r.push("/");const ye=i=>{var m,A;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_META)return`${i.SourceType}.${i.MetaField}`;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_FORM)return(A=(m=i.SectionField)==null?void 0:m.Field)==null?void 0:A.Type;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_USER)return`${i.SourceType}.${i.UserField}`},ge=i=>{const m=[V.META_DATA_SOURCE_ACCOMMODATION_FORM,V.META_DATA_SOURCE_BADGE_FORM,V.META_DATA_SOURCE_DEALER_FORM,V.META_DATA_SOURCE_REGISTRATION_FORM,V.META_DATA_SOURCE_REGISTRATION_REFERENCE,V.META_DATA_SOURCE_SUBMISSION_DATE,V.META_DATA_SOURCE_SUBMISSION_STATUS],A=[w.USER_DATA_SOURCE_DISPLAY_NAME,w.USER_DATA_SOURCE_EMAIL,w.USER_DATA_SOURCE_HANDLE,w.USER_DATA_SOURCE_DATE_OF_BIRTH,w.USER_DATA_SOURCE_FIRST_NAME,w.USER_DATA_SOURCE_LAST_NAME];return m.includes(i.MetaField)||A.includes(i.UserField)};return(i,m)=>(n(),P(wt,null,{default:s(()=>[l(Pt,{color:"blue-darken-4"},{default:s(()=>[l(ft,{modelValue:Q.value,"onUpdate:modelValue":m[0]||(m[0]=A=>Q.value=A),"show-arrows":""},{default:s(()=>[(n(!0),c(M,null,H(o.value,A=>(n(),P(pt,{key:A.uuid,value:A.uuid},{default:s(()=>[Y(g(A.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l($t),l(pe,{icon:"mdi:mdi-cog-outline",onClick:m[1]||(m[1]=A=>ee.value=!0)})]),_:1}),l(yt,{modelValue:Q.value,"onUpdate:modelValue":m[9]||(m[9]=A=>Q.value=A),disabled:!0},{default:s(()=>[(n(!0),c(M,null,H(o.value,A=>(n(),P(Ct,{key:A.uuid,value:A.uuid},{default:s(()=>[A.uuid===Q.value?(n(),P(ze,{key:0,class:"pa-2"},{default:s(()=>[l(x(jt),{"items-per-page":R.value,"onUpdate:itemsPerPage":m[7]||(m[7]=T=>R.value=T),"sort-by":de.value,"onUpdate:sortBy":m[8]||(m[8]=T=>de.value=T),headers:A.headers,"items-length":k.value,items:A.items,"item-value":"LayoutItemUUID",loading:u.value,search:te.value,"onUpdate:options":K},Ne({top:s(()=>[l(ve,null,{default:s(()=>[l(oe,null,{default:s(()=>[l(J,null,{default:s(()=>[l(Ee,{modelValue:ne.value,"onUpdate:modelValue":m[2]||(m[2]=T=>ne.value=T),label:"Search by Badge",onInput:m[3]||(m[3]=T=>te.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),l(J,null,{default:s(()=>[l(Ee,{modelValue:se.value,"onUpdate:modelValue":m[4]||(m[4]=T=>se.value=T),label:"Search By Email",onInput:m[5]||(m[5]=T=>te.value=Date.now().toString())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:2},[H(A.headers,T=>({name:`item.${T.key}`,fn:s(({item:X})=>[l(Da,{header:T,item:X,accommodations:Ue.value,convention:f.value,extras:_.value,interests:U.value,tickets:O.value,venues:d.value,onReload:m[6]||(m[6]=z=>K({page:b.value,itemsPerPage:R.value,sortBy:Z.value}))},null,8,["header","item","accommodations","convention","extras","interests","tickets","venues"])])}))]),1032,["items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):W("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),ee.value?(n(),P(Jt,{key:0,title:"Edit Layout",modelValue:ee.value,"onUpdate:modelValue":m[10]||(m[10]=A=>ee.value=A),layout:h.value,onSave:m[11]||(m[11]=A=>{ee.value=!1,G()})},null,8,["modelValue","layout"])):W("",!0)]),_:1}))}});export{Za as default};
