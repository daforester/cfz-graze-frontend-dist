import{p as Le,r as w,c as ve,C as f,h as yl,ap as ol,at as Fe,R as ul,d as Be,ab as bl,s as Ve,u as Me,w as ne,X as je,av as Il,f as s,F as B,m as pe,x as K,aC as Ul,aD as ze,i as ye,M as ae,N as be,W as Ye,n as i,B as F,D as H,y as Q,v as r,Q as oe,q as C,A as x,k as Te,z as sl,a2 as $e,P as Ge,E as Dl,b as Tl,a8 as kl,_ as Cl,aa as Qe,S as Vl,aE as Sl,l as El,aF as Ze}from"./index-b5abcb9c.js";import{F as de}from"./form-3a7bf7fd.js";import{S as wl}from"./submission-6136b51d.js";import{a as Al,V as De,u as Ke,m as Ol,b as il,c as Rl,d as Ml}from"./VCheckbox-0ee7cae8.js";import{s as Ee}from"./index-26b71cef.js";import{e as _l,V as he,a as fe,c as _e,d as Se,b as rl}from"./VList-0258b68c.js";import{V as J,a as Y}from"./VRow-98a5e11e.js";import{m as Ll,u as $l,a as xl,b as Pl,V as qe,c as Fl}from"./copyToClipboard-2e720fca.js";import{q as ql,u as He,V as we,A as Nl,a as Bl}from"./VContainer-d4c2877e.js";import{d as Yl,_ as el}from"./SaveButton.vue_vue_type_script_setup_true_lang-89994a64.js";import{a as dl}from"./scopeId-1380f124.js";import{m as Gl,V as ke,a as Ne,b as Kl,c as Hl}from"./VTextField-05cbab1a.js";import{V as le,a as Xl}from"./VBtn-7d29c3b3.js";import{m as Wl,V as ll}from"./VAvatar-4c2465ae.js";import{V as vl}from"./VForm-ea8ca88d.js";import{V as Jl}from"./VFileInput-7a5b5d65.js";import{V as jl}from"./VTextarea-cd965534.js";import{u as zl,f as Ql}from"./forwardRefs-d2af5917.js";import{a as Zl}from"./VChip-b5ff60a3.js";import{G as et}from"./userData-1d1266ac.js";import{v as xe}from"./v4-a960c1f4.js";import{e as lt,V as tt,a as at,c as nt}from"./VCard-1e787068.js";var re=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(re||{});const Ua=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var cl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(cl||{});const Da=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Ae=e=>{e.sort((h,l)=>(h.Order?h.Order:0)-(l.Order?l.Order:0)),e.forEach((h,l)=>{h.Order=l})},Ta=(e,h)=>{const l=h.indexOf(e);if(l===0)return;const L=e.Order;e.Order=h[l-1].Order,h[l-1].Order=L,Ae(h)},ka=(e,h)=>{const l=h.indexOf(e);if(l>=h.length-1)return;const L=e.Order;e.Order=h[l+1].Order,h[l+1].Order=L,Ae(h)};const ot=(e,h,l)=>e==null||h==null?-1:e.toString().toLocaleLowerCase().indexOf(h.toString().toLocaleLowerCase()),ut=Le({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,h,l){var T;const L=[],p=(l==null?void 0:l.default)??ot,y=l!=null&&l.filterKeys?ol(l.filterKeys):!1,O=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return L;e:for(let A=0;A<e.length;A++){const g=e[A],t={},m={};let a=-1;if(h&&!(l!=null&&l.noFilter)){if(typeof g=="object"){const D=y||Object.keys(g);for(const u of D){const n=Fe(g,u,g),b=(T=l==null?void 0:l.customKeyFilter)==null?void 0:T[u];if(a=b?b(n,h,g):p(n,h,g),a!==-1&&a!==!1)b?t[u]=a:m[u]=a;else if((l==null?void 0:l.filterMode)==="every")continue e}}else a=p(g,h,g),a!==-1&&a!==!1&&(m.title=a);const S=Object.keys(m).length,d=Object.keys(t).length;if(!S&&!d||(l==null?void 0:l.filterMode)==="union"&&d!==O&&!S||(l==null?void 0:l.filterMode)==="intersection"&&(d!==O||!S))continue}L.push({index:A,matches:{...m,...t}})}return L}function it(e,h,l,L){const p=w([]),y=w(new Map),O=ve(()=>L!=null&&L.transform?f(h).map(L==null?void 0:L.transform):f(h));yl(()=>{const A=typeof l=="function"?l():f(l),g=typeof A!="string"&&typeof A!="number"?"":String(A),t=st(O.value,g,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),m=f(h),a=[],S=new Map;t.forEach(d=>{let{index:D,matches:u}=d;const n=m[D];a.push(n),S.set(n.value,u)}),p.value=a,y.value=S});function T(A){return y.value.get(A.value)}return{filteredItems:p,filteredMatches:y,getMatches:T}}function rt(e,h,l){if(h==null)return e;if(Array.isArray(h))throw new Error("Multiple matches is not implemented");return typeof h=="number"&&~h?s(B,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,h)]),s("span",{class:"v-autocomplete__mask"},[e.substr(h,l)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(h+l)])]):e}const dt=Le({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ll(),...ul(Gl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Wl({transition:!1})},"VAutocomplete"),tl=Be()({name:"VAutocomplete",props:dt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,h){let{slots:l}=h;const{t:L}=bl(),p=w(),y=Ve(!1),O=Ve(!0),T=Ve(!1),A=w(),g=w(),t=Me(e,"menu"),m=ve({get:()=>t.value,set:E=>{var G;t.value&&!E&&((G=A.value)!=null&&G.ΨopenChildren)||(t.value=E)}}),a=Ve(-1),S=ve(()=>{var E;return(E=p.value)==null?void 0:E.color}),d=ve(()=>m.value?e.closeText:e.openText),{items:D,transformIn:u,transformOut:n}=_l(e),{textColorClasses:b,textColorStyles:v}=ql(S),_=Me(e,"search",""),q=Me(e,"modelValue",[],E=>u(E===null?[null]:ol(E)),E=>{const G=n(E);return e.multiple?G:G[0]??null}),N=zl(),{filteredItems:M,getMatches:I}=it(e,D,()=>O.value?"":_.value),R=ve(()=>q.value.map(E=>D.value.find(G=>{const z=Fe(G.raw,e.itemValue),ge=Fe(E.raw,e.itemValue);return z===void 0||ge===void 0?!1:e.returnObject?e.valueComparator(z,ge):e.valueComparator(G.value,E.value)})||E)),k=ve(()=>e.hideSelected?M.value.filter(E=>!R.value.some(G=>G.value===E.value)):M.value),P=ve(()=>R.value.map(E=>E.props.value)),U=ve(()=>R.value[a.value]),X=ve(()=>{var G;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&_.value===((G=k.value[0])==null?void 0:G.title))&&k.value.length>0&&!O.value&&!T.value}),te=ve(()=>e.hideNoData&&!D.value.length||e.readonly||(N==null?void 0:N.isReadonly.value)),ue=w(),{onListScroll:V,onListKeydown:o}=$l(ue,p);function c(E){e.openOnClear&&(m.value=!0),_.value=""}function j(){te.value||(m.value=!0)}function $(E){te.value||(y.value&&(E.preventDefault(),E.stopPropagation()),m.value=!m.value)}function se(E){var ge,W,ie;if(e.readonly||N!=null&&N.isReadonly.value)return;const G=p.value.selectionStart,z=P.value.length;if((a.value>-1||["Enter","ArrowDown","ArrowUp"].includes(E.key))&&E.preventDefault(),["Enter","ArrowDown"].includes(E.key)&&(m.value=!0),["Escape"].includes(E.key)&&(m.value=!1),X.value&&["Enter","Tab"].includes(E.key)&&Ie(k.value[0]),E.key==="ArrowDown"&&X.value&&((ge=ue.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(E.key)){if(a.value<0){E.key==="Backspace"&&!_.value&&(a.value=z-1);return}const Z=a.value;U.value&&Ie(U.value),a.value=Z>=z-1?z-2:Z}if(E.key==="ArrowLeft"){if(a.value<0&&G>0)return;const Z=a.value>-1?a.value-1:z-1;R.value[Z]?a.value=Z:(a.value=-1,p.value.setSelectionRange((W=_.value)==null?void 0:W.length,(ie=_.value)==null?void 0:ie.length))}if(E.key==="ArrowRight"){if(a.value<0)return;const Z=a.value+1;R.value[Z]?a.value=Z:(a.value=-1,p.value.setSelectionRange(0,0))}}}function ee(E){_.value=E.target.value}function Xe(E){if(ze(p.value,":autofill")||ze(p.value,":-webkit-autofill")){const G=D.value.find(z=>z.title===E.target.value);G&&Ie(G)}}function ml(){var E;y.value&&(O.value=!0,(E=p.value)==null||E.focus())}function fl(E){y.value=!0,setTimeout(()=>{T.value=!0})}function gl(E){T.value=!1}function pl(E){(E==null||E===""&&!e.multiple)&&(q.value=[])}const Ce=Ve(!1);function Ie(E){if(e.multiple){const G=P.value.findIndex(z=>e.valueComparator(z,E.value));if(G===-1)q.value=[...q.value,E];else{const z=[...q.value];z.splice(G,1),q.value=z}}else q.value=[E],Ce.value=!0,_.value=E.title,m.value=!1,O.value=!0,je(()=>Ce.value=!1)}return ne(y,(E,G)=>{var z;E!==G&&(E?(Ce.value=!0,_.value=e.multiple?"":String(((z=R.value.at(-1))==null?void 0:z.props.title)??""),O.value=!0,je(()=>Ce.value=!1)):(!e.multiple&&!_.value?q.value=[]:X.value&&!T.value&&!R.value.some(ge=>{let{value:W}=ge;return W===k.value[0].value})&&Ie(k.value[0]),m.value=!1,_.value="",a.value=-1))}),ne(_,E=>{!y.value||Ce.value||(E&&(m.value=!0),O.value=!E)}),ne(m,()=>{if(!e.hideSelected&&m.value&&R.value.length){const E=k.value.findIndex(G=>R.value.some(z=>G.value===z.value));Il&&window.requestAnimationFrame(()=>{var G;E>=0&&((G=g.value)==null||G.scrollToIndex(E))})}}),He(()=>{const E=!!(e.chips||l.chip),G=!!(!e.hideNoData||k.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),z=q.value.length>0,[ge]=ke.filterProps(e);return s(ke,pe({ref:p},ge,{modelValue:_.value,"onUpdate:modelValue":pl,focused:y.value,"onUpdate:focused":W=>y.value=W,validationValue:q.externalValue,dirty:z,onInput:ee,onChange:Xe,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":m.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!l.selection,"v-autocomplete--selecting-index":a.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:z?void 0:e.placeholder,"onClick:clear":c,"onMousedown:control":j,onKeydown:se}),{...l,default:()=>s(B,null,[s(xl,pe({ref:A,modelValue:m.value,"onUpdate:modelValue":W=>m.value=W,activator:"parent",contentClass:"v-autocomplete__content",disabled:te.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ml},e.menuProps),{default:()=>[G&&s(he,{ref:ue,selected:P.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:W=>W.preventDefault(),onKeydown:o,onFocusin:fl,onFocusout:gl,onScrollPassive:V,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var W,ie,Z;return[(W=l["prepend-item"])==null?void 0:W.call(l),!k.value.length&&!e.hideNoData&&(((ie=l["no-data"])==null?void 0:ie.call(l))??s(fe,{title:L(e.noDataText)},null)),s(Pl,{ref:g,renderless:!0,items:k.value},{default:Ue=>{var Je;let{item:ce,index:me,itemRef:hl}=Ue;const We=pe(ce.props,{ref:hl,key:me,active:X.value&&me===0?!0:void 0,onClick:()=>Ie(ce)});return((Je=l.item)==null?void 0:Je.call(l,{item:ce,index:me,props:We}))??s(fe,We,{prepend:Oe=>{let{isSelected:Re}=Oe;return s(B,null,[e.multiple&&!e.hideSelected?s(Al,{key:ce.value,modelValue:Re,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependIcon&&s(we,{icon:ce.props.prependIcon},null)])},title:()=>{var Oe,Re;return O.value?ce.title:rt(ce.title,(Oe=I(ce))==null?void 0:Oe.title,((Re=_.value)==null?void 0:Re.length)??0)}})}}),(Z=l["append-item"])==null?void 0:Z.call(l)]}})]}),R.value.map((W,ie)=>{var ce;function Z(me){me.stopPropagation(),me.preventDefault(),Ie(W)}const Ue={"onClick:close":Z,onMousedown(me){me.preventDefault(),me.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:W.value,class:["v-autocomplete__selection",ie===a.value&&["v-autocomplete__selection--selected",b.value]],style:ie===a.value?v.value:{}},[E?l.chip?s(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:W.title}}},{default:()=>{var me;return[(me=l.chip)==null?void 0:me.call(l,{item:W,index:ie,props:Ue})]}}):s(Zl,pe({key:"chip",closable:e.closableChips,size:"small",text:W.title},Ue),null):((ce=l.selection)==null?void 0:ce.call(l,{item:W,index:ie}))??s("span",{class:"v-autocomplete__selection-text"},[W.title,e.multiple&&ie<R.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[K(",")])])])})]),"append-inner":function(){var Ue;for(var W=arguments.length,ie=new Array(W),Z=0;Z<W;Z++)ie[Z]=arguments[Z];return s(B,null,[(Ue=l["append-inner"])==null?void 0:Ue.call(l,...ie),e.menuIcon?s(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:$,onClick:Ul,"aria-label":L(d.value),title:L(d.value)},null):void 0])}})}),Ql({isFocused:y,isPristine:O,menu:m,search:_,filteredItems:M,select:Ie},p)}}),vt={class:"extrasList"},ct=ye({__name:"Extras",props:ae({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["change"],["update:modelValue"]),setup(e,{emit:h}){const l=e,{admin:L=!1,convention:p,disabled:y=!1}=l,O=be(e,"modelValue"),T=Ye.getInstance(),A=w({});try{A.value=JSON.parse(O.value)}catch{}const g=w([]),t=w([]);ne(l,()=>{a()}),ne(A.value,d=>{for(const D in d)if(d[D].checked){const u=g.value.map(n=>{var b;return(b=n.Options)==null?void 0:b.find(v=>v.OptionUUID===D)});if(u&&u.length>0)try{const n=u[0];d[D].choiceId===""&&n&&n.Choices&&n.Choices.length>0&&(d[D].choiceId=n.Choices[0].TagUUID),d[D].price=n==null?void 0:n.Price}catch{}}else d[D].choiceId="",d[D].price=0;O.value=JSON.stringify(d),S()});const m=ve({get:()=>g.value.map(d=>d.ExtraUUID),set:()=>{}}),a=()=>{var D;const d=((D=l.items.find(u=>u.Title==="SelectedExtras"))==null?void 0:D.Value)||"[]";try{const u=JSON.parse(d);g.value=t.value.filter(n=>u.find(b=>b===n.ExtraUUID))||[],m.value=[...g.value.map(n=>n.ExtraUUID)],g.value.forEach(n=>{var b;(b=n.Options)==null||b.forEach(v=>{A.value[v.OptionUUID]||(A.value[v.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in p&&p.Extras.length?(t.value=p.Extras,a()):"ConventionUUID"in p&&(L?T==null||T.getConventionExtras(p.ConventionUUID).then(d=>{d&&(t.value=d,a())}):T==null||T.getAvailableConventionExtras(p.ConventionUUID).then(d=>{d&&(t.value=d,a())}));const S=(d=void 0)=>{setTimeout(()=>h("change",d),100)};return(d,D)=>(i(),F("div",vt,[H("h4",null,Q(d.label),1),s(he,{opened:m.value,"onUpdate:opened":D[0]||(D[0]=u=>m.value=u)},{default:r(()=>[(i(!0),F(B,null,oe(g.value,u=>(i(),C(rl,{key:u.ExtraUUID,value:u.ExtraUUID},{activator:r(({props:n})=>[s(fe,pe({"prepend-icon":"mdi:mdi-group","append-icon":""},n),{default:r(()=>[u.Name?(i(),C(_e,{key:0},{default:r(()=>[H("strong",null,Q(u.Name),1)]),_:2},1024)):x("",!0),u.Description?(i(),C(Se,{key:1,class:"mt-2 d-inline"},{default:r(()=>[K(Q(u.Description),1)]),_:2},1024)):x("",!0)]),_:2},1040)]),default:r(()=>[u.Options?(i(!0),F(B,{key:0},oe(u.Options,n=>(i(),C(fe,{key:n.OptionUUID,class:"override-pl"},{default:r(()=>[s(J,null,{default:r(()=>[s(Y,{cols:"12",sm:"6"},{default:r(()=>[s(De,{label:`${n.Name} ${n.Price&&n.Price!==0?`(${f(Ee).currencySymbol}${n.Price})`:""}`,modelValue:A.value[n.OptionUUID].checked,"onUpdate:modelValue":b=>A.value[n.OptionUUID].checked=b,disabled:f(y),"hide-details":"",onChange:S},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n.Choices&&n.Choices.length>1&&A.value[n.OptionUUID].checked?(i(),C(Y,{key:0,cols:"12",sm:"6"},{default:r(()=>[s(qe,{items:n.Choices.sort((b,v)=>b.Title.localeCompare(v.Title)).map(b=>({value:b.TagUUID,title:b.Title})),modelValue:A.value[n.OptionUUID].choiceId,"onUpdate:modelValue":b=>A.value[n.OptionUUID].choiceId=b,"item-value":"value","item-title":"title",variant:"outlined",disabled:f(y),"hide-details":"",onChange:S},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):x("",!0)]),_:2},1024)]),_:2},1024))),128)):x("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const mt={class:"interestList"},ft=ye({__name:"Interests",props:ae({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["change"],["update:modelValue"]),setup(e,{emit:h}){const l=e,{admin:L=!1,convention:p,disabled:y=!1}=l,O=be(e,"modelValue"),T=Ye.getInstance(),A=w({});try{A.value=JSON.parse(O.value)}catch{}const g=w([]),t=w([]);ne(A.value,d=>{O.value=JSON.stringify(d)});const m=w([]),a=()=>{var D;const d=((D=l.items.find(u=>u.Title==="SelectedInterests"))==null?void 0:D.Value)||"[]";try{const u=JSON.parse(d);g.value=t.value.filter(n=>u.find(b=>b===n.InterestUUID))||[],m.value=[...g.value.map(n=>n.InterestUUID)]}catch{}};"ConventionUUID"in p&&(L?T==null||T.getConventionInterests(p.ConventionUUID).then(d=>{d&&(t.value=d,a())}):T==null||T.getConventionInterests(p.ConventionUUID).then(d=>{d&&(t.value=d,a())})),ne(l,()=>{a()});const S=(d=void 0)=>{setTimeout(()=>h("change",d),100)};return(d,D)=>(i(),F("div",mt,[H("h4",null,Q(d.label),1),s(he,{opened:m.value,"onUpdate:opened":D[0]||(D[0]=u=>m.value=u)},{default:r(()=>[(i(!0),F(B,null,oe(g.value.sort((u,n)=>u.Order>n.Order?1:u.Order==n.Order?0:-1),u=>(i(),C(fe,{key:u.InterestUUID},{default:r(()=>[s(J,null,{default:r(()=>[s(Y,null,{default:r(()=>[s(De,{label:`${u.Name} ${u.Price&&u.Price>0?`(${f(Ee).currencySymbol}${u.Price})`:""}`,modelValue:A.value[u.InterestUUID],"onUpdate:modelValue":n=>A.value[u.InterestUUID]=n,disabled:f(y),messages:u.Description,onChange:S},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const al=(e,h,l)=>{if(l>=e.length){let L=l-e.length+1;for(;L--;)e.push(void 0)}e.splice(l,0,e.splice(h,1)[0])},Pe=e=>(Ae(e),e),Ca=e=>(h,l)=>h[e]<l[e]?-1:h[e]>l[e]?1:0,gt={class:"ticketList"},pt={key:0,class:"text-orange-darken-1"},ht=ye({__name:"Tickets",props:ae({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["change"],["update:modelValue"]),setup(e,{emit:h}){const l=e,{admin:L=!1,convention:p,disabled:y=!1,registrationGroup:O=void 0}=l,T=be(e,"modelValue"),A=Ye.getInstance(),g=w({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{g.value=JSON.parse(T.value),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked)}catch{}const t=w([]),m=w([]),a=w([]),S=w({required:(b,v=void 0)=>()=>{if(y||!(O!=null&&O.Registration.Leader))return!0;if(v==null){if(g.value.Ticket.length===0&&l.required)return"Must select at least one ticket option.";if(b&&b.ComponentsRequired>0&&g.value.Ticket.includes(b.TicketUUID||"")){let _=0;if(b.TicketComponents.forEach(q=>{g.value.ComponentsChecked.forEach(N=>{q.TicketUUID===N&&(_+=1)})}),_<b.ComponentsRequired)return`Must select ticket ${b.ComponentsRequired} component${b.ComponentsRequired===1?"":"s"}`}}return!0}}),d=()=>{var v;const b=((v=l.items.find(_=>_.Title==="SelectedTickets"))==null?void 0:v.Value)||"[]";try{const _=JSON.parse(b);t.value=m.value.filter(q=>q.Type==="TICKET_TYPE_GROUP"&&_.find(N=>N===q.TicketUUID))||[],a.value=[...t.value.filter(q=>q.Type==="TICKET_TYPE_GROUP").map(q=>q.TicketUUID)]}catch{}};if("ConventionUUID"in p)if(L)A==null||A.getConventionTickets(p.ConventionUUID).then(b=>{b&&(m.value=b,d())});else{const b=l.items.find(v=>v.Title==="SelectedTickets");b&&(A==null||A.getFieldTickets(b.FieldUUID).then(v=>{v&&(m.value=v,d())}))}ne(l,()=>{d()});const D=b=>{g.value.Ticket.length>1&&g.value.Ticket.shift(),g.value.ComponentsChecked=[];const v=[];t.value.forEach(_=>{(g.value.Ticket.includes(_.TicketUUID)||g.value.ComponentsChecked.includes(_.TicketUUID))&&v.push(..._.AddonTickets.map(q=>q.TicketUUID))}),g.value.AddonsChecked=g.value.AddonsChecked.filter(_=>v.includes(_)),n(b)},u=b=>{const v=m.value.find(_=>_.TicketUUID===g.value.Ticket[0]);if(v)for(;g.value.ComponentsChecked.length>v.ComponentsRequired;)g.value.ComponentsChecked.shift();n(b)},n=(b=void 0)=>{T.value=JSON.stringify(g.value),setTimeout(()=>h("change",b),100)};try{O!=null&&O.TicketData&&(g.value=JSON.parse(O.TicketData),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked),n())}catch{}return(b,v)=>{var _;return i(),F("div",gt,[H("h4",null,[K(Q(b.label)+" ",1),(_=f(O))!=null&&_.Registration.Leader?x("",!0):(i(),F("small",pt,"(controlled by group leader)"))]),s(he,{opened:a.value,"onUpdate:opened":v[4]||(v[4]=q=>a.value=q)},{default:r(()=>[(i(!0),F(B,null,oe(f(Pe)(t.value.filter(q=>q.Type===f(cl).TICKET_TYPE_GROUP)),q=>(i(),F(B,{key:q.TicketUUID},[q.Tickets.length>0?(i(),C(rl,{key:0,value:q.TicketUUID},{activator:r(({props:N})=>[s(fe,pe(N,{"prepend-icon":"mdi:mdi-group"}),{default:r(()=>[s(_e,null,{default:r(()=>[H("strong",null,Q(q.Name),1)]),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[K(Q(q.Description),1)]),_:2},1024)]),_:2},1040)]),default:r(()=>[(i(!0),F(B,null,oe(q.Tickets,N=>(i(),C(fe,{key:N.TicketUUID,class:"override-pl"},{default:r(()=>{var M;return[s(Se,{class:"d-inline"},{default:r(()=>[K(Q(N.Description),1)]),_:2},1024),s(De,{modelValue:g.value.Ticket,"onUpdate:modelValue":v[0]||(v[0]=I=>g.value.Ticket=I),value:N.TicketUUID,onChange:D,rules:[S.value.required(N)],"validate-on":"submit",disabled:f(y)||!((M=f(O))!=null&&M.Registration.Leader)},{label:r(()=>[s(we,{icon:N.RequiresAccommodation?"mdi:mdi-home":N.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${N.Name} ${N.Price>0?`(${f(Ee).currencySymbol}${N.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),g.value.Ticket.length>0&&N.TicketUUID===g.value.Ticket[0]?(i(),F(B,{key:0},[N.AddonTickets.length?(i(),C(he,{key:0},{default:r(()=>[(i(!0),F(B,null,oe(f(Pe)(N.AddonTickets),I=>(i(),F(B,{key:I==null?void 0:I.TicketUUID},[I?(i(),C(fe,{key:0},{default:r(()=>[s(_e,null,{default:r(()=>{var R;return[s(De,{modelValue:g.value.AddonsChecked,"onUpdate:modelValue":v[1]||(v[1]=k=>g.value.AddonsChecked=k),value:I.TicketUUID,onChange:v[2]||(v[2]=k=>{g.value.ComponentsChecked=[],n(k)}),disabled:f(y)||!((R=f(O))!=null&&R.Registration.Leader)},{label:r(()=>[s(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${I.Name} ${I.Price>0?`(${f(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[K(Q(I.Description),1)]),_:2},1024)]),_:2},1024)):x("",!0)],64))),128))]),_:2},1024)):x("",!0),N.TicketComponents.length?(i(),C(he,{key:1},{default:r(()=>[(i(!0),F(B,null,oe(f(Pe)(N.TicketComponents),I=>(i(),F(B,{key:I==null?void 0:I.TicketUUID},[I?(i(),C(fe,{key:0},{default:r(()=>[s(_e,null,{default:r(()=>{var R;return[s(De,{modelValue:g.value.ComponentsChecked,"onUpdate:modelValue":v[3]||(v[3]=k=>g.value.ComponentsChecked=k),value:I.TicketUUID,onChange:u,rules:[S.value.required(N,I)],"validate-on":"submit",disabled:f(y)||!((R=f(O))!=null&&R.Registration.Leader)},{label:r(()=>[s(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${I.Name} ${I.Price>0?`(${f(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Se,null,{default:r(()=>[K(Q(I.Description),1)]),_:2},1024)]),_:2},1024)):x("",!0)],64))),128))]),_:2},1024)):x("",!0)],64)):x("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):x("",!0)],64))),128))]),_:1},8,["opened"])])}}});const yt={key:0},bt=H("strong",null,"Your Sharing Group",-1),It={class:"d-flex flex-wrap my-2"},Ut=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Dt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Tt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},kt=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Ct={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Vt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},St=["href","onClick"],Et=H("br",null,null,-1),wt=H("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),At=H("strong",null,"Your Groups Accommodation",-1),Ot=H("br",null,null,-1),Rt=H("small",null,"(in order of preference, controlled by group leader)",-1),Mt=H("strong",null,"Accommodation Options",-1),_t=H("br",null,null,-1),Lt=H("strong",null,"Your Chosen Accommodation",-1),$t=H("small",null,"(in order of preference)",-1),xt=ye({__name:"Accommodation",props:ae({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["change","update:items"],["update:modelValue"]),setup(e,{emit:h}){const l=e,{admin:L=!1,convention:p,disabled:y}=l,O=be(e,"modelValue"),T=Ke(l,h,void 0,void 0,"items"),A=Ge(),g=dl(),t=Dl.getInstance(),m=w(Te(O.value)),a=w([]),S=w(),d=w({sharing:!1}),D=()=>{try{const o=JSON.parse(l.data);o&&(d.value=o)}catch{}};D(),ne(l,()=>{D(),l.registrationGroup&&(a.value=l.registrationGroup.Members,S.value=l.registrationGroup.Registration)}),ne(m,o=>{O.value=Te(o)},{deep:!0});const u=w(""),n=w(!1),b=()=>{var o;(o=S.value)!=null&&o.Leader&&A.getRegistrationInvite(p.ConventionUUID).then(c=>{if(c){const j=new URL(location.href);j.searchParams.set("token",c),u.value=j.toString()}})},v=()=>{Fl(u.value),b(),n.value=!0,setTimeout(()=>n.value=!1,2200)},_=(o=void 0)=>{setTimeout(()=>h("change",o),100)},q=w({required:o=>!l.required||o.length>0||"Selections Required"}),N=o=>o?`${o.Reference?`#${o.Reference}`:"(not registered)"} ${o.Name}`:"",M=()=>{var o;t.emit("registration.group.leave",(o=S.value)==null?void 0:o.RegistrationUUID)},I=o=>{t.emit("registration.group.remove.member",o)},R=w([]);ne(T,()=>{k()});const k=()=>{L?A.getConventionAccommodation(p.ConventionUUID).then(o=>{R.value=o.filter(c=>!!(T!=null&&T.value.find(j=>j.Value===c.AccommodationUUID)))||[]}):T.value.length>0&&A.getFieldAccommodation(T.value[0].FieldUUID).then(o=>{R.value=o.filter(c=>!!(T!=null&&T.value.find(j=>j.Value===c.AccommodationUUID)))||[]})};k(),(()=>{var o;if(l.registrationGroup)if(a.value=l.registrationGroup.Members,S.value=l.registrationGroup.Registration,(o=S.value)!=null&&o.Leader)b();else try{m.value=JSON.parse(l.registrationGroup.AccommodationData),_()}catch{}})();const U=w({column:0,id:""}),X=()=>{!y&&!m.value.includes(U.value.id)&&(U.value.column===0&&U.value.id!==""&&m.value.push(U.value.id),_())},te=()=>{const o=m.value.findIndex(c=>c===U.value.id);!y&&o>=0&&(m.value.splice(o,1),_())},ue=()=>{if(y||U.value.column!==1)return;const o=m.value.findIndex(c=>c===U.value.id);o<=0||(al(m.value,o,o-1),_())},V=()=>{if(y||U.value.column!==1)return;const o=m.value.findIndex(c=>c===U.value.id);o>=m.value.length-1||(al(m.value,o,o+1),_())};return(o,c)=>{var j;return i(),F(B,null,[H("h4",null,Q(o.label),1),s(J,null,{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>{var $,se;return[a.value&&S.value&&d.value.sharing?(i(),F("div",yt,[bt,!f(y)&&(($=a.value.find(ee=>ee.IsLeader))==null?void 0:$.UUID)!==S.value.RegistrationUUID?(i(),C(le,{key:0,color:"red",variant:"text",onClick:M},{default:r(()=>[K("(leave group)")]),_:1})):x("",!0),H("dl",It,[Ut,H("dd",Dt,[s(ll,{class:"rounded-circle d-inline-block",src:f(g).GetProfileImageURL(((se=a.value.find(ee=>ee.IsLeader))==null?void 0:se.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),H("div",Tt,Q(N(a.value.find(ee=>ee.IsLeader))),1)]),(i(!0),F(B,null,oe(a.value,ee=>(i(),F(B,{key:ee.UUID},[ee.IsLeader?x("",!0):(i(),F(B,{key:0},[kt,H("dd",Ct,[s(ll,{class:"rounded-circle d-inline-block",src:f(g).GetProfileImageURL(ee.UserUUID),height:"32",width:"32"},null,8,["src"]),H("div",Vt,[K(Q(N(ee))+" ",1),S.value.Leader?(i(),C(le,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:Xe=>I(ee.UUID),disabled:f(y)},null,8,["onClick","disabled"])):x("",!0)])])],64))],64))),128))]),s(Yl,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=ee=>n.value=ee),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),u.value&&S.value.Leader&&!f(y)?(i(),F(B,{key:1},[H("a",{href:u.value,onClick:sl(v,["prevent"]),class:"text-white text-decoration-none"},[s(le,{color:"blue",class:"mb-2"},{default:r(()=>[K("Get Invite Link")]),_:1})],8,St),Et,wt],64)):x("",!0)])):x("",!0)]}),_:1})]),_:1}),S.value&&!S.value.Leader?(i(),C(J,{key:0},{default:r(()=>[s(Y,{cols:"10",md:"5"},{default:r(()=>[At,Ot,Rt,s(he,null,{default:r(()=>[(i(!0),F(B,null,oe(m.value.map($=>R.value.find(se=>se.AccommodationUUID==$)).filter($=>$!==void 0),($,se)=>(i(),F(B,null,[$?(i(),C(fe,{key:$.AccommodationUUID,title:`${se+1}. ${$.Name}`,class:$e(U.value.column===1&&U.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):x("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(i(),C(J,{key:1},{default:r(()=>[s(Y,{cols:"12",md:"5"},{default:r(()=>[Mt,_t,s(he,null,{default:r(()=>[(i(!0),F(B,null,oe(R.value,$=>(i(),C(fe,{key:$.AccommodationUUID,title:$.Name,class:$e(U.value.column===0&&U.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:se=>U.value={column:0,id:$.AccommodationUUID},"append-icon":f(y)?"":"mdi:mdi-gesture-tap",onDblclick:c[1]||(c[1]=se=>X())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),f(y)?x("",!0):(i(),C(Y,{key:0,cols:"12",md:"1"},{default:r(()=>[s(J,{class:"d-md-none"},{default:r(()=>[s(Y,{cols:"12",class:"text-center"},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-down",size:"small",onClick:c[2]||(c[2]=$=>X()),color:"primary",title:"Select"}),K("   "),s(le,{icon:"mdi:mdi-arrow-up",size:"small",onClick:c[3]||(c[3]=$=>te()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(J,{class:"d-none d-md-flex h-100 align-content-center"},{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-right",size:"small",onClick:c[4]||(c[4]=$=>X()),color:"primary",title:"Select"})]),_:1}),s(Y,{cols:"12"},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-left",size:"small",onClick:c[5]||(c[5]=$=>te()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(Y,{cols:"10",md:"5"},{default:r(()=>[Lt,s(he,null,{default:r(()=>[(i(!0),F(B,null,oe(m.value.map($=>R.value.find(se=>se.AccommodationUUID==$)).filter($=>$!==void 0),($,se)=>(i(),F(B,null,[$?(i(),C(fe,{key:$.AccommodationUUID,title:`${se+1}. ${$.Name}`,class:$e(U.value.column===1&&U.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ee=>U.value={column:1,id:($==null?void 0:$.AccommodationUUID)||""},"append-icon":f(y)?"":"mdi:mdi-gesture-tap",onDblclick:c[6]||(c[6]=ee=>te())},null,8,["title","class","onClick","append-icon"])):x("",!0)],64))),256))]),_:1}),$t]),_:1}),f(y)?x("",!0):(i(),C(Y,{key:1,cols:"2",md:"1"},{default:r(()=>[s(J,{class:"d-flex h-100 align-content-center mt-3"},{default:r(()=>[s(Y,{cols:"12"},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-up",size:"small",onClick:c[7]||(c[7]=$=>ue()),color:"primary",title:"Higher Priority"})]),_:1}),s(Y,{cols:"12"},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-down",size:"small",onClick:c[8]||(c[8]=$=>V()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(j=S.value)!=null&&j.Leader?(i(),C(Ne,{key:2,modelValue:O.value,"onUpdate:modelValue":c[9]||(c[9]=$=>O.value=$),disabled:f(y)||!1,"persistent-hint":o.persistentHint||!1,"error-messages":o.errorMessages||"",rules:[q.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):x("",!0)],64)}}});const Pt=ye({__name:"AgeCheck",props:ae({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:h}){const l=e,L=Ke(l,h,void 0,void 0,"items"),p=be(e,"modelValue"),y=w({required:t=>!l.required||!!t||"Required.",min:t=>{var b,v;const m=new Date,a=m.getFullYear(),S=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),d=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),D=((b=L.value.find(_=>_.Title=="MIN_AGE"))==null?void 0:b.Value)||"18",u=((v=L.value.find(_=>_.Title=="BEFORE_DATE"))==null?void 0:v.Value)||`${a}-${S}-${d}`,n=A(u);return T(t,u,parseInt(D))||`You must be at least ${D} years old by ${n.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),O=()=>(h("blur"),!(y.value.min(p.value||"")!==!0||y.value.required(p.value||"")!==!0)),T=(t,m,a)=>{if(t>=m)return!1;const S=A(t),D=A(m).getTime()-S.getTime(),u=1e3*60*60*24*365.25;return D/u>=a},A=t=>{const[m,a,S]=t.split("-");return new Date(parseInt(m),parseInt(a)-1,parseInt(S))},g=(t=void 0)=>{setTimeout(()=>h("change",t),100)};return(t,m)=>(i(),C(ke,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=a=>p.value=a),type:"date",hint:t.hint||"",label:t.label||"",name:t.name||"",variant:"outlined",disabled:t.disabled||!1,"persistent-hint":t.persistentHint||!1,"error-messages":t.errorMessages||"",rules:[y.value.required,y.value.min],onBlur:O,onChange:g},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ft={class:"text-center"},qt={key:0},Nt={key:0,class:"image-progress my-auto mx-auto"},Bt=["src"],Yt=ye({__name:"BadgeImage",props:ae({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ae(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:h}){const l=e,L=be(e,"modelValue"),p=w({}),y=()=>{p.value.left=parseInt(getComputedStyle(a.value).left),p.value.top=parseInt(getComputedStyle(a.value).top),p.value.height=a.value.height,p.value.width=a.value.width,L.value=JSON.stringify(p.value)},O=Ge(),T=dl(),A=w(),g=w(""),t=w(!0),m=w(),a=w(),S=w(""),d=w(!1),D=w(0),u=w(),n=w({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),b=w(280),v=w(280);l.items.find(V=>{if(V.Title==="TargetWidth")return v.value=parseInt(V.Value,10)||280,!0}),l.items.find(V=>{if(V.Title==="TargetHeight")return b.value=parseInt(V.Value,10)||280,!0});const _=ve(()=>({"--preview-width":`${v.value}px`,"--preview-height":`${b.value}px`})),q=w(!1);try{p.value=JSON.parse(L.value||"{}"),p.value.fileUUID&&(S.value=T.GetBadgeImageURL(p.value.fileUUID))}catch{}l.registration&&O.getConBadgeDisplayName(l.registration.RegistrationUUID).then(V=>{V&&(g.value=V)}).catch(()=>{});const N=w({required:V=>!l.required||!!V||"Required.",saved:()=>!t.value||"File not uploaded."}),M=()=>(h("blur"),N.value.required(L.value||"")!==!0),I=(V=void 0)=>{k().then(()=>{R(),setTimeout(()=>h("change",V),100)})},R=()=>{m.value.files.length>0&&(S.value=URL.createObjectURL(m.value.files[0]))},k=async()=>{var o;const V=new FormData((o=A.value)==null?void 0:o.$el);t.value=!1,d.value=!0,T.SaveFormFile(V).then(c=>{c.Saved&&(d.value=!1,t.value=!0,p.value.fileUUID=c.FileUUID,q.value=!0)}).catch(()=>{})},P=()=>{a.value.style.left="0px",a.value.style.top="0px",a.value.width>a.value.height?a.value.width=v.value*(a.value.width/a.value.height):a.value.width=v.value,a.value.classList.remove("d-none")},U=(V,o=0,c=void 0)=>{if(c&&c.type)switch(c.type){case"touchstart":case"touchend":c.preventDefault();break}let j=500;if(!D.value)D.value=Date.now();else{const $=Date.now()-D.value;$>=3e3?j=1:$>=2500?j=2:$>=2e3?j=5:$>=1500?j=12:$>=1e3?j=25:$>=500?j=50:$>=250&&(j=100)}switch(o!==j&&(clearInterval(u.value),u.value=setInterval(()=>{U(V,j)},j)),V){case 0:D.value=0,clearInterval(u.value),y();break;case 6:a.value.width-=1;break;case 5:a.value.width+=1;break;case 1:a.value.style.top=`${(parseInt(getComputedStyle(a.value).top)||0)-1}px`;break;case 2:a.value.style.left=`${(parseInt(getComputedStyle(a.value).left)||0)+1}px`;break;case 3:a.value.style.top=`${(parseInt(getComputedStyle(a.value).top)||0)+1}px`;break;case 4:a.value.style.left=`${(parseInt(getComputedStyle(a.value).left)||0)-1}px`;break}te()},X=V=>{switch(V.type){case"touchstart":V.preventDefault(),n.value.imageX=parseInt(getComputedStyle(a.value).left),n.value.imageY=parseInt(getComputedStyle(a.value).top),n.value.mouseX=V.touches[0].clientX,n.value.mouseY=V.touches[0].clientY,n.value.mouseDown=!0;break;case"mousedown":n.value.imageX=parseInt(getComputedStyle(a.value).left),n.value.imageY=parseInt(getComputedStyle(a.value).top),n.value.mouseX=V.clientX,n.value.mouseY=V.clientY,n.value.mouseDown=!0;break;case"touchend":V.preventDefault();case"mouseup":n.value.mouseDown=!1,y();break;case"touchmove":if(!n.value.mouseDown)return;a.value.style.left=`${n.value.imageX+(V.touches[0].clientX-n.value.mouseX)}px`,a.value.style.top=`${n.value.imageY+(V.touches[0].clientY-n.value.mouseY)}px`;break;case"mousemove":if(!n.value.mouseDown)return;a.value.style.left=`${n.value.imageX+(V.clientX-n.value.mouseX)}px`,a.value.style.top=`${n.value.imageY+(V.clientY-n.value.mouseY)}px`;break;case"dragstart":V.preventDefault();break;case"keydown":switch(V.key){case"ArrowUp":V.preventDefault(),U(1);break;case"ArrowRight":V.preventDefault(),U(2);break;case"ArrowDown":V.preventDefault(),U(3);break;case"ArrowLeft":V.preventDefault(),U(4);break;case"+":V.preventDefault(),U(5);break;case"-":V.preventDefault(),U(6);break}break;case"keyup":U(0),y();break}te()},te=()=>{if(a.value.width<v.value&&(a.value.width=v.value),a.value.height<b.value){const V=b.value-a.value.height,o=a.value.width/a.value.height;a.value.width+=Math.ceil(V*o)}(parseInt(getComputedStyle(a.value).left)||0)>0&&(a.value.style.left="0px"),(parseInt(getComputedStyle(a.value).top)||0)>0&&(a.value.style.top="0px"),(parseInt(getComputedStyle(a.value).left)||0)<0-(a.value.width-v.value)&&(a.value.style.left=`${0-(a.value.width-v.value)}px`),(parseInt(getComputedStyle(a.value).top)||0)<0-(a.value.height-b.value)&&(a.value.style.top=`${0-(a.value.height-b.value)}px`)},ue=()=>{try{clearInterval(u.value)}catch{}n.value.mouseDown=!1,D.value=0,y()};return window.addEventListener("mouseup",ue),window.addEventListener("mousemove",X),window.addEventListener("touchend",ue),window.addEventListener("touchmove",X),Tl(()=>{window.removeEventListener("mouseup",ue),window.removeEventListener("mousemove",X),window.removeEventListener("touchend",ue),window.removeEventListener("touchmove",X)}),(V,o)=>(i(),F("div",{style:kl(_.value)},[s(vl,{ref_key:"badgeImageForm",ref:A,enctype:"multipart/form-data"},{default:r(()=>[s(J,null,{default:r(()=>[s(Y,null,{default:r(()=>[s(Jl,{label:V.label||"",name:V.name||"",hint:V.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:m,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[N.value.required],"error-messages":V.errorMessages||"","persistent-hint":V.persistentHint||!1,disabled:!t.value||V.disabled||!1,"hide-details":"",onChange:I,onBlur:M},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),H("p",Ft,[t.value?x("",!0):(i(),F("small",qt,"File Uploading"))])]),_:1})]),_:1}),s(J,{class:"justify-center scale-down"},{default:r(()=>[s(Y,{cols:"12",class:"text-center"},{default:r(()=>[K(" Preview "),d.value?(i(),F("div",Nt,[s(Xl,{indeterminate:"",color:"primary",size:128,width:10},{default:r(()=>[K("Uploading")]),_:1})])):(i(),F(B,{key:1},[H("div",{class:"image-preview my-auto mx-auto",onMousemove:X,onMousedown:X,onMouseup:X,onTouchstart:X,onTouchmove:X,onTouchend:X},[H("img",{src:S.value,ref_key:"imageDisplay",ref:a,alt:"Your badge image",onLoad:P,onDragstart:X,onKeydown:X,onKeyup:X,tabindex:"0",class:"d-none"},null,40,Bt)],32),H("h3",null,Q(g.value),1)],64))]),_:1}),q.value?(i(),C(Y,{key:0,cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:r(()=>[s(le,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:o[0]||(o[0]=c=>U(4,0,c)),onMouseup:o[1]||(o[1]=c=>U(0,0,c)),onTouchstart:o[2]||(o[2]=c=>U(4,0,c)),onTouchend:o[3]||(o[3]=c=>U(0,0,c))}),s(le,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:o[4]||(o[4]=c=>U(1,0,c)),onMouseup:o[5]||(o[5]=c=>U(0,0,c)),onTouchstart:o[6]||(o[6]=c=>U(1,0,c)),onTouchend:o[7]||(o[7]=c=>U(0,0,c))}),s(le,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:o[8]||(o[8]=c=>U(3,0,c)),onMouseup:o[9]||(o[9]=c=>U(0,0,c)),onTouchstart:o[10]||(o[10]=c=>U(3,0,c)),onTouchend:o[11]||(o[11]=c=>U(0,0,c))}),s(le,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:o[12]||(o[12]=c=>U(2,0,c)),onMouseup:o[13]||(o[13]=c=>U(0,0,c)),onTouchstart:o[14]||(o[14]=c=>U(2,0,c)),onTouchend:o[15]||(o[15]=c=>U(0,0,c))})]),_:1})):x("",!0)]),_:1}),q.value?(i(),C(J,{key:0,class:"justify-center scale-down"},{default:r(()=>[s(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:r(()=>[s(le,{icon:"mdi:mdi-plus",color:"primary",onMousedown:o[16]||(o[16]=c=>U(5,0,c)),onMouseup:o[17]||(o[17]=c=>U(0,0,c)),onTouchstart:o[18]||(o[18]=c=>U(5,0,c)),onTouchend:o[19]||(o[19]=c=>U(0,0,c))}),s(le,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:o[20]||(o[20]=c=>U(6,0,c)),onMouseup:o[21]||(o[21]=c=>U(0,0,c)),onTouchstart:o[22]||(o[22]=c=>U(6,0,c)),onTouchend:o[23]||(o[23]=c=>U(0,0,c))})]),_:1})]),_:1})):x("",!0)]),_:1},512)],4))}});const Gt=Cl(Yt,[["__scopeId","data-v-0b5f466b"]]),Kt=Le({...Ol({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ht=Be()({name:"VRadio",props:Kt(),setup(e,h){let{slots:l}=h;return He(()=>s(il,pe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),l)),{}}});const Xt=Le({height:{type:[Number,String],default:"auto"},...Kl(),...ul(Rl(),["multiple"]),trueIcon:{type:Qe,default:"$radioOn"},falseIcon:{type:Qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Wt=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,h){let{attrs:l,slots:L}=h;const p=Vl(),y=ve(()=>e.id||`radio-group-${p}`),O=Me(e,"modelValue");return He(()=>{const[T,A]=Sl(l),[g,t]=Ne.filterProps(e),[m,a]=il.filterProps(e),S=L.label?L.label({label:e.label,props:{for:y.value}}):e.label;return s(Ne,pe({class:["v-radio-group",e.class],style:e.style},T,g,{modelValue:O.value,"onUpdate:modelValue":d=>O.value=d,id:y.value}),{...L,default:d=>{let{id:D,messagesId:u,isDisabled:n,isReadonly:b}=d;return s(B,null,[S&&s(Hl,{id:D.value},{default:()=>[S]}),s(Ml,pe(m,{id:D.value,"aria-describedby":u.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:n.value,readonly:b.value,"aria-labelledby":S?D.value:void 0,multiple:!1},A,{modelValue:O.value,"onUpdate:modelValue":v=>O.value=v}),L)])}})}),{}}}),nl=ye({__name:"FormField",props:ae({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:ae(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:h}){const l=e,{admin:L=!1,disabled:p=!1,persistentHint:y=!1,required:O=!1}=l,T=w(""),A=be(e,"modelValue"),g=Ke(l,h,void 0,void 0,"field"),t=w(Te(g.value)),m=w({maxlength:u=>!l.maxLength||u.length<=l.maxLength||`Maximum length is ${l.maxLength} characters. (Current length: ${u.length})`,minlength:u=>!l.minLength||u.length>=l.minLength||`Minimum length is ${l.minLength} characters. (Current length: ${u.length})`,required:u=>!l.required||!!u.replace(/\s/g,"")||"Required field."}),a=w(!1),S=w([]),d=w("");try{const u=JSON.parse(A.value);Array.isArray(u)?S.value=u:typeof u=="boolean"?a.value=u:d.value=A.value}catch{a.value=!1,S.value=[],d.value=A.value}ne(a,()=>{A.value=JSON.stringify(a.value),h("input"),h("change")}),ne(S,()=>{A.value=JSON.stringify(S.value),h("input"),h("change")},{deep:!0}),ne(d,()=>{A.value=d.value,h("input"),h("change")}),ne(g.value,()=>{t.value.Type!==g.value.Type?(t.value=Te(g.value),a.value=!1,S.value=[],d.value=""):t.value=Te(g.value)});const D=(u=void 0)=>{h("change",u)};return(u,n)=>{var b;return t.value.Type===f(re).TEXT?(i(),C(ke,{key:0,modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=v=>d.value=v),name:u.name||"",hint:t.value.Hint,label:`${t.value.Label}${f(O)?"*":""}`,placeholder:t.value.Placeholder,variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===f(re).DATE?(i(),C(ke,{key:1,modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=v=>d.value=v),type:"date",name:u.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===f(re).NUMBER?(i(),C(ke,{key:2,modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=v=>d.value=v),type:"number",name:u.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===f(re).TEXTAREA?(i(),C(jl,{key:3,modelValue:d.value,"onUpdate:modelValue":n[3]||(n[3]=v=>d.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:D,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===f(re).CHECKBOX?(i(),F(B,{key:4},[t.value.Multiple?(i(!0),F(B,{key:0},oe(t.value.Values,v=>(i(),C(De,{key:v.ID,modelValue:S.value,"onUpdate:modelValue":n[4]||(n[4]=_=>S.value=_),name:u.name||"",hint:t.value.Hint,label:v.Title,value:v.Value,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,rules:[m.value.required],onChange:D},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(i(),C(De,{key:1,modelValue:a.value,"onUpdate:modelValue":n[5]||(n[5]=v=>a.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,required:f(O),rules:[v=>!f(O)||!!v||"You must tick to continue!"],onChange:D},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):t.value.Type===f(re).SELECT?(i(),F(B,{key:5},[!t.value.Autofill&&t.value.Multiple?(i(),C(qe,{key:0,modelValue:S.value,"onUpdate:modelValue":n[6]||(n[6]=v=>S.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill&&t.value.Multiple?(i(),C(tl,{key:1,modelValue:S.value,"onUpdate:modelValue":n[7]||(n[7]=v=>S.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill?t.value.Autofill?(i(),C(tl,{key:3,modelValue:d.value,"onUpdate:modelValue":n[9]||(n[9]=v=>d.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):x("",!0):(i(),C(qe,{key:2,modelValue:d.value,"onUpdate:modelValue":n[8]||(n[8]=v=>d.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(p)||!1,"persistent-hint":f(y)||!1,"error-messages":T.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):t.value.Type===f(re).RADIO?(i(),C(Wt,{key:6,modelValue:d.value,"onUpdate:modelValue":n[10]||(n[10]=v=>d.value=v),name:u.name||"",hint:t.value.Hint,label:t.value.Label,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,rules:[m.value.required],onChange:D},{default:r(()=>[(i(!0),F(B,null,oe(t.value.Values,v=>(i(),C(Ht,{key:v.Value,label:v.Title,value:v.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):t.value.Type===f(re).ACCOMMODATION?(i(),C(xt,{key:7,modelValue:S.value,"onUpdate:modelValue":n[11]||(n[11]=v=>S.value=v),name:u.name,admin:f(L),convention:u.convention,"registration-group":u.registrationGroup,data:u.field.Data,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,required:f(O),onChange:D},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===f(re).AGE?(i(),C(Pt,{key:8,modelValue:d.value,"onUpdate:modelValue":n[12]||(n[12]=v=>d.value=v),name:u.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,onChange:D},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===f(re).BADGE_IMAGE?(i(),C(Gt,{key:9,modelValue:d.value,"onUpdate:modelValue":n[13]||(n[13]=v=>d.value=v),name:u.name,registration:(b=u.registrationGroup)==null?void 0:b.Registration,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,onChange:D},null,8,["modelValue","name","registration","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===f(re).EXTRAS?(i(),C(ct,{key:10,modelValue:d.value,"onUpdate:modelValue":n[14]||(n[14]=v=>d.value=v),admin:f(L),convention:u.convention,name:u.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,required:f(O),onChange:D},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===f(re).INTERESTS?(i(),C(ft,{key:11,modelValue:d.value,"onUpdate:modelValue":n[15]||(n[15]=v=>d.value=v),admin:f(L),convention:u.convention,name:u.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,required:f(O),onChange:D},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===f(re).TICKET?(i(),C(ht,{key:12,modelValue:d.value,"onUpdate:modelValue":n[16]||(n[16]=v=>d.value=v),admin:f(L),convention:u.convention,name:u.name,"registration-group":u.registrationGroup,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:f(p)||!1,"persistent-hint":f(y),"error-messages":T.value,required:f(O),onChange:D},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):x("",!0)}}}),Jt={key:0,class:"my-2 text-white text-center"},jt={key:1,class:"admin-header my-2 text-white text-center"},zt=["innerHTML"],Qt=["innerHTML"],Va=ye({__name:"FormRenderer",props:ae({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:ae(["close"],["update:modelValue"]),setup(e,{emit:h}){const l=be(e,"modelValue");Ae(l.value.Sections),l.value.Sections.forEach(M=>{M.Fields&&Ae(M.Fields)});const L=w(),p=et(),y=Ge(),O=w(!1),T=w(!1),A=w(!1),g=w(!1),t=w(!1),m=w(!1),a=w(!1),S=w(!1),d=w(!1),D=w(!1),u=w(!1),n=w((()=>{if(e.data!==void 0){const I=Te(e.data);return l.value.Sections.forEach(R=>{R.Fields&&R.Fields.forEach(k=>{const P=e.data.Data.find(U=>U.SectionFieldUUID===k.SectionFieldUUID&&U.SectionFieldUUID==k.SectionFieldUUID);if(P)k.Value=P.Data;else{const U={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:R.ID,SectionUUID:R.SectionUUID,SectionFieldID:k.ID,SectionFieldUUID:k.SectionFieldUUID,Data:k.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};I.Data.push(U),k.Value=""}})}),I}const M={ID:0,SubmissionUUID:xe(),FormID:l.value.ID,FormUUID:l.value.FormUUID,UserID:(p==null?void 0:p.ID)||0,UserUUID:(p==null?void 0:p.UserUUID)||"",Data:[],Status:wl.SUBMISSION_STATUS_OPEN};return M.Data=l.value.Sections.map(I=>I.Fields?I.Fields.map(R=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:M.ID,SubmissionUUID:M.SubmissionUUID,SectionID:I.ID,SectionUUID:I.SectionUUID,SectionFieldID:R.ID,SectionFieldUUID:R.SectionFieldUUID,Data:""})):[]).flat(),M})()),b=(M,I,R)=>{const k=n.value.Data.find(P=>P.SectionUUID===M&&P.SectionFieldUUID===I);k&&(k.Data=R)},v=(M,I,R,k,P)=>M&&M.Type===de.FORM_TYPE_REGISTRATION?I?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:P?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":M&&M.Type===de.FORM_TYPE_ACCOMMODATION?R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:P?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":M&&M.Type===de.FORM_TYPE_DEALER?k?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:P?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":M&&M.Type===de.FORM_TYPE_BADGE?P?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(M&&M.Type===de.FORM_TYPE_ADDITIONAL,"/"),_=({callback:M})=>{y.getRegistrationByConvention(e.convention.ConventionUUID).then(I=>{M&&M("Loading"),y.getAvailableConventionForms(e.convention.ConventionUUID).then(R=>{I.Submissions.forEach((V,o)=>{V.Form||(I.Submissions[o].Form=R.find(c=>c.FormUUID===V.FormUUID))});const k=I.Submissions.find(V=>V.FormUUID===n.value.FormUUID),P=I.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===de.FORM_TYPE_ACCOMMODATION}),U=I.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===de.FORM_TYPE_ADDITIONAL}),X=I.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===de.FORM_TYPE_DEALER}),te=I.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===de.FORM_TYPE_BADGE}),ue=v(k==null?void 0:k.Form,P==null?void 0:P.Form,X==null?void 0:X.Form,te==null?void 0:te.Form,U==null?void 0:U.Form);Ze.push(ue)})})},q=({callback:M})=>{var I;(I=L.value)==null||I.validate().then(R=>{R.valid?y.saveSubmission(n.value).then(k=>{k?setTimeout(()=>{N(k,M,1)},1e3):M&&M("Failed to process request")}).catch(()=>{M&&M("Failed to process request")}):M&&M("Errors in form detected, please review and try again.")})},N=(M,I,R=1)=>{y.checkSubmission(M).then(k=>{if(k)if(k.Ready&&k.Submission){if(O.value=!1,n.value=k.Submission,I&&I("Saved"),e.admin)h("close");else if(k.Forms&&k.Forms.length>0){const P=k.Forms.find(o=>o.FormUUID===n.value.FormUUID),U=k.Forms.find(o=>o.Type===de.FORM_TYPE_ACCOMMODATION),X=k.Forms.find(o=>o.Type===de.FORM_TYPE_DEALER),te=k.Forms.find(o=>o.Type===de.FORM_TYPE_BADGE),ue=k.Forms.find(o=>o.Type===de.FORM_TYPE_ADDITIONAL),V=v(P,U,X,te,ue);Ze.push(V)}}else{if(R>5&&(O.value=!0),R>10&&(T.value=!0),R>20&&(A.value=!0),R>30&&(g.value=!0),R>40&&(t.value=!0),R>50&&(m.value=!0),R>60&&(a.value=!0),R>70&&(S.value=!0),R>80&&(d.value=!0),R>90&&(D.value=!0),R>100&&(u.value=!0),R>200){I&&(O.value=!1,T.value=!1,A.value=!1,g.value=!1,t.value=!1,m.value=!1,a.value=!1,S.value=!1,d.value=!1,D.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{N(M,I,R+1)},R<20?1e3*R:2e4)}else I&&(O.value=!1,T.value=!1,A.value=!1,g.value=!1,t.value=!1,m.value=!1,a.value=!1,S.value=!1,d.value=!1,D.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."))}).catch(()=>{I&&(O.value=!1,T.value=!1,A.value=!1,g.value=!1,t.value=!1,m.value=!1,a.value=!1,S.value=!1,d.value=!1,D.value=!1,u.value=!1,I("A problem was encountered during saving, please check form and try again."))})};return(M,I)=>{const R=El("router-link");return i(),C(Bl,null,{default:r(()=>[s(vl,{ref_key:"formValidator",ref:L,autocomplete:"off",onSubmit:I[1]||(I[1]=sl(()=>{},["prevent"]))},{default:r(()=>[l.value.Heading?(i(),F("h1",Jt,Q(l.value.Heading),1)):x("",!0),M.admin?(i(),F("h2",jt," (Admin Mode) ")):x("",!0),l.value.Description?(i(),F("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:l.value.Description},null,8,zt)):x("",!0),(i(!0),F(B,null,oe(l.value.Sections,k=>(i(),C(lt,{key:`section_${l.value.ID}.${k.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:r(()=>[k.Heading?(i(),C(tt,{key:0},{default:r(()=>[K(Q(k.Heading),1)]),_:2},1024)):x("",!0),k.Description?(i(),C(at,{key:1,class:"text-wrap"},{default:r(()=>[H("div",{innerHTML:k.Description},null,8,Qt)]),_:2},1024)):x("",!0),k.Fields?(i(),C(nt,{key:2},{default:r(()=>[(i(!0),F(B,null,oe(k.Fields,P=>(i(),F(B,{key:`field_${l.value.ID}.${k.ID}.${P.ID}`},[P.Field?(i(),C(J,{key:0},{default:r(()=>[s(Y,null,{default:r(()=>[M.editable?(i(),C(nl,{key:0,name:P.SectionFieldUUID,field:P.Field,modelValue:P.Value,"onUpdate:modelValue":U=>P.Value=U,admin:M.admin,convention:M.convention,"registration-group":M.registrationGroup,required:P.Required,"min-length":P.MinLength,"max-length":P.MaxLength,"persistent-hint":!0,onChange:U=>b(k.SectionUUID,P.SectionFieldUUID,P.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(i(),C(nl,{key:1,name:P.SectionFieldUUID,field:P.Field,modelValue:P.Value,"onUpdate:modelValue":U=>P.Value=U,admin:M.admin,convention:M.convention,"registration-group":M.registrationGroup,required:P.Required,"min-length":P.MinLength,"max-length":P.MaxLength,"persistent-hint":!0,disabled:"",onChange:U=>b(k.SectionUUID,P.SectionFieldUUID,P.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):x("",!0)],64))),128))]),_:2},1024)):x("",!0)]),_:2},1024))),128)),M.preview?x("",!0):(i(),F(B,{key:3},[s(J,null,{default:r(()=>[M.admin?(i(),C(Y,{key:1,class:"text-right"},{default:r(()=>[s(le,{color:"red",onClick:I[0]||(I[0]=k=>h("close"))},{default:r(()=>[K("Cancel")]),_:1})]),_:1})):(i(),C(Y,{key:0,class:"text-right"},{default:r(()=>[s(R,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:r(()=>[s(le,{color:"red"},{default:r(()=>[K("Close")]),_:1})]),_:1})]),_:1})),M.admin||M.editable?(i(),C(Y,{key:2,class:"text-left"},{default:r(()=>[s(el,{onClick:q,type:"submit"})]),_:1})):(i(),C(Y,{key:3,class:"text-left"},{default:r(()=>[s(el,{onClick:_,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),O.value?(i(),C(J,{key:0},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):x("",!0),T.value?(i(),C(J,{key:1},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):x("",!0),A.value?(i(),C(J,{key:2},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):x("",!0),g.value?(i(),C(J,{key:3},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Reticulating splines ")]),_:1})]),_:1})):x("",!0),t.value?(i(),C(J,{key:4},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):x("",!0),m.value?(i(),C(J,{key:5},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):x("",!0),a.value?(i(),C(J,{key:6},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):x("",!0),S.value?(i(),C(J,{key:7},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):x("",!0),d.value?(i(),C(J,{key:8},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):x("",!0),D.value?(i(),C(J,{key:9},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):x("",!0),u.value?(i(),C(J,{key:10},{default:r(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):x("",!0)],64))]),_:1},512)]),_:1})}}});export{Ua as F,cl as T,tl as V,nl as _,ka as a,Da as b,re as c,Va as d,Ca as e,ut as f,Ta as m,Ae as s,it as u};
