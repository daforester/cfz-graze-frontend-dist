import{p as Fe,an as tl,n as Me,ae as cl,r as x,s as Ce,u as ke,e as Z,w as _,E as Te,v as n,H as R,x as ue,N as Q,aA as vl,ah as ml,y as fl,k as pl,f as gl,j as hl,ax as al,aa as je,ad as Ul,aB as Vl,ay as Il,m as bl,I as Ve,a1 as te,a2 as Ie,a5 as ze,K as d,R as $,U as J,O as z,M as f,Z as X,L as A,S as m,Q as N,a3 as ye,P as nl,ar as Ge,$ as ol,Y as yl,ac as Ze,a as Dl,aC as re}from"./index-2d2e40cb.js";import{F as he}from"./form-aee596e2.js";import{V as Ue,u as Ke}from"./VCheckbox-f470de9a.js";import{s as Se}from"./index-71069b21.js";import{f as Cl,V as ce,a as W,c as ul,d as Oe,e as Pe}from"./VList-a611570c.js";import{a as de,V as Y}from"./VRow-748c8d9e.js";import{m as kl,u as Tl,a as Sl,b as Al,V as Ye}from"./VSelect-f47489fa.js";import{d as El,u as Rl,e as _e,T as xl,s as Qe}from"./filter-382f4d60.js";import{C as $l,a as Ne,l as Ae,G as Ol,V as ve,n as Pl}from"./VContainer-a0dfbc70.js";import{c as wl}from"./copyToClipboard-54de8978.js";import{a as Fl,e as Ml,_ as Nl}from"./VChip-80d4acd0.js";import{k as Ll,l as ql,j as il,V as De,m as sl,e as Bl,u as Gl,f as we,g as _l,h as Hl,i as Yl,n as zl}from"./VTextField-5ca9eaa0.js";import{m as Kl,I as Xl}from"./index-cf1661b7.js";import{V as Jl,m as jl,a as rl,b as Zl,c as Ql}from"./VCheckboxBtn-c86e6916.js";import{G as Wl}from"./userData-e8379c04.js";import{v as He}from"./v4-a960c1f4.js";import{V as et}from"./VForm-2f8868cc.js";const We=(e,D,s)=>{if(s>=e.length){let O=s-e.length+1;for(;O--;)e.push(void 0)}e.splice(s,0,e.splice(D,1)[0])};var le=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(le||{});const Xt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function lt(e,D,s){if(D==null)return e;if(Array.isArray(D))throw new Error("Multiple matches is not implemented");return typeof D=="number"&&~D?n(R,null,[n("span",{class:"v-autocomplete__unmask"},[e.substr(0,D)]),n("span",{class:"v-autocomplete__mask"},[e.substr(D,s)]),n("span",{class:"v-autocomplete__unmask"},[e.substr(D+s)])]):e}const tt=Fe({autoSelectFirst:{type:[Boolean,String]},search:String,...El({filterKeys:["title"]}),...kl(),...tl(Ll({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Kl({transition:!1})},"VAutocomplete"),el=Me()({name:"VAutocomplete",props:tt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,D){let{slots:s}=D;const{t:O}=cl(),I=x(),p=Ce(!1),y=Ce(!0),V=x(!1),o=x(),U=ke(e,"menu"),l=Z({get:()=>U.value,set:h=>{var q;U.value&&!h&&((q=o.value)!=null&&q.Î¨openChildren)||(U.value=h)}}),t=Ce(-1),b=Z(()=>{var h;return(h=I.value)==null?void 0:h.color}),{items:r,transformIn:v,transformOut:c}=Cl(e),{textColorClasses:i,textColorStyles:u}=$l(b),a=ke(e,"search",""),E=ke(e,"modelValue",[],h=>v(h===null?[null]:ml(h)),h=>{const q=c(h);return e.multiple?q:q[0]??null}),S=ql(),{filteredItems:P,getMatches:ae}=Rl(e,r,()=>y.value?"":a.value),g=Z(()=>E.value.map(h=>r.value.find(q=>e.valueComparator(q.value,h.value))||h)),L=Z(()=>e.hideSelected?P.value.filter(h=>!g.value.some(q=>q.value===h.value)):P.value),B=Z(()=>g.value.map(h=>h.props.value)),ee=Z(()=>g.value[t.value]),w=Z(()=>{var q;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((q=L.value[0])==null?void 0:q.title))&&L.value.length>0&&!y.value&&!V.value}),G=Z(()=>e.hideNoData&&!r.value.length||e.readonly||(S==null?void 0:S.isReadonly.value)),C=x(),{onListScroll:T,onListKeydown:k}=Tl(C,I);function F(h){e.openOnClear&&(l.value=!0),a.value=""}function ie(){G.value||(l.value=!0)}function se(h){G.value||(p.value&&(h.preventDefault(),h.stopPropagation()),l.value=!l.value)}function fe(h){var be,M,j;if(e.readonly||S!=null&&S.isReadonly.value)return;const q=I.value.selectionStart,K=B.value.length;if((t.value>-1||["Enter","ArrowDown","ArrowUp"].includes(h.key))&&h.preventDefault(),["Enter","ArrowDown"].includes(h.key)&&(l.value=!0),["Escape"].includes(h.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(h.key)&&(w.value&&["Enter","Tab"].includes(h.key)&&me(P.value[0]),y.value=!0),h.key==="ArrowDown"&&w.value&&((be=C.value)==null||be.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(h.key)){if(t.value<0){h.key==="Backspace"&&!a.value&&(t.value=K-1);return}const H=t.value;ee.value&&me(ee.value),t.value=H>=K-1?K-2:H}if(h.key==="ArrowLeft"){if(t.value<0&&q>0)return;const H=t.value>-1?t.value-1:K-1;g.value[H]?t.value=H:(t.value=-1,I.value.setSelectionRange((M=a.value)==null?void 0:M.length,(j=a.value)==null?void 0:j.length))}if(h.key==="ArrowRight"){if(t.value<0)return;const H=t.value+1;g.value[H]?t.value=H:(t.value=-1,I.value.setSelectionRange(0,0))}}}function Ee(h){a.value=h.target.value}function Le(){var h;p.value&&(y.value=!0,(h=I.value)==null||h.focus())}function qe(h){p.value=!0,setTimeout(()=>{V.value=!0})}function Be(h){V.value=!1}function Re(h){(h==null||h===""&&!e.multiple)&&(E.value=[])}const pe=Ce(!1);function me(h){if(e.multiple){const q=B.value.findIndex(K=>e.valueComparator(K,h.value));if(q===-1)E.value=[...E.value,h];else{const K=[...E.value];K.splice(q,1),E.value=K}}else E.value=[h],pe.value=!0,a.value=h.title,l.value=!1,y.value=!0,Te(()=>pe.value=!1)}return _(p,(h,q)=>{var K;h!==q&&(h?(pe.value=!0,a.value=e.multiple?"":String(((K=g.value.at(-1))==null?void 0:K.props.title)??""),y.value=!0,Te(()=>pe.value=!1)):(!e.multiple&&!a.value?E.value=[]:w.value&&!V.value&&!g.value.some(be=>{let{value:M}=be;return M===L.value[0].value})&&me(L.value[0]),l.value=!1,a.value="",t.value=-1))}),_(a,h=>{!p.value||pe.value||(h&&(l.value=!0),y.value=!h)}),Ne(()=>{const h=!!(e.chips||s.chip),q=!!(!e.hideNoData||L.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),K=E.value.length>0,[be]=De.filterProps(e);return n(De,ue({ref:I},be,{modelValue:a.value,"onUpdate:modelValue":Re,focused:p.value,"onUpdate:focused":M=>p.value=M,validationValue:E.externalValue,dirty:K,onInput:Ee,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!s.selection,"v-autocomplete--selecting-index":t.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:K?void 0:e.placeholder,"onClick:clear":F,"onMousedown:control":ie,onKeydown:fe}),{...s,default:()=>n(R,null,[n(Sl,ue({ref:o,modelValue:l.value,"onUpdate:modelValue":M=>l.value=M,activator:"parent",contentClass:"v-autocomplete__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Le},e.menuProps),{default:()=>[q&&n(ce,{ref:C,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:M=>M.preventDefault(),onKeydown:k,onFocusin:qe,onFocusout:Be,onScrollPassive:T,tabindex:"-1"},{default:()=>{var M,j,H;return[(M=s["prepend-item"])==null?void 0:M.call(s),!L.value.length&&!e.hideNoData&&(((j=s["no-data"])==null?void 0:j.call(s))??n(W,{title:O(e.noDataText)},null)),n(Al,{renderless:!0,items:L.value},{default:ge=>{var Je;let{item:ne,index:oe,itemRef:dl}=ge;const Xe=ue(ne.props,{ref:dl,key:oe,active:w.value&&oe===0?!0:void 0,onClick:()=>me(ne)});return((Je=s.item)==null?void 0:Je.call(s,{item:ne,index:oe,props:Xe}))??n(W,Xe,{prepend:xe=>{let{isSelected:$e}=xe;return n(R,null,[e.multiple&&!e.hideSelected?n(Jl,{key:ne.value,modelValue:$e,ripple:!1,tabindex:"-1"},null):void 0,ne.props.prependIcon&&n(Ae,{icon:ne.props.prependIcon},null)])},title:()=>{var xe,$e;return y.value?ne.title:lt(ne.title,(xe=ae(ne))==null?void 0:xe.title,(($e=a.value)==null?void 0:$e.length)??0)}})}}),(H=s["append-item"])==null?void 0:H.call(s)]}})]}),g.value.map((M,j)=>{var ne;function H(oe){oe.stopPropagation(),oe.preventDefault(),me(M)}const ge={"onClick:close":H,onMousedown(oe){oe.preventDefault(),oe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:M.value,class:["v-autocomplete__selection",j===t.value&&["v-autocomplete__selection--selected",i.value]],style:j===t.value?u.value:{}},[h?s.chip?n(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:M.title}}},{default:()=>{var oe;return[(oe=s.chip)==null?void 0:oe.call(s,{item:M,index:j,props:ge})]}}):n(Fl,ue({key:"chip",closable:e.closableChips,size:"small",text:M.title},ge),null):((ne=s.selection)==null?void 0:ne.call(s,{item:M,index:j}))??n("span",{class:"v-autocomplete__selection-text"},[M.title,e.multiple&&j<g.value.length-1&&n("span",{class:"v-autocomplete__selection-comma"},[Q(",")])])])})]),"append-inner":function(){var ge;for(var M=arguments.length,j=new Array(M),H=0;H<M;H++)j[H]=arguments[H];return n(R,null,[(ge=s["append-inner"])==null?void 0:ge.call(s,...j),e.menuIcon?n(Ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:se,onClick:vl},null):void 0])}})}),il({isFocused:p,isPristine:y,menu:l,search:a,filteredItems:P,select:me},I)}});const at=Fe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...sl(),...Bl()},"VTextarea"),nt=Me()({name:"VTextarea",directives:{Intersect:Xl},inheritAttrs:!1,props:at(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,D){let{attrs:s,emit:O,slots:I}=D;const p=ke(e,"modelValue"),{isFocused:y,focus:V,blur:o}=Gl(e),U=Z(()=>typeof e.counterValue=="function"?e.counterValue(p.value):(p.value||"").toString().length),l=Z(()=>{if(s.maxlength)return s.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function t(w,G){var C,T;!e.autofocus||!w||(T=(C=G[0].target)==null?void 0:C.focus)==null||T.call(C)}const b=x(),r=x(),v=Ce(""),c=x(),i=Z(()=>e.persistentPlaceholder||y.value||e.active);function u(){var w;c.value!==document.activeElement&&((w=c.value)==null||w.focus()),y.value||V()}function a(w){u(),O("click:control",w)}function E(w){O("mousedown:control",w)}function S(w){w.stopPropagation(),u(),Te(()=>{p.value="",Il(e["onClick:clear"],w)})}function P(w){var C;const G=w.target;if(p.value=G.value,(C=e.modelModifiers)!=null&&C.trim){const T=[G.selectionStart,G.selectionEnd];Te(()=>{G.selectionStart=T[0],G.selectionEnd=T[1]})}}const ae=x(),g=x(+e.rows),L=Z(()=>["plain","underlined"].includes(e.variant));fl(()=>{e.autoGrow||(g.value=+e.rows)});function B(){e.autoGrow&&Te(()=>{if(!ae.value||!r.value)return;const w=getComputedStyle(ae.value),G=getComputedStyle(r.value.$el),C=parseFloat(w.getPropertyValue("--v-field-padding-top"))+parseFloat(w.getPropertyValue("--v-input-padding-top"))+parseFloat(w.getPropertyValue("--v-field-padding-bottom")),T=ae.value.scrollHeight,k=parseFloat(w.lineHeight),F=Math.max(parseFloat(e.rows)*k+C,parseFloat(G.getPropertyValue("--v-input-control-height"))),ie=parseFloat(e.maxRows)*k+C||1/0,se=bl(T??0,F,ie);g.value=Math.floor((se-C)/k),v.value=hl(se)})}pl(B),_(p,B),_(()=>e.rows,B),_(()=>e.maxRows,B),_(()=>e.density,B);let ee;return _(ae,w=>{w?(ee=new ResizeObserver(B),ee.observe(ae.value)):ee==null||ee.disconnect()}),gl(()=>{ee==null||ee.disconnect()}),Ne(()=>{const w=!!(I.counter||e.counter||e.counterValue),G=!!(w||I.details),[C,T]=al(s),[{modelValue:k,...F}]=we.filterProps(e),[ie]=_l(e);return n(we,ue({ref:b,modelValue:p.value,"onUpdate:modelValue":se=>p.value=se,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":L.value},e.class],style:e.style},C,F,{centerAffix:g.value===1&&!L.value,focused:y.value}),{...I,default:se=>{let{isDisabled:fe,isDirty:Ee,isReadonly:Le,isValid:qe}=se;return n(Hl,ue({ref:r,style:{"--v-textarea-control-height":v.value},onClick:a,onMousedown:E,"onClick:clear":S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ie,{active:i.value||Ee.value,centerAffix:g.value===1&&!L.value,dirty:Ee.value||e.dirty,disabled:fe.value,focused:y.value,error:qe.value===!1}),{...I,default:Be=>{let{props:{class:Re,...pe}}=Be;return n(R,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[e.prefix]),je(n("textarea",ue({ref:c,class:Re,value:p.value,onInput:P,autofocus:e.autofocus,readonly:Le.value,disabled:fe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:u,onBlur:o},pe,T),null),[[Ul("intersect"),{handler:t},null,{once:!0}]]),e.autoGrow&&je(n("textarea",{class:[Re,"v-textarea__sizer"],"onUpdate:modelValue":me=>p.value=me,ref:ae,readonly:!0,"aria-hidden":"true"},null),[[Vl,p.value]]),e.suffix&&n("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:G?se=>{var fe;return n(R,null,[(fe=I.details)==null?void 0:fe.call(I,se),w&&n(R,null,[n("span",null,null),n(Yl,{active:e.persistentCounter||y.value,value:U.value,max:l.value},I.counter)])])}:void 0})}),il({},b,r,c)}}),ot=Ve({__name:"Extras",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:O,disabled:I=!1}=s,p=Ie(e,"modelValue"),y=ze.getInstance(),V=x({});try{V.value=JSON.parse(p.value)}catch{}const o=x([]),U=x([]);_(s,()=>{t()}),_(V.value,r=>{for(const v in r)if(r[v].checked){const c=o.value.map(i=>{var u;return(u=i.Options)==null?void 0:u.find(a=>a.OptionUUID===v)});if(c&&c.length>0)try{const i=c[0];r[v].choiceId===""&&i&&i.Choices&&i.Choices.length>0&&(r[v].choiceId=i.Choices[0].TagUUID),r[v].price=i==null?void 0:i.Price}catch{}}else r[v].choiceId="",r[v].price=0;p.value=JSON.stringify(r),b()});const l=Z({get:()=>o.value.map(r=>r.ExtraUUID),set:()=>{}}),t=()=>{var v;const r=((v=s.items.find(c=>c.Title==="SelectedExtras"))==null?void 0:v.Value)||"[]";try{const c=JSON.parse(r);o.value=U.value.filter(i=>c.find(u=>u===i.ExtraUUID))||[],l.value=[...o.value.map(i=>i.ExtraUUID)],o.value.forEach(i=>{var u;(u=i.Options)==null||u.forEach(a=>{V.value[a.OptionUUID]||(V.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in O&&(y==null||y.getConventionExtras(O.ConventionUUID).then(r=>{r&&(U.value=r,t())}));const b=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,v)=>(d(),$(R,null,[J("h4",null,z(r.label),1),n(ce,{opened:l.value,"onUpdate:opened":v[0]||(v[0]=c=>l.value=c)},{default:f(()=>[(d(!0),$(R,null,X(o.value,c=>(d(),A(ul,{key:c.ExtraUUID,value:c.ExtraUUID},{activator:f(({props:i})=>[n(W,ue({"prepend-icon":"mdi:mdi-group","append-icon":"",title:c.Name},i),null,16,["title"])]),default:f(()=>[c.Options?(d(!0),$(R,{key:0},X(c.Options,i=>(d(),A(W,{key:i.OptionUUID},{default:f(()=>[n(de,null,{default:f(()=>[n(Y,{cols:"12",sm:"6"},{default:f(()=>[n(Ue,{label:`${i.Name} ${i.Price&&i.Price>0?`(${m(Se).currencySymbol}${i.Price})`:""}`,modelValue:V.value[i.OptionUUID].checked,"onUpdate:modelValue":u=>V.value[i.OptionUUID].checked=u,disabled:m(I),"hide-details":"",onChange:b},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),i.Choices&&i.Choices.length>1&&V.value[i.OptionUUID].checked?(d(),A(Y,{key:0,cols:"12",sm:"6"},{default:f(()=>[n(Ye,{items:i.Choices.map(u=>({value:u.TagUUID,title:u.Title})),modelValue:V.value[i.OptionUUID].choiceId,"onUpdate:modelValue":u=>V.value[i.OptionUUID].choiceId=u,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(I),"hide-details":"",onChange:b},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):N("",!0)]),_:2},1024)]),_:2},1024))),128)):N("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ut=Ve({__name:"Interests",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{convention:O,disabled:I=!1}=s,p=Ie(e,"modelValue"),y=ze.getInstance(),V=x({});try{V.value=JSON.parse(p.value)}catch{}const o=x([]),U=x([]);_(V.value,r=>{p.value=JSON.stringify(r)});const l=x([]),t=()=>{var v;const r=((v=s.items.find(c=>c.Title==="SelectedInterests"))==null?void 0:v.Value)||"[]";try{const c=JSON.parse(r);o.value=U.value.filter(i=>c.find(u=>u===i.InterestUUID))||[],l.value=[...o.value.map(i=>i.InterestUUID)]}catch{}};"ConventionUUID"in O&&(y==null||y.getConventionInterests(O.ConventionUUID).then(r=>{r&&(U.value=r,t())})),_(s,()=>{t()});const b=(r=void 0)=>{setTimeout(()=>D("change",r),100)};return(r,v)=>(d(),$(R,null,[J("h4",null,z(r.label),1),n(ce,{opened:l.value,"onUpdate:opened":v[0]||(v[0]=c=>l.value=c)},{default:f(()=>[(d(!0),$(R,null,X(o.value,c=>(d(),A(W,{key:c.InterestUUID},{default:f(()=>[n(de,null,{default:f(()=>[n(Y,null,{default:f(()=>[n(Ue,{label:`${c.Name} ${c.Price&&c.Price>0?`(${m(Se).currencySymbol}${c.Price})`:""}`,modelValue:V.value[c.InterestUUID],"onUpdate:modelValue":i=>V.value[c.InterestUUID]=i,disabled:m(I),"hide-details":"",onChange:b},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),it={key:0,class:"text-orange-darken-1"},st=Ve({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,convention:I,disabled:p=!1}=s,y=Ie(e,"modelValue"),V=ze.getInstance(),o=x({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{o.value=JSON.parse(y.value),"ticket"in o.value&&(o.value.Ticket=o.value.ticket),"addonsChecked"in o.value&&(o.value.AddonsChecked=o.value.addonsChecked),"componentsChecked"in o.value&&(o.value.ComponentsChecked=o.value.componentsChecked)}catch{}const U=x([]),l=x([]);_(o.value,u=>{y.value=JSON.stringify(u)});const t=x([]),b=x({required:(u,a=void 0)=>()=>{if(a==null){if(o.value.Ticket.length===0&&s.required)return"Must select at least one ticket option.";if(u&&u.ComponentsRequired>0&&o.value.Ticket.includes(u.TicketUUID||"")){let E=0;if(u.TicketComponents.forEach(S=>{o.value.ComponentsChecked.forEach(P=>{S.TicketUUID===P&&(E+=1)})}),E<u.ComponentsRequired)return`Must select ticket ${u.ComponentsRequired} component${u.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var a;const u=((a=s.items.find(E=>E.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const E=JSON.parse(u);U.value=l.value.filter(S=>S.Type==="TICKET_TYPE_GROUP"&&E.find(P=>P===S.TicketUUID))||[],t.value=[...U.value.filter(S=>S.Type==="TICKET_TYPE_GROUP").map(S=>S.TicketUUID)]}catch{}};if("ConventionUUID"in I)if(O)V==null||V.getConventionTickets(I.ConventionUUID).then(u=>{u&&(l.value=u,r())});else{const u=s.items.find(a=>a.Title==="SelectedTickets");u&&(V==null||V.getFieldTickets(u.FieldUUID).then(a=>{a&&(l.value=a,r())}))}_(s,()=>{r()});const v=u=>{o.value.Ticket.length>1&&o.value.Ticket.shift(),o.value.ComponentsChecked=[];const a=[];U.value.forEach(E=>{(o.value.Ticket.includes(E.TicketUUID)||o.value.ComponentsChecked.includes(E.TicketUUID))&&a.push(...E.AddonTickets.map(S=>S.TicketUUID))}),o.value.AddonsChecked=o.value.AddonsChecked.filter(E=>a.includes(E)),i(u)},c=u=>{const a=l.value.find(E=>E.TicketUUID===o.value.Ticket[0]);if(a)for(;o.value.ComponentsChecked.length>a.ComponentsRequired;)o.value.ComponentsChecked.shift();i(u)},i=(u=void 0)=>{setTimeout(()=>D("change",u),100)};return(u,a)=>{var E;return d(),$(R,null,[J("h4",null,[Q(z(u.label)+" ",1),(E=u.registrationGroup)!=null&&E.Registration.Leader?N("",!0):(d(),$("small",it,"(controlled by group leader)"))]),n(ce,{opened:t.value,"onUpdate:opened":a[4]||(a[4]=S=>t.value=S)},{default:f(()=>[(d(!0),$(R,null,X(m(_e)(U.value.filter(S=>S.Type===m(xl).TICKET_TYPE_GROUP)),S=>(d(),$(R,{key:S.TicketUUID},[S.Tickets.length>0?(d(),A(ul,{key:0,value:S.TicketUUID},{activator:f(({props:P})=>[n(W,ue(P,{"prepend-icon":"mdi:mdi-group",title:S.Name}),{default:f(()=>[n(Oe,{title:S.Description},null,8,["title"])]),_:2},1040,["title"])]),default:f(()=>[(d(!0),$(R,null,X(S.Tickets,P=>(d(),A(W,{key:P.TicketUUID},{default:f(()=>{var ae;return[n(Oe,null,{default:f(()=>[Q(z(P.Description),1)]),_:2},1024),n(Ue,{modelValue:o.value.Ticket,"onUpdate:modelValue":a[0]||(a[0]=g=>o.value.Ticket=g),value:P.TicketUUID,onChange:v,rules:[b.value.required(P)],"validate-on":"submit",disabled:m(p)||!((ae=u.registrationGroup)!=null&&ae.Registration.Leader)},{label:f(()=>[n(Ae,{icon:P.RequiresAccommodation?"mdi:mdi-home":P.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+z(`${P.Name} ${P.Price>0?`(${m(Se).currencySymbol}${P.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),o.value.Ticket.length>0&&P.TicketUUID===o.value.Ticket[0]?(d(),$(R,{key:0},[P.AddonTickets.length?(d(),A(ce,{key:0},{default:f(()=>[(d(!0),$(R,null,X(m(_e)(P.AddonTickets),g=>(d(),$(R,{key:g==null?void 0:g.TicketUUID},[g?(d(),A(W,{key:0},{default:f(()=>[n(Pe,null,{default:f(()=>{var L;return[n(Ue,{modelValue:o.value.AddonsChecked,"onUpdate:modelValue":a[1]||(a[1]=B=>o.value.AddonsChecked=B),value:g.TicketUUID,onChange:a[2]||(a[2]=B=>{o.value.ComponentsChecked=[],i(B)}),disabled:m(p)||!((L=u.registrationGroup)!=null&&L.Registration.Leader)},{label:f(()=>[n(Ae,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+z(`${g.Name} ${g.Price>0?`(${m(Se).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),n(Oe,null,{default:f(()=>[Q(z(g.Description),1)]),_:2},1024)]),_:2},1024)):N("",!0)],64))),128))]),_:2},1024)):N("",!0),P.TicketComponents.length?(d(),A(ce,{key:1},{default:f(()=>[(d(!0),$(R,null,X(m(_e)(P.TicketComponents),g=>(d(),$(R,{key:g==null?void 0:g.TicketUUID},[g?(d(),A(W,{key:0},{default:f(()=>[n(Pe,null,{default:f(()=>{var L;return[n(Ue,{modelValue:o.value.ComponentsChecked,"onUpdate:modelValue":a[3]||(a[3]=B=>o.value.ComponentsChecked=B),value:g.TicketUUID,onChange:c,rules:[b.value.required(P,g)],"validate-on":"submit",disabled:m(p)||!((L=u.registrationGroup)!=null&&L.Registration.Leader)},{label:f(()=>[n(Ae,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Q(" "+z(`${g.Name} ${g.Price>0?`(${m(Se).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),n(Oe,null,{default:f(()=>[Q(z(g.Description),1)]),_:2},1024)]),_:2},1024)):N("",!0)],64))),128))]),_:2},1024)):N("",!0)],64)):N("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):N("",!0)],64))),128))]),_:1},8,["opened"])],64)}}}),rt={key:0},dt=J("strong",null,"Your Sharing Group",-1),ct=["href","onClick"],vt=J("br",null,null,-1),mt=J("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ft=J("strong",null,"Your Groups Accommodation",-1),pt=J("br",null,null,-1),gt=J("small",null,"(in order of preference, controlled by group leader)",-1),ht=J("strong",null,"Accommodation Options",-1),Ut=J("br",null,null,-1),Vt=J("strong",null,"Your Chosen Accommodation",-1),It=J("small",null,"(in order of preference)",-1),bt=Ve({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,convention:I}=s,p=Ie(e,"modelValue"),y=Ke(s,D,void 0,void 0,"items"),V=ol(),o=yl.getInstance(),U=x(ye(p.value)),l=x([]),t=x(),b=x({sharing:!1}),r=()=>{try{const C=JSON.parse(s.data);C&&(b.value=C)}catch{}};r(),_(s,()=>{r(),s.registrationGroup&&(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration)}),_(U,C=>{p.value=ye(C)},{deep:!0});const v=x(""),c=x(!1),i=()=>{var C;(C=t.value)!=null&&C.Leader&&V.getRegistrationInvite(I.ConventionUUID).then(T=>{if(T){const k=new URL(location.href);k.searchParams.set("token",T),v.value=k.toString()}})},u=()=>{wl(v.value),i(),c.value=!0,setTimeout(()=>c.value=!1,2200)},a=()=>{o.emit("registration.group.leave")},E=C=>{o.emit("registration.group.remove.member",C)},S=x([]);_(y,()=>{P()});const P=()=>{O?V.getConventionAccommodation(I.ConventionUUID).then(C=>{S.value=C.filter(T=>!!(y!=null&&y.value.find(k=>k.Value===T.AccommodationUUID)))||[]}):y.value.length>0&&V.getFieldAccommodation(y.value[0].FieldUUID).then(C=>{S.value=C.filter(T=>!!(y!=null&&y.value.find(k=>k.Value===T.AccommodationUUID)))||[]})};P(),(()=>{var C;if(s.registrationGroup)if(l.value=s.registrationGroup.Members,t.value=s.registrationGroup.Registration,(C=t.value)!=null&&C.Leader)i();else try{U.value=JSON.parse(s.registrationGroup.AccommodationData)}catch{}})();const g=x({column:0,id:""}),L=()=>{U.value.includes(g.value.id)||(g.value.column===0&&g.value.id!==""&&U.value.push(g.value.id),G())},B=()=>{const C=U.value.findIndex(T=>T===g.value.id);C>=0&&(U.value.splice(C,1),G())},ee=()=>{if(g.value.column!==1)return;const C=U.value.findIndex(T=>T===g.value.id);C<=0||(We(U.value,C,C-1),G())},w=()=>{if(g.value.column!==1)return;const C=U.value.findIndex(T=>T===g.value.id);C>=U.value.length-1||(We(U.value,C,C+1),G())},G=(C=void 0)=>{setTimeout(()=>D("change",C),100)};return(C,T)=>(d(),$(R,null,[J("h4",null,z(C.label),1),n(de,null,{default:f(()=>[n(Y,{cols:"12"},{default:f(()=>{var k;return[l.value&&t.value&&b.value.sharing?(d(),$("div",rt,[dt,((k=l.value.find(F=>F.IsLeader))==null?void 0:k.UUID)!==t.value.RegistrationUUID?(d(),A(ve,{key:0,color:"red",variant:"text",onClick:a},{default:f(()=>[Q("(leave group)")]),_:1})):N("",!0),n(ce,null,{default:f(()=>[n(W,null,{default:f(()=>{var F;return[n(Pe,{class:"float-left pr-2 font-weight-bold"},{default:f(()=>[Q(" Leader: ")]),_:1}),Q(" "+z((F=l.value.find(ie=>ie.IsLeader))==null?void 0:F.Name),1)]}),_:1}),(d(!0),$(R,null,X(l.value,F=>(d(),$(R,{key:F.UUID},[F.IsLeader?N("",!0):(d(),A(W,{key:0},{append:f(()=>[n(ve,{icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:ie=>E(F.UUID)},null,8,["onClick"])]),default:f(()=>[n(Pe,{class:"float-left pr-2"},{default:f(()=>[Q(" Member: ")]),_:1}),Q(" "+z(F.Name),1)]),_:2},1024))],64))),128))]),_:1}),n(Ml,{modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=F=>c.value=F),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),v.value&&t.value.Leader?(d(),$(R,{key:1},[n(ve,{color:"blue"},{default:f(()=>[J("a",{href:v.value,onClick:nl(u,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,ct)]),_:1}),vt,mt],64)):N("",!0)])):N("",!0)]}),_:1})]),_:1}),t.value&&!t.value.Leader?(d(),A(de,{key:0},{default:f(()=>[n(Y,{cols:"10",md:"5"},{default:f(()=>[ft,pt,gt,n(ce,null,{default:f(()=>[(d(!0),$(R,null,X(U.value.map(k=>S.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(d(),$(R,null,[k?(d(),A(W,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ge(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):N("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(d(),A(de,{key:1},{default:f(()=>[n(Y,{cols:"12",md:"5"},{default:f(()=>[ht,Ut,n(ce,null,{default:f(()=>[(d(!0),$(R,null,X(S.value,k=>(d(),A(W,{key:k.AccommodationUUID,title:k.Name,class:Ge(g.value.column===0&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:F=>g.value={column:0,id:k.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:T[1]||(T[1]=F=>L())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),n(Y,{cols:"12",md:"1"},{default:f(()=>[n(de,{class:"d-md-none"},{default:f(()=>[n(Y,{cols:"12",class:"text-center"},{default:f(()=>[n(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:T[2]||(T[2]=k=>L()),color:"primary",title:"Select"}),Q(" Â  "),n(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:T[3]||(T[3]=k=>B()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),n(de,{class:"d-none d-md-flex h-100 align-content-center"},{default:f(()=>[n(Y,{cols:"12"},{default:f(()=>[n(ve,{icon:"mdi:mdi-arrow-right",size:"small",onClick:T[4]||(T[4]=k=>L()),color:"primary",title:"Select"})]),_:1}),n(Y,{cols:"12"},{default:f(()=>[n(ve,{icon:"mdi:mdi-arrow-left",size:"small",onClick:T[5]||(T[5]=k=>B()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),n(Y,{cols:"10",md:"5"},{default:f(()=>[Vt,n(ce,null,{default:f(()=>[(d(!0),$(R,null,X(U.value.map(k=>S.value.find(F=>F.AccommodationUUID==k)).filter(k=>k!==void 0),(k,F)=>(d(),$(R,null,[k?(d(),A(W,{key:k.AccommodationUUID,title:`${F+1}. ${k.Name}`,class:Ge(g.value.column===1&&g.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ie=>g.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:T[6]||(T[6]=ie=>B())},null,8,["title","class","onClick"])):N("",!0)],64))),256))]),_:1}),It]),_:1}),n(Y,{cols:"2",md:"1"},{default:f(()=>[n(de,{class:"d-flex h-100 align-content-center mt-3"},{default:f(()=>[n(Y,{cols:"12"},{default:f(()=>[n(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:T[7]||(T[7]=k=>ee()),color:"primary",title:"Higher Priority"})]),_:1}),n(Y,{cols:"12"},{default:f(()=>[n(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:T[8]||(T[8]=k=>w()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),yt=Ve({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:D}){const s=e,O=Ke(s,D,void 0,void 0,"items"),I=Ie(e,"modelValue"),p=x({required:l=>!s.required||!!l||"Required.",min:l=>{var a,E;const t=new Date,b=t.getFullYear(),r=(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),v=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),c=((a=O.value.find(S=>S.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",i=((E=O.value.find(S=>S.Title=="BEFORE_DATE"))==null?void 0:E.Value)||`${b}-${r}-${v}`,u=o(i);return V(l,i,parseInt(c))||`You must be at least ${c} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),y=()=>(D("blur"),!(p.value.min(I.value||"")!==!0||p.value.required(I.value||"")!==!0)),V=(l,t,b)=>{if(l>=t)return!1;const r=o(l),c=o(t).getTime()-r.getTime(),i=1e3*60*60*24*365.25;return c/i>=b},o=l=>{const[t,b,r]=l.split("-");return new Date(parseInt(t),parseInt(b)-1,parseInt(r))},U=(l=void 0)=>{setTimeout(()=>D("change",l),100)};return(l,t)=>(d(),A(De,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=b=>I.value=b),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[p.value.required,p.value.min],onBlur:y,onChange:U},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Dt=Fe({...jl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ct=Me()({name:"VRadio",props:Dt(),setup(e,D){let{slots:s}=D;return Ne(()=>n(rl,ue(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),s)),{}}});const kt=Fe({height:{type:[Number,String],default:"auto"},...sl(),...tl(Zl(),["multiple"]),trueIcon:{type:Ze,default:"$radioOn"},falseIcon:{type:Ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Tt=Me()({name:"VRadioGroup",inheritAttrs:!1,props:kt(),emits:{"update:modelValue":e=>!0},setup(e,D){let{attrs:s,slots:O}=D;const I=Dl(),p=Z(()=>e.id||`radio-group-${I}`),y=ke(e,"modelValue");return Ne(()=>{const[V,o]=al(s),[U,l]=we.filterProps(e),[t,b]=rl.filterProps(e),r=O.label?O.label({label:e.label,props:{for:p.value}}):e.label;return n(we,ue({class:["v-radio-group",e.class],style:e.style},V,U,{modelValue:y.value,"onUpdate:modelValue":v=>y.value=v,id:p.value}),{...O,default:v=>{let{id:c,messagesId:i,isDisabled:u,isReadonly:a}=v;return n(R,null,[r&&n(zl,{id:c.value},{default:()=>[r]}),n(Ql,ue(t,{id:c.value,"aria-describedby":i.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:a.value,"aria-labelledby":r?c.value:void 0,multiple:!1},o,{modelValue:y.value,"onUpdate:modelValue":E=>y.value=E}),O)])}})}),{}}}),ll=Ve({__name:"FormField",props:te({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:D}){const s=e,{admin:O=!1,disabled:I=!1,persistentHint:p=!1,required:y=!1}=s,V=x(""),o=Ie(e,"modelValue"),U=Ke(s,D,void 0,void 0,"field"),l=x(ye(U.value)),t=x({maxlength:i=>!s.maxLength||i.length<=s.maxLength||`Maximum length is ${s.maxLength} characters. (Current length: ${i.length})`,minlength:i=>!s.minLength||i.length>=s.minLength||`Minimum length is ${s.minLength} characters. (Current length: ${i.length})`,required:i=>!s.required||!!i||"Required field."}),b=x(!1),r=x([]),v=x("");try{const i=JSON.parse(o.value);Array.isArray(i)?r.value=i:typeof i=="boolean"?b.value=i:v.value=o.value}catch{b.value=!1,r.value=[],v.value=o.value}_(b,()=>{o.value=JSON.stringify(b.value),D("input")}),_(r,()=>{o.value=JSON.stringify(r.value),D("input")},{deep:!0}),_(v,()=>{o.value=v.value,D("input")}),_(U.value,()=>{l.value.Type!==U.value.Type?(l.value=ye(U.value),b.value=!1,r.value=[],v.value=""):l.value=ye(U.value)});const c=(i=void 0)=>{D("change",i)};return(i,u)=>l.value.Type===m(le).TEXT?(d(),A(De,{key:0,modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=a=>v.value=a),hint:l.value.Hint,label:`${l.value.Label}${m(y)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).DATE?(d(),A(De,{key:1,modelValue:v.value,"onUpdate:modelValue":u[1]||(u[1]=a=>v.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).NUMBER?(d(),A(De,{key:2,modelValue:v.value,"onUpdate:modelValue":u[2]||(u[2]=a=>v.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).TEXTAREA?(d(),A(nt,{key:3,modelValue:v.value,"onUpdate:modelValue":u[3]||(u[3]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:c},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).CHECKBOX?(d(),$(R,{key:4},[l.value.Multiple?(d(!0),$(R,{key:0},X(l.value.Values,a=>(d(),A(Ue,{key:a.ID,modelValue:r.value,"onUpdate:modelValue":u[4]||(u[4]=E=>r.value=E),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(d(),A(Ue,{key:1,modelValue:b.value,"onUpdate:modelValue":u[5]||(u[5]=a=>b.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(y),rules:[a=>!m(y)||!!a||"You must tick to continue!"],onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===m(le).SELECT?(d(),$(R,{key:5},[!l.value.Autofill&&l.value.Multiple?(d(),A(Ye,{key:0,modelValue:r.value,"onUpdate:modelValue":u[6]||(u[6]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(d(),A(el,{key:1,modelValue:r.value,"onUpdate:modelValue":u[7]||(u[7]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(d(),A(el,{key:3,modelValue:v.value,"onUpdate:modelValue":u[9]||(u[9]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):N("",!0):(d(),A(Ye,{key:2,modelValue:v.value,"onUpdate:modelValue":u[8]||(u[8]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(p)||!1,"error-messages":V.value,rules:[t.value.required],onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===m(le).RADIO?(d(),A(Tt,{key:6,modelValue:v.value,"onUpdate:modelValue":u[10]||(u[10]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,rules:[t.value.required],onChange:c},{default:f(()=>[(d(!0),$(R,null,X(l.value.Values,a=>(d(),A(Ct,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(le).ACCOMMODATION?(d(),A(bt,{key:7,modelValue:r.value,"onUpdate:modelValue":u[11]||(u[11]=a=>r.value=a),admin:m(O),convention:i.convention,"registration-group":i.registrationGroup,data:i.field.Data,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,onChange:c},null,8,["modelValue","admin","convention","registration-group","data","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(le).AGE?(d(),A(yt,{key:8,modelValue:v.value,"onUpdate:modelValue":u[12]||(u[12]=a=>v.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,onChange:c},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(le).EXTRAS?(d(),A(ot,{key:9,modelValue:v.value,"onUpdate:modelValue":u[13]||(u[13]=a=>v.value=a),convention:i.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(y),onChange:c},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(le).INTERESTS?(d(),A(ut,{key:10,modelValue:v.value,"onUpdate:modelValue":u[14]||(u[14]=a=>v.value=a),convention:i.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(y),onChange:c},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(le).TICKET?(d(),A(st,{key:11,modelValue:v.value,"onUpdate:modelValue":u[15]||(u[15]=a=>v.value=a),admin:m(O),convention:i.convention,"registration-group":i.registrationGroup,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(I)||!1,"persistent-hint":m(p),"error-messages":V.value,required:m(y),onChange:c},null,8,["modelValue","admin","convention","registration-group","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):N("",!0)}}),St={key:0,class:"my-2"},At={key:1,class:"my-2"},Et={key:0,class:"my-2"},Rt={key:1,class:"my-2"},Jt=Ve({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const D=Ie(e,"modelValue");Qe(D.value.Sections),D.value.Sections.forEach(o=>{o.Fields&&Qe(o.Fields)});const s=x(),O=Wl(),I=ol(),p=x((()=>{if(e.data!==void 0){const U=ye(e.data);return D.value.Sections.forEach(l=>{l.Fields&&l.Fields.forEach(t=>{const b=e.data.Data.find(r=>r.SectionFieldUUID===t.SectionFieldUUID&&r.SectionFieldUUID==t.SectionFieldUUID);if(b)t.Value=b.Data;else{const r={ID:0,SubmissionDataUUID:He(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:l.ID,SectionUUID:l.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:t.Value};U.Data.push(r)}})}),U}const o={ID:0,SubmissionUUID:He(),FormID:D.value.ID,FormUUID:D.value.FormUUID,UserID:(O==null?void 0:O.ID)||0,UserUUID:(O==null?void 0:O.UserUUID)||"",Data:[]};return o.Data=D.value.Sections.map(U=>U.Fields?U.Fields.map(l=>({ID:0,SubmissionDataUUID:He(),SubmissionID:o.ID,SubmissionUUID:o.SubmissionUUID,SectionID:U.ID,SectionUUID:U.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value})):[]).flat(),o})()),y=(o,U,l)=>{const t=p.value.Data.find(b=>b.SectionUUID===o&&b.SectionFieldUUID===U);t&&(t.Data=l)},V=({callback:o})=>{var U;(U=s.value)==null||U.validate().then(l=>{l.valid?I.saveSubmission(p.value).then(t=>{if(t){if(p.value=t.Submission,o&&o("Saved"),t.Forms&&t.Forms.length>0){const b=t.Forms.find(i=>i.FormUUID===p.value.FormUUID),r=t.Forms.find(i=>i.Type===he.FORM_TYPE_ACCOMMODATION),v=t.Forms.find(i=>i.Type===he.FORM_TYPE_DEALER),c=t.Forms.find(i=>i.Type===he.FORM_TYPE_BADGE);b&&b.Type===he.FORM_TYPE_REGISTRATION?r?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`):v?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):c?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`):re.push("/"):b&&b.Type===he.FORM_TYPE_ACCOMMODATION?v?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):c?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):b&&b.Type===he.FORM_TYPE_DEALER?c?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):b&&b.Type===he.FORM_TYPE_BADGE&&re.push("/")}}else o&&o("Failed to process request")}).catch(()=>{o&&o("Failed to process request")}):o&&o("Errors in form detected, please review and try again.")})};return(o,U)=>(d(),A(Pl,null,{default:f(()=>[n(et,{ref_key:"formValidator",ref:s,onSubmit:U[0]||(U[0]=nl(()=>{},["prevent"]))},{default:f(()=>[D.value.Heading?(d(),$("h2",St,z(D.value.Heading),1)):N("",!0),D.value.Description?(d(),$("p",At,z(D.value.Description),1)):N("",!0),(d(!0),$(R,null,X(D.value.Sections,l=>(d(),$(R,{key:`section_${D.value.ID}.${l.ID}`},[l.Heading?(d(),$("h3",Et,z(l.Heading),1)):N("",!0),l.Description?(d(),$("p",Rt,z(l.Description),1)):N("",!0),l.Fields?(d(!0),$(R,{key:2},X(l.Fields,t=>(d(),$(R,{key:`field_${D.value.ID}.${l.ID}.${t.ID}`},[t.Field?(d(),A(de,{key:0},{default:f(()=>[n(Y,null,{default:f(()=>[o.editable?(d(),A(ll,{key:0,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":b=>t.Value=b,admin:o.admin,convention:o.convention,"registration-group":o.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,onChange:b=>y(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(d(),A(ll,{key:1,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":b=>t.Value=b,admin:o.admin,convention:o.convention,"registration-group":o.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:"",onChange:b=>y(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):N("",!0)],64))),128)):N("",!0)],64))),128)),o.editable&&!o.preview?(d(),A(de,{key:2},{default:f(()=>[n(Y,{class:"text-center"},{default:f(()=>[n(Nl,{onClick:V,type:"submit"})]),_:1})]),_:1})):N("",!0)]),_:1},512)]),_:1}))}});export{Xt as F,el as V,ll as _,nt as a,le as b,Jt as c};
