import{p as Re,r as A,e as ie,S as m,y as cl,aA as Le,ah as Ze,al as ml,an as el,n as qe,ae as vl,s as Oe,u as _e,w as j,E as Ye,v as s,H as P,x as re,N,aB as fl,I as ve,a1 as le,a2 as fe,a5 as xe,K as o,R as M,U as G,O as H,M as c,Z as z,L as C,Q as L,a3 as ye,P as ll,ar as Pe,$ as tl,Y as gl,ac as Je,a as pl,ax as hl,J as Ul,aC as Xe}from"./index-881ae2c4.js";import{F as oe}from"./form-e2a93b7c.js";import{a as yl}from"./submission-56c4c4f1.js";import{a as Il,V as me,u as Be,m as bl,b as al,c as Tl,d as Vl}from"./VCheckbox-106c41be.js";import{s as De}from"./index-26b71cef.js";import{e as Cl,V as se,a as ee,d as Ie,c as Ce,b as nl}from"./VList-945f2f40.js";import{a as Z,V as x}from"./VRow-807fe430.js";import{m as Dl,u as kl,a as El,b as Sl,V as Fe,c as Al}from"./copyToClipboard-a54a85c5.js";import{v as Ol,u as Ke,V as ke,z as _l,j as Rl}from"./VContainer-a2e88fe2.js";import{a as Ml,e as Ll,_ as je}from"./VChip-a752cc95.js";import{k as Pl,l as $l,j as wl,V as be,f as Ne,m as Fl,n as Nl}from"./VTextField-9deea525.js";import{V as ue}from"./VBtn-617340ee.js";import{V as ql}from"./VTextarea-5a527b79.js";import{m as xl}from"./VAvatar-313c6ea6.js";import{G as Bl}from"./userData-ee1d59ed.js";import{v as $e}from"./v4-a960c1f4.js";import{e as Kl,V as Hl,a as Gl,c as Yl}from"./VCard-3b319668.js";import{V as Jl}from"./VForm-b72cfce5.js";const ze=(e,f,n)=>{if(n>=e.length){let S=n-e.length+1;for(;S--;)e.push(void 0)}e.splice(n,0,e.splice(f,1)[0])},Ee=e=>{e.sort((f,n)=>(f.Order?f.Order:0)-(n.Order?n.Order:0)),e.forEach((f,n)=>{f.Order=n})},Jt=(e,f)=>{const n=f.indexOf(e);if(n===0)return;const S=e.Order;e.Order=f[n-1].Order,f[n-1].Order=S,Ee(f)},Xt=(e,f)=>{const n=f.indexOf(e);if(n>=f.length-1)return;const S=e.Order;e.Order=f[n+1].Order,f[n+1].Order=S,Ee(f)},we=e=>(Ee(e),e),jt=e=>(f,n)=>f[e]<n[e]?-1:f[e]>n[e]?1:0;var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const zt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var ul=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(ul||{});const Wt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Xl=(e,f,n)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),jl=Re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function zl(e,f,n){var h;const S=[],U=(n==null?void 0:n.default)??Xl,g=n!=null&&n.filterKeys?Ze(n.filterKeys):!1,I=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return S;e:for(let D=0;D<e.length;D++){const d=e[D],l={},v={};let b=-1;if(f&&!(n!=null&&n.noFilter)){if(typeof d=="object"){const T=g||Object.keys(d);for(const t of T){const u=ml(d,t,d),a=(h=n==null?void 0:n.customKeyFilter)==null?void 0:h[t];if(b=a?a(u,f,d):U(u,f,d),b!==-1&&b!==!1)a?l[t]=b:v[t]=b;else if((n==null?void 0:n.filterMode)==="every")continue e}}else b=U(d,f,d),b!==-1&&b!==!1&&(v.title=b);const E=Object.keys(v).length,r=Object.keys(l).length;if(!E&&!r||(n==null?void 0:n.filterMode)==="union"&&r!==I&&!E||(n==null?void 0:n.filterMode)==="intersection"&&(r!==I||!E))continue}S.push({index:D,matches:{...v,...l}})}return S}function Wl(e,f,n,S){const U=A([]),g=A(new Map),I=ie(()=>S!=null&&S.transform?m(f).map(S==null?void 0:S.transform):m(f));cl(()=>{const D=typeof Le(n)!="string"&&typeof Le(n)!="number"?"":String(Le(n)),d=zl(I.value,D,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),l=m(f),v=[],b=new Map;d.forEach(E=>{let{index:r,matches:T}=E;const t=l[r];v.push(t),b.set(t.value,T)}),U.value=v,g.value=b});function h(D){return g.value.get(D.value)}return{filteredItems:U,filteredMatches:g,getMatches:h}}function Ql(e,f,n){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?s(P,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),s("span",{class:"v-autocomplete__mask"},[e.substr(f,n)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(f+n)])]):e}const Zl=Re({autoSelectFirst:{type:[Boolean,String]},search:String,...jl({filterKeys:["title"]}),...Dl(),...el(Pl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...xl({transition:!1})},"VAutocomplete"),We=qe()({name:"VAutocomplete",props:Zl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:n}=f;const{t:S}=vl(),U=A(),g=Oe(!1),I=Oe(!0),h=A(!1),D=A(),d=_e(e,"menu"),l=ie({get:()=>d.value,set:V=>{var B;d.value&&!V&&((B=D.value)!=null&&B.ΨopenChildren)||(d.value=V)}}),v=Oe(-1),b=ie(()=>{var V;return(V=U.value)==null?void 0:V.color}),{items:E,transformIn:r,transformOut:T}=Cl(e),{textColorClasses:t,textColorStyles:u}=Ol(b),a=_e(e,"search",""),i=_e(e,"modelValue",[],V=>r(V===null?[null]:Ze(V)),V=>{const B=T(V);return e.multiple?B:B[0]??null}),y=$l(),{filteredItems:k,getMatches:$}=Wl(e,E,()=>I.value?"":a.value),Y=ie(()=>i.value.map(V=>E.value.find(B=>e.valueComparator(B.value,V.value))||V)),p=ie(()=>e.hideSelected?k.value.filter(V=>!Y.value.some(B=>B.value===V.value)):k.value),w=ie(()=>Y.value.map(V=>V.props.value)),W=ie(()=>Y.value[v.value]),ge=ie(()=>{var B;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((B=p.value[0])==null?void 0:B.title))&&p.value.length>0&&!I.value&&!h.value}),Te=ie(()=>e.hideNoData&&!E.value.length||e.readonly||(y==null?void 0:y.isReadonly.value)),de=A(),{onListScroll:Me,onListKeydown:O}=kl(de,U);function R(V){e.openOnClear&&(l.value=!0),a.value=""}function ne(){Te.value||(l.value=!0)}function _(V){Te.value||(g.value&&(V.preventDefault(),V.stopPropagation()),l.value=!l.value)}function q(V){var Ue,F,Q;if(e.readonly||y!=null&&y.isReadonly.value)return;const B=U.value.selectionStart,J=w.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(l.value=!0),["Escape"].includes(V.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(V.key)&&(ge.value&&["Enter","Tab"].includes(V.key)&&he(k.value[0]),I.value=!0),V.key==="ArrowDown"&&ge.value&&((Ue=de.value)==null||Ue.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(v.value<0){V.key==="Backspace"&&!a.value&&(v.value=J-1);return}const K=v.value;W.value&&he(W.value),v.value=K>=J-1?J-2:K}if(V.key==="ArrowLeft"){if(v.value<0&&B>0)return;const K=v.value>-1?v.value-1:J-1;Y.value[K]?v.value=K:(v.value=-1,U.value.setSelectionRange((F=a.value)==null?void 0:F.length,(Q=a.value)==null?void 0:Q.length))}if(V.key==="ArrowRight"){if(v.value<0)return;const K=v.value+1;Y.value[K]?v.value=K:(v.value=-1,U.value.setSelectionRange(0,0))}}}function pe(V){a.value=V.target.value}function il(){var V;g.value&&(I.value=!0,(V=U.value)==null||V.focus())}function ol(V){g.value=!0,setTimeout(()=>{h.value=!0})}function sl(V){h.value=!1}function rl(V){(V==null||V===""&&!e.multiple)&&(i.value=[])}const Ve=Oe(!1);function he(V){if(e.multiple){const B=w.value.findIndex(J=>e.valueComparator(J,V.value));if(B===-1)i.value=[...i.value,V];else{const J=[...i.value];J.splice(B,1),i.value=J}}else i.value=[V],Ve.value=!0,a.value=V.title,l.value=!1,I.value=!0,Ye(()=>Ve.value=!1)}return j(g,(V,B)=>{var J;V!==B&&(V?(Ve.value=!0,a.value=e.multiple?"":String(((J=Y.value.at(-1))==null?void 0:J.props.title)??""),I.value=!0,Ye(()=>Ve.value=!1)):(!e.multiple&&!a.value?i.value=[]:ge.value&&!h.value&&!Y.value.some(Ue=>{let{value:F}=Ue;return F===p.value[0].value})&&he(p.value[0]),l.value=!1,a.value="",v.value=-1))}),j(a,V=>{!g.value||Ve.value||(V&&(l.value=!0),I.value=!V)}),Ke(()=>{const V=!!(e.chips||n.chip),B=!!(!e.hideNoData||p.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),J=i.value.length>0,[Ue]=be.filterProps(e);return s(be,re({ref:U},Ue,{modelValue:a.value,"onUpdate:modelValue":rl,focused:g.value,"onUpdate:focused":F=>g.value=F,validationValue:i.externalValue,dirty:J,onInput:pe,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!n.selection,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:J?void 0:e.placeholder,"onClick:clear":R,"onMousedown:control":ne,onKeydown:q}),{...n,default:()=>s(P,null,[s(El,re({ref:D,modelValue:l.value,"onUpdate:modelValue":F=>l.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:Te.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:il},e.menuProps),{default:()=>[B&&s(se,{ref:de,selected:w.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:O,onFocusin:ol,onFocusout:sl,onScrollPassive:Me,tabindex:"-1"},{default:()=>{var F,Q,K;return[(F=n["prepend-item"])==null?void 0:F.call(n),!p.value.length&&!e.hideNoData&&(((Q=n["no-data"])==null?void 0:Q.call(n))??s(ee,{title:S(e.noDataText)},null)),s(Sl,{renderless:!0,items:p.value},{default:ce=>{var Ge;let{item:te,index:ae,itemRef:dl}=ce;const He=re(te.props,{ref:dl,key:ae,active:ge.value&&ae===0?!0:void 0,onClick:()=>he(te)});return((Ge=n.item)==null?void 0:Ge.call(n,{item:te,index:ae,props:He}))??s(ee,He,{prepend:Se=>{let{isSelected:Ae}=Se;return s(P,null,[e.multiple&&!e.hideSelected?s(Il,{key:te.value,modelValue:Ae,ripple:!1,tabindex:"-1"},null):void 0,te.props.prependIcon&&s(ke,{icon:te.props.prependIcon},null)])},title:()=>{var Se,Ae;return I.value?te.title:Ql(te.title,(Se=$(te))==null?void 0:Se.title,((Ae=a.value)==null?void 0:Ae.length)??0)}})}}),(K=n["append-item"])==null?void 0:K.call(n)]}})]}),Y.value.map((F,Q)=>{var te;function K(ae){ae.stopPropagation(),ae.preventDefault(),he(F)}const ce={"onClick:close":K,onMousedown(ae){ae.preventDefault(),ae.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:F.value,class:["v-autocomplete__selection",Q===v.value&&["v-autocomplete__selection--selected",t.value]],style:Q===v.value?u.value:{}},[V?n.chip?s(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>{var ae;return[(ae=n.chip)==null?void 0:ae.call(n,{item:F,index:Q,props:ce})]}}):s(Ml,re({key:"chip",closable:e.closableChips,size:"small",text:F.title},ce),null):((te=n.selection)==null?void 0:te.call(n,{item:F,index:Q}))??s("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&Q<Y.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[N(",")])])])})]),"append-inner":function(){var ce;for(var F=arguments.length,Q=new Array(F),K=0;K<F;K++)Q[K]=arguments[K];return s(P,null,[(ce=n["append-inner"])==null?void 0:ce.call(n,...Q),e.menuIcon?s(ke,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:_,onClick:fl},null):void 0])}})}),wl({isFocused:g,isPristine:I,menu:l,search:a,filteredItems:k,select:he},U)}}),et={class:"extrasList"},lt=ve({__name:"Extras",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const n=e,{admin:S=!1,convention:U,disabled:g=!1}=n,I=fe(e,"modelValue"),h=xe.getInstance(),D=A({});try{D.value=JSON.parse(I.value)}catch{}const d=A([]),l=A([]);j(n,()=>{b()}),j(D.value,r=>{for(const T in r)if(r[T].checked){const t=d.value.map(u=>{var a;return(a=u.Options)==null?void 0:a.find(i=>i.OptionUUID===T)});if(t&&t.length>0)try{const u=t[0];r[T].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(r[T].choiceId=u.Choices[0].TagUUID),r[T].price=u==null?void 0:u.Price}catch{}}else r[T].choiceId="",r[T].price=0;I.value=JSON.stringify(r),E()});const v=ie({get:()=>d.value.map(r=>r.ExtraUUID),set:()=>{}}),b=()=>{var T;const r=((T=n.items.find(t=>t.Title==="SelectedExtras"))==null?void 0:T.Value)||"[]";try{const t=JSON.parse(r);d.value=l.value.filter(u=>t.find(a=>a===u.ExtraUUID))||[],v.value=[...d.value.map(u=>u.ExtraUUID)],d.value.forEach(u=>{var a;(a=u.Options)==null||a.forEach(i=>{D.value[i.OptionUUID]||(D.value[i.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in U&&U.Extras.length?(l.value=U.Extras,b()):"ConventionUUID"in U&&(S?h==null||h.getConventionExtras(U.ConventionUUID).then(r=>{r&&(l.value=r,b())}):h==null||h.getAvailableConventionExtras(U.ConventionUUID).then(r=>{r&&(l.value=r,b())}));const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,T)=>(o(),M("div",et,[G("h4",null,H(r.label),1),s(se,{opened:v.value,"onUpdate:opened":T[0]||(T[0]=t=>v.value=t)},{default:c(()=>[(o(!0),M(P,null,z(d.value,t=>(o(),C(nl,{key:t.ExtraUUID,value:t.ExtraUUID},{activator:c(({props:u})=>[s(ee,re({"prepend-icon":"mdi:mdi-group","append-icon":""},u),{default:c(()=>[t.Name?(o(),C(Ie,{key:0},{default:c(()=>[G("strong",null,H(t.Name),1)]),_:2},1024)):L("",!0),t.Description?(o(),C(Ce,{key:1,class:"mt-2 d-inline"},{default:c(()=>[N(H(t.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:c(()=>[t.Options?(o(!0),M(P,{key:0},z(t.Options,u=>(o(),C(ee,{key:u.OptionUUID,class:"override-pl"},{default:c(()=>[s(Z,null,{default:c(()=>[s(x,{cols:"12",sm:"6"},{default:c(()=>[s(me,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${m(De).currencySymbol}${u.Price})`:""}`,modelValue:D.value[u.OptionUUID].checked,"onUpdate:modelValue":a=>D.value[u.OptionUUID].checked=a,disabled:m(g),"hide-details":"",onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&D.value[u.OptionUUID].checked?(o(),C(x,{key:0,cols:"12",sm:"6"},{default:c(()=>[s(Fe,{items:u.Choices.sort((a,i)=>a.Title.localeCompare(i.Title)).map(a=>({value:a.TagUUID,title:a.Title})),modelValue:D.value[u.OptionUUID].choiceId,"onUpdate:modelValue":a=>D.value[u.OptionUUID].choiceId=a,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(g),"hide-details":"",onChange:E},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const tt={class:"interestList"},at=ve({__name:"Interests",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const n=e,{admin:S=!1,convention:U,disabled:g=!1}=n,I=fe(e,"modelValue"),h=xe.getInstance(),D=A({});try{D.value=JSON.parse(I.value)}catch{}const d=A([]),l=A([]);j(D.value,r=>{I.value=JSON.stringify(r)});const v=A([]),b=()=>{var T;const r=((T=n.items.find(t=>t.Title==="SelectedInterests"))==null?void 0:T.Value)||"[]";try{const t=JSON.parse(r);d.value=l.value.filter(u=>t.find(a=>a===u.InterestUUID))||[],v.value=[...d.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in U&&(S?h==null||h.getConventionInterests(U.ConventionUUID).then(r=>{r&&(l.value=r,b())}):h==null||h.getConventionInterests(U.ConventionUUID).then(r=>{r&&(l.value=r,b())})),j(n,()=>{b()});const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,T)=>(o(),M("div",tt,[G("h4",null,H(r.label),1),s(se,{opened:v.value,"onUpdate:opened":T[0]||(T[0]=t=>v.value=t)},{default:c(()=>[(o(!0),M(P,null,z(d.value,t=>(o(),C(ee,{key:t.InterestUUID},{default:c(()=>[s(Z,null,{default:c(()=>[s(x,null,{default:c(()=>[s(me,{label:`${t.Name} ${t.Price&&t.Price>0?`(${m(De).currencySymbol}${t.Price})`:""}`,modelValue:D.value[t.InterestUUID],"onUpdate:modelValue":u=>D.value[t.InterestUUID]=u,disabled:m(g),messages:t.Description,onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const nt={class:"ticketList"},ut={key:0,class:"text-orange-darken-1"},it=ve({__name:"Tickets",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const n=e,{admin:S=!1,convention:U,disabled:g=!1,registrationGroup:I=void 0}=n,h=fe(e,"modelValue"),D=xe.getInstance(),d=A({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{d.value=JSON.parse(h.value),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked)}catch{}const l=A([]),v=A([]);j(d.value,a=>{h.value=JSON.stringify(a)});const b=A([]),E=A({required:(a,i=void 0)=>()=>{if(g||!(I!=null&&I.Registration.Leader))return!0;if(i==null){if(d.value.Ticket.length===0&&n.required)return"Must select at least one ticket option.";if(a&&a.ComponentsRequired>0&&d.value.Ticket.includes(a.TicketUUID||"")){let y=0;if(a.TicketComponents.forEach(k=>{d.value.ComponentsChecked.forEach($=>{k.TicketUUID===$&&(y+=1)})}),y<a.ComponentsRequired)return`Must select ticket ${a.ComponentsRequired} component${a.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var i;const a=((i=n.items.find(y=>y.Title==="SelectedTickets"))==null?void 0:i.Value)||"[]";try{const y=JSON.parse(a);l.value=v.value.filter(k=>k.Type==="TICKET_TYPE_GROUP"&&y.find($=>$===k.TicketUUID))||[],b.value=[...l.value.filter(k=>k.Type==="TICKET_TYPE_GROUP").map(k=>k.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(S)D==null||D.getConventionTickets(U.ConventionUUID).then(a=>{a&&(v.value=a,r())});else{const a=n.items.find(i=>i.Title==="SelectedTickets");a&&(D==null||D.getFieldTickets(a.FieldUUID).then(i=>{i&&(v.value=i,r())}))}j(n,()=>{r()});const T=a=>{d.value.Ticket.length>1&&d.value.Ticket.shift(),d.value.ComponentsChecked=[];const i=[];l.value.forEach(y=>{(d.value.Ticket.includes(y.TicketUUID)||d.value.ComponentsChecked.includes(y.TicketUUID))&&i.push(...y.AddonTickets.map(k=>k.TicketUUID))}),d.value.AddonsChecked=d.value.AddonsChecked.filter(y=>i.includes(y)),u(a)},t=a=>{const i=v.value.find(y=>y.TicketUUID===d.value.Ticket[0]);if(i)for(;d.value.ComponentsChecked.length>i.ComponentsRequired;)d.value.ComponentsChecked.shift();u(a)},u=(a=void 0)=>{setTimeout(()=>f("change",a),100)};try{I!=null&&I.TicketData&&(d.value=JSON.parse(I.TicketData),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked),h.value=JSON.stringify(d.value),u())}catch{}return(a,i)=>{var y;return o(),M("div",nt,[G("h4",null,[N(H(a.label)+" ",1),(y=m(I))!=null&&y.Registration.Leader?L("",!0):(o(),M("small",ut,"(controlled by group leader)"))]),s(se,{opened:b.value,"onUpdate:opened":i[4]||(i[4]=k=>b.value=k)},{default:c(()=>[(o(!0),M(P,null,z(m(we)(l.value.filter(k=>k.Type===m(ul).TICKET_TYPE_GROUP)),k=>(o(),M(P,{key:k.TicketUUID},[k.Tickets.length>0?(o(),C(nl,{key:0,value:k.TicketUUID},{activator:c(({props:$})=>[s(ee,re($,{"prepend-icon":"mdi:mdi-group"}),{default:c(()=>[s(Ie,null,{default:c(()=>[G("strong",null,H(k.Name),1)]),_:2},1024),s(Ce,{class:"d-inline"},{default:c(()=>[N(H(k.Description),1)]),_:2},1024)]),_:2},1040)]),default:c(()=>[(o(!0),M(P,null,z(k.Tickets,$=>(o(),C(ee,{key:$.TicketUUID,class:"override-pl"},{default:c(()=>{var Y;return[s(Ce,{class:"d-inline"},{default:c(()=>[N(H($.Description),1)]),_:2},1024),s(me,{modelValue:d.value.Ticket,"onUpdate:modelValue":i[0]||(i[0]=p=>d.value.Ticket=p),value:$.TicketUUID,onChange:T,rules:[E.value.required($)],"validate-on":"submit",disabled:m(g)||!((Y=m(I))!=null&&Y.Registration.Leader)},{label:c(()=>[s(ke,{icon:$.RequiresAccommodation?"mdi:mdi-home":$.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+H(`${$.Name} ${$.Price>0?`(${m(De).currencySymbol}${$.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),d.value.Ticket.length>0&&$.TicketUUID===d.value.Ticket[0]?(o(),M(P,{key:0},[$.AddonTickets.length?(o(),C(se,{key:0},{default:c(()=>[(o(!0),M(P,null,z(m(we)($.AddonTickets),p=>(o(),M(P,{key:p==null?void 0:p.TicketUUID},[p?(o(),C(ee,{key:0},{default:c(()=>[s(Ie,null,{default:c(()=>{var w;return[s(me,{modelValue:d.value.AddonsChecked,"onUpdate:modelValue":i[1]||(i[1]=W=>d.value.AddonsChecked=W),value:p.TicketUUID,onChange:i[2]||(i[2]=W=>{d.value.ComponentsChecked=[],u(W)}),disabled:m(g)||!((w=m(I))!=null&&w.Registration.Leader)},{label:c(()=>[s(ke,{icon:p.RequiresAccommodation?"mdi:mdi-home-plus":p.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+H(`${p.Name} ${p.Price>0?`(${m(De).currencySymbol}${p.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Ce,{class:"d-inline"},{default:c(()=>[N(H(p.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),$.TicketComponents.length?(o(),C(se,{key:1},{default:c(()=>[(o(!0),M(P,null,z(m(we)($.TicketComponents),p=>(o(),M(P,{key:p==null?void 0:p.TicketUUID},[p?(o(),C(ee,{key:0},{default:c(()=>[s(Ie,null,{default:c(()=>{var w;return[s(me,{modelValue:d.value.ComponentsChecked,"onUpdate:modelValue":i[3]||(i[3]=W=>d.value.ComponentsChecked=W),value:p.TicketUUID,onChange:t,rules:[E.value.required($,p)],"validate-on":"submit",disabled:m(g)||!((w=m(I))!=null&&w.Registration.Leader)},{label:c(()=>[s(ke,{icon:p.RequiresAccommodation?"mdi:mdi-home-plus":p.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+H(`${p.Name} ${p.Price>0?`(${m(De).currencySymbol}${p.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Ce,null,{default:c(()=>[N(H(p.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},st=G("strong",null,"Your Sharing Group",-1),rt=["href","onClick"],dt=G("br",null,null,-1),ct=G("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),mt=G("strong",null,"Your Groups Accommodation",-1),vt=G("br",null,null,-1),ft=G("small",null,"(in order of preference, controlled by group leader)",-1),gt=G("strong",null,"Accommodation Options",-1),pt=G("br",null,null,-1),ht=G("strong",null,"Your Chosen Accommodation",-1),Ut=G("small",null,"(in order of preference)",-1),yt=ve({__name:"Accommodation",props:le({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const n=e,{admin:S=!1,convention:U,disabled:g}=n,I=fe(e,"modelValue"),h=Be(n,f,void 0,void 0,"items"),D=tl(),d=gl.getInstance(),l=A(ye(I.value)),v=A([]),b=A(),E=A({sharing:!1}),r=()=>{try{const O=JSON.parse(n.data);O&&(E.value=O)}catch{}};r(),j(n,()=>{r(),n.registrationGroup&&(v.value=n.registrationGroup.Members,b.value=n.registrationGroup.Registration)}),j(l,O=>{I.value=ye(O)},{deep:!0});const T=A(""),t=A(!1),u=()=>{var O;(O=b.value)!=null&&O.Leader&&D.getRegistrationInvite(U.ConventionUUID).then(R=>{if(R){const ne=new URL(location.href);ne.searchParams.set("token",R),T.value=ne.toString()}})},a=()=>{Al(T.value),u(),t.value=!0,setTimeout(()=>t.value=!1,2200)},i=()=>{d.emit("registration.group.leave")},y=O=>{d.emit("registration.group.remove.member",O)},k=A([]);j(h,()=>{$()});const $=()=>{S?D.getConventionAccommodation(U.ConventionUUID).then(O=>{k.value=O.filter(R=>!!(h!=null&&h.value.find(ne=>ne.Value===R.AccommodationUUID)))||[]}):h.value.length>0&&D.getFieldAccommodation(h.value[0].FieldUUID).then(O=>{k.value=O.filter(R=>!!(h!=null&&h.value.find(ne=>ne.Value===R.AccommodationUUID)))||[]})};$(),(()=>{var O;if(n.registrationGroup)if(v.value=n.registrationGroup.Members,b.value=n.registrationGroup.Registration,(O=b.value)!=null&&O.Leader)u();else try{l.value=JSON.parse(n.registrationGroup.AccommodationData)}catch{}})();const p=A({column:0,id:""}),w=()=>{!g&&!l.value.includes(p.value.id)&&(p.value.column===0&&p.value.id!==""&&l.value.push(p.value.id),de())},W=()=>{const O=l.value.findIndex(R=>R===p.value.id);!g&&O>=0&&(l.value.splice(O,1),de())},ge=()=>{if(g||p.value.column!==1)return;const O=l.value.findIndex(R=>R===p.value.id);O<=0||(ze(l.value,O,O-1),de())},Te=()=>{if(g||p.value.column!==1)return;const O=l.value.findIndex(R=>R===p.value.id);O>=l.value.length-1||(ze(l.value,O,O+1),de())},de=(O=void 0)=>{setTimeout(()=>f("change",O),100)},Me=A({required:O=>!n.required||O.length>0||"Selections Required"});return(O,R)=>{var ne;return o(),M(P,null,[G("h4",null,H(O.label),1),s(Z,null,{default:c(()=>[s(x,{cols:"12"},{default:c(()=>{var _;return[v.value&&b.value&&E.value.sharing?(o(),M("div",ot,[st,!m(g)&&((_=v.value.find(q=>q.IsLeader))==null?void 0:_.UUID)!==b.value.RegistrationUUID?(o(),C(ue,{key:0,color:"red",variant:"text",onClick:i},{default:c(()=>[N("(leave group)")]),_:1})):L("",!0),s(se,null,{default:c(()=>[s(ee,null,{default:c(()=>{var q;return[s(Ie,{class:"float-left pr-2 font-weight-bold"},{default:c(()=>[N(" Leader: ")]),_:1}),N(" "+H((q=v.value.find(pe=>pe.IsLeader))==null?void 0:q.Name),1)]}),_:1}),(o(!0),M(P,null,z(v.value,q=>(o(),M(P,{key:q.UUID},[q.IsLeader?L("",!0):(o(),C(ee,{key:0},{append:c(()=>[b.value.Leader?(o(),C(ue,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:pe=>y(q.UUID),disabled:m(g)},null,8,["onClick","disabled"])):L("",!0)]),default:c(()=>[s(Ie,{class:"float-left pr-2"},{default:c(()=>[N(" Member: ")]),_:1}),N(" "+H(q.Name),1)]),_:2},1024))],64))),128))]),_:1}),s(Ll,{modelValue:t.value,"onUpdate:modelValue":R[0]||(R[0]=q=>t.value=q),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),T.value&&b.value.Leader&&!m(g)?(o(),M(P,{key:1},[G("a",{href:T.value,onClick:ll(a,["prevent"]),class:"text-white text-decoration-none"},[s(ue,{color:"blue"},{default:c(()=>[N("Get Invite Link")]),_:1})],8,rt),dt,ct],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),b.value&&!b.value.Leader?(o(),C(Z,{key:0},{default:c(()=>[s(x,{cols:"10",md:"5"},{default:c(()=>[mt,vt,ft,s(se,null,{default:c(()=>[(o(!0),M(P,null,z(l.value.map(_=>k.value.find(q=>q.AccommodationUUID==_)).filter(_=>_!==void 0),(_,q)=>(o(),M(P,null,[_?(o(),C(ee,{key:_.AccommodationUUID,title:`${q+1}. ${_.Name}`,class:Pe(p.value.column===1&&p.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),C(Z,{key:1},{default:c(()=>[s(x,{cols:"12",md:"5"},{default:c(()=>[gt,pt,s(se,null,{default:c(()=>[(o(!0),M(P,null,z(k.value,_=>(o(),C(ee,{key:_.AccommodationUUID,title:_.Name,class:Pe(p.value.column===0&&p.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:q=>p.value={column:0,id:_.AccommodationUUID},"append-icon":m(g)?"":"mdi:mdi-gesture-tap",onDblclick:R[1]||(R[1]=q=>w())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),m(g)?L("",!0):(o(),C(x,{key:0,cols:"12",md:"1"},{default:c(()=>[s(Z,{class:"d-md-none"},{default:c(()=>[s(x,{cols:"12",class:"text-center"},{default:c(()=>[s(ue,{icon:"mdi:mdi-arrow-down",size:"small",onClick:R[2]||(R[2]=_=>w()),color:"primary",title:"Select"}),N("   "),s(ue,{icon:"mdi:mdi-arrow-up",size:"small",onClick:R[3]||(R[3]=_=>W()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(Z,{class:"d-none d-md-flex h-100 align-content-center"},{default:c(()=>[s(x,{cols:"12"},{default:c(()=>[s(ue,{icon:"mdi:mdi-arrow-right",size:"small",onClick:R[4]||(R[4]=_=>w()),color:"primary",title:"Select"})]),_:1}),s(x,{cols:"12"},{default:c(()=>[s(ue,{icon:"mdi:mdi-arrow-left",size:"small",onClick:R[5]||(R[5]=_=>W()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(x,{cols:"10",md:"5"},{default:c(()=>[ht,s(se,null,{default:c(()=>[(o(!0),M(P,null,z(l.value.map(_=>k.value.find(q=>q.AccommodationUUID==_)).filter(_=>_!==void 0),(_,q)=>(o(),M(P,null,[_?(o(),C(ee,{key:_.AccommodationUUID,title:`${q+1}. ${_.Name}`,class:Pe(p.value.column===1&&p.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:pe=>p.value={column:1,id:(_==null?void 0:_.AccommodationUUID)||""},"append-icon":m(g)?"":"mdi:mdi-gesture-tap",onDblclick:R[6]||(R[6]=pe=>W())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),Ut]),_:1}),m(g)?L("",!0):(o(),C(x,{key:1,cols:"2",md:"1"},{default:c(()=>[s(Z,{class:"d-flex h-100 align-content-center mt-3"},{default:c(()=>[s(x,{cols:"12"},{default:c(()=>[s(ue,{icon:"mdi:mdi-arrow-up",size:"small",onClick:R[7]||(R[7]=_=>ge()),color:"primary",title:"Higher Priority"})]),_:1}),s(x,{cols:"12"},{default:c(()=>[s(ue,{icon:"mdi:mdi-arrow-down",size:"small",onClick:R[8]||(R[8]=_=>Te()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(ne=b.value)!=null&&ne.Leader?(o(),C(Ne,{key:2,modelValue:I.value,"onUpdate:modelValue":R[9]||(R[9]=_=>I.value=_),disabled:m(g)||!1,"persistent-hint":O.persistentHint||!1,"error-messages":O.errorMessages||"",rules:[Me.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):L("",!0)],64)}}});const It=ve({__name:"AgeCheck",props:le({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const n=e,S=Be(n,f,void 0,void 0,"items"),U=fe(e,"modelValue"),g=A({required:l=>!n.required||!!l||"Required.",min:l=>{var a,i;const v=new Date,b=v.getFullYear(),E=(v.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=v.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),T=((a=S.value.find(y=>y.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",t=((i=S.value.find(y=>y.Title=="BEFORE_DATE"))==null?void 0:i.Value)||`${b}-${E}-${r}`,u=D(t);return h(l,t,parseInt(T))||`You must be at least ${T} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),I=()=>(f("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),h=(l,v,b)=>{if(l>=v)return!1;const E=D(l),T=D(v).getTime()-E.getTime(),t=1e3*60*60*24*365.25;return T/t>=b},D=l=>{const[v,b,E]=l.split("-");return new Date(parseInt(v),parseInt(b)-1,parseInt(E))},d=(l=void 0)=>{setTimeout(()=>f("change",l),100)};return(l,v)=>(o(),C(be,{modelValue:U.value,"onUpdate:modelValue":v[0]||(v[0]=b=>U.value=b),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:I,onChange:d},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),bt=Re({...bl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Tt=qe()({name:"VRadio",props:bt(),setup(e,f){let{slots:n}=f;return Ke(()=>s(al,re(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)),{}}});const Vt=Re({height:{type:[Number,String],default:"auto"},...Fl(),...el(Tl(),["multiple"]),trueIcon:{type:Je,default:"$radioOn"},falseIcon:{type:Je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ct=qe()({name:"VRadioGroup",inheritAttrs:!1,props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:n,slots:S}=f;const U=pl(),g=ie(()=>e.id||`radio-group-${U}`),I=_e(e,"modelValue");return Ke(()=>{const[h,D]=hl(n),[d,l]=Ne.filterProps(e),[v,b]=al.filterProps(e),E=S.label?S.label({label:e.label,props:{for:g.value}}):e.label;return s(Ne,re({class:["v-radio-group",e.class],style:e.style},h,d,{modelValue:I.value,"onUpdate:modelValue":r=>I.value=r,id:g.value}),{...S,default:r=>{let{id:T,messagesId:t,isDisabled:u,isReadonly:a}=r;return s(P,null,[E&&s(Nl,{id:T.value},{default:()=>[E]}),s(Vl,re(v,{id:T.value,"aria-describedby":t.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:a.value,"aria-labelledby":E?T.value:void 0,multiple:!1},D,{modelValue:I.value,"onUpdate:modelValue":i=>I.value=i}),S)])}})}),{}}}),Qe=ve({__name:"FormField",props:le({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:le(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const n=e,{admin:S=!1,disabled:U=!1,persistentHint:g=!1,required:I=!1}=n,h=A(""),D=fe(e,"modelValue"),d=Be(n,f,void 0,void 0,"field"),l=A(ye(d.value)),v=A({maxlength:t=>!n.maxLength||t.length<=n.maxLength||`Maximum length is ${n.maxLength} characters. (Current length: ${t.length})`,minlength:t=>!n.minLength||t.length>=n.minLength||`Minimum length is ${n.minLength} characters. (Current length: ${t.length})`,required:t=>!n.required||!!t.replace(/\s/g,"")||"Required field."}),b=A(!1),E=A([]),r=A("");try{const t=JSON.parse(D.value);Array.isArray(t)?E.value=t:typeof t=="boolean"?b.value=t:r.value=D.value}catch{b.value=!1,E.value=[],r.value=D.value}j(b,()=>{D.value=JSON.stringify(b.value),f("input")}),j(E,()=>{D.value=JSON.stringify(E.value),f("input"),l.value.Type===X.SELECT&&f("change")},{deep:!0}),j(r,()=>{D.value=r.value,f("input"),l.value.Type===X.SELECT&&f("change")}),j(d.value,()=>{l.value.Type!==d.value.Type?(l.value=ye(d.value),b.value=!1,E.value=[],r.value=""):l.value=ye(d.value)});const T=(t=void 0)=>{f("change",t)};return(t,u)=>l.value.Type===m(X).TEXT?(o(),C(be,{key:0,modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:`${l.value.Label}${m(I)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).DATE?(o(),C(be,{key:1,modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=a=>r.value=a),type:"date",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).NUMBER?(o(),C(be,{key:2,modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=a=>r.value=a),type:"number",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).TEXTAREA?(o(),C(ql,{key:3,modelValue:r.value,"onUpdate:modelValue":u[3]||(u[3]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).CHECKBOX?(o(),M(P,{key:4},[l.value.Multiple?(o(!0),M(P,{key:0},z(l.value.Values,a=>(o(),C(me,{key:a.ID,modelValue:E.value,"onUpdate:modelValue":u[4]||(u[4]=i=>E.value=i),name:t.name,hint:l.value.Hint,label:a.Title,value:a.Value,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,rules:[v.value.required],onChange:T},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),C(me,{key:1,modelValue:b.value,"onUpdate:modelValue":u[5]||(u[5]=a=>b.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(I),rules:[a=>!m(I)||!!a||"You must tick to continue!"],onChange:T},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===m(X).SELECT?(o(),M(P,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),C(Fe,{key:0,modelValue:E.value,"onUpdate:modelValue":u[6]||(u[6]=a=>E.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),C(We,{key:1,modelValue:E.value,"onUpdate:modelValue":u[7]||(u[7]=a=>E.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),C(We,{key:3,modelValue:r.value,"onUpdate:modelValue":u[9]||(u[9]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(o(),C(Fe,{key:2,modelValue:r.value,"onUpdate:modelValue":u[8]||(u[8]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===m(X).RADIO?(o(),C(Ct,{key:6,modelValue:r.value,"onUpdate:modelValue":u[10]||(u[10]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,rules:[v.value.required],onChange:T},{default:c(()=>[(o(!0),M(P,null,z(l.value.Values,a=>(o(),C(Tt,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(X).ACCOMMODATION?(o(),C(yt,{key:7,modelValue:E.value,"onUpdate:modelValue":u[11]||(u[11]=a=>E.value=a),name:t.name,admin:m(S),convention:t.convention,"registration-group":t.registrationGroup,data:t.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(I),onChange:T},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(X).AGE?(o(),C(It,{key:8,modelValue:r.value,"onUpdate:modelValue":u[12]||(u[12]=a=>r.value=a),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:T},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(X).EXTRAS?(o(),C(lt,{key:9,modelValue:r.value,"onUpdate:modelValue":u[13]||(u[13]=a=>r.value=a),admin:m(S),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(I),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(X).INTERESTS?(o(),C(at,{key:10,modelValue:r.value,"onUpdate:modelValue":u[14]||(u[14]=a=>r.value=a),admin:m(S),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(I),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===m(X).TICKET?(o(),C(it,{key:11,modelValue:r.value,"onUpdate:modelValue":u[15]||(u[15]=a=>r.value=a),admin:m(S),convention:t.convention,name:t.name,"registration-group":t.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(I),onChange:T},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),Dt={key:0,class:"my-2 text-white text-center"},kt={key:1,class:"admin-header my-2 text-white text-center"},Et=["innerHTML"],St=["innerHTML"],Qt=ve({__name:"FormRenderer",props:le({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:le(["close"],["update:modelValue"]),setup(e,{emit:f}){const n=fe(e,"modelValue");Ee(n.value.Sections),n.value.Sections.forEach(t=>{t.Fields&&Ee(t.Fields)});const S=A(),U=Bl(),g=tl(),I=A(!1),h=A(!1),D=A(!1),d=A(!1),l=A((()=>{if(e.data!==void 0){const u=ye(e.data);return n.value.Sections.forEach(a=>{a.Fields&&a.Fields.forEach(i=>{const y=e.data.Data.find(k=>k.SectionFieldUUID===i.SectionFieldUUID&&k.SectionFieldUUID==i.SectionFieldUUID);if(y)i.Value=y.Data;else{const k={ID:0,SubmissionDataUUID:$e(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:a.ID,SectionUUID:a.SectionUUID,SectionFieldID:i.ID,SectionFieldUUID:i.SectionFieldUUID,Data:i.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};u.Data.push(k),i.Value=""}})}),u}const t={ID:0,SubmissionUUID:$e(),FormID:n.value.ID,FormUUID:n.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return t.Data=n.value.Sections.map(u=>u.Fields?u.Fields.map(a=>({ID:0,SubmissionDataUUID:$e(),SubmissionID:t.ID,SubmissionUUID:t.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:a.ID,SectionFieldUUID:a.SectionFieldUUID,Data:""})):[]).flat(),t})()),v=(t,u,a)=>{const i=l.value.Data.find(y=>y.SectionUUID===t&&y.SectionFieldUUID===u);i&&(i.Data=a)},b=(t,u,a,i)=>t&&t.Type===oe.FORM_TYPE_REGISTRATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:a?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":t&&t.Type===oe.FORM_TYPE_ACCOMMODATION?a?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":t&&t.Type===oe.FORM_TYPE_DEALER?i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(t&&t.Type===oe.FORM_TYPE_BADGE,"/"),E=({callback:t})=>{g.getRegistrationByConvention(e.convention.ConventionUUID).then(u=>{t&&t("Loading"),g.getAvailableConventionForms(e.convention.ConventionUUID).then(a=>{u.Submissions.forEach((p,w)=>{p.Form||(u.Submissions[w].Form=a.find(W=>W.FormUUID===p.FormUUID))});const i=u.Submissions.find(p=>p.FormUUID===l.value.FormUUID),y=u.Submissions.find(p=>{var w;return((w=p.Form)==null?void 0:w.Type)===oe.FORM_TYPE_ACCOMMODATION}),k=u.Submissions.find(p=>{var w;return((w=p.Form)==null?void 0:w.Type)===oe.FORM_TYPE_DEALER}),$=u.Submissions.find(p=>{var w;return((w=p.Form)==null?void 0:w.Type)===oe.FORM_TYPE_BADGE}),Y=b(i==null?void 0:i.Form,y==null?void 0:y.Form,k==null?void 0:k.Form,$==null?void 0:$.Form);Xe.push(Y)})})},r=({callback:t})=>{var u;(u=S.value)==null||u.validate().then(a=>{a.valid?g.saveSubmission(l.value).then(i=>{i?setTimeout(()=>{T(i,t,1)},1e3):t&&t("Failed to process request")}).catch(()=>{t&&t("Failed to process request")}):t&&t("Errors in form detected, please review and try again.")})},T=(t,u,a=1)=>{g.checkSubmission(t).then(i=>{if(i)if(i.Ready&&i.Submission){if(I.value=!1,l.value=i.Submission,u&&u("Saved"),e.admin)f("close");else if(i.Forms&&i.Forms.length>0){const y=i.Forms.find(w=>w.FormUUID===l.value.FormUUID),k=i.Forms.find(w=>w.Type===oe.FORM_TYPE_ACCOMMODATION),$=i.Forms.find(w=>w.Type===oe.FORM_TYPE_DEALER),Y=i.Forms.find(w=>w.Type===oe.FORM_TYPE_BADGE),p=b(y,k,$,Y);Xe.push(p)}}else{if(a>5&&(I.value=!0),a>10&&(h.value=!0),a>20&&(D.value=!0),a>30&&(d.value=!0),a>60){u&&(I.value=!1,h.value=!1,D.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{T(t,u,a+1)},a<20?1e3*a:2e4)}else u&&(I.value=!1,h.value=!1,D.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."))}).catch(()=>{u&&(I.value=!1,h.value=!1,D.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."))})};return(t,u)=>{const a=Ul("router-link");return o(),C(Rl,null,{default:c(()=>[s(Jl,{ref_key:"formValidator",ref:S,onSubmit:u[1]||(u[1]=ll(()=>{},["prevent"]))},{default:c(()=>[n.value.Heading?(o(),M("h1",Dt,H(n.value.Heading),1)):L("",!0),t.admin?(o(),M("h2",kt," (Admin Mode) ")):L("",!0),n.value.Description?(o(),M("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:n.value.Description},null,8,Et)):L("",!0),(o(!0),M(P,null,z(n.value.Sections,i=>(o(),C(Kl,{key:`section_${n.value.ID}.${i.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:c(()=>[i.Heading?(o(),C(Hl,{key:0},{default:c(()=>[N(H(i.Heading),1)]),_:2},1024)):L("",!0),i.Description?(o(),C(Gl,{key:1,class:"text-wrap"},{default:c(()=>[G("div",{innerHTML:i.Description},null,8,St)]),_:2},1024)):L("",!0),i.Fields?(o(),C(Yl,{key:2},{default:c(()=>[(o(!0),M(P,null,z(i.Fields,y=>(o(),M(P,{key:`field_${n.value.ID}.${i.ID}.${y.ID}`},[y.Field?(o(),C(Z,{key:0},{default:c(()=>[s(x,null,{default:c(()=>[t.editable?(o(),C(Qe,{key:0,field:y.Field,modelValue:y.Value,"onUpdate:modelValue":k=>y.Value=k,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:y.Required,"min-length":y.MinLength,"max-length":y.MaxLength,"persistent-hint":!0,onChange:k=>v(i.SectionUUID,y.SectionFieldUUID,y.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),C(Qe,{key:1,field:y.Field,modelValue:y.Value,"onUpdate:modelValue":k=>y.Value=k,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:y.Required,"min-length":y.MinLength,"max-length":y.MaxLength,"persistent-hint":!0,disabled:"",onChange:k=>v(i.SectionUUID,y.SectionFieldUUID,y.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),t.preview?L("",!0):(o(),M(P,{key:3},[s(Z,null,{default:c(()=>[t.admin?(o(),C(x,{key:1,class:"text-right"},{default:c(()=>[s(ue,{color:"red",onClick:u[0]||(u[0]=i=>f("close"))},{default:c(()=>[N("Cancel")]),_:1})]),_:1})):(o(),C(x,{key:0,class:"text-right"},{default:c(()=>[s(a,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:c(()=>[s(ue,{color:"red"},{default:c(()=>[N("Close")]),_:1})]),_:1})]),_:1})),t.admin||t.editable?(o(),C(x,{key:2,class:"text-left"},{default:c(()=>[s(je,{onClick:r,type:"submit"})]),_:1})):(o(),C(x,{key:3,class:"text-left"},{default:c(()=>[s(je,{onClick:E,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),I.value?(o(),C(Z,{key:0},{default:c(()=>[s(x,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:c(()=>[N(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),h.value?(o(),C(Z,{key:1},{default:c(()=>[s(x,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:c(()=>[N(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),D.value?(o(),C(Z,{key:2},{default:c(()=>[s(x,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:c(()=>[N(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):L("",!0),d.value?(o(),C(Z,{key:3},{default:c(()=>[s(x,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:c(()=>[N(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{zt as F,ul as T,We as V,Qe as _,Xt as a,Wt as b,X as c,Qt as d,jt as e,jl as f,Jt as m,Ee as s,Wl as u};
