import{p as Ot,n as ht,e as se,t as ve,c as ta,G as it,v as t,H as F,x as Re,I as me,a0 as fe,a1 as Pe,r as T,K as Ue,M as v,N as G,O as l,a3 as ye,W as H,a2 as Qe,a4 as le,S as q,w as re,X as k,Q as V,V as C,P as w,_ as Je,ac as aa,ad as la,E as Ke,k as na,f as oa,d as ia,o as sa,ae as ft,R as ua,Y as bt,Z as Mt,af as ra,ag as He,z as da,u as ma,ah as va,A as ca,B as fa,D as Ua,s as _a,ai as qe,aj as Ut,a7 as Aa,a6 as Ta,U as ga}from"./index-3d3033cb.js";import{e as Ea,T as Sa,V as pa,d as ya,c as Ia}from"./FormRenderer.vue_vue_type_style_index_0_lang-04a74549.js";import{a as Da,F as Se}from"./form-29fd1dbb.js";import{_ as Fe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-8b2afdb0.js";import{m as Ra,k as Ca,l as Oa,n as ha,o as ba,p as Ma,q as Va,u as ka,r as La,s as Na,t as Pa,v as Fa,w as wa,x as $a,y as Ba,z as _t,A as At,B as Tt,a as xa,_ as Vt,f as gt,c as kt,d as Lt,e as Nt,b as Pt,V as Ft,g as Ga,h as Ya,i as Ha,j as qa}from"./VWindowItem-c125def7.js";import{V as Z,a as L}from"./VRow-e78b5129.js";import{V as ce}from"./VTextField-7fe7ed85.js";import{V as de}from"./copyToClipboard-99bb449b.js";import{u as wt,j as pe,V as ja,b as za,m as Qa,k as Ka,c as Wa,d as Ja,l as Xa,a as Za,n as el}from"./VContainer-97109729.js";import{V as $t,u as Xe}from"./VCheckbox-61a0628a.js";import{v as Ne}from"./v4-a960c1f4.js";import{h as je,b as tl,a as al,c as ll,d as Et,P as st,u as Bt}from"./useDisplayTransactions-14b87657.js";import{V as ze,a as Be}from"./VList-63ce3273.js";import{V as W,a as nl,u as ol}from"./VBtn-db8bc170.js";import{b as il,c as xt,d as St}from"./submission-6136b51d.js";import{V as sl}from"./VAvatar-795aa2c5.js";import{s as ul}from"./sortSubmissions-8ed80f07.js";import{V as We,a as rl}from"./scopeId-710c6770.js";import{_ as ut,V as Gt}from"./SaveButton.vue_vue_type_script_setup_true_lang-380ca4d2.js";import{V as dl}from"./VForm-c3a531a3.js";import{V as ml,e as pt,c as vl}from"./VCard-6ad22e53.js";import{G as cl}from"./group-d2a77946.js";import{C as fl}from"./canDo-2c299106.js";import{G as Ul}from"./userData-04231d6b.js";import{V as _l,a as Al}from"./VAlert-fc2a3ebb.js";import{V as Tl}from"./forwardRefs-e3bfc37e.js";import{u as nt}from"./nil-d01db1aa.js";import{V as yt,a as gl}from"./VToolbar-31d02f7d.js";import{V as It,a as El}from"./VTable-b41255aa.js";import{V as Sl}from"./VDialog-0492d077.js";import"./index-26b71cef.js";import"./VTextarea-4294195e.js";import"./VChip-db38bdfa.js";import"./VToolbarItems-534f2f4c.js";import"./VDivider-d37f5730.js";import"./createSimpleFunctional-28d59762.js";var Yt=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(Yt||{});const pl=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var xe=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(xe||{});const yl=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var K=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_PAYMENT_STATUS="META_DATA_SOURCE_PAYMENT_STATUS",e.META_DATA_SOURCE_REGISTRATION_ACTIONS="META_DATA_SOURCE_REGISTRATION_ACTIONS",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(K||{});const Il=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Actions",value:"META_DATA_SOURCE_REGISTRATION_ACTIONS"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Payment Status",value:"META_DATA_SOURCE_PAYMENT_STATUS"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var ae=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(ae||{});const Dl=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],Rl=e=>{switch(e){case"EMAIL_STATUS_QUEUED":return"Queued";case"EMAIL_STATUS_QUEUE_ERROR":return"Processing";case"EMAIL_STATUS_QUEUE_FAILURE":return"Internal Error";case"EMAIL_STATUS_SENDING":return"Sending";case"EMAIL_STATUS_SENT":return"Sent";case"EMAIL_STATUS_SEND_ERROR":return"Failed to Send"}return"Unknown"},Cl=Ot({itemsLength:{type:[Number,String],required:!0},...Ra(),...Ca(),...Oa()},"VDataTableServer"),Ol=ht()({name:"VDataTableServer",props:Cl(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,S)=>!0},setup(e,S){let{emit:o,slots:i}=S;const{groupBy:n}=ha(e),{sortBy:r,multiSort:a,mustSort:s}=ba(e),{page:c,itemsPerPage:I}=Ma(e),A=se(()=>parseInt(e.itemsLength,10)),{columns:E,headers:m}=Va(e,{groupBy:n,showSelect:ve(e,"showSelect"),showExpand:ve(e,"showExpand")}),{items:_}=ka(e,E),{toggleSort:g}=La({sortBy:r,multiSort:a,mustSort:s,page:c}),{opened:$,isGroupOpen:p,toggleGroup:D,extractRows:b}=Na({groupBy:n,sortBy:r}),{pageCount:M,setItemsPerPage:X}=Pa({page:c,itemsPerPage:I,itemsLength:A}),{flatItems:j}=Fa(_,n,$),{isSelected:oe,select:J,selectAll:u,toggleSelect:f,someSelected:h,allSelected:R}=wa(e,{allItems:_,currentPage:_}),{isExpanded:N,toggleExpand:Q}=$a(e),ie=se(()=>b(_.value));Ba({page:c,itemsPerPage:I,sortBy:r,groupBy:n,search:ve(e,"search")}),ta("v-data-table",{toggleSort:g,sortBy:r}),it({VDataTableRows:{hideNoData:ve(e,"hideNoData"),noDataText:ve(e,"noDataText"),loading:ve(e,"loading"),loadingText:ve(e,"loadingText")}});const ee=se(()=>({page:c.value,itemsPerPage:I.value,sortBy:r.value,pageCount:M.value,toggleSort:g,setItemsPerPage:X,someSelected:h.value,allSelected:R.value,isSelected:oe,select:J,selectAll:u,toggleSelect:f,isExpanded:N,toggleExpand:Q,isGroupOpen:p,toggleGroup:D,items:ie.value,groupedItems:j.value,columns:E.value,headers:m.value}));wt(()=>{const[be]=_t.filterProps(e),[Me]=At.filterProps(e),[Ve]=Tt.filterProps(e),[_e]=It.filterProps(e);return t(It,Re({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},_e),{top:()=>{var ne;return(ne=i.top)==null?void 0:ne.call(i,ee.value)},default:()=>{var ne,Ie,De,Ce;return i.default?i.default(ee.value):t(F,null,[(ne=i.colgroup)==null?void 0:ne.call(i,ee.value),t("thead",{class:"v-data-table__thead",role:"rowgroup"},[t(At,Re(Me,{sticky:e.fixedHeader}),i)]),(Ie=i.thead)==null?void 0:Ie.call(i,ee.value),t("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[i.body?i.body(ee.value):t(Tt,Re(Ve,{items:j.value}),i)]),(De=i.tbody)==null?void 0:De.call(i,ee.value),(Ce=i.tfoot)==null?void 0:Ce.call(i,ee.value)])},bottom:()=>i.bottom?i.bottom(ee.value):t(_t,be,{prepend:i["footer.prepend"]})})})}}),hl=me({__name:"EditAdminLayout",props:fe({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["save"],["update:modelValue"]),setup(e,{emit:S}){const o=Pe(e,"modelValue"),i=T(Ue(e.layout)),n=T([]),r=ye(),a=({callback:A})=>{const E=()=>{A&&A("Failed to Save Layout")},m=()=>{A&&A("Layout Saved")};r.saveAdminLayout(i.value).then(_=>{_?(m(),S("save",_)):E()}).catch(()=>{E()})},s=()=>({ID:0,LayoutPanelUUID:Ne(),AdminLayoutID:i.value.ID,AdminLayoutUUID:i.value.AdminLayoutUUID,Name:"",Order:i.value.Panels.length+1,Items:[],RequiredFormType:Se.FORM_TYPE_NIL,RequiredGroupMemberships:[],RequiredRegistrationTags:[]}),c=A=>()=>({ID:0,LayoutItemUUID:Ne(),LayoutPanelID:A.ID,LayoutPanelUUID:A.LayoutPanelUUID,Label:"",SourceType:xe.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:A.Items.length+1,DefaultSort:!1}),I=A=>{const E=n.value.find(m=>m.value===A.SectionFieldUUID);E&&(A.SectionFieldID=E.object.ID,A.SectionField=E.object)};return r.getConventionForms(e.layout.ConventionUUID).then(A=>{A.forEach(E=>E.Sections.forEach(m=>m.Fields&&n.value.push(...m.Fields.map(_=>{var $;return{title:`${E.Name} - ${m.Name} - ${($=_.Field)==null?void 0:$.Name}`,value:_.SectionFieldUUID,object:_}})))),n.value.sort(Ea("title"))}),(A,E)=>(v(),G(Fe,{modelValue:o.value,"onUpdate:modelValue":E[3]||(E[3]=m=>o.value=m),onSave:a,title:A.title,color:"primary",fullscreen:!0,persistent:!0},{default:l(()=>[t(pe,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(ce,{modelValue:i.value.Name,"onUpdate:modelValue":E[0]||(E[0]=m=>i.value.Name=m),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"6"},{default:l(()=>[t(de,{modelValue:i.value.Type,"onUpdate:modelValue":E[1]||(E[1]=m=>i.value.Type=m),label:"Layout Type",items:H(pl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(gt,{modelValue:i.value.Panels,"onUpdate:modelValue":E[2]||(E[2]=m=>i.value.Panels=m),"new-item":s,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Qe({_:2},[le(i.value.Panels,(m,_)=>({name:`panel_${_}`,fn:l(()=>[t(pe,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(ce,{modelValue:m.Name,"onUpdate:modelValue":g=>m.Name=g,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(L,{cols:"12",sm:"6"},{default:l(()=>[t(de,{modelValue:m.RequiredFormType,"onUpdate:modelValue":g=>m.RequiredFormType=g,items:H(Da),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(xa,{label:"Required Groups",variant:"outlined",modelValue:m.RequiredGroupMemberships,"onUpdate:modelValue":g=>m.RequiredGroupMemberships=g,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024),t(L,{cols:"12",sm:"6"},{default:l(()=>[t(Vt,{label:"Registration Tags",variant:"outlined",modelValue:m.RequiredRegistrationTags,"onUpdate:modelValue":g=>m.RequiredRegistrationTags=g,convention:i.value.ConventionUUID,chips:"",clearable:"",hint:"Tags that a registration must have to appear in results. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(gt,{modelValue:m.Items,"onUpdate:modelValue":g=>m.Items=g,"new-item":c(m),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Qe({_:2},[le(m.Items,(g,$)=>({name:`item_${$}`,fn:l(()=>[t(pe,{class:"px-0 mx-0",fluid:!0},{default:l(()=>[t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(ce,{modelValue:g.Label,"onUpdate:modelValue":p=>g.Label=p,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(de,{modelValue:g.SourceType,"onUpdate:modelValue":p=>g.SourceType=p,label:"Source Type",items:H(yl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(L,{cols:"12",sm:"6"},{default:l(()=>[g.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(v(),G(de,{key:0,modelValue:g.SectionFieldUUID,"onUpdate:modelValue":p=>g.SectionFieldUUID=p,label:"Form Data",items:n.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:p=>I(g)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):g.SourceType==="LAYOUT_ITEM_SOURCE_META"?(v(),G(de,{key:1,modelValue:g.MetaField,"onUpdate:modelValue":p=>g.MetaField=p,label:"Miscellaneous Data",items:H(Il),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):g.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(v(),G(de,{key:2,modelValue:g.UserField,"onUpdate:modelValue":p=>g.UserField=p,label:"User Profile Data",items:H(Dl),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):q("",!0)]),_:2},1024)]),_:2},1024),t(Z,null,{default:l(()=>[t(L,null,{default:l(()=>[t($t,{modelValue:g.DefaultSort,"onUpdate:modelValue":p=>g.DefaultSort=p,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),bl=k("br",null,null,-1),Ml=k("h3",null,"Assigned Accommodation",-1),Vl=k("br",null,null,-1),kl=k("br",null,null,-1),Ll=k("h3",null,"Accommodation Preferences",-1),Nl=k("h3",null,"Selected Tickets",-1),Pl=k("br",null,null,-1),Fl=me({__name:"EditAccommodationAssignmentDialog",props:fe({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["update:field"],["update:modelValue"]),setup(e,{emit:S}){const o=e,{convention:i,registration:n,title:r=""}=o,a=ye(),s=Pe(e,"modelValue"),c=T({capacity:{max:u=>{var R;const f=M.value.find(N=>N.room.RoomUUID===u);return!f||f.room.MaximumCapacity===0?!0:(((R=m.value)==null?void 0:R.Members.length)||0)<=f.room.MaximumCapacity||"Too many people in the group for this room"},min:u=>{var R;const f=M.value.find(N=>N.room.RoomUUID===u);return!f||f.room.MinimumCapacity===0?!0:(((R=m.value)==null?void 0:R.Members.length)||0)>=f.room.MinimumCapacity||"Not enough people in the group for this room"}}}),I=T([]),A=Xe(o,S,void 0,void 0,"field"),E=T(Ue(A.value));re(A,()=>{E.value=Ue(A.value)});const m=T(),_=T(""),g=T(""),$=T([]),p=T({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),D=async()=>{var R;const u=await a.getConventionAvailableAccommodation(i.ConventionUUID);u&&(I.value=u);const f=await a.getRegistrationGroup(n.RegistrationUUID||"");f&&(m.value=f);const h=await a.getConventionTickets(i.ConventionUUID);h&&($.value=h);try{p.value=JSON.parse(((R=m.value)==null?void 0:R.TicketData)||"")}catch{}};re(_,()=>{g.value=M.value.length>0?M.value[0].value:""});const b=se(()=>{const u=X.value;return I.value.map(f=>{let h;return u.forEach(R=>{f.Costs.forEach(N=>{N.DateStart===(R==null?void 0:R.DateStart)&&N.DateEnd===R.DateEnd&&(h===void 0||h>N.Availability)&&(h=N.Availability)})}),{label:`${f.Name}`,title:`${f.Name} (${h} Available)`,value:f.AccommodationUUID}})}),M=se(()=>{const u=X.value,f=I.value.find(h=>h.AccommodationUUID===_.value);return(f==null?void 0:f.Pool.map(h=>{var N,Q;let R;return u.forEach(ie=>{h.Costs.forEach(ee=>{ee.DateStart===(ie==null?void 0:ie.DateStart)&&ee.DateEnd===ie.DateEnd&&(R===void 0||R>ee.Availability)&&(R=ee.Availability)})}),{label:`${(N=h.Venue)==null?void 0:N.Name} - ${h.Name}`,title:`${(Q=h.Venue)==null?void 0:Q.Name} - ${h.Name} (${R} Available)`,value:h.RoomUUID,room:h}}))||[]}),X=se(()=>[...p.value.Ticket,...p.value.AddonsChecked,...p.value.ComponentsChecked].map(u=>$.value.find(f=>f.TicketUUID===u)).filter(u=>u!==void 0&&u.RequiresAccommodation)),j=u=>{var f;a.assignAccommodation(((f=m.value)==null?void 0:f.Registration.RegistrationUUID)||"",_.value,g.value,!1).then(h=>{h?(D(),u&&u("Room Assigned")):u&&u("Room not assigned")}).catch(()=>{u&&u("Room not assigned")})},oe=u=>{var f,h;(f=m.value)!=null&&f.Registration.AllocationUUID?a.deleteAllocation(((h=m.value)==null?void 0:h.Registration.AllocationUUID)||"").then(R=>{R?(D(),u&&u("Allocation Deleted")):u&&u("Allocation not deleted")}).catch(()=>{u&&u("Allocation not deleted")}):u&&u("Nothing to Delete")},J=u=>{var h,R;const f=(h=I.value.find(N=>N.AccommodationUUID===u.AccommodationUUID))==null?void 0:h.Pool;if(f){const N=f.find(Q=>Q.RoomUUID===u.RoomUUID);if(N)return`${(R=N.Venue)==null?void 0:R.Name} - ${N.Name}`}return""};return D(),(u,f)=>{var h;return v(),G(Fe,{modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=R=>s.value=R),title:H(r),color:"primary","show-close-action":!0,"show-delete-action":!!((h=m.value)!=null&&h.Registration.Allocation),"show-save-action":!!g.value,"save-button-label":"Assign Room",onDelete:oe,onSave:j,fullscreen:!0,persistent:!0},{default:l(()=>[t(pe,{class:"pa-0",fluid:!0},{default:l(()=>[t(Z,null,{default:l(()=>{var R;return[t(L,{cols:"12",md:"6"},{default:l(()=>{var N,Q;return[k("h3",null,"Group Members ("+V((N=m.value)==null?void 0:N.Members.length)+")",1),(v(!0),C(F,null,le((Q=m.value)==null?void 0:Q.Members,ie=>(v(),C(F,{key:ie.UUID},[w(" #"+V(ie.Reference)+" "+V(ie.Name),1),bl],64))),128))]}),_:1}),(R=m.value)!=null&&R.Registration.Allocation?(v(),G(L,{key:0,cols:"12",md:"6"},{default:l(()=>[Ml,t(ze,null,{default:l(()=>{var N;return[(v(!0),C(F,null,le((N=m.value)==null?void 0:N.Registration.Allocation.Periods,Q=>(v(),G(Be,{key:Q.AllocationPeriodUUID},{default:l(()=>{var ie;return[w(V((ie=I.value.find(ee=>ee.AccommodationUUID===Q.AccommodationUUID))==null?void 0:ie.Name)+" ",1),Vl,w(" "+V(J(Q))+" ",1),kl,k("small",null,"("+V(H(je)(Q.DateStart))+" - "+V(H(je)(Q.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):q("",!0)]}),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12",md:"6"},{default:l(()=>[u.selectedAccommodation.length?(v(),C(F,{key:0},[Ll,t(ze,null,{default:l(()=>[(v(!0),C(F,null,le(u.selectedAccommodation,(R,N)=>(v(),G(Be,{key:R.AccommodationUUID},{default:l(()=>[w(V(N+1)+". "+V(R.Name),1)]),_:2},1024))),128))]),_:1})],64)):q("",!0)]),_:1}),t(L,{cosl:"12",md:"6"},{default:l(()=>[Nl,t(ze,null,{default:l(()=>[(v(!0),C(F,null,le(X.value,R=>(v(),G(Be,{key:R==null?void 0:R.TicketUUID},{default:l(()=>[w(V(R.Name)+" ",1),Pl,k("small",null,"("+V(H(je)(R.DateStart))+" - "+V(H(je)(R.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12",md:"6"},{default:l(()=>[t(de,{modelValue:_.value,"onUpdate:modelValue":f[0]||(f[0]=R=>_.value=R),items:b.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),t(L,{cols:"12",md:"6"},{default:l(()=>[t(de,{modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=R=>g.value=R),items:M.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[c.value.capacity.min,c.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),wl={key:0,class:"accommodationList"},$l={key:0,class:"text-orange-darken-2"},Bl=me({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},forms:{},registration:{},tickets:{default:()=>[]},value:{default:""},venues:{}},setup(e){const S=T(!1),o=se(()=>{if(!e.value)return[];const n=JSON.parse(e.value),r=e.accommodations.filter(a=>n.includes(a.AccommodationUUID)).sort((a,s)=>{const c=n.findIndex(A=>A===a.AccommodationUUID),I=n.findIndex(A=>A===s.AccommodationUUID);return c>I?1:-1});return Ue(r)}),i=se(()=>{let n;const r=e.forms.find(a=>a.Sections.find(s=>{var c;return(c=s.Fields)==null?void 0:c.find(I=>{var A;if(((A=I.Field)==null?void 0:A.Type)==="TICKET")return n=I,!0})}));return n?!!e.registration.Submissions.find(a=>{if(a.FormUUID==(r==null?void 0:r.FormUUID))return a.Data.find(s=>{if(s.SectionFieldUUID==(n==null?void 0:n.SectionFieldUUID)){const c=JSON.parse(s.Data);return e.tickets.filter(I=>I.RequiresAccommodation).find(I=>c.Ticket.includes(I.TicketUUID)||c.AddonsChecked.includes(I.TicketUUID)||c.ComponentsChecked.includes(I.TicketUUID))}})}):!1});return(n,r)=>i.value?(v(),C(F,{key:0},[n.value?(v(),C("ol",wl,[(v(!0),C(F,null,le(o.value,a=>(v(),C("li",{key:a.AccommodationUUID},[n.registration&&n.registration.Allocation&&n.registration.Allocation.Periods.find(s=>s.AccommodationUUID===a.AccommodationUUID)?(v(),C("strong",$l,V(a.Name),1)):(v(),C(F,{key:1},[w(V(a.Name),1)],64))]))),128))])):q("",!0),t(W,{onClick:r[0]||(r[0]=a=>S.value=!0),variant:"flat",color:"success"},{default:l(()=>[w("Assign Accommodation")]),_:1}),n.convention&&S.value?(v(),G(Fl,{key:1,modelValue:S.value,"onUpdate:modelValue":r[1]||(r[1]=a=>S.value=a),title:"Accommodation Allocation",convention:n.convention,registration:n.registration,"selected-accommodation":o.value},null,8,["modelValue","convention","registration","selected-accommodation"])):q("",!0)],64)):q("",!0)}});const xl=Je(Bl,[["__scopeId","data-v-7a102d46"]]),Gl={key:0,class:"addonList"},Yl={key:0},Hl={key:0},ql=me({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const S=se(()=>{if(!e.value)return;const o=JSON.parse(e.value),i=Object.keys(o),n=Ue(e.extras);return n.forEach(r=>{r.Options=r.Options.filter(a=>i.includes(a.OptionUUID)?(a.Choices=a.Choices.filter(s=>s.TagUUID===o[a.OptionUUID].choiceId),o[a.OptionUUID].checked):!1)}),n.filter(r=>r.Options.length>0),n});return(o,i)=>o.value?(v(),C("ul",Gl,[(v(!0),C(F,null,le(S.value,n=>(v(),C(F,{key:n.ExtraUUID},[n.Options.length?(v(),C("li",Yl,[k("strong",null,V(n.Name),1),k("ul",null,[(v(!0),C(F,null,le(n.Options,r=>(v(),C("li",{key:r.OptionUUID},[w(V(r.Name)+" ",1),r.Choices.length==1?(v(),C("small",Hl,"("+V(r.Choices[0].Title)+")",1)):q("",!0)]))),128))])])):q("",!0)],64))),128))])):q("",!0)}});const jl=Je(ql,[["__scopeId","data-v-55786e01"]]),zl={key:0},Ql=me({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const S=se(()=>{if(!e.value)return;const o=JSON.parse(e.value);return Object.entries(o).filter(([,i])=>i).map(([i,n])=>e.interests.find(r=>r.InterestUUID===i)).filter(i=>i!==void 0)});return(o,i)=>o.value?(v(),C("ul",zl,[(v(!0),C(F,null,le(S.value,n=>(v(),C("li",{key:n.InterestUUID},V(n.Name),1))),128))])):q("",!0)}}),Kl=k("br",null,null,-1),Wl=k("small",null,"Options:",-1),Jl=k("br",null,null,-1),Xl=k("small",null,"Addons:",-1),Zl=me({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const S=se(()=>{if(!e.value)return;let o={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{o=JSON.parse(e.value),"ticket"in o&&(o.Ticket=o.ticket),"addonsChecked"in o&&(o.AddonsChecked=o.addonsChecked),"componentsChecked"in o&&(o.ComponentsChecked=o.componentsChecked)}catch{}return o.Ticket.filter(i=>{const n=e.tickets.find(r=>r.TicketUUID===i);return!(!n||n.Type!==Sa.TICKET_TYPE_TICKET)}).map(i=>{const n=e.tickets.find(a=>a.TicketUUID===i),r=Ue(n);return r.TicketComponents=n.TicketComponents.filter(a=>o.ComponentsChecked.includes(a.TicketUUID)),r.AddonTickets=n.AddonTickets.filter(a=>o.AddonsChecked.includes(a.TicketUUID)),r})});return(o,i)=>o.value?(v(!0),C(F,{key:0},le(S.value,n=>(v(),C("div",{key:n.TicketUUID},[k("strong",null,V(n.Name),1),n.TicketComponents.length>0?(v(),C(F,{key:0},[Kl,Wl,w("  "),(v(!0),C(F,null,le(n.TicketComponents,r=>(v(),C(F,{key:r.TicketUUID},[k("small",null,V(r.Name),1),w("  ")],64))),128))],64)):q("",!0),n.AddonTickets.length>0?(v(),C(F,{key:1},[Jl,Xl,w("  "),(v(!0),C(F,null,le(n.AddonTickets,r=>(v(),C("small",{key:r.TicketUUID},[w("("),k("em",null,V(r.Name),1),w(")")]))),128))],64)):q("",!0)]))),128)):q("",!0)}}),en={key:0,class:"text-blue text-center"},tn={key:1,class:"text-red text-center"},an={key:2,class:"text-orange text-center"},ln={key:3,class:"text-orange text-center"},nn={key:4,class:"text-orange text-center"},on={key:5,class:"text-orange text-center"},sn={key:6,class:"text-green text-center"},un={key:0},rn={key:0},dn=k("strong",null,"Total:",-1),mn=me({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},forms:{},item:{},interests:{},tickets:{},venues:{}},emits:["openActions","openPayments","openTags","reload","showForm"],setup(e,{emit:S}){const o=(a,s,c)=>{S("showForm",{registration:a,form:s,submission:c})},i=a=>{S("openActions",a)},n=a=>{S("openPayments",a)},r=a=>{S("openTags",a)};return(a,s)=>a.header.type==="ACCOMMODATION"&&a.accommodations.length>0&&a.item.raw[a.header.key]?(v(),G(xl,{key:0,value:a.item.raw[a.header.key].Data,accommodations:a.accommodations,convention:a.convention,forms:a.forms,tickets:a.tickets,venues:a.venues,registration:a.item.raw[a.header.key].Registration},null,8,["value","accommodations","convention","forms","tickets","venues","registration"])):a.header.type==="EXTRAS"&&a.extras.length>0?(v(),G(jl,{key:1,value:a.item.raw[a.header.key],extras:a.extras},null,8,["value","extras"])):a.header.type==="INTERESTS"&&a.interests.length>0?(v(),G(Ql,{key:2,value:a.item.raw[a.header.key],interests:a.interests},null,8,["value","interests"])):a.header.type==="TICKET"&&a.tickets.length>0?(v(),G(Zl,{key:3,value:a.item.raw[a.header.key],tickets:a.tickets},null,8,["value","tickets"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(v(!0),C(F,{key:4},le(a.item.raw[a.header.key],c=>(v(),C("ul",{key:c.Heading},[k("li",null,[k("strong",null,V(c.Heading)+": ",1),k("span",{class:aa(H(il)(c.Submission.Status))},V(H(xt)(c.Submission.Status)),3),t(W,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:I=>o(c.Registration,c.Form,c.Submission)},null,8,["onClick"])])]))),128)):a.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(v(),G(sl,{key:5,class:"rounded-circle",src:a.item.raw[a.header.key],height:"32",width:"32"},null,8,["src"])):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_PAYMENT_STATUS"?(v(),C(F,{key:6},[a.item.raw[a.header.key]=="NOT_REQUIRED"?(v(),C("div",en,"No Payment Requested")):a.item.raw[a.header.key]=="MISSING_REQUIRED"?(v(),C("div",tn,"Partner Payment Not Requested")):a.item.raw[a.header.key]=="AWAITING_PARTNER"?(v(),C("div",an,"Awaiting Partner Payment")):a.item.raw[a.header.key]=="ALL_REQUIRED"?(v(),C("div",ln,"Awaiting Payments")):a.item.raw[a.header.key]=="REQUIRED"?(v(),C("div",nn,"Awaiting Payment")):a.item.raw[a.header.key]=="ADDITIONAL_REQUIRED"?(v(),C("div",on,"Awaiting Additional Payments")):(v(),C("div",sn,"Completed"))],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_ACTIONS"?(v(),C(F,{key:7},[t(W,{icon:"mdi:mdi-email-fast",variant:"flat",onClick:s[0]||(s[0]=c=>i(a.item.raw[a.header.key]))}),t(W,{icon:"mdi:mdi-cash-multiple",variant:"flat",onClick:s[1]||(s[1]=c=>n(a.item.raw[a.header.key]))}),t(W,{icon:"mdi:mdi-tag-text",variant:"flat",onClick:s[2]||(s[2]=c=>r(a.item.raw[a.header.key]))})],64)):a.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(v(),C(F,{key:8},[a.item.raw[a.header.key].length===1?(v(),C("em",un," Not in a group ")):(v(),C(F,{key:1},[k("ul",null,[(v(!0),C(F,null,le(a.item.raw[a.header.key],c=>(v(),C("li",{key:c.UUID,class:"ml-0"},[w(" #"+V(c.Reference)+" : "+V(c.Name)+" ",1),c.IsLeader?(v(),C("strong",rn,"(Leader)")):q("",!0)]))),128))]),dn,w(" "+V(a.item.raw[a.header.key].length),1)],64))],64)):(v(),C(F,{key:9},[w(V(a.item.raw[a.header.key]),1)],64))}});var vn=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],cn=function(e){return vn.map(function(S){return S.toLowerCase()}).indexOf(e.toLowerCase())!==-1},fn=function(e,S,o){Object.keys(S).filter(cn).forEach(function(i){var n=S[i];typeof n=="function"&&(i==="onInit"?n(e,o):o.on(i.substring(2),function(r){return n(r,o)}))})},Un=function(e,S,o,i){var n=e.modelEvents?e.modelEvents:null,r=Array.isArray(n)?n.join(" "):n;re(i,function(a,s){o&&typeof a=="string"&&a!==s&&a!==o.getContent({format:e.outputFormat})&&o.setContent(a)}),o.on(r||"change input undo redo",function(){S.emit("update:modelValue",o.getContent({format:e.outputFormat}))})},_n=function(e,S,o,i,n,r){i.setContent(r()),o.attrs["onUpdate:modelValue"]&&Un(S,o,i,n),fn(e,o.attrs,i)},Dt=0,Ht=function(e){var S=Date.now(),o=Math.floor(Math.random()*1e9);return Dt++,e+"_"+o+Dt+String(S)},An=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Rt=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},Tn=function(e,S){return Rt(e).concat(Rt(S))},gn=function(e){return e==null},Ct=function(){return{listeners:[],scriptId:Ht("tiny-script"),scriptLoaded:!1}},En=function(){var e=Ct(),S=function(n,r,a,s){var c=r.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=n,c.src=a;var I=function(){c.removeEventListener("load",I),s()};c.addEventListener("load",I),r.head&&r.head.appendChild(c)},o=function(n,r,a){e.scriptLoaded?a():(e.listeners.push(a),n.getElementById(e.scriptId)||S(e.scriptId,n,r,function(){e.listeners.forEach(function(s){return s()}),e.scriptLoaded=!0}))},i=function(){e=Ct()};return{load:o,reinitialize:i}},Sn=En(),pn=function(){return typeof window<"u"?window:global},he=function(){var e=pn();return e&&e.tinymce?e.tinymce:null},yn={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},Te=globalThis&&globalThis.__assign||function(){return Te=Object.assign||function(e){for(var S,o=1,i=arguments.length;o<i;o++){S=arguments[o];for(var n in S)Object.prototype.hasOwnProperty.call(S,n)&&(e[n]=S[n])}return e},Te.apply(this,arguments)},In=function(e,S,o,i){return e(i||"div",{id:S,ref:o})},Dn=function(e,S,o){return e("textarea",{id:S,visibility:"hidden",ref:o})},ot={selector:void 0,target:void 0},Rn=me({props:yn,setup:function(e,S){var o=e.init?Te(Te({},e.init),ot):Te({},ot),i=la(e),n=i.disabled,r=i.modelValue,a=i.tagName,s=T(null),c=null,I=e.id||Ht("tiny-vue"),A=e.init&&e.init.inline||e.inline,E=!!S.attrs["onUpdate:modelValue"],m=!0,_=e.initialValue?e.initialValue:"",g="",$=function(b){return E?function(){return r!=null&&r.value?r.value:""}:function(){return b?_:g}},p=function(){var b=$(m),M=Te(Te({},o),{readonly:e.disabled,target:s.value,plugins:Tn(o.plugins,e.plugins),toolbar:e.toolbar||o.toolbar,inline:A,setup:function(X){c=X,X.on("init",function(j){return _n(j,e,S,X,r,b)}),typeof o.setup=="function"&&o.setup(X)}});An(s.value)&&(s.value.style.visibility=""),he().init(M),m=!1};re(n,function(b){var M;c!==null&&(typeof((M=c.mode)===null||M===void 0?void 0:M.set)=="function"?c.mode.set(b?"readonly":"design"):c.setMode(b?"readonly":"design"))}),re(a,function(b){var M;E||(g=c.getContent()),(M=he())===null||M===void 0||M.remove(c),Ke(function(){return p()})}),na(function(){if(he()!==null)p();else if(s.value&&s.value.ownerDocument){var b=e.cloudChannel?e.cloudChannel:"6",M=e.apiKey?e.apiKey:"no-api-key",X=gn(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(M,"/tinymce/").concat(b,"/tinymce.min.js"):e.tinymceScriptSrc;Sn.load(s.value.ownerDocument,X,p)}}),oa(function(){he()!==null&&he().remove(c)}),A||(ia(function(){m||p()}),sa(function(){var b;E||(g=c.getContent()),(b=he())===null||b===void 0||b.remove(c)}));var D=function(b){var M;g=c.getContent(),(M=he())===null||M===void 0||M.remove(c),o=Te(Te(Te({},o),b),ot),Ke(function(){return p()})};return S.expose({rerender:D,getEditor:function(){return c}}),function(){return A?In(ft,I,s,e.tagName):Dn(ft,I,s)}}});const Cn=["colspan"],On=k("strong",null,"E-Mail Content",-1),hn=["innerHTML"],qt=me({__name:"Communications",props:{hideHistory:{type:Boolean,default:!1},registration:{},showEditor:{type:Boolean}},emits:["close-editor"],setup(e,{emit:S}){const o=ye(),i=T([]),n=T({From:"",Subject:"",HTML:""}),r=T(""),a=T(""),s=T(""),c=T(!1),I=T([]),A=T([]),E=T([{key:"CreatedAt",title:"Date"},{key:"Subject",title:"Subject"},{key:"User.DisplayName",title:"Sender"},{key:"Status",title:"Status"}]),m=T([{key:"CreatedAt",order:"asc"}]);re(n,p=>{s.value=p.From||s.value||"",a.value=p.Subject||a.value||"",r.value=p.HTML||r.value||""});const _=()=>{o.getRegistrationEmails(e.registration.RegistrationUUID).then(p=>{p&&(p.forEach(D=>{D.CreatedAt=tl(new Date(D.CreatedAt||"")),D.Status=Rl(D.Status),D.User||(D.User={ID:0,UserUUID:"",DisplayName:"System",Handle:"",Credentials:[],Additional:{FirstName:"",LastName:"",DOB:"",Email:""},Data:"",Groups:[],Tags:[]})}),A.value=p)})};_(),(()=>{o.getRegistrationEmailTemplates(e.registration.RegistrationUUID).then(p=>{p&&(i.value=p)})})();const $=({callback:p})=>{o.sendRegistrationEmail(e.registration.RegistrationUUID,s.value,a.value,r.value).then(D=>{D?p&&(p("Email Sent"),_(),setTimeout(()=>{c.value=!1},2e3)):p&&p("Not sent")}).catch(()=>{p&&p("Not sent")})};return(p,D)=>(v(),C(F,null,[p.showEditor?(v(),C(F,{key:0},[t(Z,null,{default:l(()=>[t(L,null,{default:l(()=>[t(pa,{items:i.value,"item-title":"Subject","return-object":"",label:"Template","hide-details":"",modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=b=>n.value=b),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12"},{default:l(()=>[t(ce,{modelValue:s.value,"onUpdate:modelValue":D[1]||(D[1]=b=>s.value=b),label:"From",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(L,{cols:"12"},{default:l(()=>[t(ce,{modelValue:a.value,"onUpdate:modelValue":D[2]||(D[2]=b=>a.value=b),label:"Subject",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(L,{cols:"12"},{default:l(()=>[t(H(Rn),{modelValue:r.value,"onUpdate:modelValue":D[3]||(D[3]=b=>r.value=b),"api-key":"g9sce3fktcgvk0i7sp96cahgyk4cos7q27es3ubnlal3xf3z"},null,8,["modelValue"])]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,null,{default:l(()=>[t(ut,{onClick:D[4]||(D[4]=b=>S("close-editor")),label:"Close E-mail Editor",color:"secondary","prepend-icon":"mdi:mdi-window-close"})]),_:1}),t(L,{class:"text-right"},{default:l(()=>[t(ut,{onClick:$,label:"Send",color:"error"})]),_:1})]),_:1})],64)):q("",!0),A.value.length&&!p.hideHistory?(v(),G(Ft,{key:1,class:"my-2"},{default:l(()=>[t(Pt,null,{default:l(()=>[t(kt,null,{default:l(()=>[w(" Email History ")]),_:1}),t(Lt,null,{default:l(()=>[t(H(Nt),{items:A.value,headers:E.value,"show-expand":!0,"item-value":"EmailUUID",expanded:I.value,"onUpdate:expanded":D[5]||(D[5]=b=>I.value=b),"sort-by":m.value,"onUpdate:sortBy":D[6]||(D[6]=b=>m.value=b)},{"expanded-row":l(({columns:b,item:M})=>[k("tr",null,[k("td",{colspan:b.length},[On,k("div",{class:"communicationsViewEmailPreview",innerHTML:M.raw.HTML},null,8,hn)],8,Cn)])]),"footer.prepend":l(()=>[t(W,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:_},{default:l(()=>[w("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"])]),_:1})]),_:1})]),_:1})):q("",!0)],64))}});const bn=me({__name:"StripeRefundPayment",props:fe({paymentTransaction:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["refunded"],["update:modelValue"]),setup(e,{emit:S}){const o=Pe(e,"modelValue"),i=ye(),n=T(!1),r=T("");let a=0;if(e.paymentTransaction.Data&&e.paymentTransaction.Data.PaymentIntent&&typeof e.paymentTransaction.Data.PaymentIntent=="object"){const m=e.paymentTransaction.Data.PaymentIntent;m&&(a=m.amount)}const s=T({Amount:a/100,Description:"",Reason:""}),c=T([{title:"Duplicate",value:"duplicate"},{title:"Fraudulent",value:"fraudulent"},{title:"Requested By Customer",value:"requested_by_customer"}]),I=T(!1);async function A(m){m.preventDefault(),I.value=!0,i.refundStripePayment(e.paymentTransaction.PaymentTransactionUUID,s.value).then(_=>{_?S("refunded",_):E("An unexpected error occurred.")}).catch(_=>{E("An error occurred processing the refund: "+_.toString())}),I.value=!1}const E=m=>{r.value=m,n.value=!0};return(m,_)=>(v(),G(Fe,{modelValue:o.value,"onUpdate:modelValue":_[7]||(_[7]=g=>o.value=g),title:"Refund a Stripe Payment",color:"blue-darken-4",persistent:""},{default:l(()=>[t(pe,{class:"pa-0"},{default:l(()=>[t(dl,{ref:"refundForm",id:"refund-form",onSubmit:_[4]||(_[4]=ua(g=>A(g),["prevent"]))},{default:l(()=>[t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"},{default:l(()=>[t(ce,{modelValue:s.value.Amount,"onUpdate:modelValue":_[0]||(_[0]=g=>s.value.Amount=g),modelModifiers:{number:!0},label:"Amount",prefix:"£",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"6",md:"8",lg:"9",xl:"10"},{default:l(()=>[t(de,{modelValue:s.value.Reason,"onUpdate:modelValue":_[1]||(_[1]=g=>s.value.Reason=g),modelModifiers:{number:!0},items:c.value,"item-title":"title","item-value":"value",label:"Stripe Refund Reason",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),t(L,{cols:"12"},{default:l(()=>[t(ce,{modelValue:s.value.Description,"onUpdate:modelValue":_[2]||(_[2]=g=>s.value.Description=g),modelModifiers:{number:!0},label:"Refund Description",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:l(()=>[t(W,{color:"error",class:"w-100",onClick:_[3]||(_[3]=g=>o.value=!1)},{default:l(()=>[w("Cancel")]),_:1})]),_:1}),t(We),t(L,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:l(()=>[t(W,{type:"submit",color:"success",class:"w-100"},Qe({default:l(()=>[w(" Issue Refund ")]),_:2},[I.value?{name:"prepend",fn:l(()=>[t(nl,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),t(Gt,{modelValue:n.value,"onUpdate:modelValue":_[6]||(_[6]=g=>n.value=g)},{actions:l(()=>[t(W,{variant:"text",onClick:_[5]||(_[5]=g=>n.value=!1)},{default:l(()=>[w(" Close ")]),_:1})]),default:l(()=>[w(V(r.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),Mn=["colspan"],Vn=k("strong",null,"Details",-1),kn=["innerHTML"],Ln=me({__name:"PaymentTransactions",props:{canEdit:{type:Boolean},hideHistory:{type:Boolean},updated:{},registration:{},showEditor:{type:Boolean}},emits:["close-editor","change"],setup(e,{emit:S}){const o=e;let{hideHistory:i=!1,registration:n,showEditor:r}=o;const a=ye(),s=T([]),c=T([]),I=T([{key:"CreatedAt",title:"Date"},{key:"Type",title:"Type"},{key:"Source",title:"Source"},{key:"Description",title:"Description"},{key:"Admin",title:"Admin"},{key:"Amount",title:"Amount"},{key:"Controls",title:""}]),A=T(!1),E=T(),m=T(!1),_=T(""),g=T([{key:"CreatedAt",order:"asc"}]),$=()=>({PaymentTransactionUUID:Ne(),Amount:0,Data:{},Description:"",ID:0,RegistrationID:n.ID,RegistrationUUID:n.RegistrationUUID,Source:Et.PAYMENT_TRANSACTION_SOURCE_NULL,Type:st.PAYMENT_TRANSACTION_TYPE_NULL}),p=T($()),{convertTransactions:D,getPaymentTransactionsDisplay:b}=Bt();re(o,()=>{i=o.hideHistory,n=o.registration,r=o.showEditor,b(n.RegistrationUUID).then(J=>{c.value=J})});const M=()=>{b(n.RegistrationUUID).then(J=>{c.value=J})};M();const X=()=>{a.saveRegistrationPaymentTransaction(p.value).then(J=>{J&&(D(J.PaymentTransactions),p.value=$(),S("close-editor"),S("change"))})},j=J=>{const u=c.value.find(f=>f.PaymentTransactionUUID===J);u&&(E.value=u.PaymentTransaction,A.value=!0)},oe=J=>{if(J)try{c.value=D(J.PaymentTransactions),E.value=void 0,A.value=!1,_.value="Refund Processed",m.value=!0,S("change")}catch(u){console.error(u)}};return(J,u)=>(v(),C(F,null,[H(r)?(v(),C(F,{key:0},[t(ml,null,{default:l(()=>[w(" Add Transaction ")]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"6"},{default:l(()=>[t(de,{items:H(al),"item-title":"title","item-value":"value",label:"Transaction Type",clearable:!0,"hide-details":"",modelValue:p.value.Type,"onUpdate:modelValue":u[0]||(u[0]=f=>p.value.Type=f),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),t(L,{cols:"12",sm:"6"},{default:l(()=>[t(de,{items:H(ll),"item-title":"title","item-value":"value",label:"Source",clearable:!0,"hide-details":"",modelValue:p.value.Source,"onUpdate:modelValue":u[1]||(u[1]=f=>p.value.Source=f),variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"8",md:"10"},{default:l(()=>[t(ce,{label:"Description","hide-details":"",modelValue:p.value.Description,"onUpdate:modelValue":u[2]||(u[2]=f=>p.value.Description=f),variant:"outlined"},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"4",md:"2"},{default:l(()=>[t(ce,{label:"Amount","prepend-inner-icon":"mdi:mdi-currency-gbp","hide-details":"",modelValue:p.value.Amount,"onUpdate:modelValue":u[3]||(u[3]=f=>p.value.Amount=f),modelModifiers:{number:!0},variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"3",md:"2",lg:"1"},{default:l(()=>[t(W,{class:"w-100",onClick:u[4]||(u[4]=f=>S("close-editor")),color:"warning"},{default:l(()=>[w("Cancel")]),_:1})]),_:1}),t(We),t(L,{cols:"12",sm:"6",md:"3",lg:"2",xl:"2"},{default:l(()=>[t(W,{class:"w-100",onClick:X,color:"primary"},{default:l(()=>[w("Submit Transaction")]),_:1})]),_:1})]),_:1})],64)):q("",!0),c.value.length&&!H(i)?(v(),G(Ft,{key:1,class:"my-2"},{default:l(()=>[t(Pt,null,{default:l(()=>[t(kt,null,{default:l(()=>[w(" Transaction History ")]),_:1}),t(Lt,null,{default:l(()=>[t(H(Nt),{items:c.value,headers:I.value,"show-expand":!1,"item-value":"PaymentTransactionUUID",expanded:s.value,"onUpdate:expanded":u[5]||(u[5]=f=>s.value=f),"sort-by":g.value,"onUpdate:sortBy":u[6]||(u[6]=f=>g.value=f),class:"transactionTable"},{"item.Controls":l(({item:f})=>[J.canEdit&&f.raw.PaymentTransaction.Source===H(Et).PAYMENT_TRANSACTION_SOURCE_STRIPE&&f.raw.PaymentTransaction.Type===H(st).PAYMENT_TRANSACTION_TYPE_PAYMENT?(v(),G(W,{key:0,icon:"mdi:mdi-credit-card-refund",variant:"text",size:"xs",onClick:h=>j(f.key)},null,8,["onClick"])):q("",!0)]),"expanded-row":l(({columns:f,item:h})=>[k("tr",null,[k("td",{colspan:f.length},[Vn,k("div",{innerHTML:h.raw.HTML},null,8,kn)],8,Mn)])]),"footer.prepend":l(()=>[t(W,{"prepend-icon":"mdi:mdi-refresh",color:"primary",class:"mr-4",onClick:M},{default:l(()=>[w("Refresh")]),_:1})]),_:1},8,["items","headers","expanded","sort-by"]),A.value&&E.value?(v(),G(bn,{key:0,modelValue:A.value,"onUpdate:modelValue":u[7]||(u[7]=f=>A.value=f),"payment-transaction":E.value,onRefunded:oe},null,8,["modelValue","payment-transaction"])):q("",!0),t(Gt,{modelValue:m.value,"onUpdate:modelValue":u[9]||(u[9]=f=>m.value=f)},{actions:l(()=>[t(W,{variant:"text",onClick:u[8]||(u[8]=f=>m.value=!1)},{default:l(()=>[w(" Close ")]),_:1})]),default:l(()=>[w(V(_.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})):q("",!0)],64))}});const Nn=(e=void 0,S)=>e===void 0?!1:fl(e,cl.GROUP_TYPE_CONVENTION,S.ConventionUUID,S).EditPaymentTransactions,Ze=e=>(bt("data-v-e32ba6e4"),e=e(),Mt(),e),Pn={class:"mb-4"},Fn={class:"v-row"},wn={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},$n={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Bn={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},xn={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},Gn=Ze(()=>k("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1)),Yn={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Hn=Ze(()=>k("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Applied Total ",-1)),qn={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},jn=Ze(()=>k("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Currently Paid ",-1)),zn={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},Qn=Ze(()=>k("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance ",-1)),Kn={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Wn=me({__name:"PaymentActions",props:fe({forms:{},registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["update:registration"],["update:modelValue"]),setup(e,{emit:S}){const o=e,i=Pe(e,"modelValue"),{registration:n}=o,r=T(!1),a=T(!1),s=T(),c=T([]),I=T(new Date().getTime()),A=T(!1),E=Xe(o,S,void 0,void 0,"registration"),m=T(Ue(E.value));re(E,()=>{m.value=Ue(E.value)});const _=ye();_.getConvention(n.ConventionUUID).then(D=>{D&&(A.value=Nn(Ul(),D))});const g=()=>{_.generateRegistrationCharges(n.RegistrationUUID,!1).then(D=>{D&&(c.value=D.PaymentTransactions,s.value=D.Registration,I.value=new Date().getTime())}).catch(()=>{})};g();const $=()=>{_.generateRegistrationCharges(n.RegistrationUUID,!0).then(D=>{D&&(c.value=D.PaymentTransactions,s.value=D.Registration,I.value=new Date().getTime())})},{totalCharges:p}=Bt();return(D,b)=>(v(),G(Fe,{modelValue:i.value,"onUpdate:modelValue":b[3]||(b[3]=M=>i.value=M),title:D.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:""},{default:l(()=>[t(pe,{class:"pa-0 mx-0",fluid:!0},{default:l(()=>[s.value?(v(),C(F,{key:0},[k("h3",Pn,"#"+V(s.value.Reference)+" "+V(s.value.User.DisplayName),1),k("dl",Fn,[(v(!0),C(F,null,le(c.value,M=>(v(),C(F,{key:M.PaymentTransactionUUID},[M.Type===H(st).PAYMENT_TRANSACTION_TYPE_CHARGE?(v(),C("dt",wn,[k("div",$n,V(M.Description.split(":")[0])+": ",1),k("div",Bn,V(M.Description.split(":")[1]),1)])):q("",!0),k("dd",xn," £"+V(M.Amount),1)],64))),128)),Gn,k("dd",Yn," £"+V(H(p)(c.value)),1),Hn,k("dd",qn," £"+V(s.value.Total),1),jn,k("dd",zn," £"+V(s.value.Paid),1),Qn,k("dd",Kn," £"+V(s.value.Total-s.value.Paid),1)]),t(Z,{class:"flex-row-reverse"},{default:l(()=>[t(L,{class:"text-right"},{default:l(()=>[t(W,{color:"primary",onClick:$},{default:l(()=>[w("Apply Charges")]),_:1})]),_:1}),!a.value&&A.value?(v(),G(L,{key:0},{default:l(()=>[t(W,{color:"secondary",onClick:b[0]||(b[0]=M=>a.value=!0)},{default:l(()=>[w("Transaction Entry")]),_:1})]),_:1})):q("",!0)]),_:1})],64)):q("",!0),t(Ln,{"can-edit":A.value,registration:H(n),"show-editor":a.value,onCloseEditor:b[1]||(b[1]=M=>a.value=!1),updated:I.value,onChange:g},null,8,["can-edit","registration","show-editor","updated"]),t(qt,{registration:H(n),"show-editor":r.value,onCloseEditor:b[2]||(b[2]=M=>r.value=!1)},null,8,["registration","show-editor"])]),_:1})]),_:1},8,["modelValue","title"]))}});const Jn=Je(Wn,[["__scopeId","data-v-e32ba6e4"]]),Xn=me({__name:"RegistrationActions",props:fe({forms:{},registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["update:registration"],["update:modelValue"]),setup(e,{emit:S}){const o=e,i=Pe(e,"modelValue"),n=T(!1),r=Xe(o,S,void 0,void 0,"registration"),a=T(Ue(r.value));re(r,()=>{a.value=Ue(r.value)});const s=ye(),c=(I,A)=>{const E=a.value.Submissions.find(m=>m.SubmissionUUID==A);if(!E){I&&I("Submission not found");return}s.setSubmissionStatus(A,E.Status).then(m=>{m?(a.value.Submissions.forEach((_,g)=>{r.value.Submissions[g].Status=_.Status}),I&&I("Status Saved")):I&&I("Status not saved")}).catch(()=>{I&&I("Status not saved")})};return(I,A)=>(v(),G(Fe,{modelValue:i.value,"onUpdate:modelValue":A[2]||(A[2]=E=>i.value=E),title:I.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,fullscreen:""},{default:l(()=>[t(pe,{class:"pa-0 mx-0",fluid:!0},{default:l(()=>[k("h3",null,"#"+V(I.registration.Reference)+" "+V(I.registration.User.DisplayName),1),t(ze,null,{default:l(()=>[(v(!0),C(F,null,le(a.value.Submissions,E=>(v(),G(Be,{key:E.SubmissionUUID,class:"pa-0"},{default:l(()=>[t(Z,{class:"py-2 align-center"},{default:l(()=>[t(L,{cols:"8"},{default:l(()=>{var m;return[t(de,{modelValue:E.Status,"onUpdate:modelValue":_=>E.Status=_,items:H(St),"item-text":"title","item-value":"value",variant:"outlined","hide-details":"",label:((m=I.forms.find(_=>_.FormUUID==E.FormUUID))==null?void 0:m.Name)||""},{selection:l(()=>[t(ja,{class:"mr-4"},{default:l(()=>{var _;return[w(V((_=H(St).find(g=>g.value===E.Status))==null?void 0:_.icon),1)]}),_:2},1024),w(" "+V(H(xt)(E.Status)),1)]),item:l(({item:_,props:{onClick:g}})=>[t(Be,{title:_.title,"prepend-icon":_.raw.icon,onClick:g},null,8,["title","prepend-icon","onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","items","label"])]}),_:2},1024),t(L,{cols:"4"},{default:l(()=>[t(ut,{title:"Save","prepend-icon":"mdi:mdi-content-save",color:"warning",onClick:m=>c(m.callback,E.SubmissionUUID)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Z,null,{default:l(()=>[t(L,{cols:"12"},{default:l(()=>[t(W,{"prepend-icon":"mdi:mdi-email",color:"primary",onClick:A[0]||(A[0]=E=>n.value=!0)},{default:l(()=>[w("Prepare Email")]),_:1})]),_:1})]),_:1}),t(qt,{registration:I.registration,"show-editor":n.value,onCloseEditor:A[1]||(A[1]=E=>n.value=!1)},null,8,["registration","show-editor"])]),_:1})]),_:1},8,["modelValue","title"]))}});const Zn=e=>(bt("data-v-1f1ef289"),e=e(),Mt(),e),eo=Zn(()=>k("p",null,"Any tags controlled through registration form fields will be reset when the applicable form is saved. If you don't know what you're doing here, don't touch!",-1)),to={class:"mb-4"},ao=me({__name:"RegistrationTags",props:fe({registration:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:fe(["update:registration"],["update:modelValue"]),setup(e,{emit:S}){const o=e,i=Pe(e,"modelValue"),n=ye(),r=Xe(o,S,void 0,void 0,"registration"),a=T(Ue(r.value)),s=T(!1),c=T(a.value.Tags);re(r,()=>{a.value=Ue(r.value)});const I=A=>{const E=[],m=[];a.value.Tags.forEach(_=>{c.value.find($=>$.TagUUID===_.TagUUID)||E.push(_.TagUUID)}),c.value.forEach(_=>{a.value.Tags.find($=>_.TagUUID===$.TagUUID)||m.push(_.TagUUID)}),n.updateRegistrationTags(E,m,a.value.RegistrationUUID).then(_=>{_?A&&(A("Tags Saved"),r.value.Tags=_.Tags,i.value=!1):A&&A("Error Saving Tags")}).catch(()=>{A&&A("Error Saving Tags")})};return(A,E)=>(v(),G(Fe,{modelValue:i.value,"onUpdate:modelValue":E[2]||(E[2]=m=>i.value=m),title:A.title,"show-close-action":!0,color:"primary","close-action-label":"Close",persistent:!0,"retain-focus":!1,scrollable:!0,onSave:I,"show-save-action":!0},{default:l(()=>[t(pe,{class:"pa-0 mx-0",fluid:!0},{default:l(()=>[a.value?(v(),C(F,{key:0},[t(_l,{class:"my-4"},{default:l(()=>[t(Al,null,{default:l(()=>[w("Caution")]),_:1}),eo]),_:1}),k("h3",to,"#"+V(a.value.Reference)+" "+V(a.value.User.DisplayName),1),t(Vt,{modelValue:a.value.Tags,"onUpdate:modelValue":E[0]||(E[0]=m=>a.value.Tags=m),convention:a.value.ConventionUUID,"show-key":!0,chips:!0,"show-uuid":s.value},null,8,["modelValue","convention","show-uuid"]),t($t,{label:"Enable Debug Mode",modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=m=>s.value=m)},null,8,["modelValue"])],64)):q("",!0)]),_:1})]),_:1},8,["modelValue","title"]))}});const lo=Je(ao,[["__scopeId","data-v-1f1ef289"]]);function no(){const e=T([]);ra(()=>e.value=[]);function S(o,i){e.value[i]=o}return{refs:e,updateRef:S}}const oo=Ot({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:He,default:"$first"},prevIcon:{type:He,default:"$prev"},nextIcon:{type:He,default:"$next"},lastIcon:{type:He,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...za(),...Qa(),...Ka(),...Wa(),...Ja(),...Xa(),...Za({tag:"nav"}),...da(),...el({variant:"text"})},"VPagination"),io=ht()({name:"VPagination",props:oo(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,S){let{slots:o,emit:i}=S;const n=ma(e,"modelValue"),{t:r,n:a}=va(),{isRtl:s}=ca(),{themeClasses:c}=fa(e),{width:I}=Ua(),A=_a(-1);it(void 0,{scoped:!0});const{resizeRef:E}=ol(u=>{if(!u.length)return;const{target:f,contentRect:h}=u[0],R=f.querySelector(".v-pagination__list > *");if(!R)return;const N=h.width,Q=R.offsetWidth+parseFloat(getComputedStyle(R).marginRight)*2;A.value=$(N,Q)}),m=se(()=>parseInt(e.length,10)),_=se(()=>parseInt(e.start,10)),g=se(()=>e.totalVisible?parseInt(e.totalVisible,10):A.value>=0?A.value:$(I.value,58));function $(u,f){const h=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((u-f*h)/f).toFixed(2)))}const p=se(()=>{if(m.value<=0||isNaN(m.value)||m.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=1)return[n.value];if(m.value<=g.value)return qe(m.value,_.value);const u=g.value%2===0,f=u?g.value/2:Math.floor(g.value/2),h=u?f:f+1,R=m.value-f;if(h-n.value>=0)return[...qe(Math.max(1,g.value-1),_.value),e.ellipsis,m.value];if(n.value-R>=(u?1:0)){const N=g.value-1,Q=m.value-N+_.value;return[_.value,e.ellipsis,...qe(N,Q)]}else{const N=Math.max(1,g.value-3),Q=N===1?n.value:n.value-Math.ceil(N/2)+_.value;return[_.value,e.ellipsis,...qe(N,Q),e.ellipsis,m.value]}});function D(u,f,h){u.preventDefault(),n.value=f,h&&i(h,f)}const{refs:b,updateRef:M}=no();it({VPaginationBtn:{color:ve(e,"color"),border:ve(e,"border"),density:ve(e,"density"),size:ve(e,"size"),variant:ve(e,"variant"),rounded:ve(e,"rounded"),elevation:ve(e,"elevation")}});const X=se(()=>p.value.map((u,f)=>{const h=R=>M(R,f);if(typeof u=="string")return{isActive:!1,key:`ellipsis-${f}`,page:u,props:{ref:h,ellipsis:!0,icon:!0,disabled:!0}};{const R=u===n.value;return{isActive:R,key:u,page:a(u),props:{ref:h,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:R?e.activeColor:e.color,ariaCurrent:R,ariaLabel:r(R?e.currentPageAriaLabel:e.pageAriaLabel,u),onClick:N=>D(N,u)}}}})),j=se(()=>{const u=!!e.disabled||n.value<=_.value,f=!!e.disabled||n.value>=_.value+m.value-1;return{first:e.showFirstLastPage?{icon:s.value?e.lastIcon:e.firstIcon,onClick:h=>D(h,_.value,"first"),disabled:u,ariaLabel:r(e.firstAriaLabel),ariaDisabled:u}:void 0,prev:{icon:s.value?e.nextIcon:e.prevIcon,onClick:h=>D(h,n.value-1,"prev"),disabled:u,ariaLabel:r(e.previousAriaLabel),ariaDisabled:u},next:{icon:s.value?e.prevIcon:e.nextIcon,onClick:h=>D(h,n.value+1,"next"),disabled:f,ariaLabel:r(e.nextAriaLabel),ariaDisabled:f},last:e.showFirstLastPage?{icon:s.value?e.firstIcon:e.lastIcon,onClick:h=>D(h,_.value+m.value-1,"last"),disabled:f,ariaLabel:r(e.lastAriaLabel),ariaDisabled:f}:void 0}});function oe(){var f;const u=n.value-_.value;(f=b.value[u])==null||f.$el.focus()}function J(u){u.key===Ut.left&&!e.disabled&&n.value>+e.start?(n.value=n.value-1,Ke(oe)):u.key===Ut.right&&!e.disabled&&n.value<_.value+m.value-1&&(n.value=n.value+1,Ke(oe))}return wt(()=>t(e.tag,{ref:E,class:["v-pagination",c.value,e.class],style:e.style,role:"navigation","aria-label":r(e.ariaLabel),onKeydown:J,"data-test":"v-pagination-root"},{default:()=>[t("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&t("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[o.first?o.first(j.value.first):t(W,Re({_as:"VPaginationBtn"},j.value.first),null)]),t("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[o.prev?o.prev(j.value.prev):t(W,Re({_as:"VPaginationBtn"},j.value.prev),null)]),X.value.map((u,f)=>t("li",{key:u.key,class:["v-pagination__item",{"v-pagination__item--is-active":u.isActive}],"data-test":"v-pagination-item"},[o.item?o.item(u):t(W,Re({_as:"VPaginationBtn"},u.props),{default:()=>[u.page]})])),t("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[o.next?o.next(j.value.next):t(W,Re({_as:"VPaginationBtn"},j.value.next),null)]),e.showFirstLastPage&&t("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[o.last?o.last(j.value.last):t(W,Re({_as:"VPaginationBtn"},j.value.last),null)])])]})),{}}}),Ho=me({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:S}){var mt;const o=rl();S("pageTitle","Registration Manager");const i=Aa(),n=Ta(),r=T(!0);let a=((mt=i.params.convention)==null?void 0:mt.toString())||"";const s=T({ID:0,ConventionUUID:Ne(),OrganisationID:0,OrganisationUUID:nt,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),c=ye(),I=ga.getInstance(),A=T({ID:0,AdminLayoutUUID:Ne(),ConventionID:s.value.ID,ConventionUUID:s.value.ConventionUUID,Name:"Registration Table",Type:Yt.ADMIN_LAYOUT_TABLE,Panels:[]}),E=T([]),m=T([]),_=T([]),g=T([]),$=T([]),p=T(1),D=T(10),b=T([]),M=T(0),X=T(!1),j=T(""),oe=T(""),J=T(""),u=T(""),f=T({FieldUUID:"591c9bca-c78c-4e97-8aef-bc596ef472fb",Value:""}),h=T(new Map([["591c9bca-c78c-4e97-8aef-bc596ef472fb",f.value]])),R=T(""),N=T(""),Q=T([]),ie=T([]),ee=T([]),be=T([]),Me=T([]),Ve=T([]),_e=T(0),ne=T(),Ie=T(!1),De=T(!1),Ce=T(!1),Ge=T(),rt=T(),et=T(),ke=T(!1);re(j,U=>{const d=$.value.find(y=>y.uuid===U);if(d){const y=d.headers.find(O=>O.defaultSort===!0);y&&(b.value=[{key:y.key,order:"asc"}],Q.value=[{key:y.key,order:"asc"}])}}),re(_e,U=>{U===7&&dt()}),re(R,()=>{oe.value=Date.now().toString()}),re(N,()=>{oe.value=Date.now().toString()});const jt=()=>{E.value=[],_.value=[],$.value=[];try{c.getConventionAdminLayoutByName(s.value.ConventionUUID,"Registration Table").then(U=>{_e.value+=1,U?A.value=U:(A.value.ConventionID=s.value.ID,A.value.ConventionUUID=s.value.ConventionUUID)})}catch{A.value.ConventionID=s.value.ID,A.value.ConventionUUID=s.value.ConventionUUID}try{c.getConventionForms(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(E.value=U)})}catch{}try{c.getConventionAccommodation(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(ie.value=U)})}catch{}try{c.getConventionVenues(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(Ve.value=U)})}catch{}try{c.getConventionExtras(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(ee.value=U)})}catch{}try{c.getConventionInterests(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(be.value=U)})}catch{}try{c.getConventionTickets(s.value.ConventionUUID).then(U=>{_e.value+=1,U&&(Me.value=U)})}catch{}try{c.getConventionGroups(s.value.ConventionUUID).then(U=>{U&&(m.value=U.sort((d,y)=>d.Name.localeCompare(y.Name)))})}catch{}try{c.getConventionTags(s.value.ConventionUUID).then(U=>{U&&(g.value=U.sort((d,y)=>d.Title.localeCompare(y.Title)).map(d=>(d.Title=`${d.Title} [${d.Key}]`,d)))})}catch{}},tt=({page:U,itemsPerPage:d,sortBy:y})=>{r.value=!0,p.value=U,b.value=y;const O=$.value.find(te=>te.uuid==j.value),Ae=O==null?void 0:O.layout.Items;let ue="",vt="";if(y&&Ae&&y.length>=1){const te=Ae.find(we=>we.LayoutItemUUID==y[0].key);switch(vt=y[0].order||"asc",te==null?void 0:te.MetaField){case K.META_DATA_SOURCE_ACCOMMODATION_FORM:ue="submission.status";break;case K.META_DATA_SOURCE_BADGE_FORM:ue="submission.status";break;case K.META_DATA_SOURCE_DEALER_FORM:ue="submission.status";break;case K.META_DATA_SOURCE_REGISTRATION_FORM:ue="submission.status";break;case K.META_DATA_SOURCE_REGISTRATION_REFERENCE:ue="reference";break;case K.META_DATA_SOURCE_SUBMISSION_DATE:ue="created";break;case K.META_DATA_SOURCE_SUBMISSION_STATUS:ue="submission.status";break}switch(te==null?void 0:te.UserField){case ae.USER_DATA_SOURCE_DISPLAY_NAME:ue="user.display_name";break;case ae.USER_DATA_SOURCE_EMAIL:ue="user.email";break;case ae.USER_DATA_SOURCE_FIRST_NAME:ue="user.firstname";break;case ae.USER_DATA_SOURCE_HANDLE:ue="user.handle";break;case ae.USER_DATA_SOURCE_LAST_NAME:ue="user.lastname";break}}try{const te={Direction:vt,Limit:d,Offset:(U-1)*d,Order:ue};O&&O.layout.RequiredRegistrationTags.length>0&&(te.PanelUUID=O==null?void 0:O.layout.LayoutPanelUUID),(O==null?void 0:O.layout.RequiredFormType)===Se.FORM_TYPE_ACCOMMODATION&&(te.Accommodation=!0),(O==null?void 0:O.layout.RequiredFormType)===Se.FORM_TYPE_BADGE&&(te.Badge=!0),(O==null?void 0:O.layout.RequiredFormType)===Se.FORM_TYPE_DEALER&&(te.Dealer=!0),(O==null?void 0:O.layout.RequiredFormType)===Se.FORM_TYPE_REGISTRATION&&(te.Registration=!0),te.GroupUUID=R.value||nt,te.TagUUID=N.value||nt,te.Email=u.value,te.Reference=J.value,te.FieldValues=Array.from(h.value.values()),c.searchConventionRegistrations(s.value.ConventionUUID,te).then(we=>{we&&(M.value=we.Total,_.value=we.Registrations,$.value.forEach(lt=>{const ea=lt.layout;lt.items=_.value.map(x=>{const Ye=[];let ge;x.Leader?ge=x:ge=x.Primary,Ye.push({Name:ge.User.DisplayName,UUID:ge.UserUUID,UserUUID:ge.User.UserUUID,IsLeader:!0,Reference:ge.Reference,Paid:ge.Paid,Total:ge.Total}),Ye.push(...ge.Members.map(Ee=>({Name:Ee.User.DisplayName,UUID:Ee.UserUUID,UserUUID:Ee.User.UserUUID,IsLeader:!1,Reference:Ee.Reference,Paid:Ee.Paid,Total:Ee.Total})));const z={};return lt.headers.forEach(Ee=>{var ct;const B=ea.Items.find($e=>$e.LayoutItemUUID===Ee.key);if(B){if(B.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&B.SectionField)x.Submissions.forEach($e=>{const Le=$e.Data.find(P=>P.SectionFieldUUID===B.SectionFieldUUID);if(Le){Ee.type===Ia.ACCOMMODATION?z[B.LayoutItemUUID]={Data:Le.Data,Registration:x}:z[B.LayoutItemUUID]=Le.Data;return}});else if(B.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&B.UserField)switch(B.UserField){case ae.USER_DATA_SOURCE_AVATAR:z[B.LayoutItemUUID]=o.GetProfileImageURL(x.UserUUID);break;case ae.USER_DATA_SOURCE_DISPLAY_NAME:z[B.LayoutItemUUID]=x.User.DisplayName;break;case ae.USER_DATA_SOURCE_EMAIL:z[B.LayoutItemUUID]=x.User.Additional.Email;break;case ae.USER_DATA_SOURCE_HANDLE:z[B.LayoutItemUUID]=x.User.Handle;break;case ae.USER_DATA_SOURCE_DATE_OF_BIRTH:z[B.LayoutItemUUID]=x.User.Additional.DOB;break;case ae.USER_DATA_SOURCE_FIRST_NAME:z[B.LayoutItemUUID]=x.User.Additional.FirstName;break;case ae.USER_DATA_SOURCE_LAST_NAME:z[B.LayoutItemUUID]=x.User.Additional.LastName;break;case ae.USER_DATA_SOURCE_TELEGRAM:z[B.LayoutItemUUID]="";break}else if(B.SourceType==="LAYOUT_ITEM_SOURCE_META"&&B.MetaField){const $e=(ct=E.value.find(P=>P.Type===Se.FORM_TYPE_REGISTRATION))==null?void 0:ct.FormUUID,Le=x.Submissions.find(P=>P.FormUUID===$e);switch(B.MetaField){case K.META_DATA_SOURCE_REGISTRATION_ACTIONS:z[B.LayoutItemUUID]=x;break;case K.META_DATA_SOURCE_REGISTRATION_GROUP:z[B.LayoutItemUUID]=Ye;break;case K.META_DATA_SOURCE_REGISTRATION_REFERENCE:z[B.LayoutItemUUID]=x.Reference;break;case K.META_DATA_SOURCE_SUBMISSION_DATE:if(Le){const P=new Date(Le.CreatedAt||"");z[B.LayoutItemUUID]=`${P.getFullYear()}-${(P.getMonth()+1).toString().padStart(2,"0")}-${P.getDate().toString().padStart(2,"0")} ${P.getHours().toString().padStart(2,"0")}:${P.getMinutes().toString().padStart(2,"0")}:${P.getSeconds().toString().padStart(2,"0")}`}else{const P=new Date(x.CreatedAt||"");z[B.LayoutItemUUID]=`${P.getFullYear()}-${(P.getMonth()+1).toString().padStart(2,"0")}-${P.getDate().toString().padStart(2,"0")} ${P.getHours().toString().padStart(2,"0")}:${P.getMinutes().toString().padStart(2,"0")}:${P.getSeconds().toString().padStart(2,"0")}`}break;case K.META_DATA_SOURCE_ACCOMMODATION_FORM:z[B.LayoutItemUUID]=x.Submissions.map(P=>{const Y=E.value.find(Oe=>Oe.FormUUID===P.FormUUID);return{Heading:Y==null?void 0:Y.Heading,Form:Y,Submission:P,Registration:x}}).filter(P=>{var Y;return((Y=P.Form)==null?void 0:Y.Type)===Se.FORM_TYPE_ACCOMMODATION});break;case K.META_DATA_SOURCE_BADGE_FORM:z[B.LayoutItemUUID]=x.Submissions.map(P=>{const Y=E.value.find(Oe=>Oe.FormUUID===P.FormUUID);return{Heading:Y==null?void 0:Y.Heading,Form:Y,Submission:P,Registration:x}}).filter(P=>{var Y;return((Y=P.Form)==null?void 0:Y.Type)===Se.FORM_TYPE_BADGE});break;case K.META_DATA_SOURCE_DEALER_FORM:z[B.LayoutItemUUID]=x.Submissions.map(P=>{const Y=E.value.find(Oe=>Oe.FormUUID===P.FormUUID);return{Heading:Y==null?void 0:Y.Heading,Form:Y,Submission:P,Registration:x}}).filter(P=>{var Y;return((Y=P.Form)==null?void 0:Y.Type)===Se.FORM_TYPE_DEALER});break;case K.META_DATA_SOURCE_PAYMENT_STATUS:if(x.Paid===0&&x.Total)z[B.LayoutItemUUID]="REQUIRED";else if(x.Total>x.Paid)z[B.LayoutItemUUID]="ADDITIONAL_REQUIRED";else{const P=Ye.find(Y=>Y.Paid===0&&(Y.Total||0)>0);if(P){x.Total===0&&P.Total===0?z[B.LayoutItemUUID]="NOT_REQUIRED":x.Total===0&&P.Total||x.Total>0&&P.Total===0?z[B.LayoutItemUUID]="MISSING_REQUIRED":x.Paid>=x.Total?z[B.LayoutItemUUID]="AWAITING_PARTNER":z[B.LayoutItemUUID]="ALL_REQUIRED";break}else x.Total===0?z[B.LayoutItemUUID]="NOT_REQUIRED":z[B.LayoutItemUUID]="COMPLETE"}break;case K.META_DATA_SOURCE_SUBMISSION_STATUS:ul(x.Submissions,E.value),z[B.LayoutItemUUID]=x.Submissions.map(P=>{const Y=E.value.find(Oe=>Oe.FormUUID===P.FormUUID);return{Heading:Y==null?void 0:Y.Heading,Form:Y,Submission:P,Registration:x}});break}}}}),z})}),r.value=!1)})}catch{}},zt=U=>{X.value=!1,U&&(A.value=U,dt())},dt=()=>{A.value.Panels.forEach(U=>{U.Items.forEach(d=>{(d.SectionField==null||d.SectionField.Field==null)&&E.value.find(y=>{y.Sections.find(O=>{if(O.Fields){const Ae=O.Fields.find(ue=>ue.SectionFieldUUID===d.SectionFieldUUID);if(Ae)return d.SectionField=Ae,!0}})})})}),A.value.Panels.length>0&&($.value=[],A.value.Panels.forEach(U=>{const d={uuid:Ne(),order:U.Order,name:U.Name,headers:[],items:[],layout:U};U.Items.sort((y,O)=>y.Order>O.Order?1:y.Order==O.Order?0:-1),d.headers=U.Items.map(y=>{var O,Ae;return{key:y.LayoutItemUUID,title:y.Label||((Ae=(O=y.SectionField)==null?void 0:O.Field)==null?void 0:Ae.Label)||"",align:y.Align==="end"?"end":"start",sortable:Kt(y),type:Qt(y),defaultSort:y.DefaultSort}}),$.value.push(d)}),$.value=$.value.sort((U,d)=>U.order>d.order?1:U.order==d.order?0:-1)),(j.value==null||j.value=="")&&$.value.length>0&&(j.value=$.value[0].uuid)};a?c.getConvention(a).then(U=>{U&&(s.value=U,A.value.ConventionID=s.value.ID,A.value.ConventionUUID=s.value.ConventionUUID,jt())}).catch(()=>{n.push("/")}):n.push("/");const Qt=U=>{var d,y;if(U.SourceType===xe.LAYOUT_ITEM_SOURCE_META)return`${U.SourceType}.${U.MetaField}`;if(U.SourceType===xe.LAYOUT_ITEM_SOURCE_FORM)return(y=(d=U.SectionField)==null?void 0:d.Field)==null?void 0:y.Type;if(U.SourceType===xe.LAYOUT_ITEM_SOURCE_USER)return`${U.SourceType}.${U.UserField}`},Kt=U=>{const d=[K.META_DATA_SOURCE_ACCOMMODATION_FORM,K.META_DATA_SOURCE_BADGE_FORM,K.META_DATA_SOURCE_DEALER_FORM,K.META_DATA_SOURCE_REGISTRATION_FORM,K.META_DATA_SOURCE_REGISTRATION_REFERENCE,K.META_DATA_SOURCE_SUBMISSION_DATE,K.META_DATA_SOURCE_SUBMISSION_STATUS],y=[ae.USER_DATA_SOURCE_DISPLAY_NAME,ae.USER_DATA_SOURCE_EMAIL,ae.USER_DATA_SOURCE_HANDLE,ae.USER_DATA_SOURCE_DATE_OF_BIRTH,ae.USER_DATA_SOURCE_FIRST_NAME,ae.USER_DATA_SOURCE_LAST_NAME];return d.includes(U.MetaField)||y.includes(U.UserField)},Wt=U=>{ne.value=U,Ie.value=!0},Jt=U=>{ne.value=U,De.value=!0},Xt=U=>{ne.value=U,Ce.value=!0};re(Ie,U=>{U||(ne.value=void 0)}),re(De,U=>{U||(ne.value=void 0)});const at=async(U="")=>{rt.value=await c.getRegistrationGroup(U)},Zt=({registration:U,form:d,submission:y})=>{ne.value=U,at(U.RegistrationUUID).then(()=>{Ge.value=d,et.value=y,ke.value=!0})};return I.on("registration.group.leave",U=>{c.leaveRegistrationGroup(U).then(d=>{d&&at(U).then(()=>{I.emit("registration.group.left",d)})})}),I.on("registration.group.remove.member",U=>{c.leaveRegistrationGroup(U).then(d=>{d&&at(U).then(()=>{I.emit("registration.group.left",d)})})}),(U,d)=>(v(),G(El,null,{default:l(()=>[t(yt,{color:"blue-darken-4"},{default:l(()=>[t(Ga,{modelValue:j.value,"onUpdate:modelValue":d[0]||(d[0]=y=>j.value=y),"show-arrows":""},{default:l(()=>[(v(!0),C(F,null,le($.value,y=>(v(),G(Ya,{key:y.uuid,value:y.uuid},{default:l(()=>[w(V(y.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(We),t(W,{icon:"mdi:mdi-cog-outline",onClick:d[1]||(d[1]=y=>X.value=!0)})]),_:1}),t(qa,{modelValue:j.value,"onUpdate:modelValue":d[19]||(d[19]=y=>j.value=y),disabled:!0},{default:l(()=>[(v(!0),C(F,null,le($.value,y=>(v(),G(Ha,{key:y.uuid,value:y.uuid},{default:l(()=>[y.uuid===j.value?(v(),G(pt,{key:0,class:"pa-2"},{default:l(()=>[t(H(Ol),{page:p.value,"onUpdate:page":d[16]||(d[16]=O=>p.value=O),"items-per-page":D.value,"onUpdate:itemsPerPage":d[17]||(d[17]=O=>D.value=O),"sort-by":Q.value,"onUpdate:sortBy":d[18]||(d[18]=O=>Q.value=O),headers:y.headers,"items-length":M.value,items:y.items,"item-value":"LayoutItemUUID",loading:r.value,search:oe.value,"onUpdate:options":tt},Qe({top:l(()=>[t(pe,null,{default:l(()=>[t(Z,null,{default:l(()=>[t(L,{cols:"12",sm:"12",md:"3",lg:"2",xl:"2"},{default:l(()=>[t(ce,{modelValue:J.value,"onUpdate:modelValue":d[2]||(d[2]=O=>J.value=O),label:"Search by Badge",clearable:!0,"hide-details":"","onClick:clear":d[3]||(d[3]=O=>oe.value=Date.now().toString()),onInput:d[4]||(d[4]=O=>oe.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"12",md:"4",lg:"5",xl:"3"},{default:l(()=>[t(ce,{modelValue:f.value.Value,"onUpdate:modelValue":d[5]||(d[5]=O=>f.value.Value=O),label:"Search By Furry Name",clearable:!0,"hide-details":"","onClick:clear":d[6]||(d[6]=O=>oe.value=Date.now().toString()),onInput:d[7]||(d[7]=O=>oe.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"12",md:"5",lg:"5",xl:"3"},{default:l(()=>[t(ce,{modelValue:u.value,"onUpdate:modelValue":d[8]||(d[8]=O=>u.value=O),label:"Search By Email",clearable:!0,"hide-details":"","onClick:clear":d[9]||(d[9]=O=>oe.value=Date.now().toString()),onInput:d[10]||(d[10]=O=>oe.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),t(L,{cols:"12",sm:"6",md:"6",lg:"6",xl:"2"},{default:l(()=>[t(de,{modelValue:R.value,"onUpdate:modelValue":d[11]||(d[11]=O=>R.value=O),label:"Search By Group",clearable:!0,"hide-details":"",items:m.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1}),t(L,{cols:"12",sm:"6",md:"6",lg:"6",xl:"2"},{default:l(()=>[t(de,{modelValue:N.value,"onUpdate:modelValue":d[12]||(d[12]=O=>N.value=O),label:"Search By Tag",clearable:!0,"hide-details":"",items:g.value,"item-value":"TagUUID","item-title":"Title"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),bottom:l(()=>[t(Z,{class:"align-center mt-2"},{default:l(()=>[t(L,{class:"py-0",cols:"6",sm:"3",md:"2",lg:"2",xl:"1"},{default:l(()=>[t(de,{"model-value":D.value,class:"pa-2",type:"number",min:"-1",max:"15","hide-details":"",density:"compact",variant:"outlined","item-title":"title","item-value":"value",items:[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100},{title:"All",value:-1}],"onUpdate:modelValue":d[14]||(d[14]=O=>D.value=parseInt(O,10))},null,8,["model-value"])]),_:1}),t(L,{class:"text-center py-0",cols:"6",sm:"2",md:"2",lg:"2",xl:"1"},{default:l(()=>[D.value===-1?(v(),C(F,{key:0},[w(" 1-"+V(M.value)+" of "+V(M.value),1)],64)):(v(),C(F,{key:1},[w(V((p.value-1)*D.value+1)+"-"+V(p.value*D.value>=M.value?M.value:p.value*D.value)+" of "+V(M.value),1)],64))]),_:1}),t(L,{class:"justify-start py-0",cols:"12",sm:"7",md:"8",lg:"8",xl:"10"},{default:l(()=>[t(io,{modelValue:p.value,"onUpdate:modelValue":d[15]||(d[15]=O=>p.value=O),length:Math.ceil(M.value/D.value)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:2},[le(y.headers,O=>({name:`item.${O.key}`,fn:l(({item:Ae})=>[t(mn,{header:O,item:Ae,accommodations:ie.value,convention:s.value,extras:ee.value,forms:E.value,interests:be.value,tickets:Me.value,venues:Ve.value,onOpenActions:Wt,onOpenPayments:Jt,onOpenTags:Xt,onReload:d[13]||(d[13]=ue=>tt({page:p.value,itemsPerPage:D.value,sortBy:b.value})),onShowForm:Zt},null,8,["header","item","accommodations","convention","extras","forms","interests","tickets","venues"])])}))]),1032,["page","items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):q("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),X.value?(v(),G(hl,{key:0,title:"Edit Layout",modelValue:X.value,"onUpdate:modelValue":d[20]||(d[20]=y=>X.value=y),layout:A.value,onSave:zt},null,8,["modelValue","layout"])):q("",!0),ne.value?(v(),C(F,{key:1},[Ie.value?(v(),G(Xn,{key:0,modelValue:Ie.value,"onUpdate:modelValue":d[21]||(d[21]=y=>Ie.value=y),registration:ne.value,"onUpdate:registration":d[22]||(d[22]=y=>ne.value=y),accommodations:ie.value,convention:s.value,extras:ee.value,forms:E.value,interests:be.value,tickets:Me.value,title:"Registration Status & Communications",venues:Ve.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])):De.value?(v(),G(Jn,{key:1,modelValue:De.value,"onUpdate:modelValue":d[23]||(d[23]=y=>De.value=y),registration:ne.value,"onUpdate:registration":d[24]||(d[24]=y=>ne.value=y),accommodations:ie.value,convention:s.value,extras:ee.value,forms:E.value,interests:be.value,tickets:Me.value,title:"Registration Payments",venues:Ve.value},null,8,["modelValue","registration","accommodations","convention","extras","forms","interests","tickets","venues"])):Ce.value?(v(),G(lo,{key:2,modelValue:Ce.value,"onUpdate:modelValue":d[25]||(d[25]=y=>Ce.value=y),registration:ne.value,"onUpdate:registration":d[26]||(d[26]=y=>ne.value=y),convention:s.value,title:"Registration Tags"},null,8,["modelValue","registration","convention"])):q("",!0)],64)):q("",!0),ke.value&&et.value&&Ge.value?(v(),G(Sl,{key:2,modelValue:ke.value,"onUpdate:modelValue":d[30]||(d[30]=y=>ke.value=y),scrollable:!0,fullscreen:!0,persistent:!0},{default:l(()=>[t(pt,{class:"bg-red-darken-4"},{default:l(()=>[t(yt,{color:"error"},{default:l(()=>[t(gl,null,{default:l(()=>[w("Submission Editor - Admin Mode")]),_:1}),t(We),t(Tl,null,{default:l(()=>[t(W,{icon:"mdi:mdi-window-close",onClick:d[27]||(d[27]=y=>ke.value=!1)})]),_:1})]),_:1}),t(vl,null,{default:l(()=>[t(ya,{modelValue:Ge.value,"onUpdate:modelValue":d[28]||(d[28]=y=>Ge.value=y),admin:!0,convention:s.value,data:et.value,editable:!0,"registration-group":rt.value,onClose:d[29]||(d[29]=y=>{ke.value=!1,tt({page:p.value,itemsPerPage:D.value,sortBy:b.value})})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):q("",!0)]),_:1}))}});export{Ho as default};
