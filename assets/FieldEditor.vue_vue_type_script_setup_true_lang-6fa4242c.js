import{_ as mt,a as vt}from"./ModelDialog.vue_vue_type_script_setup_true_lang-70bee9dd.js";import{p as _,x as z,h as w,K as Be,a8 as K,ab as X,I as pe,a as ee,a7 as he,c as s,ai as ft,m as be,i as q,y as T,aj as Pe,ae as Ue,t as N,ak as Ve,al as oe,a3 as _e,F as B,e as O,am as gt,H as Ce,an as Q,ao as pt,k as G,ap as yt,B as bt,d as M,Z as H,X as de,o as k,O as te,P as ae,b as U,M as P,Y as ie,w as p,S as ye,L as se,f as j,z as Fe}from"./index-03084228.js";import{V as J,u as Vt}from"./VCheckbox-591c9083.js";import{F as It,c as E,_ as ht}from"./FormField.vue_vue_type_script_setup_true_lang-47b02712.js";import{v as A}from"./v4-a960c1f4.js";import{m as St,u as Dt,T as Tt}from"./VAutocomplete-63ede20e.js";import{_ as kt}from"./SelectTags.vue_vue_type_script_setup_true_lang-9bbfedcb.js";import{V as re}from"./VContainer-dd248707.js";import{V as x,a as C}from"./VRow-fadaa17e.js";import{V as R}from"./VTextField-af5784b0.js";import{V as $e,a as Se}from"./VSelect-77e8c23f.js";import{V as F,h as xt,i as wt,L as Pt,a as Ie}from"./VBtn-46db6200.js";import{V as Ut}from"./VSheet-dda7817d.js";import{V as Le}from"./VSpacer-0635af43.js";import{u as _t}from"./useGrazeAPI-d28dcd3a.js";import{V as Ct,b as Ft}from"./VToolbar-77250284.js";import{b as Et}from"./VList-ad147349.js";import{f as At,u as ce}from"./rounded-7666c9d2.js";import{m as Nt,V as Ee}from"./VTable-9aa14bf0.js";const Ot=_({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Re=Symbol.for("vuetify:data-table-pagination");function Bt(e){const t=z(e,"page",void 0,a=>+(a??1)),n=z(e,"itemsPerPage",void 0,a=>+(a??10));return{page:t,itemsPerPage:n}}function $t(e){const{page:t,itemsPerPage:n,itemsLength:a}=e,o=w(()=>n.value===-1?0:n.value*(t.value-1)),i=w(()=>n.value===-1?a.value:Math.min(a.value,o.value+n.value)),u=w(()=>n.value===-1||a.value===0?1:Math.ceil(a.value/n.value));Be(()=>{t.value>u.value&&(t.value=u.value)});function l(y){n.value=y,t.value=1}function r(){t.value=pe(t.value+1,1,u.value)}function c(){t.value=pe(t.value-1,1,u.value)}function m(y){t.value=pe(y,1,u.value)}const g={page:t,itemsPerPage:n,startIndex:o,stopIndex:i,pageCount:u,itemsLength:a,nextPage:r,prevPage:c,setPage:m,setItemsPerPage:l};return K(Re,g),g}function Lt(){const e=X(Re);if(!e)throw new Error("Missing pagination!");return e}function Rt(e){const{items:t,startIndex:n,stopIndex:a,itemsPerPage:o}=e;return{paginatedItems:w(()=>o.value<=0?t.value:t.value.slice(n.value,a.value))}}const Ge=_({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ae=ee()({name:"VDataTableFooter",props:Ge(),setup(e,t){let{slots:n}=t;const{t:a}=he(),{page:o,pageCount:i,startIndex:u,stopIndex:l,itemsLength:r,itemsPerPage:c,setItemsPerPage:m}=Lt(),g=w(()=>e.itemsPerPageOptions.map(y=>({...y,title:a(y.title)})));return()=>{var y;return s("div",{class:"v-data-table-footer"},[(y=n.prepend)==null?void 0:y.call(n),s("div",{class:"v-data-table-footer__items-per-page"},[s("span",null,[a(e.itemsPerPageText)]),s($e,{items:g.value,modelValue:c.value,"onUpdate:modelValue":V=>m(Number(V)),density:"compact",variant:"outlined","hide-details":!0},null)]),s("div",{class:"v-data-table-footer__info"},[s("div",null,[a(e.pageText,r.value?u.value+1:0,l.value,r.value)])]),s("div",{class:"v-data-table-footer__pagination"},[s(F,{icon:e.firstIcon,variant:"plain",onClick:()=>o.value=1,disabled:o.value===1,"aria-label":a(e.firstPageLabel)},null),s(F,{icon:e.prevIcon,variant:"plain",onClick:()=>o.value=Math.max(1,o.value-1),disabled:o.value===1,"aria-label":a(e.prevPageLabel)},null),e.showCurrentPage&&s("span",{key:"page",class:"v-data-table-footer__page"},[o.value]),s(F,{icon:e.nextIcon,variant:"plain",onClick:()=>o.value=Math.min(i.value,o.value+1),disabled:o.value===i.value,"aria-label":a(e.nextPageLabel)},null),s(F,{icon:e.lastIcon,variant:"plain",onClick:()=>o.value=i.value,disabled:o.value===i.value,"aria-label":a(e.lastPageLabel)},null)])])}}}),De=ft({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(e,t)=>{let{slots:n,attrs:a}=t;const o=e.tag??"td";return s(o,be({class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding},`v-data-table-column--align-${e.align}`],style:{height:q(e.height),width:q(e.width),left:q(e.fixedOffset||null)}},a),{default:()=>{var i;return[(i=n.default)==null?void 0:i.call(n)]}})}),Gt=_({headers:{type:Array,default:()=>[]}},"DataTable-header"),Me=Symbol.for("vuetify:data-table-headers");function Mt(e,t){const n=T([]),a=T([]);Be(()=>{var V,b,h;const i=e.headers.length?Array.isArray(e.headers[0])?e.headers:[e.headers]:[],u=i.flatMap((v,d)=>v.map(f=>({column:f,row:d}))),l=i.length,r={title:"",sortable:!1},c={...r,width:48};if((V=t==null?void 0:t.groupBy)!=null&&V.value.length){const v=u.findIndex(d=>{let{column:f}=d;return f.key==="data-table-group"});v<0?u.unshift({column:{...r,key:"data-table-group",title:"Group",rowspan:l},row:0}):u.splice(v,1,{column:{...r,...u[v].column},row:u[v].row})}if((b=t==null?void 0:t.showSelect)!=null&&b.value){const v=u.findIndex(d=>{let{column:f}=d;return f.key==="data-table-select"});v<0?u.unshift({column:{...c,key:"data-table-select",rowspan:l},row:0}):u.splice(v,1,{column:{...c,...u[v].column},row:u[v].row})}if((h=t==null?void 0:t.showExpand)!=null&&h.value){const v=u.findIndex(d=>{let{column:f}=d;return f.key==="data-table-expand"});v<0?u.push({column:{...c,key:"data-table-expand",rowspan:l},row:0}):u.splice(v,1,{column:{...c,...u[v].column},row:u[v].row})}const m=Pe(l).map(()=>[]),g=Pe(l).fill(0);u.forEach(v=>{let{column:d,row:f}=v,D=d.key;D==null&&(D="");for(let S=f;S<=f+(d.rowspan??1)-1;S++)m[S].push({...d,key:D,fixedOffset:g[S],sortable:d.sortable??!!d.key}),g[S]+=Number(d.width??0)}),m.forEach(v=>{for(let d=v.length;d--;d>=0)if(v[d].fixed){v[d].lastFixed=!0;return}});const y=new Set;n.value=m.map(v=>{const d=[];for(const f of v)y.has(f.key)||(y.add(f.key),d.push(f));return d}),a.value=m.at(-1)??[]});const o={headers:n,columns:a};return K(Me,o),o}function me(){const e=X(Me);if(!e)throw new Error("Missing headers!");return e}const Ht={showSelectAll:!1,allSelected:()=>[],select:e=>{var a;let{items:t,value:n}=e;return new Set(n?[(a=t[0])==null?void 0:a.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},He={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const o of t)n?a.add(o.value):a.delete(o.value);return a},selectAll:e=>{let{value:t,currentPage:n,selected:a}=e;return He.select({items:n,value:t,selected:a})}},je={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:a}=e;for(const o of t)n?a.add(o.value):a.delete(o.value);return a},selectAll:e=>{let{value:t,allItems:n,selected:a}=e;return je.select({items:n,value:t,selected:a})}},jt=_({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]}},"DataTable-select"),qe=Symbol.for("vuetify:data-table-selection");function qt(e,t){let{allItems:n,currentPage:a}=t;const o=z(e,"modelValue",e.modelValue,v=>new Set(v),v=>[...v.values()]),i=w(()=>n.value.filter(v=>v.selectable)),u=w(()=>a.value.filter(v=>v.selectable)),l=w(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Ht;case"all":return je;case"page":default:return He}});function r(v){return Ue(v).every(d=>o.value.has(d.value))}function c(v){return Ue(v).some(d=>o.value.has(d.value))}function m(v,d){const f=l.value.select({items:v,value:d,selected:new Set(o.value)});o.value=f}function g(v){m([v],!r([v]))}function y(v){const d=l.value.selectAll({value:v,allItems:i.value,currentPage:u.value,selected:new Set(o.value)});o.value=d}const V=w(()=>o.value.size>0),b=w(()=>{const v=l.value.allSelected({allItems:i.value,currentPage:u.value});return r(v)}),h={toggleSelect:g,select:m,selectAll:y,isSelected:r,isSomeSelected:c,someSelected:V,allSelected:b,showSelectAll:l.value.showSelectAll};return K(qe,h),h}function ve(){const e=X(qe);if(!e)throw new Error("Missing selection!");return e}const zt=_({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),ze=Symbol.for("vuetify:data-table-sort");function Jt(e){const t=z(e,"sortBy"),n=N(e,"mustSort"),a=N(e,"multiSort");return{sortBy:t,mustSort:n,multiSort:a}}function Kt(e){const{sortBy:t,mustSort:n,multiSort:a,page:o}=e,i=r=>{let c=t.value.map(g=>({...g}))??[];const m=c.find(g=>g.key===r.key);m?m.order==="desc"?n.value?m.order="asc":c=c.filter(g=>g.key!==r.key):m.order="desc":a.value?c=[...c,{key:r.key,order:"asc"}]:c=[{key:r.key,order:"asc"}],t.value=c,o&&(o.value=1)};function u(r){return!!t.value.find(c=>c.key===r.key)}const l={sortBy:t,toggleSort:i,isSorted:u};return K(ze,l),l}function Xt(){const e=X(ze);if(!e)throw new Error("Missing sort!");return e}function Yt(e,t,n){const a=he();return{sortedItems:w(()=>n.value.length?Wt(t.value,n.value,a.current.value,e.customKeySort):t.value)}}function Wt(e,t,n,a){const o=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return[...e].sort((i,u)=>{for(let l=0;l<t.length;l++){const r=t[l].key,c=t[l].order??"asc";if(c===!1)continue;let m=Ve(i.raw,r),g=Ve(u.raw,r);if(c==="desc"&&([m,g]=[g,m]),a!=null&&a[r]){const y=a[r](m,g);if(!y)continue;return y}if(m instanceof Date&&g instanceof Date)return m.getTime()-g.getTime();if([m,g]=[m,g].map(y=>y!=null?y.toString().toLocaleLowerCase():y),m!==g)return oe(m)&&oe(g)?0:oe(m)?-1:oe(g)?1:!isNaN(m)&&!isNaN(g)?Number(m)-Number(g):o.compare(m,g)}return 0})}const Je=_({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:_e,default:"$sortAsc"},sortDescIcon:{type:_e,default:"$sortDesc"},...xt()},"VDataTableHeaders"),Ne=ee()({name:"VDataTableHeaders",props:Je(),setup(e,t){let{slots:n,emit:a}=t;const{toggleSort:o,sortBy:i,isSorted:u}=Xt(),{someSelected:l,allSelected:r,selectAll:c,showSelectAll:m}=ve(),{columns:g,headers:y}=me(),{loaderClasses:V}=wt(e),b=(S,I)=>{if(!(!e.sticky&&!S.fixed))return{position:"sticky",zIndex:S.fixed?4:e.sticky?3:void 0,left:S.fixed?q(S.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${I})`:void 0}};function h(S){const I=i.value.find($=>$.key===S.key);return I?I.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:v,backgroundColorStyles:d}=At(e,"color"),f=w(()=>({headers:y.value,columns:g.value,toggleSort:o,isSorted:u,sortBy:i.value,someSelected:l.value,allSelected:r.value,selectAll:c,getSortIcon:h,getFixedStyles:b})),D=S=>{let{column:I,x:$,y:Y}=S;const fe=I.key==="data-table-select"||I.key==="data-table-expand";return s(De,{tag:"th",align:I.align,class:["v-data-table__th",{"v-data-table__th--sortable":I.sortable,"v-data-table__th--sorted":u(I)},V.value],style:{width:q(I.width),minWidth:q(I.width),...b(I,Y)},colspan:I.colspan,rowspan:I.rowspan,onClick:I.sortable?()=>o(I):void 0,lastFixed:I.lastFixed,noPadding:fe},{default:()=>{var ue;const le=`column.${I.key}`,ne={column:I,selectAll:c,isSorted:u,toggleSort:o,sortBy:i.value,someSelected:l.value,allSelected:r.value,getSortIcon:h};return n[le]?n[le](ne):I.key==="data-table-select"?((ue=n["column.data-table-select"])==null?void 0:ue.call(n,ne))??(m&&s(Se,{modelValue:r.value,indeterminate:l.value&&!r.value,"onUpdate:modelValue":c},null)):s("div",{class:"v-data-table-header__content"},[s("span",null,[I.title]),I.sortable&&s(Ie,{key:"icon",class:"v-data-table-header__sort-icon",icon:h(I)},null),e.multiSort&&u(I)&&s("div",{key:"badge",class:["v-data-table-header__sort-badge",...v.value],style:d.value},[i.value.findIndex(W=>W.key===I.key)+1])])}})};ce(()=>s(B,null,[n.headers?n.headers(f.value):y.value.map((S,I)=>s("tr",null,[S.map(($,Y)=>s(D,{column:$,x:Y,y:I},null))])),e.loading&&s("tr",{class:"v-data-table-progress"},[s("th",{colspan:g.value.length},[s(Pt,{name:"v-data-table-progress",active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),Zt=_({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Ke=Symbol.for("vuetify:data-table-group");function Qt(e){return{groupBy:z(e,"groupBy")}}function ea(e){const{groupBy:t,sortBy:n}=e,a=T(new Set),o=w(()=>t.value.map(c=>({...c,order:c.order??!1})).concat(n.value));function i(c){return a.value.has(c.id)}function u(c){const m=new Set(a.value);i(c)?m.delete(c.id):m.add(c.id),a.value=m}function l(c){function m(g){const y=[];for(const V of g.items)"type"in V&&V.type==="group"?y.push(...m(V)):y.push(V);return y}return m({type:"group",items:c,id:"dummy",key:"dummy",value:"dummy",depth:0})}const r={sortByWithGroups:o,toggleGroup:u,opened:a,groupBy:t,extractRows:l,isGroupOpen:i};return K(Ke,r),r}function Xe(){const e=X(Ke);if(!e)throw new Error("Missing group!");return e}function ta(e,t){if(!e.length)return[];const n=new Map;for(const a of e){const o=Ve(a.raw,t);n.has(o)||n.set(o,[]),n.get(o).push(a)}return n}function Ye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const o=ta(e,t[0]),i=[],u=t.slice(1);return o.forEach((l,r)=>{const c=t[0],m=`${a}_${c}_${r}`;i.push({depth:n,id:m,key:c,value:r,items:u.length?Ye(l,u,n+1,m):l,type:"group"})}),i}function We(e,t){const n=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&n.push(a),(t.has(a.id)||a.value==null)&&n.push(...We(a.items,t))):n.push(a);return n}function aa(e,t,n){return{flatItems:w(()=>{if(!t.value.length)return e.value;const o=Ye(e.value,t.value.map(i=>i.key));return We(o,n.value)})}}const la=_({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),na=ee()({name:"VDataTableGroupHeaderRow",props:la(),setup(e,t){let{slots:n}=t;const{isGroupOpen:a,toggleGroup:o,extractRows:i}=Xe(),{isSelected:u,isSomeSelected:l,select:r}=ve(),{columns:c}=me(),m=w(()=>i([e.item]));return()=>s("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[c.value.map(g=>{var y,V;if(g.key==="data-table-group"){const b=a(e.item)?"$expand":"$next",h=()=>o(e.item);return((y=n["data-table-group"])==null?void 0:y.call(n,{item:e.item,count:m.value.length,props:{icon:b,onClick:h}}))??s(De,{class:"v-data-table-group-header-row__column"},{default:()=>[s(F,{size:"small",variant:"text",icon:b,onClick:h},null),s("span",null,[e.item.value]),s("span",null,[O("("),m.value.length,O(")")])]})}if(g.key==="data-table-select"){const b=u(m.value),h=l(m.value)&&!b,v=d=>r(m.value,d);return((V=n["data-table-select"])==null?void 0:V.call(n,{props:{modelValue:b,indeterminate:h,"onUpdate:modelValue":v}}))??s("td",null,[s(Se,{modelValue:b,indeterminate:h,"onUpdate:modelValue":v},null)])}return s("td",null,null)})])}}),ua=_({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Ze=Symbol.for("vuetify:datatable:expanded");function oa(e){const t=N(e,"expandOnClick"),n=z(e,"expanded",e.expanded,l=>new Set(l),l=>[...l.values()]);function a(l,r){const c=new Set(n.value);r?c.add(l.value):c.delete(l.value),n.value=c}function o(l){return n.value.has(l.value)}function i(l){a(l,!o(l))}const u={expand:a,expanded:n,expandOnClick:t,isExpanded:o,toggleExpand:i};return K(Ze,u),u}function Qe(){const e=X(Ze);if(!e)throw new Error("foo");return e}const sa=_({index:Number,item:Object,onClick:Function},"VDataTableRow"),ra=gt({name:"VDataTableRow",props:sa(),setup(e,t){let{slots:n}=t;const{isSelected:a,toggleSelect:o}=ve(),{isExpanded:i,toggleExpand:u}=Qe(),{columns:l}=me();ce(()=>s("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!e.onClick}],onClick:e.onClick},[e.item&&l.value.map((r,c)=>s(De,{align:r.align,fixed:r.fixed,fixedOffset:r.fixedOffset,lastFixed:r.lastFixed,noPadding:r.key==="data-table-select"||r.key==="data-table-expand",width:r.width},{default:()=>{var V,b;const m=e.item,g=`item.${r.key}`,y={index:e.index,item:e.item,columns:l.value,isSelected:a,toggleSelect:o,isExpanded:i,toggleExpand:u};return n[g]?n[g](y):r.key==="data-table-select"?((V=n["item.data-table-select"])==null?void 0:V.call(n,y))??s(Se,{disabled:!m.selectable,modelValue:a([m]),onClick:Ce(()=>o(m),["stop"])},null):r.key==="data-table-expand"?((b=n["item.data-table-expand"])==null?void 0:b.call(n,y))??s(F,{icon:i(m)?"$collapse":"$expand",size:"small",variant:"text",onClick:Ce(()=>u(m),["stop"])},null):Q(m.columns,r.key)}}))]))}}),et=_({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},"VDataTableRows"),Oe=ee()({name:"VDataTableRows",props:et(),setup(e,t){let{emit:n,slots:a}=t;const{columns:o}=me(),{expandOnClick:i,toggleExpand:u,isExpanded:l}=Qe(),{isSelected:r,toggleSelect:c}=ve(),{toggleGroup:m,isGroupOpen:g}=Xe(),{t:y}=he();return ce(()=>{var V;return e.loading&&a.loading?s("tr",{class:"v-data-table-rows-loading",key:"loading"},[s("td",{colspan:o.value.length},[a.loading()])]):!e.loading&&!e.items.length&&!e.hideNoData?s("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[s("td",{colspan:o.value.length},[((V=a["no-data"])==null?void 0:V.call(a))??y(e.noDataText)])]):s(B,null,[e.items.map((b,h)=>{var f;if(b.type==="group")return a["group-header"]?a["group-header"]({index:h,item:b,columns:o.value,isExpanded:l,toggleExpand:u,isSelected:r,toggleSelect:c,toggleGroup:m,isGroupOpen:g}):s(na,{key:`group-header_${b.id}`,item:b},a);const v={index:h,item:b,columns:o.value,isExpanded:l,toggleExpand:u,isSelected:r,toggleSelect:c},d={...v,props:{key:`item_${b.key??b.index}`,onClick:i.value||e["onClick:row"]?D=>{var S;i.value&&u(b),(S=e["onClick:row"])==null||S.call(e,D,{item:b})}:void 0,index:h,item:b}};return s(B,null,[a.item?a.item(d):s(ra,d.props,a),l(b)&&((f=a["expanded-row"])==null?void 0:f.call(a,v))])})])}),{}}}),ia=_({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataTable-items");function da(e,t,n,a){const o=e.returnObject?t:Q(t,e.itemValue),i=Q(t,e.itemSelectable,!0),u=a.reduce((l,r)=>(l[r.key]=Q(t,r.value??r.key),l),{});return{type:"item",key:e.returnObject?Q(t,e.itemValue):o,index:n,value:o,selectable:i,columns:u,raw:t}}function ca(e,t,n){return t.map((a,o)=>da(e,a,o,n))}function ma(e,t){return{items:w(()=>ca(e,e.items,t.value))}}function va(e){let{page:t,itemsPerPage:n,sortBy:a,groupBy:o,search:i}=e;const u=pt("VDataTable"),l=w(()=>({page:t.value,itemsPerPage:n.value,sortBy:a.value,groupBy:o.value,search:i.value}));G(()=>i==null?void 0:i.value,()=>{t.value=1});let r=null;G(l,()=>{yt(r,l.value)||(u.emit("update:options",l.value),r=l.value)},{deep:!0,immediate:!0})}const fa=_({...et(),width:[String,Number],search:String,...ua(),...Zt(),...Gt(),...ia(),...jt(),...zt(),...Je(),...Nt()},"DataTable"),ga=_({...Ot(),...fa(),...St(),...Ge()},"VDataTable"),pa=ee()({name:"VDataTable",props:ga(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{emit:n,slots:a}=t;const{groupBy:o}=Qt(e),{sortBy:i,multiSort:u,mustSort:l}=Jt(e),{page:r,itemsPerPage:c}=Bt(e),{columns:m,headers:g}=Mt(e,{groupBy:o,showSelect:N(e,"showSelect"),showExpand:N(e,"showExpand")}),{items:y}=ma(e,m),V=N(e,"search"),{filteredItems:b}=Dt(e,y,V,{transform:ge=>ge.columns}),{toggleSort:h}=Kt({sortBy:i,multiSort:u,mustSort:l,page:r}),{sortByWithGroups:v,opened:d,extractRows:f,isGroupOpen:D,toggleGroup:S}=ea({groupBy:o,sortBy:i}),{sortedItems:I}=Yt(e,b,v),{flatItems:$}=aa(I,o,d),Y=w(()=>$.value.length),{startIndex:fe,stopIndex:le,pageCount:ne,setItemsPerPage:ue}=$t({page:r,itemsPerPage:c,itemsLength:Y}),{paginatedItems:W}=Rt({items:$,startIndex:fe,stopIndex:le,itemsPerPage:c}),Te=w(()=>f(W.value)),{isSelected:tt,select:at,selectAll:lt,toggleSelect:nt,someSelected:ut,allSelected:ot}=qt(e,{allItems:y,currentPage:Te}),{isExpanded:st,toggleExpand:rt}=oa(e);va({page:r,itemsPerPage:c,sortBy:i,groupBy:o,search:V}),bt({VDataTableRows:{hideNoData:N(e,"hideNoData"),noDataText:N(e,"noDataText"),loading:N(e,"loading"),loadingText:N(e,"loadingText")}});const L=w(()=>({page:r.value,itemsPerPage:c.value,sortBy:i.value,pageCount:ne.value,toggleSort:h,setItemsPerPage:ue,someSelected:ut.value,allSelected:ot.value,isSelected:tt,select:at,selectAll:lt,toggleSelect:nt,isExpanded:st,toggleExpand:rt,isGroupOpen:D,toggleGroup:S,items:Te.value,groupedItems:W.value,columns:m.value,headers:g.value}));return ce(()=>{const[ge]=Ae.filterProps(e),[it]=Ne.filterProps(e),[dt]=Oe.filterProps(e),[ct]=Ee.filterProps(e);return s(Ee,be({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ct),{top:()=>{var Z;return(Z=a.top)==null?void 0:Z.call(a,L.value)},default:()=>{var Z,ke,xe,we;return a.default?a.default(L.value):s(B,null,[(Z=a.colgroup)==null?void 0:Z.call(a,L.value),s("thead",null,[s(Ne,it,a)]),(ke=a.thead)==null?void 0:ke.call(a,L.value),s("tbody",null,[a.body?a.body(L.value):s(Oe,be(dt,{items:W.value}),a)]),(xe=a.tbody)==null?void 0:xe.call(a,L.value),(we=a.tfoot)==null?void 0:we.call(a,L.value)])},bottom:()=>a.bottom?a.bottom(L.value):s(B,null,[s(Ae,ge,{prepend:a["footer.prepend"]})])})}),{}}}),ya=M({__name:"EditFieldDialogExtras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(e){const t=H(e,"modelValue"),n=de.getInstance(),a=T([]),o=T([]);return n==null||n.getConventionExtras(t.value.ConventionUUID).then(i=>{a.value=i;const u=t.value.Values.find(l=>l.Title==="SelectedExtras");if(u)try{o.value=JSON.parse(u.Value)}catch{}}),G(o,()=>{const i=t.value.Values.find(u=>u.Title==="SelectedExtras");if(i)i.Value=JSON.stringify(o.value);else{const u={ID:0,FieldValueUUID:A(),FieldID:t.value.ID,FieldUUID:t.value.FieldUUID,Title:"SelectedExtras",Value:JSON.stringify(o.value)};t.value.Values.push(u)}}),(i,u)=>(k(!0),te(B,null,ae(a.value,l=>(k(),U(J,{key:l.ExtraUUID,modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=r=>o.value=r),label:l.Name,value:l.ExtraUUID,name:t.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),ba=M({__name:"EditFieldDialogInterests",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(e){const t=H(e,"modelValue"),n=de.getInstance(),a=T([]),o=T([]);return n==null||n.getConventionInterests(t.value.ConventionUUID).then(i=>{a.value=i;const u=t.value.Values.find(l=>l.Title==="SelectedInterests");if(u)try{o.value=JSON.parse(u.Value)}catch{}}),G(o,()=>{const i=t.value.Values.find(u=>u.Title==="SelectedInterests");if(i)i.Value=JSON.stringify(o.value);else{const u={ID:0,FieldValueUUID:A(),FieldID:t.value.ID,FieldUUID:t.value.FieldUUID,Title:"SelectedInterests",Value:JSON.stringify(o.value)};t.value.Values.push(u)}}),(i,u)=>(k(!0),te(B,null,ae(a.value,l=>(k(),U(J,{key:l.InterestUUID,modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=r=>o.value=r),label:l.Name,value:l.InterestUUID,name:t.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),Va=M({__name:"EditFieldDialogTickets",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(e){const t=H(e,"modelValue"),n=de.getInstance(),a=T([]),o=T([]);return n==null||n.getConventionTickets(t.value.ConventionUUID).then(i=>{a.value=i;const u=t.value.Values.find(l=>l.Title==="SelectedTickets");if(u)try{o.value=JSON.parse(u.Value)}catch{}}),G(o,()=>{const i=t.value.Values.find(u=>u.Title==="SelectedTickets");if(i)i.Value=JSON.stringify(o.value);else{const u={ID:0,FieldValueUUID:A(),FieldID:t.value.ID,FieldUUID:t.value.FieldUUID,Title:"SelectedTickets",Value:JSON.stringify(o.value)};t.value.Values.push(u)}}),(i,u)=>(k(!0),te(B,null,ae(a.value.filter(l=>l&&l.Type===P(Tt).TICKET_TYPE_GROUP),l=>(k(),U(J,{key:l.TicketUUID,modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=r=>o.value=r),label:l.Name,value:l.TicketUUID,name:t.value.Name,"hide-details":""},null,8,["modelValue","label","value","name"]))),128))}}),Ia=M({__name:"EditFieldDialogAccommodation",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(e){const t=H(e,"modelValue"),n=de.getInstance(),a=T([]),o=T(t.value.Values.map(u=>u.Value)),i=()=>{t.value.Values=o.value.map(u=>{var l,r,c;return{ID:0,FieldValueUUID:A(),FieldID:((l=t.value)==null?void 0:l.ID)||0,FieldUUID:((r=t.value)==null?void 0:r.FieldUUID)||"",Title:((c=a.value.find(m=>m.AccommodationUUID==u))==null?void 0:c.Name)||"",Value:u}})};return n==null||n.getConventionAccommodation(t.value.ConventionUUID).then(u=>{u&&(a.value=u)}),(u,l)=>(k(!0),te(B,null,ae(a.value,r=>(k(),U(J,{key:r.ID,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=c=>o.value=c),label:r.Name,value:r.AccommodationUUID,"hide-details":"",onChange:i},null,8,["modelValue","label","value"]))),128))}}),ha=M({__name:"EditFieldDialogAge",props:ie({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){var m,g,y;const t=H(e,"modelValue"),n=new Date,a=n.getFullYear(),o=(n.getMonth()+1).toLocaleString(navigator.language,{minimumIntegerDigits:2}),i=n.getDate().toLocaleString(navigator.language,{minimumIntegerDigits:2}),u=T(parseInt(((m=t.value.Values.find(V=>V.Title==="MIN_AGE"))==null?void 0:m.Value)||"18")),l=T(((g=t.value.Values.find(V=>V.Title==="BEFORE_DATE"))==null?void 0:g.Value)||`${a}-${o}-${i}`),r=T(((y=t.value.Values.find(V=>V.Title==="UNDER_AGE_APPLY_TAG"))==null?void 0:y.Value)||""),c=()=>{var V,b,h,v,d,f;t.value.Values=[{ID:0,FieldValueUUID:A(),FieldID:((V=t.value)==null?void 0:V.ID)||0,FieldUUID:((b=t.value)==null?void 0:b.FieldUUID)||"",Title:"MIN_AGE",Value:u.value.toString()},{ID:0,FieldValueUUID:A(),FieldID:((h=t.value)==null?void 0:h.ID)||0,FieldUUID:((v=t.value)==null?void 0:v.FieldUUID)||"",Title:"BEFORE_DATE",Value:l.value},{ID:0,FieldValueUUID:A(),FieldID:((d=t.value)==null?void 0:d.ID)||0,FieldUUID:((f=t.value)==null?void 0:f.FieldUUID)||"",Title:"UNDER_AGE_APPLY_TAG",Value:r.value}]};return c(),(V,b)=>(k(),U(re,{class:"pl-0 pr-0",fluid:!0},{default:p(()=>[s(C,null,{default:p(()=>[s(x,{cols:"12",sm:"6"},{default:p(()=>[s(R,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=h=>u.value=h),modelModifiers:{number:!0},type:"number",label:"Minimum Age",variant:"outlined",onChange:c},null,8,["modelValue"])]),_:1}),s(x,{cols:"12",sm:"6"},{default:p(()=>[s(R,{modelValue:l.value,"onUpdate:modelValue":b[1]||(b[1]=h=>l.value=h),type:"date",label:"Date to attain minimum age by",variant:"outlined",onChange:c},null,8,["modelValue"])]),_:1})]),_:1}),s(C,null,{default:p(()=>[s(x,null,{default:p(()=>[s(kt,{modelValue:r.value,"onUpdate:modelValue":b[2]||(b[2]=h=>r.value=h),convention:V.convention,chips:!0,clearable:!0,variant:"outlined",label:`Tags applied to users under ${u.value} at time of data entry`,onChange:c},null,8,["modelValue","convention","label"])]),_:1})]),_:1})]),_:1}))}}),Sa=j("h4",null,"Values",-1),Da=j("h4",null,"Accommodation",-1),Ta=j("h4",null,"Age",-1),ka=j("h4",null,"Additional Purchases",-1),xa=j("h4",null,"Available Interests",-1),wa=j("h4",null,"Tickets",-1),Pa=j("h4",{class:"mb-3"},"Field Preview",-1),Ua=M({__name:"EditFieldDialog",props:ie({convention:{},field:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:ie(["update:field"],["update:modelValue"]),setup(e,{emit:t}){const n=e,{convention:a,title:o=""}=n,i=H(e,"modelValue"),u=Vt(n,t,void 0,void 0,"field"),l=T(ye(u.value)),r=T(""),c=T(l.value.Type);G(u,()=>{l.value=ye(u.value)});const m=()=>{i.value=!1},g=()=>{l.value=ye(u.value)},y=()=>{u.value=l.value},V=()=>{l.value.Values.push({ID:0,FieldValueUUID:A(),FieldID:l.value.ID,FieldUUID:l.value.FieldUUID,Title:"",Value:""})},b=v=>{l.value.Values.splice(v,1)},h=()=>{r.value="",l.value.Values=[]};return G(c,(v,d)=>{v!==d&&(l.value.Type=v,h())}),(v,d)=>(k(),U(mt,{modelValue:i.value,"onUpdate:modelValue":d[13]||(d[13]=f=>i.value=f),onReset:g,onSave:y,title:P(o),color:"primary"},{default:p(()=>[s(re,{class:"pa-0",fluid:!0},{default:p(()=>[s(C,null,{default:p(()=>[s(x,{cols:"12"},{default:p(()=>[s(re,{class:"pa-0",fluid:!0},{default:p(()=>[s(C,null,{default:p(()=>[s(x,{cols:"12",sm:"6",md:"4"},{default:p(()=>[s(R,{modelValue:l.value.Name,"onUpdate:modelValue":d[0]||(d[0]=f=>l.value.Name=f),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(x,{cols:"12",sm:"6",md:"4"},{default:p(()=>[s(R,{modelValue:l.value.Label,"onUpdate:modelValue":d[1]||(d[1]=f=>l.value.Label=f),label:"Label",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(x,{cols:"12",sm:"6",md:"4"},{default:p(()=>[s(R,{modelValue:l.value.Hint,"onUpdate:modelValue":d[2]||(d[2]=f=>l.value.Hint=f),label:"Hint",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(x,{cols:"12",sm:"6",md:"4"},{default:p(()=>[s(R,{modelValue:l.value.Placeholder,"onUpdate:modelValue":d[3]||(d[3]=f=>l.value.Placeholder=f),label:"Placeholder",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(x,{cols:"12",sm:"6",md:"4"},{default:p(()=>[s($e,{modelValue:c.value,"onUpdate:modelValue":d[4]||(d[4]=f=>c.value=f),label:"Type",variant:"outlined",items:P(It),"hide-details":""},null,8,["modelValue","items"])]),_:1}),l.value.Type===P(E).SELECT||l.value.Type===P(E).CHECKBOX?(k(),U(x,{key:0,cols:"12",sm:"6",md:"4",class:"py-0"},{default:p(()=>[s(J,{modelValue:l.value.Multiple,"onUpdate:modelValue":d[5]||(d[5]=f=>l.value.Multiple=f),label:"Multiple Items",hint:"Can select multiple items from list","hide-details":"",density:"compact"},null,8,["modelValue"]),l.value.Type===P(E).SELECT?(k(),U(J,{key:0,modelValue:l.value.Autofill,"onUpdate:modelValue":d[6]||(d[6]=f=>l.value.Autofill=f),label:"Searchable List","hide-details":"",density:"compact"},null,8,["modelValue"])):se("",!0)]),_:1})):se("",!0)]),_:1}),l.value.Type===P(E).SELECT||l.value.Type===P(E).CHECKBOX&&l.value.Multiple||l.value.Type===P(E).RADIO?(k(),U(C,{key:0},{default:p(()=>[s(x,null,{default:p(()=>[Sa,s(re,{fluid:!0,class:"px-0"},{default:p(()=>[(k(!0),te(B,null,ae(l.value.Values,(f,D)=>(k(),U(C,{key:f.ID},{default:p(()=>[s(x,{cols:"12",sm:"5",md:"6"},{default:p(()=>[s(R,{modelValue:f.Title,"onUpdate:modelValue":S=>f.Title=S,label:"Display",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(x,{cols:"9",sm:"5",md:"5"},{default:p(()=>[s(R,{modelValue:f.Value,"onUpdate:modelValue":S=>f.Value=S,label:"Internal Value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(x,{cols:"3",sm:"2",md:"1",class:"d-flex align-center"},{default:p(()=>[s(F,{icon:"mdi:mdi-window-close",size:"small",color:"red",onClick:S=>b(D)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s(C,null,{default:p(()=>[s(x,null,{default:p(()=>[s(F,{"prepend-icon":"mdi:mdi-plus",color:"primary",onClick:V},{default:p(()=>[O("Add Item")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):l.value.Type===P(E).ACCOMMODATION?(k(),U(C,{key:1},{default:p(()=>[s(x,null,{default:p(()=>[Da,s(Ia,{modelValue:l.value,"onUpdate:modelValue":d[7]||(d[7]=f=>l.value=f)},null,8,["modelValue"])]),_:1})]),_:1})):l.value.Type===P(E).AGE?(k(),U(C,{key:2},{default:p(()=>[s(x,null,{default:p(()=>[Ta,s(ha,{modelValue:l.value,"onUpdate:modelValue":d[8]||(d[8]=f=>l.value=f),convention:P(a)},null,8,["modelValue","convention"])]),_:1})]),_:1})):l.value.Type===P(E).EXTRAS?(k(),U(C,{key:3},{default:p(()=>[s(x,null,{default:p(()=>[ka,s(ya,{modelValue:l.value,"onUpdate:modelValue":d[9]||(d[9]=f=>l.value=f)},null,8,["modelValue"])]),_:1})]),_:1})):l.value.Type===P(E).INTERESTS?(k(),U(C,{key:4},{default:p(()=>[s(x,null,{default:p(()=>[xa,s(ba,{modelValue:l.value,"onUpdate:modelValue":d[10]||(d[10]=f=>l.value=f)},null,8,["modelValue"])]),_:1})]),_:1})):l.value.Type===P(E).TICKET?(k(),U(C,{key:5},{default:p(()=>[s(x,null,{default:p(()=>[wa,s(Va,{modelValue:l.value,"onUpdate:modelValue":d[11]||(d[11]=f=>l.value=f)},null,8,["modelValue"])]),_:1})]),_:1})):se("",!0)]),_:1})]),_:1}),s(x,{cols:"12"},{default:p(()=>[s(Ut,{elevation:"5",class:"pa-2",color:"text-center"},{default:p(()=>[Pa,s(ht,{admin:!0,field:l.value,convention:P(a),modelValue:r.value,"onUpdate:modelValue":d[12]||(d[12]=f=>r.value=f)},null,8,["field","convention","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),actions:p(()=>[s(F,{color:"blue-darken-1",variant:"text",onClick:m},{default:p(()=>[O(" Cancel ")]),_:1}),s(F,{color:"blue-darken-1",variant:"text",onClick:g},{default:p(()=>[O(" Reset ")]),_:1}),s(Le),s(F,{color:"blue-darken-1",variant:"text",onClick:y},{default:p(()=>[O(" Save ")]),_:1})]),_:1},8,["modelValue","title"]))}}),Xa=M({__name:"FieldEditor",props:{modelValue:{required:!0}},emits:ie(["refresh"],["update:modelValue"]),setup(e){const t=H(e,"modelValue"),n=_t(),a=T(!1),o=T(!1),i=T([{key:"Label",title:"Label",align:"start",sortable:!0},{key:"Name",title:"Internal Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),u=T([]);n.getConventionFields(t.value.ConventionUUID).then(D=>{D&&(u.value=D)});const l=T(-1),r=T({ID:0,FieldUUID:A(),ConventionID:t.value.ID,ConventionUUID:t.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[]}),c=w(()=>l.value===-1?"New Field":"Edit Field"),m=()=>({ID:0,FieldUUID:A(),ConventionID:t.value.ID,ConventionUUID:t.value.ConventionUUID,Autofill:!1,Hint:"",Label:"",Multiple:!1,Name:"",Placeholder:"",Type:"TEXT",Values:[]}),g=T(m()),y=()=>{g.value.FieldUUID=A(),r.value=Object.assign({},m()),l.value=-1,a.value=!0},V=D=>{l.value=u.value.indexOf(D),r.value=Object.assign({},D),a.value=!0},b=D=>{l.value=u.value.indexOf(D),r.value=Object.assign({},D),o.value=!0},h=()=>{n.deleteField(r.value.FieldUUID).then(D=>{D&&(u.value.splice(l.value,1),d())})},v=()=>{a.value=!1,Fe(()=>{r.value=Object.assign({},g.value),l.value=-1})},d=()=>{o.value=!1,Fe(()=>{r.value=Object.assign({},g.value),l.value=-1})},f=()=>{n.saveField(r.value).then(D=>{D&&(l.value>-1?Object.assign(u.value[l.value],D):u.value.push(D),v())})};return(D,S)=>(k(),U(P(pa),{headers:i.value,items:u.value,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:p(()=>[s(Ft,{color:"primary"},{default:p(()=>[s(Ct,null,{default:p(()=>[O("Field Editor")]),_:1}),s(Et,{class:"mx-4",inset:!0,vertical:!0}),s(Le),s(F,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:y},{default:p(()=>[O(" New Item ")]),_:1}),s(vt,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=I=>o.value=I),onDelete:h},null,8,["modelValue"])]),_:1}),a.value?(k(),U(Ua,{key:0,modelValue:a.value,"onUpdate:modelValue":S[1]||(S[1]=I=>a.value=I),field:r.value,"onUpdate:field":[S[2]||(S[2]=I=>r.value=I),f],title:c.value,convention:t.value},null,8,["modelValue","field","title","convention"])):se("",!0)]),"item.actions":p(({item:I})=>[s(Ie,{size:"small",class:"me-2",onClick:$=>V(I.raw)},{default:p(()=>[O(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),s(Ie,{size:"small",onClick:$=>b(I.raw)},{default:p(()=>[O(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}});export{pa as V,Xa as _};
