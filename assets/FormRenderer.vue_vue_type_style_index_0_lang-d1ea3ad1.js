import{p as _e,r as _,e as ne,S as m,y as cl,aA as Re,ah as We,al as ml,an as Qe,n as Fe,ae as vl,s as Ae,u as Oe,w as J,E as Ge,v as s,H as $,x as oe,N as q,aB as fl,I as ce,a1 as Q,a2 as me,a5 as we,K as o,R,U as K,O as G,M as r,Z as j,L as b,Q as P,a3 as Ue,P as Ze,ar as Me,$ as el,Y as pl,ac as Ke,a as gl,ax as hl,J as Ul,aC as He}from"./index-25f41150.js";import{F as ue}from"./form-e2a93b7c.js";import{a as yl}from"./submission-56c4c4f1.js";import{a as Il,V as de,u as Ne,m as bl,b as ll,c as Tl,d as Vl}from"./VCheckbox-e1509766.js";import{s as De}from"./index-71069b21.js";import{f as Dl,V as ie,a as W,e as ye,d as Ve,c as tl}from"./VList-5553742f.js";import{a as Z,V as N}from"./VRow-df9d4574.js";import{m as Cl,u as kl,a as El,b as Sl,V as $e,c as Al}from"./copyToClipboard-85dcca9e.js";import{v as Ol,u as qe,V as Ce,z as _l,j as Rl}from"./VContainer-459212ff.js";import{a as Ml,e as Ll,_ as Ye}from"./VChip-1dc1efee.js";import{V as ae}from"./VBtn-b43a7716.js";import{k as Pl,l as $l,j as Fl,V as Ie,m as wl,f as Xe,n as Nl}from"./VTextField-45573a95.js";import{V as ql}from"./VTextarea-89b15867.js";import{m as xl}from"./VAvatar-9a046181.js";import{G as Bl}from"./userData-bf2ea0be.js";import{v as Le}from"./v4-a960c1f4.js";import{e as Gl,V as Kl,a as Hl,c as Yl}from"./VCard-c23c6a8c.js";import{V as Xl}from"./VForm-1e090097.js";const Je=(e,f,a)=>{if(a>=e.length){let E=a-e.length+1;for(;E--;)e.push(void 0)}e.splice(a,0,e.splice(f,1)[0])},ke=e=>{e.sort((f,a)=>(f.Order?f.Order:0)-(a.Order?a.Order:0)),e.forEach((f,a)=>{f.Order=a})},Xt=(e,f)=>{const a=f.indexOf(e);if(a===0)return;const E=e.Order;e.Order=f[a-1].Order,f[a-1].Order=E,ke(f)},Jt=(e,f)=>{const a=f.indexOf(e);if(a>=f.length-1)return;const E=e.Order;e.Order=f[a+1].Order,f[a+1].Order=E,ke(f)},Pe=e=>(ke(e),e),jt=e=>(f,a)=>f[e]<a[e]?-1:f[e]>a[e]?1:0;var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const zt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var al=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(al||{});const Wt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,f,a)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),jl=_e({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function zl(e,f,a){var g;const E=[],I=(a==null?void 0:a.default)??Jl,U=a!=null&&a.filterKeys?We(a.filterKeys):!1,k=Object.keys((a==null?void 0:a.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return E;e:for(let c=0;c<e.length;c++){const S=e[c],n={},d={};let T=-1;if(f&&!(a!=null&&a.noFilter)){if(typeof S=="object"){const i=U||Object.keys(S);for(const t of i){const u=ml(S,t,S),l=(g=a==null?void 0:a.customKeyFilter)==null?void 0:g[t];if(T=l?l(u,f,S):I(u,f,S),T!==-1&&T!==!1)l?n[t]=T:d[t]=T;else if((a==null?void 0:a.filterMode)==="every")continue e}}else T=I(S,f,S),T!==-1&&T!==!1&&(d.title=T);const v=Object.keys(d).length,p=Object.keys(n).length;if(!v&&!p||(a==null?void 0:a.filterMode)==="union"&&p!==k&&!v||(a==null?void 0:a.filterMode)==="intersection"&&(p!==k||!v))continue}E.push({index:c,matches:{...d,...n}})}return E}function Wl(e,f,a,E){const I=_([]),U=_(new Map),k=ne(()=>E!=null&&E.transform?m(f).map(E==null?void 0:E.transform):m(f));cl(()=>{const c=typeof Re(a)!="string"&&typeof Re(a)!="number"?"":String(Re(a)),S=zl(k.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),n=m(f),d=[],T=new Map;S.forEach(v=>{let{index:p,matches:i}=v;const t=n[p];d.push(t),T.set(t.value,i)}),I.value=d,U.value=T});function g(c){return U.value.get(c.value)}return{filteredItems:I,filteredMatches:U,getMatches:g}}function Ql(e,f,a){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?s($,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),s("span",{class:"v-autocomplete__mask"},[e.substr(f,a)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(f+a)])]):e}const Zl=_e({autoSelectFirst:{type:[Boolean,String]},search:String,...jl({filterKeys:["title"]}),...Cl(),...Qe(Pl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...xl({transition:!1})},"VAutocomplete"),je=Fe()({name:"VAutocomplete",props:Zl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:a}=f;const{t:E}=vl(),I=_(),U=Ae(!1),k=Ae(!0),g=_(!1),c=_(),S=Oe(e,"menu"),n=ne({get:()=>S.value,set:y=>{var x;S.value&&!y&&((x=c.value)!=null&&x.Î¨openChildren)||(S.value=y)}}),d=Ae(-1),T=ne(()=>{var y;return(y=I.value)==null?void 0:y.color}),{items:v,transformIn:p,transformOut:i}=Dl(e),{textColorClasses:t,textColorStyles:u}=Ol(T),l=Oe(e,"search",""),h=Oe(e,"modelValue",[],y=>p(y===null?[null]:We(y)),y=>{const x=i(y);return e.multiple?x:x[0]??null}),V=$l(),{filteredItems:O,getMatches:te}=Wl(e,v,()=>k.value?"":l.value),D=ne(()=>h.value.map(y=>v.value.find(x=>e.valueComparator(x.value,y.value))||y)),C=ne(()=>e.hideSelected?O.value.filter(y=>!D.value.some(x=>x.value===y.value)):O.value),H=ne(()=>D.value.map(y=>y.props.value)),ve=ne(()=>D.value[d.value]),fe=ne(()=>{var x;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&l.value===((x=C.value[0])==null?void 0:x.title))&&C.value.length>0&&!k.value&&!g.value}),be=ne(()=>e.hideNoData&&!v.value.length||e.readonly||(V==null?void 0:V.isReadonly.value)),se=_(),{onListScroll:M,onListKeydown:L}=kl(se,I);function A(y){e.openOnClear&&(n.value=!0),l.value=""}function w(){be.value||(n.value=!0)}function pe(y){be.value||(U.value&&(y.preventDefault(),y.stopPropagation()),n.value=!n.value)}function nl(y){var he,F,z;if(e.readonly||V!=null&&V.isReadonly.value)return;const x=I.value.selectionStart,Y=H.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(n.value=!0),["Escape"].includes(y.key)&&(n.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(fe.value&&["Enter","Tab"].includes(y.key)&&ge(O.value[0]),k.value=!0),y.key==="ArrowDown"&&fe.value&&((he=se.value)==null||he.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(d.value<0){y.key==="Backspace"&&!l.value&&(d.value=Y-1);return}const B=d.value;ve.value&&ge(ve.value),d.value=B>=Y-1?Y-2:B}if(y.key==="ArrowLeft"){if(d.value<0&&x>0)return;const B=d.value>-1?d.value-1:Y-1;D.value[B]?d.value=B:(d.value=-1,I.value.setSelectionRange((F=l.value)==null?void 0:F.length,(z=l.value)==null?void 0:z.length))}if(y.key==="ArrowRight"){if(d.value<0)return;const B=d.value+1;D.value[B]?d.value=B:(d.value=-1,I.value.setSelectionRange(0,0))}}}function ul(y){l.value=y.target.value}function il(){var y;U.value&&(k.value=!0,(y=I.value)==null||y.focus())}function ol(y){U.value=!0,setTimeout(()=>{g.value=!0})}function sl(y){g.value=!1}function rl(y){(y==null||y===""&&!e.multiple)&&(h.value=[])}const Te=Ae(!1);function ge(y){if(e.multiple){const x=H.value.findIndex(Y=>e.valueComparator(Y,y.value));if(x===-1)h.value=[...h.value,y];else{const Y=[...h.value];Y.splice(x,1),h.value=Y}}else h.value=[y],Te.value=!0,l.value=y.title,n.value=!1,k.value=!0,Ge(()=>Te.value=!1)}return J(U,(y,x)=>{var Y;y!==x&&(y?(Te.value=!0,l.value=e.multiple?"":String(((Y=D.value.at(-1))==null?void 0:Y.props.title)??""),k.value=!0,Ge(()=>Te.value=!1)):(!e.multiple&&!l.value?h.value=[]:fe.value&&!g.value&&!D.value.some(he=>{let{value:F}=he;return F===C.value[0].value})&&ge(C.value[0]),n.value=!1,l.value="",d.value=-1))}),J(l,y=>{!U.value||Te.value||(y&&(n.value=!0),k.value=!y)}),qe(()=>{const y=!!(e.chips||a.chip),x=!!(!e.hideNoData||C.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),Y=h.value.length>0,[he]=Ie.filterProps(e);return s(Ie,oe({ref:I},he,{modelValue:l.value,"onUpdate:modelValue":rl,focused:U.value,"onUpdate:focused":F=>U.value=F,validationValue:h.externalValue,dirty:Y,onInput:ul,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":n.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!a.selection,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Y?void 0:e.placeholder,"onClick:clear":A,"onMousedown:control":w,onKeydown:nl}),{...a,default:()=>s($,null,[s(El,oe({ref:c,modelValue:n.value,"onUpdate:modelValue":F=>n.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:be.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:il},e.menuProps),{default:()=>[x&&s(ie,{ref:se,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:L,onFocusin:ol,onFocusout:sl,onScrollPassive:M,tabindex:"-1"},{default:()=>{var F,z,B;return[(F=a["prepend-item"])==null?void 0:F.call(a),!C.value.length&&!e.hideNoData&&(((z=a["no-data"])==null?void 0:z.call(a))??s(W,{title:E(e.noDataText)},null)),s(Sl,{renderless:!0,items:C.value},{default:re=>{var Be;let{item:ee,index:le,itemRef:dl}=re;const xe=oe(ee.props,{ref:dl,key:le,active:fe.value&&le===0?!0:void 0,onClick:()=>ge(ee)});return((Be=a.item)==null?void 0:Be.call(a,{item:ee,index:le,props:xe}))??s(W,xe,{prepend:Ee=>{let{isSelected:Se}=Ee;return s($,null,[e.multiple&&!e.hideSelected?s(Il,{key:ee.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,ee.props.prependIcon&&s(Ce,{icon:ee.props.prependIcon},null)])},title:()=>{var Ee,Se;return k.value?ee.title:Ql(ee.title,(Ee=te(ee))==null?void 0:Ee.title,((Se=l.value)==null?void 0:Se.length)??0)}})}}),(B=a["append-item"])==null?void 0:B.call(a)]}})]}),D.value.map((F,z)=>{var ee;function B(le){le.stopPropagation(),le.preventDefault(),ge(F)}const re={"onClick:close":B,onMousedown(le){le.preventDefault(),le.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:F.value,class:["v-autocomplete__selection",z===d.value&&["v-autocomplete__selection--selected",t.value]],style:z===d.value?u.value:{}},[y?a.chip?s(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>{var le;return[(le=a.chip)==null?void 0:le.call(a,{item:F,index:z,props:re})]}}):s(Ml,oe({key:"chip",closable:e.closableChips,size:"small",text:F.title},re),null):((ee=a.selection)==null?void 0:ee.call(a,{item:F,index:z}))??s("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&z<D.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){var re;for(var F=arguments.length,z=new Array(F),B=0;B<F;B++)z[B]=arguments[B];return s($,null,[(re=a["append-inner"])==null?void 0:re.call(a,...z),e.menuIcon?s(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:pe,onClick:fl},null):void 0])}})}),Fl({isFocused:U,isPristine:k,menu:n,search:l,filteredItems:O,select:ge},I)}}),et={class:"extrasList"},lt=ce({__name:"Extras",props:Q({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{convention:E,disabled:I=!1}=a,U=me(e,"modelValue"),k=we.getInstance(),g=_({});try{g.value=JSON.parse(U.value)}catch{}const c=_([]),S=_([]);J(a,()=>{d()}),J(g.value,v=>{for(const p in v)if(v[p].checked){const i=c.value.map(t=>{var u;return(u=t.Options)==null?void 0:u.find(l=>l.OptionUUID===p)});if(i&&i.length>0)try{const t=i[0];v[p].choiceId===""&&t&&t.Choices&&t.Choices.length>0&&(v[p].choiceId=t.Choices[0].TagUUID),v[p].price=t==null?void 0:t.Price}catch{}}else v[p].choiceId="",v[p].price=0;U.value=JSON.stringify(v),T()});const n=ne({get:()=>c.value.map(v=>v.ExtraUUID),set:()=>{}}),d=()=>{var p;const v=((p=a.items.find(i=>i.Title==="SelectedExtras"))==null?void 0:p.Value)||"[]";try{const i=JSON.parse(v);c.value=S.value.filter(t=>i.find(u=>u===t.ExtraUUID))||[],n.value=[...c.value.map(t=>t.ExtraUUID)],c.value.forEach(t=>{var u;(u=t.Options)==null||u.forEach(l=>{g.value[l.OptionUUID]||(g.value[l.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in E&&E.Extras.length?(S.value=E.Extras,d()):"ConventionUUID"in E&&(k==null||k.getAvailableConventionExtras(E.ConventionUUID).then(v=>{v&&(S.value=v,d())}));const T=(v=void 0)=>{setTimeout(()=>f("change",v),100)};return(v,p)=>(o(),R("div",et,[K("h4",null,G(v.label),1),s(ie,{opened:n.value,"onUpdate:opened":p[0]||(p[0]=i=>n.value=i)},{default:r(()=>[(o(!0),R($,null,j(c.value,i=>(o(),b(tl,{key:i.ExtraUUID,value:i.ExtraUUID},{activator:r(({props:t})=>[s(W,oe({"prepend-icon":"mdi:mdi-group","append-icon":""},t),{default:r(()=>[i.Name?(o(),b(ye,{key:0},{default:r(()=>[K("strong",null,G(i.Name),1)]),_:2},1024)):P("",!0),i.Description?(o(),b(Ve,{key:1,class:"mt-2 d-inline"},{default:r(()=>[q(G(i.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:r(()=>[i.Options?(o(!0),R($,{key:0},j(i.Options,t=>(o(),b(W,{key:t.OptionUUID,class:"override-pl"},{default:r(()=>[s(Z,null,{default:r(()=>[s(N,{cols:"12",sm:"6"},{default:r(()=>[s(de,{label:`${t.Name} ${t.Price&&t.Price!==0?`(${m(De).currencySymbol}${t.Price})`:""}`,modelValue:g.value[t.OptionUUID].checked,"onUpdate:modelValue":u=>g.value[t.OptionUUID].checked=u,disabled:m(I),"hide-details":"",onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t.Choices&&t.Choices.length>1&&g.value[t.OptionUUID].checked?(o(),b(N,{key:0,cols:"12",sm:"6"},{default:r(()=>[s($e,{items:t.Choices.sort((u,l)=>u.Title.localeCompare(l.Title)).map(u=>({value:u.TagUUID,title:u.Title})),modelValue:g.value[t.OptionUUID].choiceId,"onUpdate:modelValue":u=>g.value[t.OptionUUID].choiceId=u,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(I),"hide-details":"",onChange:T},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const tt={class:"interestList"},at=ce({__name:"Interests",props:Q({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{convention:E,disabled:I=!1}=a,U=me(e,"modelValue"),k=we.getInstance(),g=_({});try{g.value=JSON.parse(U.value)}catch{}const c=_([]),S=_([]);J(g.value,v=>{U.value=JSON.stringify(v)});const n=_([]),d=()=>{var p;const v=((p=a.items.find(i=>i.Title==="SelectedInterests"))==null?void 0:p.Value)||"[]";try{const i=JSON.parse(v);c.value=S.value.filter(t=>i.find(u=>u===t.InterestUUID))||[],n.value=[...c.value.map(t=>t.InterestUUID)]}catch{}};"ConventionUUID"in E&&(k==null||k.getConventionInterests(E.ConventionUUID).then(v=>{v&&(S.value=v,d())})),J(a,()=>{d()});const T=(v=void 0)=>{setTimeout(()=>f("change",v),100)};return(v,p)=>(o(),R("div",tt,[K("h4",null,G(v.label),1),s(ie,{opened:n.value,"onUpdate:opened":p[0]||(p[0]=i=>n.value=i)},{default:r(()=>[(o(!0),R($,null,j(c.value,i=>(o(),b(W,{key:i.InterestUUID},{default:r(()=>[s(Z,null,{default:r(()=>[s(N,null,{default:r(()=>[s(de,{label:`${i.Name} ${i.Price&&i.Price>0?`(${m(De).currencySymbol}${i.Price})`:""}`,modelValue:g.value[i.InterestUUID],"onUpdate:modelValue":t=>g.value[i.InterestUUID]=t,disabled:m(I),messages:i.Description,onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const nt={class:"ticketList"},ut={key:0,class:"text-orange-darken-1"},it=ce({__name:"Tickets",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:E=!1,convention:I,disabled:U=!1}=a,k=me(e,"modelValue"),g=we.getInstance(),c=_({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(k.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const S=_([]),n=_([]);J(c.value,u=>{k.value=JSON.stringify(u)});const d=_([]),T=_({required:(u,l=void 0)=>()=>{if(l==null){if(c.value.Ticket.length===0&&a.required)return"Must select at least one ticket option.";if(u&&u.ComponentsRequired>0&&c.value.Ticket.includes(u.TicketUUID||"")){let h=0;if(u.TicketComponents.forEach(V=>{c.value.ComponentsChecked.forEach(O=>{V.TicketUUID===O&&(h+=1)})}),h<u.ComponentsRequired)return`Must select ticket ${u.ComponentsRequired} component${u.ComponentsRequired===1?"":"s"}`}}return!0}}),v=()=>{var l;const u=((l=a.items.find(h=>h.Title==="SelectedTickets"))==null?void 0:l.Value)||"[]";try{const h=JSON.parse(u);S.value=n.value.filter(V=>V.Type==="TICKET_TYPE_GROUP"&&h.find(O=>O===V.TicketUUID))||[],d.value=[...S.value.filter(V=>V.Type==="TICKET_TYPE_GROUP").map(V=>V.TicketUUID)]}catch{}};if("ConventionUUID"in I)if(E)g==null||g.getConventionTickets(I.ConventionUUID).then(u=>{u&&(n.value=u,v())});else{const u=a.items.find(l=>l.Title==="SelectedTickets");u&&(g==null||g.getFieldTickets(u.FieldUUID).then(l=>{l&&(n.value=l,v())}))}J(a,()=>{v()});const p=u=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const l=[];S.value.forEach(h=>{(c.value.Ticket.includes(h.TicketUUID)||c.value.ComponentsChecked.includes(h.TicketUUID))&&l.push(...h.AddonTickets.map(V=>V.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(h=>l.includes(h)),t(u)},i=u=>{const l=n.value.find(h=>h.TicketUUID===c.value.Ticket[0]);if(l)for(;c.value.ComponentsChecked.length>l.ComponentsRequired;)c.value.ComponentsChecked.shift();t(u)},t=(u=void 0)=>{setTimeout(()=>f("change",u),100)};return(u,l)=>{var h;return o(),R("div",nt,[K("h4",null,[q(G(u.label)+" ",1),(h=u.registrationGroup)!=null&&h.Registration.Leader?P("",!0):(o(),R("small",ut,"(controlled by group leader)"))]),s(ie,{opened:d.value,"onUpdate:opened":l[4]||(l[4]=V=>d.value=V)},{default:r(()=>[(o(!0),R($,null,j(m(Pe)(S.value.filter(V=>V.Type===m(al).TICKET_TYPE_GROUP)),V=>(o(),R($,{key:V.TicketUUID},[V.Tickets.length>0?(o(),b(tl,{key:0,value:V.TicketUUID},{activator:r(({props:O})=>[s(W,oe(O,{"prepend-icon":"mdi:mdi-group"}),{default:r(()=>[s(ye,null,{default:r(()=>[K("strong",null,G(V.Name),1)]),_:2},1024),s(Ve,{class:"d-inline"},{default:r(()=>[q(G(V.Description),1)]),_:2},1024)]),_:2},1040)]),default:r(()=>[(o(!0),R($,null,j(V.Tickets,O=>(o(),b(W,{key:O.TicketUUID,class:"override-pl"},{default:r(()=>{var te;return[s(Ve,{class:"d-inline"},{default:r(()=>[q(G(O.Description),1)]),_:2},1024),s(de,{modelValue:c.value.Ticket,"onUpdate:modelValue":l[0]||(l[0]=D=>c.value.Ticket=D),value:O.TicketUUID,onChange:p,rules:[T.value.required(O)],"validate-on":"submit",disabled:m(U)||!((te=u.registrationGroup)!=null&&te.Registration.Leader)},{label:r(()=>[s(Ce,{icon:O.RequiresAccommodation?"mdi:mdi-home":O.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${O.Name} ${O.Price>0?`(${m(De).currencySymbol}${O.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&O.TicketUUID===c.value.Ticket[0]?(o(),R($,{key:0},[O.AddonTickets.length?(o(),b(ie,{key:0},{default:r(()=>[(o(!0),R($,null,j(m(Pe)(O.AddonTickets),D=>(o(),R($,{key:D==null?void 0:D.TicketUUID},[D?(o(),b(W,{key:0},{default:r(()=>[s(ye,null,{default:r(()=>{var C;return[s(de,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":l[1]||(l[1]=H=>c.value.AddonsChecked=H),value:D.TicketUUID,onChange:l[2]||(l[2]=H=>{c.value.ComponentsChecked=[],t(H)}),disabled:m(U)||!((C=u.registrationGroup)!=null&&C.Registration.Leader)},{label:r(()=>[s(Ce,{icon:D.RequiresAccommodation?"mdi:mdi-home-plus":D.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${D.Name} ${D.Price>0?`(${m(De).currencySymbol}${D.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Ve,{class:"d-inline"},{default:r(()=>[q(G(D.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),O.TicketComponents.length?(o(),b(ie,{key:1},{default:r(()=>[(o(!0),R($,null,j(m(Pe)(O.TicketComponents),D=>(o(),R($,{key:D==null?void 0:D.TicketUUID},[D?(o(),b(W,{key:0},{default:r(()=>[s(ye,null,{default:r(()=>{var C;return[s(de,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":l[3]||(l[3]=H=>c.value.ComponentsChecked=H),value:D.TicketUUID,onChange:i,rules:[T.value.required(O,D)],"validate-on":"submit",disabled:m(U)||!((C=u.registrationGroup)!=null&&C.Registration.Leader)},{label:r(()=>[s(Ce,{icon:D.RequiresAccommodation?"mdi:mdi-home-plus":D.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${D.Name} ${D.Price>0?`(${m(De).currencySymbol}${D.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Ve,null,{default:r(()=>[q(G(D.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},st=K("strong",null,"Your Sharing Group",-1),rt=["href","onClick"],dt=K("br",null,null,-1),ct=K("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),mt=K("strong",null,"Your Groups Accommodation",-1),vt=K("br",null,null,-1),ft=K("small",null,"(in order of preference, controlled by group leader)",-1),pt=K("strong",null,"Accommodation Options",-1),gt=K("br",null,null,-1),ht=K("strong",null,"Your Chosen Accommodation",-1),Ut=K("small",null,"(in order of preference)",-1),yt=ce({__name:"Accommodation",props:Q({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:E=!1,convention:I,disabled:U}=a,k=me(e,"modelValue"),g=Ne(a,f,void 0,void 0,"items"),c=el(),S=pl.getInstance(),n=_(Ue(k.value)),d=_([]),T=_(),v=_({sharing:!1}),p=()=>{try{const M=JSON.parse(a.data);M&&(v.value=M)}catch{}};p(),J(a,()=>{p(),a.registrationGroup&&(d.value=a.registrationGroup.Members,T.value=a.registrationGroup.Registration)}),J(n,M=>{k.value=Ue(M)},{deep:!0});const i=_(""),t=_(!1),u=()=>{var M;(M=T.value)!=null&&M.Leader&&c.getRegistrationInvite(I.ConventionUUID).then(L=>{if(L){const A=new URL(location.href);A.searchParams.set("token",L),i.value=A.toString()}})},l=()=>{Al(i.value),u(),t.value=!0,setTimeout(()=>t.value=!1,2200)},h=()=>{S.emit("registration.group.leave")},V=M=>{S.emit("registration.group.remove.member",M)},O=_([]);J(g,()=>{te()});const te=()=>{E?c.getConventionAccommodation(I.ConventionUUID).then(M=>{O.value=M.filter(L=>!!(g!=null&&g.value.find(A=>A.Value===L.AccommodationUUID)))||[]}):g.value.length>0&&c.getFieldAccommodation(g.value[0].FieldUUID).then(M=>{O.value=M.filter(L=>!!(g!=null&&g.value.find(A=>A.Value===L.AccommodationUUID)))||[]})};te(),(()=>{var M;if(a.registrationGroup)if(d.value=a.registrationGroup.Members,T.value=a.registrationGroup.Registration,(M=T.value)!=null&&M.Leader)u();else try{n.value=JSON.parse(a.registrationGroup.AccommodationData)}catch{}})();const C=_({column:0,id:""}),H=()=>{!U&&!n.value.includes(C.value.id)&&(C.value.column===0&&C.value.id!==""&&n.value.push(C.value.id),se())},ve=()=>{const M=n.value.findIndex(L=>L===C.value.id);!U&&M>=0&&(n.value.splice(M,1),se())},fe=()=>{if(U||C.value.column!==1)return;const M=n.value.findIndex(L=>L===C.value.id);M<=0||(Je(n.value,M,M-1),se())},be=()=>{if(U||C.value.column!==1)return;const M=n.value.findIndex(L=>L===C.value.id);M>=n.value.length-1||(Je(n.value,M,M+1),se())},se=(M=void 0)=>{setTimeout(()=>f("change",M),100)};return(M,L)=>(o(),R($,null,[K("h4",null,G(M.label),1),s(Z,null,{default:r(()=>[s(N,{cols:"12"},{default:r(()=>{var A;return[d.value&&T.value&&v.value.sharing?(o(),R("div",ot,[st,!m(U)&&((A=d.value.find(w=>w.IsLeader))==null?void 0:A.UUID)!==T.value.RegistrationUUID?(o(),b(ae,{key:0,color:"red",variant:"text",onClick:h},{default:r(()=>[q("(leave group)")]),_:1})):P("",!0),s(ie,null,{default:r(()=>[s(W,null,{default:r(()=>{var w;return[s(ye,{class:"float-left pr-2 font-weight-bold"},{default:r(()=>[q(" Leader: ")]),_:1}),q(" "+G((w=d.value.find(pe=>pe.IsLeader))==null?void 0:w.Name),1)]}),_:1}),(o(!0),R($,null,j(d.value,w=>(o(),R($,{key:w.UUID},[w.IsLeader?P("",!0):(o(),b(W,{key:0},{append:r(()=>[T.value.Leader?(o(),b(ae,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:pe=>V(w.UUID),disabled:m(U)},null,8,["onClick","disabled"])):P("",!0)]),default:r(()=>[s(ye,{class:"float-left pr-2"},{default:r(()=>[q(" Member: ")]),_:1}),q(" "+G(w.Name),1)]),_:2},1024))],64))),128))]),_:1}),s(Ll,{modelValue:t.value,"onUpdate:modelValue":L[0]||(L[0]=w=>t.value=w),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),i.value&&T.value.Leader&&!m(U)?(o(),R($,{key:1},[s(ae,{color:"blue"},{default:r(()=>[K("a",{href:i.value,onClick:Ze(l,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,rt)]),_:1}),dt,ct],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),T.value&&!T.value.Leader?(o(),b(Z,{key:0},{default:r(()=>[s(N,{cols:"10",md:"5"},{default:r(()=>[mt,vt,ft,s(ie,null,{default:r(()=>[(o(!0),R($,null,j(n.value.map(A=>O.value.find(w=>w.AccommodationUUID==A)).filter(A=>A!==void 0),(A,w)=>(o(),R($,null,[A?(o(),b(W,{key:A.AccommodationUUID,title:`${w+1}. ${A.Name}`,class:Me(C.value.column===1&&C.value.id===A.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),b(Z,{key:1},{default:r(()=>[s(N,{cols:"12",md:"5"},{default:r(()=>[pt,gt,s(ie,null,{default:r(()=>[(o(!0),R($,null,j(O.value,A=>(o(),b(W,{key:A.AccommodationUUID,title:A.Name,class:Me(C.value.column===0&&C.value.id===A.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:w=>C.value={column:0,id:A.AccommodationUUID},"append-icon":m(U)?"":"mdi:mdi-gesture-tap",onDblclick:L[1]||(L[1]=w=>H())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),m(U)?P("",!0):(o(),b(N,{key:0,cols:"12",md:"1"},{default:r(()=>[s(Z,{class:"d-md-none"},{default:r(()=>[s(N,{cols:"12",class:"text-center"},{default:r(()=>[s(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:L[2]||(L[2]=A=>H()),color:"primary",title:"Select"}),q(" Â  "),s(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:L[3]||(L[3]=A=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(Z,{class:"d-none d-md-flex h-100 align-content-center"},{default:r(()=>[s(N,{cols:"12"},{default:r(()=>[s(ae,{icon:"mdi:mdi-arrow-right",size:"small",onClick:L[4]||(L[4]=A=>H()),color:"primary",title:"Select"})]),_:1}),s(N,{cols:"12"},{default:r(()=>[s(ae,{icon:"mdi:mdi-arrow-left",size:"small",onClick:L[5]||(L[5]=A=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(N,{cols:"10",md:"5"},{default:r(()=>[ht,s(ie,null,{default:r(()=>[(o(!0),R($,null,j(n.value.map(A=>O.value.find(w=>w.AccommodationUUID==A)).filter(A=>A!==void 0),(A,w)=>(o(),R($,null,[A?(o(),b(W,{key:A.AccommodationUUID,title:`${w+1}. ${A.Name}`,class:Me(C.value.column===1&&C.value.id===A.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:pe=>C.value={column:1,id:(A==null?void 0:A.AccommodationUUID)||""},"append-icon":m(U)?"":"mdi:mdi-gesture-tap",onDblclick:L[6]||(L[6]=pe=>ve())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),Ut]),_:1}),m(U)?P("",!0):(o(),b(N,{key:1,cols:"2",md:"1"},{default:r(()=>[s(Z,{class:"d-flex h-100 align-content-center mt-3"},{default:r(()=>[s(N,{cols:"12"},{default:r(()=>[s(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:L[7]||(L[7]=A=>fe()),color:"primary",title:"Higher Priority"})]),_:1}),s(N,{cols:"12"},{default:r(()=>[s(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:L[8]||(L[8]=A=>be()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1}))],64))}}),It=ce({__name:"AgeCheck",props:Q({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const a=e,E=Ne(a,f,void 0,void 0,"items"),I=me(e,"modelValue"),U=_({required:n=>!a.required||!!n||"Required.",min:n=>{var l,h;const d=new Date,T=d.getFullYear(),v=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),p=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),i=((l=E.value.find(V=>V.Title=="MIN_AGE"))==null?void 0:l.Value)||"18",t=((h=E.value.find(V=>V.Title=="BEFORE_DATE"))==null?void 0:h.Value)||`${T}-${v}-${p}`,u=c(t);return g(n,t,parseInt(i))||`You must be at least ${i} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),k=()=>(f("blur"),!(U.value.min(I.value||"")!==!0||U.value.required(I.value||"")!==!0)),g=(n,d,T)=>{if(n>=d)return!1;const v=c(n),i=c(d).getTime()-v.getTime(),t=1e3*60*60*24*365.25;return i/t>=T},c=n=>{const[d,T,v]=n.split("-");return new Date(parseInt(d),parseInt(T)-1,parseInt(v))},S=(n=void 0)=>{setTimeout(()=>f("change",n),100)};return(n,d)=>(o(),b(Ie,{modelValue:I.value,"onUpdate:modelValue":d[0]||(d[0]=T=>I.value=T),type:"date",hint:n.hint||"",label:n.label||"",name:n.name||"",variant:"outlined",disabled:n.disabled||!1,"persistent-hint":n.persistentHint||!1,"error-messages":n.errorMessages||"",rules:[U.value.required,U.value.min],onBlur:k,onChange:S},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),bt=_e({...bl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Tt=Fe()({name:"VRadio",props:bt(),setup(e,f){let{slots:a}=f;return qe(()=>s(ll,oe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),a)),{}}});const Vt=_e({height:{type:[Number,String],default:"auto"},...wl(),...Qe(Tl(),["multiple"]),trueIcon:{type:Ke,default:"$radioOn"},falseIcon:{type:Ke,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Dt=Fe()({name:"VRadioGroup",inheritAttrs:!1,props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:a,slots:E}=f;const I=gl(),U=ne(()=>e.id||`radio-group-${I}`),k=Oe(e,"modelValue");return qe(()=>{const[g,c]=hl(a),[S,n]=Xe.filterProps(e),[d,T]=ll.filterProps(e),v=E.label?E.label({label:e.label,props:{for:U.value}}):e.label;return s(Xe,oe({class:["v-radio-group",e.class],style:e.style},g,S,{modelValue:k.value,"onUpdate:modelValue":p=>k.value=p,id:U.value}),{...E,default:p=>{let{id:i,messagesId:t,isDisabled:u,isReadonly:l}=p;return s($,null,[v&&s(Nl,{id:i.value},{default:()=>[v]}),s(Vl,oe(d,{id:i.value,"aria-describedby":t.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:l.value,"aria-labelledby":v?i.value:void 0,multiple:!1},c,{modelValue:k.value,"onUpdate:modelValue":h=>k.value=h}),E)])}})}),{}}}),ze=ce({__name:"FormField",props:Q({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:Q(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:E=!1,disabled:I=!1,persistentHint:U=!1,required:k=!1}=a,g=_(""),c=me(e,"modelValue"),S=Ne(a,f,void 0,void 0,"field"),n=_(Ue(S.value)),d=_({maxlength:t=>!a.maxLength||t.length<=a.maxLength||`Maximum length is ${a.maxLength} characters. (Current length: ${t.length})`,minlength:t=>!a.minLength||t.length>=a.minLength||`Minimum length is ${a.minLength} characters. (Current length: ${t.length})`,required:t=>!a.required||!!t||"Required field."}),T=_(!1),v=_([]),p=_("");try{const t=JSON.parse(c.value);Array.isArray(t)?v.value=t:typeof t=="boolean"?T.value=t:p.value=c.value}catch{T.value=!1,v.value=[],p.value=c.value}J(T,()=>{c.value=JSON.stringify(T.value),f("input")}),J(v,()=>{c.value=JSON.stringify(v.value),f("input"),n.value.Type===X.SELECT&&f("change")},{deep:!0}),J(p,()=>{c.value=p.value,f("input"),n.value.Type===X.SELECT&&f("change")}),J(S.value,()=>{n.value.Type!==S.value.Type?(n.value=Ue(S.value),T.value=!1,v.value=[],p.value=""):n.value=Ue(S.value)});const i=(t=void 0)=>{f("change",t)};return(t,u)=>n.value.Type===m(X).TEXT?(o(),b(Ie,{key:0,modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:`${n.value.Label}${m(k)?"*":""}`,placeholder:n.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===m(X).DATE?(o(),b(Ie,{key:1,modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=l=>p.value=l),type:"date",name:t.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===m(X).NUMBER?(o(),b(Ie,{key:2,modelValue:p.value,"onUpdate:modelValue":u[2]||(u[2]=l=>p.value=l),type:"number",name:t.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===m(X).TEXTAREA?(o(),b(ql,{key:3,modelValue:p.value,"onUpdate:modelValue":u[3]||(u[3]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,placeholder:n.value.Placeholder,variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):n.value.Type===m(X).CHECKBOX?(o(),R($,{key:4},[n.value.Multiple?(o(!0),R($,{key:0},j(n.value.Values,l=>(o(),b(de,{key:l.ID,modelValue:v.value,"onUpdate:modelValue":u[4]||(u[4]=h=>v.value=h),name:t.name,hint:n.value.Hint,label:l.Title,value:l.Value,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,rules:[d.value.required],onChange:i},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),b(de,{key:1,modelValue:T.value,"onUpdate:modelValue":u[5]||(u[5]=l=>T.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,required:m(k),rules:[l=>!m(k)||!!l||"You must tick to continue!"],onChange:i},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):n.value.Type===m(X).SELECT?(o(),R($,{key:5},[!n.value.Autofill&&n.value.Multiple?(o(),b($e,{key:0,modelValue:v.value,"onUpdate:modelValue":u[6]||(u[6]=l=>v.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,multiple:"",items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):n.value.Autofill&&n.value.Multiple?(o(),b(je,{key:1,modelValue:v.value,"onUpdate:modelValue":u[7]||(u[7]=l=>v.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,multiple:"",items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):n.value.Autofill?n.value.Autofill?(o(),b(je,{key:3,modelValue:p.value,"onUpdate:modelValue":u[9]||(u[9]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(o(),b($e,{key:2,modelValue:p.value,"onUpdate:modelValue":u[8]||(u[8]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(I)||!1,"persistent-hint":m(U)||!1,"error-messages":g.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):n.value.Type===m(X).RADIO?(o(),b(Dt,{key:6,modelValue:p.value,"onUpdate:modelValue":u[10]||(u[10]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,rules:[d.value.required],onChange:i},{default:r(()=>[(o(!0),R($,null,j(n.value.Values,l=>(o(),b(Tt,{key:l.Value,label:l.Title,value:l.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):n.value.Type===m(X).ACCOMMODATION?(o(),b(yt,{key:7,modelValue:v.value,"onUpdate:modelValue":u[11]||(u[11]=l=>v.value=l),name:t.name,admin:m(E),convention:t.convention,"registration-group":t.registrationGroup,data:t.field.Data,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,onChange:i},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages"])):n.value.Type===m(X).AGE?(o(),b(It,{key:8,modelValue:p.value,"onUpdate:modelValue":u[12]||(u[12]=l=>p.value=l),name:t.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,onChange:i},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):n.value.Type===m(X).EXTRAS?(o(),b(lt,{key:9,modelValue:p.value,"onUpdate:modelValue":u[13]||(u[13]=l=>p.value=l),convention:t.convention,name:t.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,required:m(k),onChange:i},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):n.value.Type===m(X).INTERESTS?(o(),b(at,{key:10,modelValue:p.value,"onUpdate:modelValue":u[14]||(u[14]=l=>p.value=l),convention:t.convention,name:t.name,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,required:m(k),onChange:i},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):n.value.Type===m(X).TICKET?(o(),b(it,{key:11,modelValue:p.value,"onUpdate:modelValue":u[15]||(u[15]=l=>p.value=l),admin:m(E),convention:t.convention,name:t.name,"registration-group":t.registrationGroup,hint:n.value.Hint,label:n.value.Label,items:n.value.Values,disabled:m(I)||!1,"persistent-hint":m(U),"error-messages":g.value,required:m(k),onChange:i},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}),Ct={key:0,class:"my-2 text-white text-center"},kt={key:1,class:"admin-header my-2 text-white text-center"},Et=["innerHTML"],St=["innerHTML"],Qt=ce({__name:"FormRenderer",props:Q({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:Q(["close"],["update:modelValue"]),setup(e,{emit:f}){const a=me(e,"modelValue");ke(a.value.Sections),a.value.Sections.forEach(i=>{i.Fields&&ke(i.Fields)});const E=_(),I=Bl(),U=el(),k=_(!1),g=_(!1),c=_(!1),S=_((()=>{if(e.data!==void 0){const t=Ue(e.data);return a.value.Sections.forEach(u=>{u.Fields&&u.Fields.forEach(l=>{const h=e.data.Data.find(V=>V.SectionFieldUUID===l.SectionFieldUUID&&V.SectionFieldUUID==l.SectionFieldUUID);if(h)l.Value=h.Data;else{const V={ID:0,SubmissionDataUUID:Le(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};t.Data.push(V)}})}),t}const i={ID:0,SubmissionUUID:Le(),FormID:a.value.ID,FormUUID:a.value.FormUUID,UserID:(I==null?void 0:I.ID)||0,UserUUID:(I==null?void 0:I.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return i.Data=a.value.Sections.map(t=>t.Fields?t.Fields.map(u=>({ID:0,SubmissionDataUUID:Le(),SubmissionID:i.ID,SubmissionUUID:i.SubmissionUUID,SectionID:t.ID,SectionUUID:t.SectionUUID,SectionFieldID:u.ID,SectionFieldUUID:u.SectionFieldUUID,Data:""})):[]).flat(),i})()),n=(i,t,u)=>{const l=S.value.Data.find(h=>h.SectionUUID===i&&h.SectionFieldUUID===t);l&&(l.Data=u)},d=(i,t,u,l)=>i&&i.Type===ue.FORM_TYPE_REGISTRATION?t?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":i&&i.Type===ue.FORM_TYPE_ACCOMMODATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":i&&i.Type===ue.FORM_TYPE_DEALER?l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(i&&i.Type===ue.FORM_TYPE_BADGE,"/"),T=({callback:i})=>{U.getRegistrationByConvention(e.convention.ConventionUUID).then(t=>{i&&i("Loading"),U.getAvailableConventionForms(e.convention.ConventionUUID).then(u=>{t.Submissions.forEach((D,C)=>{D.Form||(t.Submissions[C].Form=u.find(H=>H.FormUUID===D.FormUUID))});const l=t.Submissions.find(D=>D.FormUUID===S.value.FormUUID),h=t.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_ACCOMMODATION}),V=t.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_DEALER}),O=t.Submissions.find(D=>{var C;return((C=D.Form)==null?void 0:C.Type)===ue.FORM_TYPE_BADGE}),te=d(l==null?void 0:l.Form,h==null?void 0:h.Form,V==null?void 0:V.Form,O==null?void 0:O.Form);He.push(te)})})},v=({callback:i})=>{var t;(t=E.value)==null||t.validate().then(u=>{u.valid?U.saveSubmission(S.value).then(l=>{l?setTimeout(()=>{p(l,i,1)},1e3):i&&i("Failed to process request")}).catch(()=>{i&&i("Failed to process request")}):i&&i("Errors in form detected, please review and try again.")})},p=(i,t,u=1)=>{U.checkSubmission(i).then(l=>{if(l)if(l.Ready&&l.Submission){if(k.value=!1,S.value=l.Submission,t&&t("Saved"),e.admin)f("close");else if(l.Forms&&l.Forms.length>0){const h=l.Forms.find(C=>C.FormUUID===S.value.FormUUID),V=l.Forms.find(C=>C.Type===ue.FORM_TYPE_ACCOMMODATION),O=l.Forms.find(C=>C.Type===ue.FORM_TYPE_DEALER),te=l.Forms.find(C=>C.Type===ue.FORM_TYPE_BADGE),D=d(h,V,O,te);He.push(D)}}else{if(u>5&&(k.value=!0),u>10&&(g.value=!0),u>20&&(c.value=!0),u>60){t&&(k.value=!1,g.value=!1,c.value=!1,t("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{p(i,t,u+1)},u<20?1e3*u:2e4)}else t&&(k.value=!1,g.value=!1,c.value=!1,t("A problem was encountered during saving, please check form and try again."))}).catch(()=>{t&&(k.value=!1,g.value=!1,c.value=!1,t("A problem was encountered during saving, please check form and try again."))})};return(i,t)=>{const u=Ul("router-link");return o(),b(Rl,null,{default:r(()=>[s(Xl,{ref_key:"formValidator",ref:E,onSubmit:t[1]||(t[1]=Ze(()=>{},["prevent"]))},{default:r(()=>[a.value.Heading?(o(),R("h1",Ct,G(a.value.Heading),1)):P("",!0),i.admin?(o(),R("h2",kt," (Admin Mode) ")):P("",!0),a.value.Description?(o(),R("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg",innerHTML:a.value.Description},null,8,Et)):P("",!0),(o(!0),R($,null,j(a.value.Sections,l=>(o(),b(Gl,{key:`section_${a.value.ID}.${l.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:r(()=>[l.Heading?(o(),b(Kl,{key:0},{default:r(()=>[q(G(l.Heading),1)]),_:2},1024)):P("",!0),l.Description?(o(),b(Hl,{key:1,class:"text-wrap"},{default:r(()=>[K("div",{innerHTML:l.Description},null,8,St)]),_:2},1024)):P("",!0),l.Fields?(o(),b(Yl,{key:2},{default:r(()=>[(o(!0),R($,null,j(l.Fields,h=>(o(),R($,{key:`field_${a.value.ID}.${l.ID}.${h.ID}`},[h.Field?(o(),b(Z,{key:0},{default:r(()=>[s(N,null,{default:r(()=>[i.editable?(o(),b(ze,{key:0,field:h.Field,modelValue:h.Value,"onUpdate:modelValue":V=>h.Value=V,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:h.Required,"min-length":h.MinLength,"max-length":h.MaxLength,"persistent-hint":!0,onChange:V=>n(l.SectionUUID,h.SectionFieldUUID,h.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),b(ze,{key:1,field:h.Field,modelValue:h.Value,"onUpdate:modelValue":V=>h.Value=V,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:h.Required,"min-length":h.MinLength,"max-length":h.MaxLength,"persistent-hint":!0,disabled:"",onChange:V=>n(l.SectionUUID,h.SectionFieldUUID,h.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),i.preview?P("",!0):(o(),R($,{key:3},[s(Z,null,{default:r(()=>[i.admin?(o(),b(N,{key:1,class:"text-right"},{default:r(()=>[s(ae,{color:"red",onClick:t[0]||(t[0]=l=>f("close"))},{default:r(()=>[q("Cancel")]),_:1})]),_:1})):(o(),b(N,{key:0,class:"text-right"},{default:r(()=>[s(u,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:r(()=>[s(ae,{color:"red"},{default:r(()=>[q("Cancel")]),_:1})]),_:1})]),_:1})),i.admin||i.editable?(o(),b(N,{key:2,class:"text-left"},{default:r(()=>[s(Ye,{onClick:v,type:"submit"})]),_:1})):(o(),b(N,{key:3,class:"text-left"},{default:r(()=>[s(Ye,{onClick:T,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),k.value?(o(),b(Z,{key:0},{default:r(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[q(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):P("",!0),g.value?(o(),b(Z,{key:1},{default:r(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[q(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):P("",!0),c.value?(o(),b(Z,{key:2},{default:r(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[q(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{zt as F,al as T,je as V,ze as _,Jt as a,Wt as b,X as c,Qt as d,jt as e,jl as f,Xt as m,ke as s,Wl as u};
