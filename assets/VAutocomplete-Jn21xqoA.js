import{g as _e,V as ge}from"./VTextField-8OV3Ne6g.js";import{p as le,R as xe,d as de,u as re,S as et,c as D,r as $,ak as tt,s as j,a8 as lt,w as W,m as q,f as c,Y as ye,ae as De,aR as nt,aS as Me,F as Q,ac as at,h as Ce,aT as Ee,a as be,aU as ut,ad as Pe,at as ot,t as rt,e as it,L as he,o as st,aa as ct,ah as Oe,aV as Ke,x as Be,aF as pe,aW as Ve,C as ce,aJ as dt,aX as vt}from"./index-247IxxqT.js";import{u as Ue}from"./form-3qzlJUXg.js";import{f as Ie,m as He,a as Ne}from"./forwardRefs-Qu0vSQab.js";import{m as ft,e as ze,V as je,a as we}from"./VList-tBK36xSW.js";import{m as mt,d as $e,e as Re,a as Le,g as ht}from"./SaveButton.vue_vue_type_script_setup_true_lang-EcEFDAIk.js";import{u as gt}from"./scopeId-Lv88xeFr.js";import{u as ve,I as Fe,a as qe,l as We,C as yt,F as pt,b as Se,o as Vt}from"./VContainer-z5prYnEU.js";import{V as Xe}from"./VCheckboxBtn-oCOpomv8.js";import{a as Ye}from"./VChip-MR3PGIXh.js";const wt=le({id:String,...xe(mt({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:$e}}),["absolute"])},"VMenu"),Je=de()({name:"VMenu",props:wt(),emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:t}=d;const s=re(e,"modelValue"),{scopeId:r}=gt(),v=et(),w=D(()=>e.id||`v-menu-${v}`),o=$(),l=tt(Re,null),V=j(0);lt(Re,{register(){++V.value},unregister(){--V.value},closeParents(){setTimeout(()=>{V.value||(s.value=!1,l==null||l.closeParents())},40)}});async function F(m){var P,O,b;const f=m.relatedTarget,y=m.target;await ye(),s.value&&f!==y&&((P=o.value)!=null&&P.contentEl)&&((O=o.value)!=null&&O.globalTop)&&![document,o.value.contentEl].includes(y)&&!o.value.contentEl.contains(y)&&((b=De(o.value.contentEl)[0])==null||b.focus())}W(s,m=>{m?(l==null||l.register(),document.addEventListener("focusin",F,{once:!0})):(l==null||l.unregister(),document.removeEventListener("focusin",F))});function g(){l==null||l.closeParents()}function u(m){var f,y,P;e.disabled||m.key==="Tab"&&(nt(De((f=o.value)==null?void 0:f.contentEl,!1),m.shiftKey?"prev":"next",b=>b.tabIndex>=0)||(s.value=!1,(P=(y=o.value)==null?void 0:y.activatorEl)==null||P.focus()))}function S(m){var y;if(e.disabled)return;const f=(y=o.value)==null?void 0:y.contentEl;f&&s.value?m.key==="ArrowDown"?(m.preventDefault(),Me(f,"next")):m.key==="ArrowUp"&&(m.preventDefault(),Me(f,"prev")):["ArrowDown","ArrowUp"].includes(m.key)&&(s.value=!0,m.preventDefault(),setTimeout(()=>setTimeout(()=>S(m))))}const I=D(()=>q({"aria-haspopup":"menu","aria-expanded":String(s.value),"aria-owns":w.value,onKeydown:S},e.activatorProps));return ve(()=>{const m=Le.filterProps(e);return c(Le,q({ref:o,class:["v-menu",e.class],style:e.style},m,{modelValue:s.value,"onUpdate:modelValue":f=>s.value=f,absolute:!0,activatorProps:I.value,"onClick:outside":g,onKeydown:u},r),{activator:t.activator,default:function(){for(var f=arguments.length,y=new Array(f),P=0;P<f;P++)y[P]=arguments[P];return c(Fe,{root:"VMenu"},{default:()=>{var O;return[(O=t.default)==null?void 0:O.call(t,...y)]}})}})}),Ie({id:w,ΨopenChildren:V},o)}}),St=le({renderless:Boolean,...qe()},"VVirtualScrollItem"),bt=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:St(),emits:{"update:height":e=>!0},setup(e,d){let{attrs:t,emit:s,slots:r}=d;const{resizeRef:v,contentRect:w}=We(void 0,"border");W(()=>{var o;return(o=w.value)==null?void 0:o.height},o=>{o!=null&&s("update:height",o)}),ve(()=>{var o,l;return e.renderless?c(Q,null,[(o=r.default)==null?void 0:o.call(r,{itemRef:v})]):c("div",q({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(l=r.default)==null?void 0:l.call(r)])})}}),kt=-1,Ct=1,ke=100,xt=le({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Pt(e,d){const t=at(),s=j(0);Ce(()=>{s.value=parseFloat(e.itemHeight||0)});const r=j(0),v=j(Math.ceil((parseInt(e.height)||t.height.value)/(s.value||16))||1),w=j(0),o=j(0),l=$(),V=$();let F=0;const{resizeRef:g,contentRect:u}=We();Ce(()=>{g.value=l.value});const S=D(()=>{var a;return l.value===document.documentElement?t.height.value:((a=u.value)==null?void 0:a.height)||parseInt(e.height)||0}),I=D(()=>!!(l.value&&V.value&&S.value&&s.value));let m=Array.from({length:d.value.length}),f=Array.from({length:d.value.length});const y=j(0);let P=-1;function O(a){return m[a]||s.value}const b=ut(()=>{const a=performance.now();f[0]=0;const p=d.value.length;for(let K=1;K<=p-1;K++)f[K]=(f[K-1]||0)+O(K-1);y.value=Math.max(y.value,performance.now()-a)},y),k=W(I,a=>{a&&(k(),F=V.value.offsetTop,b.immediate(),J(),~P&&ye(()=>{Pe&&window.requestAnimationFrame(()=>{oe(P),P=-1})}))});W(S,(a,p)=>{p&&J()}),Ee(()=>{b.clear()});function ie(a,p){const K=m[a],U=s.value;s.value=U?Math.min(s.value,p):p,(K!==p||U!==s.value)&&(m[a]=p,b())}function A(a){return a=be(a,0,d.value.length-1),f[a]||0}function G(a){return It(f,a)}let Z=0,_=0,ne=0;function ee(){if(!l.value||!V.value)return;const a=l.value.scrollTop,p=performance.now();p-ne>500?(_=Math.sign(a-Z),F=V.value.offsetTop):_=a-Z,Z=a,ne=p,J()}function Y(){!l.value||!V.value||(_=0,ne=0,J())}let te=-1;function J(){cancelAnimationFrame(te),te=requestAnimationFrame(se)}function se(){if(!l.value||!S.value)return;const a=Z-F,p=Math.sign(_),K=Math.max(0,a-ke),U=be(G(K),0,d.value.length),C=a+S.value+ke,M=be(G(C)+1,U+1,d.value.length);if((p!==kt||U<r.value)&&(p!==Ct||M>v.value)){const R=A(r.value)-A(U),B=A(M)-A(v.value);Math.max(R,B)>ke?(r.value=U,v.value=M):(U<=0&&(r.value=U),M>=d.value.length&&(v.value=M))}w.value=A(r.value),o.value=A(d.value.length)-A(v.value)}function oe(a){const p=A(a);!l.value||a&&!p?P=a:l.value.scrollTop=p}const i=D(()=>d.value.slice(r.value,v.value).map((a,p)=>({raw:a,index:p+r.value})));return W(d,()=>{m=Array.from({length:d.value.length}),f=Array.from({length:d.value.length}),b.immediate(),J()},{deep:!0}),{containerRef:l,markerRef:V,computedItems:i,paddingTop:w,paddingBottom:o,scrollToIndex:oe,handleScroll:ee,handleScrollend:Y,handleItemResize:ie}}function It(e,d){let t=e.length-1,s=0,r=0,v=null,w=-1;if(e[t]<d)return t;for(;s<=t;)if(r=s+t>>1,v=e[r],v>d)t=r-1;else if(v<d)w=r,s=r+1;else return v===d?r:s;return w}const Ft=le({items:{type:Array,default:()=>[]},renderless:Boolean,...xt(),...qe(),...yt()},"VVirtualScroll"),Qe=de()({name:"VVirtualScroll",props:Ft(),setup(e,d){let{slots:t}=d;const s=ot("VVirtualScroll"),{dimensionStyles:r}=pt(e),{containerRef:v,markerRef:w,handleScroll:o,handleScrollend:l,handleItemResize:V,scrollToIndex:F,paddingTop:g,paddingBottom:u,computedItems:S}=Pt(e,rt(e,"items"));return it(()=>e.renderless,()=>{function I(){var y,P;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",l)):((y=v.value)==null||y[f]("scroll",o,{passive:!0}),(P=v.value)==null||P[f]("scrollend",l))}st(()=>{v.value=ht(s.vnode.el,!0),I(!0)}),Ee(I)}),ve(()=>{const I=S.value.map(m=>c(bt,{key:m.index,renderless:e.renderless,"onUpdate:height":f=>V(m.index,f)},{default:f=>{var y;return(y=t.default)==null?void 0:y.call(t,{item:m.raw,index:m.index,...f})}}));return e.renderless?c(Q,null,[c("div",{ref:w,class:"v-virtual-scroll__spacer",style:{paddingTop:he(g.value)}},null),I,c("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:he(u.value)}},null)]):c("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:l,style:[r.value,e.style]},[c("div",{ref:w,class:"v-virtual-scroll__container",style:{paddingTop:he(g.value),paddingBottom:he(u.value)}},[I])])}),{scrollToIndex:F}}});function Ge(e,d){const t=j(!1);let s;function r(o){cancelAnimationFrame(s),t.value=!0,s=requestAnimationFrame(()=>{s=requestAnimationFrame(()=>{t.value=!1})})}async function v(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(t.value){const l=W(t,()=>{l(),o()})}else o()})}async function w(o){var F,g;if(o.key==="Tab"&&((F=d.value)==null||F.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=(g=e.value)==null?void 0:g.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await v();const V=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const u=l.getBoundingClientRect().top;for(const S of V)if(S.getBoundingClientRect().top>=u){S.focus();break}}else{const u=l.getBoundingClientRect().bottom;for(const S of[...V].reverse())if(S.getBoundingClientRect().bottom<=u){S.focus();break}}}return{onListScroll:r,onListKeydown:w}}const Ze=le({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ct,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ft({itemChildren:!1})},"Select"),Tt=le({...Ze(),...xe(_e({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...He({transition:{component:$e}})},"VSelect"),qt=de()({name:"VSelect",props:Tt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,d){let{slots:t}=d;const{t:s}=Oe(),r=$(),v=$(),w=$(),o=re(e,"menu"),l=D({get:()=>o.value,set:i=>{var a;o.value&&!i&&((a=v.value)!=null&&a.ΨopenChildren)||(o.value=i)}}),{items:V,transformIn:F,transformOut:g}=ze(e),u=re(e,"modelValue",[],i=>F(i===null?[null]:pe(i)),i=>{const a=g(i);return e.multiple?a:a[0]??null}),S=D(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),I=Ue(),m=D(()=>u.value.map(i=>i.value)),f=j(!1),y=D(()=>l.value?e.closeText:e.openText);let P="",O;const b=D(()=>e.hideSelected?V.value.filter(i=>!u.value.some(a=>a===i)):V.value),k=D(()=>e.hideNoData&&!b.value.length||e.readonly||(I==null?void 0:I.isReadonly.value)),ie=D(()=>{var i;return{...e.menuProps,activatorProps:{...((i=e.menuProps)==null?void 0:i.activatorProps)||{},"aria-haspopup":"listbox"}}}),A=$(),{onListScroll:G,onListKeydown:Z}=Ge(A,r);function _(i){e.openOnClear&&(l.value=!0)}function ne(){k.value||(l.value=!l.value)}function ee(i){var C,M;if(!i.key||e.readonly||I!=null&&I.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(i.key)&&i.preventDefault(),["Enter","ArrowDown"," "].includes(i.key)&&(l.value=!0),["Escape","Tab"].includes(i.key)&&(l.value=!1),i.key==="Home"?(C=A.value)==null||C.focus("first"):i.key==="End"&&((M=A.value)==null||M.focus("last"));const a=1e3;function p(R){const B=R.key.length===1,T=!R.ctrlKey&&!R.metaKey&&!R.altKey;return B&&T}if(e.multiple||!p(i))return;const K=performance.now();K-O>a&&(P=""),P+=i.key.toLowerCase(),O=K;const U=V.value.find(R=>R.title.toLowerCase().startsWith(P));U!==void 0&&(u.value=[U])}function Y(i){if(e.multiple){const a=u.value.findIndex(p=>e.valueComparator(p.value,i.value));if(a===-1)u.value=[...u.value,i];else{const p=[...u.value];p.splice(a,1),u.value=p}}else u.value=[i],l.value=!1}function te(i){var a;(a=A.value)!=null&&a.$el.contains(i.relatedTarget)||(l.value=!1)}function J(){var i;f.value&&((i=r.value)==null||i.focus())}function se(i){f.value=!0}function oe(i){if(i==null)u.value=[];else if(Ve(r.value,":autofill")||Ve(r.value,":-webkit-autofill")){const a=V.value.find(p=>p.title===i);a&&Y(a)}else r.value&&(r.value.value="")}return W(l,()=>{if(!e.hideSelected&&l.value&&u.value.length){const i=b.value.findIndex(a=>u.value.some(p=>e.valueComparator(p.value,a.value)));Pe&&window.requestAnimationFrame(()=>{var a;i>=0&&((a=w.value)==null||a.scrollToIndex(i))})}}),W(b,(i,a)=>{f.value&&(!i.length&&e.hideNoData&&(l.value=!1),!a.length&&i.length&&(l.value=!0))}),ve(()=>{const i=!!(e.chips||t.chip),a=!!(!e.hideNoData||b.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),p=u.value.length>0,K=ge.filterProps(e),U=p||!f.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return c(ge,q({ref:r},K,{modelValue:u.value.map(C=>C.props.value).join(", "),"onUpdate:modelValue":oe,focused:f.value,"onUpdate:focused":C=>f.value=C,validationValue:u.externalValue,counterValue:S.value,dirty:p,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:U,"onClick:clear":_,"onMousedown:control":ne,onBlur:te,onKeydown:ee,"aria-label":s(y.value),title:s(y.value)}),{...t,default:()=>c(Q,null,[c(Je,q({ref:v,modelValue:l.value,"onUpdate:modelValue":C=>l.value=C,activator:"parent",contentClass:"v-select__content",disabled:k.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:J},ie.value),{default:()=>[a&&c(je,{ref:A,selected:m.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:Z,onFocusin:se,onScrollPassive:G,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},{default:()=>{var C,M,R;return[(C=t["prepend-item"])==null?void 0:C.call(t),!b.value.length&&!e.hideNoData&&(((M=t["no-data"])==null?void 0:M.call(t))??c(we,{title:s(e.noDataText)},null)),c(Qe,{ref:w,renderless:!0,items:b.value},{default:B=>{var N;let{item:T,index:n,itemRef:h}=B;const L=q(T.props,{ref:h,key:n,onClick:()=>Y(T)});return((N=t.item)==null?void 0:N.call(t,{item:T,index:n,props:L}))??c(we,q(L,{role:"option"}),{prepend:x=>{let{isSelected:H}=x;return c(Q,null,[e.multiple&&!e.hideSelected?c(Xe,{key:T.value,modelValue:H,ripple:!1,tabindex:"-1"},null):void 0,T.props.prependAvatar&&c(Ne,{image:T.props.prependAvatar},null),T.props.prependIcon&&c(Se,{icon:T.props.prependIcon},null)])}})}}),(R=t["append-item"])==null?void 0:R.call(t)]}})]}),u.value.map((C,M)=>{function R(h){h.stopPropagation(),h.preventDefault(),Y(C)}const B={"onClick:close":R,onMousedown(h){h.preventDefault(),h.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},T=i?!!t.chip:!!t.selection,n=T?Ke(i?t.chip({item:C,index:M,props:B}):t.selection({item:C,index:M})):void 0;if(!(T&&!n))return c("div",{key:C.value,class:"v-select__selection"},[i?t.chip?c(Fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:C.title}}},{default:()=>[n]}):c(Ye,q({key:"chip",closable:e.closableChips,size:"small",text:C.title,disabled:C.props.disabled},B),null):n??c("span",{class:"v-select__selection-text"},[C.title,e.multiple&&M<u.value.length-1&&c("span",{class:"v-select__selection-comma"},[Be(",")])])])})]),"append-inner":function(){var B;for(var C=arguments.length,M=new Array(C),R=0;R<C;R++)M[R]=arguments[R];return c(Q,null,[(B=t["append-inner"])==null?void 0:B.call(t,...M),e.menuIcon?c(Se,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ie({isFocused:f,menu:l,select:Y},r)}}),At=(e,d,t)=>e==null||d==null?-1:e.toString().toLocaleLowerCase().indexOf(d.toString().toLocaleLowerCase()),Dt=le({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Mt(e,d,t){var o;const s=[],r=(t==null?void 0:t.default)??At,v=t!=null&&t.filterKeys?pe(t.filterKeys):!1,w=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return s;e:for(let l=0;l<e.length;l++){const[V,F=V]=pe(e[l]),g={},u={};let S=-1;if(d&&!(t!=null&&t.noFilter)){if(typeof V=="object"){const f=v||Object.keys(F);for(const y of f){const P=dt(F,y,F),O=(o=t==null?void 0:t.customKeyFilter)==null?void 0:o[y];if(S=O?O(P,d,V):r(P,d,V),S!==-1&&S!==!1)O?g[y]=S:u[y]=S;else if((t==null?void 0:t.filterMode)==="every")continue e}}else S=r(V,d,V),S!==-1&&S!==!1&&(u.title=S);const I=Object.keys(u).length,m=Object.keys(g).length;if(!I&&!m||(t==null?void 0:t.filterMode)==="union"&&m!==w&&!I||(t==null?void 0:t.filterMode)==="intersection"&&(m!==w||!I))continue}s.push({index:l,matches:{...u,...g}})}return s}function Rt(e,d,t,s){const r=$([]),v=$(new Map),w=D(()=>s!=null&&s.transform?ce(d).map(l=>[l,s.transform(l)]):ce(d));Ce(()=>{const l=typeof t=="function"?t():ce(t),V=typeof l!="string"&&typeof l!="number"?"":String(l),F=Mt(w.value,V,{customKeyFilter:{...e.customKeyFilter,...ce(s==null?void 0:s.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),g=ce(d),u=[],S=new Map;F.forEach(I=>{let{index:m,matches:f}=I;const y=g[m];u.push(y),S.set(y.value,f)}),r.value=u,v.value=S});function o(l){return v.value.get(l.value)}return{filteredItems:r,filteredMatches:v,getMatches:o}}function Lt(e,d,t){if(d==null)return e;if(Array.isArray(d))throw new Error("Multiple matches is not implemented");return typeof d=="number"&&~d?c(Q,null,[c("span",{class:"v-autocomplete__unmask"},[e.substr(0,d)]),c("span",{class:"v-autocomplete__mask"},[e.substr(d,t)]),c("span",{class:"v-autocomplete__unmask"},[e.substr(d+t)])]):e}const _t=le({autoSelectFirst:{type:[Boolean,String]},search:String,...Dt({filterKeys:["title"]}),...Ze(),...xe(_e({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...He({transition:!1})},"VAutocomplete"),Wt=de()({name:"VAutocomplete",props:_t(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,d){let{slots:t}=d;const{t:s}=Oe(),r=$(),v=j(!1),w=j(!0),o=j(!1),l=$(),V=$(),F=re(e,"menu"),g=D({get:()=>F.value,set:n=>{var h;F.value&&!n&&((h=l.value)!=null&&h.ΨopenChildren)||(F.value=n)}}),u=j(-1),S=D(()=>{var n;return(n=r.value)==null?void 0:n.color}),I=D(()=>g.value?e.closeText:e.openText),{items:m,transformIn:f,transformOut:y}=ze(e),{textColorClasses:P,textColorStyles:O}=Vt(S),b=re(e,"search",""),k=re(e,"modelValue",[],n=>f(n===null?[null]:pe(n)),n=>{const h=y(n);return e.multiple?h:h[0]??null}),ie=D(()=>typeof e.counterValue=="function"?e.counterValue(k.value):typeof e.counterValue=="number"?e.counterValue:k.value.length),A=Ue(),{filteredItems:G,getMatches:Z}=Rt(e,m,()=>w.value?"":b.value),_=D(()=>e.hideSelected?G.value.filter(n=>!k.value.some(h=>h.value===n.value)):G.value),ne=D(()=>k.value.map(n=>n.props.value)),ee=D(()=>{var h;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===((h=_.value[0])==null?void 0:h.title))&&_.value.length>0&&!w.value&&!o.value}),Y=D(()=>e.hideNoData&&!_.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),te=$(),{onListScroll:J,onListKeydown:se}=Ge(te,r);function oe(n){e.openOnClear&&(g.value=!0),b.value=""}function i(){Y.value||(g.value=!0)}function a(n){Y.value||(v.value&&(n.preventDefault(),n.stopPropagation()),g.value=!g.value)}function p(n){var N,x,H;if(e.readonly||A!=null&&A.isReadonly.value)return;const h=r.value.selectionStart,L=k.value.length;if((u.value>-1||["Enter","ArrowDown","ArrowUp"].includes(n.key))&&n.preventDefault(),["Enter","ArrowDown"].includes(n.key)&&(g.value=!0),["Escape"].includes(n.key)&&(g.value=!1),ee.value&&["Enter","Tab"].includes(n.key)&&T(_.value[0]),n.key==="ArrowDown"&&ee.value&&((N=te.value)==null||N.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(n.key)){if(u.value<0){n.key==="Backspace"&&!b.value&&(u.value=L-1);return}const E=u.value,X=k.value[u.value];X&&!X.props.disabled&&T(X),u.value=E>=L-1?L-2:E}if(n.key==="ArrowLeft"){if(u.value<0&&h>0)return;const E=u.value>-1?u.value-1:L-1;k.value[E]?u.value=E:(u.value=-1,r.value.setSelectionRange((x=b.value)==null?void 0:x.length,(H=b.value)==null?void 0:H.length))}if(n.key==="ArrowRight"){if(u.value<0)return;const E=u.value+1;k.value[E]?u.value=E:(u.value=-1,r.value.setSelectionRange(0,0))}}}function K(n){if(Ve(r.value,":autofill")||Ve(r.value,":-webkit-autofill")){const h=m.value.find(L=>L.title===n.target.value);h&&T(h)}}function U(){var n;v.value&&(w.value=!0,(n=r.value)==null||n.focus())}function C(n){v.value=!0,setTimeout(()=>{o.value=!0})}function M(n){o.value=!1}function R(n){(n==null||n===""&&!e.multiple)&&(k.value=[])}const B=j(!1);function T(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!n.props.disabled)if(e.multiple){const L=k.value.findIndex(N=>e.valueComparator(N.value,n.value));if(L===-1)k.value=[...k.value,n];else{const N=[...k.value];N.splice(L,1),k.value=N}}else k.value=h?[n]:[],B.value=!0,b.value=h?n.title:"",g.value=!1,w.value=!0,ye(()=>B.value=!1)}return W(v,(n,h)=>{var L;n!==h&&(n?(B.value=!0,b.value=e.multiple?"":String(((L=k.value.at(-1))==null?void 0:L.props.title)??""),w.value=!0,ye(()=>B.value=!1)):(!e.multiple&&b.value==null?k.value=[]:ee.value&&!o.value&&!k.value.some(N=>{let{value:x}=N;return x===_.value[0].value})&&T(_.value[0]),g.value=!1,b.value="",u.value=-1))}),W(b,n=>{!v.value||B.value||(n&&(g.value=!0),w.value=!n)}),W(g,()=>{if(!e.hideSelected&&g.value&&k.value.length){const n=_.value.findIndex(h=>k.value.some(L=>h.value===L.value));Pe&&window.requestAnimationFrame(()=>{var h;n>=0&&((h=V.value)==null||h.scrollToIndex(n))})}}),W(_,(n,h)=>{v.value&&(!n.length&&e.hideNoData&&(g.value=!1),!h.length&&n.length&&(g.value=!0))}),ve(()=>{const n=!!(e.chips||t.chip),h=!!(!e.hideNoData||_.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),L=k.value.length>0,N=ge.filterProps(e);return c(ge,q({ref:r},N,{modelValue:b.value,"onUpdate:modelValue":[x=>b.value=x,R],focused:v.value,"onUpdate:focused":x=>v.value=x,validationValue:k.externalValue,counterValue:ie.value,dirty:L,onChange:K,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":g.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":u.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:L?void 0:e.placeholder,"onClick:clear":oe,"onMousedown:control":i,onKeydown:p}),{...t,default:()=>c(Q,null,[c(Je,q({ref:l,modelValue:g.value,"onUpdate:modelValue":x=>g.value=x,activator:"parent",contentClass:"v-autocomplete__content",disabled:Y.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:U},e.menuProps),{default:()=>[h&&c(je,{ref:te,selected:ne.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:se,onFocusin:C,onFocusout:M,onScrollPassive:J,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},{default:()=>{var x,H,E;return[(x=t["prepend-item"])==null?void 0:x.call(t),!_.value.length&&!e.hideNoData&&(((H=t["no-data"])==null?void 0:H.call(t))??c(we,{title:s(e.noDataText)},null)),c(Qe,{ref:V,renderless:!0,items:_.value},{default:X=>{var Ae;let{item:z,index:ae,itemRef:ue}=X;const Te=q(z.props,{ref:ue,key:ae,active:ee.value&&ae===0?!0:void 0,onClick:()=>T(z)});return((Ae=t.item)==null?void 0:Ae.call(t,{item:z,index:ae,props:Te}))??c(we,Te,{prepend:fe=>{let{isSelected:me}=fe;return c(Q,null,[e.multiple&&!e.hideSelected?c(Xe,{key:z.value,modelValue:me,ripple:!1,tabindex:"-1"},null):void 0,z.props.prependAvatar&&c(Ne,{image:z.props.prependAvatar},null),z.props.prependIcon&&c(Se,{icon:z.props.prependIcon},null)])},title:()=>{var fe,me;return w.value?z.title:Lt(z.title,(fe=Z(z))==null?void 0:fe.title,((me=b.value)==null?void 0:me.length)??0)}})}}),(E=t["append-item"])==null?void 0:E.call(t)]}})]}),k.value.map((x,H)=>{function E(ue){ue.stopPropagation(),ue.preventDefault(),T(x,!1)}const X={"onClick:close":E,onMousedown(ue){ue.preventDefault(),ue.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},z=n?!!t.chip:!!t.selection,ae=z?Ke(n?t.chip({item:x,index:H,props:X}):t.selection({item:x,index:H})):void 0;if(!(z&&!ae))return c("div",{key:x.value,class:["v-autocomplete__selection",H===u.value&&["v-autocomplete__selection--selected",P.value]],style:H===u.value?O.value:{}},[n?t.chip?c(Fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:x.title}}},{default:()=>[ae]}):c(Ye,q({key:"chip",closable:e.closableChips,size:"small",text:x.title,disabled:x.props.disabled},X),null):ae??c("span",{class:"v-autocomplete__selection-text"},[x.title,e.multiple&&H<k.value.length-1&&c("span",{class:"v-autocomplete__selection-comma"},[Be(",")])])])})]),"append-inner":function(){var X;for(var x=arguments.length,H=new Array(x),E=0;E<x;E++)H[E]=arguments[E];return c(Q,null,[(X=t["append-inner"])==null?void 0:X.call(t,...H),e.menuIcon?c(Se,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:a,onClick:vt,"aria-label":s(I.value),title:s(I.value)},null):void 0])}})}),Ie({isFocused:v,isPristine:w,menu:g,search:b,filteredItems:G,select:T},r)}});export{Wt as V,qt as a,Dt as m,Rt as u};
