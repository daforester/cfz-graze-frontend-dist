import{p as _e,r as _,e as ne,S as v,y as cl,aA as Re,ah as We,al as ml,an as Qe,n as Fe,ae as vl,s as Ae,u as Oe,w as J,E as Ge,v as s,H as $,x as oe,N as q,aB as fl,I as ce,a1 as Q,a2 as me,a5 as we,K as o,R,U as K,O as G,M as d,Z as j,L as b,Q as P,a3 as Ue,P as Ze,ar as Me,$ as el,Y as gl,ac as Ke,a as pl,ax as hl,J as Ul,aC as He}from"./index-39564366.js";import{F as ue}from"./form-e2a93b7c.js";import{a as yl}from"./submission-56c4c4f1.js";import{a as Il,V as de,u as Ne,m as bl,b as ll,c as Tl,d as Vl}from"./VCheckbox-efd3f278.js";import{s as De}from"./index-71069b21.js";import{f as Dl,V as ie,a as W,e as ye,d as Ve,c as tl}from"./VList-642b02d7.js";import{a as Z,V as N}from"./VRow-8bb5a658.js";import{m as Cl,u as kl,a as El,b as Sl,V as $e,c as Al}from"./copyToClipboard-287191d9.js";import{v as Ol,u as qe,V as Ce,z as _l,j as Rl}from"./VContainer-b18898cf.js";import{a as Ml,e as Ll,_ as Ye}from"./VChip-0a6266fc.js";import{V as ae}from"./VBtn-d4c4fc40.js";import{k as Pl,l as $l,j as Fl,V as Ie,m as wl,f as Xe,n as Nl}from"./VTextField-e08162c9.js";import{V as ql}from"./VTextarea-d0624b6f.js";import{m as xl}from"./VAvatar-2e5c2884.js";import{G as Bl}from"./userData-a0033275.js";import{v as Le}from"./v4-a960c1f4.js";import{e as Gl,V as Kl,a as Hl,c as Yl}from"./VCard-d31936d9.js";import{V as Xl}from"./VForm-b77ea077.js";const Je=(e,g,n)=>{if(n>=e.length){let A=n-e.length+1;for(;A--;)e.push(void 0)}e.splice(n,0,e.splice(g,1)[0])},ke=e=>{e.sort((g,n)=>(g.Order?g.Order:0)-(n.Order?n.Order:0)),e.forEach((g,n)=>{g.Order=n})},Xt=(e,g)=>{const n=g.indexOf(e);if(n===0)return;const A=e.Order;e.Order=g[n-1].Order,g[n-1].Order=A,ke(g)},Jt=(e,g)=>{const n=g.indexOf(e);if(n>=g.length-1)return;const A=e.Order;e.Order=g[n+1].Order,g[n+1].Order=A,ke(g)},Pe=e=>(ke(e),e),jt=e=>(g,n)=>g[e]<n[e]?-1:g[e]>n[e]?1:0;var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const zt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var al=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(al||{});const Wt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,g,n)=>e==null||g==null?-1:e.toString().toLocaleLowerCase().indexOf(g.toString().toLocaleLowerCase()),jl=_e({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function zl(e,g,n){var p;const A=[],U=(n==null?void 0:n.default)??Jl,h=n!=null&&n.filterKeys?We(n.filterKeys):!1,E=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return A;e:for(let c=0;c<e.length;c++){const C=e[c],a={},m={};let I=-1;if(g&&!(n!=null&&n.noFilter)){if(typeof C=="object"){const i=h||Object.keys(C);for(const u of i){const t=ml(C,u,C),l=(p=n==null?void 0:n.customKeyFilter)==null?void 0:p[u];if(I=l?l(t,g,C):U(t,g,C),I!==-1&&I!==!1)l?a[u]=I:m[u]=I;else if((n==null?void 0:n.filterMode)==="every")continue e}}else I=U(C,g,C),I!==-1&&I!==!1&&(m.title=I);const k=Object.keys(m).length,r=Object.keys(a).length;if(!k&&!r||(n==null?void 0:n.filterMode)==="union"&&r!==E&&!k||(n==null?void 0:n.filterMode)==="intersection"&&(r!==E||!k))continue}A.push({index:c,matches:{...m,...a}})}return A}function Wl(e,g,n,A){const U=_([]),h=_(new Map),E=ne(()=>A!=null&&A.transform?v(g).map(A==null?void 0:A.transform):v(g));cl(()=>{const c=typeof Re(n)!="string"&&typeof Re(n)!="number"?"":String(Re(n)),C=zl(E.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),a=v(g),m=[],I=new Map;C.forEach(k=>{let{index:r,matches:i}=k;const u=a[r];m.push(u),I.set(u.value,i)}),U.value=m,h.value=I});function p(c){return h.value.get(c.value)}return{filteredItems:U,filteredMatches:h,getMatches:p}}function Ql(e,g,n){if(g==null)return e;if(Array.isArray(g))throw new Error("Multiple matches is not implemented");return typeof g=="number"&&~g?s($,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,g)]),s("span",{class:"v-autocomplete__mask"},[e.substr(g,n)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(g+n)])]):e}const Zl=_e({autoSelectFirst:{type:[Boolean,String]},search:String,...jl({filterKeys:["title"]}),...Cl(),...Qe(Pl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...xl({transition:!1})},"VAutocomplete"),je=Fe()({name:"VAutocomplete",props:Zl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,g){let{slots:n}=g;const{t:A}=vl(),U=_(),h=Ae(!1),E=Ae(!0),p=_(!1),c=_(),C=Oe(e,"menu"),a=ne({get:()=>C.value,set:y=>{var x;C.value&&!y&&((x=c.value)!=null&&x.Î¨openChildren)||(C.value=y)}}),m=Ae(-1),I=ne(()=>{var y;return(y=U.value)==null?void 0:y.color}),{items:k,transformIn:r,transformOut:i}=Dl(e),{textColorClasses:u,textColorStyles:t}=Ol(I),l=Oe(e,"search",""),f=Oe(e,"modelValue",[],y=>r(y===null?[null]:We(y)),y=>{const x=i(y);return e.multiple?x:x[0]??null}),T=$l(),{filteredItems:O,getMatches:te}=Wl(e,k,()=>E.value?"":l.value),V=ne(()=>f.value.map(y=>k.value.find(x=>e.valueComparator(x.value,y.value))||y)),D=ne(()=>e.hideSelected?O.value.filter(y=>!V.value.some(x=>x.value===y.value)):O.value),H=ne(()=>V.value.map(y=>y.props.value)),ve=ne(()=>V.value[m.value]),fe=ne(()=>{var x;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&l.value===((x=D.value[0])==null?void 0:x.title))&&D.value.length>0&&!E.value&&!p.value}),be=ne(()=>e.hideNoData&&!k.value.length||e.readonly||(T==null?void 0:T.isReadonly.value)),se=_(),{onListScroll:M,onListKeydown:L}=kl(se,U);function S(y){e.openOnClear&&(a.value=!0),l.value=""}function w(){be.value||(a.value=!0)}function ge(y){be.value||(h.value&&(y.preventDefault(),y.stopPropagation()),a.value=!a.value)}function nl(y){var he,F,z;if(e.readonly||T!=null&&T.isReadonly.value)return;const x=U.value.selectionStart,Y=H.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(a.value=!0),["Escape"].includes(y.key)&&(a.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(fe.value&&["Enter","Tab"].includes(y.key)&&pe(O.value[0]),E.value=!0),y.key==="ArrowDown"&&fe.value&&((he=se.value)==null||he.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(m.value<0){y.key==="Backspace"&&!l.value&&(m.value=Y-1);return}const B=m.value;ve.value&&pe(ve.value),m.value=B>=Y-1?Y-2:B}if(y.key==="ArrowLeft"){if(m.value<0&&x>0)return;const B=m.value>-1?m.value-1:Y-1;V.value[B]?m.value=B:(m.value=-1,U.value.setSelectionRange((F=l.value)==null?void 0:F.length,(z=l.value)==null?void 0:z.length))}if(y.key==="ArrowRight"){if(m.value<0)return;const B=m.value+1;V.value[B]?m.value=B:(m.value=-1,U.value.setSelectionRange(0,0))}}}function ul(y){l.value=y.target.value}function il(){var y;h.value&&(E.value=!0,(y=U.value)==null||y.focus())}function ol(y){h.value=!0,setTimeout(()=>{p.value=!0})}function sl(y){p.value=!1}function rl(y){(y==null||y===""&&!e.multiple)&&(f.value=[])}const Te=Ae(!1);function pe(y){if(e.multiple){const x=H.value.findIndex(Y=>e.valueComparator(Y,y.value));if(x===-1)f.value=[...f.value,y];else{const Y=[...f.value];Y.splice(x,1),f.value=Y}}else f.value=[y],Te.value=!0,l.value=y.title,a.value=!1,E.value=!0,Ge(()=>Te.value=!1)}return J(h,(y,x)=>{var Y;y!==x&&(y?(Te.value=!0,l.value=e.multiple?"":String(((Y=V.value.at(-1))==null?void 0:Y.props.title)??""),E.value=!0,Ge(()=>Te.value=!1)):(!e.multiple&&!l.value?f.value=[]:fe.value&&!p.value&&!V.value.some(he=>{let{value:F}=he;return F===D.value[0].value})&&pe(D.value[0]),a.value=!1,l.value="",m.value=-1))}),J(l,y=>{!h.value||Te.value||(y&&(a.value=!0),E.value=!y)}),qe(()=>{const y=!!(e.chips||n.chip),x=!!(!e.hideNoData||D.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),Y=f.value.length>0,[he]=Ie.filterProps(e);return s(Ie,oe({ref:U},he,{modelValue:l.value,"onUpdate:modelValue":rl,focused:h.value,"onUpdate:focused":F=>h.value=F,validationValue:f.externalValue,dirty:Y,onInput:ul,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":a.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!n.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Y?void 0:e.placeholder,"onClick:clear":S,"onMousedown:control":w,onKeydown:nl}),{...n,default:()=>s($,null,[s(El,oe({ref:c,modelValue:a.value,"onUpdate:modelValue":F=>a.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:be.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:il},e.menuProps),{default:()=>[x&&s(ie,{ref:se,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:L,onFocusin:ol,onFocusout:sl,onScrollPassive:M,tabindex:"-1"},{default:()=>{var F,z,B;return[(F=n["prepend-item"])==null?void 0:F.call(n),!D.value.length&&!e.hideNoData&&(((z=n["no-data"])==null?void 0:z.call(n))??s(W,{title:A(e.noDataText)},null)),s(Sl,{renderless:!0,items:D.value},{default:re=>{var Be;let{item:ee,index:le,itemRef:dl}=re;const xe=oe(ee.props,{ref:dl,key:le,active:fe.value&&le===0?!0:void 0,onClick:()=>pe(ee)});return((Be=n.item)==null?void 0:Be.call(n,{item:ee,index:le,props:xe}))??s(W,xe,{prepend:Ee=>{let{isSelected:Se}=Ee;return s($,null,[e.multiple&&!e.hideSelected?s(Il,{key:ee.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,ee.props.prependIcon&&s(Ce,{icon:ee.props.prependIcon},null)])},title:()=>{var Ee,Se;return E.value?ee.title:Ql(ee.title,(Ee=te(ee))==null?void 0:Ee.title,((Se=l.value)==null?void 0:Se.length)??0)}})}}),(B=n["append-item"])==null?void 0:B.call(n)]}})]}),V.value.map((F,z)=>{var ee;function B(le){le.stopPropagation(),le.preventDefault(),pe(F)}const re={"onClick:close":B,onMousedown(le){le.preventDefault(),le.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:F.value,class:["v-autocomplete__selection",z===m.value&&["v-autocomplete__selection--selected",u.value]],style:z===m.value?t.value:{}},[y?n.chip?s(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>{var le;return[(le=n.chip)==null?void 0:le.call(n,{item:F,index:z,props:re})]}}):s(Ml,oe({key:"chip",closable:e.closableChips,size:"small",text:F.title},re),null):((ee=n.selection)==null?void 0:ee.call(n,{item:F,index:z}))??s("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&z<V.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){var re;for(var F=arguments.length,z=new Array(F),B=0;B<F;B++)z[B]=arguments[B];return s($,null,[(re=n["append-inner"])==null?void 0:re.call(n,...z),e.menuIcon?s(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:ge,onClick:fl},null):void 0])}})}),Fl({isFocused:h,isPristine:E,menu:a,search:l,filteredItems:O,select:pe},U)}}),et={class:"extrasList"},lt=ce({__name:"Extras",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const n=e,{admin:A=!1,convention:U,disabled:h=!1}=n,E=me(e,"modelValue"),p=we.getInstance(),c=_({});try{c.value=JSON.parse(E.value)}catch{}const C=_([]),a=_([]);J(n,()=>{I()}),J(c.value,r=>{for(const i in r)if(r[i].checked){const u=C.value.map(t=>{var l;return(l=t.Options)==null?void 0:l.find(f=>f.OptionUUID===i)});if(u&&u.length>0)try{const t=u[0];r[i].choiceId===""&&t&&t.Choices&&t.Choices.length>0&&(r[i].choiceId=t.Choices[0].TagUUID),r[i].price=t==null?void 0:t.Price}catch{}}else r[i].choiceId="",r[i].price=0;E.value=JSON.stringify(r),k()});const m=ne({get:()=>C.value.map(r=>r.ExtraUUID),set:()=>{}}),I=()=>{var i;const r=((i=n.items.find(u=>u.Title==="SelectedExtras"))==null?void 0:i.Value)||"[]";try{const u=JSON.parse(r);C.value=a.value.filter(t=>u.find(l=>l===t.ExtraUUID))||[],m.value=[...C.value.map(t=>t.ExtraUUID)],C.value.forEach(t=>{var l;(l=t.Options)==null||l.forEach(f=>{c.value[f.OptionUUID]||(c.value[f.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in U&&U.Extras.length?(a.value=U.Extras,I()):"ConventionUUID"in U&&(A?p==null||p.getConventionExtras(U.ConventionUUID).then(r=>{r&&(a.value=r,I())}):p==null||p.getAvailableConventionExtras(U.ConventionUUID).then(r=>{r&&(a.value=r,I())}));const k=(r=void 0)=>{setTimeout(()=>g("change",r),100)};return(r,i)=>(o(),R("div",et,[K("h4",null,G(r.label),1),s(ie,{opened:m.value,"onUpdate:opened":i[0]||(i[0]=u=>m.value=u)},{default:d(()=>[(o(!0),R($,null,j(C.value,u=>(o(),b(tl,{key:u.ExtraUUID,value:u.ExtraUUID},{activator:d(({props:t})=>[s(W,oe({"prepend-icon":"mdi:mdi-group","append-icon":""},t),{default:d(()=>[u.Name?(o(),b(ye,{key:0},{default:d(()=>[K("strong",null,G(u.Name),1)]),_:2},1024)):P("",!0),u.Description?(o(),b(Ve,{key:1,class:"mt-2 d-inline"},{default:d(()=>[q(G(u.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:d(()=>[u.Options?(o(!0),R($,{key:0},j(u.Options,t=>(o(),b(W,{key:t.OptionUUID,class:"override-pl"},{default:d(()=>[s(Z,null,{default:d(()=>[s(N,{cols:"12",sm:"6"},{default:d(()=>[s(de,{label:`${t.Name} ${t.Price&&t.Price!==0?`(${v(De).currencySymbol}${t.Price})`:""}`,modelValue:c.value[t.OptionUUID].checked,"onUpdate:modelValue":l=>c.value[t.OptionUUID].checked=l,disabled:v(h),"hide-details":"",onChange:k},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t.Choices&&t.Choices.length>1&&c.value[t.OptionUUID].checked?(o(),b(N,{key:0,cols:"12",sm:"6"},{default:d(()=>[s($e,{items:t.Choices.sort((l,f)=>l.Title.localeCompare(f.Title)).map(l=>({value:l.TagUUID,title:l.Title})),modelValue:c.value[t.OptionUUID].choiceId,"onUpdate:modelValue":l=>c.value[t.OptionUUID].choiceId=l,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(h),"hide-details":"",onChange:k},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const tt={class:"interestList"},at=ce({__name:"Interests",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const n=e,{admin:A=!1,convention:U,disabled:h=!1}=n,E=me(e,"modelValue"),p=we.getInstance(),c=_({});try{c.value=JSON.parse(E.value)}catch{}const C=_([]),a=_([]);J(c.value,r=>{E.value=JSON.stringify(r)});const m=_([]),I=()=>{var i;const r=((i=n.items.find(u=>u.Title==="SelectedInterests"))==null?void 0:i.Value)||"[]";try{const u=JSON.parse(r);C.value=a.value.filter(t=>u.find(l=>l===t.InterestUUID))||[],m.value=[...C.value.map(t=>t.InterestUUID)]}catch{}};"ConventionUUID"in U&&(A?p==null||p.getConventionInterests(U.ConventionUUID).then(r=>{r&&(a.value=r,I())}):p==null||p.getConventionInterests(U.ConventionUUID).then(r=>{r&&(a.value=r,I())})),J(n,()=>{I()});const k=(r=void 0)=>{setTimeout(()=>g("change",r),100)};return(r,i)=>(o(),R("div",tt,[K("h4",null,G(r.label),1),s(ie,{opened:m.value,"onUpdate:opened":i[0]||(i[0]=u=>m.value=u)},{default:d(()=>[(o(!0),R($,null,j(C.value,u=>(o(),b(W,{key:u.InterestUUID},{default:d(()=>[s(Z,null,{default:d(()=>[s(N,null,{default:d(()=>[s(de,{label:`${u.Name} ${u.Price&&u.Price>0?`(${v(De).currencySymbol}${u.Price})`:""}`,modelValue:c.value[u.InterestUUID],"onUpdate:modelValue":t=>c.value[u.InterestUUID]=t,disabled:v(h),messages:u.Description,onChange:k},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const nt={class:"ticketList"},ut={key:0,class:"text-orange-darken-1"},it=ce({__name:"Tickets",props:Q({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change"],["update:modelValue"]),setup(e,{emit:g}){const n=e,{admin:A=!1,convention:U,disabled:h=!1}=n,E=me(e,"modelValue"),p=we.getInstance(),c=_({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(E.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const C=_([]),a=_([]);J(c.value,t=>{E.value=JSON.stringify(t)});const m=_([]),I=_({required:(t,l=void 0)=>()=>{if(l==null){if(c.value.Ticket.length===0&&n.required)return"Must select at least one ticket option.";if(t&&t.ComponentsRequired>0&&c.value.Ticket.includes(t.TicketUUID||"")){let f=0;if(t.TicketComponents.forEach(T=>{c.value.ComponentsChecked.forEach(O=>{T.TicketUUID===O&&(f+=1)})}),f<t.ComponentsRequired)return`Must select ticket ${t.ComponentsRequired} component${t.ComponentsRequired===1?"":"s"}`}}return!0}}),k=()=>{var l;const t=((l=n.items.find(f=>f.Title==="SelectedTickets"))==null?void 0:l.Value)||"[]";try{const f=JSON.parse(t);C.value=a.value.filter(T=>T.Type==="TICKET_TYPE_GROUP"&&f.find(O=>O===T.TicketUUID))||[],m.value=[...C.value.filter(T=>T.Type==="TICKET_TYPE_GROUP").map(T=>T.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(A)p==null||p.getConventionTickets(U.ConventionUUID).then(t=>{t&&(a.value=t,k())});else{const t=n.items.find(l=>l.Title==="SelectedTickets");t&&(p==null||p.getFieldTickets(t.FieldUUID).then(l=>{l&&(a.value=l,k())}))}J(n,()=>{k()});const r=t=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const l=[];C.value.forEach(f=>{(c.value.Ticket.includes(f.TicketUUID)||c.value.ComponentsChecked.includes(f.TicketUUID))&&l.push(...f.AddonTickets.map(T=>T.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(f=>l.includes(f)),u(t)},i=t=>{const l=a.value.find(f=>f.TicketUUID===c.value.Ticket[0]);if(l)for(;c.value.ComponentsChecked.length>l.ComponentsRequired;)c.value.ComponentsChecked.shift();u(t)},u=(t=void 0)=>{setTimeout(()=>g("change",t),100)};return(t,l)=>{var f;return o(),R("div",nt,[K("h4",null,[q(G(t.label)+" ",1),(f=t.registrationGroup)!=null&&f.Registration.Leader?P("",!0):(o(),R("small",ut,"(controlled by group leader)"))]),s(ie,{opened:m.value,"onUpdate:opened":l[4]||(l[4]=T=>m.value=T)},{default:d(()=>[(o(!0),R($,null,j(v(Pe)(C.value.filter(T=>T.Type===v(al).TICKET_TYPE_GROUP)),T=>(o(),R($,{key:T.TicketUUID},[T.Tickets.length>0?(o(),b(tl,{key:0,value:T.TicketUUID},{activator:d(({props:O})=>[s(W,oe(O,{"prepend-icon":"mdi:mdi-group"}),{default:d(()=>[s(ye,null,{default:d(()=>[K("strong",null,G(T.Name),1)]),_:2},1024),s(Ve,{class:"d-inline"},{default:d(()=>[q(G(T.Description),1)]),_:2},1024)]),_:2},1040)]),default:d(()=>[(o(!0),R($,null,j(T.Tickets,O=>(o(),b(W,{key:O.TicketUUID,class:"override-pl"},{default:d(()=>{var te;return[s(Ve,{class:"d-inline"},{default:d(()=>[q(G(O.Description),1)]),_:2},1024),s(de,{modelValue:c.value.Ticket,"onUpdate:modelValue":l[0]||(l[0]=V=>c.value.Ticket=V),value:O.TicketUUID,onChange:r,rules:[I.value.required(O)],"validate-on":"submit",disabled:v(h)||!((te=t.registrationGroup)!=null&&te.Registration.Leader)},{label:d(()=>[s(Ce,{icon:O.RequiresAccommodation?"mdi:mdi-home":O.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${O.Name} ${O.Price>0?`(${v(De).currencySymbol}${O.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&O.TicketUUID===c.value.Ticket[0]?(o(),R($,{key:0},[O.AddonTickets.length?(o(),b(ie,{key:0},{default:d(()=>[(o(!0),R($,null,j(v(Pe)(O.AddonTickets),V=>(o(),R($,{key:V==null?void 0:V.TicketUUID},[V?(o(),b(W,{key:0},{default:d(()=>[s(ye,null,{default:d(()=>{var D;return[s(de,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":l[1]||(l[1]=H=>c.value.AddonsChecked=H),value:V.TicketUUID,onChange:l[2]||(l[2]=H=>{c.value.ComponentsChecked=[],u(H)}),disabled:v(h)||!((D=t.registrationGroup)!=null&&D.Registration.Leader)},{label:d(()=>[s(Ce,{icon:V.RequiresAccommodation?"mdi:mdi-home-plus":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${V.Name} ${V.Price>0?`(${v(De).currencySymbol}${V.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Ve,{class:"d-inline"},{default:d(()=>[q(G(V.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),O.TicketComponents.length?(o(),b(ie,{key:1},{default:d(()=>[(o(!0),R($,null,j(v(Pe)(O.TicketComponents),V=>(o(),R($,{key:V==null?void 0:V.TicketUUID},[V?(o(),b(W,{key:0},{default:d(()=>[s(ye,null,{default:d(()=>{var D;return[s(de,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":l[3]||(l[3]=H=>c.value.ComponentsChecked=H),value:V.TicketUUID,onChange:i,rules:[I.value.required(O,V)],"validate-on":"submit",disabled:v(h)||!((D=t.registrationGroup)!=null&&D.Registration.Leader)},{label:d(()=>[s(Ce,{icon:V.RequiresAccommodation?"mdi:mdi-home-plus":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+G(`${V.Name} ${V.Price>0?`(${v(De).currencySymbol}${V.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Ve,null,{default:d(()=>[q(G(V.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},st=K("strong",null,"Your Sharing Group",-1),rt=["href","onClick"],dt=K("br",null,null,-1),ct=K("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),mt=K("strong",null,"Your Groups Accommodation",-1),vt=K("br",null,null,-1),ft=K("small",null,"(in order of preference, controlled by group leader)",-1),gt=K("strong",null,"Accommodation Options",-1),pt=K("br",null,null,-1),ht=K("strong",null,"Your Chosen Accommodation",-1),Ut=K("small",null,"(in order of preference)",-1),yt=ce({__name:"Accommodation",props:Q({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const n=e,{admin:A=!1,convention:U,disabled:h}=n,E=me(e,"modelValue"),p=Ne(n,g,void 0,void 0,"items"),c=el(),C=gl.getInstance(),a=_(Ue(E.value)),m=_([]),I=_(),k=_({sharing:!1}),r=()=>{try{const M=JSON.parse(n.data);M&&(k.value=M)}catch{}};r(),J(n,()=>{r(),n.registrationGroup&&(m.value=n.registrationGroup.Members,I.value=n.registrationGroup.Registration)}),J(a,M=>{E.value=Ue(M)},{deep:!0});const i=_(""),u=_(!1),t=()=>{var M;(M=I.value)!=null&&M.Leader&&c.getRegistrationInvite(U.ConventionUUID).then(L=>{if(L){const S=new URL(location.href);S.searchParams.set("token",L),i.value=S.toString()}})},l=()=>{Al(i.value),t(),u.value=!0,setTimeout(()=>u.value=!1,2200)},f=()=>{C.emit("registration.group.leave")},T=M=>{C.emit("registration.group.remove.member",M)},O=_([]);J(p,()=>{te()});const te=()=>{A?c.getConventionAccommodation(U.ConventionUUID).then(M=>{O.value=M.filter(L=>!!(p!=null&&p.value.find(S=>S.Value===L.AccommodationUUID)))||[]}):p.value.length>0&&c.getFieldAccommodation(p.value[0].FieldUUID).then(M=>{O.value=M.filter(L=>!!(p!=null&&p.value.find(S=>S.Value===L.AccommodationUUID)))||[]})};te(),(()=>{var M;if(n.registrationGroup)if(m.value=n.registrationGroup.Members,I.value=n.registrationGroup.Registration,(M=I.value)!=null&&M.Leader)t();else try{a.value=JSON.parse(n.registrationGroup.AccommodationData)}catch{}})();const D=_({column:0,id:""}),H=()=>{!h&&!a.value.includes(D.value.id)&&(D.value.column===0&&D.value.id!==""&&a.value.push(D.value.id),se())},ve=()=>{const M=a.value.findIndex(L=>L===D.value.id);!h&&M>=0&&(a.value.splice(M,1),se())},fe=()=>{if(h||D.value.column!==1)return;const M=a.value.findIndex(L=>L===D.value.id);M<=0||(Je(a.value,M,M-1),se())},be=()=>{if(h||D.value.column!==1)return;const M=a.value.findIndex(L=>L===D.value.id);M>=a.value.length-1||(Je(a.value,M,M+1),se())},se=(M=void 0)=>{setTimeout(()=>g("change",M),100)};return(M,L)=>(o(),R($,null,[K("h4",null,G(M.label),1),s(Z,null,{default:d(()=>[s(N,{cols:"12"},{default:d(()=>{var S;return[m.value&&I.value&&k.value.sharing?(o(),R("div",ot,[st,!v(h)&&((S=m.value.find(w=>w.IsLeader))==null?void 0:S.UUID)!==I.value.RegistrationUUID?(o(),b(ae,{key:0,color:"red",variant:"text",onClick:f},{default:d(()=>[q("(leave group)")]),_:1})):P("",!0),s(ie,null,{default:d(()=>[s(W,null,{default:d(()=>{var w;return[s(ye,{class:"float-left pr-2 font-weight-bold"},{default:d(()=>[q(" Leader: ")]),_:1}),q(" "+G((w=m.value.find(ge=>ge.IsLeader))==null?void 0:w.Name),1)]}),_:1}),(o(!0),R($,null,j(m.value,w=>(o(),R($,{key:w.UUID},[w.IsLeader?P("",!0):(o(),b(W,{key:0},{append:d(()=>[I.value.Leader?(o(),b(ae,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:ge=>T(w.UUID),disabled:v(h)},null,8,["onClick","disabled"])):P("",!0)]),default:d(()=>[s(ye,{class:"float-left pr-2"},{default:d(()=>[q(" Member: ")]),_:1}),q(" "+G(w.Name),1)]),_:2},1024))],64))),128))]),_:1}),s(Ll,{modelValue:u.value,"onUpdate:modelValue":L[0]||(L[0]=w=>u.value=w),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),i.value&&I.value.Leader&&!v(h)?(o(),R($,{key:1},[s(ae,{color:"blue"},{default:d(()=>[K("a",{href:i.value,onClick:Ze(l,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,rt)]),_:1}),dt,ct],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),I.value&&!I.value.Leader?(o(),b(Z,{key:0},{default:d(()=>[s(N,{cols:"10",md:"5"},{default:d(()=>[mt,vt,ft,s(ie,null,{default:d(()=>[(o(!0),R($,null,j(a.value.map(S=>O.value.find(w=>w.AccommodationUUID==S)).filter(S=>S!==void 0),(S,w)=>(o(),R($,null,[S?(o(),b(W,{key:S.AccommodationUUID,title:`${w+1}. ${S.Name}`,class:Me(D.value.column===1&&D.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),b(Z,{key:1},{default:d(()=>[s(N,{cols:"12",md:"5"},{default:d(()=>[gt,pt,s(ie,null,{default:d(()=>[(o(!0),R($,null,j(O.value,S=>(o(),b(W,{key:S.AccommodationUUID,title:S.Name,class:Me(D.value.column===0&&D.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:w=>D.value={column:0,id:S.AccommodationUUID},"append-icon":v(h)?"":"mdi:mdi-gesture-tap",onDblclick:L[1]||(L[1]=w=>H())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(h)?P("",!0):(o(),b(N,{key:0,cols:"12",md:"1"},{default:d(()=>[s(Z,{class:"d-md-none"},{default:d(()=>[s(N,{cols:"12",class:"text-center"},{default:d(()=>[s(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:L[2]||(L[2]=S=>H()),color:"primary",title:"Select"}),q(" Â  "),s(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:L[3]||(L[3]=S=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(Z,{class:"d-none d-md-flex h-100 align-content-center"},{default:d(()=>[s(N,{cols:"12"},{default:d(()=>[s(ae,{icon:"mdi:mdi-arrow-right",size:"small",onClick:L[4]||(L[4]=S=>H()),color:"primary",title:"Select"})]),_:1}),s(N,{cols:"12"},{default:d(()=>[s(ae,{icon:"mdi:mdi-arrow-left",size:"small",onClick:L[5]||(L[5]=S=>ve()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(N,{cols:"10",md:"5"},{default:d(()=>[ht,s(ie,null,{default:d(()=>[(o(!0),R($,null,j(a.value.map(S=>O.value.find(w=>w.AccommodationUUID==S)).filter(S=>S!==void 0),(S,w)=>(o(),R($,null,[S?(o(),b(W,{key:S.AccommodationUUID,title:`${w+1}. ${S.Name}`,class:Me(D.value.column===1&&D.value.id===S.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ge=>D.value={column:1,id:(S==null?void 0:S.AccommodationUUID)||""},"append-icon":v(h)?"":"mdi:mdi-gesture-tap",onDblclick:L[6]||(L[6]=ge=>ve())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),Ut]),_:1}),v(h)?P("",!0):(o(),b(N,{key:1,cols:"2",md:"1"},{default:d(()=>[s(Z,{class:"d-flex h-100 align-content-center mt-3"},{default:d(()=>[s(N,{cols:"12"},{default:d(()=>[s(ae,{icon:"mdi:mdi-arrow-up",size:"small",onClick:L[7]||(L[7]=S=>fe()),color:"primary",title:"Higher Priority"})]),_:1}),s(N,{cols:"12"},{default:d(()=>[s(ae,{icon:"mdi:mdi-arrow-down",size:"small",onClick:L[8]||(L[8]=S=>be()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1}))],64))}}),It=ce({__name:"AgeCheck",props:Q({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:Q(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const n=e,A=Ne(n,g,void 0,void 0,"items"),U=me(e,"modelValue"),h=_({required:a=>!n.required||!!a||"Required.",min:a=>{var l,f;const m=new Date,I=m.getFullYear(),k=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),i=((l=A.value.find(T=>T.Title=="MIN_AGE"))==null?void 0:l.Value)||"18",u=((f=A.value.find(T=>T.Title=="BEFORE_DATE"))==null?void 0:f.Value)||`${I}-${k}-${r}`,t=c(u);return p(a,u,parseInt(i))||`You must be at least ${i} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),E=()=>(g("blur"),!(h.value.min(U.value||"")!==!0||h.value.required(U.value||"")!==!0)),p=(a,m,I)=>{if(a>=m)return!1;const k=c(a),i=c(m).getTime()-k.getTime(),u=1e3*60*60*24*365.25;return i/u>=I},c=a=>{const[m,I,k]=a.split("-");return new Date(parseInt(m),parseInt(I)-1,parseInt(k))},C=(a=void 0)=>{setTimeout(()=>g("change",a),100)};return(a,m)=>(o(),b(Ie,{modelValue:U.value,"onUpdate:modelValue":m[0]||(m[0]=I=>U.value=I),type:"date",hint:a.hint||"",label:a.label||"",name:a.name||"",variant:"outlined",disabled:a.disabled||!1,"persistent-hint":a.persistentHint||!1,"error-messages":a.errorMessages||"",rules:[h.value.required,h.value.min],onBlur:E,onChange:C},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),bt=_e({...bl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Tt=Fe()({name:"VRadio",props:bt(),setup(e,g){let{slots:n}=g;return qe(()=>s(ll,oe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)),{}}});const Vt=_e({height:{type:[Number,String],default:"auto"},...wl(),...Qe(Tl(),["multiple"]),trueIcon:{type:Ke,default:"$radioOn"},falseIcon:{type:Ke,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Dt=Fe()({name:"VRadioGroup",inheritAttrs:!1,props:Vt(),emits:{"update:modelValue":e=>!0},setup(e,g){let{attrs:n,slots:A}=g;const U=pl(),h=ne(()=>e.id||`radio-group-${U}`),E=Oe(e,"modelValue");return qe(()=>{const[p,c]=hl(n),[C,a]=Xe.filterProps(e),[m,I]=ll.filterProps(e),k=A.label?A.label({label:e.label,props:{for:h.value}}):e.label;return s(Xe,oe({class:["v-radio-group",e.class],style:e.style},p,C,{modelValue:E.value,"onUpdate:modelValue":r=>E.value=r,id:h.value}),{...A,default:r=>{let{id:i,messagesId:u,isDisabled:t,isReadonly:l}=r;return s($,null,[k&&s(Nl,{id:i.value},{default:()=>[k]}),s(Vl,oe(m,{id:i.value,"aria-describedby":u.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:t.value,readonly:l.value,"aria-labelledby":k?i.value:void 0,multiple:!1},c,{modelValue:E.value,"onUpdate:modelValue":f=>E.value=f}),A)])}})}),{}}}),ze=ce({__name:"FormField",props:Q({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:Q(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:g}){const n=e,{admin:A=!1,disabled:U=!1,persistentHint:h=!1,required:E=!1}=n,p=_(""),c=me(e,"modelValue"),C=Ne(n,g,void 0,void 0,"field"),a=_(Ue(C.value)),m=_({maxlength:u=>!n.maxLength||u.length<=n.maxLength||`Maximum length is ${n.maxLength} characters. (Current length: ${u.length})`,minlength:u=>!n.minLength||u.length>=n.minLength||`Minimum length is ${n.minLength} characters. (Current length: ${u.length})`,required:u=>!n.required||!!u||"Required field."}),I=_(!1),k=_([]),r=_("");try{const u=JSON.parse(c.value);Array.isArray(u)?k.value=u:typeof u=="boolean"?I.value=u:r.value=c.value}catch{I.value=!1,k.value=[],r.value=c.value}J(I,()=>{c.value=JSON.stringify(I.value),g("input")}),J(k,()=>{c.value=JSON.stringify(k.value),g("input"),a.value.Type===X.SELECT&&g("change")},{deep:!0}),J(r,()=>{c.value=r.value,g("input"),a.value.Type===X.SELECT&&g("change")}),J(C.value,()=>{a.value.Type!==C.value.Type?(a.value=Ue(C.value),I.value=!1,k.value=[],r.value=""):a.value=Ue(C.value)});const i=(u=void 0)=>{g("change",u)};return(u,t)=>a.value.Type===v(X).TEXT?(o(),b(Ie,{key:0,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:`${a.value.Label}${v(E)?"*":""}`,placeholder:a.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):a.value.Type===v(X).DATE?(o(),b(Ie,{key:1,modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),type:"date",name:u.name,hint:a.value.Hint,label:a.value.Label,placeholder:a.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):a.value.Type===v(X).NUMBER?(o(),b(Ie,{key:2,modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value=l),type:"number",name:u.name,hint:a.value.Hint,label:a.value.Label,placeholder:a.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):a.value.Type===v(X).TEXTAREA?(o(),b(ql,{key:3,modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,placeholder:a.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:i},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):a.value.Type===v(X).CHECKBOX?(o(),R($,{key:4},[a.value.Multiple?(o(!0),R($,{key:0},j(a.value.Values,l=>(o(),b(de,{key:l.ID,modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=f=>k.value=f),name:u.name,hint:a.value.Hint,label:l.Title,value:l.Value,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,rules:[m.value.required],onChange:i},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),b(de,{key:1,modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=l=>I.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(E),rules:[l=>!v(E)||!!l||"You must tick to continue!"],onChange:i},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):a.value.Type===v(X).SELECT?(o(),R($,{key:5},[!a.value.Autofill&&a.value.Multiple?(o(),b($e,{key:0,modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=l=>k.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,multiple:"",items:a.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):a.value.Autofill&&a.value.Multiple?(o(),b(je,{key:1,modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=l=>k.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,multiple:"",items:a.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):a.value.Autofill?a.value.Autofill?(o(),b(je,{key:3,modelValue:r.value,"onUpdate:modelValue":t[9]||(t[9]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(o(),b($e,{key:2,modelValue:r.value,"onUpdate:modelValue":t[8]||(t[8]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(h)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):a.value.Type===v(X).RADIO?(o(),b(Dt,{key:6,modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,rules:[m.value.required],onChange:i},{default:d(()=>[(o(!0),R($,null,j(a.value.Values,l=>(o(),b(Tt,{key:l.Value,label:l.Title,value:l.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):a.value.Type===v(X).ACCOMMODATION?(o(),b(yt,{key:7,modelValue:k.value,"onUpdate:modelValue":t[11]||(t[11]=l=>k.value=l),name:u.name,admin:v(A),convention:u.convention,"registration-group":u.registrationGroup,data:u.field.Data,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,onChange:i},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages"])):a.value.Type===v(X).AGE?(o(),b(It,{key:8,modelValue:r.value,"onUpdate:modelValue":t[12]||(t[12]=l=>r.value=l),name:u.name,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,onChange:i},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):a.value.Type===v(X).EXTRAS?(o(),b(lt,{key:9,modelValue:r.value,"onUpdate:modelValue":t[13]||(t[13]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(E),onChange:i},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):a.value.Type===v(X).INTERESTS?(o(),b(at,{key:10,modelValue:r.value,"onUpdate:modelValue":t[14]||(t[14]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(E),onChange:i},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):a.value.Type===v(X).TICKET?(o(),b(it,{key:11,modelValue:r.value,"onUpdate:modelValue":t[15]||(t[15]=l=>r.value=l),admin:v(A),convention:u.convention,name:u.name,"registration-group":u.registrationGroup,hint:a.value.Hint,label:a.value.Label,items:a.value.Values,disabled:v(U)||!1,"persistent-hint":v(h),"error-messages":p.value,required:v(E),onChange:i},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}),Ct={key:0,class:"my-2 text-white text-center"},kt={key:1,class:"admin-header my-2 text-white text-center"},Et=["innerHTML"],St=["innerHTML"],Qt=ce({__name:"FormRenderer",props:Q({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:Q(["close"],["update:modelValue"]),setup(e,{emit:g}){const n=me(e,"modelValue");ke(n.value.Sections),n.value.Sections.forEach(i=>{i.Fields&&ke(i.Fields)});const A=_(),U=Bl(),h=el(),E=_(!1),p=_(!1),c=_(!1),C=_((()=>{if(e.data!==void 0){const u=Ue(e.data);return n.value.Sections.forEach(t=>{t.Fields&&t.Fields.forEach(l=>{const f=e.data.Data.find(T=>T.SectionFieldUUID===l.SectionFieldUUID&&T.SectionFieldUUID==l.SectionFieldUUID);if(f)l.Value=f.Data;else{const T={ID:0,SubmissionDataUUID:Le(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:t.ID,SectionUUID:t.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};u.Data.push(T)}})}),u}const i={ID:0,SubmissionUUID:Le(),FormID:n.value.ID,FormUUID:n.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return i.Data=n.value.Sections.map(u=>u.Fields?u.Fields.map(t=>({ID:0,SubmissionDataUUID:Le(),SubmissionID:i.ID,SubmissionUUID:i.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:""})):[]).flat(),i})()),a=(i,u,t)=>{const l=C.value.Data.find(f=>f.SectionUUID===i&&f.SectionFieldUUID===u);l&&(l.Data=t)},m=(i,u,t,l)=>i&&i.Type===ue.FORM_TYPE_REGISTRATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:t?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":i&&i.Type===ue.FORM_TYPE_ACCOMMODATION?t?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":i&&i.Type===ue.FORM_TYPE_DEALER?l?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(i&&i.Type===ue.FORM_TYPE_BADGE,"/"),I=({callback:i})=>{h.getRegistrationByConvention(e.convention.ConventionUUID).then(u=>{i&&i("Loading"),h.getAvailableConventionForms(e.convention.ConventionUUID).then(t=>{u.Submissions.forEach((V,D)=>{V.Form||(u.Submissions[D].Form=t.find(H=>H.FormUUID===V.FormUUID))});const l=u.Submissions.find(V=>V.FormUUID===C.value.FormUUID),f=u.Submissions.find(V=>{var D;return((D=V.Form)==null?void 0:D.Type)===ue.FORM_TYPE_ACCOMMODATION}),T=u.Submissions.find(V=>{var D;return((D=V.Form)==null?void 0:D.Type)===ue.FORM_TYPE_DEALER}),O=u.Submissions.find(V=>{var D;return((D=V.Form)==null?void 0:D.Type)===ue.FORM_TYPE_BADGE}),te=m(l==null?void 0:l.Form,f==null?void 0:f.Form,T==null?void 0:T.Form,O==null?void 0:O.Form);He.push(te)})})},k=({callback:i})=>{var u;(u=A.value)==null||u.validate().then(t=>{t.valid?h.saveSubmission(C.value).then(l=>{l?setTimeout(()=>{r(l,i,1)},1e3):i&&i("Failed to process request")}).catch(()=>{i&&i("Failed to process request")}):i&&i("Errors in form detected, please review and try again.")})},r=(i,u,t=1)=>{h.checkSubmission(i).then(l=>{if(l)if(l.Ready&&l.Submission){if(E.value=!1,C.value=l.Submission,u&&u("Saved"),e.admin)g("close");else if(l.Forms&&l.Forms.length>0){const f=l.Forms.find(D=>D.FormUUID===C.value.FormUUID),T=l.Forms.find(D=>D.Type===ue.FORM_TYPE_ACCOMMODATION),O=l.Forms.find(D=>D.Type===ue.FORM_TYPE_DEALER),te=l.Forms.find(D=>D.Type===ue.FORM_TYPE_BADGE),V=m(f,T,O,te);He.push(V)}}else{if(t>5&&(E.value=!0),t>10&&(p.value=!0),t>20&&(c.value=!0),t>60){u&&(E.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{r(i,u,t+1)},t<20?1e3*t:2e4)}else u&&(E.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."))}).catch(()=>{u&&(E.value=!1,p.value=!1,c.value=!1,u("A problem was encountered during saving, please check form and try again."))})};return(i,u)=>{const t=Ul("router-link");return o(),b(Rl,null,{default:d(()=>[s(Xl,{ref_key:"formValidator",ref:A,onSubmit:u[1]||(u[1]=Ze(()=>{},["prevent"]))},{default:d(()=>[n.value.Heading?(o(),R("h1",Ct,G(n.value.Heading),1)):P("",!0),i.admin?(o(),R("h2",kt," (Admin Mode) ")):P("",!0),n.value.Description?(o(),R("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg",innerHTML:n.value.Description},null,8,Et)):P("",!0),(o(!0),R($,null,j(n.value.Sections,l=>(o(),b(Gl,{key:`section_${n.value.ID}.${l.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:d(()=>[l.Heading?(o(),b(Kl,{key:0},{default:d(()=>[q(G(l.Heading),1)]),_:2},1024)):P("",!0),l.Description?(o(),b(Hl,{key:1,class:"text-wrap"},{default:d(()=>[K("div",{innerHTML:l.Description},null,8,St)]),_:2},1024)):P("",!0),l.Fields?(o(),b(Yl,{key:2},{default:d(()=>[(o(!0),R($,null,j(l.Fields,f=>(o(),R($,{key:`field_${n.value.ID}.${l.ID}.${f.ID}`},[f.Field?(o(),b(Z,{key:0},{default:d(()=>[s(N,null,{default:d(()=>[i.editable?(o(),b(ze,{key:0,field:f.Field,modelValue:f.Value,"onUpdate:modelValue":T=>f.Value=T,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:f.Required,"min-length":f.MinLength,"max-length":f.MaxLength,"persistent-hint":!0,onChange:T=>a(l.SectionUUID,f.SectionFieldUUID,f.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),b(ze,{key:1,field:f.Field,modelValue:f.Value,"onUpdate:modelValue":T=>f.Value=T,admin:i.admin,convention:i.convention,"registration-group":i.registrationGroup,required:f.Required,"min-length":f.MinLength,"max-length":f.MaxLength,"persistent-hint":!0,disabled:"",onChange:T=>a(l.SectionUUID,f.SectionFieldUUID,f.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),i.preview?P("",!0):(o(),R($,{key:3},[s(Z,null,{default:d(()=>[i.admin?(o(),b(N,{key:1,class:"text-right"},{default:d(()=>[s(ae,{color:"red",onClick:u[0]||(u[0]=l=>g("close"))},{default:d(()=>[q("Cancel")]),_:1})]),_:1})):(o(),b(N,{key:0,class:"text-right"},{default:d(()=>[s(t,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:d(()=>[s(ae,{color:"red"},{default:d(()=>[q("Cancel")]),_:1})]),_:1})]),_:1})),i.admin||i.editable?(o(),b(N,{key:2,class:"text-left"},{default:d(()=>[s(Ye,{onClick:k,type:"submit"})]),_:1})):(o(),b(N,{key:3,class:"text-left"},{default:d(()=>[s(Ye,{onClick:I,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),E.value?(o(),b(Z,{key:0},{default:d(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):P("",!0),p.value?(o(),b(Z,{key:1},{default:d(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):P("",!0),c.value?(o(),b(Z,{key:2},{default:d(()=>[s(N,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[q(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{zt as F,al as T,je as V,ze as _,Jt as a,Wt as b,X as c,Qt as d,jt as e,jl as f,Xt as m,ke as s,Wl as u};
