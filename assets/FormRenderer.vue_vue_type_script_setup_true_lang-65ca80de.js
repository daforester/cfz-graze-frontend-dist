import{p as Me,an as rl,n as Ne,ae as yl,r as x,s as Ce,u as Te,e as W,w as Y,E as Se,v as a,H as E,x as oe,N as F,aA as Vl,ah as bl,y as Il,k as Dl,f as kl,j as Cl,ax as dl,aa as Ze,ad as Tl,aB as Sl,ay as El,m as Al,I as Ue,a1 as te,a2 as ye,a5 as je,K as o,R,U as B,O as j,M as i,Z as K,L as S,S as g,Q as _,a3 as be,P as cl,ar as Be,$ as vl,Y as ml,ac as Qe,a as Rl,aC as re}from"./index-09b2497b.js";import{F as ge}from"./form-aee596e2.js";import{V as he,u as Ke}from"./VCheckbox-412d3798.js";import{s as Ee}from"./index-71069b21.js";import{f as xl,V as ue,a as z,c as fl,d as Oe,e as De}from"./VList-a247c3ff.js";import{a as de,V as X}from"./VRow-4c226f82.js";import{m as wl,u as $l,a as Ol,b as Pl,V as Je}from"./VSelect-0cbcf03f.js";import{d as Ml,u as Nl,e as Ge,T as Fl,s as We}from"./filter-037bbc66.js";import{C as Ll,a as Fe,l as Ae,G as _l,V as ie,n as ql}from"./VContainer-d14c869e.js";import{c as Bl}from"./copyToClipboard-54de8978.js";import{a as Gl,e as Hl,_ as Yl}from"./VChip-afa32502.js";import{k as Jl,l as jl,j as pl,V as Ie,m as gl,e as Kl,u as Xl,f as Pe,g as zl,h as Zl,i as Ql,n as Wl}from"./VTextField-49633ab1.js";import{m as et,I as lt}from"./index-dc0e415f.js";import{V as tt,m as at,a as hl,b as nt,c as ot}from"./VCheckboxBtn-f1303ab8.js";import{G as ut}from"./userData-aae7b7ff.js";import{v as He}from"./v4-a960c1f4.js";import{e as el,V as ll,a as tl,b as al,c as nl,d as ol}from"./VCard-9cee1feb.js";import{V as Ye}from"./VAvatar-e3e51dc5.js";import{V as it}from"./VForm-ea8e9c3d.js";const ul=(e,k,u)=>{if(u>=e.length){let O=u-e.length+1;for(;O--;)e.push(void 0)}e.splice(u,0,e.splice(k,1)[0])};var le=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(le||{});const ia=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function st(e,k,u){if(k==null)return e;if(Array.isArray(k))throw new Error("Multiple matches is not implemented");return typeof k=="number"&&~k?a(E,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,k)]),a("span",{class:"v-autocomplete__mask"},[e.substr(k,u)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(k+u)])]):e}const rt=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...Ml({filterKeys:["title"]}),...wl(),...rl(Jl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...et({transition:!1})},"VAutocomplete"),il=Ne()({name:"VAutocomplete",props:rt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,k){let{slots:u}=k;const{t:O}=yl(),V=x(),h=Ce(!1),b=Ce(!0),I=x(!1),p=x(),A=Te(e,"menu"),l=W({get:()=>A.value,set:U=>{var G;A.value&&!U&&((G=p.value)!=null&&G.ΨopenChildren)||(A.value=U)}}),c=Ce(-1),w=W(()=>{var U;return(U=V.value)==null?void 0:U.color}),{items:v,transformIn:f,transformOut:m}=xl(e),{textColorClasses:s,textColorStyles:t}=Ll(w),n=Te(e,"search",""),d=Te(e,"modelValue",[],U=>f(U===null?[null]:bl(U)),U=>{const G=m(U);return e.multiple?G:G[0]??null}),r=jl(),{filteredItems:$,getMatches:y}=Nl(e,v,()=>b.value?"":n.value),M=W(()=>d.value.map(U=>v.value.find(G=>e.valueComparator(G.value,U.value))||U)),L=W(()=>e.hideSelected?$.value.filter(U=>!M.value.some(G=>G.value===U.value)):$.value),H=W(()=>M.value.map(U=>U.props.value)),ee=W(()=>M.value[c.value]),P=W(()=>{var G;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&n.value===((G=L.value[0])==null?void 0:G.title))&&L.value.length>0&&!b.value&&!I.value}),T=W(()=>e.hideNoData&&!v.value.length||e.readonly||(r==null?void 0:r.isReadonly.value)),C=x(),{onListScroll:D,onListKeydown:N}=$l(C,V);function ce(U){e.openOnClear&&(l.value=!0),n.value=""}function ke(){T.value||(l.value=!0)}function se(U){T.value||(h.value&&(U.preventDefault(),U.stopPropagation()),l.value=!l.value)}function me(U){var Ve,q,Q;if(e.readonly||r!=null&&r.isReadonly.value)return;const G=V.value.selectionStart,Z=H.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(U.key))&&U.preventDefault(),["Enter","ArrowDown"].includes(U.key)&&(l.value=!0),["Escape"].includes(U.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(U.key)&&(P.value&&["Enter","Tab"].includes(U.key)&&ve($.value[0]),b.value=!0),U.key==="ArrowDown"&&P.value&&((Ve=C.value)==null||Ve.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(U.key)){if(c.value<0){U.key==="Backspace"&&!n.value&&(c.value=Z-1);return}const J=c.value;ee.value&&ve(ee.value),c.value=J>=Z-1?Z-2:J}if(U.key==="ArrowLeft"){if(c.value<0&&G>0)return;const J=c.value>-1?c.value-1:Z-1;M.value[J]?c.value=J:(c.value=-1,V.value.setSelectionRange((q=n.value)==null?void 0:q.length,(Q=n.value)==null?void 0:Q.length))}if(U.key==="ArrowRight"){if(c.value<0)return;const J=c.value+1;M.value[J]?c.value=J:(c.value=-1,V.value.setSelectionRange(0,0))}}}function Re(U){n.value=U.target.value}function Le(){var U;h.value&&(b.value=!0,(U=V.value)==null||U.focus())}function _e(U){h.value=!0,setTimeout(()=>{I.value=!0})}function qe(U){I.value=!1}function xe(U){(U==null||U===""&&!e.multiple)&&(d.value=[])}const fe=Ce(!1);function ve(U){if(e.multiple){const G=H.value.findIndex(Z=>e.valueComparator(Z,U.value));if(G===-1)d.value=[...d.value,U];else{const Z=[...d.value];Z.splice(G,1),d.value=Z}}else d.value=[U],fe.value=!0,n.value=U.title,l.value=!1,b.value=!0,Se(()=>fe.value=!1)}return Y(h,(U,G)=>{var Z;U!==G&&(U?(fe.value=!0,n.value=e.multiple?"":String(((Z=M.value.at(-1))==null?void 0:Z.props.title)??""),b.value=!0,Se(()=>fe.value=!1)):(!e.multiple&&!n.value?d.value=[]:P.value&&!I.value&&!M.value.some(Ve=>{let{value:q}=Ve;return q===L.value[0].value})&&ve(L.value[0]),l.value=!1,n.value="",c.value=-1))}),Y(n,U=>{!h.value||fe.value||(U&&(l.value=!0),b.value=!U)}),Fe(()=>{const U=!!(e.chips||u.chip),G=!!(!e.hideNoData||L.value.length||u["prepend-item"]||u["append-item"]||u["no-data"]),Z=d.value.length>0,[Ve]=Ie.filterProps(e);return a(Ie,oe({ref:V},Ve,{modelValue:n.value,"onUpdate:modelValue":xe,focused:h.value,"onUpdate:focused":q=>h.value=q,validationValue:d.externalValue,dirty:Z,onInput:Re,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!u.selection,"v-autocomplete--selecting-index":c.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Z?void 0:e.placeholder,"onClick:clear":ce,"onMousedown:control":ke,onKeydown:me}),{...u,default:()=>a(E,null,[a(Ol,oe({ref:p,modelValue:l.value,"onUpdate:modelValue":q=>l.value=q,activator:"parent",contentClass:"v-autocomplete__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Le},e.menuProps),{default:()=>[G&&a(ue,{ref:C,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:N,onFocusin:_e,onFocusout:qe,onScrollPassive:D,tabindex:"-1"},{default:()=>{var q,Q,J;return[(q=u["prepend-item"])==null?void 0:q.call(u),!L.value.length&&!e.hideNoData&&(((Q=u["no-data"])==null?void 0:Q.call(u))??a(z,{title:O(e.noDataText)},null)),a(Pl,{renderless:!0,items:L.value},{default:pe=>{var ze;let{item:ae,index:ne,itemRef:Ul}=pe;const Xe=oe(ae.props,{ref:Ul,key:ne,active:P.value&&ne===0?!0:void 0,onClick:()=>ve(ae)});return((ze=u.item)==null?void 0:ze.call(u,{item:ae,index:ne,props:Xe}))??a(z,Xe,{prepend:we=>{let{isSelected:$e}=we;return a(E,null,[e.multiple&&!e.hideSelected?a(tt,{key:ae.value,modelValue:$e,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependIcon&&a(Ae,{icon:ae.props.prependIcon},null)])},title:()=>{var we,$e;return b.value?ae.title:st(ae.title,(we=y(ae))==null?void 0:we.title,(($e=n.value)==null?void 0:$e.length)??0)}})}}),(J=u["append-item"])==null?void 0:J.call(u)]}})]}),M.value.map((q,Q)=>{var ae;function J(ne){ne.stopPropagation(),ne.preventDefault(),ve(q)}const pe={"onClick:close":J,onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return a("div",{key:q.value,class:["v-autocomplete__selection",Q===c.value&&["v-autocomplete__selection--selected",s.value]],style:Q===c.value?t.value:{}},[U?u.chip?a(_l,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:q.title}}},{default:()=>{var ne;return[(ne=u.chip)==null?void 0:ne.call(u,{item:q,index:Q,props:pe})]}}):a(Gl,oe({key:"chip",closable:e.closableChips,size:"small",text:q.title},pe),null):((ae=u.selection)==null?void 0:ae.call(u,{item:q,index:Q}))??a("span",{class:"v-autocomplete__selection-text"},[q.title,e.multiple&&Q<M.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[F(",")])])])})]),"append-inner":function(){var pe;for(var q=arguments.length,Q=new Array(q),J=0;J<q;J++)Q[J]=arguments[J];return a(E,null,[(pe=u["append-inner"])==null?void 0:pe.call(u,...Q),e.menuIcon?a(Ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:se,onClick:Vl},null):void 0])}})}),pl({isFocused:h,isPristine:b,menu:l,search:n,filteredItems:$,select:ve},V)}});const dt=Me({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...gl(),...Kl()},"VTextarea"),ct=Ne()({name:"VTextarea",directives:{Intersect:lt},inheritAttrs:!1,props:dt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:u,emit:O,slots:V}=k;const h=Te(e,"modelValue"),{isFocused:b,focus:I,blur:p}=Xl(e),A=W(()=>typeof e.counterValue=="function"?e.counterValue(h.value):(h.value||"").toString().length),l=W(()=>{if(u.maxlength)return u.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function c(P,T){var C,D;!e.autofocus||!P||(D=(C=T[0].target)==null?void 0:C.focus)==null||D.call(C)}const w=x(),v=x(),f=Ce(""),m=x(),s=W(()=>e.persistentPlaceholder||b.value||e.active);function t(){var P;m.value!==document.activeElement&&((P=m.value)==null||P.focus()),b.value||I()}function n(P){t(),O("click:control",P)}function d(P){O("mousedown:control",P)}function r(P){P.stopPropagation(),t(),Se(()=>{h.value="",El(e["onClick:clear"],P)})}function $(P){var C;const T=P.target;if(h.value=T.value,(C=e.modelModifiers)!=null&&C.trim){const D=[T.selectionStart,T.selectionEnd];Se(()=>{T.selectionStart=D[0],T.selectionEnd=D[1]})}}const y=x(),M=x(+e.rows),L=W(()=>["plain","underlined"].includes(e.variant));Il(()=>{e.autoGrow||(M.value=+e.rows)});function H(){e.autoGrow&&Se(()=>{if(!y.value||!v.value)return;const P=getComputedStyle(y.value),T=getComputedStyle(v.value.$el),C=parseFloat(P.getPropertyValue("--v-field-padding-top"))+parseFloat(P.getPropertyValue("--v-input-padding-top"))+parseFloat(P.getPropertyValue("--v-field-padding-bottom")),D=y.value.scrollHeight,N=parseFloat(P.lineHeight),ce=Math.max(parseFloat(e.rows)*N+C,parseFloat(T.getPropertyValue("--v-input-control-height"))),ke=parseFloat(e.maxRows)*N+C||1/0,se=Al(D??0,ce,ke);M.value=Math.floor((se-C)/N),f.value=Cl(se)})}Dl(H),Y(h,H),Y(()=>e.rows,H),Y(()=>e.maxRows,H),Y(()=>e.density,H);let ee;return Y(y,P=>{P?(ee=new ResizeObserver(H),ee.observe(y.value)):ee==null||ee.disconnect()}),kl(()=>{ee==null||ee.disconnect()}),Fe(()=>{const P=!!(V.counter||e.counter||e.counterValue),T=!!(P||V.details),[C,D]=dl(u),[{modelValue:N,...ce}]=Pe.filterProps(e),[ke]=zl(e);return a(Pe,oe({ref:w,modelValue:h.value,"onUpdate:modelValue":se=>h.value=se,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":L.value},e.class],style:e.style},C,ce,{centerAffix:M.value===1&&!L.value,focused:b.value}),{...V,default:se=>{let{isDisabled:me,isDirty:Re,isReadonly:Le,isValid:_e}=se;return a(Zl,oe({ref:v,style:{"--v-textarea-control-height":f.value},onClick:n,onMousedown:d,"onClick:clear":r,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ke,{active:s.value||Re.value,centerAffix:M.value===1&&!L.value,dirty:Re.value||e.dirty,disabled:me.value,focused:b.value,error:_e.value===!1}),{...V,default:qe=>{let{props:{class:xe,...fe}}=qe;return a(E,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),Ze(a("textarea",oe({ref:m,class:xe,value:h.value,onInput:$,autofocus:e.autofocus,readonly:Le.value,disabled:me.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:t,onBlur:p},fe,D),null),[[Tl("intersect"),{handler:c},null,{once:!0}]]),e.autoGrow&&Ze(a("textarea",{class:[xe,"v-textarea__sizer"],"onUpdate:modelValue":ve=>h.value=ve,ref:y,readonly:!0,"aria-hidden":"true"},null),[[Sl,h.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:T?se=>{var me;return a(E,null,[(me=V.details)==null?void 0:me.call(V,se),P&&a(E,null,[a("span",null,null),a(Ql,{active:e.persistentCounter||b.value,value:A.value,max:l.value},V.counter)])])}:void 0})}),pl({},w,v,m)}}),vt=Ue({__name:"Extras",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:k}){const u=e,{convention:O,disabled:V=!1}=u,h=ye(e,"modelValue"),b=je.getInstance(),I=x({});try{I.value=JSON.parse(h.value)}catch{}const p=x([]),A=x([]);Y(u,()=>{c()}),Y(I.value,v=>{for(const f in v)if(v[f].checked){const m=p.value.map(s=>{var t;return(t=s.Options)==null?void 0:t.find(n=>n.OptionUUID===f)});if(m&&m.length>0)try{const s=m[0];v[f].choiceId===""&&s&&s.Choices&&s.Choices.length>0&&(v[f].choiceId=s.Choices[0].TagUUID),v[f].price=s==null?void 0:s.Price}catch{}}else v[f].choiceId="",v[f].price=0;h.value=JSON.stringify(v),w()});const l=W({get:()=>p.value.map(v=>v.ExtraUUID),set:()=>{}}),c=()=>{var f;const v=((f=u.items.find(m=>m.Title==="SelectedExtras"))==null?void 0:f.Value)||"[]";try{const m=JSON.parse(v);p.value=A.value.filter(s=>m.find(t=>t===s.ExtraUUID))||[],l.value=[...p.value.map(s=>s.ExtraUUID)],p.value.forEach(s=>{var t;(t=s.Options)==null||t.forEach(n=>{I.value[n.OptionUUID]||(I.value[n.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in O&&(b==null||b.getConventionExtras(O.ConventionUUID).then(v=>{v&&(A.value=v,c())}));const w=(v=void 0)=>{setTimeout(()=>k("change",v),100)};return(v,f)=>(o(),R(E,null,[B("h4",null,j(v.label),1),a(ue,{opened:l.value,"onUpdate:opened":f[0]||(f[0]=m=>l.value=m)},{default:i(()=>[(o(!0),R(E,null,K(p.value,m=>(o(),S(fl,{key:m.ExtraUUID,value:m.ExtraUUID},{activator:i(({props:s})=>[a(z,oe({"prepend-icon":"mdi:mdi-group","append-icon":"",title:m.Name},s),null,16,["title"])]),default:i(()=>[m.Options?(o(!0),R(E,{key:0},K(m.Options,s=>(o(),S(z,{key:s.OptionUUID},{default:i(()=>[a(de,null,{default:i(()=>[a(X,{cols:"12",sm:"6"},{default:i(()=>[a(he,{label:`${s.Name} ${s.Price&&s.Price>0?`(${g(Ee).currencySymbol}${s.Price})`:""}`,modelValue:I.value[s.OptionUUID].checked,"onUpdate:modelValue":t=>I.value[s.OptionUUID].checked=t,disabled:g(V),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),s.Choices&&s.Choices.length>1&&I.value[s.OptionUUID].checked?(o(),S(X,{key:0,cols:"12",sm:"6"},{default:i(()=>[a(Je,{items:s.Choices.map(t=>({value:t.TagUUID,title:t.Title})),modelValue:I.value[s.OptionUUID].choiceId,"onUpdate:modelValue":t=>I.value[s.OptionUUID].choiceId=t,"item-value":"value","item-title":"title",variant:"outlined",disabled:g(V),"hide-details":"",onChange:w},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024))),128)):_("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),mt=Ue({__name:"Interests",props:te({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:k}){const u=e,{convention:O,disabled:V=!1}=u,h=ye(e,"modelValue"),b=je.getInstance(),I=x({});try{I.value=JSON.parse(h.value)}catch{}const p=x([]),A=x([]);Y(I.value,v=>{h.value=JSON.stringify(v)});const l=x([]),c=()=>{var f;const v=((f=u.items.find(m=>m.Title==="SelectedInterests"))==null?void 0:f.Value)||"[]";try{const m=JSON.parse(v);p.value=A.value.filter(s=>m.find(t=>t===s.InterestUUID))||[],l.value=[...p.value.map(s=>s.InterestUUID)]}catch{}};"ConventionUUID"in O&&(b==null||b.getConventionInterests(O.ConventionUUID).then(v=>{v&&(A.value=v,c())})),Y(u,()=>{c()});const w=(v=void 0)=>{setTimeout(()=>k("change",v),100)};return(v,f)=>(o(),R(E,null,[B("h4",null,j(v.label),1),a(ue,{opened:l.value,"onUpdate:opened":f[0]||(f[0]=m=>l.value=m)},{default:i(()=>[(o(!0),R(E,null,K(p.value,m=>(o(),S(z,{key:m.InterestUUID},{default:i(()=>[a(de,null,{default:i(()=>[a(X,null,{default:i(()=>[a(he,{label:`${m.Name} ${m.Price&&m.Price>0?`(${g(Ee).currencySymbol}${m.Price})`:""}`,modelValue:I.value[m.InterestUUID],"onUpdate:modelValue":s=>I.value[m.InterestUUID]=s,disabled:g(V),"hide-details":"",onChange:w},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),ft=Ue({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:k}){const u=e,{admin:O=!1,convention:V,disabled:h=!1}=u,b=ye(e,"modelValue"),I=je.getInstance(),p=x({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{p.value=JSON.parse(b.value),"ticket"in p.value&&(p.value.Ticket=p.value.ticket),"addonsChecked"in p.value&&(p.value.AddonsChecked=p.value.addonsChecked),"componentsChecked"in p.value&&(p.value.ComponentsChecked=p.value.componentsChecked)}catch{}const A=x([]),l=x([]);Y(p.value,t=>{b.value=JSON.stringify(t)});const c=x([]),w=x({required:(t,n=void 0)=>()=>{if(n==null){if(p.value.Ticket.length===0&&u.required)return"Must select at least one ticket option.";if(t&&t.ComponentsRequired>0&&p.value.Ticket.includes(t.TicketUUID||"")){let d=0;if(t.TicketComponents.forEach(r=>{p.value.ComponentsChecked.forEach($=>{r.TicketUUID===$&&(d+=1)})}),d<t.ComponentsRequired)return`Must select ticket ${t.ComponentsRequired} component${t.ComponentsRequired===1?"":"s"}`}}return!0}}),v=()=>{var n;const t=((n=u.items.find(d=>d.Title==="SelectedTickets"))==null?void 0:n.Value)||"[]";try{const d=JSON.parse(t);A.value=l.value.filter(r=>r.Type==="TICKET_TYPE_GROUP"&&d.find($=>$===r.TicketUUID))||[],c.value=[...A.value.filter(r=>r.Type==="TICKET_TYPE_GROUP").map(r=>r.TicketUUID)]}catch{}};if("ConventionUUID"in V)if(O)I==null||I.getConventionTickets(V.ConventionUUID).then(t=>{t&&(l.value=t,v())});else{const t=u.items.find(n=>n.Title==="SelectedTickets");t&&(I==null||I.getFieldTickets(t.FieldUUID).then(n=>{n&&(l.value=n,v())}))}Y(u,()=>{v()});const f=t=>{p.value.Ticket.length>1&&p.value.Ticket.shift(),p.value.ComponentsChecked=[],s(t)},m=t=>{const n=l.value.find(d=>d.TicketUUID===p.value.Ticket[0]);if(n)for(;p.value.ComponentsChecked.length>n.ComponentsRequired;)p.value.ComponentsChecked.shift();s(t)},s=(t=void 0)=>{setTimeout(()=>k("change",t),100)};return(t,n)=>(o(),R(E,null,[B("h4",null,j(t.label),1),a(ue,{opened:c.value,"onUpdate:opened":n[4]||(n[4]=d=>c.value=d)},{default:i(()=>[(o(!0),R(E,null,K(g(Ge)(A.value.filter(d=>d.Type===g(Fl).TICKET_TYPE_GROUP)),d=>(o(),R(E,{key:d.TicketUUID},[d.Tickets.length>0?(o(),S(fl,{key:0,value:d.TicketUUID},{activator:i(({props:r})=>[a(z,oe(r,{"prepend-icon":"mdi:mdi-group",title:d.Name}),{default:i(()=>[a(Oe,{title:d.Description},null,8,["title"])]),_:2},1040,["title"])]),default:i(()=>[(o(!0),R(E,null,K(d.Tickets,r=>(o(),S(z,{key:r.TicketUUID},{default:i(()=>{var $;return[a(Oe,null,{default:i(()=>[F(j(r.Description),1)]),_:2},1024),a(he,{modelValue:p.value.Ticket,"onUpdate:modelValue":n[0]||(n[0]=y=>p.value.Ticket=y),value:r.TicketUUID,onChange:f,rules:[w.value.required(r)],"validate-on":"submit",disabled:g(h)||!(($=t.registrationGroup)!=null&&$.Registration.Leader)},{label:i(()=>[a(Ae,{icon:r.RequiresAccommodation?"mdi:mdi-home":r.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),F(" "+j(`${r.Name} ${r.Price>0?`(${g(Ee).currencySymbol}${r.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),p.value.Ticket.length>0&&r.TicketUUID===p.value.Ticket[0]?(o(),R(E,{key:0},[r.AddonTickets.length?(o(),S(ue,{key:0},{default:i(()=>[(o(!0),R(E,null,K(g(Ge)(r.AddonTickets),y=>(o(),R(E,{key:y==null?void 0:y.TicketUUID},[y?(o(),S(z,{key:0},{default:i(()=>[a(De,null,{default:i(()=>{var M;return[a(he,{modelValue:p.value.AddonsChecked,"onUpdate:modelValue":n[1]||(n[1]=L=>p.value.AddonsChecked=L),value:y.TicketUUID,onChange:n[2]||(n[2]=L=>{p.value.ComponentsChecked=[],s(L)}),disabled:g(h)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:i(()=>[a(Ae,{icon:"mdi:mdi-home-plus",class:"mx-2"}),F(" "+j(`${y.Name} ${y.Price>0?`(${g(Ee).currencySymbol}${y.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),a(Oe,null,{default:i(()=>[F(j(y.Description),1)]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128))]),_:2},1024)):_("",!0),r.TicketComponents.length?(o(),S(ue,{key:1},{default:i(()=>[(o(!0),R(E,null,K(g(Ge)(r.TicketComponents),y=>(o(),R(E,{key:y==null?void 0:y.TicketUUID},[y?(o(),S(z,{key:0},{default:i(()=>[a(De,null,{default:i(()=>{var M;return[a(he,{modelValue:p.value.ComponentsChecked,"onUpdate:modelValue":n[3]||(n[3]=L=>p.value.ComponentsChecked=L),value:y.TicketUUID,onChange:m,rules:[w.value.required(r,y)],"validate-on":"submit",disabled:g(h)||!((M=t.registrationGroup)!=null&&M.Registration.Leader)},{label:i(()=>[a(Ae,{icon:"mdi:mdi-home-plus",class:"mx-2"}),F(" "+j(`${y.Name} ${y.Price>0?`(${g(Ee).currencySymbol}${y.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),a(Oe,null,{default:i(()=>[F(j(y.Description),1)]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128))]),_:2},1024)):_("",!0)],64)):_("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):_("",!0)],64))),128))]),_:1},8,["opened"])],64))}}),pt={key:0},gt=B("strong",null,"Your Sharing Group",-1),ht=["href","onClick"],Ut=B("br",null,null,-1),yt=B("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Vt=B("strong",null,"Your Groups Accommodation",-1),bt=B("br",null,null,-1),It=B("small",null,"(in order of preference, controlled by group leader)",-1),Dt=B("strong",null,"Accommodation Options",-1),kt=B("br",null,null,-1),Ct=B("strong",null,"Your Chosen Accommodation",-1),Tt=B("small",null,"(in order of preference)",-1),St=Ue({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:k}){const u=e,{admin:O=!1,convention:V}=u,h=ye(e,"modelValue"),b=Ke(u,k,void 0,void 0,"items"),I=vl(),p=ml.getInstance(),A=x(be(h.value)),l=x([]),c=x(),w=x({sharing:!1}),v=()=>{try{const T=JSON.parse(u.data);T&&(w.value=T)}catch{}};v(),Y(u,()=>{v(),u.registrationGroup&&(l.value=u.registrationGroup.Members,c.value=u.registrationGroup.Registration)}),Y(A,T=>{h.value=be(T)},{deep:!0});const f=x(""),m=x(!1),s=()=>{var T;(T=c.value)!=null&&T.Leader&&I.getRegistrationInvite(V.ConventionUUID).then(C=>{if(C){const D=new URL(location.href);D.searchParams.set("token",C),f.value=D.toString()}})},t=()=>{Bl(f.value),s(),m.value=!0,setTimeout(()=>m.value=!1,2200)},n=()=>{p.emit("registration.group.leave")},d=x([]);Y(b,()=>{r()});const r=()=>{O?I.getConventionAccommodation(V.ConventionUUID).then(T=>{d.value=T.filter(C=>!!(b!=null&&b.value.find(D=>D.Value===C.AccommodationUUID)))||[]}):b.value.length>0&&I.getFieldAccommodation(b.value[0].FieldUUID).then(T=>{d.value=T.filter(C=>!!(b!=null&&b.value.find(D=>D.Value===C.AccommodationUUID)))||[]})};r(),(()=>{var T;if(u.registrationGroup)if(l.value=u.registrationGroup.Members,c.value=u.registrationGroup.Registration,(T=c.value)!=null&&T.Leader)s();else try{A.value=JSON.parse(u.registrationGroup.AccommodationData)}catch{}})();const y=x({column:0,id:""}),M=()=>{A.value.includes(y.value.id)||(y.value.column===0&&y.value.id!==""&&A.value.push(y.value.id),P())},L=()=>{const T=A.value.findIndex(C=>C===y.value.id);T>=0&&(A.value.splice(T,1),P())},H=()=>{if(y.value.column!==1)return;const T=A.value.findIndex(C=>C===y.value.id);T<=0||(ul(A.value,T,T-1),P())},ee=()=>{if(y.value.column!==1)return;const T=A.value.findIndex(C=>C===y.value.id);T>=A.value.length-1||(ul(A.value,T,T+1),P())},P=(T=void 0)=>{setTimeout(()=>k("change",T),100)};return(T,C)=>(o(),R(E,null,[B("h4",null,j(T.label),1),a(de,null,{default:i(()=>[a(X,{cols:"12"},{default:i(()=>{var D;return[l.value&&c.value&&w.value.sharing?(o(),R("div",pt,[gt,((D=l.value.find(N=>N.IsLeader))==null?void 0:D.UUID)!==c.value.RegistrationUUID?(o(),S(ie,{key:0,color:"red",variant:"text",onClick:n},{default:i(()=>[F("(leave group)")]),_:1})):_("",!0),a(ue,null,{default:i(()=>[a(z,null,{default:i(()=>{var N;return[a(De,{class:"float-left pr-2 font-weight-bold"},{default:i(()=>[F(" Leader: ")]),_:1}),F(" "+j((N=l.value.find(ce=>ce.IsLeader))==null?void 0:N.Name),1)]}),_:1}),(o(!0),R(E,null,K(l.value,N=>(o(),R(E,{key:N.UUID},[N.IsLeader?_("",!0):(o(),S(z,{key:0},{default:i(()=>[a(De,{class:"float-left pr-2"},{default:i(()=>[F(" Member: ")]),_:1}),F(" "+j(N.Name),1)]),_:2},1024))],64))),128))]),_:1}),a(Hl,{modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=N=>m.value=N),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),f.value&&c.value.Leader?(o(),R(E,{key:1},[a(ie,{color:"blue"},{default:i(()=>[B("a",{href:f.value,onClick:cl(t,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,ht)]),_:1}),Ut,yt],64)):_("",!0)])):_("",!0)]}),_:1})]),_:1}),c.value&&!c.value.Leader?(o(),S(de,{key:0},{default:i(()=>[a(X,{cols:"10",md:"5"},{default:i(()=>[Vt,bt,It,a(ue,null,{default:i(()=>[(o(!0),R(E,null,K(A.value.map(D=>d.value.find(N=>N.AccommodationUUID==D)).filter(D=>D!==void 0),(D,N)=>(o(),R(E,null,[D?(o(),S(z,{key:D.AccommodationUUID,title:`${N+1}. ${D.Name}`,class:Be(y.value.column===1&&y.value.id===D.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):_("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),S(de,{key:1},{default:i(()=>[a(X,{cols:"12",md:"5"},{default:i(()=>[Dt,kt,a(ue,null,{default:i(()=>[(o(!0),R(E,null,K(d.value,D=>(o(),S(z,{key:D.AccommodationUUID,title:D.Name,class:Be(y.value.column===0&&y.value.id===D.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:N=>y.value={column:0,id:D.AccommodationUUID},"append-icon":"mdi:mdi-gesture-tap",onDblclick:C[1]||(C[1]=N=>M())},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),a(X,{cols:"12",md:"1"},{default:i(()=>[a(de,{class:"d-md-none"},{default:i(()=>[a(X,{cols:"12",class:"text-center"},{default:i(()=>[a(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:C[2]||(C[2]=D=>M()),color:"primary",title:"Select"}),F("   "),a(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:C[3]||(C[3]=D=>L()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),a(de,{class:"d-none d-md-flex h-100 align-content-center"},{default:i(()=>[a(X,{cols:"12"},{default:i(()=>[a(ie,{icon:"mdi:mdi-arrow-right",size:"small",onClick:C[4]||(C[4]=D=>M()),color:"primary",title:"Select"})]),_:1}),a(X,{cols:"12"},{default:i(()=>[a(ie,{icon:"mdi:mdi-arrow-left",size:"small",onClick:C[5]||(C[5]=D=>L()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1}),a(X,{cols:"10",md:"5"},{default:i(()=>[Ct,a(ue,null,{default:i(()=>[(o(!0),R(E,null,K(A.value.map(D=>d.value.find(N=>N.AccommodationUUID==D)).filter(D=>D!==void 0),(D,N)=>(o(),R(E,null,[D?(o(),S(z,{key:D.AccommodationUUID,title:`${N+1}. ${D.Name}`,class:Be(y.value.column===1&&y.value.id===D.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ce=>y.value={column:1,id:(D==null?void 0:D.AccommodationUUID)||""},"append-icon":"mdi:mdi-gesture-tap",onDblclick:C[6]||(C[6]=ce=>L())},null,8,["title","class","onClick"])):_("",!0)],64))),256))]),_:1}),Tt]),_:1}),a(X,{cols:"2",md:"1"},{default:i(()=>[a(de,{class:"d-flex h-100 align-content-center mt-3"},{default:i(()=>[a(X,{cols:"12"},{default:i(()=>[a(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:C[7]||(C[7]=D=>H()),color:"primary",title:"Higher Priority"})]),_:1}),a(X,{cols:"12"},{default:i(()=>[a(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:C[8]||(C[8]=D=>ee()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1})]),_:1}))],64))}}),Et=Ue({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:k}){const u=e,O=Ke(u,k,void 0,void 0,"items"),V=ye(e,"modelValue"),h=x({required:l=>!u.required||!!l||"Required.",min:l=>{var n,d;const c=new Date,w=c.getFullYear(),v=(c.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),f=c.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),m=((n=O.value.find(r=>r.Title=="MIN_AGE"))==null?void 0:n.Value)||"18",s=((d=O.value.find(r=>r.Title=="BEFORE_DATE"))==null?void 0:d.Value)||`${w}-${v}-${f}`,t=p(s);return I(l,s,parseInt(m))||`You must be at least ${m} years old by ${t.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),b=()=>(k("blur"),!(h.value.min(V.value||"")!==!0||h.value.required(V.value||"")!==!0)),I=(l,c,w)=>{if(l>=c)return!1;const v=p(l),m=p(c).getTime()-v.getTime(),s=1e3*60*60*24*365.25;return m/s>=w},p=l=>{const[c,w,v]=l.split("-");return new Date(parseInt(c),parseInt(w)-1,parseInt(v))},A=(l=void 0)=>{setTimeout(()=>k("change",l),100)};return(l,c)=>(o(),S(Ie,{modelValue:V.value,"onUpdate:modelValue":c[0]||(c[0]=w=>V.value=w),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[h.value.required,h.value.min],onBlur:b,onChange:A},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),At=Me({...at({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Rt=Ne()({name:"VRadio",props:At(),setup(e,k){let{slots:u}=k;return Fe(()=>a(hl,oe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),u)),{}}});const xt=Me({height:{type:[Number,String],default:"auto"},...gl(),...rl(nt(),["multiple"]),trueIcon:{type:Qe,default:"$radioOn"},falseIcon:{type:Qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),wt=Ne()({name:"VRadioGroup",inheritAttrs:!1,props:xt(),emits:{"update:modelValue":e=>!0},setup(e,k){let{attrs:u,slots:O}=k;const V=Rl(),h=W(()=>e.id||`radio-group-${V}`),b=Te(e,"modelValue");return Fe(()=>{const[I,p]=dl(u),[A,l]=Pe.filterProps(e),[c,w]=hl.filterProps(e),v=O.label?O.label({label:e.label,props:{for:h.value}}):e.label;return a(Pe,oe({class:["v-radio-group",e.class],style:e.style},I,A,{modelValue:b.value,"onUpdate:modelValue":f=>b.value=f,id:h.value}),{...O,default:f=>{let{id:m,messagesId:s,isDisabled:t,isReadonly:n}=f;return a(E,null,[v&&a(Wl,{id:m.value},{default:()=>[v]}),a(ot,oe(c,{id:m.value,"aria-describedby":s.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:t.value,readonly:n.value,"aria-labelledby":v?m.value:void 0,multiple:!1},p,{modelValue:b.value,"onUpdate:modelValue":d=>b.value=d}),O)])}})}),{}}}),sl=Ue({__name:"FormField",props:te({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:k}){const u=e,{admin:O=!1,disabled:V=!1,persistentHint:h=!1,required:b=!1}=u,I=x(""),p=ye(e,"modelValue"),A=Ke(u,k,void 0,void 0,"field"),l=x(be(A.value)),c=x({maxlength:s=>!u.maxLength||s.length<=u.maxLength||`Maximum length is ${u.maxLength} characters. (Current length: ${s.length})`,minlength:s=>!u.minLength||s.length>=u.minLength||`Minimum length is ${u.minLength} characters. (Current length: ${s.length})`,required:s=>!u.required||!!s||"Required field."}),w=x(!1),v=x([]),f=x("");try{const s=JSON.parse(p.value);Array.isArray(s)?v.value=s:typeof s=="boolean"?w.value=s:f.value=p.value}catch{w.value=!1,v.value=[],f.value=p.value}Y(w,()=>{p.value=JSON.stringify(w.value),k("input")}),Y(v,()=>{p.value=JSON.stringify(v.value),k("input")},{deep:!0}),Y(f,()=>{p.value=f.value,k("input")}),Y(A.value,()=>{l.value.Type!==A.value.Type?(l.value=be(A.value),w.value=!1,v.value=[],f.value=""):l.value=be(A.value)});const m=(s=void 0)=>{k("change",s)};return(s,t)=>l.value.Type===g(le).TEXT?(o(),S(Ie,{key:0,modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=n=>f.value=n),hint:l.value.Hint,label:`${l.value.Label}${g(b)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===g(le).DATE?(o(),S(Ie,{key:1,modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=n=>f.value=n),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===g(le).NUMBER?(o(),S(Ie,{key:2,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=n=>f.value=n),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===g(le).TEXTAREA?(o(),S(ct,{key:3,modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=n=>f.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.maxlength,c.value.minlength,c.value.required],onChange:m},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===g(le).CHECKBOX?(o(),R(E,{key:4},[l.value.Multiple?(o(!0),R(E,{key:0},K(l.value.Values,n=>(o(),S(he,{key:n.ID,modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=d=>v.value=d),hint:l.value.Hint,label:n.Title,value:n.Value,name:l.value.Name,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,rules:[c.value.required],onChange:m},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),S(he,{key:1,modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=n=>w.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,required:g(b),rules:[n=>!g(b)||!!n||"You must tick to continue!"],onChange:m},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===g(le).SELECT?(o(),R(E,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),S(Je,{key:0,modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=n=>v.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),S(il,{key:1,modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=n=>v.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),S(il,{key:3,modelValue:f.value,"onUpdate:modelValue":t[9]||(t[9]=n=>f.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):_("",!0):(o(),S(Je,{key:2,modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=n=>f.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:g(V)||!1,"persistent-hint":g(h)||!1,"error-messages":I.value,rules:[c.value.required],onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===g(le).RADIO?(o(),S(wt,{key:6,modelValue:f.value,"onUpdate:modelValue":t[10]||(t[10]=n=>f.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,rules:[c.value.required],onChange:m},{default:i(()=>[(o(!0),R(E,null,K(l.value.Values,n=>(o(),S(Rt,{key:n.Value,label:n.Title,value:n.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===g(le).ACCOMMODATION?(o(),S(St,{key:7,modelValue:v.value,"onUpdate:modelValue":t[11]||(t[11]=n=>v.value=n),admin:g(O),convention:s.convention,"registration-group":s.registrationGroup,data:s.field.Data,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,onChange:m},null,8,["modelValue","admin","convention","registration-group","data","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===g(le).AGE?(o(),S(Et,{key:8,modelValue:f.value,"onUpdate:modelValue":t[12]||(t[12]=n=>f.value=n),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,onChange:m},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===g(le).EXTRAS?(o(),S(vt,{key:9,modelValue:f.value,"onUpdate:modelValue":t[13]||(t[13]=n=>f.value=n),convention:s.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,required:g(b),onChange:m},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===g(le).INTERESTS?(o(),S(mt,{key:10,modelValue:f.value,"onUpdate:modelValue":t[14]||(t[14]=n=>f.value=n),convention:s.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,required:g(b),onChange:m},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===g(le).TICKET?(o(),S(ft,{key:11,modelValue:f.value,"onUpdate:modelValue":t[15]||(t[15]=n=>f.value=n),admin:g(O),convention:s.convention,"registration-group":s.registrationGroup,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:g(V)||!1,"persistent-hint":g(h),"error-messages":I.value,required:g(b),onChange:m},null,8,["modelValue","admin","convention","registration-group","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):_("",!0)}}),$t=B("strong",null,"These ticket options will be removed",-1),Ot=B("br",null,null,-1),Pt=B("strong",null,"These ticket options will be added",-1),Mt=B("p",null,[F(" If you do not wish to attend for the same days please "),B("span",{class:"text-red-darken-1 font-weight-bold"},"reject"),F(" this join request. ")],-1),Nt=B("p",null,[F(" If you wish to adjust your choices to match the group leader's please "),B("span",{class:"text-green font-weight-bold"},"accept"),F(" this join request. ")],-1),Ft={key:0,class:"my-2"},Lt={key:1,class:"my-2"},_t={key:0,class:"my-2"},qt={key:1,class:"my-2"},sa=Ue({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const k=ye(e,"modelValue");We(k.value.Sections),k.value.Sections.forEach(t=>{t.Fields&&We(t.Fields)});const u=x(),O=ut(),V=vl(),h=ml.getInstance(),b=x(!0),I=x(""),p=x(),A=(t,n=!1)=>{V.validateRegistrationInviteToken(c,n).then(d=>{d&&(p.value=d)}).catch(()=>{I.value="Invalid Token"})},c=new URL(location.href).searchParams.get("token")||"";c!==""?A():b.value=!1;const w=()=>{A(c,!0)},v=x((()=>{if(e.data!==void 0){const n=be(e.data);return k.value.Sections.forEach(d=>{d.Fields&&d.Fields.forEach(r=>{const $=e.data.Data.find(y=>y.SectionFieldUUID===r.SectionFieldUUID&&y.SectionFieldUUID==r.SectionFieldUUID);if($)r.Value=$.Data;else{const y={ID:0,SubmissionDataUUID:He(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:d.ID,SectionUUID:d.SectionUUID,SectionFieldID:r.ID,SectionFieldUUID:r.SectionFieldUUID,Data:r.Value};n.Data.push(y)}})}),n}const t={ID:0,SubmissionUUID:He(),FormID:k.value.ID,FormUUID:k.value.FormUUID,UserID:(O==null?void 0:O.ID)||0,UserUUID:(O==null?void 0:O.UserUUID)||"",Data:[]};return t.Data=k.value.Sections.map(n=>n.Fields?n.Fields.map(d=>({ID:0,SubmissionDataUUID:He(),SubmissionID:t.ID,SubmissionUUID:t.SubmissionUUID,SectionID:n.ID,SectionUUID:n.SectionUUID,SectionFieldID:d.ID,SectionFieldUUID:d.SectionFieldUUID,Data:d.Value})):[]).flat(),t})()),f=(t,n,d)=>{const r=v.value.Data.find($=>$.SectionUUID===t&&$.SectionFieldUUID===n);r&&(r.Data=d)},m=({callback:t})=>{var n;(n=u.value)==null||n.validate().then(d=>{d.valid?V.saveSubmission(v.value).then(r=>{if(r){if(v.value=r.Submission,t&&t("Saved"),r.Forms&&r.Forms.length>0){const $=r.Forms.find(H=>H.FormUUID===v.value.FormUUID),y=r.Forms.find(H=>H.Type===ge.FORM_TYPE_ACCOMMODATION),M=r.Forms.find(H=>H.Type===ge.FORM_TYPE_DEALER),L=r.Forms.find(H=>H.Type===ge.FORM_TYPE_BADGE);$&&$.Type===ge.FORM_TYPE_REGISTRATION?y?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`):M?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):L?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`):re.push("/"):$&&$.Type===ge.FORM_TYPE_ACCOMMODATION?M?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`):L?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):$&&$.Type===ge.FORM_TYPE_DEALER?L?re.push(`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`):re.push("/"):$&&$.Type===ge.FORM_TYPE_BADGE&&re.push("/")}}else t&&t("Failed to process request")}).catch(()=>{t&&t("Failed to process request")}):t&&t("Errors in form detected, please review and try again.")})},s=()=>{b.value=!1,h.emit("registration.group.join")};return(t,n)=>(o(),S(ql,null,{default:i(()=>[b.value&&p.value?(o(),R(E,{key:0},[p.value.Match?(o(),S(el,{key:0},{default:i(()=>[a(al,null,{default:i(()=>[a(ll,null,{default:i(()=>[F(" Joined Group ")]),_:1}),a(tl,{class:"text-wrap"},{default:i(()=>[F(" You have successfully linked your registration. The leader of your group will be responsible for deciding on your accommodation and days you're attending. If you are not happy with this you can leave the group and ask them to join you. Alternatively, if you're unable to agree on options you will need to find a different partner. ")]),_:1})]),_:1}),a(nl,null,{default:i(()=>[F(" Your accommodation and ticket options that require accommodation will now be controlled by your group leader. ")]),_:1}),a(ol,null,{default:i(()=>[a(Ye),a(ie,{color:"error",variant:"elevated",onClick:s},{default:i(()=>[F("Okay")]),_:1}),a(Ye)]),_:1})]),_:1})):(o(),S(el,{key:1},{default:i(()=>[a(al,null,{default:i(()=>[a(ll,null,{default:i(()=>[F(" Join Group - Warning ")]),_:1}),a(tl,{class:"text-wrap"},{default:i(()=>[F(" The leader of the sharing group you're joining has selected different ticket options for the accommodation. ")]),_:1})]),_:1}),a(nl,null,{default:i(()=>[p.value.MemberTickets.length?(o(),R(E,{key:0},[$t,Ot,a(ue,null,{default:i(()=>[(o(!0),R(E,null,K(p.value.MemberTickets,d=>(o(),S(z,{key:d.TicketUUID},{default:i(()=>[a(De,null,{default:i(()=>[F(j(d.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):_("",!0),p.value.LeaderTickets.length?(o(),R(E,{key:1},[Pt,a(ue,null,{default:i(()=>[(o(!0),R(E,null,K(p.value.LeaderTickets,d=>(o(),S(z,{key:d.TicketUUID,"prepend-icon":"mdi:mdi-home"},{default:i(()=>[a(De,null,{default:i(()=>[F(j(d.Name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)):_("",!0),Mt,Nt]),_:1}),a(ol,null,{default:i(()=>[a(ie,{color:"error",variant:"elevated",onClick:n[0]||(n[0]=d=>b.value=!1)},{default:i(()=>[F("Reject")]),_:1}),a(Ye),a(ie,{color:"success",variant:"elevated",onClick:w},{default:i(()=>[F("Accept")]),_:1})]),_:1})]),_:1}))],64)):(o(),S(it,{key:1,ref_key:"formValidator",ref:u,onSubmit:n[1]||(n[1]=cl(()=>{},["prevent"]))},{default:i(()=>[k.value.Heading?(o(),R("h2",Ft,j(k.value.Heading),1)):_("",!0),k.value.Description?(o(),R("p",Lt,j(k.value.Description),1)):_("",!0),(o(!0),R(E,null,K(k.value.Sections,d=>(o(),R(E,{key:`section_${k.value.ID}.${d.ID}`},[d.Heading?(o(),R("h3",_t,j(d.Heading),1)):_("",!0),d.Description?(o(),R("p",qt,j(d.Description),1)):_("",!0),d.Fields?(o(!0),R(E,{key:2},K(d.Fields,r=>(o(),R(E,{key:`field_${k.value.ID}.${d.ID}.${r.ID}`},[r.Field?(o(),S(de,{key:0},{default:i(()=>[a(X,null,{default:i(()=>[t.editable?(o(),S(sl,{key:0,field:r.Field,modelValue:r.Value,"onUpdate:modelValue":$=>r.Value=$,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:r.Required,"min-length":r.MinLength,"max-length":r.MaxLength,"persistent-hint":!0,onChange:$=>f(d.SectionUUID,r.SectionFieldUUID,r.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),S(sl,{key:1,field:r.Field,modelValue:r.Value,"onUpdate:modelValue":$=>r.Value=$,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:r.Required,"min-length":r.MinLength,"max-length":r.MaxLength,"persistent-hint":!0,disabled:"",onChange:$=>f(d.SectionUUID,r.SectionFieldUUID,r.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):_("",!0)],64))),128)):_("",!0)],64))),128)),t.editable&&!t.preview?(o(),S(de,{key:2},{default:i(()=>[a(X,{class:"text-center"},{default:i(()=>[a(Yl,{onClick:m,type:"submit"})]),_:1})]),_:1})):_("",!0)]),_:1},512))]),_:1}))}});export{ia as F,il as V,sl as _,ct as a,le as b,sa as c};
