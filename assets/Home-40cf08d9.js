import{I as R,r as F,e as E,w as $,J as b,K as t,L as n,M as o,v as d,Q as l,N as m,O as C,U as L,R as u,Z as N,H as U,S as g,$ as x,_ as P}from"./index-af0b53bc.js";import{G as z}from"./userData-4b884eaf.js";import{_ as B}from"./LoginView.vue_vue_type_script_setup_true_lang-05870b4d.js";import{s as M}from"./index-71069b21.js";import{F as y}from"./form-e2a93b7c.js";import{S as G}from"./submission-56c4c4f1.js";import{u as Y}from"./useStoreAPI-19275ea1.js";import{c as O}from"./canEditForm-52ba80b9.js";import{s as H}from"./sortSubmissions-ed9e4490.js";import{V as j}from"./VAvatar-d67d190b.js";import{V as J,a as K,b as Q,c as Z,d as q,e as W}from"./VCard-4889c1d0.js";import{V as p}from"./VBtn-9b9deec3.js";import{V as X}from"./VSpacer-66e9af99.js";import{V as ee,a as te}from"./VRow-3a59ab2d.js";import{j as oe}from"./VContainer-801c3d83.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-57594be4.js";const ne=["innerHTML"],ae={key:0,class:"font-weight-bold float-left pt-1 w-50"},re={key:1,class:"pa-1"},se={key:0,class:"font-weight-bold float-left pt-1 w-50"},ie={key:1},le=R({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(s){const c=Y(),f=x(),v=F(c.GetConventionLogoURL(s.convention.ConventionUUID)),a=F(),i=E(()=>{var e;return O(s.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_REGISTRATION)}),k=E(()=>{var e;return O(s.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_DEALER)}),I=E(()=>{var e;return O(s.forms,((e=a.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_ACCOMMODATION)});return $(()=>s.forms,()=>{f.getRegistrationByConvention(s.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((V,S)=>{V.Form||(e.Submissions[S].Form=s.forms.find(D=>D.FormUUID===V.FormUUID))}),H(e.Submissions)):e.Submissions=[],a.value=e)})}),(e,V)=>{const S=b("router-link"),D=b("RouterLink");return t(),n(W,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[d(Q,{class:"flex-1-1 align-content-start"},{default:o(()=>[v.value?(t(),n(j,{key:0,src:v.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):l("",!0),e.convention.Name?(t(),n(J,{key:1,class:"text-center"},{default:o(()=>[m(C(e.convention.Name),1)]),_:1})):l("",!0),e.convention.Description?(t(),n(K,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[L("div",{innerHTML:e.convention.Description},null,8,ne)]),_:1})):l("",!0)]),_:1}),d(Z,null,{default:o(()=>{var T;return[L("dl",null,[a.value&&a.value.Reference?(t(),u("dt",ae," Badge No: ")):l("",!0),a.value&&a.value.Reference?(t(),u("dd",re," #"+C(a.value.Reference),1)):l("",!0),(t(!0),u(U,null,N((T=a.value)==null?void 0:T.Submissions,r=>{var h,w,A;return t(),u(U,{key:r.SubmissionUUID},[r.Form?(t(),u(U,{key:0},[r.Form?(t(),u("dt",se,C(r.Form.Heading),1)):l("",!0),r.Form?(t(),u("dd",ie,[m(C(g(G)(r.Status))+" ",1),((h=r.Form)==null?void 0:h.Type)===g(y).FORM_TYPE_REGISTRATION?(t(),n(S,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/registration`},{default:o(()=>{var _;return[(_=r.Form)!=null&&_.State.Edit&&i.value?(t(),n(p,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[m(" Edit ")]),_:1})):(t(),n(p,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[m("View")]),_:1}))]}),_:2},1032,["to"])):((w=r.Form)==null?void 0:w.Type)===g(y).FORM_TYPE_ACCOMMODATION?(t(),n(S,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var _;return[(_=r.Form)!=null&&_.State.Edit&&I.value?(t(),n(p,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[m(" Edit ")]),_:1})):(t(),n(p,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[m("View")]),_:1}))]}),_:2},1032,["to"])):((A=r.Form)==null?void 0:A.Type)===g(y).FORM_TYPE_DEALER?(t(),n(S,{key:2,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`},{default:o(()=>{var _;return[(_=r.Form)!=null&&_.State.Edit&&k.value?(t(),n(p,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[m(" Edit ")]),_:1})):(t(),n(p,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[m("View")]),_:1}))]}),_:2},1032,["to"])):l("",!0)])):l("",!0)],64)):l("",!0)],64)}),128))])]}),_:1}),d(q,null,{default:o(()=>{var T;return[e.convention.DetailLink?(t(),n(p,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[m(C(g(M).buttonDetails),1)]),_:1},8,["href"])):l("",!0),d(X),i.value&&((T=e.forms.find(r=>r.Type===g(y).FORM_TYPE_REGISTRATION))!=null&&T.State.New)?(t(),n(D,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[d(p,{color:"primary"},{default:o(()=>[m(C(g(M).buttonRegister),1)]),_:1})]),_:1},8,["to"])):l("",!0)]}),_:1})]),_:1})}}});const ue=P(le,[["__scopeId","data-v-fe9830b6"]]),ce=R({__name:"Conventions",setup(s){const c=x(),f=F([]),v=F([]);return c.getOpenConventionsList().then(a=>{a&&(f.value=[...f.value,...a],c.getAvailableConventionForms(f.value.map(i=>i.ConventionUUID)).then(i=>{v.value=[...v.value,...i]}).catch(i=>{console.error(i)}))}),(a,i)=>(t(),n(oe,null,{default:o(()=>[d(te,{class:"justify-center"},{default:o(()=>[(t(!0),u(U,null,N(f.value,k=>(t(),n(ee,{key:k.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[d(ue,{convention:k,forms:v.value.filter(I=>I.ConventionUUID===k.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),me={};function fe(s,c){return t(),u("div")}const de=P(me,[["render",fe]]),ve=R({__name:"MainView",emits:["pageTitle"],setup(s,{emit:c}){return c("pageTitle","Scotiacon Registration System"),(f,v)=>(t(),u(U,null,[d(ce),d(de)],64))}}),we=R({__name:"Home",emits:["pageTitle"],setup(s,{emit:c}){const f=z();return c("pageTitle","Telegram Login"),(v,a)=>(t(),u("div",null,[g(f)?(t(),n(ve,{key:0,onPageTitle:a[0]||(a[0]=i=>c("pageTitle",i))})):(t(),n(B,{key:1}))]))}});export{we as default};
