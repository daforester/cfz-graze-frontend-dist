import{p as Pe,r as A,c as ce,C as f,h as gl,av as _e,az as pl,R as sl,d as Ge,ao as hl,s as Ee,u as $e,w as ae,X as Qe,aA as yl,f as s,F as B,m as he,aH as bl,x as K,aI as Il,aJ as Ze,i as be,M as ne,N as Ie,W as Ke,n as r,B as N,D as X,y as Q,v as d,Q as oe,q as I,A as q,k as Ve,z as il,a3 as Fe,P as He,E as Ul,b as Dl,a9 as Tl,_ as kl,al as el,S as Vl,aK as Cl,l as Sl,aL as ll}from"./index-qrnKhx_T.js";import{F as me}from"./form-0fJbSFPv.js";import{S as El}from"./submission-40fey8Hx.js";import{a as wl,V as ke,u as Xe,m as Al,b as rl,c as Ol,d as Ml}from"./VCheckbox-q0aKFgG-.js";import{s as Ae}from"./index-OKsbKlsK.js";import{e as Rl,V as ye,a as fe,b as dl,c as xe,d as we}from"./VList-I03sduVq.js";import{V as j,a as Y}from"./VRow-UcVvURYV.js";import{m as Ll,u as $l,a as xl,b as Pl,V as Be,c as Fl}from"./copyToClipboard-0uXNAf42.js";import{q as ql,u as Je,V as Oe,A as Nl,a as _l}from"./VContainer-gWvyuF1h.js";import{b as Bl,_ as tl}from"./SaveButton.vue_vue_type_script_setup_true_lang-z-LO4g_8.js";import{a as ml}from"./scopeId-kmVgcqbQ.js";import{V as te,a as Yl}from"./VBtn-Av-8rse3.js";import{m as Gl,a as Kl,V as al}from"./VAvatar-kJpqjpP2.js";import{m as Hl,V as Ce,a as Ye,b as Xl,c as Jl}from"./VTextField-0XScCu3_.js";import{V as Wl}from"./VFileInput-NO7cDzm9.js";import{V as vl}from"./VForm-9fBepPZ3.js";import{V as jl}from"./VTextarea-tGvAG899.js";import{u as zl,f as Ql}from"./forwardRefs-U4OdwkyO.js";import{a as Zl}from"./VChip-HAPZLQwu.js";import{G as et}from"./userData-jTd1ttDI.js";import{v as qe}from"./v4-yQnnJER4.js";import{e as lt,a as tt,b as at,c as nt}from"./VCard-Y7aFevFa.js";var de=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(de||{});const Ua=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var cl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(cl||{});const Da=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Me=e=>{e.sort((k,t)=>(k.Order?k.Order:0)-(t.Order?t.Order:0)),e.forEach((k,t)=>{k.Order=t})},Ta=(e,k)=>{const t=k.indexOf(e);if(t===0)return;const V=e.Order;e.Order=k[t-1].Order,k[t-1].Order=V,Me(k)},ka=(e,k)=>{const t=k.indexOf(e);if(t>=k.length-1)return;const V=e.Order;e.Order=k[t+1].Order,k[t+1].Order=V,Me(k)},ot=(e,k,t)=>e==null||k==null?-1:e.toString().toLocaleLowerCase().indexOf(k.toString().toLocaleLowerCase()),ut=Pe({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,k,t){var x;const V=[],D=(t==null?void 0:t.default)??ot,p=t!=null&&t.filterKeys?_e(t.filterKeys):!1,C=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return V;e:for(let S=0;S<e.length;S++){const[O,g=O]=_e(e[S]),l={},m={};let o=-1;if(k&&!(t!=null&&t.noFilter)){if(typeof O=="object"){const T=p||Object.keys(g);for(const u of T){const n=pl(g,u,g),b=(x=t==null?void 0:t.customKeyFilter)==null?void 0:x[u];if(o=b?b(n,k,O):D(n,k,O),o!==-1&&o!==!1)b?l[u]=o:m[u]=o;else if((t==null?void 0:t.filterMode)==="every")continue e}}else o=D(O,k,O),o!==-1&&o!==!1&&(m.title=o);const E=Object.keys(m).length,v=Object.keys(l).length;if(!E&&!v||(t==null?void 0:t.filterMode)==="union"&&v!==C&&!E||(t==null?void 0:t.filterMode)==="intersection"&&(v!==C||!E))continue}V.push({index:S,matches:{...m,...l}})}return V}function it(e,k,t,V){const D=A([]),p=A(new Map),C=ce(()=>V!=null&&V.transform?f(k).map(S=>[S,V.transform(S)]):f(k));gl(()=>{const S=typeof t=="function"?t():f(t),O=typeof S!="string"&&typeof S!="number"?"":String(S),g=st(C.value,O,{customKeyFilter:{...e.customKeyFilter,...f(V==null?void 0:V.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),l=f(k),m=[],o=new Map;g.forEach(E=>{let{index:v,matches:T}=E;const u=l[v];m.push(u),o.set(u.value,T)}),D.value=m,p.value=o});function x(S){return p.value.get(S.value)}return{filteredItems:D,filteredMatches:p,getMatches:x}}function rt(e,k,t){if(k==null)return e;if(Array.isArray(k))throw new Error("Multiple matches is not implemented");return typeof k=="number"&&~k?s(B,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,k)]),s("span",{class:"v-autocomplete__mask"},[e.substr(k,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(k+t)])]):e}const dt=Pe({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ll(),...sl(Hl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Gl({transition:!1})},"VAutocomplete"),nl=Ge()({name:"VAutocomplete",props:dt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,k){let{slots:t}=k;const{t:V}=hl(),D=A(),p=Ee(!1),C=Ee(!0),x=Ee(!1),S=A(),O=A(),g=$e(e,"menu"),l=ce({get:()=>g.value,set:w=>{var H;g.value&&!w&&((H=S.value)!=null&&H.ΨopenChildren)||(g.value=w)}}),m=Ee(-1),o=ce(()=>{var w;return(w=D.value)==null?void 0:w.color}),E=ce(()=>l.value?e.closeText:e.openText),{items:v,transformIn:T,transformOut:u}=Rl(e),{textColorClasses:n,textColorStyles:b}=ql(o),i=$e(e,"search",""),R=$e(e,"modelValue",[],w=>T(w===null?[null]:_e(w)),w=>{const H=u(w);return e.multiple?H:H[0]??null}),G=ce(()=>typeof e.counterValue=="function"?e.counterValue(R.value):typeof e.counterValue=="number"?e.counterValue:R.value.length),_=zl(),{filteredItems:L,getMatches:y}=it(e,v,()=>C.value?"":i.value),M=ce(()=>e.hideSelected?L.value.filter(w=>!R.value.some(H=>H.value===w.value)):L.value),$=ce(()=>R.value.map(w=>w.props.value)),F=ce(()=>{var H;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&i.value===((H=M.value[0])==null?void 0:H.title))&&M.value.length>0&&!C.value&&!x.value}),h=ce(()=>e.hideNoData&&!M.value.length||e.readonly||(_==null?void 0:_.isReadonly.value)),J=A(),{onListScroll:ue,onListKeydown:ve}=$l(J,D);function U(w){e.openOnClear&&(l.value=!0),i.value=""}function a(){h.value||(l.value=!0)}function c(w){h.value||(p.value&&(w.preventDefault(),w.stopPropagation()),l.value=!l.value)}function z(w){var ge,W,ie;if(e.readonly||_!=null&&_.isReadonly.value)return;const H=D.value.selectionStart,le=R.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(w.key))&&w.preventDefault(),["Enter","ArrowDown"].includes(w.key)&&(l.value=!0),["Escape"].includes(w.key)&&(l.value=!1),F.value&&["Enter","Tab"].includes(w.key)&&Ue(M.value[0]),w.key==="ArrowDown"&&F.value&&((ge=J.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(w.key)){if(m.value<0){w.key==="Backspace"&&!i.value&&(m.value=le-1);return}const Z=m.value,pe=R.value[m.value];pe&&!pe.props.disabled&&Ue(pe),m.value=Z>=le-1?le-2:Z}if(w.key==="ArrowLeft"){if(m.value<0&&H>0)return;const Z=m.value>-1?m.value-1:le-1;R.value[Z]?m.value=Z:(m.value=-1,D.value.setSelectionRange((W=i.value)==null?void 0:W.length,(ie=i.value)==null?void 0:ie.length))}if(w.key==="ArrowRight"){if(m.value<0)return;const Z=m.value+1;R.value[Z]?m.value=Z:(m.value=-1,D.value.setSelectionRange(0,0))}}}function P(w){if(Ze(D.value,":autofill")||Ze(D.value,":-webkit-autofill")){const H=v.value.find(le=>le.title===w.target.value);H&&Ue(H)}}function se(){var w;p.value&&(C.value=!0,(w=D.value)==null||w.focus())}function ee(w){p.value=!0,setTimeout(()=>{x.value=!0})}function We(w){x.value=!1}function fl(w){(w==null||w===""&&!e.multiple)&&(R.value=[])}const Se=Ee(!1);function Ue(w){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!w.props.disabled)if(e.multiple){const le=R.value.findIndex(ge=>e.valueComparator(ge.value,w.value));if(le===-1)R.value=[...R.value,w];else{const ge=[...R.value];ge.splice(le,1),R.value=ge}}else R.value=H?[w]:[],Se.value=!0,i.value=H?w.title:"",l.value=!1,C.value=!0,Qe(()=>Se.value=!1)}return ae(p,(w,H)=>{var le;w!==H&&(w?(Se.value=!0,i.value=e.multiple?"":String(((le=R.value.at(-1))==null?void 0:le.props.title)??""),C.value=!0,Qe(()=>Se.value=!1)):(!e.multiple&&i.value==null?R.value=[]:F.value&&!x.value&&!R.value.some(ge=>{let{value:W}=ge;return W===M.value[0].value})&&Ue(M.value[0]),l.value=!1,i.value="",m.value=-1))}),ae(i,w=>{!p.value||Se.value||(w&&(l.value=!0),C.value=!w)}),ae(l,()=>{if(!e.hideSelected&&l.value&&R.value.length){const w=M.value.findIndex(H=>R.value.some(le=>H.value===le.value));yl&&window.requestAnimationFrame(()=>{var H;w>=0&&((H=O.value)==null||H.scrollToIndex(w))})}}),ae(M,(w,H)=>{p.value&&(!w.length&&e.hideNoData&&(l.value=!1),!H.length&&w.length&&(l.value=!0))}),Je(()=>{const w=!!(e.chips||t.chip),H=!!(!e.hideNoData||M.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),le=R.value.length>0,ge=Ce.filterProps(e);return s(Ce,he({ref:D},ge,{modelValue:i.value,"onUpdate:modelValue":[W=>i.value=W,fl],focused:p.value,"onUpdate:focused":W=>p.value=W,validationValue:R.externalValue,counterValue:G.value,dirty:le,onChange:P,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:le?void 0:e.placeholder,"onClick:clear":U,"onMousedown:control":a,onKeydown:z}),{...t,default:()=>s(B,null,[s(xl,he({ref:S,modelValue:l.value,"onUpdate:modelValue":W=>l.value=W,activator:"parent",contentClass:"v-autocomplete__content",disabled:h.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:se},e.menuProps),{default:()=>[H&&s(ye,{ref:J,selected:$.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:W=>W.preventDefault(),onKeydown:ve,onFocusin:ee,onFocusout:We,onScrollPassive:ue,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},{default:()=>{var W,ie,Z;return[(W=t["prepend-item"])==null?void 0:W.call(t),!M.value.length&&!e.hideNoData&&(((ie=t["no-data"])==null?void 0:ie.call(t))??s(fe,{title:V(e.noDataText)},null)),s(Pl,{ref:O,renderless:!0,items:M.value},{default:pe=>{var ze;let{item:re,index:De,itemRef:Te}=pe;const je=he(re.props,{ref:Te,key:De,active:F.value&&De===0?!0:void 0,onClick:()=>Ue(re)});return((ze=t.item)==null?void 0:ze.call(t,{item:re,index:De,props:je}))??s(fe,je,{prepend:Re=>{let{isSelected:Le}=Re;return s(B,null,[e.multiple&&!e.hideSelected?s(wl,{key:re.value,modelValue:Le,ripple:!1,tabindex:"-1"},null):void 0,re.props.prependAvatar&&s(Kl,{image:re.props.prependAvatar},null),re.props.prependIcon&&s(Oe,{icon:re.props.prependIcon},null)])},title:()=>{var Re,Le;return C.value?re.title:rt(re.title,(Re=y(re))==null?void 0:Re.title,((Le=i.value)==null?void 0:Le.length)??0)}})}}),(Z=t["append-item"])==null?void 0:Z.call(t)]}})]}),R.value.map((W,ie)=>{function Z(Te){Te.stopPropagation(),Te.preventDefault(),Ue(W,!1)}const pe={"onClick:close":Z,onMousedown(Te){Te.preventDefault(),Te.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},re=w?!!t.chip:!!t.selection,De=re?bl(w?t.chip({item:W,index:ie,props:pe}):t.selection({item:W,index:ie})):void 0;if(!(re&&!De))return s("div",{key:W.value,class:["v-autocomplete__selection",ie===m.value&&["v-autocomplete__selection--selected",n.value]],style:ie===m.value?b.value:{}},[w?t.chip?s(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:W.title}}},{default:()=>[De]}):s(Zl,he({key:"chip",closable:e.closableChips,size:"small",text:W.title,disabled:W.props.disabled},pe),null):De??s("span",{class:"v-autocomplete__selection-text"},[W.title,e.multiple&&ie<R.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[K(",")])])])})]),"append-inner":function(){var pe;for(var W=arguments.length,ie=new Array(W),Z=0;Z<W;Z++)ie[Z]=arguments[Z];return s(B,null,[(pe=t["append-inner"])==null?void 0:pe.call(t,...ie),e.menuIcon?s(Oe,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:c,onClick:Il,"aria-label":V(E.value),title:V(E.value)},null):void 0])}})}),Ql({isFocused:p,isPristine:C,menu:l,search:i,filteredItems:L,select:Ue},D)}}),mt={class:"extrasList"},vt=be({__name:"Extras",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:k}){const t=e,{admin:V=!1,convention:D,disabled:p=!1}=t,C=Ie(e,"modelValue"),x=k,S=Ke.getInstance(),O=A({});try{O.value=JSON.parse(C.value)}catch{}const g=A([]),l=A([]);ae(t,()=>{o()}),ae(O.value,v=>{for(const T in v)if(v[T].checked){const u=g.value.map(n=>{var b;return(b=n.Options)==null?void 0:b.find(i=>i.OptionUUID===T)});if(u&&u.length>0)try{const n=u[0];v[T].choiceId===""&&n&&n.Choices&&n.Choices.length>0&&(v[T].choiceId=n.Choices[0].TagUUID),v[T].price=n==null?void 0:n.Price}catch{}}else v[T].choiceId="",v[T].price=0;C.value=JSON.stringify(v),E()});const m=ce({get:()=>g.value.map(v=>v.ExtraUUID),set:()=>{}}),o=()=>{var T;const v=((T=t.items.find(u=>u.Title==="SelectedExtras"))==null?void 0:T.Value)||"[]";try{const u=JSON.parse(v);g.value=l.value.filter(n=>u.find(b=>b===n.ExtraUUID))||[],m.value=[...g.value.map(n=>n.ExtraUUID)],g.value.forEach(n=>{var b;(b=n.Options)==null||b.forEach(i=>{O.value[i.OptionUUID]||(O.value[i.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in D&&D.Extras.length?(l.value=D.Extras,o()):"ConventionUUID"in D&&(V?S==null||S.getConventionExtras(D.ConventionUUID).then(v=>{v&&(l.value=v,o())}):S==null||S.getAvailableConventionExtras(D.ConventionUUID).then(v=>{v&&(l.value=v,o())}));const E=(v=void 0)=>{setTimeout(()=>x("change",v),100)};return(v,T)=>(r(),N("div",mt,[X("h4",null,Q(v.label),1),s(ye,{opened:m.value,"onUpdate:opened":T[0]||(T[0]=u=>m.value=u)},{default:d(()=>[(r(!0),N(B,null,oe(g.value,u=>(r(),I(dl,{key:u.ExtraUUID,value:u.ExtraUUID},{activator:d(({props:n})=>[s(fe,he({"prepend-icon":"mdi:mdi-group","append-icon":""},n),{default:d(()=>[u.Name?(r(),I(xe,{key:0},{default:d(()=>[X("strong",null,Q(u.Name),1)]),_:2},1024)):q("",!0),u.Description?(r(),I(we,{key:1,class:"mt-2 d-inline"},{default:d(()=>[K(Q(u.Description),1)]),_:2},1024)):q("",!0)]),_:2},1040)]),default:d(()=>[u.Options?(r(!0),N(B,{key:0},oe(u.Options,n=>(r(),I(fe,{key:n.OptionUUID,class:"override-pl"},{default:d(()=>[s(j,null,{default:d(()=>[s(Y,{cols:"12",sm:"6"},{default:d(()=>[s(ke,{label:`${n.Name} ${n.Price&&n.Price!==0?`(${f(Ae).currencySymbol}${n.Price})`:""}`,modelValue:O.value[n.OptionUUID].checked,"onUpdate:modelValue":b=>O.value[n.OptionUUID].checked=b,disabled:f(p),"hide-details":"",onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n.Choices&&n.Choices.length>1&&O.value[n.OptionUUID].checked?(r(),I(Y,{key:0,cols:"12",sm:"6"},{default:d(()=>[s(Be,{items:n.Choices.sort((b,i)=>b.Title.localeCompare(i.Title)).map(b=>({value:b.TagUUID,title:b.Title})),modelValue:O.value[n.OptionUUID].choiceId,"onUpdate:modelValue":b=>O.value[n.OptionUUID].choiceId=b,"item-value":"value","item-title":"title",variant:"outlined",disabled:f(p),"hide-details":"",onChange:E},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024))),128)):q("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}}),ct={class:"interestList"},ft=be({__name:"Interests",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:k}){const t=e,{admin:V=!1,convention:D,disabled:p=!1}=t,C=Ie(e,"modelValue"),x=k,S=Ke.getInstance(),O=A({});try{O.value=JSON.parse(C.value)}catch{}const g=A([]),l=A([]);ae(O.value,v=>{C.value=JSON.stringify(v)});const m=A([]),o=()=>{var T;const v=((T=t.items.find(u=>u.Title==="SelectedInterests"))==null?void 0:T.Value)||"[]";try{const u=JSON.parse(v);g.value=l.value.filter(n=>u.find(b=>b===n.InterestUUID))||[],m.value=[...g.value.map(n=>n.InterestUUID)]}catch{}};"ConventionUUID"in D&&(V?S==null||S.getConventionInterests(D.ConventionUUID).then(v=>{v&&(l.value=v,o())}):S==null||S.getConventionInterests(D.ConventionUUID).then(v=>{v&&(l.value=v,o())})),ae(t,()=>{o()});const E=(v=void 0)=>{setTimeout(()=>x("change",v),100)};return(v,T)=>(r(),N("div",ct,[X("h4",null,Q(v.label),1),s(ye,{opened:m.value,"onUpdate:opened":T[0]||(T[0]=u=>m.value=u)},{default:d(()=>[(r(!0),N(B,null,oe(g.value.sort((u,n)=>u.Order>n.Order?1:u.Order==n.Order?0:-1),u=>(r(),I(fe,{key:u.InterestUUID},{default:d(()=>[s(j,null,{default:d(()=>[s(Y,null,{default:d(()=>[s(ke,{label:`${u.Name} ${u.Price&&u.Price>0?`(${f(Ae).currencySymbol}${u.Price})`:""}`,modelValue:O.value[u.InterestUUID],"onUpdate:modelValue":n=>O.value[u.InterestUUID]=n,disabled:f(p),messages:u.Description,onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}}),ol=(e,k,t)=>{if(t>=e.length){let V=t-e.length+1;for(;V--;)e.push(void 0)}e.splice(t,0,e.splice(k,1)[0])},Ne=e=>(Me(e),e),Va=e=>(k,t)=>k[e]<t[e]?-1:k[e]>t[e]?1:0,gt={class:"ticketList"},pt={key:0,class:"text-orange-darken-1"},ht=be({__name:"Tickets",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:k}){const t=e,{admin:V=!1,convention:D,disabled:p=!1,registrationGroup:C=void 0}=t,x=Ie(e,"modelValue"),S=k,O=Ke.getInstance(),g=A({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{g.value=JSON.parse(x.value),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked)}catch{}const l=A([]),m=A([]),o=A([]),E=A({required:(b,i=void 0)=>()=>{if(p||!(C!=null&&C.Registration.Leader))return!0;if(i==null){if(g.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(b&&b.ComponentsRequired>0&&g.value.Ticket.includes(b.TicketUUID||"")){let R=0;if(b.TicketComponents.forEach(G=>{g.value.ComponentsChecked.forEach(_=>{G.TicketUUID===_&&(R+=1)})}),R<b.ComponentsRequired)return`Must select ticket ${b.ComponentsRequired} component${b.ComponentsRequired===1?"":"s"}`}}return!0}}),v=()=>{var i;const b=((i=t.items.find(R=>R.Title==="SelectedTickets"))==null?void 0:i.Value)||"[]";try{const R=JSON.parse(b);l.value=m.value.filter(G=>G.Type==="TICKET_TYPE_GROUP"&&R.find(_=>_===G.TicketUUID))||[],o.value=[...l.value.filter(G=>G.Type==="TICKET_TYPE_GROUP").map(G=>G.TicketUUID)]}catch{}};if("ConventionUUID"in D)if(V)O==null||O.getConventionTickets(D.ConventionUUID).then(b=>{b&&(m.value=b,v())});else{const b=t.items.find(i=>i.Title==="SelectedTickets");b&&(O==null||O.getFieldTickets(b.FieldUUID).then(i=>{i&&(m.value=i,v())}))}ae(t,()=>{v()});const T=b=>{g.value.Ticket.length>1&&g.value.Ticket.shift(),g.value.ComponentsChecked=[];const i=[];l.value.forEach(R=>{(g.value.Ticket.includes(R.TicketUUID)||g.value.ComponentsChecked.includes(R.TicketUUID))&&i.push(...R.AddonTickets.map(G=>G.TicketUUID))}),g.value.AddonsChecked=g.value.AddonsChecked.filter(R=>i.includes(R)),n(b)},u=b=>{const i=m.value.find(R=>R.TicketUUID===g.value.Ticket[0]);if(i)for(;g.value.ComponentsChecked.length>i.ComponentsRequired;)g.value.ComponentsChecked.shift();n(b)},n=(b=void 0)=>{x.value=JSON.stringify(g.value),setTimeout(()=>S("change",b),100)};try{C!=null&&C.TicketData&&(g.value=JSON.parse(C.TicketData),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked),n())}catch{}return(b,i)=>{var R;return r(),N("div",gt,[X("h4",null,[K(Q(b.label)+" ",1),(R=f(C))!=null&&R.Registration.Leader?q("",!0):(r(),N("small",pt,"(controlled by group leader)"))]),s(ye,{opened:o.value,"onUpdate:opened":i[4]||(i[4]=G=>o.value=G)},{default:d(()=>[(r(!0),N(B,null,oe(f(Ne)(l.value.filter(G=>G.Type===f(cl).TICKET_TYPE_GROUP)),G=>(r(),N(B,{key:G.TicketUUID},[G.Tickets.length>0?(r(),I(dl,{key:0,value:G.TicketUUID},{activator:d(({props:_})=>[s(fe,he(_,{"prepend-icon":"mdi:mdi-group"}),{default:d(()=>[s(xe,null,{default:d(()=>[X("strong",null,Q(G.Name),1)]),_:2},1024),s(we,{class:"d-inline"},{default:d(()=>[K(Q(G.Description),1)]),_:2},1024)]),_:2},1040)]),default:d(()=>[(r(!0),N(B,null,oe(G.Tickets,_=>(r(),I(fe,{key:_.TicketUUID,class:"override-pl"},{default:d(()=>{var L;return[s(we,{class:"d-inline"},{default:d(()=>[K(Q(_.Description),1)]),_:2},1024),s(ke,{modelValue:g.value.Ticket,"onUpdate:modelValue":i[0]||(i[0]=y=>g.value.Ticket=y),value:_.TicketUUID,onChange:T,rules:[E.value.required(_)],"validate-on":"submit",disabled:f(p)||!((L=f(C))!=null&&L.Registration.Leader)},{label:d(()=>[s(Oe,{icon:_.RequiresAccommodation?"mdi:mdi-home":_.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${_.Name} ${_.Price>0?`(${f(Ae).currencySymbol}${_.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),g.value.Ticket.length>0&&_.TicketUUID===g.value.Ticket[0]?(r(),N(B,{key:0},[_.AddonTickets.length?(r(),I(ye,{key:0},{default:d(()=>[(r(!0),N(B,null,oe(f(Ne)(_.AddonTickets),y=>(r(),N(B,{key:y==null?void 0:y.TicketUUID},[y?(r(),I(fe,{key:0},{default:d(()=>[s(xe,null,{default:d(()=>{var M;return[s(ke,{modelValue:g.value.AddonsChecked,"onUpdate:modelValue":i[1]||(i[1]=$=>g.value.AddonsChecked=$),value:y.TicketUUID,onChange:i[2]||(i[2]=$=>{g.value.ComponentsChecked=[],n($)}),disabled:f(p)||!((M=f(C))!=null&&M.Registration.Leader)},{label:d(()=>[s(Oe,{icon:y.RequiresAccommodation?"mdi:mdi-home-plus":y.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${y.Name} ${y.Price>0?`(${f(Ae).currencySymbol}${y.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(we,{class:"d-inline"},{default:d(()=>[K(Q(y.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0),_.TicketComponents.length?(r(),I(ye,{key:1},{default:d(()=>[(r(!0),N(B,null,oe(f(Ne)(_.TicketComponents),y=>(r(),N(B,{key:y==null?void 0:y.TicketUUID},[y?(r(),I(fe,{key:0},{default:d(()=>[s(xe,null,{default:d(()=>{var M;return[s(ke,{modelValue:g.value.ComponentsChecked,"onUpdate:modelValue":i[3]||(i[3]=$=>g.value.ComponentsChecked=$),value:y.TicketUUID,onChange:u,rules:[E.value.required(_,y)],"validate-on":"submit",disabled:f(p)||!((M=f(C))!=null&&M.Registration.Leader)},{label:d(()=>[s(Oe,{icon:y.RequiresAccommodation?"mdi:mdi-home-plus":y.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${y.Name} ${y.Price>0?`(${f(Ae).currencySymbol}${y.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(we,null,{default:d(()=>[K(Q(y.Description),1)]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)],64)):q("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):q("",!0)],64))),128))]),_:1},8,["opened"])])}}}),yt={key:0},bt=X("strong",null,"Your Sharing Group",-1),It={class:"d-flex flex-wrap my-2"},Ut=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Dt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Tt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},kt=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Vt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Ct={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},St=["href"],Et=X("br",null,null,-1),wt=X("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),At=X("strong",null,"Your Groups Accommodation",-1),Ot=X("br",null,null,-1),Mt=X("small",null,"(in order of preference, controlled by group leader)",-1),Rt=X("strong",null,"Accommodation Options",-1),Lt=X("br",null,null,-1),$t=X("strong",null,"Your Chosen Accommodation",-1),xt=X("small",null,"(in order of preference)",-1),Pt=be({__name:"Accommodation",props:ne({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change","update:items"],["update:modelValue"]),setup(e,{emit:k}){const t=e,{admin:V=!1,convention:D,disabled:p}=t,C=k,x=Ie(e,"modelValue"),S=Xe(t,C,void 0,void 0,"items"),O=He(),g=ml(),l=Ul.getInstance(),m=A(Ve(x.value)),o=A([]),E=A(),v=A({sharing:!1}),T=()=>{try{const a=JSON.parse(t.data);a&&(v.value=a)}catch{}};T(),ae(t,()=>{T(),t.registrationGroup&&(o.value=t.registrationGroup.Members,E.value=t.registrationGroup.Registration)}),ae(m,a=>{x.value=Ve(a)},{deep:!0});const u=A(""),n=A(!1),b=()=>{var a;(a=E.value)!=null&&a.Leader&&O.getRegistrationInvite(D.ConventionUUID).then(c=>{if(c){const z=new URL(location.href);z.searchParams.set("token",c),u.value=z.toString()}})},i=()=>{Fl(u.value),b(),n.value=!0,setTimeout(()=>n.value=!1,2200)},R=(a=void 0)=>{setTimeout(()=>C("change",a),100)},G=A({required:a=>!t.required||a.length>0||"Selections Required"}),_=a=>a?`${a.Reference?`#${a.Reference}`:"(not registered)"} ${a.Name}`:"",L=()=>{var a;l.emit("registration.group.leave",(a=E.value)==null?void 0:a.RegistrationUUID)},y=a=>{l.emit("registration.group.remove.member",a)},M=A([]);ae(S,()=>{$()});const $=()=>{V?O.getConventionAccommodation(D.ConventionUUID).then(a=>{M.value=a.filter(c=>!!(S!=null&&S.value.find(z=>z.Value===c.AccommodationUUID)))||[]}):S.value.length>0&&O.getFieldAccommodation(S.value[0].FieldUUID).then(a=>{M.value=a.filter(c=>!!(S!=null&&S.value.find(z=>z.Value===c.AccommodationUUID)))||[]})};$(),(()=>{var a;if(t.registrationGroup)if(o.value=t.registrationGroup.Members,E.value=t.registrationGroup.Registration,(a=E.value)!=null&&a.Leader)b();else try{m.value=JSON.parse(t.registrationGroup.AccommodationData),R()}catch{}})();const h=A({column:0,id:""}),J=()=>{!p&&!m.value.includes(h.value.id)&&(h.value.column===0&&h.value.id!==""&&m.value.push(h.value.id),R())},ue=()=>{const a=m.value.findIndex(c=>c===h.value.id);!p&&a>=0&&(m.value.splice(a,1),R())},ve=()=>{if(p||h.value.column!==1)return;const a=m.value.findIndex(c=>c===h.value.id);a<=0||(ol(m.value,a,a-1),R())},U=()=>{if(p||h.value.column!==1)return;const a=m.value.findIndex(c=>c===h.value.id);a>=m.value.length-1||(ol(m.value,a,a+1),R())};return(a,c)=>{var z;return r(),N(B,null,[X("h4",null,Q(a.label),1),s(j,null,{default:d(()=>[s(Y,{cols:"12"},{default:d(()=>{var P,se;return[o.value&&E.value&&v.value.sharing?(r(),N("div",yt,[bt,!f(p)&&((P=o.value.find(ee=>ee.IsLeader))==null?void 0:P.UUID)!==E.value.RegistrationUUID?(r(),I(te,{key:0,color:"red",variant:"text",onClick:L},{default:d(()=>[K("(leave group)")]),_:1})):q("",!0),X("dl",It,[Ut,X("dd",Dt,[s(al,{class:"rounded-circle d-inline-block",src:f(g).GetProfileImageURL(((se=o.value.find(ee=>ee.IsLeader))==null?void 0:se.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),X("div",Tt,Q(_(o.value.find(ee=>ee.IsLeader))),1)]),(r(!0),N(B,null,oe(o.value,ee=>(r(),N(B,{key:ee.UUID},[ee.IsLeader?q("",!0):(r(),N(B,{key:0},[kt,X("dd",Vt,[s(al,{class:"rounded-circle d-inline-block",src:f(g).GetProfileImageURL(ee.UserUUID),height:"32",width:"32"},null,8,["src"]),X("div",Ct,[K(Q(_(ee))+" ",1),E.value.Leader?(r(),I(te,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:We=>y(ee.UUID),disabled:f(p)},null,8,["onClick","disabled"])):q("",!0)])])],64))],64))),128))]),s(Bl,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=ee=>n.value=ee),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),u.value&&E.value.Leader&&!f(p)?(r(),N(B,{key:1},[X("a",{href:u.value,onClick:il(i,["prevent"]),class:"text-white text-decoration-none"},[s(te,{color:"blue",class:"mb-2"},{default:d(()=>[K("Get Invite Link")]),_:1})],8,St),Et,wt],64)):q("",!0)])):q("",!0)]}),_:1})]),_:1}),E.value&&!E.value.Leader?(r(),I(j,{key:0},{default:d(()=>[s(Y,{cols:"10",md:"5"},{default:d(()=>[At,Ot,Mt,s(ye,null,{default:d(()=>[(r(!0),N(B,null,oe(m.value.map(P=>M.value.find(se=>se.AccommodationUUID==P)).filter(P=>P!==void 0),(P,se)=>(r(),N(B,null,[P?(r(),I(fe,{key:P.AccommodationUUID,title:`${se+1}. ${P.Name}`,class:Fe(h.value.column===1&&h.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):q("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(r(),I(j,{key:1},{default:d(()=>[s(Y,{cols:"12",md:"5"},{default:d(()=>[Rt,Lt,s(ye,null,{default:d(()=>[(r(!0),N(B,null,oe(M.value,P=>(r(),I(fe,{key:P.AccommodationUUID,title:P.Name,class:Fe(h.value.column===0&&h.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:se=>h.value={column:0,id:P.AccommodationUUID},"append-icon":f(p)?"":"mdi:mdi-gesture-tap",onDblclick:c[1]||(c[1]=se=>J())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),f(p)?q("",!0):(r(),I(Y,{key:0,cols:"12",md:"1"},{default:d(()=>[s(j,{class:"d-md-none"},{default:d(()=>[s(Y,{cols:"12",class:"text-center"},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-down",size:"small",onClick:c[2]||(c[2]=P=>J()),color:"primary",title:"Select"}),K("   "),s(te,{icon:"mdi:mdi-arrow-up",size:"small",onClick:c[3]||(c[3]=P=>ue()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(j,{class:"d-none d-md-flex h-100 align-content-center"},{default:d(()=>[s(Y,{cols:"12"},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-right",size:"small",onClick:c[4]||(c[4]=P=>J()),color:"primary",title:"Select"})]),_:1}),s(Y,{cols:"12"},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-left",size:"small",onClick:c[5]||(c[5]=P=>ue()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(Y,{cols:"10",md:"5"},{default:d(()=>[$t,s(ye,null,{default:d(()=>[(r(!0),N(B,null,oe(m.value.map(P=>M.value.find(se=>se.AccommodationUUID==P)).filter(P=>P!==void 0),(P,se)=>(r(),N(B,null,[P?(r(),I(fe,{key:P.AccommodationUUID,title:`${se+1}. ${P.Name}`,class:Fe(h.value.column===1&&h.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ee=>h.value={column:1,id:(P==null?void 0:P.AccommodationUUID)||""},"append-icon":f(p)?"":"mdi:mdi-gesture-tap",onDblclick:c[6]||(c[6]=ee=>ue())},null,8,["title","class","onClick","append-icon"])):q("",!0)],64))),256))]),_:1}),xt]),_:1}),f(p)?q("",!0):(r(),I(Y,{key:1,cols:"2",md:"1"},{default:d(()=>[s(j,{class:"d-flex h-100 align-content-center mt-3"},{default:d(()=>[s(Y,{cols:"12"},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-up",size:"small",onClick:c[7]||(c[7]=P=>ve()),color:"primary",title:"Higher Priority"})]),_:1}),s(Y,{cols:"12"},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-down",size:"small",onClick:c[8]||(c[8]=P=>U()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(z=E.value)!=null&&z.Leader?(r(),I(Ye,{key:2,modelValue:x.value,"onUpdate:modelValue":c[9]||(c[9]=P=>x.value=P),disabled:f(p)||!1,"persistent-hint":a.persistentHint||!1,"error-messages":a.errorMessages||"",rules:[G.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):q("",!0)],64)}}}),Ft=be({__name:"AgeCheck",props:ne({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:k}){const t=k,V=e,D=Xe(V,t,void 0,void 0,"items"),p=Ie(e,"modelValue"),C=A({required:l=>!V.required||!!l||"Required.",min:l=>{var b,i;const m=new Date,o=m.getFullYear(),E=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),v=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),T=((b=D.value.find(R=>R.Title=="MIN_AGE"))==null?void 0:b.Value)||"18",u=((i=D.value.find(R=>R.Title=="BEFORE_DATE"))==null?void 0:i.Value)||`${o}-${E}-${v}`,n=O(u);return S(l,u,parseInt(T))||`You must be at least ${T} years old by ${n.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),x=()=>(t("blur"),!(C.value.min(p.value||"")!==!0||C.value.required(p.value||"")!==!0)),S=(l,m,o)=>{if(l>=m)return!1;const E=O(l),T=O(m).getTime()-E.getTime(),u=1e3*60*60*24*365.25;return T/u>=o},O=l=>{const[m,o,E]=l.split("-");return new Date(parseInt(m),parseInt(o)-1,parseInt(E))},g=(l=void 0)=>{setTimeout(()=>t("change",l),100)};return(l,m)=>(r(),I(Ce,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=o=>p.value=o),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[C.value.required,C.value.min],onBlur:x,onChange:g},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),qt={class:"text-center"},Nt={key:0},_t={key:0,class:"image-progress my-auto mx-auto"},Bt=["src"],Yt=be({__name:"BadgeImage",props:ne({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:k}){const t=k,V=e,D=Ie(e,"modelValue"),p=A({}),C=()=>{p.value.left=parseInt(getComputedStyle(o.value).left),p.value.top=parseInt(getComputedStyle(o.value).top),p.value.height=o.value.height,p.value.width=o.value.width,D.value=JSON.stringify(p.value)},x=He(),S=ml(),O=A(),g=A(""),l=A(!0),m=A(),o=A(),E=A(""),v=A(!1),T=A(0),u=A(),n=A({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),b=A(280),i=A(280);V.items.find(U=>{if(U.Title==="TargetWidth")return i.value=parseInt(U.Value,10)||280,!0}),V.items.find(U=>{if(U.Title==="TargetHeight")return b.value=parseInt(U.Value,10)||280,!0});const R=ce(()=>({"--preview-width":`${i.value}px`,"--preview-height":`${b.value}px`})),G=A(!1);try{p.value=JSON.parse(D.value||"{}"),p.value.fileUUID&&(E.value=S.GetBadgeImageURL(p.value.fileUUID))}catch{}V.registration&&x.getConBadgeDisplayName(V.registration.RegistrationUUID).then(U=>{U&&(g.value=U)}).catch(()=>{});const _=A({required:U=>!V.required||!!U||"Required.",saved:()=>!l.value||"File not uploaded."}),L=()=>(t("blur"),_.value.required(D.value||"")!==!0),y=(U=void 0)=>{$().then(()=>{M(),setTimeout(()=>t("change",U),100)})},M=()=>{m.value.files.length>0&&(E.value=URL.createObjectURL(m.value.files[0]))},$=async()=>{var a;const U=new FormData((a=O.value)==null?void 0:a.$el);l.value=!1,v.value=!0,S.SaveFormFile(U).then(c=>{c.Saved&&(v.value=!1,l.value=!0,p.value.fileUUID=c.FileUUID,G.value=!0)}).catch(()=>{})},F=()=>{o.value.style.left="0px",o.value.style.top="0px",o.value.width>o.value.height?o.value.width=i.value*(o.value.width/o.value.height):o.value.width=i.value,o.value.classList.remove("d-none")},h=(U,a=0,c=void 0)=>{if(c&&c.type)switch(c.type){case"touchstart":case"touchend":c.preventDefault();break}let z=500;if(!T.value)T.value=Date.now();else{const P=Date.now()-T.value;P>=3e3?z=1:P>=2500?z=2:P>=2e3?z=5:P>=1500?z=12:P>=1e3?z=25:P>=500?z=50:P>=250&&(z=100)}switch(a!==z&&(clearInterval(u.value),u.value=setInterval(()=>{h(U,z)},z)),U){case 0:T.value=0,clearInterval(u.value),C();break;case 6:o.value.width-=1;break;case 5:o.value.width+=1;break;case 1:o.value.style.top=`${(parseInt(getComputedStyle(o.value).top)||0)-1}px`;break;case 2:o.value.style.left=`${(parseInt(getComputedStyle(o.value).left)||0)+1}px`;break;case 3:o.value.style.top=`${(parseInt(getComputedStyle(o.value).top)||0)+1}px`;break;case 4:o.value.style.left=`${(parseInt(getComputedStyle(o.value).left)||0)-1}px`;break}ue()},J=U=>{switch(U.type){case"touchstart":U.preventDefault(),n.value.imageX=parseInt(getComputedStyle(o.value).left),n.value.imageY=parseInt(getComputedStyle(o.value).top),n.value.mouseX=U.touches[0].clientX,n.value.mouseY=U.touches[0].clientY,n.value.mouseDown=!0;break;case"mousedown":n.value.imageX=parseInt(getComputedStyle(o.value).left),n.value.imageY=parseInt(getComputedStyle(o.value).top),n.value.mouseX=U.clientX,n.value.mouseY=U.clientY,n.value.mouseDown=!0;break;case"touchend":U.preventDefault();case"mouseup":n.value.mouseDown=!1,C();break;case"touchmove":if(!n.value.mouseDown)return;o.value.style.left=`${n.value.imageX+(U.touches[0].clientX-n.value.mouseX)}px`,o.value.style.top=`${n.value.imageY+(U.touches[0].clientY-n.value.mouseY)}px`;break;case"mousemove":if(!n.value.mouseDown)return;o.value.style.left=`${n.value.imageX+(U.clientX-n.value.mouseX)}px`,o.value.style.top=`${n.value.imageY+(U.clientY-n.value.mouseY)}px`;break;case"dragstart":U.preventDefault();break;case"keydown":switch(U.key){case"ArrowUp":U.preventDefault(),h(1);break;case"ArrowRight":U.preventDefault(),h(2);break;case"ArrowDown":U.preventDefault(),h(3);break;case"ArrowLeft":U.preventDefault(),h(4);break;case"+":U.preventDefault(),h(5);break;case"-":U.preventDefault(),h(6);break}break;case"keyup":h(0),C();break}ue()},ue=()=>{if(o.value.width<i.value&&(o.value.width=i.value),o.value.height<b.value){const U=b.value-o.value.height,a=o.value.width/o.value.height;o.value.width+=Math.ceil(U*a)}(parseInt(getComputedStyle(o.value).left)||0)>0&&(o.value.style.left="0px"),(parseInt(getComputedStyle(o.value).top)||0)>0&&(o.value.style.top="0px"),(parseInt(getComputedStyle(o.value).left)||0)<0-(o.value.width-i.value)&&(o.value.style.left=`${0-(o.value.width-i.value)}px`),(parseInt(getComputedStyle(o.value).top)||0)<0-(o.value.height-b.value)&&(o.value.style.top=`${0-(o.value.height-b.value)}px`)},ve=()=>{try{clearInterval(u.value)}catch{}n.value.mouseDown=!1,T.value=0,C()};return window.addEventListener("mouseup",ve),window.addEventListener("mousemove",J),window.addEventListener("touchend",ve),window.addEventListener("touchmove",J),Dl(()=>{window.removeEventListener("mouseup",ve),window.removeEventListener("mousemove",J),window.removeEventListener("touchend",ve),window.removeEventListener("touchmove",J)}),(U,a)=>(r(),N("div",{style:Tl(R.value)},[s(vl,{ref_key:"badgeImageForm",ref:O,enctype:"multipart/form-data"},{default:d(()=>[s(j,null,{default:d(()=>[s(Y,null,{default:d(()=>[s(Wl,{label:U.label||"",name:U.name||"",hint:U.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:m,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[_.value.required],"error-messages":U.errorMessages||"","persistent-hint":U.persistentHint||!1,disabled:!l.value||U.disabled||!1,"hide-details":"",onChange:y,onBlur:L},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),X("p",qt,[l.value?q("",!0):(r(),N("small",Nt,"File Uploading"))])]),_:1})]),_:1}),s(j,{class:"justify-center scale-down"},{default:d(()=>[s(Y,{cols:"12",class:"text-center"},{default:d(()=>[K(" Preview "),v.value?(r(),N("div",_t,[s(Yl,{indeterminate:"",color:"primary",size:128,width:10},{default:d(()=>[K("Uploading")]),_:1})])):(r(),N(B,{key:1},[X("div",{class:"image-preview my-auto mx-auto",onMousemove:J,onMousedown:J,onMouseup:J,onTouchstart:J,onTouchmove:J,onTouchend:J},[X("img",{src:E.value,ref_key:"imageDisplay",ref:o,alt:"Your badge image",onLoad:F,onDragstart:J,onKeydown:J,onKeyup:J,tabindex:"0",class:"d-none"},null,40,Bt)],32),X("h3",null,Q(g.value),1)],64))]),_:1}),G.value?(r(),I(Y,{key:0,cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:d(()=>[s(te,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:a[0]||(a[0]=c=>h(4,0,c)),onMouseup:a[1]||(a[1]=c=>h(0,0,c)),onTouchstart:a[2]||(a[2]=c=>h(4,0,c)),onTouchend:a[3]||(a[3]=c=>h(0,0,c))}),s(te,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:a[4]||(a[4]=c=>h(1,0,c)),onMouseup:a[5]||(a[5]=c=>h(0,0,c)),onTouchstart:a[6]||(a[6]=c=>h(1,0,c)),onTouchend:a[7]||(a[7]=c=>h(0,0,c))}),s(te,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:a[8]||(a[8]=c=>h(3,0,c)),onMouseup:a[9]||(a[9]=c=>h(0,0,c)),onTouchstart:a[10]||(a[10]=c=>h(3,0,c)),onTouchend:a[11]||(a[11]=c=>h(0,0,c))}),s(te,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:a[12]||(a[12]=c=>h(2,0,c)),onMouseup:a[13]||(a[13]=c=>h(0,0,c)),onTouchstart:a[14]||(a[14]=c=>h(2,0,c)),onTouchend:a[15]||(a[15]=c=>h(0,0,c))})]),_:1})):q("",!0)]),_:1}),G.value?(r(),I(j,{key:0,class:"justify-center scale-down"},{default:d(()=>[s(Y,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:d(()=>[s(te,{icon:"mdi:mdi-plus",color:"primary",onMousedown:a[16]||(a[16]=c=>h(5,0,c)),onMouseup:a[17]||(a[17]=c=>h(0,0,c)),onTouchstart:a[18]||(a[18]=c=>h(5,0,c)),onTouchend:a[19]||(a[19]=c=>h(0,0,c))}),s(te,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:a[20]||(a[20]=c=>h(6,0,c)),onMouseup:a[21]||(a[21]=c=>h(0,0,c)),onTouchstart:a[22]||(a[22]=c=>h(6,0,c)),onTouchend:a[23]||(a[23]=c=>h(0,0,c))})]),_:1})]),_:1})):q("",!0)]),_:1},512)],4))}}),Gt=kl(Yt,[["__scopeId","data-v-0b5f466b"]]),Kt=Pe({...Al({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ht=Ge()({name:"VRadio",props:Kt(),setup(e,k){let{slots:t}=k;return Je(()=>s(rl,he(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),Xt=Pe({height:{type:[Number,String],default:"auto"},...Xl(),...sl(Ol(),["multiple"]),trueIcon:{type:el,default:"$radioOn"},falseIcon:{type:el,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Jt=Ge()({name:"VRadioGroup",inheritAttrs:!1,props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,k){let{attrs:t,slots:V}=k;const D=Vl(),p=ce(()=>e.id||`radio-group-${D}`),C=$e(e,"modelValue");return Je(()=>{const[x,S]=Cl(t),O=Ye.filterProps(e),g=rl.filterProps(e),l=V.label?V.label({label:e.label,props:{for:p.value}}):e.label;return s(Ye,he({class:["v-radio-group",e.class],style:e.style},x,O,{modelValue:C.value,"onUpdate:modelValue":m=>C.value=m,id:p.value}),{...V,default:m=>{let{id:o,messagesId:E,isDisabled:v,isReadonly:T}=m;return s(B,null,[l&&s(Jl,{id:o.value},{default:()=>[l]}),s(Ml,he(g,{id:o.value,"aria-describedby":E.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:v.value,readonly:T.value,"aria-labelledby":l?o.value:void 0,multiple:!1},S,{modelValue:C.value,"onUpdate:modelValue":u=>C.value=u}),V)])}})}),{}}}),ul=be({__name:"FormField",props:ne({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:k}){const t=e,{admin:V=!1,disabled:D=!1,persistentHint:p=!1,required:C=!1}=t,x=A(""),S=Ie(e,"modelValue"),O=k,g=Xe(t,O,void 0,void 0,"field"),l=A(Ve(g.value)),m=A({maxlength:u=>!t.maxLength||u.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${u.length})`,minlength:u=>!t.minLength||u.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${u.length})`,required:u=>!t.required||!!u.replace(/\s/g,"")||"Required field."}),o=A(!1),E=A([]),v=A("");try{const u=JSON.parse(S.value);Array.isArray(u)?E.value=u:typeof u=="boolean"?o.value=u:v.value=S.value}catch{o.value=!1,E.value=[],v.value=S.value}ae(o,()=>{S.value=JSON.stringify(o.value),O("input"),O("change")}),ae(E,()=>{S.value=JSON.stringify(E.value),O("input"),O("change")},{deep:!0}),ae(v,()=>{S.value=v.value,O("input"),O("change")}),ae(g.value,()=>{l.value.Type!==g.value.Type?(l.value=Ve(g.value),o.value=!1,E.value=[],v.value=""):l.value=Ve(g.value)});const T=(u=void 0)=>{O("change",u)};return(u,n)=>{var b;return l.value.Type===f(de).TEXT?(r(),I(Ce,{key:0,modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=i=>v.value=i),name:u.name||"",hint:l.value.Hint,label:`${l.value.Label}${f(C)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:T,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(de).DATE?(r(),I(Ce,{key:1,modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=i=>v.value=i),type:"date",name:u.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:T,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(de).NUMBER?(r(),I(Ce,{key:2,modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=i=>v.value=i),type:"number",name:u.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:T,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(de).TEXTAREA?(r(),I(jl,{key:3,modelValue:v.value,"onUpdate:modelValue":n[3]||(n[3]=i=>v.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:T,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(de).CHECKBOX?(r(),N(B,{key:4},[l.value.Multiple?(r(!0),N(B,{key:0},oe(l.value.Values,i=>(r(),I(ke,{key:i.ID,modelValue:E.value,"onUpdate:modelValue":n[4]||(n[4]=R=>E.value=R),name:u.name||"",hint:l.value.Hint,label:i.Title,value:i.Value,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,rules:[m.value.required],onChange:T},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(r(),I(ke,{key:1,modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=i=>o.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,required:f(C),rules:[i=>!f(C)||!!i||"You must tick to continue!"],onChange:T},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===f(de).SELECT?(r(),N(B,{key:5},[!l.value.Autofill&&l.value.Multiple?(r(),I(Be,{key:0,modelValue:E.value,"onUpdate:modelValue":n[6]||(n[6]=i=>E.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(r(),I(nl,{key:1,modelValue:E.value,"onUpdate:modelValue":n[7]||(n[7]=i=>E.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(r(),I(nl,{key:3,modelValue:v.value,"onUpdate:modelValue":n[9]||(n[9]=i=>v.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):q("",!0):(r(),I(Be,{key:2,modelValue:v.value,"onUpdate:modelValue":n[8]||(n[8]=i=>v.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(D)||!1,"persistent-hint":f(p)||!1,"error-messages":x.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===f(de).RADIO?(r(),I(Jt,{key:6,modelValue:v.value,"onUpdate:modelValue":n[10]||(n[10]=i=>v.value=i),name:u.name||"",hint:l.value.Hint,label:l.value.Label,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,rules:[m.value.required],onChange:T},{default:d(()=>[(r(!0),N(B,null,oe(l.value.Values,i=>(r(),I(Ht,{key:i.Value,label:i.Title,value:i.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(de).ACCOMMODATION?(r(),I(Pt,{key:7,modelValue:E.value,"onUpdate:modelValue":n[11]||(n[11]=i=>E.value=i),name:u.name,admin:f(V),convention:u.convention,"registration-group":u.registrationGroup,data:u.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,required:f(C),onChange:T},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===f(de).AGE?(r(),I(Ft,{key:8,modelValue:v.value,"onUpdate:modelValue":n[12]||(n[12]=i=>v.value=i),name:u.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,onChange:T},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===f(de).BADGE_IMAGE?(r(),I(Gt,{key:9,modelValue:v.value,"onUpdate:modelValue":n[13]||(n[13]=i=>v.value=i),name:u.name,registration:(b=u.registrationGroup)==null?void 0:b.Registration,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,onChange:T},null,8,["modelValue","name","registration","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===f(de).EXTRAS?(r(),I(vt,{key:10,modelValue:v.value,"onUpdate:modelValue":n[14]||(n[14]=i=>v.value=i),admin:f(V),convention:u.convention,name:u.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,required:f(C),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===f(de).INTERESTS?(r(),I(ft,{key:11,modelValue:v.value,"onUpdate:modelValue":n[15]||(n[15]=i=>v.value=i),admin:f(V),convention:u.convention,name:u.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,required:f(C),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===f(de).TICKET?(r(),I(ht,{key:12,modelValue:v.value,"onUpdate:modelValue":n[16]||(n[16]=i=>v.value=i),admin:f(V),convention:u.convention,name:u.name,"registration-group":u.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(D)||!1,"persistent-hint":f(p),"error-messages":x.value,required:f(C),onChange:T},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):q("",!0)}}}),Wt={key:0,class:"my-2 text-white text-center"},jt={key:1,class:"admin-header my-2 text-white text-center"},zt=["innerHTML"],Qt=["innerHTML"],Ca=be({__name:"FormRenderer",props:ne({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ne(["close"],["update:modelValue"]),setup(e,{emit:k}){const t=k,V=Ie(e,"modelValue");Me(V.value.Sections),V.value.Sections.forEach(L=>{L.Fields&&Me(L.Fields)});const D=A(),p=et(),C=He(),x=A(!1),S=A(!1),O=A(!1),g=A(!1),l=A(!1),m=A(!1),o=A(!1),E=A(!1),v=A(!1),T=A(!1),u=A(!1),n=A((()=>{if(e.data!==void 0){const y=Ve(e.data);return V.value.Sections.forEach(M=>{M.Fields&&M.Fields.forEach($=>{const F=e.data.Data.find(h=>h.SectionFieldUUID===$.SectionFieldUUID&&h.SectionFieldUUID==$.SectionFieldUUID);if(F)$.Value=F.Data;else{const h={ID:0,SubmissionDataUUID:qe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:M.ID,SectionUUID:M.SectionUUID,SectionFieldID:$.ID,SectionFieldUUID:$.SectionFieldUUID,Data:$.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};y.Data.push(h),$.Value=""}})}),y}const L={ID:0,SubmissionUUID:qe(),FormID:V.value.ID,FormUUID:V.value.FormUUID,UserID:(p==null?void 0:p.ID)||0,UserUUID:(p==null?void 0:p.UserUUID)||"",Data:[],Status:El.SUBMISSION_STATUS_OPEN};return L.Data=V.value.Sections.map(y=>y.Fields?y.Fields.map(M=>({ID:0,SubmissionDataUUID:qe(),SubmissionID:L.ID,SubmissionUUID:L.SubmissionUUID,SectionID:y.ID,SectionUUID:y.SectionUUID,SectionFieldID:M.ID,SectionFieldUUID:M.SectionFieldUUID,Data:""})):[]).flat(),L})()),b=(L,y,M)=>{const $=n.value.Data.find(F=>F.SectionUUID===L&&F.SectionFieldUUID===y);$&&($.Data=M)},i=(L,y,M,$,F)=>L&&L.Type===me.FORM_TYPE_REGISTRATION?y?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:$?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:F?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":L&&L.Type===me.FORM_TYPE_ACCOMMODATION?M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:$?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:F?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":L&&L.Type===me.FORM_TYPE_DEALER?$?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:F?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":L&&L.Type===me.FORM_TYPE_BADGE?F?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(L&&L.Type===me.FORM_TYPE_ADDITIONAL,"/"),R=({callback:L})=>{C.getRegistrationByConvention(e.convention.ConventionUUID).then(y=>{L&&L("Loading"),C.getAvailableConventionForms(e.convention.ConventionUUID).then(M=>{y.Submissions.forEach((U,a)=>{U.Form||(y.Submissions[a].Form=M.find(c=>c.FormUUID===U.FormUUID))});const $=y.Submissions.find(U=>U.FormUUID===n.value.FormUUID),F=y.Submissions.find(U=>{var a;return((a=U.Form)==null?void 0:a.Type)===me.FORM_TYPE_ACCOMMODATION}),h=y.Submissions.find(U=>{var a;return((a=U.Form)==null?void 0:a.Type)===me.FORM_TYPE_ADDITIONAL}),J=y.Submissions.find(U=>{var a;return((a=U.Form)==null?void 0:a.Type)===me.FORM_TYPE_DEALER}),ue=y.Submissions.find(U=>{var a;return((a=U.Form)==null?void 0:a.Type)===me.FORM_TYPE_BADGE}),ve=i($==null?void 0:$.Form,F==null?void 0:F.Form,J==null?void 0:J.Form,ue==null?void 0:ue.Form,h==null?void 0:h.Form);ll.push(ve)})})},G=({callback:L})=>{var y;(y=D.value)==null||y.validate().then(M=>{M.valid?C.saveSubmission(n.value).then($=>{$?setTimeout(()=>{_($,L,1)},1e3):L&&L("Failed to process request")}).catch(()=>{L&&L("Failed to process request")}):L&&L("Errors in form detected, please review and try again.")})},_=(L,y,M=1)=>{C.checkSubmission(L).then($=>{if($)if($.Ready&&$.Submission){if(x.value=!1,n.value=$.Submission,y&&y("Saved"),e.admin)t("close");else if($.Forms&&$.Forms.length>0){const F=$.Forms.find(a=>a.FormUUID===n.value.FormUUID),h=$.Forms.find(a=>a.Type===me.FORM_TYPE_ACCOMMODATION),J=$.Forms.find(a=>a.Type===me.FORM_TYPE_DEALER),ue=$.Forms.find(a=>a.Type===me.FORM_TYPE_BADGE),ve=$.Forms.find(a=>a.Type===me.FORM_TYPE_ADDITIONAL),U=i(F,h,J,ue,ve);ll.push(U)}}else{if(M>5&&(x.value=!0),M>10&&(S.value=!0),M>20&&(O.value=!0),M>30&&(g.value=!0),M>40&&(l.value=!0),M>50&&(m.value=!0),M>60&&(o.value=!0),M>70&&(E.value=!0),M>80&&(v.value=!0),M>90&&(T.value=!0),M>100&&(u.value=!0),M>200){y&&(x.value=!1,S.value=!1,O.value=!1,g.value=!1,l.value=!1,m.value=!1,o.value=!1,E.value=!1,v.value=!1,T.value=!1,u.value=!1,y("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{_(L,y,M+1)},M<20?1e3*M:2e4)}else y&&(x.value=!1,S.value=!1,O.value=!1,g.value=!1,l.value=!1,m.value=!1,o.value=!1,E.value=!1,v.value=!1,T.value=!1,u.value=!1,y("A problem was encountered during saving, please check form and try again."))}).catch(()=>{y&&(x.value=!1,S.value=!1,O.value=!1,g.value=!1,l.value=!1,m.value=!1,o.value=!1,E.value=!1,v.value=!1,T.value=!1,u.value=!1,y("A problem was encountered during saving, please check form and try again."))})};return(L,y)=>{const M=Sl("router-link");return r(),I(_l,null,{default:d(()=>[s(vl,{ref_key:"formValidator",ref:D,autocomplete:"off",onSubmit:y[1]||(y[1]=il(()=>{},["prevent"]))},{default:d(()=>[V.value.Heading?(r(),N("h1",Wt,Q(V.value.Heading),1)):q("",!0),L.admin?(r(),N("h2",jt," (Admin Mode) ")):q("",!0),V.value.Description?(r(),N("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:V.value.Description},null,8,zt)):q("",!0),(r(!0),N(B,null,oe(V.value.Sections,$=>(r(),I(lt,{key:`section_${V.value.ID}.${$.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:d(()=>[$.Heading?(r(),I(tt,{key:0},{default:d(()=>[K(Q($.Heading),1)]),_:2},1024)):q("",!0),$.Description?(r(),I(at,{key:1,class:"text-wrap"},{default:d(()=>[X("div",{innerHTML:$.Description},null,8,Qt)]),_:2},1024)):q("",!0),$.Fields?(r(),I(nt,{key:2},{default:d(()=>[(r(!0),N(B,null,oe($.Fields,F=>(r(),N(B,{key:`field_${V.value.ID}.${$.ID}.${F.ID}`},[F.Field?(r(),I(j,{key:0},{default:d(()=>[s(Y,null,{default:d(()=>[L.editable?(r(),I(ul,{key:0,name:F.SectionFieldUUID,field:F.Field,modelValue:F.Value,"onUpdate:modelValue":h=>F.Value=h,admin:L.admin,convention:L.convention,"registration-group":L.registrationGroup,required:F.Required,"min-length":F.MinLength,"max-length":F.MaxLength,"persistent-hint":!0,onChange:h=>b($.SectionUUID,F.SectionFieldUUID,F.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(r(),I(ul,{key:1,name:F.SectionFieldUUID,field:F.Field,modelValue:F.Value,"onUpdate:modelValue":h=>F.Value=h,admin:L.admin,convention:L.convention,"registration-group":L.registrationGroup,required:F.Required,"min-length":F.MinLength,"max-length":F.MaxLength,"persistent-hint":!0,disabled:"",onChange:h=>b($.SectionUUID,F.SectionFieldUUID,F.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)):q("",!0)]),_:2},1024))),128)),L.preview?q("",!0):(r(),N(B,{key:3},[s(j,null,{default:d(()=>[L.admin?(r(),I(Y,{key:1,class:"text-right"},{default:d(()=>[s(te,{color:"red",onClick:y[0]||(y[0]=$=>t("close"))},{default:d(()=>[K("Cancel")]),_:1})]),_:1})):(r(),I(Y,{key:0,class:"text-right"},{default:d(()=>[s(M,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:d(()=>[s(te,{color:"red"},{default:d(()=>[K("Close")]),_:1})]),_:1})]),_:1})),L.admin||L.editable?(r(),I(Y,{key:2,class:"text-left"},{default:d(()=>[s(tl,{onClick:G,type:"submit"})]),_:1})):(r(),I(Y,{key:3,class:"text-left"},{default:d(()=>[s(tl,{onClick:R,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),x.value?(r(),I(j,{key:0},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):q("",!0),S.value?(r(),I(j,{key:1},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):q("",!0),O.value?(r(),I(j,{key:2},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):q("",!0),g.value?(r(),I(j,{key:3},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Reticulating splines ")]),_:1})]),_:1})):q("",!0),l.value?(r(),I(j,{key:4},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):q("",!0),m.value?(r(),I(j,{key:5},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):q("",!0),o.value?(r(),I(j,{key:6},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):q("",!0),E.value?(r(),I(j,{key:7},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):q("",!0),v.value?(r(),I(j,{key:8},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):q("",!0),T.value?(r(),I(j,{key:9},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):q("",!0),u.value?(r(),I(j,{key:10},{default:d(()=>[s(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:d(()=>[K(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):q("",!0)],64))]),_:1},512)]),_:1})}}});export{Ua as F,cl as T,nl as V,ul as _,ka as a,Da as b,de as c,Ca as d,Va as e,ut as f,Ta as m,Me as s,it as u};
