import{p as Pe,an as We,n as Oe,ae as ol,r as E,s as Ie,u as be,e as _,w as P,E as De,v as u,H as T,x as j,N as te,aA as il,ah as sl,y as rl,k as dl,f as cl,j as vl,ax as el,aa as Xe,ad as ml,aB as fl,ay as pl,m as hl,I as me,a0 as z,a1 as fe,a4 as Re,K as p,S as A,U as ve,O as G,M as b,Z as X,L as S,Q as m,R,ar as ze,ac as Je,a as gl,a2 as xe,P as Vl,$ as Ul}from"./index-66519961.js";import{V as ce,u as _e}from"./VCheckbox-d720999d.js";import{s as we}from"./index-71069b21.js";import{f as yl,V as ie,a as ee,c as ll,d as Ae,e as Ye}from"./VList-4fa5773e.js";import{a as oe,V as q}from"./VRow-10269350.js";import{m as Il,u as bl,a as Dl,b as Cl,V as qe}from"./VSelect-ae0a651e.js";import{d as kl,u as Tl,e as Le,T as Sl,s as je}from"./filter-f5fa69aa.js";import{C as El,a as $e,l as Ce,G as Al,V as ge,n as xl}from"./VContainer-f7530e18.js";import{k as wl,l as Nl,j as al,V as Ve,m as tl,e as Pl,u as Ol,f as Ne,g as Rl,h as $l,i as Fl,n as Ml}from"./VTextField-88275153.js";import{m as Bl,I as Ll}from"./index-c8542385.js";import{V as Hl,m as ql,a as nl,b as _l,c as Gl}from"./VCheckboxBtn-9cf26c16.js";import{a as Kl,_ as Xl}from"./VChip-5872c4cf.js";import{G as zl}from"./userData-36b22fbb.js";import{v as He}from"./v4-a960c1f4.js";import{V as Jl}from"./VForm-baadde71.js";const Ze=(e,I,s)=>{if(s>=e.length){let k=s-e.length+1;for(;k--;)e.push(void 0)}e.splice(s,0,e.splice(I,1)[0])};var K=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(K||{});const xa=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function Yl(e,I,s){if(I==null)return e;if(Array.isArray(I))throw new Error("Multiple matches is not implemented");return typeof I=="number"&&~I?u(T,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,I)]),u("span",{class:"v-autocomplete__mask"},[e.substr(I,s)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(I+s)])]):e}const jl=Pe({autoSelectFirst:{type:[Boolean,String]},search:String,...kl({filterKeys:["title"]}),...Il(),...We(wl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Bl({transition:!1})},"VAutocomplete"),Qe=Oe()({name:"VAutocomplete",props:jl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:s}=I;const{t:k}=ol(),U=E(),g=Ie(!1),C=Ie(!0),h=E(!1),i=E(),y=be(e,"menu"),l=_({get:()=>y.value,set:V=>{var N;y.value&&!V&&((N=i.value)!=null&&N.Î¨openChildren)||(y.value=V)}}),t=Ie(-1),D=_(()=>{var V;return(V=U.value)==null?void 0:V.color}),{items:r,transformIn:c,transformOut:d}=yl(e),{textColorClasses:n,textColorStyles:o}=El(D),a=be(e,"search",""),v=be(e,"modelValue",[],V=>c(V===null?[null]:sl(V)),V=>{const N=d(V);return e.multiple?N:N[0]??null}),f=Nl(),{filteredItems:$,getMatches:ne}=Tl(e,r,()=>C.value?"":a.value),L=_(()=>v.value.map(V=>r.value.find(N=>e.valueComparator(N.value,V.value))||V)),Z=_(()=>e.hideSelected?$.value.filter(V=>!L.value.some(N=>N.value===V.value)):$.value),le=_(()=>L.value.map(V=>V.props.value)),Q=_(()=>L.value[t.value]),x=_(()=>{var N;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((N=Z.value[0])==null?void 0:N.title))&&Z.value.length>0&&!C.value&&!h.value}),M=_(()=>e.hideNoData&&!r.value.length||e.readonly||(f==null?void 0:f.isReadonly.value)),F=E(),{onListScroll:W,onListKeydown:pe}=bl(F,U);function Ue(V){e.openOnClear&&(l.value=!0),a.value=""}function ye(){M.value||(l.value=!0)}function ae(V){M.value||(g.value&&(V.preventDefault(),V.stopPropagation()),l.value=!l.value)}function se(V){var he,w,H;if(e.readonly||f!=null&&f.isReadonly.value)return;const N=U.value.selectionStart,B=le.value.length;if((t.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(l.value=!0),["Escape"].includes(V.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(V.key)&&(x.value&&["Enter","Tab"].includes(V.key)&&ue($.value[0]),C.value=!0),V.key==="ArrowDown"&&x.value&&((he=F.value)==null||he.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(t.value<0){V.key==="Backspace"&&!a.value&&(t.value=B-1);return}const O=t.value;Q.value&&ue(Q.value),t.value=O>=B-1?B-2:O}if(V.key==="ArrowLeft"){if(t.value<0&&N>0)return;const O=t.value>-1?t.value-1:B-1;L.value[O]?t.value=O:(t.value=-1,U.value.setSelectionRange((w=a.value)==null?void 0:w.length,(H=a.value)==null?void 0:H.length))}if(V.key==="ArrowRight"){if(t.value<0)return;const O=t.value+1;L.value[O]?t.value=O:(t.value=-1,U.value.setSelectionRange(0,0))}}}function ke(V){a.value=V.target.value}function Fe(){var V;g.value&&(C.value=!0,(V=U.value)==null||V.focus())}function Me(V){g.value=!0,setTimeout(()=>{h.value=!0})}function Be(V){h.value=!1}function Te(V){(V==null||V===""&&!e.multiple)&&(v.value=[])}const re=Ie(!1);function ue(V){if(e.multiple){const N=le.value.findIndex(B=>e.valueComparator(B,V.value));if(N===-1)v.value=[...v.value,V];else{const B=[...v.value];B.splice(N,1),v.value=B}}else v.value=[V],re.value=!0,a.value=V.title,l.value=!1,C.value=!0,De(()=>re.value=!1)}return P(g,(V,N)=>{var B;V!==N&&(V?(re.value=!0,a.value=e.multiple?"":String(((B=L.value.at(-1))==null?void 0:B.props.title)??""),C.value=!0,De(()=>re.value=!1)):(!e.multiple&&!a.value?v.value=[]:x.value&&!h.value&&!L.value.some(he=>{let{value:w}=he;return w===Z.value[0].value})&&ue(Z.value[0]),l.value=!1,a.value="",t.value=-1))}),P(a,V=>{!g.value||re.value||(V&&(l.value=!0),C.value=!V)}),$e(()=>{const V=!!(e.chips||s.chip),N=!!(!e.hideNoData||Z.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),B=v.value.length>0,[he]=Ve.filterProps(e);return u(Ve,j({ref:U},he,{modelValue:a.value,"onUpdate:modelValue":Te,focused:g.value,"onUpdate:focused":w=>g.value=w,validationValue:v.externalValue,dirty:B,onInput:ke,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!s.selection,"v-autocomplete--selecting-index":t.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:B?void 0:e.placeholder,"onClick:clear":Ue,"onMousedown:control":ye,onKeydown:se}),{...s,default:()=>u(T,null,[u(Dl,j({ref:i,modelValue:l.value,"onUpdate:modelValue":w=>l.value=w,activator:"parent",contentClass:"v-autocomplete__content",disabled:M.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Fe},e.menuProps),{default:()=>[N&&u(ie,{ref:F,selected:le.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:w=>w.preventDefault(),onKeydown:pe,onFocusin:Me,onFocusout:Be,onScrollPassive:W,tabindex:"-1"},{default:()=>{var w,H,O;return[(w=s["prepend-item"])==null?void 0:w.call(s),!Z.value.length&&!e.hideNoData&&(((H=s["no-data"])==null?void 0:H.call(s))??u(ee,{title:k(e.noDataText)},null)),u(Cl,{renderless:!0,items:Z.value},{default:de=>{var Ke;let{item:J,index:Y,itemRef:ul}=de;const Ge=j(J.props,{ref:ul,key:Y,active:x.value&&Y===0?!0:void 0,onClick:()=>ue(J)});return((Ke=s.item)==null?void 0:Ke.call(s,{item:J,index:Y,props:Ge}))??u(ee,Ge,{prepend:Se=>{let{isSelected:Ee}=Se;return u(T,null,[e.multiple&&!e.hideSelected?u(Hl,{key:J.value,modelValue:Ee,ripple:!1,tabindex:"-1"},null):void 0,J.props.prependIcon&&u(Ce,{icon:J.props.prependIcon},null)])},title:()=>{var Se,Ee;return C.value?J.title:Yl(J.title,(Se=ne(J))==null?void 0:Se.title,((Ee=a.value)==null?void 0:Ee.length)??0)}})}}),(O=s["append-item"])==null?void 0:O.call(s)]}})]}),L.value.map((w,H)=>{var J;function O(Y){Y.stopPropagation(),Y.preventDefault(),ue(w)}const de={"onClick:close":O,onMousedown(Y){Y.preventDefault(),Y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:w.value,class:["v-autocomplete__selection",H===t.value&&["v-autocomplete__selection--selected",n.value]],style:H===t.value?o.value:{}},[V?s.chip?u(Al,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:w.title}}},{default:()=>{var Y;return[(Y=s.chip)==null?void 0:Y.call(s,{item:w,index:H,props:de})]}}):u(Kl,j({key:"chip",closable:e.closableChips,size:"small",text:w.title},de),null):((J=s.selection)==null?void 0:J.call(s,{item:w,index:H}))??u("span",{class:"v-autocomplete__selection-text"},[w.title,e.multiple&&H<L.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[te(",")])])])})]),"append-inner":function(){var de;for(var w=arguments.length,H=new Array(w),O=0;O<w;O++)H[O]=arguments[O];return u(T,null,[(de=s["append-inner"])==null?void 0:de.call(s,...H),e.menuIcon?u(Ce,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:ae,onClick:il},null):void 0])}})}),al({isFocused:g,isPristine:C,menu:l,search:a,filteredItems:$,select:ue},U)}});const Zl=Pe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...tl(),...Pl()},"VTextarea"),Ql=Oe()({name:"VTextarea",directives:{Intersect:Ll},inheritAttrs:!1,props:Zl(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,I){let{attrs:s,emit:k,slots:U}=I;const g=be(e,"modelValue"),{isFocused:C,focus:h,blur:i}=Ol(e),y=_(()=>typeof e.counterValue=="function"?e.counterValue(g.value):(g.value||"").toString().length),l=_(()=>{if(s.maxlength)return s.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function t(x,M){var F,W;!e.autofocus||!x||(W=(F=M[0].target)==null?void 0:F.focus)==null||W.call(F)}const D=E(),r=E(),c=Ie(""),d=E(),n=_(()=>e.persistentPlaceholder||C.value||e.active);function o(){var x;d.value!==document.activeElement&&((x=d.value)==null||x.focus()),C.value||h()}function a(x){o(),k("click:control",x)}function v(x){k("mousedown:control",x)}function f(x){x.stopPropagation(),o(),De(()=>{g.value="",pl(e["onClick:clear"],x)})}function $(x){var F;const M=x.target;if(g.value=M.value,(F=e.modelModifiers)!=null&&F.trim){const W=[M.selectionStart,M.selectionEnd];De(()=>{M.selectionStart=W[0],M.selectionEnd=W[1]})}}const ne=E(),L=E(+e.rows),Z=_(()=>["plain","underlined"].includes(e.variant));rl(()=>{e.autoGrow||(L.value=+e.rows)});function le(){e.autoGrow&&De(()=>{if(!ne.value||!r.value)return;const x=getComputedStyle(ne.value),M=getComputedStyle(r.value.$el),F=parseFloat(x.getPropertyValue("--v-field-padding-top"))+parseFloat(x.getPropertyValue("--v-input-padding-top"))+parseFloat(x.getPropertyValue("--v-field-padding-bottom")),W=ne.value.scrollHeight,pe=parseFloat(x.lineHeight),Ue=Math.max(parseFloat(e.rows)*pe+F,parseFloat(M.getPropertyValue("--v-input-control-height"))),ye=parseFloat(e.maxRows)*pe+F||1/0,ae=hl(W??0,Ue,ye);L.value=Math.floor((ae-F)/pe),c.value=vl(ae)})}dl(le),P(g,le),P(()=>e.rows,le),P(()=>e.maxRows,le),P(()=>e.density,le);let Q;return P(ne,x=>{x?(Q=new ResizeObserver(le),Q.observe(ne.value)):Q==null||Q.disconnect()}),cl(()=>{Q==null||Q.disconnect()}),$e(()=>{const x=!!(U.counter||e.counter||e.counterValue),M=!!(x||U.details),[F,W]=el(s),[{modelValue:pe,...Ue}]=Ne.filterProps(e),[ye]=Rl(e);return u(Ne,j({ref:D,modelValue:g.value,"onUpdate:modelValue":ae=>g.value=ae,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":Z.value},e.class],style:e.style},F,Ue,{centerAffix:L.value===1&&!Z.value,focused:C.value}),{...U,default:ae=>{let{isDisabled:se,isDirty:ke,isReadonly:Fe,isValid:Me}=ae;return u($l,j({ref:r,style:{"--v-textarea-control-height":c.value},onClick:a,onMousedown:v,"onClick:clear":f,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ye,{active:n.value||ke.value,centerAffix:L.value===1&&!Z.value,dirty:ke.value||e.dirty,disabled:se.value,focused:C.value,error:Me.value===!1}),{...U,default:Be=>{let{props:{class:Te,...re}}=Be;return u(T,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),Xe(u("textarea",j({ref:d,class:Te,value:g.value,onInput:$,autofocus:e.autofocus,readonly:Fe.value,disabled:se.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:o,onBlur:i},re,W),null),[[ml("intersect"),{handler:t},null,{once:!0}]]),e.autoGrow&&Xe(u("textarea",{class:[Te,"v-textarea__sizer"],"onUpdate:modelValue":ue=>g.value=ue,ref:ne,readonly:!0,"aria-hidden":"true"},null),[[fl,g.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:M?ae=>{var se;return u(T,null,[(se=U.details)==null?void 0:se.call(U,ae),x&&u(T,null,[u("span",null,null),u(Fl,{active:e.persistentCounter||C.value,value:y.value,max:l.value},U.counter)])])}:void 0})}),al({},D,r,d)}}),Wl=me({__name:"Extras",props:z({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:z(["change"],["update:modelValue"]),setup(e,{emit:I}){const s=e,{convention:k,disabled:U=!1}=s,g=fe(e,"modelValue"),C=Re.getInstance(),h=E({});try{h.value=JSON.parse(g.value)}catch{}const i=E([]),y=E([]);P(s,()=>{t()}),P(h.value,r=>{for(const c in r)if(r[c].checked){const d=i.value.map(n=>{var o;return(o=n.Options)==null?void 0:o.find(a=>a.OptionUUID===c)});if(d&&d.length>0)try{const n=d[0];r[c].choiceId===""&&n&&n.Choices&&n.Choices.length>0&&(r[c].choiceId=n.Choices[0].TagUUID),r[c].price=n==null?void 0:n.Price}catch{}}else r[c].choiceId="",r[c].price=0;g.value=JSON.stringify(r),D()});const l=_({get:()=>i.value.map(r=>r.ExtraUUID),set:()=>{}}),t=()=>{var c;const r=((c=s.items.find(d=>d.Title==="SelectedExtras"))==null?void 0:c.Value)||"[]";try{const d=JSON.parse(r);i.value=y.value.filter(n=>d.find(o=>o===n.ExtraUUID))||[],l.value=[...i.value.map(n=>n.ExtraUUID)],i.value.forEach(n=>{var o;(o=n.Options)==null||o.forEach(a=>{h.value[a.OptionUUID]||(h.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in k&&(C==null||C.getConventionExtras(k.ConventionUUID).then(r=>{r&&(y.value=r,t())}));const D=(r=void 0)=>{setTimeout(()=>I("change",r),100)};return(r,c)=>(p(),A(T,null,[ve("h4",null,G(r.label),1),u(ie,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=d=>l.value=d)},{default:b(()=>[(p(!0),A(T,null,X(i.value,d=>(p(),S(ll,{key:d.ExtraUUID,value:d.ExtraUUID},{activator:b(({props:n})=>[u(ee,j({"prepend-icon":"mdi:mdi-group","append-icon":"",title:d.Name},n),null,16,["title"])]),default:b(()=>[d.Options?(p(!0),A(T,{key:0},X(d.Options,n=>(p(),S(ee,{key:n.OptionUUID},{default:b(()=>[u(oe,null,{default:b(()=>[u(q,{cols:"12",sm:"6"},{default:b(()=>[u(ce,{label:`${n.Name} ${n.Price&&n.Price>0?`(${m(we).currencySymbol}${n.Price})`:""}`,modelValue:h.value[n.OptionUUID].checked,"onUpdate:modelValue":o=>h.value[n.OptionUUID].checked=o,disabled:m(U),"hide-details":"",onChange:D},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n.Choices&&n.Choices.length>1&&h.value[n.OptionUUID].checked?(p(),S(q,{key:0,cols:"12",sm:"6"},{default:b(()=>[u(qe,{items:n.Choices.map(o=>({value:o.TagUUID,title:o.Title})),modelValue:h.value[n.OptionUUID].choiceId,"onUpdate:modelValue":o=>h.value[n.OptionUUID].choiceId=o,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(U),"hide-details":"",onChange:D},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):R("",!0)]),_:2},1024)]),_:2},1024))),128)):R("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ea=me({__name:"Interests",props:z({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:z(["change"],["update:modelValue"]),setup(e,{emit:I}){const s=e,{convention:k,disabled:U=!1}=s,g=fe(e,"modelValue"),C=Re.getInstance(),h=E({});try{h.value=JSON.parse(g.value)}catch{}const i=E([]),y=E([]);P(h.value,r=>{g.value=JSON.stringify(r)});const l=E([]),t=()=>{var c;const r=((c=s.items.find(d=>d.Title==="SelectedInterests"))==null?void 0:c.Value)||"[]";try{const d=JSON.parse(r);i.value=y.value.filter(n=>d.find(o=>o===n.InterestUUID))||[],l.value=[...i.value.map(n=>n.InterestUUID)]}catch{}};"ConventionUUID"in k&&(C==null||C.getConventionInterests(k.ConventionUUID).then(r=>{r&&(y.value=r,t())})),P(s,()=>{t()});const D=(r=void 0)=>{setTimeout(()=>I("change",r),100)};return(r,c)=>(p(),A(T,null,[ve("h4",null,G(r.label),1),u(ie,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=d=>l.value=d)},{default:b(()=>[(p(!0),A(T,null,X(i.value,d=>(p(),S(ee,{key:d.InterestUUID},{default:b(()=>[u(oe,null,{default:b(()=>[u(q,null,{default:b(()=>[u(ce,{label:`${d.Name} ${d.Price&&d.Price>0?`(${m(we).currencySymbol}${d.Price})`:""}`,modelValue:h.value[d.InterestUUID],"onUpdate:modelValue":n=>h.value[d.InterestUUID]=n,disabled:m(U),"hide-details":"",onChange:D},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),la=me({__name:"Tickets",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:z(["change"],["update:modelValue"]),setup(e,{emit:I}){const s=e,{admin:k=!1,convention:U,disabled:g=!1}=s,C=fe(e,"modelValue"),h=Re.getInstance(),i=E({ticket:[],addonsChecked:[],componentsChecked:[]});try{i.value=JSON.parse(C.value)}catch{}const y=E([]),l=E([]);P(i.value,n=>{C.value=JSON.stringify(n)});const t=E([]),D=()=>{var o;const n=((o=s.items.find(a=>a.Title==="SelectedTickets"))==null?void 0:o.Value)||"[]";try{const a=JSON.parse(n);y.value=l.value.filter(v=>v.Type==="TICKET_TYPE_GROUP"&&a.find(f=>f===v.TicketUUID))||[],t.value=[...y.value.filter(v=>v.Type==="TICKET_TYPE_GROUP").map(v=>v.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(k)h==null||h.getConventionTickets(U.ConventionUUID).then(n=>{n&&(l.value=n,D())});else{const n=s.items.find(o=>o.Title==="SelectedTickets");n&&(h==null||h.getFieldTickets(n.FieldUUID).then(o=>{o&&(l.value=o,D())}))}P(s,()=>{D()});const r=n=>{i.value.ticket.length>1&&i.value.ticket.shift(),i.value.componentsChecked=[],d(n)},c=n=>{const o=l.value.find(a=>a.TicketUUID===i.value.ticket[0]);if(o)for(;i.value.componentsChecked.length>o.ComponentsRequired;)i.value.componentsChecked.shift();d(n)},d=(n=void 0)=>{setTimeout(()=>I("change",n),100)};return(n,o)=>(p(),A(T,null,[ve("h4",null,G(n.label),1),u(ie,{opened:t.value,"onUpdate:opened":o[3]||(o[3]=a=>t.value=a)},{default:b(()=>[(p(!0),A(T,null,X(m(Le)(y.value.filter(a=>a.Type===m(Sl).TICKET_TYPE_GROUP)),a=>(p(),A(T,{key:a.TicketUUID},[a.Tickets.length>0?(p(),S(ll,{key:0,value:a.TicketUUID},{activator:b(({props:v})=>[u(ee,j(v,{"prepend-icon":"mdi:mdi-group",title:a.Name}),{default:b(()=>[u(Ae,{title:a.Description},null,8,["title"])]),_:2},1040,["title"])]),default:b(()=>[(p(!0),A(T,null,X(a.Tickets,v=>(p(),S(ee,{key:v.TicketUUID},{default:b(()=>[u(Ae,null,{default:b(()=>[te(G(v.Description),1)]),_:2},1024),u(ce,{modelValue:i.value.ticket,"onUpdate:modelValue":f=>i.value.ticket=f,value:v.TicketUUID,onChange:r,"hide-details":"",disabled:m(g)},{label:b(()=>[u(Ce,{icon:v.RequiresAccommodation?"mdi:mdi-home":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),te(" "+G(`${v.Name} (Â£${v.Price})`),1)]),_:2},1032,["modelValue","onUpdate:modelValue","value","disabled"]),i.value.ticket.length>0&&v.TicketUUID===i.value.ticket[0]?(p(),A(T,{key:0},[v.AddonTickets.length?(p(),S(ie,{key:0},{default:b(()=>[(p(!0),A(T,null,X(m(Le)(v.AddonTickets),f=>(p(),A(T,{key:f==null?void 0:f.TicketUUID},[f?(p(),S(ee,{key:0},{default:b(()=>[u(Ye,null,{default:b(()=>[u(ce,{modelValue:i.value.addonsChecked,"onUpdate:modelValue":o[0]||(o[0]=$=>i.value.addonsChecked=$),value:f.TicketUUID,onChange:o[1]||(o[1]=$=>{i.value.componentsChecked=[],d($)}),"hide-details":"",disabled:m(g)},{label:b(()=>[u(Ce,{icon:"mdi:mdi-home-plus",class:"mx-2"}),te(" "+G(`${f.Name} ${f.Price>0?`(${m(we).currencySymbol}${f.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024),u(Ae,null,{default:b(()=>[te(G(f.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0),v.TicketComponents.length?(p(),S(ie,{key:1},{default:b(()=>[(p(!0),A(T,null,X(m(Le)(v.TicketComponents),f=>(p(),A(T,{key:f==null?void 0:f.TicketUUID},[f?(p(),S(ee,{key:0},{default:b(()=>[u(Ye,null,{default:b(()=>[u(ce,{modelValue:i.value.componentsChecked,"onUpdate:modelValue":o[2]||(o[2]=$=>i.value.componentsChecked=$),value:f.TicketUUID,onChange:c,"hide-details":"",disabled:m(g)},{label:b(()=>[u(Ce,{icon:"mdi:mdi-home-plus",class:"mx-2"}),te(" "+G(`${f.Name} ${f.Price>0?`(${m(we).currencySymbol}${f.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024),u(Ae,null,{default:b(()=>[te(G(f.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0)],64)):R("",!0)]),_:2},1024))),128))]),_:2},1032,["value"])):R("",!0)],64))),128))]),_:1},8,["opened"])],64))}}),aa=ve("strong",null,"Accommodation Options",-1),ta=ve("strong",null,[te("Your Chosen Accommodation"),ve("br"),te("(in order of preference)")],-1),na=me({__name:"Accommodation",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:z(["change","update:items"],["update:modelValue"]),setup(e,{emit:I}){const s=e,{admin:k=!1,convention:U,label:g=""}=s,C=fe(e,"modelValue"),h=_e(s,I,void 0,void 0,"items"),i=Re.getInstance(),y=E([]);P(y,a=>{C.value=JSON.stringify(a)},{deep:!0});const l=E({column:0,id:""});try{const a=JSON.parse(C.value);Array.isArray(a)&&(y.value=a)}catch{}const t=E([]);P(h,()=>{D()});const D=()=>{"ConventionUUID"in U&&(k?i==null||i.getConventionAccommodation(U.ConventionUUID).then(a=>{t.value=a.filter(v=>!!(h!=null&&h.value.find(f=>f.Value===v.AccommodationUUID)))||[]}):h.value.length>0&&(i==null||i.getFieldAccommodation(h.value[0].FieldUUID).then(a=>{t.value=a.filter(v=>!!(h!=null&&h.value.find(f=>f.Value===v.AccommodationUUID)))||[]})))};D();const r=()=>{y.value.includes(l.value.id)||(l.value.column===0&&l.value.id!==""&&y.value.push(l.value.id),o())},c=()=>{const a=y.value.findIndex(v=>v===l.value.id);a>=0&&y.value.splice(a,1)},d=()=>{if(l.value.column!==1)return;const a=y.value.findIndex(v=>v===l.value.id);a<=0||(Ze(y.value,a,a-1),o())},n=()=>{if(l.value.column!==1)return;const a=y.value.findIndex(v=>v===l.value.id);a>=y.value.length-1||(Ze(y.value,a,a+1),o())},o=(a=void 0)=>{setTimeout(()=>I("change",a),100)};return(a,v)=>(p(),A(T,null,[ve("h4",null,G(m(g)),1),u(oe,null,{default:b(()=>[u(q,{cols:"12",md:"5"},{default:b(()=>[aa,u(ie,null,{default:b(()=>[(p(!0),A(T,null,X(t.value,f=>(p(),S(ee,{key:f.AccommodationUUID,title:f.Name,class:ze(l.value.column===0&&l.value.id===f.AccommodationUUID?"bg-blue-accent-3":""),onClick:$=>l.value={column:0,id:f.AccommodationUUID}},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),u(q,{cols:"12",md:"1"},{default:b(()=>[u(oe,{class:"d-md-none"},{default:b(()=>[u(q,{cols:"12"},{default:b(()=>[u(ge,{icon:"mdi:mdi-arrow-down",size:"small",onClick:v[0]||(v[0]=f=>r()),color:"primary"}),te(" Â  "),u(ge,{icon:"mdi:mdi-arrow-up",size:"small",onClick:v[1]||(v[1]=f=>c()),color:"secondary"})]),_:1})]),_:1}),u(oe,{class:"d-none d-md-flex h-100 align-content-center"},{default:b(()=>[u(q,{cols:"12"},{default:b(()=>[u(ge,{icon:"mdi:mdi-arrow-right",size:"small",onClick:v[2]||(v[2]=f=>r()),color:"primary"})]),_:1}),u(q,{cols:"12"},{default:b(()=>[u(ge,{icon:"mdi:mdi-arrow-left",size:"small",onClick:v[3]||(v[3]=f=>c()),color:"secondary"})]),_:1})]),_:1})]),_:1}),u(q,{cols:"10",md:"5"},{default:b(()=>[ta,u(ie,null,{default:b(()=>[(p(!0),A(T,null,X(y.value.map(f=>t.value.find($=>$.AccommodationUUID==f)).filter(f=>f!==void 0),(f,$)=>(p(),A(T,null,[f?(p(),S(ee,{key:f.AccommodationUUID,title:`${$+1}. ${f.Name}`,class:ze(l.value.column===1&&l.value.id===f.AccommodationUUID?"bg-blue-accent-3":""),onClick:ne=>l.value={column:1,id:(f==null?void 0:f.AccommodationUUID)||""}},null,8,["title","class","onClick"])):R("",!0)],64))),256))]),_:1})]),_:1}),u(q,{cols:"2",md:"1",class:"align-center"},{default:b(()=>[u(oe,{class:"h-100 align-content-center"},{default:b(()=>[u(q,{cols:"12"},{default:b(()=>[u(ge,{icon:"mdi:mdi-arrow-up",size:"small",onClick:v[4]||(v[4]=f=>d()),color:"primary"})]),_:1}),u(q,{cols:"12"},{default:b(()=>[u(ge,{icon:"mdi:mdi-arrow-down",size:"small",onClick:v[5]||(v[5]=f=>n()),color:"secondary"})]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),ua=me({__name:"AgeCheck",props:z({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:z(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:I}){const s=e,k=_e(s,I,void 0,void 0,"items"),U=fe(e,"modelValue"),g=E({required:l=>!s.required||!!l||"Required.",min:l=>{var a,v;const t=new Date,D=t.getFullYear(),r=(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),c=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),d=((a=k.value.find(f=>f.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",n=((v=k.value.find(f=>f.Title=="BEFORE_DATE"))==null?void 0:v.Value)||`${D}-${r}-${c}`,o=i(n);return h(l,n,parseInt(d))||`You must be at least ${d} years old by ${o.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),C=()=>(I("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),h=(l,t,D)=>{if(l>=t)return!1;const r=i(l),d=i(t).getTime()-r.getTime(),n=1e3*60*60*24*365.25;return d/n>=D},i=l=>{const[t,D,r]=l.split("-");return new Date(parseInt(t),parseInt(D)-1,parseInt(r))},y=(l=void 0)=>{setTimeout(()=>I("change",l),100)};return(l,t)=>(p(),S(Ve,{modelValue:U.value,"onUpdate:modelValue":t[0]||(t[0]=D=>U.value=D),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:C,onChange:y},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),oa=Pe({...ql({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ia=Oe()({name:"VRadio",props:oa(),setup(e,I){let{slots:s}=I;return $e(()=>u(nl,j(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),s)),{}}});const sa=Pe({height:{type:[Number,String],default:"auto"},...tl(),...We(_l(),["multiple"]),trueIcon:{type:Je,default:"$radioOn"},falseIcon:{type:Je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ra=Oe()({name:"VRadioGroup",inheritAttrs:!1,props:sa(),emits:{"update:modelValue":e=>!0},setup(e,I){let{attrs:s,slots:k}=I;const U=gl(),g=_(()=>e.id||`radio-group-${U}`),C=be(e,"modelValue");return $e(()=>{const[h,i]=el(s),[y,l]=Ne.filterProps(e),[t,D]=nl.filterProps(e),r=k.label?k.label({label:e.label,props:{for:g.value}}):e.label;return u(Ne,j({class:["v-radio-group",e.class],style:e.style},h,y,{modelValue:C.value,"onUpdate:modelValue":c=>C.value=c,id:g.value}),{...k,default:c=>{let{id:d,messagesId:n,isDisabled:o,isReadonly:a}=c;return u(T,null,[r&&u(Ml,{id:d.value},{default:()=>[r]}),u(Gl,j(t,{id:d.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:o.value,readonly:a.value,"aria-labelledby":r?d.value:void 0,multiple:!1},i,{modelValue:C.value,"onUpdate:modelValue":v=>C.value=v}),k)])}})}),{}}}),da=me({__name:"FormField",props:z({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},required:{type:Boolean}},{modelValue:{required:!0}}),emits:z(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:I}){const s=e,{admin:k=!1,disabled:U=!1,persistentHint:g=!1,required:C=!1}=s,h=E(""),i=fe(e,"modelValue"),y=_e(s,I,void 0,void 0,"field"),l=E(xe(y.value)),t=E({maxlength:n=>!s.maxLength||n.length<=s.maxLength||`Maximum length is ${s.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!s.minLength||n.length>=s.minLength||`Minimum length is ${s.minLength} characters. (Current length: ${n.length})`,required:n=>!s.required||!!n||"Required field."}),D=E(!1),r=E([]),c=E("");try{const n=JSON.parse(i.value);Array.isArray(n)?r.value=n:typeof n=="boolean"?D.value=n:c.value=i.value}catch{D.value=!1,r.value=[],c.value=i.value}P(D,()=>{i.value=JSON.stringify(D.value),I("input")}),P(r,()=>{i.value=JSON.stringify(r.value),I("input")},{deep:!0}),P(c,()=>{i.value=c.value,I("input")}),P(y.value,()=>{l.value.Type!==y.value.Type?(l.value=xe(y.value),D.value=!1,r.value=[],c.value=""):l.value=xe(y.value)});const d=(n=void 0)=>{I("change",n)};return(n,o)=>l.value.Type===m(K).TEXT?(p(),S(Ve,{key:0,modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a),hint:l.value.Hint,label:`${l.value.Label}${m(C)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:d},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(K).DATE?(p(),S(Ve,{key:1,modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=a=>c.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:d},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(K).NUMBER?(p(),S(Ve,{key:2,modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=a=>c.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:d},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(K).TEXTAREA?(p(),S(Ql,{key:3,modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:d},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(K).CHECKBOX?(p(),A(T,{key:4},[l.value.Multiple?(p(!0),A(T,{key:0},X(l.value.Values,a=>(p(),S(ce,{key:a.ID,modelValue:r.value,"onUpdate:modelValue":o[4]||(o[4]=v=>r.value=v),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,rules:[t.value.required],onChange:d},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(p(),S(ce,{key:1,modelValue:D.value,"onUpdate:modelValue":o[5]||(o[5]=a=>D.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,required:m(C),rules:[a=>!m(C)||!!a||"You must tick to continue!"],onChange:d},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===m(K).SELECT?(p(),A(T,{key:5},[!l.value.Autofill&&l.value.Multiple?(p(),S(qe,{key:0,modelValue:r.value,"onUpdate:modelValue":o[6]||(o[6]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:d},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(p(),S(Qe,{key:1,modelValue:r.value,"onUpdate:modelValue":o[7]||(o[7]=a=>r.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:d},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(p(),S(Qe,{key:3,modelValue:c.value,"onUpdate:modelValue":o[9]||(o[9]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:d},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):R("",!0):(p(),S(qe,{key:2,modelValue:c.value,"onUpdate:modelValue":o[8]||(o[8]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(U)||!1,"persistent-hint":m(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:d},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===m(K).RADIO?(p(),S(ra,{key:6,modelValue:c.value,"onUpdate:modelValue":o[10]||(o[10]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,rules:[t.value.required],onChange:d},{default:b(()=>[(p(!0),A(T,null,X(l.value.Values,a=>(p(),S(ia,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===m(K).ACCOMMODATION?(p(),S(na,{key:7,modelValue:c.value,"onUpdate:modelValue":o[11]||(o[11]=a=>c.value=a),admin:m(k),convention:n.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:d},null,8,["modelValue","admin","convention","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(K).AGE?(p(),S(ua,{key:8,modelValue:c.value,"onUpdate:modelValue":o[12]||(o[12]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:d},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(K).EXTRAS?(p(),S(Wl,{key:9,modelValue:c.value,"onUpdate:modelValue":o[13]||(o[13]=a=>c.value=a),convention:n.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:d},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(K).INTERESTS?(p(),S(ea,{key:10,modelValue:c.value,"onUpdate:modelValue":o[14]||(o[14]=a=>c.value=a),convention:n.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:d},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===m(K).TICKET?(p(),S(la,{key:11,modelValue:c.value,"onUpdate:modelValue":o[15]||(o[15]=a=>c.value=a),admin:m(k),convention:n.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:m(U)||!1,"persistent-hint":m(g),"error-messages":h.value,onChange:d},null,8,["modelValue","admin","convention","hint","label","name","items","disabled","persistent-hint","error-messages"])):R("",!0)}}),ca={key:0,class:"my-2"},va={key:1,class:"my-2"},ma={key:0,class:"my-2"},fa={key:1,class:"my-2"},wa=me({__name:"FormRenderer",props:z({admin:{type:Boolean,default:!1},convention:{},data:{},editable:{type:Boolean,default:!0},preview:{type:Boolean,default:!1}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const I=fe(e,"modelValue");je(I.value.Sections),I.value.Sections.forEach(i=>{i.Fields&&je(i.Fields)});const s=E(),k=zl(),U=Ul(),g=E((()=>{if(e.data!==void 0){const y=xe(e.data);return I.value.Sections.forEach(l=>{l.Fields&&l.Fields.forEach(t=>{const D=e.data.Data.find(r=>r.SectionFieldUUID===t.SectionFieldUUID&&r.SectionFieldUUID==t.SectionFieldUUID);if(D)t.Value=D.Data;else{const r={ID:0,SubmissionDataUUID:He(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:l.ID,SectionUUID:l.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:t.Value};y.Data.push(r)}})}),y}const i={ID:0,SubmissionUUID:He(),FormID:I.value.ID,FormUUID:I.value.FormUUID,UserID:(k==null?void 0:k.ID)||0,UserUUID:(k==null?void 0:k.UserUUID)||"",Data:[]};return i.Data=I.value.Sections.map(y=>y.Fields?y.Fields.map(l=>({ID:0,SubmissionDataUUID:He(),SubmissionID:i.ID,SubmissionUUID:i.SubmissionUUID,SectionID:y.ID,SectionUUID:y.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value})):[]).flat(),i})()),C=(i,y,l)=>{const t=g.value.Data.find(D=>D.SectionUUID===i&&D.SectionFieldUUID===y);t&&(t.Data=l)},h=({callback:i})=>{var y;(y=s.value)==null||y.validate().then(l=>{l.valid?U.saveSubmission(g.value).then(t=>{t?(g.value=t,i&&i("Saved")):i&&i("Failed to process request")}).catch(()=>{i&&i("Failed to process request")}):i&&i("Errors in form detected, please review and try again.")})};return(i,y)=>(p(),S(xl,null,{default:b(()=>[u(Jl,{ref_key:"formValidator",ref:s,onSubmit:y[0]||(y[0]=Vl(()=>{},["prevent"]))},{default:b(()=>[I.value.Heading?(p(),A("h2",ca,G(I.value.Heading),1)):R("",!0),I.value.Description?(p(),A("p",va,G(I.value.Description),1)):R("",!0),(p(!0),A(T,null,X(I.value.Sections,l=>(p(),A(T,{key:`section_${I.value.ID}.${l.ID}`},[l.Heading?(p(),A("h3",ma,G(l.Heading),1)):R("",!0),l.Description?(p(),A("p",fa,G(l.Description),1)):R("",!0),l.Fields?(p(!0),A(T,{key:2},X(l.Fields,t=>(p(),A(T,{key:`field_${I.value.ID}.${l.ID}.${t.ID}`},[t.Field?(p(),S(oe,{key:0},{default:b(()=>[u(q,null,{default:b(()=>[u(da,{field:t.Field,modelValue:t.Value,"onUpdate:modelValue":D=>t.Value=D,admin:i.admin,convention:i.convention,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:!i.editable,onChange:D=>C(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","required","min-length","max-length","disabled","onChange"])]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128)):R("",!0)],64))),128)),i.editable&&!i.preview?(p(),S(oe,{key:2},{default:b(()=>[u(q,null,{default:b(()=>[u(Xl,{onClick:h,type:"submit"})]),_:1})]),_:1})):R("",!0)]),_:1},512)]),_:1}))}});export{xa as F,Qe as V,da as _,Ql as a,K as b,wa as c};
