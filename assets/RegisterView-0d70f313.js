import{c as D}from"./FormRenderer.vue_vue_type_script_setup_true_lang-75181e2e.js";import{I as d,a4 as R,a0 as h,r as m,K as G,L as _,Q as T,$ as x,Y as E}from"./index-9a653097.js";import{G as V}from"./userData-1ef459f2.js";import{p as b}from"./performLoginCheck-3a17a92c.js";import"./VCheckbox-e12d298b.js";import"./VCheckboxBtn-ab98a74e.js";import"./VContainer-de4130cf.js";import"./VTextField-822571df.js";import"./index-dda8f7ca.js";import"./index-71069b21.js";import"./VList-f300f552.js";import"./VAvatar-5aa42028.js";import"./VRow-f1c85df4.js";import"./VSelect-75224b0a.js";import"./VChip-78a0370f.js";import"./scopeId-525b62ca.js";import"./filter-2a2bfbf5.js";import"./copyToClipboard-54de8978.js";import"./v4-a960c1f4.js";import"./VCard-c93b75ed.js";import"./VForm-918b7691.js";const Z=d({__name:"RegisterView",emits:["pageTitle"],setup(k,{emit:g}){const f=R(),C=h(),i=x(),v=E.getInstance(),a=m(),r=m(),U=m(),u=m(),l=m(!1),s=V();b(C);const p=e=>new Promise((t,o)=>{i.getConventionRegistrationGroup(e).then(n=>{n?(u.value=n,t(n)):o()}).catch(()=>{o()})});return(()=>{i.getConvention(f.params.convention.toString()).then(e=>{e&&(a.value=e,p(e.ConventionUUID),i.getConventionExtras(e.ConventionUUID||"").then(t=>(a.value||{Extras:[]}).Extras=t),i.getAvailableConventionForms(e.ConventionUUID||"",!0).then(t=>{var o;r.value=t.find(n=>n.Type==="REGISTRATION"),r.value&&(s!=null&&s.UserUUID&&e.ConventionUUID&&i.getUserConventionSubmissions((s==null?void 0:s.UserUUID)||"",e.ConventionUUID||"").then(n=>{n&&(U.value=n.find(I=>{var c;return I.FormUUID===((c=r.value)==null?void 0:c.FormUUID)})),l.value=!0}).catch(()=>{l.value=!0}),g("pageTitle",`Convention Registration - ${((o=a.value)==null?void 0:o.Name)||"New Convention"}`))}))})})(),g("pageTitle","Convention Registration"),v.on("registration.group.leave",()=>{var e;i.leaveRegistrationGroup(((e=u.value)==null?void 0:e.Registration.RegistrationUUID)||"").then(t=>{var o;t&&p(((o=u.value)==null?void 0:o.Registration.ConventionUUID)||"").then(n=>{v.emit("registration.group.left",n)})})}),v.on("registration.group.join",()=>{var e;p(((e=a.value)==null?void 0:e.ConventionUUID)||"")}),(e,t)=>l.value&&r.value&&a.value&&u.value?(G(),_(D,{key:0,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),convention:a.value,data:U.value,editable:!0,"registration-group":u.value},null,8,["modelValue","convention","data","registration-group"])):T("",!0)}});export{Z as default};
