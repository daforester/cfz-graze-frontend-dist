import{I as O,r as V,e as E,w as z,J as b,K as t,L as n,M as o,v as p,Q as u,N as i,O as S,U as L,R as s,Z as P,H as T,S as f,$,_ as x}from"./index-5caf7fc8.js";import{G}from"./userData-6bfa3a60.js";import{_ as B}from"./LoginView.vue_vue_type_script_setup_true_lang-a7611bc3.js";import{s as A}from"./index-26b71cef.js";import{F as _}from"./form-e2a93b7c.js";import{S as H}from"./submission-56c4c4f1.js";import{u as j}from"./useStoreAPI-fa0d38a9.js";import{c as D}from"./canEditForm-52ba80b9.js";import{s as J}from"./sortSubmissions-ed9e4490.js";import{V as K}from"./VAvatar-88d8050e.js";import{V as Q,a as Z,b as q,c as W,d as X,e as ee}from"./VCard-a8f9de0d.js";import{V as d}from"./VBtn-7f5c5dc2.js";import{V as te}from"./VSpacer-af983f33.js";import{V as oe,a as ne}from"./VRow-cb9b40d2.js";import{j as ae}from"./VContainer-c5e5ef57.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-20c3c155.js";const re=["innerHTML"],ie={key:0,class:"font-weight-bold float-left pt-1 w-50"},se={key:1,class:"pa-1"},le={key:0,class:"font-weight-bold float-left pt-1 w-50"},ue={key:1},ce=O({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const v=j(),g=$(),y=V(v.GetConventionLogoURL(l.convention.ConventionUUID)),a=V(),c=E(()=>{var e;return D(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_REGISTRATION)}),F=E(()=>{var e;return D(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_DEALER)}),w=E(()=>{var e;return D(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_ACCOMMODATION)}),Y=E(()=>{var e;return D(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_UNSPECIFIED)});return z(()=>l.forms,()=>{g.getRegistrationByConvention(l.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((h,k)=>{h.Form||(e.Submissions[k].Form=l.forms.find(R=>R.FormUUID===h.FormUUID))}),J(e.Submissions)):e.Submissions=[],a.value=e)})}),(e,h)=>{const k=b("router-link"),R=b("RouterLink");return t(),n(ee,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[p(q,{class:"flex-1-1 align-content-start"},{default:o(()=>[y.value?(t(),n(K,{key:0,src:y.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):u("",!0),e.convention.Name?(t(),n(Q,{key:1,class:"text-center"},{default:o(()=>[i(S(e.convention.Name),1)]),_:1})):u("",!0),e.convention.Description?(t(),n(Z,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[L("div",{innerHTML:e.convention.Description},null,8,re)]),_:1})):u("",!0)]),_:1}),p(W,null,{default:o(()=>{var U;return[L("dl",null,[a.value&&a.value.Reference?(t(),s("dt",ie," Badge No: ")):u("",!0),a.value&&a.value.Reference?(t(),s("dd",se," #"+S(a.value.Reference),1)):u("",!0),(t(!0),s(T,null,P((U=a.value)==null?void 0:U.Submissions,r=>{var C,I,M,N;return t(),s(T,{key:r.SubmissionUUID},[r.Form?(t(),s(T,{key:0},[r.Form?(t(),s("dt",le,S(r.Form.Heading),1)):u("",!0),r.Form?(t(),s("dd",ue,[i(S(f(H)(r.Status))+" ",1),((C=r.Form)==null?void 0:C.Type)===f(_).FORM_TYPE_REGISTRATION?(t(),n(k,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/registration`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&c.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((I=r.Form)==null?void 0:I.Type)===f(_).FORM_TYPE_ACCOMMODATION?(t(),n(k,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&w.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((M=r.Form)==null?void 0:M.Type)===f(_).FORM_TYPE_DEALER?(t(),n(k,{key:2,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&F.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((N=r.Form)==null?void 0:N.Type)===f(_).FORM_TYPE_UNSPECIFIED?(t(),n(k,{key:3,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&Y.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):u("",!0)])):u("",!0)],64)):u("",!0)],64)}),128))])]}),_:1}),p(X,null,{default:o(()=>{var U,r;return[e.convention.DetailLink?(t(),n(d,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[i(S(f(A).buttonDetails),1)]),_:1},8,["href"])):u("",!0),p(te),c.value?(t(),s(T,{key:1},[(U=a.value)!=null&&U.Submissions.find(C=>{var I;return((I=C.Form)==null?void 0:I.Type)===f(_).FORM_TYPE_REGISTRATION})?(t(),n(R,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(S(f(A).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(t(),s(T,{key:0},[(r=e.forms.find(C=>C.Type===f(_).FORM_TYPE_REGISTRATION))!=null&&r.State.New?(t(),n(R,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(S(f(A).buttonRegister),1)]),_:1})]),_:1},8,["to"])):u("",!0)],64))],64)):u("",!0)]}),_:1})]),_:1})}}});const me=x(ce,[["__scopeId","data-v-66dab29e"]]),de=O({__name:"Conventions",setup(l){const v=$(),g=V([]),y=V([]);return v.getOpenConventionsList().then(a=>{a&&(g.value=[...g.value,...a],v.getAvailableConventionForms(g.value.map(c=>c.ConventionUUID)).then(c=>{y.value=[...y.value,...c]}).catch(c=>{console.error(c)}))}),(a,c)=>(t(),n(ae,null,{default:o(()=>[p(ne,{class:"justify-center"},{default:o(()=>[(t(!0),s(T,null,P(g.value,F=>(t(),n(oe,{key:F.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[p(me,{convention:F,forms:y.value.filter(w=>w.ConventionUUID===F.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),fe={};function ve(l,v){return t(),s("div")}const _e=x(fe,[["render",ve]]),pe=O({__name:"MainView",emits:["pageTitle"],setup(l,{emit:v}){return v("pageTitle","Scotiacon Registration System"),(g,y)=>(t(),s(T,null,[p(de),p(_e)],64))}}),Me=O({__name:"Home",emits:["pageTitle"],setup(l,{emit:v}){const g=G();return v("pageTitle","Telegram Login"),(y,a)=>(t(),s("div",null,[f(g)?(t(),n(pe,{key:0,onPageTitle:a[0]||(a[0]=c=>v("pageTitle",c))})):(t(),n(B,{key:1}))]))}});export{Me as default};
