import{i as K,M as Ie,N as Ue,j as Ee,r as b,w as se,n as e,q as l,v as t,x as n,f as r,z as Ae,y as h,A as y,O as be,D as d,P as ie,k as ve,B as i,F as m,Q as G,C as c,p as we,R as De,d as Ce,u as Pe,S as Re,c as N,m as ne,l as le,G as Oe,H as Ve,_ as ge}from"./index-4G4hDyV8.js";import{G as re}from"./userData-Wth7x8Sd.js";import{_ as Fe}from"./LoginView.vue_vue_type_script_setup_true_lang-g08OH1CK.js";import{s as ae}from"./index-2XRRB2DS.js";import{F as E}from"./form-0fJbSFPv.js";import{S as L,a as Ne}from"./submission-40fey8Hx.js";import{u as ye}from"./useStoreAPI-i1xwiI7l.js";import{c as Q}from"./canEditForm-viF788U5.js";import{s as Me}from"./sortSubmissions-NKScr9xj.js";import{P as X,a as $e,b as Le,u as Ye}from"./useDisplayTransactions-PU3N3-c0.js";import{l as xe}from"./stripe.esm-sevhGlMX.js";import{_ as ze}from"./ModelDialog.vue_vue_type_script_setup_true_lang-ENOMpy96.js";import{c as te,V as v,n as Be,u as Ge}from"./VContainer-lpbCi_VE.js";import{V as He}from"./VAlert-OjK2l4Dw.js";import{V as je}from"./VForm-IWLh-hdm.js";import{V as q,a as H}from"./VRow-71NLnuUH.js";import{V as Se,u as qe}from"./scopeId-f_NA4HqM.js";import{V as We,m as Ke,a as fe}from"./SaveButton.vue_vue_type_script_setup_true_lang-z8JlGfmP.js";import{f as Je,h as pe}from"./date-RO2WHkId.js";import{V as he,a as ee,b as _e,c as oe,d as Qe,e as Te}from"./VCard-I7DdgsPq.js";import{f as Xe,V as ke}from"./forwardRefs-ZLeCcSZZ.js";import{V as Ze,a as et,c as tt,d as at}from"./VList-qoiDs-0P.js";import"./emailFormVariant-1EY2p0cn.js";import"./LoginButton-yb3UYdLV.js";import"./VDialog-i_cmRehf.js";import"./VToolbar-JTHUSXVV.js";import"./createSimpleFunctional-8CAzmVXJ.js";import"./form-NYS_JY6X.js";import"./VDivider-6cAXo8Id.js";const ot=d("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),d("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),nt=d("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),lt=d("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),st=d("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),it=d("p",{class:"my-4"},[n(" Please contact "),d("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),rt=d("div",{id:"link-authentication-element"},null,-1),ut=d("div",{id:"payment-element"},null,-1),ct=K({__name:"StripePayment",props:Ie({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const I=Ue(u,"modelValue"),w=ie(),A=re(),g=Ee(),s=b(),p=b(),S=b((A==null?void 0:A.Additional.Email)||""),k=b(!1),F=b("");let M;const x=b(!1);se(I,U=>{U&&w.stripePublicKey().then(async T=>{T&&(p.value=await xe(T),await Y(p.value))})});const z=U=>{F.value=U,k.value=!0};async function Y(U){var _;if(!U)return;const T=await w.stripePaymentIntent(((_=u.registration)==null?void 0:_.RegistrationUUID)||""),C={theme:"stripe"};g.current.value.dark&&(C.theme="night"),M=U.elements({clientSecret:T,appearance:C});const B=M.create("linkAuthentication",{defaultValues:{email:S.value}});B.mount("#link-authentication-element"),B.on("change",f=>{S.value=f.value.email});const Z={layout:"tabs"};M.create("payment",Z).mount("#payment-element")}async function j(U,T){if(!T)return;U.preventDefault(),x.value=!0;const C=new URL(location.href);C.pathname+="payment/stripe/processing";const{error:B}=await T.confirmPayment({elements:M,confirmParams:{return_url:C.toString(),receipt_email:S.value}});B.type==="card_error"||B.type==="validation_error"?z(B.message):z("An unexpected error occurred."),x.value=!1}return(U,T)=>(e(),l(ze,{modelValue:I.value,"onUpdate:modelValue":T[4]||(T[4]=C=>I.value=C),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[r(te,{class:"pa-0"},{default:t(()=>[r(He,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[ot,nt,lt,st,it]),_:1}),r(je,{ref_key:"paymentForm",ref:s,id:"payment-form",onSubmit:T[1]||(T[1]=Ae(C=>j(C,p.value),["prevent"]))},{default:t(()=>[r(q,null,{default:t(()=>[r(H,null,{default:t(()=>[rt]),_:1})]),_:1}),r(q,null,{default:t(()=>[r(H,null,{default:t(()=>[ut]),_:1})]),_:1}),r(q,null,{default:t(()=>[U.registration?(e(),l(H,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+h(U.registration.Total-U.registration.Paid),1)]),_:1})):y("",!0)]),_:1}),r(q,null,{default:t(()=>[r(H,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[r(v,{color:"error",class:"w-100",onClick:T[0]||(T[0]=C=>I.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),r(Se),r(H,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[r(v,{type:"submit",color:"success",class:"w-100"},be({default:t(()=>[n(" Pay Now ")]),_:2},[x.value?{name:"prepend",fn:t(()=>[r(Be,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),r(We,{modelValue:k.value,"onUpdate:modelValue":T[3]||(T[3]=C=>k.value=C)},{actions:t(()=>[r(v,{variant:"text",onClick:T[2]||(T[2]=C=>k.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(h(F.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),dt={key:0},mt={key:1,class:"v-row"},vt={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},ft=d("div",{class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"}," Other ",-1),pt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},_t={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},gt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},yt={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},St={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},ht={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},Tt={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},kt=d("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),It={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Ut=d("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),Et={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},At=d("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),bt={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},wt=K({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(u){const I=u,w=b(ve(I.paymentTransactions));se(I,()=>{w.value=ve(I.paymentTransactions)});const A=(g,s)=>g.Type===X.PAYMENT_TRANSACTION_TYPE_CHARGE&&s.Type!==X.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:g.Type!==X.PAYMENT_TRANSACTION_TYPE_CHARGE&&s.Type===X.PAYMENT_TRANSACTION_TYPE_CHARGE||(g.UpdatedAt||0)>(s.UpdatedAt||0)?1:g.UpdatedAt===s.UpdatedAt?0:-1;return(g,s)=>g.paymentTransactions.length==0&&g.registration.Total==0?(e(),i("p",dt," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),i("dl",mt,[(e(!0),i(m,null,G(w.value.sort(A),p=>{var S;return e(),i(m,{key:p.PaymentTransactionUUID},[p.Type===c(X).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),i("dt",vt,[p.Source===c($e).PAYMENT_TRANSACTION_SOURCE_MANUAL_ENTRY?(e(),i(m,{key:0},[ft,d("div",pt,h(p.Description),1)],64)):(e(),i(m,{key:1},[d("div",_t,h(p.Description.split(":")[0]),1),d("div",gt,h(p.Description.split(":")[1]),1)],64))])):(e(),i("dt",yt,[d("div",St,h((S=c(Le).find(k=>k.value===p.Type))==null?void 0:S.title),1),d("div",ht," [ "+h(c(Je)(p.UpdatedAt||""))+" ] "+h(p.Description),1)])),d("dd",Tt," £"+h(p.Amount),1)],64)}),128)),kt,d("dd",It," £"+h(g.registration.Total),1),Ut,d("dd",Et," £"+h(g.registration.Paid),1),At,d("dd",bt," £"+h(g.registration.Total-g.registration.Paid),1)]))}}),Dt=we({id:String,text:String,...De(Ke({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Ct=Ce()({name:"VTooltip",props:Dt(),emits:{"update:modelValue":u=>!0},setup(u,I){let{slots:w}=I;const A=Pe(u,"modelValue"),{scopeId:g}=qe(),s=Re(),p=N(()=>u.id||`v-tooltip-${s}`),S=b(),k=N(()=>u.location.split(" ").length>1?u.location:u.location+" center"),F=N(()=>u.origin==="auto"||u.origin==="overlap"||u.origin.split(" ").length>1||u.location.split(" ").length>1?u.origin:u.origin+" center"),M=N(()=>u.transition?u.transition:A.value?"scale-transition":"fade-transition"),x=N(()=>ne({"aria-describedby":p.value},u.activatorProps));return Ge(()=>{const z=fe.filterProps(u);return r(fe,ne({ref:S,class:["v-tooltip",u.class],style:u.style,id:p.value},z,{modelValue:A.value,"onUpdate:modelValue":Y=>A.value=Y,transition:M.value,absolute:!0,location:k.value,origin:F.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},g),{activator:w.activator,default:function(){var T;for(var Y=arguments.length,j=new Array(Y),U=0;U<Y;U++)j[U]=arguments[U];return((T=w.default)==null?void 0:T.call(w,...j))??u.text}})}),Xe({},S)}}),J=u=>(Oe("data-v-ff1e31f2"),u=u(),Ve(),u),Pt=["innerHTML"],Rt={key:0},Ot={key:0,class:"font-weight-bold float-left pt-1 w-50"},Vt={key:1,class:"pa-1"},Ft=J(()=>d("dt",null,[d("h3",null,"Forms Available")],-1)),Nt=J(()=>d("dd",{class:"mb-2"}," The following forms are currently available for completion. ",-1)),Mt={class:"font-weight-bold float-left pt-1 w-50 pt-3",style:{clear:"both"}},$t={class:"pt-2"},Lt=J(()=>d("dt",{class:"mt-3"},[d("h3",null,"Received Forms")],-1)),Yt=J(()=>d("dd",{class:"mb-2"}," The following forms have been received from you. ",-1)),xt={key:0,class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},zt={key:1},Bt={class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},Gt={class:"text-red-darken-4"},Ht={key:1,class:"text-red-darken-4 mt-4"},jt=J(()=>d("strong",null,"There are forms above that require completion, please edit and save them.",-1)),qt=[jt],Wt=J(()=>d("br",null,null,-1)),Kt=K({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(u){const I=ye(),w=ie(),{getPaymentTransactions:A}=Ye(),g=b(I.GetConventionLogoURL(u.convention.ConventionUUID)),s=b(),p=b([]),S=b([]),k=b([]),F=b(!1),M=b([]),x=N(()=>{var a;return Q(u.forms,((a=s.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_REGISTRATION)}),z=N(()=>{var a;return Q(u.forms,((a=s.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_DEALER)}),Y=N(()=>{var a;return Q(u.forms,((a=s.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_BADGE)}),j=N(()=>{var a;return Q(u.forms,((a=s.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_ACCOMMODATION)}),U=N(()=>{var a;return Q(u.forms,((a=s.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_ADDITIONAL)}),T=N(()=>s.value?u.forms.filter(a=>{var _;return a.State.Independent?(_=s.value)!=null&&_.Submissions&&"Submissions"in s.value?!s.value.Submissions.find(f=>{var O;return((O=f.Form)==null?void 0:O.FormUUID)===a.FormUUID}):!0:!1}):u.forms),C=N(()=>{var a,_;return s.value&&((a=s.value)!=null&&a.Submissions)?!!((_=s.value)!=null&&_.Submissions.find(f=>{var O;return((O=f.Form)==null?void 0:O.Type)==E.FORM_TYPE_REGISTRATION&&(f.Status==L.SUBMISSION_STATUS_ACCEPTED||f.Status==L.SUBMISSION_STATUS_COMPLETED)})):!1}),B=async()=>{s.value&&"RegistrationUUID"in s.value&&w.getRegistrationAllocationPeriods(s.value.RegistrationUUID).then(a=>{a&&(S.value=[],p.value=a,p.value.sort((_,f)=>_.DateStart>f.DateStart?1:-1).forEach(_=>{var O;const f=S.value.find(P=>{var R;return P.name===((R=_.Accommodation)==null?void 0:R.Name)});if(f){const P=f.periods.find(V=>V.start===_.DateEnd),R=f.periods.find(V=>V.end===_.DateStart);P?P.start=_.DateStart:R?R.end=_.DateEnd:f.periods.push({start:_.DateStart,end:_.DateEnd})}else S.value.push({name:((O=_.Accommodation)==null?void 0:O.Name)||"",periods:[{start:_.DateStart,end:_.DateEnd}]})}))}).catch(()=>{})},Z=()=>{w.getRegistrationByConvention(u.convention.ConventionUUID).then(a=>{var _;a&&(a.Submissions?(a.Submissions.forEach((f,O)=>{f.Form||(a.Submissions[O].Form=u.forms.find(P=>P.FormUUID===f.FormUUID))}),Me(a.Submissions)):a.Submissions=[],s.value=a,B(),C.value&&A(((_=s.value)==null?void 0:_.RegistrationUUID)||"").then(f=>{k.value=f}))})};return se(()=>u.forms,()=>{Z()}),Z(),(a,_)=>{const f=le("router-link"),O=le("RouterLink");return e(),l(Te,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[r(he,{class:"flex-1-1 align-content-start"},{default:t(()=>[g.value?(e(),l(ke,{key:0,src:g.value,title:a.convention.Name,class:"logo text-center"},null,8,["src","title"])):y("",!0),a.convention.Name?(e(),l(ee,{key:1,class:"text-center"},{default:t(()=>[n(h(a.convention.Name),1)]),_:1})):y("",!0),a.convention.Description?(e(),l(_e,{key:2,class:"text-wrap subtitle"},{default:t(()=>[d("div",{innerHTML:a.convention.Description},null,8,Pt)]),_:1})):y("",!0)]),_:1}),r(oe,null,{default:t(()=>{var P,R,V;return[s.value?(e(),i("dl",Rt,[s.value.Reference?(e(),i("dt",Ot," Badge No: ")):y("",!0),s.value.Reference?(e(),i("dd",Vt," #"+h(s.value.Reference),1)):y("",!0),T.value.length>0?(e(),i(m,{key:2},[Ft,Nt],64)):y("",!0),(e(!0),i(m,null,G(T.value,(o,$)=>(e(),i(m,{key:o.FormUUID},[d("dt",Mt,h(o.Heading),1),d("dd",$t,[(o==null?void 0:o.Type)===c(E).FORM_TYPE_DEALER?(e(),l(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o!=null&&o.State.Edit&&z.value?(e(),l(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===c(E).FORM_TYPE_BADGE?(e(),l(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o!=null&&o.State.Edit&&Y.value?(e(),l(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===c(E).FORM_TYPE_ADDITIONAL?(e(),l(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o!=null&&o.State.Edit&&U.value?(e(),l(v,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):y("",!0)])],64))),128)),((P=s.value)==null?void 0:P.Submissions.length)>0?(e(),i(m,{key:3},[Lt,Yt],64)):y("",!0),(e(!0),i(m,null,G((R=s.value)==null?void 0:R.Submissions,(o,$)=>{var W,ue,ce,de,me;return e(),i(m,{key:o.SubmissionUUID},[o.Form?(e(),i(m,{key:0},[o.Form?(e(),i("dt",xt,h(o.Form.Heading),1)):y("",!0),o.Form?(e(),i("dd",zt,[r(Ct,{modelValue:M.value[$],"onUpdate:modelValue":D=>M.value[$]=D},{activator:t(({props:D})=>[r(v,ne(D,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:oa=>M.value[$]=!M.value[$]}),null,16,["onClick"])]),default:t(()=>[o.Status===c(L).SUBMISSION_STATUS_NULL?(e(),i(m,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):o.Status===c(L).SUBMISSION_STATUS_INCOMPLETE?(e(),i(m,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):o.Status===c(L).SUBMISSION_STATUS_OPEN?(e(),i(m,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===c(L).SUBMISSION_STATUS_LOCKED?(e(),i(m,{key:3},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===c(L).SUBMISSION_STATUS_ACCEPTED?(e(),i(m,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===c(L).SUBMISSION_STATUS_COMPLETED?(e(),i(m,{key:5},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):o.Status===c(L).SUBMISSION_STATUS_REJECTED?(e(),i(m,{key:6},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):o.Status===c(L).SUBMISSION_STATUS_INVALID?(e(),i(m,{key:7},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):o.Status===c(L).SUBMISSION_STATUS_CANCELLED?(e(),i(m,{key:8},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),i(m,{key:9},[n(" Please contact the registration team for support. ")],64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(" "+h(c(Ne)(o.Status))+" ",1),((W=o.Form)==null?void 0:W.Type)===c(E).FORM_TYPE_REGISTRATION?(e(),l(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&x.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ue=o.Form)==null?void 0:ue.Type)===c(E).FORM_TYPE_ACCOMMODATION?(e(),l(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&j.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ce=o.Form)==null?void 0:ce.Type)===c(E).FORM_TYPE_DEALER?(e(),l(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&z.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((de=o.Form)==null?void 0:de.Type)===c(E).FORM_TYPE_BADGE?(e(),l(f,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&Y.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((me=o.Form)==null?void 0:me.Type)===c(E).FORM_TYPE_ADDITIONAL?(e(),l(f,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&U.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):y("",!0)])):y("",!0)],64)):y("",!0)],64)}),128)),((V=s.value)==null?void 0:V.Submissions.length)>=1?(e(!0),i(m,{key:4},G(a.forms,o=>{var $;return e(),i(m,{key:o.FormUUID},[!(($=s.value)!=null&&$.Submissions.find(W=>W.FormUUID===o.FormUUID))&&!o.State.Independent?(e(),i(m,{key:0},[d("dt",Bt,h(o.Heading),1),d("dd",Gt,[n(" Requires Completion "),o.Type===c(E).FORM_TYPE_REGISTRATION?(e(),l(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>[o.State.Edit&&x.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_ACCOMMODATION?(e(),l(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>[o.State.Edit&&j.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_DEALER?(e(),l(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o.State.Edit&&z.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_BADGE?(e(),l(f,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o.State.Edit&&Y.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_ADDITIONAL?(e(),l(f,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o.State.Edit&&U.value?(e(),l(v,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(v,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):y("",!0)])],64)):y("",!0)],64)}),128)):y("",!0)])):y("",!0),s.value&&s.value.Submissions.length>=1&&a.forms.filter(o=>{var $;return!o.State.Independent&&!(($=s.value)!=null&&$.Submissions.find(W=>W.FormUUID==o.FormUUID))}).length>0?(e(),i("div",Ht,qt)):y("",!0)]}),_:1}),S.value.length>0?(e(),i(m,{key:0},[r(ee,{class:"pb-0"},{default:t(()=>[n("Allocated Accommodation")]),_:1}),r(_e,{class:"text-wrap"},{default:t(()=>[n("The following accommodation has been allocated to your registration. In some cases this may not have been your first choice.")]),_:1}),r(oe,null,{default:t(()=>[r(Ze,{density:"compact"},{default:t(()=>[(e(!0),i(m,null,G(S.value,P=>(e(),l(et,{key:P.name},{default:t(()=>[r(tt,null,{default:t(()=>[n(h(P.name),1)]),_:2},1024),(e(!0),i(m,null,G(P.periods,R=>(e(),l(at,{key:R.start},{default:t(()=>[n(" ("+h(c(pe)(R.start))+" - "+h(c(pe)(R.end))+")",1),Wt]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})],64)):y("",!0),C.value&&s.value?(e(),i(m,{key:1},[r(ee,{class:"pb-4"},{default:t(()=>[n("Payment Information")]),_:1}),r(oe,null,{default:t(()=>[r(wt,{"payment-transactions":k.value,registration:s.value},null,8,["payment-transactions","registration"])]),_:1})],64)):y("",!0),r(Qe,null,{default:t(()=>{var P,R;return[a.convention.DetailLink?(e(),l(v,{key:0,color:"warning",href:a.convention.DetailLink,variant:"flat"},{default:t(()=>[n(h(c(ae).buttonDetails),1)]),_:1},8,["href"])):y("",!0),r(Se),x.value?(e(),i(m,{key:1},[(P=s.value)!=null&&P.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===c(E).FORM_TYPE_REGISTRATION})?(e(),l(O,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[r(v,{color:"primary",variant:"flat"},{default:t(()=>[n(h(c(ae).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),i(m,{key:0},[(R=a.forms.find(V=>V.Type===c(E).FORM_TYPE_REGISTRATION))!=null&&R.State.New?(e(),l(O,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[r(v,{color:"success",variant:"flat"},{default:t(()=>[n(h(c(ae).buttonRegister),1)]),_:1})]),_:1},8,["to"])):y("",!0)],64))],64)):C.value&&s.value&&s.value.Total>s.value.Paid?(e(),i(m,{key:2},[r(v,{color:"success",variant:"elevated",onClick:_[0]||(_[0]=V=>F.value=!0)},{default:t(()=>[n(" Make Payment ")]),_:1}),s.value?(e(),l(ct,{key:0,"payment-transactions":k.value,registration:s.value,modelValue:F.value,"onUpdate:modelValue":_[1]||(_[1]=V=>F.value=V)},null,8,["payment-transactions","registration","modelValue"])):y("",!0)],64)):y("",!0)]}),_:1})]),_:1})}}}),Jt=ge(Kt,[["__scopeId","data-v-ff1e31f2"]]),Qt=d("h3",{class:"font-weight-regular px-4"}," Convention Sticker Collection ",-1),Xt=K({__name:"Conventions",setup(u){const I=ie(),w=ye(),A=b([]),g=b([]),s=b([]);return I.getOpenConventionsList().then(p=>{p&&(g.value=[...g.value,...p],I.getAvailableConventionForms(g.value.map(S=>S.ConventionUUID)).then(S=>{s.value=[...s.value,...S]}).catch(S=>{console.error(S)}),I.getAttendedConventions().then(S=>{A.value=S}))}),(p,S)=>(e(),i(m,null,[r(te,null,{default:t(()=>[r(q,{class:"justify-center"},{default:t(()=>[(e(!0),i(m,null,G(g.value,k=>(e(),l(H,{key:k.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[r(Jt,{convention:k,forms:s.value.filter(F=>F.ConventionUUID===k.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}),A.value.length>0?(e(),l(te,{key:0,fluid:"",class:"px-0"},{default:t(()=>[r(q,{class:"bg-blue-darken-4"},{default:t(()=>[r(H,null,{default:t(()=>[Qt]),_:1})]),_:1}),r(q,{class:"justify-center"},{default:t(()=>[(e(!0),i(m,null,G(A.value,k=>(e(),l(H,{key:k.ConventionUUID,cols:"8",sm:"6",md:"4",lg:"3",xl:"2"},{default:t(()=>[r(Te,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[r(he,{class:"flex-1-1 align-content-start"},{default:t(()=>[r(ke,{src:c(w).GetConventionLogoURL(k.ConventionUUID),title:k.Name,class:"logo text-center"},null,8,["src","title"]),k.Name?(e(),l(ee,{key:0,class:"text-center text-wrap"},{default:t(()=>[n(h(k.Name),1)]),_:2},1024)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):y("",!0)],64))}}),Zt={};function ea(u,I){return e(),i("div")}const ta=ge(Zt,[["render",ea]]),aa=K({__name:"MainView",emits:["pageTitle"],setup(u,{emit:I}){I("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const g=localStorage.getItem("gjt_token"),s=localStorage.getItem("ajt_token");g?(localStorage.removeItem("gjt_token"),location.href=g):s&&(localStorage.removeItem("ajt_token"),location.href=s);const p=b(re());return(S,k)=>{const F=le("router-link");return e(),i(m,null,[p.value&&(!p.value.Additional||!p.value.Additional.Email)?(e(),l(te,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),r(F,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):y("",!0),r(Xt),r(ta)],64)}}}),Oa=K({__name:"Home",props:{loggedIn:{type:Boolean}},emits:["pageTitle"],setup(u,{emit:I}){const w=re(),A=I;return A("pageTitle","Telegram Login"),(g,s)=>(e(),i("div",null,[g.loggedIn&&c(w)?(e(),l(aa,{key:0,onPageTitle:s[0]||(s[0]=p=>A("pageTitle",p))})):(e(),l(Fe,{key:1}))]))}});export{Oa as default};
