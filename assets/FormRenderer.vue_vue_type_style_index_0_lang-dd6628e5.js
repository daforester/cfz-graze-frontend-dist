import{p as we,r as O,e as me,W as v,y as vl,aA as Pe,ai as al,am as ml,ao as nl,n as Be,af as fl,s as Re,u as Le,w as ae,E as We,v as i,H as F,x as fe,P as K,aB as gl,I as Ue,a3 as ne,a4 as be,a6 as Ke,M as u,V as $,X as H,Q as j,O as r,a0 as ee,N as y,S as R,K as De,R as ol,as as $e,a1 as ul,U as hl,ad as je,a as pl,ay as yl,L as Ul,aC as ze}from"./index-d1ed2f9f.js";import{F as ue}from"./form-29fd1dbb.js";import{c as bl}from"./submission-fa749080.js";import{a as Il,V as ye,u as He,m as Tl,b as il,c as Dl,d as Vl}from"./VCheckbox-60753f5f.js";import{s as Ee}from"./index-26b71cef.js";import{e as Cl,V as ge,a as re,d as Me,c as ke,b as sl}from"./VList-56e202ed.js";import{a as J,V as q}from"./VRow-91a32c7c.js";import{m as kl,u as El,a as Sl,b as Al,V as Ne,c as Ol}from"./copyToClipboard-9ba28968.js";import{n as _l,u as Ge,V as Se,z as Rl,j as Ll}from"./VContainer-9e55c7f5.js";import{a as Ml,e as wl,_ as Qe}from"./VChip-5ebd6a5c.js";import{u as Pl}from"./VSpacer-89c30b92.js";import{k as $l,l as xl,j as Fl,V as Ve,f as qe,m as Nl,n as ql}from"./VTextField-27e79e9d.js";import{V as ve}from"./VBtn-e552d20b.js";import{m as Bl,V as Ze}from"./VAvatar-2f0c5fe1.js";import{V as Kl}from"./VTextarea-69f7a011.js";import{G as Hl}from"./userData-1cbb769d.js";import{v as xe}from"./v4-a960c1f4.js";import{e as Gl,V as Yl,a as Jl,c as Xl}from"./VCard-a6bcbc99.js";import{V as Wl}from"./VForm-c37d2eee.js";const el=(e,f,l)=>{if(l>=e.length){let _=l-e.length+1;for(;_--;)e.push(void 0)}e.splice(l,0,e.splice(f,1)[0])},Ae=e=>{e.sort((f,l)=>(f.Order?f.Order:0)-(l.Order?l.Order:0)),e.forEach((f,l)=>{f.Order=l})},aa=(e,f)=>{const l=f.indexOf(e);if(l===0)return;const _=e.Order;e.Order=f[l-1].Order,f[l-1].Order=_,Ae(f)},na=(e,f)=>{const l=f.indexOf(e);if(l>=f.length-1)return;const _=e.Order;e.Order=f[l+1].Order,f[l+1].Order=_,Ae(f)},Fe=e=>(Ae(e),e),oa=e=>(f,l)=>f[e]<l[e]?-1:f[e]>l[e]?1:0;var Z=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(Z||{});const ua=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var rl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(rl||{});const ia=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const jl=(e,f,l)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),zl=we({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ql(e,f,l){var p;const _=[],U=(l==null?void 0:l.default)??jl,g=l!=null&&l.filterKeys?al(l.filterKeys):!1,T=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return _;e:for(let E=0;E<e.length;E++){const c=e[E],t={},d={};let D=-1;if(f&&!(l!=null&&l.noFilter)){if(typeof c=="object"){const V=g||Object.keys(c);for(const n of V){const o=ml(c,n,c),a=(p=l==null?void 0:l.customKeyFilter)==null?void 0:p[n];if(D=a?a(o,f,c):U(o,f,c),D!==-1&&D!==!1)a?t[n]=D:d[n]=D;else if((l==null?void 0:l.filterMode)==="every")continue e}}else D=U(c,f,c),D!==-1&&D!==!1&&(d.title=D);const I=Object.keys(d).length,s=Object.keys(t).length;if(!I&&!s||(l==null?void 0:l.filterMode)==="union"&&s!==T&&!I||(l==null?void 0:l.filterMode)==="intersection"&&(s!==T||!I))continue}_.push({index:E,matches:{...d,...t}})}return _}function Zl(e,f,l,_){const U=O([]),g=O(new Map),T=me(()=>_!=null&&_.transform?v(f).map(_==null?void 0:_.transform):v(f));vl(()=>{const E=typeof Pe(l)!="string"&&typeof Pe(l)!="number"?"":String(Pe(l)),c=Ql(T.value,E,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),t=v(f),d=[],D=new Map;c.forEach(I=>{let{index:s,matches:V}=I;const n=t[s];d.push(n),D.set(n.value,V)}),U.value=d,g.value=D});function p(E){return g.value.get(E.value)}return{filteredItems:U,filteredMatches:g,getMatches:p}}function et(e,f,l){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?i(F,null,[i("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),i("span",{class:"v-autocomplete__mask"},[e.substr(f,l)]),i("span",{class:"v-autocomplete__unmask"},[e.substr(f+l)])]):e}const lt=we({autoSelectFirst:{type:[Boolean,String]},search:String,...zl({filterKeys:["title"]}),...kl(),...nl($l({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Bl({transition:!1})},"VAutocomplete"),ll=Be()({name:"VAutocomplete",props:lt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:l}=f;const{t:_}=fl(),U=O(),g=Re(!1),T=Re(!0),p=O(!1),E=O(),c=Le(e,"menu"),t=me({get:()=>c.value,set:k=>{var Y;c.value&&!k&&((Y=E.value)!=null&&Y.ΨopenChildren)||(c.value=k)}}),d=Re(-1),D=me(()=>{var k;return(k=U.value)==null?void 0:k.color}),{items:I,transformIn:s,transformOut:V}=Cl(e),{textColorClasses:n,textColorStyles:o}=_l(D),a=Le(e,"search",""),S=Le(e,"modelValue",[],k=>s(k===null?[null]:al(k)),k=>{const Y=V(k);return e.multiple?Y:Y[0]??null}),x=xl(),{filteredItems:N,getMatches:B}=Zl(e,I,()=>T.value?"":a.value),b=me(()=>S.value.map(k=>I.value.find(Y=>e.valueComparator(Y.value,k.value))||k)),m=me(()=>e.hideSelected?N.value.filter(k=>!b.value.some(Y=>Y.value===k.value)):N.value),A=me(()=>b.value.map(k=>k.props.value)),C=me(()=>b.value[d.value]),L=me(()=>{var Y;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((Y=m.value[0])==null?void 0:Y.title))&&m.value.length>0&&!T.value&&!p.value}),M=me(()=>e.hideNoData&&!I.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),oe=O(),{onListScroll:de,onListKeydown:he}=El(oe,U);function X(k){e.openOnClear&&(t.value=!0),a.value=""}function h(){M.value||(t.value=!0)}function w(k){M.value||(g.value&&(k.preventDefault(),k.stopPropagation()),t.value=!t.value)}function ce(k){var Te,G,te;if(e.readonly||x!=null&&x.isReadonly.value)return;const Y=U.value.selectionStart,Q=A.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(k.key))&&k.preventDefault(),["Enter","ArrowDown"].includes(k.key)&&(t.value=!0),["Escape"].includes(k.key)&&(t.value=!1),["Enter","Escape","Tab"].includes(k.key)&&(L.value&&["Enter","Tab"].includes(k.key)&&Ie(N.value[0]),T.value=!0),k.key==="ArrowDown"&&L.value&&((Te=oe.value)==null||Te.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(k.key)){if(d.value<0){k.key==="Backspace"&&!a.value&&(d.value=Q-1);return}const W=d.value;C.value&&Ie(C.value),d.value=W>=Q-1?Q-2:W}if(k.key==="ArrowLeft"){if(d.value<0&&Y>0)return;const W=d.value>-1?d.value-1:Q-1;b.value[W]?d.value=W:(d.value=-1,U.value.setSelectionRange((G=a.value)==null?void 0:G.length,(te=a.value)==null?void 0:te.length))}if(k.key==="ArrowRight"){if(d.value<0)return;const W=d.value+1;b.value[W]?d.value=W:(d.value=-1,U.value.setSelectionRange(0,0))}}}function P(k){a.value=k.target.value}function le(){var k;g.value&&(T.value=!0,(k=U.value)==null||k.focus())}function z(k){g.value=!0,setTimeout(()=>{p.value=!0})}function Ye(k){p.value=!1}function dl(k){(k==null||k===""&&!e.multiple)&&(S.value=[])}const Ce=Re(!1);function Ie(k){if(e.multiple){const Y=A.value.findIndex(Q=>e.valueComparator(Q,k.value));if(Y===-1)S.value=[...S.value,k];else{const Q=[...S.value];Q.splice(Y,1),S.value=Q}}else S.value=[k],Ce.value=!0,a.value=k.title,t.value=!1,T.value=!0,We(()=>Ce.value=!1)}return ae(g,(k,Y)=>{var Q;k!==Y&&(k?(Ce.value=!0,a.value=e.multiple?"":String(((Q=b.value.at(-1))==null?void 0:Q.props.title)??""),T.value=!0,We(()=>Ce.value=!1)):(!e.multiple&&!a.value?S.value=[]:L.value&&!p.value&&!b.value.some(Te=>{let{value:G}=Te;return G===m.value[0].value})&&Ie(m.value[0]),t.value=!1,a.value="",d.value=-1))}),ae(a,k=>{!g.value||Ce.value||(k&&(t.value=!0),T.value=!k)}),Ge(()=>{const k=!!(e.chips||l.chip),Y=!!(!e.hideNoData||m.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),Q=S.value.length>0,[Te]=Ve.filterProps(e);return i(Ve,fe({ref:U},Te,{modelValue:a.value,"onUpdate:modelValue":dl,focused:g.value,"onUpdate:focused":G=>g.value=G,validationValue:S.externalValue,dirty:Q,onInput:P,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":t.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!l.selection,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Q?void 0:e.placeholder,"onClick:clear":X,"onMousedown:control":h,onKeydown:ce}),{...l,default:()=>i(F,null,[i(Sl,fe({ref:E,modelValue:t.value,"onUpdate:modelValue":G=>t.value=G,activator:"parent",contentClass:"v-autocomplete__content",disabled:M.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:le},e.menuProps),{default:()=>[Y&&i(ge,{ref:oe,selected:A.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:G=>G.preventDefault(),onKeydown:he,onFocusin:z,onFocusout:Ye,onScrollPassive:de,tabindex:"-1"},{default:()=>{var G,te,W;return[(G=l["prepend-item"])==null?void 0:G.call(l),!m.value.length&&!e.hideNoData&&(((te=l["no-data"])==null?void 0:te.call(l))??i(re,{title:_(e.noDataText)},null)),i(Al,{renderless:!0,items:m.value},{default:pe=>{var Xe;let{item:ie,index:se,itemRef:cl}=pe;const Je=fe(ie.props,{ref:cl,key:se,active:L.value&&se===0?!0:void 0,onClick:()=>Ie(ie)});return((Xe=l.item)==null?void 0:Xe.call(l,{item:ie,index:se,props:Je}))??i(re,Je,{prepend:Oe=>{let{isSelected:_e}=Oe;return i(F,null,[e.multiple&&!e.hideSelected?i(Il,{key:ie.value,modelValue:_e,ripple:!1,tabindex:"-1"},null):void 0,ie.props.prependIcon&&i(Se,{icon:ie.props.prependIcon},null)])},title:()=>{var Oe,_e;return T.value?ie.title:et(ie.title,(Oe=B(ie))==null?void 0:Oe.title,((_e=a.value)==null?void 0:_e.length)??0)}})}}),(W=l["append-item"])==null?void 0:W.call(l)]}})]}),b.value.map((G,te)=>{var ie;function W(se){se.stopPropagation(),se.preventDefault(),Ie(G)}const pe={"onClick:close":W,onMousedown(se){se.preventDefault(),se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return i("div",{key:G.value,class:["v-autocomplete__selection",te===d.value&&["v-autocomplete__selection--selected",n.value]],style:te===d.value?o.value:{}},[k?l.chip?i(Rl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:G.title}}},{default:()=>{var se;return[(se=l.chip)==null?void 0:se.call(l,{item:G,index:te,props:pe})]}}):i(Ml,fe({key:"chip",closable:e.closableChips,size:"small",text:G.title},pe),null):((ie=l.selection)==null?void 0:ie.call(l,{item:G,index:te}))??i("span",{class:"v-autocomplete__selection-text"},[G.title,e.multiple&&te<b.value.length-1&&i("span",{class:"v-autocomplete__selection-comma"},[K(",")])])])})]),"append-inner":function(){var pe;for(var G=arguments.length,te=new Array(G),W=0;W<G;W++)te[W]=arguments[W];return i(F,null,[(pe=l["append-inner"])==null?void 0:pe.call(l,...te),e.menuIcon?i(Se,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:w,onClick:gl},null):void 0])}})}),Fl({isFocused:g,isPristine:T,menu:t,search:a,filteredItems:N,select:Ie},U)}}),tt={class:"extrasList"},at=Ue({__name:"Extras",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:f}){const l=e,{admin:_=!1,convention:U,disabled:g=!1}=l,T=be(e,"modelValue"),p=Ke.getInstance(),E=O({});try{E.value=JSON.parse(T.value)}catch{}const c=O([]),t=O([]);ae(l,()=>{D()}),ae(E.value,s=>{for(const V in s)if(s[V].checked){const n=c.value.map(o=>{var a;return(a=o.Options)==null?void 0:a.find(S=>S.OptionUUID===V)});if(n&&n.length>0)try{const o=n[0];s[V].choiceId===""&&o&&o.Choices&&o.Choices.length>0&&(s[V].choiceId=o.Choices[0].TagUUID),s[V].price=o==null?void 0:o.Price}catch{}}else s[V].choiceId="",s[V].price=0;T.value=JSON.stringify(s),I()});const d=me({get:()=>c.value.map(s=>s.ExtraUUID),set:()=>{}}),D=()=>{var V;const s=((V=l.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:V.Value)||"[]";try{const n=JSON.parse(s);c.value=t.value.filter(o=>n.find(a=>a===o.ExtraUUID))||[],d.value=[...c.value.map(o=>o.ExtraUUID)],c.value.forEach(o=>{var a;(a=o.Options)==null||a.forEach(S=>{E.value[S.OptionUUID]||(E.value[S.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in U&&U.Extras.length?(t.value=U.Extras,D()):"ConventionUUID"in U&&(_?p==null||p.getConventionExtras(U.ConventionUUID).then(s=>{s&&(t.value=s,D())}):p==null||p.getAvailableConventionExtras(U.ConventionUUID).then(s=>{s&&(t.value=s,D())}));const I=(s=void 0)=>{setTimeout(()=>f("change",s),100)};return(s,V)=>(u(),$("div",tt,[H("h4",null,j(s.label),1),i(ge,{opened:d.value,"onUpdate:opened":V[0]||(V[0]=n=>d.value=n)},{default:r(()=>[(u(!0),$(F,null,ee(c.value,n=>(u(),y(sl,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:r(({props:o})=>[i(re,fe({"prepend-icon":"mdi:mdi-group","append-icon":""},o),{default:r(()=>[n.Name?(u(),y(Me,{key:0},{default:r(()=>[H("strong",null,j(n.Name),1)]),_:2},1024)):R("",!0),n.Description?(u(),y(ke,{key:1,class:"mt-2 d-inline"},{default:r(()=>[K(j(n.Description),1)]),_:2},1024)):R("",!0)]),_:2},1040)]),default:r(()=>[n.Options?(u(!0),$(F,{key:0},ee(n.Options,o=>(u(),y(re,{key:o.OptionUUID,class:"override-pl"},{default:r(()=>[i(J,null,{default:r(()=>[i(q,{cols:"12",sm:"6"},{default:r(()=>[i(ye,{label:`${o.Name} ${o.Price&&o.Price!==0?`(${v(Ee).currencySymbol}${o.Price})`:""}`,modelValue:E.value[o.OptionUUID].checked,"onUpdate:modelValue":a=>E.value[o.OptionUUID].checked=a,disabled:v(g),"hide-details":"",onChange:I},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),o.Choices&&o.Choices.length>1&&E.value[o.OptionUUID].checked?(u(),y(q,{key:0,cols:"12",sm:"6"},{default:r(()=>[i(Ne,{items:o.Choices.sort((a,S)=>a.Title.localeCompare(S.Title)).map(a=>({value:a.TagUUID,title:a.Title})),modelValue:E.value[o.OptionUUID].choiceId,"onUpdate:modelValue":a=>E.value[o.OptionUUID].choiceId=a,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(g),"hide-details":"",onChange:I},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):R("",!0)]),_:2},1024)]),_:2},1024))),128)):R("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const nt={class:"interestList"},ot=Ue({__name:"Interests",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:f}){const l=e,{admin:_=!1,convention:U,disabled:g=!1}=l,T=be(e,"modelValue"),p=Ke.getInstance(),E=O({});try{E.value=JSON.parse(T.value)}catch{}const c=O([]),t=O([]);ae(E.value,s=>{T.value=JSON.stringify(s)});const d=O([]),D=()=>{var V;const s=((V=l.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:V.Value)||"[]";try{const n=JSON.parse(s);c.value=t.value.filter(o=>n.find(a=>a===o.InterestUUID))||[],d.value=[...c.value.map(o=>o.InterestUUID)]}catch{}};"ConventionUUID"in U&&(_?p==null||p.getConventionInterests(U.ConventionUUID).then(s=>{s&&(t.value=s,D())}):p==null||p.getConventionInterests(U.ConventionUUID).then(s=>{s&&(t.value=s,D())})),ae(l,()=>{D()});const I=(s=void 0)=>{setTimeout(()=>f("change",s),100)};return(s,V)=>(u(),$("div",nt,[H("h4",null,j(s.label),1),i(ge,{opened:d.value,"onUpdate:opened":V[0]||(V[0]=n=>d.value=n)},{default:r(()=>[(u(!0),$(F,null,ee(c.value.sort((n,o)=>n.Order>o.Order?1:n.Order==o.Order?0:-1),n=>(u(),y(re,{key:n.InterestUUID},{default:r(()=>[i(J,null,{default:r(()=>[i(q,null,{default:r(()=>[i(ye,{label:`${n.Name} ${n.Price&&n.Price>0?`(${v(Ee).currencySymbol}${n.Price})`:""}`,modelValue:E.value[n.InterestUUID],"onUpdate:modelValue":o=>E.value[n.InterestUUID]=o,disabled:v(g),messages:n.Description,onChange:I},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const ut={class:"ticketList"},it={key:0,class:"text-orange-darken-1"},st=Ue({__name:"Tickets",props:ne({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ne(["change"],["update:modelValue"]),setup(e,{emit:f}){const l=e,{admin:_=!1,convention:U,disabled:g=!1,registrationGroup:T=void 0}=l,p=be(e,"modelValue"),E=Ke.getInstance(),c=O({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(p.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const t=O([]),d=O([]),D=O([]),I=O({required:(a,S=void 0)=>()=>{if(g||!(T!=null&&T.Registration.Leader))return!0;if(S==null){if(c.value.Ticket.length===0&&l.required)return"Must select at least one ticket option.";if(a&&a.ComponentsRequired>0&&c.value.Ticket.includes(a.TicketUUID||"")){let x=0;if(a.TicketComponents.forEach(N=>{c.value.ComponentsChecked.forEach(B=>{N.TicketUUID===B&&(x+=1)})}),x<a.ComponentsRequired)return`Must select ticket ${a.ComponentsRequired} component${a.ComponentsRequired===1?"":"s"}`}}return!0}}),s=()=>{var S;const a=((S=l.items.find(x=>x.Title==="SelectedTickets"))==null?void 0:S.Value)||"[]";try{const x=JSON.parse(a);t.value=d.value.filter(N=>N.Type==="TICKET_TYPE_GROUP"&&x.find(B=>B===N.TicketUUID))||[],D.value=[...t.value.filter(N=>N.Type==="TICKET_TYPE_GROUP").map(N=>N.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(_)E==null||E.getConventionTickets(U.ConventionUUID).then(a=>{a&&(d.value=a,s())});else{const a=l.items.find(S=>S.Title==="SelectedTickets");a&&(E==null||E.getFieldTickets(a.FieldUUID).then(S=>{S&&(d.value=S,s())}))}ae(l,()=>{s()});const V=a=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const S=[];t.value.forEach(x=>{(c.value.Ticket.includes(x.TicketUUID)||c.value.ComponentsChecked.includes(x.TicketUUID))&&S.push(...x.AddonTickets.map(N=>N.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(x=>S.includes(x)),o(a)},n=a=>{const S=d.value.find(x=>x.TicketUUID===c.value.Ticket[0]);if(S)for(;c.value.ComponentsChecked.length>S.ComponentsRequired;)c.value.ComponentsChecked.shift();o(a)},o=(a=void 0)=>{p.value=JSON.stringify(c.value),setTimeout(()=>f("change",a),100)};try{T!=null&&T.TicketData&&(c.value=JSON.parse(T.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),o())}catch{}return(a,S)=>{var x;return u(),$("div",ut,[H("h4",null,[K(j(a.label)+" ",1),(x=v(T))!=null&&x.Registration.Leader?R("",!0):(u(),$("small",it,"(controlled by group leader)"))]),i(ge,{opened:D.value,"onUpdate:opened":S[4]||(S[4]=N=>D.value=N)},{default:r(()=>[(u(!0),$(F,null,ee(v(Fe)(t.value.filter(N=>N.Type===v(rl).TICKET_TYPE_GROUP)),N=>(u(),$(F,{key:N.TicketUUID},[N.Tickets.length>0?(u(),y(sl,{key:0,value:N.TicketUUID},{activator:r(({props:B})=>[i(re,fe(B,{"prepend-icon":"mdi:mdi-group"}),{default:r(()=>[i(Me,null,{default:r(()=>[H("strong",null,j(N.Name),1)]),_:2},1024),i(ke,{class:"d-inline"},{default:r(()=>[K(j(N.Description),1)]),_:2},1024)]),_:2},1040)]),default:r(()=>[(u(!0),$(F,null,ee(N.Tickets,B=>(u(),y(re,{key:B.TicketUUID,class:"override-pl"},{default:r(()=>{var b;return[i(ke,{class:"d-inline"},{default:r(()=>[K(j(B.Description),1)]),_:2},1024),i(ye,{modelValue:c.value.Ticket,"onUpdate:modelValue":S[0]||(S[0]=m=>c.value.Ticket=m),value:B.TicketUUID,onChange:V,rules:[I.value.required(B)],"validate-on":"submit",disabled:v(g)||!((b=v(T))!=null&&b.Registration.Leader)},{label:r(()=>[i(Se,{icon:B.RequiresAccommodation?"mdi:mdi-home":B.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+j(`${B.Name} ${B.Price>0?`(${v(Ee).currencySymbol}${B.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&B.TicketUUID===c.value.Ticket[0]?(u(),$(F,{key:0},[B.AddonTickets.length?(u(),y(ge,{key:0},{default:r(()=>[(u(!0),$(F,null,ee(v(Fe)(B.AddonTickets),m=>(u(),$(F,{key:m==null?void 0:m.TicketUUID},[m?(u(),y(re,{key:0},{default:r(()=>[i(Me,null,{default:r(()=>{var A;return[i(ye,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":S[1]||(S[1]=C=>c.value.AddonsChecked=C),value:m.TicketUUID,onChange:S[2]||(S[2]=C=>{c.value.ComponentsChecked=[],o(C)}),disabled:v(g)||!((A=v(T))!=null&&A.Registration.Leader)},{label:r(()=>[i(Se,{icon:m.RequiresAccommodation?"mdi:mdi-home-plus":m.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+j(`${m.Name} ${m.Price>0?`(${v(Ee).currencySymbol}${m.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),i(ke,{class:"d-inline"},{default:r(()=>[K(j(m.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0),B.TicketComponents.length?(u(),y(ge,{key:1},{default:r(()=>[(u(!0),$(F,null,ee(v(Fe)(B.TicketComponents),m=>(u(),$(F,{key:m==null?void 0:m.TicketUUID},[m?(u(),y(re,{key:0},{default:r(()=>[i(Me,null,{default:r(()=>{var A;return[i(ye,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":S[3]||(S[3]=C=>c.value.ComponentsChecked=C),value:m.TicketUUID,onChange:n,rules:[I.value.required(B,m)],"validate-on":"submit",disabled:v(g)||!((A=v(T))!=null&&A.Registration.Leader)},{label:r(()=>[i(Se,{icon:m.RequiresAccommodation?"mdi:mdi-home-plus":m.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+j(`${m.Name} ${m.Price>0?`(${v(Ee).currencySymbol}${m.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),i(ke,null,{default:r(()=>[K(j(m.Description),1)]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0)],64)):R("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):R("",!0)],64))),128))]),_:1},8,["opened"])])}}});const rt={key:0},dt=H("strong",null,"Your Sharing Group",-1),ct={class:"d-flex flex-wrap my-2"},vt=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),mt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},ft={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},gt=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),ht={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},pt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},yt=["href","onClick"],Ut=H("br",null,null,-1),bt=H("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),It=H("strong",null,"Your Groups Accommodation",-1),Tt=H("br",null,null,-1),Dt=H("small",null,"(in order of preference, controlled by group leader)",-1),Vt=H("strong",null,"Accommodation Options",-1),Ct=H("br",null,null,-1),kt=H("strong",null,"Your Chosen Accommodation",-1),Et=H("small",null,"(in order of preference)",-1),St=Ue({__name:"Accommodation",props:ne({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ne(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const l=e,{admin:_=!1,convention:U,disabled:g}=l,T=be(e,"modelValue"),p=He(l,f,void 0,void 0,"items"),E=ul(),c=Pl(),t=hl.getInstance(),d=O(De(T.value)),D=O([]),I=O(),s=O({sharing:!1}),V=()=>{try{const h=JSON.parse(l.data);h&&(s.value=h)}catch{}};V(),ae(l,()=>{V(),l.registrationGroup&&(D.value=l.registrationGroup.Members,I.value=l.registrationGroup.Registration)}),ae(d,h=>{T.value=De(h)},{deep:!0});const n=O(""),o=O(!1),a=()=>{var h;(h=I.value)!=null&&h.Leader&&E.getRegistrationInvite(U.ConventionUUID).then(w=>{if(w){const ce=new URL(location.href);ce.searchParams.set("token",w),n.value=ce.toString()}})},S=()=>{Ol(n.value),a(),o.value=!0,setTimeout(()=>o.value=!1,2200)},x=(h=void 0)=>{setTimeout(()=>f("change",h),100)},N=O({required:h=>!l.required||h.length>0||"Selections Required"}),B=h=>h?`#${h.Reference} ${h.Name}`:"",b=()=>{t.emit("registration.group.leave")},m=h=>{t.emit("registration.group.remove.member",h)},A=O([]);ae(p,()=>{C()});const C=()=>{_?E.getConventionAccommodation(U.ConventionUUID).then(h=>{A.value=h.filter(w=>!!(p!=null&&p.value.find(ce=>ce.Value===w.AccommodationUUID)))||[]}):p.value.length>0&&E.getFieldAccommodation(p.value[0].FieldUUID).then(h=>{A.value=h.filter(w=>!!(p!=null&&p.value.find(ce=>ce.Value===w.AccommodationUUID)))||[]})};C(),(()=>{var h;if(l.registrationGroup)if(D.value=l.registrationGroup.Members,I.value=l.registrationGroup.Registration,(h=I.value)!=null&&h.Leader)a();else try{d.value=JSON.parse(l.registrationGroup.AccommodationData),x()}catch{}})();const M=O({column:0,id:""}),oe=()=>{!g&&!d.value.includes(M.value.id)&&(M.value.column===0&&M.value.id!==""&&d.value.push(M.value.id),x())},de=()=>{const h=d.value.findIndex(w=>w===M.value.id);!g&&h>=0&&(d.value.splice(h,1),x())},he=()=>{if(g||M.value.column!==1)return;const h=d.value.findIndex(w=>w===M.value.id);h<=0||(el(d.value,h,h-1),x())},X=()=>{if(g||M.value.column!==1)return;const h=d.value.findIndex(w=>w===M.value.id);h>=d.value.length-1||(el(d.value,h,h+1),x())};return(h,w)=>{var ce;return u(),$(F,null,[H("h4",null,j(h.label),1),i(J,null,{default:r(()=>[i(q,{cols:"12"},{default:r(()=>{var P,le;return[D.value&&I.value&&s.value.sharing?(u(),$("div",rt,[dt,!v(g)&&((P=D.value.find(z=>z.IsLeader))==null?void 0:P.UUID)!==I.value.RegistrationUUID?(u(),y(ve,{key:0,color:"red",variant:"text",onClick:b},{default:r(()=>[K("(leave group)")]),_:1})):R("",!0),H("dl",ct,[vt,H("dd",mt,[i(Ze,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((le=D.value.find(z=>z.IsLeader))==null?void 0:le.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),H("div",ft,j(B(D.value.find(z=>z.IsLeader))),1)]),(u(!0),$(F,null,ee(D.value,z=>(u(),$(F,{key:z.UUID},[z.IsLeader?R("",!0):(u(),$(F,{key:0},[gt,H("dd",ht,[i(Ze,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(z.UserUUID),height:"32",width:"32"},null,8,["src"]),H("div",pt,[K(j(B(z))+" ",1),I.value.Leader?(u(),y(ve,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:Ye=>m(z.UUID),disabled:v(g)},null,8,["onClick","disabled"])):R("",!0)])])],64))],64))),128))]),i(wl,{modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=z=>o.value=z),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),n.value&&I.value.Leader&&!v(g)?(u(),$(F,{key:1},[H("a",{href:n.value,onClick:ol(S,["prevent"]),class:"text-white text-decoration-none"},[i(ve,{color:"blue",class:"mb-2"},{default:r(()=>[K("Get Invite Link")]),_:1})],8,yt),Ut,bt],64)):R("",!0)])):R("",!0)]}),_:1})]),_:1}),I.value&&!I.value.Leader?(u(),y(J,{key:0},{default:r(()=>[i(q,{cols:"10",md:"5"},{default:r(()=>[It,Tt,Dt,i(ge,null,{default:r(()=>[(u(!0),$(F,null,ee(d.value.map(P=>A.value.find(le=>le.AccommodationUUID==P)).filter(P=>P!==void 0),(P,le)=>(u(),$(F,null,[P?(u(),y(re,{key:P.AccommodationUUID,title:`${le+1}. ${P.Name}`,class:$e(M.value.column===1&&M.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):R("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(u(),y(J,{key:1},{default:r(()=>[i(q,{cols:"12",md:"5"},{default:r(()=>[Vt,Ct,i(ge,null,{default:r(()=>[(u(!0),$(F,null,ee(A.value,P=>(u(),y(re,{key:P.AccommodationUUID,title:P.Name,class:$e(M.value.column===0&&M.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>M.value={column:0,id:P.AccommodationUUID},"append-icon":v(g)?"":"mdi:mdi-gesture-tap",onDblclick:w[1]||(w[1]=le=>oe())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(g)?R("",!0):(u(),y(q,{key:0,cols:"12",md:"1"},{default:r(()=>[i(J,{class:"d-md-none"},{default:r(()=>[i(q,{cols:"12",class:"text-center"},{default:r(()=>[i(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:w[2]||(w[2]=P=>oe()),color:"primary",title:"Select"}),K("   "),i(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:w[3]||(w[3]=P=>de()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),i(J,{class:"d-none d-md-flex h-100 align-content-center"},{default:r(()=>[i(q,{cols:"12"},{default:r(()=>[i(ve,{icon:"mdi:mdi-arrow-right",size:"small",onClick:w[4]||(w[4]=P=>oe()),color:"primary",title:"Select"})]),_:1}),i(q,{cols:"12"},{default:r(()=>[i(ve,{icon:"mdi:mdi-arrow-left",size:"small",onClick:w[5]||(w[5]=P=>de()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),i(q,{cols:"10",md:"5"},{default:r(()=>[kt,i(ge,null,{default:r(()=>[(u(!0),$(F,null,ee(d.value.map(P=>A.value.find(le=>le.AccommodationUUID==P)).filter(P=>P!==void 0),(P,le)=>(u(),$(F,null,[P?(u(),y(re,{key:P.AccommodationUUID,title:`${le+1}. ${P.Name}`,class:$e(M.value.column===1&&M.value.id===P.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:z=>M.value={column:1,id:(P==null?void 0:P.AccommodationUUID)||""},"append-icon":v(g)?"":"mdi:mdi-gesture-tap",onDblclick:w[6]||(w[6]=z=>de())},null,8,["title","class","onClick","append-icon"])):R("",!0)],64))),256))]),_:1}),Et]),_:1}),v(g)?R("",!0):(u(),y(q,{key:1,cols:"2",md:"1"},{default:r(()=>[i(J,{class:"d-flex h-100 align-content-center mt-3"},{default:r(()=>[i(q,{cols:"12"},{default:r(()=>[i(ve,{icon:"mdi:mdi-arrow-up",size:"small",onClick:w[7]||(w[7]=P=>he()),color:"primary",title:"Higher Priority"})]),_:1}),i(q,{cols:"12"},{default:r(()=>[i(ve,{icon:"mdi:mdi-arrow-down",size:"small",onClick:w[8]||(w[8]=P=>X()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(ce=I.value)!=null&&ce.Leader?(u(),y(qe,{key:2,modelValue:T.value,"onUpdate:modelValue":w[9]||(w[9]=P=>T.value=P),disabled:v(g)||!1,"persistent-hint":h.persistentHint||!1,"error-messages":h.errorMessages||"",rules:[N.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):R("",!0)],64)}}});const At=Ue({__name:"AgeCheck",props:ne({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ne(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const l=e,_=He(l,f,void 0,void 0,"items"),U=be(e,"modelValue"),g=O({required:t=>!l.required||!!t||"Required.",min:t=>{var a,S;const d=new Date,D=d.getFullYear(),I=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),s=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),V=((a=_.value.find(x=>x.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",n=((S=_.value.find(x=>x.Title=="BEFORE_DATE"))==null?void 0:S.Value)||`${D}-${I}-${s}`,o=E(n);return p(t,n,parseInt(V))||`You must be at least ${V} years old by ${o.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),T=()=>(f("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),p=(t,d,D)=>{if(t>=d)return!1;const I=E(t),V=E(d).getTime()-I.getTime(),n=1e3*60*60*24*365.25;return V/n>=D},E=t=>{const[d,D,I]=t.split("-");return new Date(parseInt(d),parseInt(D)-1,parseInt(I))},c=(t=void 0)=>{setTimeout(()=>f("change",t),100)};return(t,d)=>(u(),y(Ve,{modelValue:U.value,"onUpdate:modelValue":d[0]||(d[0]=D=>U.value=D),type:"date",hint:t.hint||"",label:t.label||"",name:t.name||"",variant:"outlined",disabled:t.disabled||!1,"persistent-hint":t.persistentHint||!1,"error-messages":t.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:T,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ot=we({...Tl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),_t=Be()({name:"VRadio",props:Ot(),setup(e,f){let{slots:l}=f;return Ge(()=>i(il,fe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),l)),{}}});const Rt=we({height:{type:[Number,String],default:"auto"},...Nl(),...nl(Dl(),["multiple"]),trueIcon:{type:je,default:"$radioOn"},falseIcon:{type:je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Lt=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Rt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:l,slots:_}=f;const U=pl(),g=me(()=>e.id||`radio-group-${U}`),T=Le(e,"modelValue");return Ge(()=>{const[p,E]=yl(l),[c,t]=qe.filterProps(e),[d,D]=il.filterProps(e),I=_.label?_.label({label:e.label,props:{for:g.value}}):e.label;return i(qe,fe({class:["v-radio-group",e.class],style:e.style},p,c,{modelValue:T.value,"onUpdate:modelValue":s=>T.value=s,id:g.value}),{..._,default:s=>{let{id:V,messagesId:n,isDisabled:o,isReadonly:a}=s;return i(F,null,[I&&i(ql,{id:V.value},{default:()=>[I]}),i(Vl,fe(d,{id:V.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:o.value,readonly:a.value,"aria-labelledby":I?V.value:void 0,multiple:!1},E,{modelValue:T.value,"onUpdate:modelValue":S=>T.value=S}),_)])}})}),{}}}),tl=Ue({__name:"FormField",props:ne({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:ne(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const l=e,{admin:_=!1,disabled:U=!1,persistentHint:g=!1,required:T=!1}=l,p=O(""),E=be(e,"modelValue"),c=He(l,f,void 0,void 0,"field"),t=O(De(c.value)),d=O({maxlength:n=>!l.maxLength||n.length<=l.maxLength||`Maximum length is ${l.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!l.minLength||n.length>=l.minLength||`Minimum length is ${l.minLength} characters. (Current length: ${n.length})`,required:n=>!l.required||!!n.replace(/\s/g,"")||"Required field."}),D=O(!1),I=O([]),s=O("");try{const n=JSON.parse(E.value);Array.isArray(n)?I.value=n:typeof n=="boolean"?D.value=n:s.value=E.value}catch{D.value=!1,I.value=[],s.value=E.value}ae(D,()=>{E.value=JSON.stringify(D.value),f("input")}),ae(I,()=>{E.value=JSON.stringify(I.value),f("input"),t.value.Type===Z.SELECT&&f("change")},{deep:!0}),ae(s,()=>{E.value=s.value,f("input"),t.value.Type===Z.SELECT&&f("change")}),ae(c.value,()=>{t.value.Type!==c.value.Type?(t.value=De(c.value),D.value=!1,I.value=[],s.value=""):t.value=De(c.value)});const V=(n=void 0)=>{f("change",n)};return(n,o)=>t.value.Type===v(Z).TEXT?(u(),y(Ve,{key:0,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:`${t.value.Label}${v(T)?"*":""}`,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:V},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(Z).DATE?(u(),y(Ve,{key:1,modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=a=>s.value=a),type:"date",name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:V},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(Z).NUMBER?(u(),y(Ve,{key:2,modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=a=>s.value=a),type:"number",name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:V},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(Z).TEXTAREA?(u(),y(Kl,{key:3,modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:V},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(Z).CHECKBOX?(u(),$(F,{key:4},[t.value.Multiple?(u(!0),$(F,{key:0},ee(t.value.Values,a=>(u(),y(ye,{key:a.ID,modelValue:I.value,"onUpdate:modelValue":o[4]||(o[4]=S=>I.value=S),name:n.name,hint:t.value.Hint,label:a.Title,value:a.Value,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,rules:[d.value.required],onChange:V},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(u(),y(ye,{key:1,modelValue:D.value,"onUpdate:modelValue":o[5]||(o[5]=a=>D.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),rules:[a=>!v(T)||!!a||"You must tick to continue!"],onChange:V},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):t.value.Type===v(Z).SELECT?(u(),$(F,{key:5},[!t.value.Autofill&&t.value.Multiple?(u(),y(Ne,{key:0,modelValue:I.value,"onUpdate:modelValue":o[6]||(o[6]=a=>I.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill&&t.value.Multiple?(u(),y(ll,{key:1,modelValue:I.value,"onUpdate:modelValue":o[7]||(o[7]=a=>I.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill?t.value.Autofill?(u(),y(ll,{key:3,modelValue:s.value,"onUpdate:modelValue":o[9]||(o[9]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):R("",!0):(u(),y(Ne,{key:2,modelValue:s.value,"onUpdate:modelValue":o[8]||(o[8]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(U)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):t.value.Type===v(Z).RADIO?(u(),y(Lt,{key:6,modelValue:s.value,"onUpdate:modelValue":o[10]||(o[10]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,rules:[d.value.required],onChange:V},{default:r(()=>[(u(!0),$(F,null,ee(t.value.Values,a=>(u(),y(_t,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):t.value.Type===v(Z).ACCOMMODATION?(u(),y(St,{key:7,modelValue:I.value,"onUpdate:modelValue":o[11]||(o[11]=a=>I.value=a),name:n.name,admin:v(_),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:V},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===v(Z).AGE?(u(),y(At,{key:8,modelValue:s.value,"onUpdate:modelValue":o[12]||(o[12]=a=>s.value=a),name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,onChange:V},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===v(Z).EXTRAS?(u(),y(at,{key:9,modelValue:s.value,"onUpdate:modelValue":o[13]||(o[13]=a=>s.value=a),admin:v(_),convention:n.convention,name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:V},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===v(Z).INTERESTS?(u(),y(ot,{key:10,modelValue:s.value,"onUpdate:modelValue":o[14]||(o[14]=a=>s.value=a),admin:v(_),convention:n.convention,name:n.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:V},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===v(Z).TICKET?(u(),y(st,{key:11,modelValue:s.value,"onUpdate:modelValue":o[15]||(o[15]=a=>s.value=a),admin:v(_),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:v(U)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:V},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):R("",!0)}}),Mt={key:0,class:"my-2 text-white text-center"},wt={key:1,class:"admin-header my-2 text-white text-center"},Pt=["innerHTML"],$t=["innerHTML"],sa=Ue({__name:"FormRenderer",props:ne({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:ne(["close"],["update:modelValue"]),setup(e,{emit:f}){const l=be(e,"modelValue");Ae(l.value.Sections),l.value.Sections.forEach(b=>{b.Fields&&Ae(b.Fields)});const _=O(),U=Hl(),g=ul(),T=O(!1),p=O(!1),E=O(!1),c=O(!1),t=O(!1),d=O(!1),D=O(!1),I=O(!1),s=O(!1),V=O(!1),n=O(!1),o=O((()=>{if(e.data!==void 0){const m=De(e.data);return l.value.Sections.forEach(A=>{A.Fields&&A.Fields.forEach(C=>{const L=e.data.Data.find(M=>M.SectionFieldUUID===C.SectionFieldUUID&&M.SectionFieldUUID==C.SectionFieldUUID);if(L)C.Value=L.Data;else{const M={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:A.ID,SectionUUID:A.SectionUUID,SectionFieldID:C.ID,SectionFieldUUID:C.SectionFieldUUID,Data:C.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};m.Data.push(M),C.Value=""}})}),m}const b={ID:0,SubmissionUUID:xe(),FormID:l.value.ID,FormUUID:l.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:bl.SUBMISSION_STATUS_OPEN};return b.Data=l.value.Sections.map(m=>m.Fields?m.Fields.map(A=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:b.ID,SubmissionUUID:b.SubmissionUUID,SectionID:m.ID,SectionUUID:m.SectionUUID,SectionFieldID:A.ID,SectionFieldUUID:A.SectionFieldUUID,Data:""})):[]).flat(),b})()),a=(b,m,A)=>{const C=o.value.Data.find(L=>L.SectionUUID===b&&L.SectionFieldUUID===m);C&&(C.Data=A)},S=(b,m,A,C,L)=>b&&b.Type===ue.FORM_TYPE_REGISTRATION?m?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":b&&b.Type===ue.FORM_TYPE_ACCOMMODATION?A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":b&&b.Type===ue.FORM_TYPE_DEALER?C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":b&&b.Type===ue.FORM_TYPE_BADGE?L?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(b&&b.Type===ue.FORM_TYPE_ADDITIONAL,"/"),x=({callback:b})=>{g.getRegistrationByConvention(e.convention.ConventionUUID).then(m=>{b&&b("Loading"),g.getAvailableConventionForms(e.convention.ConventionUUID).then(A=>{m.Submissions.forEach((X,h)=>{X.Form||(m.Submissions[h].Form=A.find(w=>w.FormUUID===X.FormUUID))});const C=m.Submissions.find(X=>X.FormUUID===o.value.FormUUID),L=m.Submissions.find(X=>{var h;return((h=X.Form)==null?void 0:h.Type)===ue.FORM_TYPE_ACCOMMODATION}),M=m.Submissions.find(X=>{var h;return((h=X.Form)==null?void 0:h.Type)===ue.FORM_TYPE_ADDITIONAL}),oe=m.Submissions.find(X=>{var h;return((h=X.Form)==null?void 0:h.Type)===ue.FORM_TYPE_DEALER}),de=m.Submissions.find(X=>{var h;return((h=X.Form)==null?void 0:h.Type)===ue.FORM_TYPE_BADGE}),he=S(C==null?void 0:C.Form,L==null?void 0:L.Form,oe==null?void 0:oe.Form,de==null?void 0:de.Form,M==null?void 0:M.Form);ze.push(he)})})},N=({callback:b})=>{var m;(m=_.value)==null||m.validate().then(A=>{A.valid?g.saveSubmission(o.value).then(C=>{C?setTimeout(()=>{B(C,b,1)},1e3):b&&b("Failed to process request")}).catch(()=>{b&&b("Failed to process request")}):b&&b("Errors in form detected, please review and try again.")})},B=(b,m,A=1)=>{g.checkSubmission(b).then(C=>{if(C)if(C.Ready&&C.Submission){if(T.value=!1,o.value=C.Submission,m&&m("Saved"),e.admin)f("close");else if(C.Forms&&C.Forms.length>0){const L=C.Forms.find(h=>h.FormUUID===o.value.FormUUID),M=C.Forms.find(h=>h.Type===ue.FORM_TYPE_ACCOMMODATION),oe=C.Forms.find(h=>h.Type===ue.FORM_TYPE_DEALER),de=C.Forms.find(h=>h.Type===ue.FORM_TYPE_BADGE),he=C.Forms.find(h=>h.Type===ue.FORM_TYPE_ADDITIONAL),X=S(L,M,oe,de,he);ze.push(X)}}else{if(A>5&&(T.value=!0),A>10&&(p.value=!0),A>20&&(E.value=!0),A>30&&(c.value=!0),A>40&&(t.value=!0),A>50&&(d.value=!0),A>60&&(D.value=!0),A>70&&(I.value=!0),A>80&&(s.value=!0),A>90&&(V.value=!0),A>100&&(n.value=!0),A>200){m&&(T.value=!1,p.value=!1,E.value=!1,c.value=!1,t.value=!1,d.value=!1,D.value=!1,I.value=!1,s.value=!1,V.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{B(b,m,A+1)},A<20?1e3*A:2e4)}else m&&(T.value=!1,p.value=!1,E.value=!1,c.value=!1,t.value=!1,d.value=!1,D.value=!1,I.value=!1,s.value=!1,V.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."))}).catch(()=>{m&&(T.value=!1,p.value=!1,E.value=!1,c.value=!1,t.value=!1,d.value=!1,D.value=!1,I.value=!1,s.value=!1,V.value=!1,n.value=!1,m("A problem was encountered during saving, please check form and try again."))})};return(b,m)=>{const A=Ul("router-link");return u(),y(Ll,null,{default:r(()=>[i(Wl,{ref_key:"formValidator",ref:_,onSubmit:m[1]||(m[1]=ol(()=>{},["prevent"]))},{default:r(()=>[l.value.Heading?(u(),$("h1",Mt,j(l.value.Heading),1)):R("",!0),b.admin?(u(),$("h2",wt," (Admin Mode) ")):R("",!0),l.value.Description?(u(),$("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:l.value.Description},null,8,Pt)):R("",!0),(u(!0),$(F,null,ee(l.value.Sections,C=>(u(),y(Gl,{key:`section_${l.value.ID}.${C.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:r(()=>[C.Heading?(u(),y(Yl,{key:0},{default:r(()=>[K(j(C.Heading),1)]),_:2},1024)):R("",!0),C.Description?(u(),y(Jl,{key:1,class:"text-wrap"},{default:r(()=>[H("div",{innerHTML:C.Description},null,8,$t)]),_:2},1024)):R("",!0),C.Fields?(u(),y(Xl,{key:2},{default:r(()=>[(u(!0),$(F,null,ee(C.Fields,L=>(u(),$(F,{key:`field_${l.value.ID}.${C.ID}.${L.ID}`},[L.Field?(u(),y(J,{key:0},{default:r(()=>[i(q,null,{default:r(()=>[b.editable?(u(),y(tl,{key:0,field:L.Field,modelValue:L.Value,"onUpdate:modelValue":M=>L.Value=M,admin:b.admin,convention:b.convention,"registration-group":b.registrationGroup,required:L.Required,"min-length":L.MinLength,"max-length":L.MaxLength,"persistent-hint":!0,onChange:M=>a(C.SectionUUID,L.SectionFieldUUID,L.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(u(),y(tl,{key:1,field:L.Field,modelValue:L.Value,"onUpdate:modelValue":M=>L.Value=M,admin:b.admin,convention:b.convention,"registration-group":b.registrationGroup,required:L.Required,"min-length":L.MinLength,"max-length":L.MaxLength,"persistent-hint":!0,disabled:"",onChange:M=>a(C.SectionUUID,L.SectionFieldUUID,L.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)):R("",!0)]),_:2},1024))),128)),b.preview?R("",!0):(u(),$(F,{key:3},[i(J,null,{default:r(()=>[b.admin?(u(),y(q,{key:1,class:"text-right"},{default:r(()=>[i(ve,{color:"red",onClick:m[0]||(m[0]=C=>f("close"))},{default:r(()=>[K("Cancel")]),_:1})]),_:1})):(u(),y(q,{key:0,class:"text-right"},{default:r(()=>[i(A,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:r(()=>[i(ve,{color:"red"},{default:r(()=>[K("Close")]),_:1})]),_:1})]),_:1})),b.admin||b.editable?(u(),y(q,{key:2,class:"text-left"},{default:r(()=>[i(Qe,{onClick:N,type:"submit"})]),_:1})):(u(),y(q,{key:3,class:"text-left"},{default:r(()=>[i(Qe,{onClick:x,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),T.value?(u(),y(J,{key:0},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):R("",!0),p.value?(u(),y(J,{key:1},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):R("",!0),E.value?(u(),y(J,{key:2},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):R("",!0),c.value?(u(),y(J,{key:3},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Reticulating splines ")]),_:1})]),_:1})):R("",!0),t.value?(u(),y(J,{key:4},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):R("",!0),d.value?(u(),y(J,{key:5},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):R("",!0),D.value?(u(),y(J,{key:6},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):R("",!0),I.value?(u(),y(J,{key:7},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Let's have a race, see if you can inflate a Puffy Paws pool toy by mouth before we finish. ")]),_:1})]),_:1})):R("",!0),s.value?(u(),y(J,{key:8},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):R("",!0),V.value?(u(),y(J,{key:9},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):R("",!0),n.value?(u(),y(J,{key:10},{default:r(()=>[i(q,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[K(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):R("",!0)],64))]),_:1},512)]),_:1})}}});export{ua as F,rl as T,ll as V,tl as _,na as a,ia as b,Z as c,sa as d,oa as e,zl as f,aa as m,Ae as s,Zl as u};
