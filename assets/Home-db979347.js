import{I,r as F,e as E,w as $,J as L,K as t,L as n,M as o,v as m,Q as _,N as u,O as S,U as O,R as g,Z as N,H as U,S as p,$ as b,_ as P}from"./index-39564366.js";import{G as z}from"./userData-a0033275.js";import{_ as G}from"./LoginView.vue_vue_type_script_setup_true_lang-a9472997.js";import{s as M}from"./index-71069b21.js";import{F as y}from"./form-e2a93b7c.js";import{S as Y}from"./submission-56c4c4f1.js";import{u as B}from"./useStoreAPI-bd1cfedc.js";import{c as x}from"./canEditForm-52ba80b9.js";import{s as H}from"./sortSubmissions-0488cfb9.js";import{V as j}from"./VAvatar-2e5c2884.js";import{V as J,a as K,b as Q,c as Z,d as q,e as W}from"./VCard-d31936d9.js";import{V as v}from"./VBtn-d4c4fc40.js";import{V as X}from"./VSpacer-86c3b161.js";import{V as ee,a as te}from"./VRow-8bb5a658.js";import{j as oe}from"./VContainer-b18898cf.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-c2e194b7.js";const ne=["innerHTML"],ae={key:0,class:"font-weight-bold float-left pt-1 w-50"},re=I({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(s){const l=B(),c=b(),f=F(l.GetConventionLogoURL(s.convention.ConventionUUID)),r=F(),i=E(()=>{var e;return x(s.forms,((e=r.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_REGISTRATION)}),C=E(()=>{var e;return x(s.forms,((e=r.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_DEALER)}),R=E(()=>{var e;return x(s.forms,((e=r.value)==null?void 0:e.Submissions)||[],y.FORM_TYPE_ACCOMMODATION)});return $(()=>s.forms,()=>{c.getRegistrationByConvention(s.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((V,T)=>{V.Form||(e.Submissions[T].Form=s.forms.find(D=>D.FormUUID===V.FormUUID))}),H(e.Submissions)):e.Submissions=[],r.value=e)})}),(e,V)=>{const T=L("router-link"),D=L("RouterLink");return t(),n(W,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[m(Q,{class:"flex-1-1 align-content-start"},{default:o(()=>[f.value?(t(),n(j,{key:0,src:f.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):_("",!0),e.convention.Name?(t(),n(J,{key:1,class:"text-center"},{default:o(()=>[u(S(e.convention.Name),1)]),_:1})):_("",!0),e.convention.Description?(t(),n(K,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[O("div",{innerHTML:e.convention.Description},null,8,ne)]),_:1})):_("",!0)]),_:1}),m(Z,null,{default:o(()=>{var k;return[O("dl",null,[(t(!0),g(U,null,N((k=r.value)==null?void 0:k.Submissions,a=>{var A,h,w;return t(),g(U,{key:a.SubmissionUUID},[a.Form?(t(),g(U,{key:0},[a.Form?(t(),g("dt",ae,S(a.Form.Heading),1)):_("",!0),O("dd",null,[u(S(p(Y)(a.Status))+" ",1),((A=a.Form)==null?void 0:A.Type)===p(y).FORM_TYPE_REGISTRATION?(t(),n(T,{key:0,to:`/register/${e.convention.ConventionUUID}/registration`},{default:o(()=>{var d;return[(d=a.Form)!=null&&d.State.Edit&&i.value?(t(),n(v,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[u(" Edit ")]),_:1})):(t(),n(v,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[u("View")]),_:1}))]}),_:2},1032,["to"])):((h=a.Form)==null?void 0:h.Type)===p(y).FORM_TYPE_ACCOMMODATION?(t(),n(T,{key:1,to:`/register/${e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var d;return[(d=a.Form)!=null&&d.State.Edit&&R.value?(t(),n(v,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[u(" Edit ")]),_:1})):(t(),n(v,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[u("View")]),_:1}))]}),_:2},1032,["to"])):((w=a.Form)==null?void 0:w.Type)===p(y).FORM_TYPE_DEALER?(t(),n(T,{key:2,to:`/register/${e.convention.ConventionUUID}/dealer`},{default:o(()=>{var d;return[(d=a.Form)!=null&&d.State.Edit&&C.value?(t(),n(v,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[u(" Edit ")]),_:1})):(t(),n(v,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[u("View")]),_:1}))]}),_:2},1032,["to"])):_("",!0)])],64)):_("",!0)],64)}),128))])]}),_:1}),m(q,null,{default:o(()=>{var k;return[e.convention.DetailLink?(t(),n(v,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[u(S(p(M).buttonDetails),1)]),_:1},8,["href"])):_("",!0),m(X),i.value&&((k=e.forms.find(a=>a.Type===p(y).FORM_TYPE_REGISTRATION))!=null&&k.State.New)?(t(),n(D,{key:1,to:`/register/${e.convention.Slug}`},{default:o(()=>[m(v,{color:"primary"},{default:o(()=>[u(S(p(M).buttonRegister),1)]),_:1})]),_:1},8,["to"])):_("",!0)]}),_:1})]),_:1})}}});const se=P(re,[["__scopeId","data-v-8a20f735"]]),ie=I({__name:"Conventions",setup(s){const l=b(),c=F([]),f=F([]);return l.getOpenConventionsList().then(r=>{r&&(c.value=[...c.value,...r],l.getAvailableConventionForms(c.value.map(i=>i.ConventionUUID)).then(i=>{f.value=[...f.value,...i]}).catch(i=>{console.error(i)}))}),(r,i)=>(t(),n(oe,null,{default:o(()=>[m(te,{class:"justify-center"},{default:o(()=>[(t(!0),g(U,null,N(c.value,C=>(t(),n(ee,{key:C.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[m(se,{convention:C,forms:f.value.filter(R=>R.ConventionUUID===C.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),le={};function ue(s,l){return t(),g("div")}const ce=P(le,[["render",ue]]),me=I({__name:"MainView",emits:["pageTitle"],setup(s,{emit:l}){return l("pageTitle","Scotiacon Registration System"),(c,f)=>(t(),g(U,null,[m(ie),m(ce)],64))}}),Ee=I({__name:"Home",emits:["pageTitle"],setup(s,{emit:l}){const c=z();return l("pageTitle","Telegram Login"),(f,r)=>(t(),g("div",null,[p(c)?(t(),n(me,{key:0,onPageTitle:r[0]||(r[0]=i=>l("pageTitle",i))})):(t(),n(G,{key:1}))]))}});export{Ee as default};
