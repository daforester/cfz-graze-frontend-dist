import{p as Me,r as O,e as de,S as v,y as dl,ah as Qe,al as cl,an as Ze,n as xe,ae as vl,s as _e,u as Re,w as ne,E as Ye,v as s,H as x,x as me,N as q,aA as ml,I as he,a1 as ue,a2 as pe,a5 as Ne,K as o,R as P,U as z,O as j,M as u,Z as ee,L as h,Q as L,a3 as Ie,P as el,ar as Le,$ as ll,Y as fl,ac as Ge,a as gl,ax as hl,J as pl,aB as Je}from"./index-666ceafa.js";import{F as oe}from"./form-29fd1dbb.js";import{a as yl}from"./submission-56c4c4f1.js";import{a as bl,V as ge,u as qe,m as Ul,b as tl,c as Il,d as Tl}from"./VCheckbox-a58ea759.js";import{s as ke}from"./index-26b71cef.js";import{e as Dl,V as ce,a as ae,d as Te,c as Ve,b as al}from"./VList-d91b4ddb.js";import{a as X,V as B}from"./VRow-82ef2ef1.js";import{m as Cl,u as Vl,a as kl,b as El,V as $e,c as Sl}from"./copyToClipboard-1e0f962a.js";import{v as Al,u as Be,V as Ee,z as Ol,j as _l}from"./VContainer-9da15021.js";import{a as Rl,e as Ml,_ as Xe}from"./VChip-568022c1.js";import{k as Ll,l as wl,j as Pl,V as De,f as Fe,m as $l,n as Fl}from"./VTextField-950d7b16.js";import{V as re}from"./VBtn-c7281faf.js";import{V as xl}from"./VTextarea-76ba6832.js";import{m as Nl}from"./VAvatar-07a71531.js";import{G as ql}from"./userData-79211a98.js";import{v as we}from"./v4-a960c1f4.js";import{e as Bl,V as Kl,a as Hl,c as Yl}from"./VCard-fa5f3bb7.js";import{V as Gl}from"./VForm-a1656cee.js";const We=(e,f,t)=>{if(t>=e.length){let _=t-e.length+1;for(;_--;)e.push(void 0)}e.splice(t,0,e.splice(f,1)[0])},Se=e=>{e.sort((f,t)=>(f.Order?f.Order:0)-(t.Order?t.Order:0)),e.forEach((f,t)=>{f.Order=t})},Gt=(e,f)=>{const t=f.indexOf(e);if(t===0)return;const _=e.Order;e.Order=f[t-1].Order,f[t-1].Order=_,Se(f)},Jt=(e,f)=>{const t=f.indexOf(e);if(t>=f.length-1)return;const _=e.Order;e.Order=f[t+1].Order,f[t+1].Order=_,Se(f)},Pe=e=>(Se(e),e),Xt=e=>(f,t)=>f[e]<t[e]?-1:f[e]>t[e]?1:0;var Z=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(Z||{});const Wt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var nl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(nl||{});const jt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,f,t)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),Xl=Me({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Wl(e,f,t){var p;const _=[],y=(t==null?void 0:t.default)??Jl,g=t!=null&&t.filterKeys?Qe(t.filterKeys):!1,T=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return _;e:for(let D=0;D<e.length;D++){const c=e[D],l={},m={};let b=-1;if(f&&!(t!=null&&t.noFilter)){if(typeof c=="object"){const I=g||Object.keys(c);for(const n of I){const i=cl(c,n,c),a=(p=t==null?void 0:t.customKeyFilter)==null?void 0:p[n];if(b=a?a(i,f,c):y(i,f,c),b!==-1&&b!==!1)a?l[n]=b:m[n]=b;else if((t==null?void 0:t.filterMode)==="every")continue e}}else b=y(c,f,c),b!==-1&&b!==!1&&(m.title=b);const E=Object.keys(m).length,r=Object.keys(l).length;if(!E&&!r||(t==null?void 0:t.filterMode)==="union"&&r!==T&&!E||(t==null?void 0:t.filterMode)==="intersection"&&(r!==T||!E))continue}_.push({index:D,matches:{...m,...l}})}return _}function jl(e,f,t,_){const y=O([]),g=O(new Map),T=de(()=>_!=null&&_.transform?v(f).map(_==null?void 0:_.transform):v(f));dl(()=>{const D=typeof t=="function"?t():v(t),c=typeof D!="string"&&typeof D!="number"?"":String(D),l=Wl(T.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),m=v(f),b=[],E=new Map;l.forEach(r=>{let{index:I,matches:n}=r;const i=m[I];b.push(i),E.set(i.value,n)}),y.value=b,g.value=E});function p(D){return g.value.get(D.value)}return{filteredItems:y,filteredMatches:g,getMatches:p}}function zl(e,f,t){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?s(x,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),s("span",{class:"v-autocomplete__mask"},[e.substr(f,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(f+t)])]):e}const Ql=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...Xl({filterKeys:["title"]}),...Cl(),...Ze(Ll({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Nl({transition:!1})},"VAutocomplete"),je=xe()({name:"VAutocomplete",props:Ql(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:t}=f;const{t:_}=vl(),y=O(),g=_e(!1),T=_e(!0),p=O(!1),D=O(),c=Re(e,"menu"),l=de({get:()=>c.value,set:V=>{var J;c.value&&!V&&((J=D.value)!=null&&J.ΨopenChildren)||(c.value=V)}}),m=_e(-1),b=de(()=>{var V;return(V=y.value)==null?void 0:V.color}),{items:E,transformIn:r,transformOut:I}=Dl(e),{textColorClasses:n,textColorStyles:i}=Al(b),a=Re(e,"search",""),k=Re(e,"modelValue",[],V=>r(V===null?[null]:Qe(V)),V=>{const J=I(V);return e.multiple?J:J[0]??null}),N=wl(),{filteredItems:F,getMatches:K}=jl(e,E,()=>T.value?"":a.value),U=de(()=>k.value.map(V=>E.value.find(J=>e.valueComparator(J.value,V.value))||V)),d=de(()=>e.hideSelected?F.value.filter(V=>!U.value.some(J=>J.value===V.value)):F.value),A=de(()=>U.value.map(V=>V.props.value)),C=de(()=>U.value[m.value]),R=de(()=>{var J;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((J=d.value[0])==null?void 0:J.title))&&d.value.length>0&&!T.value&&!p.value}),G=de(()=>e.hideNoData&&!E.value.length||e.readonly||(N==null?void 0:N.isReadonly.value)),le=O(),{onListScroll:ve,onListKeydown:M}=Vl(le,y);function S(V){e.openOnClear&&(l.value=!0),a.value=""}function $(){G.value||(l.value=!0)}function w(V){G.value||(g.value&&(V.preventDefault(),V.stopPropagation()),l.value=!l.value)}function Y(V){var Ue,H,te;if(e.readonly||N!=null&&N.isReadonly.value)return;const J=y.value.selectionStart,Q=A.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(l.value=!0),["Escape"].includes(V.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(V.key)&&(R.value&&["Enter","Tab"].includes(V.key)&&be(F.value[0]),T.value=!0),V.key==="ArrowDown"&&R.value&&((Ue=le.value)==null||Ue.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(m.value<0){V.key==="Backspace"&&!a.value&&(m.value=Q-1);return}const W=m.value;C.value&&be(C.value),m.value=W>=Q-1?Q-2:W}if(V.key==="ArrowLeft"){if(m.value<0&&J>0)return;const W=m.value>-1?m.value-1:Q-1;U.value[W]?m.value=W:(m.value=-1,y.value.setSelectionRange((H=a.value)==null?void 0:H.length,(te=a.value)==null?void 0:te.length))}if(V.key==="ArrowRight"){if(m.value<0)return;const W=m.value+1;U.value[W]?m.value=W:(m.value=-1,y.value.setSelectionRange(0,0))}}}function ye(V){a.value=V.target.value}function ul(){var V;g.value&&(T.value=!0,(V=y.value)==null||V.focus())}function ol(V){g.value=!0,setTimeout(()=>{p.value=!0})}function il(V){p.value=!1}function sl(V){(V==null||V===""&&!e.multiple)&&(k.value=[])}const Ce=_e(!1);function be(V){if(e.multiple){const J=A.value.findIndex(Q=>e.valueComparator(Q,V.value));if(J===-1)k.value=[...k.value,V];else{const Q=[...k.value];Q.splice(J,1),k.value=Q}}else k.value=[V],Ce.value=!0,a.value=V.title,l.value=!1,T.value=!0,Ye(()=>Ce.value=!1)}return ne(g,(V,J)=>{var Q;V!==J&&(V?(Ce.value=!0,a.value=e.multiple?"":String(((Q=U.value.at(-1))==null?void 0:Q.props.title)??""),T.value=!0,Ye(()=>Ce.value=!1)):(!e.multiple&&!a.value?k.value=[]:R.value&&!p.value&&!U.value.some(Ue=>{let{value:H}=Ue;return H===d.value[0].value})&&be(d.value[0]),l.value=!1,a.value="",m.value=-1))}),ne(a,V=>{!g.value||Ce.value||(V&&(l.value=!0),T.value=!V)}),Be(()=>{const V=!!(e.chips||t.chip),J=!!(!e.hideNoData||d.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),Q=k.value.length>0,[Ue]=De.filterProps(e);return s(De,me({ref:y},Ue,{modelValue:a.value,"onUpdate:modelValue":sl,focused:g.value,"onUpdate:focused":H=>g.value=H,validationValue:k.externalValue,dirty:Q,onInput:ye,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Q?void 0:e.placeholder,"onClick:clear":S,"onMousedown:control":$,onKeydown:Y}),{...t,default:()=>s(x,null,[s(kl,me({ref:D,modelValue:l.value,"onUpdate:modelValue":H=>l.value=H,activator:"parent",contentClass:"v-autocomplete__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ul},e.menuProps),{default:()=>[J&&s(ce,{ref:le,selected:A.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:H=>H.preventDefault(),onKeydown:M,onFocusin:ol,onFocusout:il,onScrollPassive:ve,tabindex:"-1"},{default:()=>{var H,te,W;return[(H=t["prepend-item"])==null?void 0:H.call(t),!d.value.length&&!e.hideNoData&&(((te=t["no-data"])==null?void 0:te.call(t))??s(ae,{title:_(e.noDataText)},null)),s(El,{renderless:!0,items:d.value},{default:fe=>{var He;let{item:ie,index:se,itemRef:rl}=fe;const Ke=me(ie.props,{ref:rl,key:se,active:R.value&&se===0?!0:void 0,onClick:()=>be(ie)});return((He=t.item)==null?void 0:He.call(t,{item:ie,index:se,props:Ke}))??s(ae,Ke,{prepend:Ae=>{let{isSelected:Oe}=Ae;return s(x,null,[e.multiple&&!e.hideSelected?s(bl,{key:ie.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ie.props.prependIcon&&s(Ee,{icon:ie.props.prependIcon},null)])},title:()=>{var Ae,Oe;return T.value?ie.title:zl(ie.title,(Ae=K(ie))==null?void 0:Ae.title,((Oe=a.value)==null?void 0:Oe.length)??0)}})}}),(W=t["append-item"])==null?void 0:W.call(t)]}})]}),U.value.map((H,te)=>{var ie;function W(se){se.stopPropagation(),se.preventDefault(),be(H)}const fe={"onClick:close":W,onMousedown(se){se.preventDefault(),se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:H.value,class:["v-autocomplete__selection",te===m.value&&["v-autocomplete__selection--selected",n.value]],style:te===m.value?i.value:{}},[V?t.chip?s(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:H.title}}},{default:()=>{var se;return[(se=t.chip)==null?void 0:se.call(t,{item:H,index:te,props:fe})]}}):s(Rl,me({key:"chip",closable:e.closableChips,size:"small",text:H.title},fe),null):((ie=t.selection)==null?void 0:ie.call(t,{item:H,index:te}))??s("span",{class:"v-autocomplete__selection-text"},[H.title,e.multiple&&te<U.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[q(",")])])])})]),"append-inner":function(){var fe;for(var H=arguments.length,te=new Array(H),W=0;W<H;W++)te[W]=arguments[W];return s(x,null,[(fe=t["append-inner"])==null?void 0:fe.call(t,...te),e.menuIcon?s(Ee,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:w,onClick:ml},null):void 0])}})}),Pl({isFocused:g,isPristine:T,menu:l,search:a,filteredItems:F,select:be},y)}}),Zl={class:"extrasList"},et=he({__name:"Extras",props:ue({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:_=!1,convention:y,disabled:g=!1}=t,T=pe(e,"modelValue"),p=Ne.getInstance(),D=O({});try{D.value=JSON.parse(T.value)}catch{}const c=O([]),l=O([]);ne(t,()=>{b()}),ne(D.value,r=>{for(const I in r)if(r[I].checked){const n=c.value.map(i=>{var a;return(a=i.Options)==null?void 0:a.find(k=>k.OptionUUID===I)});if(n&&n.length>0)try{const i=n[0];r[I].choiceId===""&&i&&i.Choices&&i.Choices.length>0&&(r[I].choiceId=i.Choices[0].TagUUID),r[I].price=i==null?void 0:i.Price}catch{}}else r[I].choiceId="",r[I].price=0;T.value=JSON.stringify(r),E()});const m=de({get:()=>c.value.map(r=>r.ExtraUUID),set:()=>{}}),b=()=>{var I;const r=((I=t.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:I.Value)||"[]";try{const n=JSON.parse(r);c.value=l.value.filter(i=>n.find(a=>a===i.ExtraUUID))||[],m.value=[...c.value.map(i=>i.ExtraUUID)],c.value.forEach(i=>{var a;(a=i.Options)==null||a.forEach(k=>{D.value[k.OptionUUID]||(D.value[k.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in y&&y.Extras.length?(l.value=y.Extras,b()):"ConventionUUID"in y&&(_?p==null||p.getConventionExtras(y.ConventionUUID).then(r=>{r&&(l.value=r,b())}):p==null||p.getAvailableConventionExtras(y.ConventionUUID).then(r=>{r&&(l.value=r,b())}));const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,I)=>(o(),P("div",Zl,[z("h4",null,j(r.label),1),s(ce,{opened:m.value,"onUpdate:opened":I[0]||(I[0]=n=>m.value=n)},{default:u(()=>[(o(!0),P(x,null,ee(c.value,n=>(o(),h(al,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:u(({props:i})=>[s(ae,me({"prepend-icon":"mdi:mdi-group","append-icon":""},i),{default:u(()=>[n.Name?(o(),h(Te,{key:0},{default:u(()=>[z("strong",null,j(n.Name),1)]),_:2},1024)):L("",!0),n.Description?(o(),h(Ve,{key:1,class:"mt-2 d-inline"},{default:u(()=>[q(j(n.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:u(()=>[n.Options?(o(!0),P(x,{key:0},ee(n.Options,i=>(o(),h(ae,{key:i.OptionUUID,class:"override-pl"},{default:u(()=>[s(X,null,{default:u(()=>[s(B,{cols:"12",sm:"6"},{default:u(()=>[s(ge,{label:`${i.Name} ${i.Price&&i.Price!==0?`(${v(ke).currencySymbol}${i.Price})`:""}`,modelValue:D.value[i.OptionUUID].checked,"onUpdate:modelValue":a=>D.value[i.OptionUUID].checked=a,disabled:v(g),"hide-details":"",onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),i.Choices&&i.Choices.length>1&&D.value[i.OptionUUID].checked?(o(),h(B,{key:0,cols:"12",sm:"6"},{default:u(()=>[s($e,{items:i.Choices.sort((a,k)=>a.Title.localeCompare(k.Title)).map(a=>({value:a.TagUUID,title:a.Title})),modelValue:D.value[i.OptionUUID].choiceId,"onUpdate:modelValue":a=>D.value[i.OptionUUID].choiceId=a,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(g),"hide-details":"",onChange:E},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const lt={class:"interestList"},tt=he({__name:"Interests",props:ue({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:_=!1,convention:y,disabled:g=!1}=t,T=pe(e,"modelValue"),p=Ne.getInstance(),D=O({});try{D.value=JSON.parse(T.value)}catch{}const c=O([]),l=O([]);ne(D.value,r=>{T.value=JSON.stringify(r)});const m=O([]),b=()=>{var I;const r=((I=t.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:I.Value)||"[]";try{const n=JSON.parse(r);c.value=l.value.filter(i=>n.find(a=>a===i.InterestUUID))||[],m.value=[...c.value.map(i=>i.InterestUUID)]}catch{}};"ConventionUUID"in y&&(_?p==null||p.getConventionInterests(y.ConventionUUID).then(r=>{r&&(l.value=r,b())}):p==null||p.getConventionInterests(y.ConventionUUID).then(r=>{r&&(l.value=r,b())})),ne(t,()=>{b()});const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,I)=>(o(),P("div",lt,[z("h4",null,j(r.label),1),s(ce,{opened:m.value,"onUpdate:opened":I[0]||(I[0]=n=>m.value=n)},{default:u(()=>[(o(!0),P(x,null,ee(c.value,n=>(o(),h(ae,{key:n.InterestUUID},{default:u(()=>[s(X,null,{default:u(()=>[s(B,null,{default:u(()=>[s(ge,{label:`${n.Name} ${n.Price&&n.Price>0?`(${v(ke).currencySymbol}${n.Price})`:""}`,modelValue:D.value[n.InterestUUID],"onUpdate:modelValue":i=>D.value[n.InterestUUID]=i,disabled:v(g),messages:n.Description,onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const at={class:"ticketList"},nt={key:0,class:"text-orange-darken-1"},ut=he({__name:"Tickets",props:ue({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:_=!1,convention:y,disabled:g=!1,registrationGroup:T=void 0}=t,p=pe(e,"modelValue"),D=Ne.getInstance(),c=O({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(p.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const l=O([]),m=O([]),b=O([]),E=O({required:(a,k=void 0)=>()=>{if(g||!(T!=null&&T.Registration.Leader))return!0;if(k==null){if(c.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(a&&a.ComponentsRequired>0&&c.value.Ticket.includes(a.TicketUUID||"")){let N=0;if(a.TicketComponents.forEach(F=>{c.value.ComponentsChecked.forEach(K=>{F.TicketUUID===K&&(N+=1)})}),N<a.ComponentsRequired)return`Must select ticket ${a.ComponentsRequired} component${a.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var k;const a=((k=t.items.find(N=>N.Title==="SelectedTickets"))==null?void 0:k.Value)||"[]";try{const N=JSON.parse(a);l.value=m.value.filter(F=>F.Type==="TICKET_TYPE_GROUP"&&N.find(K=>K===F.TicketUUID))||[],b.value=[...l.value.filter(F=>F.Type==="TICKET_TYPE_GROUP").map(F=>F.TicketUUID)]}catch{}};if("ConventionUUID"in y)if(_)D==null||D.getConventionTickets(y.ConventionUUID).then(a=>{a&&(m.value=a,r())});else{const a=t.items.find(k=>k.Title==="SelectedTickets");a&&(D==null||D.getFieldTickets(a.FieldUUID).then(k=>{k&&(m.value=k,r())}))}ne(t,()=>{r()});const I=a=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const k=[];l.value.forEach(N=>{(c.value.Ticket.includes(N.TicketUUID)||c.value.ComponentsChecked.includes(N.TicketUUID))&&k.push(...N.AddonTickets.map(F=>F.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(N=>k.includes(N)),i(a)},n=a=>{const k=m.value.find(N=>N.TicketUUID===c.value.Ticket[0]);if(k)for(;c.value.ComponentsChecked.length>k.ComponentsRequired;)c.value.ComponentsChecked.shift();i(a)},i=(a=void 0)=>{p.value=JSON.stringify(c.value),setTimeout(()=>f("change",a),100)};try{T!=null&&T.TicketData&&(c.value=JSON.parse(T.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),i())}catch{}return(a,k)=>{var N;return o(),P("div",at,[z("h4",null,[q(j(a.label)+" ",1),(N=v(T))!=null&&N.Registration.Leader?L("",!0):(o(),P("small",nt,"(controlled by group leader)"))]),s(ce,{opened:b.value,"onUpdate:opened":k[4]||(k[4]=F=>b.value=F)},{default:u(()=>[(o(!0),P(x,null,ee(v(Pe)(l.value.filter(F=>F.Type===v(nl).TICKET_TYPE_GROUP)),F=>(o(),P(x,{key:F.TicketUUID},[F.Tickets.length>0?(o(),h(al,{key:0,value:F.TicketUUID},{activator:u(({props:K})=>[s(ae,me(K,{"prepend-icon":"mdi:mdi-group"}),{default:u(()=>[s(Te,null,{default:u(()=>[z("strong",null,j(F.Name),1)]),_:2},1024),s(Ve,{class:"d-inline"},{default:u(()=>[q(j(F.Description),1)]),_:2},1024)]),_:2},1040)]),default:u(()=>[(o(!0),P(x,null,ee(F.Tickets,K=>(o(),h(ae,{key:K.TicketUUID,class:"override-pl"},{default:u(()=>{var U;return[s(Ve,{class:"d-inline"},{default:u(()=>[q(j(K.Description),1)]),_:2},1024),s(ge,{modelValue:c.value.Ticket,"onUpdate:modelValue":k[0]||(k[0]=d=>c.value.Ticket=d),value:K.TicketUUID,onChange:I,rules:[E.value.required(K)],"validate-on":"submit",disabled:v(g)||!((U=v(T))!=null&&U.Registration.Leader)},{label:u(()=>[s(Ee,{icon:K.RequiresAccommodation?"mdi:mdi-home":K.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+j(`${K.Name} ${K.Price>0?`(${v(ke).currencySymbol}${K.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&K.TicketUUID===c.value.Ticket[0]?(o(),P(x,{key:0},[K.AddonTickets.length?(o(),h(ce,{key:0},{default:u(()=>[(o(!0),P(x,null,ee(v(Pe)(K.AddonTickets),d=>(o(),P(x,{key:d==null?void 0:d.TicketUUID},[d?(o(),h(ae,{key:0},{default:u(()=>[s(Te,null,{default:u(()=>{var A;return[s(ge,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":k[1]||(k[1]=C=>c.value.AddonsChecked=C),value:d.TicketUUID,onChange:k[2]||(k[2]=C=>{c.value.ComponentsChecked=[],i(C)}),disabled:v(g)||!((A=v(T))!=null&&A.Registration.Leader)},{label:u(()=>[s(Ee,{icon:d.RequiresAccommodation?"mdi:mdi-home-plus":d.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+j(`${d.Name} ${d.Price>0?`(${v(ke).currencySymbol}${d.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Ve,{class:"d-inline"},{default:u(()=>[q(j(d.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),K.TicketComponents.length?(o(),h(ce,{key:1},{default:u(()=>[(o(!0),P(x,null,ee(v(Pe)(K.TicketComponents),d=>(o(),P(x,{key:d==null?void 0:d.TicketUUID},[d?(o(),h(ae,{key:0},{default:u(()=>[s(Te,null,{default:u(()=>{var A;return[s(ge,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":k[3]||(k[3]=C=>c.value.ComponentsChecked=C),value:d.TicketUUID,onChange:n,rules:[E.value.required(K,d)],"validate-on":"submit",disabled:v(g)||!((A=v(T))!=null&&A.Registration.Leader)},{label:u(()=>[s(Ee,{icon:d.RequiresAccommodation?"mdi:mdi-home-plus":d.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),q(" "+j(`${d.Name} ${d.Price>0?`(${v(ke).currencySymbol}${d.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Ve,null,{default:u(()=>[q(j(d.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ot={key:0},it=z("strong",null,"Your Sharing Group",-1),st=["href","onClick"],rt=z("br",null,null,-1),dt=z("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ct=z("strong",null,"Your Groups Accommodation",-1),vt=z("br",null,null,-1),mt=z("small",null,"(in order of preference, controlled by group leader)",-1),ft=z("strong",null,"Accommodation Options",-1),gt=z("br",null,null,-1),ht=z("strong",null,"Your Chosen Accommodation",-1),pt=z("small",null,"(in order of preference)",-1),yt=he({__name:"Accommodation",props:ue({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:_=!1,convention:y,disabled:g}=t,T=pe(e,"modelValue"),p=qe(t,f,void 0,void 0,"items"),D=ll(),c=fl.getInstance(),l=O(Ie(T.value)),m=O([]),b=O(),E=O({sharing:!1}),r=()=>{try{const M=JSON.parse(t.data);M&&(E.value=M)}catch{}};r(),ne(t,()=>{r(),t.registrationGroup&&(m.value=t.registrationGroup.Members,b.value=t.registrationGroup.Registration)}),ne(l,M=>{T.value=Ie(M)},{deep:!0});const I=O(""),n=O(!1),i=()=>{var M;(M=b.value)!=null&&M.Leader&&D.getRegistrationInvite(y.ConventionUUID).then(S=>{if(S){const $=new URL(location.href);$.searchParams.set("token",S),I.value=$.toString()}})},a=()=>{Sl(I.value),i(),n.value=!0,setTimeout(()=>n.value=!1,2200)},k=()=>{c.emit("registration.group.leave")},N=M=>{c.emit("registration.group.remove.member",M)},F=O([]);ne(p,()=>{K()});const K=()=>{_?D.getConventionAccommodation(y.ConventionUUID).then(M=>{F.value=M.filter(S=>!!(p!=null&&p.value.find($=>$.Value===S.AccommodationUUID)))||[]}):p.value.length>0&&D.getFieldAccommodation(p.value[0].FieldUUID).then(M=>{F.value=M.filter(S=>!!(p!=null&&p.value.find($=>$.Value===S.AccommodationUUID)))||[]})};K(),(()=>{var M;if(t.registrationGroup)if(m.value=t.registrationGroup.Members,b.value=t.registrationGroup.Registration,(M=b.value)!=null&&M.Leader)i();else try{l.value=JSON.parse(t.registrationGroup.AccommodationData)}catch{}})();const d=O({column:0,id:""}),A=()=>{!g&&!l.value.includes(d.value.id)&&(d.value.column===0&&d.value.id!==""&&l.value.push(d.value.id),le())},C=()=>{const M=l.value.findIndex(S=>S===d.value.id);!g&&M>=0&&(l.value.splice(M,1),le())},R=()=>{if(g||d.value.column!==1)return;const M=l.value.findIndex(S=>S===d.value.id);M<=0||(We(l.value,M,M-1),le())},G=()=>{if(g||d.value.column!==1)return;const M=l.value.findIndex(S=>S===d.value.id);M>=l.value.length-1||(We(l.value,M,M+1),le())},le=(M=void 0)=>{setTimeout(()=>f("change",M),100)},ve=O({required:M=>!t.required||M.length>0||"Selections Required"});return(M,S)=>{var $;return o(),P(x,null,[z("h4",null,j(M.label),1),s(X,null,{default:u(()=>[s(B,{cols:"12"},{default:u(()=>{var w;return[m.value&&b.value&&E.value.sharing?(o(),P("div",ot,[it,!v(g)&&((w=m.value.find(Y=>Y.IsLeader))==null?void 0:w.UUID)!==b.value.RegistrationUUID?(o(),h(re,{key:0,color:"red",variant:"text",onClick:k},{default:u(()=>[q("(leave group)")]),_:1})):L("",!0),s(ce,null,{default:u(()=>[s(ae,null,{default:u(()=>{var Y;return[s(Te,{class:"float-left pr-2 font-weight-bold"},{default:u(()=>[q(" Leader: ")]),_:1}),q(" "+j((Y=m.value.find(ye=>ye.IsLeader))==null?void 0:Y.Name),1)]}),_:1}),(o(!0),P(x,null,ee(m.value,Y=>(o(),P(x,{key:Y.UUID},[Y.IsLeader?L("",!0):(o(),h(ae,{key:0},{append:u(()=>[b.value.Leader?(o(),h(re,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:ye=>N(Y.UUID),disabled:v(g)},null,8,["onClick","disabled"])):L("",!0)]),default:u(()=>[s(Te,{class:"float-left pr-2"},{default:u(()=>[q(" Member: ")]),_:1}),q(" "+j(Y.Name),1)]),_:2},1024))],64))),128))]),_:1}),s(Ml,{modelValue:n.value,"onUpdate:modelValue":S[0]||(S[0]=Y=>n.value=Y),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),I.value&&b.value.Leader&&!v(g)?(o(),P(x,{key:1},[z("a",{href:I.value,onClick:el(a,["prevent"]),class:"text-white text-decoration-none"},[s(re,{color:"blue"},{default:u(()=>[q("Get Invite Link")]),_:1})],8,st),rt,dt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),b.value&&!b.value.Leader?(o(),h(X,{key:0},{default:u(()=>[s(B,{cols:"10",md:"5"},{default:u(()=>[ct,vt,mt,s(ce,null,{default:u(()=>[(o(!0),P(x,null,ee(l.value.map(w=>F.value.find(Y=>Y.AccommodationUUID==w)).filter(w=>w!==void 0),(w,Y)=>(o(),P(x,null,[w?(o(),h(ae,{key:w.AccommodationUUID,title:`${Y+1}. ${w.Name}`,class:Le(d.value.column===1&&d.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),h(X,{key:1},{default:u(()=>[s(B,{cols:"12",md:"5"},{default:u(()=>[ft,gt,s(ce,null,{default:u(()=>[(o(!0),P(x,null,ee(F.value,w=>(o(),h(ae,{key:w.AccommodationUUID,title:w.Name,class:Le(d.value.column===0&&d.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Y=>d.value={column:0,id:w.AccommodationUUID},"append-icon":v(g)?"":"mdi:mdi-gesture-tap",onDblclick:S[1]||(S[1]=Y=>A())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(g)?L("",!0):(o(),h(B,{key:0,cols:"12",md:"1"},{default:u(()=>[s(X,{class:"d-md-none"},{default:u(()=>[s(B,{cols:"12",class:"text-center"},{default:u(()=>[s(re,{icon:"mdi:mdi-arrow-down",size:"small",onClick:S[2]||(S[2]=w=>A()),color:"primary",title:"Select"}),q("   "),s(re,{icon:"mdi:mdi-arrow-up",size:"small",onClick:S[3]||(S[3]=w=>C()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(X,{class:"d-none d-md-flex h-100 align-content-center"},{default:u(()=>[s(B,{cols:"12"},{default:u(()=>[s(re,{icon:"mdi:mdi-arrow-right",size:"small",onClick:S[4]||(S[4]=w=>A()),color:"primary",title:"Select"})]),_:1}),s(B,{cols:"12"},{default:u(()=>[s(re,{icon:"mdi:mdi-arrow-left",size:"small",onClick:S[5]||(S[5]=w=>C()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(B,{cols:"10",md:"5"},{default:u(()=>[ht,s(ce,null,{default:u(()=>[(o(!0),P(x,null,ee(l.value.map(w=>F.value.find(Y=>Y.AccommodationUUID==w)).filter(w=>w!==void 0),(w,Y)=>(o(),P(x,null,[w?(o(),h(ae,{key:w.AccommodationUUID,title:`${Y+1}. ${w.Name}`,class:Le(d.value.column===1&&d.value.id===w.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ye=>d.value={column:1,id:(w==null?void 0:w.AccommodationUUID)||""},"append-icon":v(g)?"":"mdi:mdi-gesture-tap",onDblclick:S[6]||(S[6]=ye=>C())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),pt]),_:1}),v(g)?L("",!0):(o(),h(B,{key:1,cols:"2",md:"1"},{default:u(()=>[s(X,{class:"d-flex h-100 align-content-center mt-3"},{default:u(()=>[s(B,{cols:"12"},{default:u(()=>[s(re,{icon:"mdi:mdi-arrow-up",size:"small",onClick:S[7]||(S[7]=w=>R()),color:"primary",title:"Higher Priority"})]),_:1}),s(B,{cols:"12"},{default:u(()=>[s(re,{icon:"mdi:mdi-arrow-down",size:"small",onClick:S[8]||(S[8]=w=>G()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),($=b.value)!=null&&$.Leader?(o(),h(Fe,{key:2,modelValue:T.value,"onUpdate:modelValue":S[9]||(S[9]=w=>T.value=w),disabled:v(g)||!1,"persistent-hint":M.persistentHint||!1,"error-messages":M.errorMessages||"",rules:[ve.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):L("",!0)],64)}}});const bt=he({__name:"AgeCheck",props:ue({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:ue(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const t=e,_=qe(t,f,void 0,void 0,"items"),y=pe(e,"modelValue"),g=O({required:l=>!t.required||!!l||"Required.",min:l=>{var a,k;const m=new Date,b=m.getFullYear(),E=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),I=((a=_.value.find(N=>N.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",n=((k=_.value.find(N=>N.Title=="BEFORE_DATE"))==null?void 0:k.Value)||`${b}-${E}-${r}`,i=D(n);return p(l,n,parseInt(I))||`You must be at least ${I} years old by ${i.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),T=()=>(f("blur"),!(g.value.min(y.value||"")!==!0||g.value.required(y.value||"")!==!0)),p=(l,m,b)=>{if(l>=m)return!1;const E=D(l),I=D(m).getTime()-E.getTime(),n=1e3*60*60*24*365.25;return I/n>=b},D=l=>{const[m,b,E]=l.split("-");return new Date(parseInt(m),parseInt(b)-1,parseInt(E))},c=(l=void 0)=>{setTimeout(()=>f("change",l),100)};return(l,m)=>(o(),h(De,{modelValue:y.value,"onUpdate:modelValue":m[0]||(m[0]=b=>y.value=b),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:T,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ut=Me({...Ul({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),It=xe()({name:"VRadio",props:Ut(),setup(e,f){let{slots:t}=f;return Be(()=>s(tl,me(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}});const Tt=Me({height:{type:[Number,String],default:"auto"},...$l(),...Ze(Il(),["multiple"]),trueIcon:{type:Ge,default:"$radioOn"},falseIcon:{type:Ge,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Dt=xe()({name:"VRadioGroup",inheritAttrs:!1,props:Tt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:t,slots:_}=f;const y=gl(),g=de(()=>e.id||`radio-group-${y}`),T=Re(e,"modelValue");return Be(()=>{const[p,D]=hl(t),[c,l]=Fe.filterProps(e),[m,b]=tl.filterProps(e),E=_.label?_.label({label:e.label,props:{for:g.value}}):e.label;return s(Fe,me({class:["v-radio-group",e.class],style:e.style},p,c,{modelValue:T.value,"onUpdate:modelValue":r=>T.value=r,id:g.value}),{..._,default:r=>{let{id:I,messagesId:n,isDisabled:i,isReadonly:a}=r;return s(x,null,[E&&s(Fl,{id:I.value},{default:()=>[E]}),s(Tl,me(m,{id:I.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:i.value,readonly:a.value,"aria-labelledby":E?I.value:void 0,multiple:!1},D,{modelValue:T.value,"onUpdate:modelValue":k=>T.value=k}),_)])}})}),{}}}),ze=he({__name:"FormField",props:ue({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:ue(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const t=e,{admin:_=!1,disabled:y=!1,persistentHint:g=!1,required:T=!1}=t,p=O(""),D=pe(e,"modelValue"),c=qe(t,f,void 0,void 0,"field"),l=O(Ie(c.value)),m=O({maxlength:n=>!t.maxLength||n.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!t.minLength||n.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${n.length})`,required:n=>!t.required||!!n.replace(/\s/g,"")||"Required field."}),b=O(!1),E=O([]),r=O("");try{const n=JSON.parse(D.value);Array.isArray(n)?E.value=n:typeof n=="boolean"?b.value=n:r.value=D.value}catch{b.value=!1,E.value=[],r.value=D.value}ne(b,()=>{D.value=JSON.stringify(b.value),f("input")}),ne(E,()=>{D.value=JSON.stringify(E.value),f("input"),l.value.Type===Z.SELECT&&f("change")},{deep:!0}),ne(r,()=>{D.value=r.value,f("input"),l.value.Type===Z.SELECT&&f("change")}),ne(c.value,()=>{l.value.Type!==c.value.Type?(l.value=Ie(c.value),b.value=!1,E.value=[],r.value=""):l.value=Ie(c.value)});const I=(n=void 0)=>{f("change",n)};return(n,i)=>l.value.Type===v(Z).TEXT?(o(),h(De,{key:0,modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:`${l.value.Label}${v(T)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(Z).DATE?(o(),h(De,{key:1,modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=a=>r.value=a),type:"date",name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(Z).NUMBER?(o(),h(De,{key:2,modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=a=>r.value=a),type:"number",name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(Z).TEXTAREA?(o(),h(xl,{key:3,modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:I},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(Z).CHECKBOX?(o(),P(x,{key:4},[l.value.Multiple?(o(!0),P(x,{key:0},ee(l.value.Values,a=>(o(),h(ge,{key:a.ID,modelValue:E.value,"onUpdate:modelValue":i[4]||(i[4]=k=>E.value=k),name:n.name,hint:l.value.Hint,label:a.Title,value:a.Value,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,rules:[m.value.required],onChange:I},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),h(ge,{key:1,modelValue:b.value,"onUpdate:modelValue":i[5]||(i[5]=a=>b.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),rules:[a=>!v(T)||!!a||"You must tick to continue!"],onChange:I},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===v(Z).SELECT?(o(),P(x,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),h($e,{key:0,modelValue:E.value,"onUpdate:modelValue":i[6]||(i[6]=a=>E.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),h(je,{key:1,modelValue:E.value,"onUpdate:modelValue":i[7]||(i[7]=a=>E.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),h(je,{key:3,modelValue:r.value,"onUpdate:modelValue":i[9]||(i[9]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(o(),h($e,{key:2,modelValue:r.value,"onUpdate:modelValue":i[8]||(i[8]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(y)||!1,"persistent-hint":v(g)||!1,"error-messages":p.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===v(Z).RADIO?(o(),h(Dt,{key:6,modelValue:r.value,"onUpdate:modelValue":i[10]||(i[10]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,rules:[m.value.required],onChange:I},{default:u(()=>[(o(!0),P(x,null,ee(l.value.Values,a=>(o(),h(It,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(Z).ACCOMMODATION?(o(),h(yt,{key:7,modelValue:E.value,"onUpdate:modelValue":i[11]||(i[11]=a=>E.value=a),name:n.name,admin:v(_),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:I},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(Z).AGE?(o(),h(bt,{key:8,modelValue:r.value,"onUpdate:modelValue":i[12]||(i[12]=a=>r.value=a),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,onChange:I},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(Z).EXTRAS?(o(),h(et,{key:9,modelValue:r.value,"onUpdate:modelValue":i[13]||(i[13]=a=>r.value=a),admin:v(_),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(Z).INTERESTS?(o(),h(tt,{key:10,modelValue:r.value,"onUpdate:modelValue":i[14]||(i[14]=a=>r.value=a),admin:v(_),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(Z).TICKET?(o(),h(ut,{key:11,modelValue:r.value,"onUpdate:modelValue":i[15]||(i[15]=a=>r.value=a),admin:v(_),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(y)||!1,"persistent-hint":v(g),"error-messages":p.value,required:v(T),onChange:I},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),Ct={key:0,class:"my-2 text-white text-center"},Vt={key:1,class:"admin-header my-2 text-white text-center"},kt=["innerHTML"],Et=["innerHTML"],zt=he({__name:"FormRenderer",props:ue({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:ue(["close"],["update:modelValue"]),setup(e,{emit:f}){const t=pe(e,"modelValue");Se(t.value.Sections),t.value.Sections.forEach(U=>{U.Fields&&Se(U.Fields)});const _=O(),y=ql(),g=ll(),T=O(!1),p=O(!1),D=O(!1),c=O(!1),l=O(!1),m=O(!1),b=O(!1),E=O(!1),r=O(!1),I=O(!1),n=O(!1),i=O((()=>{if(e.data!==void 0){const d=Ie(e.data);return t.value.Sections.forEach(A=>{A.Fields&&A.Fields.forEach(C=>{const R=e.data.Data.find(G=>G.SectionFieldUUID===C.SectionFieldUUID&&G.SectionFieldUUID==C.SectionFieldUUID);if(R)C.Value=R.Data;else{const G={ID:0,SubmissionDataUUID:we(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:A.ID,SectionUUID:A.SectionUUID,SectionFieldID:C.ID,SectionFieldUUID:C.SectionFieldUUID,Data:C.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};d.Data.push(G),C.Value=""}})}),d}const U={ID:0,SubmissionUUID:we(),FormID:t.value.ID,FormUUID:t.value.FormUUID,UserID:(y==null?void 0:y.ID)||0,UserUUID:(y==null?void 0:y.UserUUID)||"",Data:[],Status:yl.SUBMISSION_STATUS_OPEN};return U.Data=t.value.Sections.map(d=>d.Fields?d.Fields.map(A=>({ID:0,SubmissionDataUUID:we(),SubmissionID:U.ID,SubmissionUUID:U.SubmissionUUID,SectionID:d.ID,SectionUUID:d.SectionUUID,SectionFieldID:A.ID,SectionFieldUUID:A.SectionFieldUUID,Data:""})):[]).flat(),U})()),a=(U,d,A)=>{const C=i.value.Data.find(R=>R.SectionUUID===U&&R.SectionFieldUUID===d);C&&(C.Data=A)},k=(U,d,A,C,R)=>U&&U.Type===oe.FORM_TYPE_REGISTRATION?d?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_ACCOMMODATION?A?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_DEALER?C?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":U&&U.Type===oe.FORM_TYPE_BADGE?R?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(U&&U.Type===oe.FORM_TYPE_ADDITIONAL,"/"),N=({callback:U})=>{g.getRegistrationByConvention(e.convention.ConventionUUID).then(d=>{U&&U("Loading"),g.getAvailableConventionForms(e.convention.ConventionUUID).then(A=>{d.Submissions.forEach((S,$)=>{S.Form||(d.Submissions[$].Form=A.find(w=>w.FormUUID===S.FormUUID))});const C=d.Submissions.find(S=>S.FormUUID===i.value.FormUUID),R=d.Submissions.find(S=>{var $;return(($=S.Form)==null?void 0:$.Type)===oe.FORM_TYPE_ACCOMMODATION}),G=d.Submissions.find(S=>{var $;return(($=S.Form)==null?void 0:$.Type)===oe.FORM_TYPE_ADDITIONAL}),le=d.Submissions.find(S=>{var $;return(($=S.Form)==null?void 0:$.Type)===oe.FORM_TYPE_DEALER}),ve=d.Submissions.find(S=>{var $;return(($=S.Form)==null?void 0:$.Type)===oe.FORM_TYPE_BADGE}),M=k(C==null?void 0:C.Form,R==null?void 0:R.Form,le==null?void 0:le.Form,ve==null?void 0:ve.Form,G==null?void 0:G.Form);Je.push(M)})})},F=({callback:U})=>{var d;(d=_.value)==null||d.validate().then(A=>{A.valid?g.saveSubmission(i.value).then(C=>{C?setTimeout(()=>{K(C,U,1)},1e3):U&&U("Failed to process request")}).catch(()=>{U&&U("Failed to process request")}):U&&U("Errors in form detected, please review and try again.")})},K=(U,d,A=1)=>{g.checkSubmission(U).then(C=>{if(C)if(C.Ready&&C.Submission){if(T.value=!1,i.value=C.Submission,d&&d("Saved"),e.admin)f("close");else if(C.Forms&&C.Forms.length>0){const R=C.Forms.find($=>$.FormUUID===i.value.FormUUID),G=C.Forms.find($=>$.Type===oe.FORM_TYPE_ACCOMMODATION),le=C.Forms.find($=>$.Type===oe.FORM_TYPE_DEALER),ve=C.Forms.find($=>$.Type===oe.FORM_TYPE_BADGE),M=C.Forms.find($=>$.Type===oe.FORM_TYPE_ADDITIONAL),S=k(R,G,le,ve,M);Je.push(S)}}else{if(A>5&&(T.value=!0),A>10&&(p.value=!0),A>20&&(D.value=!0),A>30&&(c.value=!0),A>40&&(l.value=!0),A>50&&(m.value=!0),A>60&&(b.value=!0),A>70&&(E.value=!0),A>80&&(r.value=!0),A>90&&(I.value=!0),A>100&&(n.value=!0),A>200){d&&(T.value=!1,p.value=!1,D.value=!1,c.value=!1,l.value=!1,m.value=!1,b.value=!1,E.value=!1,r.value=!1,I.value=!1,n.value=!1,d("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{K(U,d,A+1)},A<20?1e3*A:2e4)}else d&&(T.value=!1,p.value=!1,D.value=!1,c.value=!1,l.value=!1,m.value=!1,b.value=!1,E.value=!1,r.value=!1,I.value=!1,n.value=!1,d("A problem was encountered during saving, please check form and try again."))}).catch(()=>{d&&(T.value=!1,p.value=!1,D.value=!1,c.value=!1,l.value=!1,m.value=!1,b.value=!1,E.value=!1,r.value=!1,I.value=!1,n.value=!1,d("A problem was encountered during saving, please check form and try again."))})};return(U,d)=>{const A=pl("router-link");return o(),h(_l,null,{default:u(()=>[s(Gl,{ref_key:"formValidator",ref:_,onSubmit:d[1]||(d[1]=el(()=>{},["prevent"]))},{default:u(()=>[t.value.Heading?(o(),P("h1",Ct,j(t.value.Heading),1)):L("",!0),U.admin?(o(),P("h2",Vt," (Admin Mode) ")):L("",!0),t.value.Description?(o(),P("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:t.value.Description},null,8,kt)):L("",!0),(o(!0),P(x,null,ee(t.value.Sections,C=>(o(),h(Bl,{key:`section_${t.value.ID}.${C.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:u(()=>[C.Heading?(o(),h(Kl,{key:0},{default:u(()=>[q(j(C.Heading),1)]),_:2},1024)):L("",!0),C.Description?(o(),h(Hl,{key:1,class:"text-wrap"},{default:u(()=>[z("div",{innerHTML:C.Description},null,8,Et)]),_:2},1024)):L("",!0),C.Fields?(o(),h(Yl,{key:2},{default:u(()=>[(o(!0),P(x,null,ee(C.Fields,R=>(o(),P(x,{key:`field_${t.value.ID}.${C.ID}.${R.ID}`},[R.Field?(o(),h(X,{key:0},{default:u(()=>[s(B,null,{default:u(()=>[U.editable?(o(),h(ze,{key:0,field:R.Field,modelValue:R.Value,"onUpdate:modelValue":G=>R.Value=G,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:R.Required,"min-length":R.MinLength,"max-length":R.MaxLength,"persistent-hint":!0,onChange:G=>a(C.SectionUUID,R.SectionFieldUUID,R.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),h(ze,{key:1,field:R.Field,modelValue:R.Value,"onUpdate:modelValue":G=>R.Value=G,admin:U.admin,convention:U.convention,"registration-group":U.registrationGroup,required:R.Required,"min-length":R.MinLength,"max-length":R.MaxLength,"persistent-hint":!0,disabled:"",onChange:G=>a(C.SectionUUID,R.SectionFieldUUID,R.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),U.preview?L("",!0):(o(),P(x,{key:3},[s(X,null,{default:u(()=>[U.admin?(o(),h(B,{key:1,class:"text-right"},{default:u(()=>[s(re,{color:"red",onClick:d[0]||(d[0]=C=>f("close"))},{default:u(()=>[q("Cancel")]),_:1})]),_:1})):(o(),h(B,{key:0,class:"text-right"},{default:u(()=>[s(A,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:u(()=>[s(re,{color:"red"},{default:u(()=>[q("Close")]),_:1})]),_:1})]),_:1})),U.admin||U.editable?(o(),h(B,{key:2,class:"text-left"},{default:u(()=>[s(Xe,{onClick:F,type:"submit"})]),_:1})):(o(),h(B,{key:3,class:"text-left"},{default:u(()=>[s(Xe,{onClick:N,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),T.value?(o(),h(X,{key:0},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),p.value?(o(),h(X,{key:1},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),D.value?(o(),h(X,{key:2},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):L("",!0),c.value?(o(),h(X,{key:3},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Reticulating splines ")]),_:1})]),_:1})):L("",!0),l.value?(o(),h(X,{key:4},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):L("",!0),m.value?(o(),h(X,{key:5},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):L("",!0),b.value?(o(),h(X,{key:6},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):L("",!0),E.value?(o(),h(X,{key:7},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Let's have a race, see if you can inflate a Puffy Paws pool toy by mouth before we finish. ")]),_:1})]),_:1})):L("",!0),r.value?(o(),h(X,{key:8},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):L("",!0),I.value?(o(),h(X,{key:9},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):L("",!0),n.value?(o(),h(X,{key:10},{default:u(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:u(()=>[q(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{Wt as F,nl as T,je as V,ze as _,Jt as a,jt as b,Z as c,zt as d,Xt as e,Xl as f,Gt as m,Se as s,jl as u};
