import{p as Re,r as A,e as oe,S as c,y as dl,ah as Qe,al as cl,an as Ze,n as Ne,ae as ml,s as Oe,u as _e,w as ee,E as Ye,v as s,H as $,x as re,N,aA as vl,I as fe,a1 as le,a2 as ge,a5 as qe,K as o,R as L,U as J,O as Y,M as m,Z as z,L as C,Q as P,a3 as ye,P as el,ar as Le,$ as ll,Y as fl,ac as Ge,a as gl,ax as pl,J as hl,aB as Je}from"./index-e8318105.js";import{F as te}from"./form-29fd1dbb.js";import{a as Ul}from"./submission-56c4c4f1.js";import{a as yl,V as ve,u as xe,m as Il,b as tl,c as bl,d as Tl}from"./VCheckbox-7f42ebd2.js";import{s as Ve}from"./index-26b71cef.js";import{e as Dl,V as se,a as Z,d as Ie,c as Ce,b as al}from"./VList-b21575d1.js";import{a as Q,V as B}from"./VRow-5f4c417a.js";import{m as Cl,u as Vl,a as kl,b as El,V as we,c as Sl}from"./copyToClipboard-1f2cd13a.js";import{v as Al,u as Be,V as ke,z as Ol,j as _l}from"./VContainer-e1270078.js";import{a as Rl,e as Ml,_ as Xe}from"./VChip-4409644a.js";import{k as Ll,l as Pl,j as $l,V as be,f as Fe,m as wl,n as Fl}from"./VTextField-844d1ca8.js";import{V as ie}from"./VBtn-d373672f.js";import{V as Nl}from"./VTextarea-d5a145c7.js";import{m as ql}from"./VAvatar-4b37c661.js";import{G as xl}from"./userData-af5d0c4a.js";import{v as Pe}from"./v4-a960c1f4.js";import{e as Bl,V as Kl,a as Hl,c as Yl}from"./VCard-bc62a89b.js";import{V as Gl}from"./VForm-60c60a9a.js";const je=(e,f,a)=>{if(a>=e.length){let S=a-e.length+1;for(;S--;)e.push(void 0)}e.splice(a,0,e.splice(f,1)[0])},Ee=e=>{e.sort((f,a)=>(f.Order?f.Order:0)-(a.Order?a.Order:0)),e.forEach((f,a)=>{f.Order=a})},Gt=(e,f)=>{const a=f.indexOf(e);if(a===0)return;const S=e.Order;e.Order=f[a-1].Order,f[a-1].Order=S,Ee(f)},Jt=(e,f)=>{const a=f.indexOf(e);if(a>=f.length-1)return;const S=e.Order;e.Order=f[a+1].Order,f[a+1].Order=S,Ee(f)},$e=e=>(Ee(e),e),Xt=e=>(f,a)=>f[e]<a[e]?-1:f[e]>a[e]?1:0;var j=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(j||{});const jt=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var nl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(nl||{});const zt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const Jl=(e,f,a)=>e==null||f==null?-1:e.toString().toLocaleLowerCase().indexOf(f.toString().toLocaleLowerCase()),Xl=Re({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function jl(e,f,a){var h;const S=[],U=(a==null?void 0:a.default)??Jl,g=a!=null&&a.filterKeys?Qe(a.filterKeys):!1,y=Object.keys((a==null?void 0:a.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return S;e:for(let b=0;b<e.length;b++){const d=e[b],l={},v={};let I=-1;if(f&&!(a!=null&&a.noFilter)){if(typeof d=="object"){const T=g||Object.keys(d);for(const t of T){const u=cl(d,t,d),n=(h=a==null?void 0:a.customKeyFilter)==null?void 0:h[t];if(I=n?n(u,f,d):U(u,f,d),I!==-1&&I!==!1)n?l[t]=I:v[t]=I;else if((a==null?void 0:a.filterMode)==="every")continue e}}else I=U(d,f,d),I!==-1&&I!==!1&&(v.title=I);const E=Object.keys(v).length,r=Object.keys(l).length;if(!E&&!r||(a==null?void 0:a.filterMode)==="union"&&r!==y&&!E||(a==null?void 0:a.filterMode)==="intersection"&&(r!==y||!E))continue}S.push({index:b,matches:{...v,...l}})}return S}function zl(e,f,a,S){const U=A([]),g=A(new Map),y=oe(()=>S!=null&&S.transform?c(f).map(S==null?void 0:S.transform):c(f));dl(()=>{const b=typeof a=="function"?a():c(a),d=typeof b!="string"&&typeof b!="number"?"":String(b),l=jl(y.value,d,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),v=c(f),I=[],E=new Map;l.forEach(r=>{let{index:T,matches:t}=r;const u=v[T];I.push(u),E.set(u.value,t)}),U.value=I,g.value=E});function h(b){return g.value.get(b.value)}return{filteredItems:U,filteredMatches:g,getMatches:h}}function Wl(e,f,a){if(f==null)return e;if(Array.isArray(f))throw new Error("Multiple matches is not implemented");return typeof f=="number"&&~f?s($,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,f)]),s("span",{class:"v-autocomplete__mask"},[e.substr(f,a)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(f+a)])]):e}const Ql=Re({autoSelectFirst:{type:[Boolean,String]},search:String,...Xl({filterKeys:["title"]}),...Cl(),...Ze(Ll({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ql({transition:!1})},"VAutocomplete"),ze=Ne()({name:"VAutocomplete",props:Ql(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,f){let{slots:a}=f;const{t:S}=ml(),U=A(),g=Oe(!1),y=Oe(!0),h=A(!1),b=A(),d=_e(e,"menu"),l=oe({get:()=>d.value,set:D=>{var K;d.value&&!D&&((K=b.value)!=null&&K.ΨopenChildren)||(d.value=D)}}),v=Oe(-1),I=oe(()=>{var D;return(D=U.value)==null?void 0:D.color}),{items:E,transformIn:r,transformOut:T}=Dl(e),{textColorClasses:t,textColorStyles:u}=Al(I),n=_e(e,"search",""),i=_e(e,"modelValue",[],D=>r(D===null?[null]:Qe(D)),D=>{const K=T(D);return e.multiple?K:K[0]??null}),p=Pl(),{filteredItems:k,getMatches:w}=zl(e,E,()=>y.value?"":n.value),H=oe(()=>i.value.map(D=>E.value.find(K=>e.valueComparator(K.value,D.value))||D)),V=oe(()=>e.hideSelected?k.value.filter(D=>!H.value.some(K=>K.value===D.value)):k.value),F=oe(()=>H.value.map(D=>D.props.value)),R=oe(()=>H.value[v.value]),de=oe(()=>{var K;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&n.value===((K=V.value[0])==null?void 0:K.title))&&V.value.length>0&&!y.value&&!h.value}),Te=oe(()=>e.hideNoData&&!E.value.length||e.readonly||(p==null?void 0:p.isReadonly.value)),ce=A(),{onListScroll:Me,onListKeydown:O}=Vl(ce,U);function M(D){e.openOnClear&&(l.value=!0),n.value=""}function ue(){Te.value||(l.value=!0)}function _(D){Te.value||(g.value&&(D.preventDefault(),D.stopPropagation()),l.value=!l.value)}function x(D){var Ue,q,W;if(e.readonly||p!=null&&p.isReadonly.value)return;const K=U.value.selectionStart,X=F.value.length;if((v.value>-1||["Enter","ArrowDown","ArrowUp"].includes(D.key))&&D.preventDefault(),["Enter","ArrowDown"].includes(D.key)&&(l.value=!0),["Escape"].includes(D.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(D.key)&&(de.value&&["Enter","Tab"].includes(D.key)&&he(k.value[0]),y.value=!0),D.key==="ArrowDown"&&de.value&&((Ue=ce.value)==null||Ue.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(D.key)){if(v.value<0){D.key==="Backspace"&&!n.value&&(v.value=X-1);return}const G=v.value;R.value&&he(R.value),v.value=G>=X-1?X-2:G}if(D.key==="ArrowLeft"){if(v.value<0&&K>0)return;const G=v.value>-1?v.value-1:X-1;H.value[G]?v.value=G:(v.value=-1,U.value.setSelectionRange((q=n.value)==null?void 0:q.length,(W=n.value)==null?void 0:W.length))}if(D.key==="ArrowRight"){if(v.value<0)return;const G=v.value+1;H.value[G]?v.value=G:(v.value=-1,U.value.setSelectionRange(0,0))}}}function pe(D){n.value=D.target.value}function ul(){var D;g.value&&(y.value=!0,(D=U.value)==null||D.focus())}function il(D){g.value=!0,setTimeout(()=>{h.value=!0})}function ol(D){h.value=!1}function sl(D){(D==null||D===""&&!e.multiple)&&(i.value=[])}const De=Oe(!1);function he(D){if(e.multiple){const K=F.value.findIndex(X=>e.valueComparator(X,D.value));if(K===-1)i.value=[...i.value,D];else{const X=[...i.value];X.splice(K,1),i.value=X}}else i.value=[D],De.value=!0,n.value=D.title,l.value=!1,y.value=!0,Ye(()=>De.value=!1)}return ee(g,(D,K)=>{var X;D!==K&&(D?(De.value=!0,n.value=e.multiple?"":String(((X=H.value.at(-1))==null?void 0:X.props.title)??""),y.value=!0,Ye(()=>De.value=!1)):(!e.multiple&&!n.value?i.value=[]:de.value&&!h.value&&!H.value.some(Ue=>{let{value:q}=Ue;return q===V.value[0].value})&&he(V.value[0]),l.value=!1,n.value="",v.value=-1))}),ee(n,D=>{!g.value||De.value||(D&&(l.value=!0),y.value=!D)}),Be(()=>{const D=!!(e.chips||a.chip),K=!!(!e.hideNoData||V.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),X=i.value.length>0,[Ue]=be.filterProps(e);return s(be,re({ref:U},Ue,{modelValue:n.value,"onUpdate:modelValue":sl,focused:g.value,"onUpdate:focused":q=>g.value=q,validationValue:i.externalValue,dirty:X,onInput:pe,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!a.selection,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:X?void 0:e.placeholder,"onClick:clear":M,"onMousedown:control":ue,onKeydown:x}),{...a,default:()=>s($,null,[s(kl,re({ref:b,modelValue:l.value,"onUpdate:modelValue":q=>l.value=q,activator:"parent",contentClass:"v-autocomplete__content",disabled:Te.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ul},e.menuProps),{default:()=>[K&&s(se,{ref:ce,selected:F.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:O,onFocusin:il,onFocusout:ol,onScrollPassive:Me,tabindex:"-1"},{default:()=>{var q,W,G;return[(q=a["prepend-item"])==null?void 0:q.call(a),!V.value.length&&!e.hideNoData&&(((W=a["no-data"])==null?void 0:W.call(a))??s(Z,{title:S(e.noDataText)},null)),s(El,{renderless:!0,items:V.value},{default:me=>{var He;let{item:ae,index:ne,itemRef:rl}=me;const Ke=re(ae.props,{ref:rl,key:ne,active:de.value&&ne===0?!0:void 0,onClick:()=>he(ae)});return((He=a.item)==null?void 0:He.call(a,{item:ae,index:ne,props:Ke}))??s(Z,Ke,{prepend:Se=>{let{isSelected:Ae}=Se;return s($,null,[e.multiple&&!e.hideSelected?s(yl,{key:ae.value,modelValue:Ae,ripple:!1,tabindex:"-1"},null):void 0,ae.props.prependIcon&&s(ke,{icon:ae.props.prependIcon},null)])},title:()=>{var Se,Ae;return y.value?ae.title:Wl(ae.title,(Se=w(ae))==null?void 0:Se.title,((Ae=n.value)==null?void 0:Ae.length)??0)}})}}),(G=a["append-item"])==null?void 0:G.call(a)]}})]}),H.value.map((q,W)=>{var ae;function G(ne){ne.stopPropagation(),ne.preventDefault(),he(q)}const me={"onClick:close":G,onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:q.value,class:["v-autocomplete__selection",W===v.value&&["v-autocomplete__selection--selected",t.value]],style:W===v.value?u.value:{}},[D?a.chip?s(Ol,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:q.title}}},{default:()=>{var ne;return[(ne=a.chip)==null?void 0:ne.call(a,{item:q,index:W,props:me})]}}):s(Rl,re({key:"chip",closable:e.closableChips,size:"small",text:q.title},me),null):((ae=a.selection)==null?void 0:ae.call(a,{item:q,index:W}))??s("span",{class:"v-autocomplete__selection-text"},[q.title,e.multiple&&W<H.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[N(",")])])])})]),"append-inner":function(){var me;for(var q=arguments.length,W=new Array(q),G=0;G<q;G++)W[G]=arguments[G];return s($,null,[(me=a["append-inner"])==null?void 0:me.call(a,...W),e.menuIcon?s(ke,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:_,onClick:vl},null):void 0])}})}),$l({isFocused:g,isPristine:y,menu:l,search:n,filteredItems:k,select:he},U)}}),Zl={class:"extrasList"},et=fe({__name:"Extras",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:S=!1,convention:U,disabled:g=!1}=a,y=ge(e,"modelValue"),h=qe.getInstance(),b=A({});try{b.value=JSON.parse(y.value)}catch{}const d=A([]),l=A([]);ee(a,()=>{I()}),ee(b.value,r=>{for(const T in r)if(r[T].checked){const t=d.value.map(u=>{var n;return(n=u.Options)==null?void 0:n.find(i=>i.OptionUUID===T)});if(t&&t.length>0)try{const u=t[0];r[T].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(r[T].choiceId=u.Choices[0].TagUUID),r[T].price=u==null?void 0:u.Price}catch{}}else r[T].choiceId="",r[T].price=0;y.value=JSON.stringify(r),E()});const v=oe({get:()=>d.value.map(r=>r.ExtraUUID),set:()=>{}}),I=()=>{var T;const r=((T=a.items.find(t=>t.Title==="SelectedExtras"))==null?void 0:T.Value)||"[]";try{const t=JSON.parse(r);d.value=l.value.filter(u=>t.find(n=>n===u.ExtraUUID))||[],v.value=[...d.value.map(u=>u.ExtraUUID)],d.value.forEach(u=>{var n;(n=u.Options)==null||n.forEach(i=>{b.value[i.OptionUUID]||(b.value[i.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in U&&U.Extras.length?(l.value=U.Extras,I()):"ConventionUUID"in U&&(S?h==null||h.getConventionExtras(U.ConventionUUID).then(r=>{r&&(l.value=r,I())}):h==null||h.getAvailableConventionExtras(U.ConventionUUID).then(r=>{r&&(l.value=r,I())}));const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,T)=>(o(),L("div",Zl,[J("h4",null,Y(r.label),1),s(se,{opened:v.value,"onUpdate:opened":T[0]||(T[0]=t=>v.value=t)},{default:m(()=>[(o(!0),L($,null,z(d.value,t=>(o(),C(al,{key:t.ExtraUUID,value:t.ExtraUUID},{activator:m(({props:u})=>[s(Z,re({"prepend-icon":"mdi:mdi-group","append-icon":""},u),{default:m(()=>[t.Name?(o(),C(Ie,{key:0},{default:m(()=>[J("strong",null,Y(t.Name),1)]),_:2},1024)):P("",!0),t.Description?(o(),C(Ce,{key:1,class:"mt-2 d-inline"},{default:m(()=>[N(Y(t.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:m(()=>[t.Options?(o(!0),L($,{key:0},z(t.Options,u=>(o(),C(Z,{key:u.OptionUUID,class:"override-pl"},{default:m(()=>[s(Q,null,{default:m(()=>[s(B,{cols:"12",sm:"6"},{default:m(()=>[s(ve,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${c(Ve).currencySymbol}${u.Price})`:""}`,modelValue:b.value[u.OptionUUID].checked,"onUpdate:modelValue":n=>b.value[u.OptionUUID].checked=n,disabled:c(g),"hide-details":"",onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&b.value[u.OptionUUID].checked?(o(),C(B,{key:0,cols:"12",sm:"6"},{default:m(()=>[s(we,{items:u.Choices.sort((n,i)=>n.Title.localeCompare(i.Title)).map(n=>({value:n.TagUUID,title:n.Title})),modelValue:b.value[u.OptionUUID].choiceId,"onUpdate:modelValue":n=>b.value[u.OptionUUID].choiceId=n,"item-value":"value","item-title":"title",variant:"outlined",disabled:c(g),"hide-details":"",onChange:E},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const lt={class:"interestList"},tt=fe({__name:"Interests",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:S=!1,convention:U,disabled:g=!1}=a,y=ge(e,"modelValue"),h=qe.getInstance(),b=A({});try{b.value=JSON.parse(y.value)}catch{}const d=A([]),l=A([]);ee(b.value,r=>{y.value=JSON.stringify(r)});const v=A([]),I=()=>{var T;const r=((T=a.items.find(t=>t.Title==="SelectedInterests"))==null?void 0:T.Value)||"[]";try{const t=JSON.parse(r);d.value=l.value.filter(u=>t.find(n=>n===u.InterestUUID))||[],v.value=[...d.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in U&&(S?h==null||h.getConventionInterests(U.ConventionUUID).then(r=>{r&&(l.value=r,I())}):h==null||h.getConventionInterests(U.ConventionUUID).then(r=>{r&&(l.value=r,I())})),ee(a,()=>{I()});const E=(r=void 0)=>{setTimeout(()=>f("change",r),100)};return(r,T)=>(o(),L("div",lt,[J("h4",null,Y(r.label),1),s(se,{opened:v.value,"onUpdate:opened":T[0]||(T[0]=t=>v.value=t)},{default:m(()=>[(o(!0),L($,null,z(d.value,t=>(o(),C(Z,{key:t.InterestUUID},{default:m(()=>[s(Q,null,{default:m(()=>[s(B,null,{default:m(()=>[s(ve,{label:`${t.Name} ${t.Price&&t.Price>0?`(${c(Ve).currencySymbol}${t.Price})`:""}`,modelValue:b.value[t.InterestUUID],"onUpdate:modelValue":u=>b.value[t.InterestUUID]=u,disabled:c(g),messages:t.Description,onChange:E},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const at={class:"ticketList"},nt={key:0,class:"text-orange-darken-1"},ut=fe({__name:"Tickets",props:le({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:S=!1,convention:U,disabled:g=!1,registrationGroup:y=void 0}=a,h=ge(e,"modelValue"),b=qe.getInstance(),d=A({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{d.value=JSON.parse(h.value),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked)}catch{}const l=A([]),v=A([]),I=A([]),E=A({required:(n,i=void 0)=>()=>{if(g||!(y!=null&&y.Registration.Leader))return!0;if(i==null){if(d.value.Ticket.length===0&&a.required)return"Must select at least one ticket option.";if(n&&n.ComponentsRequired>0&&d.value.Ticket.includes(n.TicketUUID||"")){let p=0;if(n.TicketComponents.forEach(k=>{d.value.ComponentsChecked.forEach(w=>{k.TicketUUID===w&&(p+=1)})}),p<n.ComponentsRequired)return`Must select ticket ${n.ComponentsRequired} component${n.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var i;const n=((i=a.items.find(p=>p.Title==="SelectedTickets"))==null?void 0:i.Value)||"[]";try{const p=JSON.parse(n);l.value=v.value.filter(k=>k.Type==="TICKET_TYPE_GROUP"&&p.find(w=>w===k.TicketUUID))||[],I.value=[...l.value.filter(k=>k.Type==="TICKET_TYPE_GROUP").map(k=>k.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(S)b==null||b.getConventionTickets(U.ConventionUUID).then(n=>{n&&(v.value=n,r())});else{const n=a.items.find(i=>i.Title==="SelectedTickets");n&&(b==null||b.getFieldTickets(n.FieldUUID).then(i=>{i&&(v.value=i,r())}))}ee(a,()=>{r()});const T=n=>{d.value.Ticket.length>1&&d.value.Ticket.shift(),d.value.ComponentsChecked=[];const i=[];l.value.forEach(p=>{(d.value.Ticket.includes(p.TicketUUID)||d.value.ComponentsChecked.includes(p.TicketUUID))&&i.push(...p.AddonTickets.map(k=>k.TicketUUID))}),d.value.AddonsChecked=d.value.AddonsChecked.filter(p=>i.includes(p)),u(n)},t=n=>{const i=v.value.find(p=>p.TicketUUID===d.value.Ticket[0]);if(i)for(;d.value.ComponentsChecked.length>i.ComponentsRequired;)d.value.ComponentsChecked.shift();u(n)},u=(n=void 0)=>{h.value=JSON.stringify(d.value),setTimeout(()=>f("change",n),100)};try{y!=null&&y.TicketData&&(d.value=JSON.parse(y.TicketData),"ticket"in d.value&&(d.value.Ticket=d.value.ticket),"addonsChecked"in d.value&&(d.value.AddonsChecked=d.value.addonsChecked),"componentsChecked"in d.value&&(d.value.ComponentsChecked=d.value.componentsChecked),u())}catch{}return(n,i)=>{var p;return o(),L("div",at,[N(Y(h.value)+" ",1),J("h4",null,[N(Y(n.label)+" ",1),(p=c(y))!=null&&p.Registration.Leader?P("",!0):(o(),L("small",nt,"(controlled by group leader)"))]),s(se,{opened:I.value,"onUpdate:opened":i[4]||(i[4]=k=>I.value=k)},{default:m(()=>[(o(!0),L($,null,z(c($e)(l.value.filter(k=>k.Type===c(nl).TICKET_TYPE_GROUP)),k=>(o(),L($,{key:k.TicketUUID},[k.Tickets.length>0?(o(),C(al,{key:0,value:k.TicketUUID},{activator:m(({props:w})=>[s(Z,re(w,{"prepend-icon":"mdi:mdi-group"}),{default:m(()=>[s(Ie,null,{default:m(()=>[J("strong",null,Y(k.Name),1)]),_:2},1024),s(Ce,{class:"d-inline"},{default:m(()=>[N(Y(k.Description),1)]),_:2},1024)]),_:2},1040)]),default:m(()=>[(o(!0),L($,null,z(k.Tickets,w=>(o(),C(Z,{key:w.TicketUUID,class:"override-pl"},{default:m(()=>{var H;return[s(Ce,{class:"d-inline"},{default:m(()=>[N(Y(w.Description),1)]),_:2},1024),s(ve,{modelValue:d.value.Ticket,"onUpdate:modelValue":i[0]||(i[0]=V=>d.value.Ticket=V),value:w.TicketUUID,onChange:T,rules:[E.value.required(w)],"validate-on":"submit",disabled:c(g)||!((H=c(y))!=null&&H.Registration.Leader)},{label:m(()=>[s(ke,{icon:w.RequiresAccommodation?"mdi:mdi-home":w.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+Y(`${w.Name} ${w.Price>0?`(${c(Ve).currencySymbol}${w.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),d.value.Ticket.length>0&&w.TicketUUID===d.value.Ticket[0]?(o(),L($,{key:0},[w.AddonTickets.length?(o(),C(se,{key:0},{default:m(()=>[(o(!0),L($,null,z(c($e)(w.AddonTickets),V=>(o(),L($,{key:V==null?void 0:V.TicketUUID},[V?(o(),C(Z,{key:0},{default:m(()=>[s(Ie,null,{default:m(()=>{var F;return[s(ve,{modelValue:d.value.AddonsChecked,"onUpdate:modelValue":i[1]||(i[1]=R=>d.value.AddonsChecked=R),value:V.TicketUUID,onChange:i[2]||(i[2]=R=>{d.value.ComponentsChecked=[],u(R)}),disabled:c(g)||!((F=c(y))!=null&&F.Registration.Leader)},{label:m(()=>[s(ke,{icon:V.RequiresAccommodation?"mdi:mdi-home-plus":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+Y(`${V.Name} ${V.Price>0?`(${c(Ve).currencySymbol}${V.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Ce,{class:"d-inline"},{default:m(()=>[N(Y(V.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),w.TicketComponents.length?(o(),C(se,{key:1},{default:m(()=>[(o(!0),L($,null,z(c($e)(w.TicketComponents),V=>(o(),L($,{key:V==null?void 0:V.TicketUUID},[V?(o(),C(Z,{key:0},{default:m(()=>[s(Ie,null,{default:m(()=>{var F;return[s(ve,{modelValue:d.value.ComponentsChecked,"onUpdate:modelValue":i[3]||(i[3]=R=>d.value.ComponentsChecked=R),value:V.TicketUUID,onChange:t,rules:[E.value.required(w,V)],"validate-on":"submit",disabled:c(g)||!((F=c(y))!=null&&F.Registration.Leader)},{label:m(()=>[s(ke,{icon:V.RequiresAccommodation?"mdi:mdi-home-plus":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),N(" "+Y(`${V.Name} ${V.Price>0?`(${c(Ve).currencySymbol}${V.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Ce,null,{default:m(()=>[N(Y(V.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const it={key:0},ot=J("strong",null,"Your Sharing Group",-1),st=["href","onClick"],rt=J("br",null,null,-1),dt=J("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),ct=J("strong",null,"Your Groups Accommodation",-1),mt=J("br",null,null,-1),vt=J("small",null,"(in order of preference, controlled by group leader)",-1),ft=J("strong",null,"Accommodation Options",-1),gt=J("br",null,null,-1),pt=J("strong",null,"Your Chosen Accommodation",-1),ht=J("small",null,"(in order of preference)",-1),Ut=fe({__name:"Accommodation",props:le({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:S=!1,convention:U,disabled:g}=a,y=ge(e,"modelValue"),h=xe(a,f,void 0,void 0,"items"),b=ll(),d=fl.getInstance(),l=A(ye(y.value)),v=A([]),I=A(),E=A({sharing:!1}),r=()=>{try{const O=JSON.parse(a.data);O&&(E.value=O)}catch{}};r(),ee(a,()=>{r(),a.registrationGroup&&(v.value=a.registrationGroup.Members,I.value=a.registrationGroup.Registration)}),ee(l,O=>{y.value=ye(O)},{deep:!0});const T=A(""),t=A(!1),u=()=>{var O;(O=I.value)!=null&&O.Leader&&b.getRegistrationInvite(U.ConventionUUID).then(M=>{if(M){const ue=new URL(location.href);ue.searchParams.set("token",M),T.value=ue.toString()}})},n=()=>{Sl(T.value),u(),t.value=!0,setTimeout(()=>t.value=!1,2200)},i=()=>{d.emit("registration.group.leave")},p=O=>{d.emit("registration.group.remove.member",O)},k=A([]);ee(h,()=>{w()});const w=()=>{S?b.getConventionAccommodation(U.ConventionUUID).then(O=>{k.value=O.filter(M=>!!(h!=null&&h.value.find(ue=>ue.Value===M.AccommodationUUID)))||[]}):h.value.length>0&&b.getFieldAccommodation(h.value[0].FieldUUID).then(O=>{k.value=O.filter(M=>!!(h!=null&&h.value.find(ue=>ue.Value===M.AccommodationUUID)))||[]})};w(),(()=>{var O;if(a.registrationGroup)if(v.value=a.registrationGroup.Members,I.value=a.registrationGroup.Registration,(O=I.value)!=null&&O.Leader)u();else try{l.value=JSON.parse(a.registrationGroup.AccommodationData)}catch{}})();const V=A({column:0,id:""}),F=()=>{!g&&!l.value.includes(V.value.id)&&(V.value.column===0&&V.value.id!==""&&l.value.push(V.value.id),ce())},R=()=>{const O=l.value.findIndex(M=>M===V.value.id);!g&&O>=0&&(l.value.splice(O,1),ce())},de=()=>{if(g||V.value.column!==1)return;const O=l.value.findIndex(M=>M===V.value.id);O<=0||(je(l.value,O,O-1),ce())},Te=()=>{if(g||V.value.column!==1)return;const O=l.value.findIndex(M=>M===V.value.id);O>=l.value.length-1||(je(l.value,O,O+1),ce())},ce=(O=void 0)=>{setTimeout(()=>f("change",O),100)},Me=A({required:O=>!a.required||O.length>0||"Selections Required"});return(O,M)=>{var ue;return o(),L($,null,[J("h4",null,Y(O.label),1),s(Q,null,{default:m(()=>[s(B,{cols:"12"},{default:m(()=>{var _;return[v.value&&I.value&&E.value.sharing?(o(),L("div",it,[ot,!c(g)&&((_=v.value.find(x=>x.IsLeader))==null?void 0:_.UUID)!==I.value.RegistrationUUID?(o(),C(ie,{key:0,color:"red",variant:"text",onClick:i},{default:m(()=>[N("(leave group)")]),_:1})):P("",!0),s(se,null,{default:m(()=>[s(Z,null,{default:m(()=>{var x;return[s(Ie,{class:"float-left pr-2 font-weight-bold"},{default:m(()=>[N(" Leader: ")]),_:1}),N(" "+Y((x=v.value.find(pe=>pe.IsLeader))==null?void 0:x.Name),1)]}),_:1}),(o(!0),L($,null,z(v.value,x=>(o(),L($,{key:x.UUID},[x.IsLeader?P("",!0):(o(),C(Z,{key:0},{append:m(()=>[I.value.Leader?(o(),C(ie,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:pe=>p(x.UUID),disabled:c(g)},null,8,["onClick","disabled"])):P("",!0)]),default:m(()=>[s(Ie,{class:"float-left pr-2"},{default:m(()=>[N(" Member: ")]),_:1}),N(" "+Y(x.Name),1)]),_:2},1024))],64))),128))]),_:1}),s(Ml,{modelValue:t.value,"onUpdate:modelValue":M[0]||(M[0]=x=>t.value=x),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),T.value&&I.value.Leader&&!c(g)?(o(),L($,{key:1},[J("a",{href:T.value,onClick:el(n,["prevent"]),class:"text-white text-decoration-none"},[s(ie,{color:"blue"},{default:m(()=>[N("Get Invite Link")]),_:1})],8,st),rt,dt],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),I.value&&!I.value.Leader?(o(),C(Q,{key:0},{default:m(()=>[s(B,{cols:"10",md:"5"},{default:m(()=>[ct,mt,vt,s(se,null,{default:m(()=>[(o(!0),L($,null,z(l.value.map(_=>k.value.find(x=>x.AccommodationUUID==_)).filter(_=>_!==void 0),(_,x)=>(o(),L($,null,[_?(o(),C(Z,{key:_.AccommodationUUID,title:`${x+1}. ${_.Name}`,class:Le(V.value.column===1&&V.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(o(),C(Q,{key:1},{default:m(()=>[s(B,{cols:"12",md:"5"},{default:m(()=>[ft,gt,s(se,null,{default:m(()=>[(o(!0),L($,null,z(k.value,_=>(o(),C(Z,{key:_.AccommodationUUID,title:_.Name,class:Le(V.value.column===0&&V.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:x=>V.value={column:0,id:_.AccommodationUUID},"append-icon":c(g)?"":"mdi:mdi-gesture-tap",onDblclick:M[1]||(M[1]=x=>F())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),c(g)?P("",!0):(o(),C(B,{key:0,cols:"12",md:"1"},{default:m(()=>[s(Q,{class:"d-md-none"},{default:m(()=>[s(B,{cols:"12",class:"text-center"},{default:m(()=>[s(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[2]||(M[2]=_=>F()),color:"primary",title:"Select"}),N("   "),s(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[3]||(M[3]=_=>R()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(Q,{class:"d-none d-md-flex h-100 align-content-center"},{default:m(()=>[s(B,{cols:"12"},{default:m(()=>[s(ie,{icon:"mdi:mdi-arrow-right",size:"small",onClick:M[4]||(M[4]=_=>F()),color:"primary",title:"Select"})]),_:1}),s(B,{cols:"12"},{default:m(()=>[s(ie,{icon:"mdi:mdi-arrow-left",size:"small",onClick:M[5]||(M[5]=_=>R()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(B,{cols:"10",md:"5"},{default:m(()=>[pt,s(se,null,{default:m(()=>[(o(!0),L($,null,z(l.value.map(_=>k.value.find(x=>x.AccommodationUUID==_)).filter(_=>_!==void 0),(_,x)=>(o(),L($,null,[_?(o(),C(Z,{key:_.AccommodationUUID,title:`${x+1}. ${_.Name}`,class:Le(V.value.column===1&&V.value.id===_.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:pe=>V.value={column:1,id:(_==null?void 0:_.AccommodationUUID)||""},"append-icon":c(g)?"":"mdi:mdi-gesture-tap",onDblclick:M[6]||(M[6]=pe=>R())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),ht]),_:1}),c(g)?P("",!0):(o(),C(B,{key:1,cols:"2",md:"1"},{default:m(()=>[s(Q,{class:"d-flex h-100 align-content-center mt-3"},{default:m(()=>[s(B,{cols:"12"},{default:m(()=>[s(ie,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[7]||(M[7]=_=>de()),color:"primary",title:"Higher Priority"})]),_:1}),s(B,{cols:"12"},{default:m(()=>[s(ie,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[8]||(M[8]=_=>Te()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(ue=I.value)!=null&&ue.Leader?(o(),C(Fe,{key:2,modelValue:y.value,"onUpdate:modelValue":M[9]||(M[9]=_=>y.value=_),disabled:c(g)||!1,"persistent-hint":O.persistentHint||!1,"error-messages":O.errorMessages||"",rules:[Me.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):P("",!0)],64)}}});const yt=fe({__name:"AgeCheck",props:le({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:le(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:f}){const a=e,S=xe(a,f,void 0,void 0,"items"),U=ge(e,"modelValue"),g=A({required:l=>!a.required||!!l||"Required.",min:l=>{var n,i;const v=new Date,I=v.getFullYear(),E=(v.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=v.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),T=((n=S.value.find(p=>p.Title=="MIN_AGE"))==null?void 0:n.Value)||"18",t=((i=S.value.find(p=>p.Title=="BEFORE_DATE"))==null?void 0:i.Value)||`${I}-${E}-${r}`,u=b(t);return h(l,t,parseInt(T))||`You must be at least ${T} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),y=()=>(f("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),h=(l,v,I)=>{if(l>=v)return!1;const E=b(l),T=b(v).getTime()-E.getTime(),t=1e3*60*60*24*365.25;return T/t>=I},b=l=>{const[v,I,E]=l.split("-");return new Date(parseInt(v),parseInt(I)-1,parseInt(E))},d=(l=void 0)=>{setTimeout(()=>f("change",l),100)};return(l,v)=>(o(),C(be,{modelValue:U.value,"onUpdate:modelValue":v[0]||(v[0]=I=>U.value=I),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:y,onChange:d},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),It=Re({...Il({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),bt=Ne()({name:"VRadio",props:It(),setup(e,f){let{slots:a}=f;return Be(()=>s(tl,re(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),a)),{}}});const Tt=Re({height:{type:[Number,String],default:"auto"},...wl(),...Ze(bl(),["multiple"]),trueIcon:{type:Ge,default:"$radioOn"},falseIcon:{type:Ge,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Dt=Ne()({name:"VRadioGroup",inheritAttrs:!1,props:Tt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{attrs:a,slots:S}=f;const U=gl(),g=oe(()=>e.id||`radio-group-${U}`),y=_e(e,"modelValue");return Be(()=>{const[h,b]=pl(a),[d,l]=Fe.filterProps(e),[v,I]=tl.filterProps(e),E=S.label?S.label({label:e.label,props:{for:g.value}}):e.label;return s(Fe,re({class:["v-radio-group",e.class],style:e.style},h,d,{modelValue:y.value,"onUpdate:modelValue":r=>y.value=r,id:g.value}),{...S,default:r=>{let{id:T,messagesId:t,isDisabled:u,isReadonly:n}=r;return s($,null,[E&&s(Fl,{id:T.value},{default:()=>[E]}),s(Tl,re(v,{id:T.value,"aria-describedby":t.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:n.value,"aria-labelledby":E?T.value:void 0,multiple:!1},b,{modelValue:y.value,"onUpdate:modelValue":i=>y.value=i}),S)])}})}),{}}}),We=fe({__name:"FormField",props:le({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:le(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:f}){const a=e,{admin:S=!1,disabled:U=!1,persistentHint:g=!1,required:y=!1}=a,h=A(""),b=ge(e,"modelValue"),d=xe(a,f,void 0,void 0,"field"),l=A(ye(d.value)),v=A({maxlength:t=>!a.maxLength||t.length<=a.maxLength||`Maximum length is ${a.maxLength} characters. (Current length: ${t.length})`,minlength:t=>!a.minLength||t.length>=a.minLength||`Minimum length is ${a.minLength} characters. (Current length: ${t.length})`,required:t=>!a.required||!!t.replace(/\s/g,"")||"Required field."}),I=A(!1),E=A([]),r=A("");try{const t=JSON.parse(b.value);Array.isArray(t)?E.value=t:typeof t=="boolean"?I.value=t:r.value=b.value}catch{I.value=!1,E.value=[],r.value=b.value}ee(I,()=>{b.value=JSON.stringify(I.value),f("input")}),ee(E,()=>{b.value=JSON.stringify(E.value),f("input"),l.value.Type===j.SELECT&&f("change")},{deep:!0}),ee(r,()=>{b.value=r.value,f("input"),l.value.Type===j.SELECT&&f("change")}),ee(d.value,()=>{l.value.Type!==d.value.Type?(l.value=ye(d.value),I.value=!1,E.value=[],r.value=""):l.value=ye(d.value)});const T=(t=void 0)=>{f("change",t)};return(t,u)=>l.value.Type===c(j).TEXT?(o(),C(be,{key:0,modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:`${l.value.Label}${c(y)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(j).DATE?(o(),C(be,{key:1,modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=n=>r.value=n),type:"date",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(j).NUMBER?(o(),C(be,{key:2,modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=n=>r.value=n),type:"number",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(j).TEXTAREA?(o(),C(Nl,{key:3,modelValue:r.value,"onUpdate:modelValue":u[3]||(u[3]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:T},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(j).CHECKBOX?(o(),L($,{key:4},[l.value.Multiple?(o(!0),L($,{key:0},z(l.value.Values,n=>(o(),C(ve,{key:n.ID,modelValue:E.value,"onUpdate:modelValue":u[4]||(u[4]=i=>E.value=i),name:t.name,hint:l.value.Hint,label:n.Title,value:n.Value,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,rules:[v.value.required],onChange:T},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(o(),C(ve,{key:1,modelValue:I.value,"onUpdate:modelValue":u[5]||(u[5]=n=>I.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(y),rules:[n=>!c(y)||!!n||"You must tick to continue!"],onChange:T},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===c(j).SELECT?(o(),L($,{key:5},[!l.value.Autofill&&l.value.Multiple?(o(),C(we,{key:0,modelValue:E.value,"onUpdate:modelValue":u[6]||(u[6]=n=>E.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(o(),C(ze,{key:1,modelValue:E.value,"onUpdate:modelValue":u[7]||(u[7]=n=>E.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(o(),C(ze,{key:3,modelValue:r.value,"onUpdate:modelValue":u[9]||(u[9]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(o(),C(we,{key:2,modelValue:r.value,"onUpdate:modelValue":u[8]||(u[8]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:c(U)||!1,"persistent-hint":c(g)||!1,"error-messages":h.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===c(j).RADIO?(o(),C(Dt,{key:6,modelValue:r.value,"onUpdate:modelValue":u[10]||(u[10]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,rules:[v.value.required],onChange:T},{default:m(()=>[(o(!0),L($,null,z(l.value.Values,n=>(o(),C(bt,{key:n.Value,label:n.Title,value:n.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===c(j).ACCOMMODATION?(o(),C(Ut,{key:7,modelValue:E.value,"onUpdate:modelValue":u[11]||(u[11]=n=>E.value=n),name:t.name,admin:c(S),convention:t.convention,"registration-group":t.registrationGroup,data:t.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(y),onChange:T},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(j).AGE?(o(),C(yt,{key:8,modelValue:r.value,"onUpdate:modelValue":u[12]||(u[12]=n=>r.value=n),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,onChange:T},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===c(j).EXTRAS?(o(),C(et,{key:9,modelValue:r.value,"onUpdate:modelValue":u[13]||(u[13]=n=>r.value=n),admin:c(S),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(y),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(j).INTERESTS?(o(),C(tt,{key:10,modelValue:r.value,"onUpdate:modelValue":u[14]||(u[14]=n=>r.value=n),admin:c(S),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(y),onChange:T},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===c(j).TICKET?(o(),C(ut,{key:11,modelValue:r.value,"onUpdate:modelValue":u[15]||(u[15]=n=>r.value=n),admin:c(S),convention:t.convention,name:t.name,"registration-group":t.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:c(U)||!1,"persistent-hint":c(g),"error-messages":h.value,required:c(y),onChange:T},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}),Ct={key:0,class:"my-2 text-white text-center"},Vt={key:1,class:"admin-header my-2 text-white text-center"},kt=["innerHTML"],Et=["innerHTML"],Wt=fe({__name:"FormRenderer",props:le({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:le(["close"],["update:modelValue"]),setup(e,{emit:f}){const a=ge(e,"modelValue");Ee(a.value.Sections),a.value.Sections.forEach(t=>{t.Fields&&Ee(t.Fields)});const S=A(),U=xl(),g=ll(),y=A(!1),h=A(!1),b=A(!1),d=A(!1),l=A((()=>{if(e.data!==void 0){const u=ye(e.data);return a.value.Sections.forEach(n=>{n.Fields&&n.Fields.forEach(i=>{const p=e.data.Data.find(k=>k.SectionFieldUUID===i.SectionFieldUUID&&k.SectionFieldUUID==i.SectionFieldUUID);if(p)i.Value=p.Data;else{const k={ID:0,SubmissionDataUUID:Pe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:n.ID,SectionUUID:n.SectionUUID,SectionFieldID:i.ID,SectionFieldUUID:i.SectionFieldUUID,Data:i.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};u.Data.push(k),i.Value=""}})}),u}const t={ID:0,SubmissionUUID:Pe(),FormID:a.value.ID,FormUUID:a.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:Ul.SUBMISSION_STATUS_OPEN};return t.Data=a.value.Sections.map(u=>u.Fields?u.Fields.map(n=>({ID:0,SubmissionDataUUID:Pe(),SubmissionID:t.ID,SubmissionUUID:t.SubmissionUUID,SectionID:u.ID,SectionUUID:u.SectionUUID,SectionFieldID:n.ID,SectionFieldUUID:n.SectionFieldUUID,Data:""})):[]).flat(),t})()),v=(t,u,n)=>{const i=l.value.Data.find(p=>p.SectionUUID===t&&p.SectionFieldUUID===u);i&&(i.Data=n)},I=(t,u,n,i,p)=>t&&t.Type===te.FORM_TYPE_REGISTRATION?u?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:n?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:p?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":t&&t.Type===te.FORM_TYPE_ACCOMMODATION?n?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:p?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":t&&t.Type===te.FORM_TYPE_DEALER?i?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:p?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":t&&t.Type===te.FORM_TYPE_BADGE?p?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(t&&t.Type===te.FORM_TYPE_ADDITIONAL,"/"),E=({callback:t})=>{g.getRegistrationByConvention(e.convention.ConventionUUID).then(u=>{t&&t("Loading"),g.getAvailableConventionForms(e.convention.ConventionUUID).then(n=>{u.Submissions.forEach((F,R)=>{F.Form||(u.Submissions[R].Form=n.find(de=>de.FormUUID===F.FormUUID))});const i=u.Submissions.find(F=>F.FormUUID===l.value.FormUUID),p=u.Submissions.find(F=>{var R;return((R=F.Form)==null?void 0:R.Type)===te.FORM_TYPE_ACCOMMODATION}),k=u.Submissions.find(F=>{var R;return((R=F.Form)==null?void 0:R.Type)===te.FORM_TYPE_ADDITIONAL}),w=u.Submissions.find(F=>{var R;return((R=F.Form)==null?void 0:R.Type)===te.FORM_TYPE_DEALER}),H=u.Submissions.find(F=>{var R;return((R=F.Form)==null?void 0:R.Type)===te.FORM_TYPE_BADGE}),V=I(i==null?void 0:i.Form,p==null?void 0:p.Form,w==null?void 0:w.Form,H==null?void 0:H.Form,k==null?void 0:k.Form);Je.push(V)})})},r=({callback:t})=>{var u;(u=S.value)==null||u.validate().then(n=>{n.valid?g.saveSubmission(l.value).then(i=>{i?setTimeout(()=>{T(i,t,1)},1e3):t&&t("Failed to process request")}).catch(()=>{t&&t("Failed to process request")}):t&&t("Errors in form detected, please review and try again.")})},T=(t,u,n=1)=>{g.checkSubmission(t).then(i=>{if(i)if(i.Ready&&i.Submission){if(y.value=!1,l.value=i.Submission,u&&u("Saved"),e.admin)f("close");else if(i.Forms&&i.Forms.length>0){const p=i.Forms.find(R=>R.FormUUID===l.value.FormUUID),k=i.Forms.find(R=>R.Type===te.FORM_TYPE_ACCOMMODATION),w=i.Forms.find(R=>R.Type===te.FORM_TYPE_DEALER),H=i.Forms.find(R=>R.Type===te.FORM_TYPE_BADGE),V=i.Forms.find(R=>R.Type===te.FORM_TYPE_ADDITIONAL),F=I(p,k,w,H,V);Je.push(F)}}else{if(n>5&&(y.value=!0),n>10&&(h.value=!0),n>20&&(b.value=!0),n>30&&(d.value=!0),n>60){u&&(y.value=!1,h.value=!1,b.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{T(t,u,n+1)},n<20?1e3*n:2e4)}else u&&(y.value=!1,h.value=!1,b.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."))}).catch(()=>{u&&(y.value=!1,h.value=!1,b.value=!1,d.value=!1,u("A problem was encountered during saving, please check form and try again."))})};return(t,u)=>{const n=hl("router-link");return o(),C(_l,null,{default:m(()=>[s(Gl,{ref_key:"formValidator",ref:S,onSubmit:u[1]||(u[1]=el(()=>{},["prevent"]))},{default:m(()=>[a.value.Heading?(o(),L("h1",Ct,Y(a.value.Heading),1)):P("",!0),t.admin?(o(),L("h2",Vt," (Admin Mode) ")):P("",!0),a.value.Description?(o(),L("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:a.value.Description},null,8,kt)):P("",!0),(o(!0),L($,null,z(a.value.Sections,i=>(o(),C(Bl,{key:`section_${a.value.ID}.${i.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:m(()=>[i.Heading?(o(),C(Kl,{key:0},{default:m(()=>[N(Y(i.Heading),1)]),_:2},1024)):P("",!0),i.Description?(o(),C(Hl,{key:1,class:"text-wrap"},{default:m(()=>[J("div",{innerHTML:i.Description},null,8,Et)]),_:2},1024)):P("",!0),i.Fields?(o(),C(Yl,{key:2},{default:m(()=>[(o(!0),L($,null,z(i.Fields,p=>(o(),L($,{key:`field_${a.value.ID}.${i.ID}.${p.ID}`},[p.Field?(o(),C(Q,{key:0},{default:m(()=>[s(B,null,{default:m(()=>[t.editable?(o(),C(We,{key:0,field:p.Field,modelValue:p.Value,"onUpdate:modelValue":k=>p.Value=k,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:p.Required,"min-length":p.MinLength,"max-length":p.MaxLength,"persistent-hint":!0,onChange:k=>v(i.SectionUUID,p.SectionFieldUUID,p.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(o(),C(We,{key:1,field:p.Field,modelValue:p.Value,"onUpdate:modelValue":k=>p.Value=k,admin:t.admin,convention:t.convention,"registration-group":t.registrationGroup,required:p.Required,"min-length":p.MinLength,"max-length":p.MaxLength,"persistent-hint":!0,disabled:"",onChange:k=>v(i.SectionUUID,p.SectionFieldUUID,p.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),t.preview?P("",!0):(o(),L($,{key:3},[s(Q,null,{default:m(()=>[t.admin?(o(),C(B,{key:1,class:"text-right"},{default:m(()=>[s(ie,{color:"red",onClick:u[0]||(u[0]=i=>f("close"))},{default:m(()=>[N("Cancel")]),_:1})]),_:1})):(o(),C(B,{key:0,class:"text-right"},{default:m(()=>[s(n,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:m(()=>[s(ie,{color:"red"},{default:m(()=>[N("Close")]),_:1})]),_:1})]),_:1})),t.admin||t.editable?(o(),C(B,{key:2,class:"text-left"},{default:m(()=>[s(Xe,{onClick:r,type:"submit"})]),_:1})):(o(),C(B,{key:3,class:"text-left"},{default:m(()=>[s(Xe,{onClick:E,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),y.value?(o(),C(Q,{key:0},{default:m(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:m(()=>[N(" Your request is currently queued for processing. Please be patient as this may take a while. ")]),_:1})]),_:1})):P("",!0),h.value?(o(),C(Q,{key:1},{default:m(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:m(()=>[N(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):P("",!0),b.value?(o(),C(Q,{key:2},{default:m(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:m(()=>[N(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):P("",!0),d.value?(o(),C(Q,{key:3},{default:m(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:m(()=>[N(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{jt as F,nl as T,ze as V,We as _,Jt as a,zt as b,j as c,Wt as d,Xt as e,Xl as f,Gt as m,Ee as s,zl as u};
