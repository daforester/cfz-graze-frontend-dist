import{i as K,M as Ie,N as Ue,j as Ee,r as A,w as le,n as e,q as s,v as t,x as n,f as r,z as be,y as T,A as y,O as Ae,D as v,P as ie,k as ve,B as i,F as d,Q as G,C as c,p as we,R as De,d as Ce,u as Pe,S as Oe,c as M,m as ne,l as se,G as Re,H as Ve,_ as _e}from"./index-LGeNF9kk.js";import{G as re}from"./userData-bLVGl_M0.js";import{_ as Fe}from"./LoginView.vue_vue_type_script_setup_true_lang-stfZYcz7.js";import{s as ae}from"./index-2XRRB2DS.js";import{F as E}from"./form-0fJbSFPv.js";import{S as F,a as Ne}from"./submission-WqULzQVB.js";import{u as ye}from"./useStoreAPI-FbUfUPrD.js";import{c as Q}from"./canEditForm-rFpDDsTo.js";import{s as Me}from"./sortSubmissions-NKScr9xj.js";import{P as X,a as $e,u as Le}from"./useDisplayTransactions-EN7zfkYr.js";import{l as Ye}from"./stripe.esm-sevhGlMX.js";import{_ as xe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-PrQFiCYd.js";import{c as te,V as m,n as ze,u as Be}from"./VContainer-CoYY8mK9.js";import{V as Ge}from"./VAlert-sLooJFCH.js";import{V as He}from"./VForm-kp652smp.js";import{V as q,a as H}from"./VRow-2zBmr9Nv.js";import{V as Se,u as je}from"./scopeId-V1U4BI0B.js";import{V as qe,m as We,a as fe}from"./SaveButton.vue_vue_type_script_setup_true_lang-tJWJS17M.js";import{f as Ke,h as pe}from"./date-RO2WHkId.js";import{V as he,a as ee,b as ge,c as oe,d as Je,e as Te}from"./VCard-Vti6kzBS.js";import{f as Qe,V as ke}from"./forwardRefs-_okEgm8X.js";import{V as Xe,a as Ze,c as et,d as tt}from"./VList-3qHrpjMp.js";import"./emailFormVariant-1EY2p0cn.js";import"./LoginButton-KT8SvEdc.js";import"./VDialog-KaYoBIfA.js";import"./VToolbar-tzduaFaI.js";import"./createSimpleFunctional-9w7zRAG5.js";import"./form-oYCy1Kpm.js";import"./VDivider-wea3q7io.js";const at=v("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),v("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),ot=v("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),nt=v("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),st=v("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),lt=v("p",{class:"my-4"},[n(" Please contact "),v("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),it=v("div",{id:"link-authentication-element"},null,-1),rt=v("div",{id:"payment-element"},null,-1),ut=K({__name:"StripePayment",props:Ie({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const I=Ue(u,"modelValue"),w=ie(),b=re(),g=Ee(),l=A(),_=A(),S=A((b==null?void 0:b.Additional.Email)||""),k=A(!1),N=A("");let $;const x=A(!1);le(I,U=>{U&&w.stripePublicKey().then(async h=>{h&&(_.value=await Ye(h),await Y(_.value))})});const z=U=>{N.value=U,k.value=!0};async function Y(U){var p;if(!U)return;const h=await w.stripePaymentIntent(((p=u.registration)==null?void 0:p.RegistrationUUID)||""),C={theme:"stripe"};g.current.value.dark&&(C.theme="night"),$=U.elements({clientSecret:h,appearance:C});const B=$.create("linkAuthentication",{defaultValues:{email:S.value}});B.mount("#link-authentication-element"),B.on("change",f=>{S.value=f.value.email});const Z={layout:"tabs"};$.create("payment",Z).mount("#payment-element")}async function j(U,h){if(!h)return;U.preventDefault(),x.value=!0;const C=new URL(location.href);C.pathname+="payment/stripe/processing";const{error:B}=await h.confirmPayment({elements:$,confirmParams:{return_url:C.toString(),receipt_email:S.value}});B.type==="card_error"||B.type==="validation_error"?z(B.message):z("An unexpected error occurred."),x.value=!1}return(U,h)=>(e(),s(xe,{modelValue:I.value,"onUpdate:modelValue":h[4]||(h[4]=C=>I.value=C),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[r(te,{class:"pa-0"},{default:t(()=>[r(Ge,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[at,ot,nt,st,lt]),_:1}),r(He,{ref_key:"paymentForm",ref:l,id:"payment-form",onSubmit:h[1]||(h[1]=be(C=>j(C,_.value),["prevent"]))},{default:t(()=>[r(q,null,{default:t(()=>[r(H,null,{default:t(()=>[it]),_:1})]),_:1}),r(q,null,{default:t(()=>[r(H,null,{default:t(()=>[rt]),_:1})]),_:1}),r(q,null,{default:t(()=>[U.registration?(e(),s(H,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+T(U.registration.Total-U.registration.Paid),1)]),_:1})):y("",!0)]),_:1}),r(q,null,{default:t(()=>[r(H,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[r(m,{color:"error",class:"w-100",onClick:h[0]||(h[0]=C=>I.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),r(Se),r(H,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[r(m,{type:"submit",color:"success",class:"w-100"},Ae({default:t(()=>[n(" Pay Now ")]),_:2},[x.value?{name:"prepend",fn:t(()=>[r(ze,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),r(qe,{modelValue:k.value,"onUpdate:modelValue":h[3]||(h[3]=C=>k.value=C)},{actions:t(()=>[r(m,{variant:"text",onClick:h[2]||(h[2]=C=>k.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(T(N.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),ct={key:0},dt={key:1,class:"v-row"},mt={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},vt={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},ft={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},pt={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},gt={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},_t={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},yt={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},St=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),ht={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Tt=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),kt={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},It=v("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),Ut={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},Et=K({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(u){const I=u,w=A(ve(I.paymentTransactions));le(I,()=>{w.value=ve(I.paymentTransactions)});const b=(g,l)=>g.Type===X.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type!==X.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:g.Type!==X.PAYMENT_TRANSACTION_TYPE_CHARGE&&l.Type===X.PAYMENT_TRANSACTION_TYPE_CHARGE||(g.UpdatedAt||0)>(l.UpdatedAt||0)?1:g.UpdatedAt===l.UpdatedAt?0:-1;return(g,l)=>g.paymentTransactions.length==0&&g.registration.Total==0?(e(),i("p",ct," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),i("dl",dt,[(e(!0),i(d,null,G(w.value.sort(b),_=>{var S;return e(),i(d,{key:_.PaymentTransactionUUID},[_.Type===c(X).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),i("dt",mt,[v("div",vt,T(_.Description.split(":")[0]),1),v("div",ft,T(_.Description.split(":")[1]),1)])):(e(),i("dt",pt,[v("div",gt,T((S=c($e).find(k=>k.value===_.Type))==null?void 0:S.title),1),v("div",_t," [ "+T(c(Ke)(_.UpdatedAt||""))+" ] "+T(_.Description),1)])),v("dd",yt," £"+T(_.Amount),1)],64)}),128)),St,v("dd",ht," £"+T(g.registration.Total),1),Tt,v("dd",kt," £"+T(g.registration.Paid),1),It,v("dd",Ut," £"+T(g.registration.Total-g.registration.Paid),1)]))}}),bt=we({id:String,text:String,...De(We({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),At=Ce()({name:"VTooltip",props:bt(),emits:{"update:modelValue":u=>!0},setup(u,I){let{slots:w}=I;const b=Pe(u,"modelValue"),{scopeId:g}=je(),l=Oe(),_=M(()=>u.id||`v-tooltip-${l}`),S=A(),k=M(()=>u.location.split(" ").length>1?u.location:u.location+" center"),N=M(()=>u.origin==="auto"||u.origin==="overlap"||u.origin.split(" ").length>1||u.location.split(" ").length>1?u.origin:u.origin+" center"),$=M(()=>u.transition?u.transition:b.value?"scale-transition":"fade-transition"),x=M(()=>ne({"aria-describedby":_.value},u.activatorProps));return Be(()=>{const z=fe.filterProps(u);return r(fe,ne({ref:S,class:["v-tooltip",u.class],style:u.style,id:_.value},z,{modelValue:b.value,"onUpdate:modelValue":Y=>b.value=Y,transition:$.value,absolute:!0,location:k.value,origin:N.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},g),{activator:w.activator,default:function(){var h;for(var Y=arguments.length,j=new Array(Y),U=0;U<Y;U++)j[U]=arguments[U];return((h=w.default)==null?void 0:h.call(w,...j))??u.text}})}),Qe({},S)}}),J=u=>(Re("data-v-6b476c77"),u=u(),Ve(),u),wt=["innerHTML"],Dt={key:0},Ct={key:0,class:"font-weight-bold float-left pt-1 w-50"},Pt={key:1,class:"pa-1"},Ot=J(()=>v("dt",null,[v("h3",null,"Forms Available")],-1)),Rt=J(()=>v("dd",{class:"mb-2"}," The following forms are currently available for completion. ",-1)),Vt={class:"font-weight-bold float-left pt-1 w-50 pt-3",style:{clear:"both"}},Ft={class:"pt-2"},Nt=J(()=>v("dt",{class:"mt-3"},[v("h3",null,"Received Forms")],-1)),Mt=J(()=>v("dd",{class:"mb-2"}," The following forms have been received from you. ",-1)),$t={key:0,class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},Lt={key:1},Yt={class:"font-weight-bold float-left pt-1 w-50",style:{clear:"both"}},xt={class:"text-red-darken-4"},zt={key:1,class:"text-red-darken-4 mt-4"},Bt=J(()=>v("strong",null,"There are forms above that require completion, please edit and save them.",-1)),Gt=[Bt],Ht=J(()=>v("br",null,null,-1)),jt=K({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(u){const I=ye(),w=ie(),{getPaymentTransactions:b}=Le(),g=A(I.GetConventionLogoURL(u.convention.ConventionUUID)),l=A(),_=A([]),S=A([]),k=A([]),N=A(!1),$=A([]),x=M(()=>{var a;return Q(u.forms,((a=l.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_REGISTRATION)}),z=M(()=>{var a;return Q(u.forms,((a=l.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_DEALER)}),Y=M(()=>{var a;return Q(u.forms,((a=l.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_BADGE)}),j=M(()=>{var a;return Q(u.forms,((a=l.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_ACCOMMODATION)}),U=M(()=>{var a;return Q(u.forms,((a=l.value)==null?void 0:a.Submissions)||[],E.FORM_TYPE_ADDITIONAL)}),h=M(()=>l.value?u.forms.filter(a=>{var p;return a.State.Independent?(p=l.value)!=null&&p.Submissions&&"Submissions"in l.value?!l.value.Submissions.find(f=>{var R;return((R=f.Form)==null?void 0:R.FormUUID)===a.FormUUID}):!0:!1}):u.forms),C=M(()=>{var a,p;return l.value&&((a=l.value)!=null&&a.Submissions)?!!((p=l.value)!=null&&p.Submissions.find(f=>{var R;return((R=f.Form)==null?void 0:R.Type)==E.FORM_TYPE_REGISTRATION&&(f.Status==F.SUBMISSION_STATUS_ACCEPTED||f.Status==F.SUBMISSION_STATUS_COMPLETED)})):!1}),B=async()=>{l.value&&"RegistrationUUID"in l.value&&w.getRegistrationAllocationPeriods(l.value.RegistrationUUID).then(a=>{a&&(S.value=[],_.value=a,_.value.sort((p,f)=>p.DateStart>f.DateStart?1:-1).forEach(p=>{var R;const f=S.value.find(P=>{var O;return P.name===((O=p.Accommodation)==null?void 0:O.Name)});if(f){const P=f.periods.find(V=>V.start===p.DateEnd),O=f.periods.find(V=>V.end===p.DateStart);P?P.start=p.DateStart:O?O.end=p.DateEnd:f.periods.push({start:p.DateStart,end:p.DateEnd})}else S.value.push({name:((R=p.Accommodation)==null?void 0:R.Name)||"",periods:[{start:p.DateStart,end:p.DateEnd}]})}))}).catch(()=>{})},Z=()=>{w.getRegistrationByConvention(u.convention.ConventionUUID).then(a=>{var p;a&&(a.Submissions?(a.Submissions.forEach((f,R)=>{f.Form||(a.Submissions[R].Form=u.forms.find(P=>P.FormUUID===f.FormUUID))}),Me(a.Submissions)):a.Submissions=[],l.value=a,B(),C.value&&b(((p=l.value)==null?void 0:p.RegistrationUUID)||"").then(f=>{k.value=f}))})};return le(()=>u.forms,()=>{Z()}),Z(),(a,p)=>{const f=se("router-link"),R=se("RouterLink");return e(),s(Te,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[r(he,{class:"flex-1-1 align-content-start"},{default:t(()=>[g.value?(e(),s(ke,{key:0,src:g.value,title:a.convention.Name,class:"logo text-center"},null,8,["src","title"])):y("",!0),a.convention.Name?(e(),s(ee,{key:1,class:"text-center"},{default:t(()=>[n(T(a.convention.Name),1)]),_:1})):y("",!0),a.convention.Description?(e(),s(ge,{key:2,class:"text-wrap subtitle"},{default:t(()=>[v("div",{innerHTML:a.convention.Description},null,8,wt)]),_:1})):y("",!0)]),_:1}),r(oe,null,{default:t(()=>{var P,O,V;return[l.value?(e(),i("dl",Dt,[l.value.Reference?(e(),i("dt",Ct," Badge No: ")):y("",!0),l.value.Reference?(e(),i("dd",Pt," #"+T(l.value.Reference),1)):y("",!0),h.value.length>0?(e(),i(d,{key:2},[Ot,Rt],64)):y("",!0),(e(!0),i(d,null,G(h.value,(o,L)=>(e(),i(d,{key:o.FormUUID},[v("dt",Vt,T(o.Heading),1),v("dd",Ft,[(o==null?void 0:o.Type)===c(E).FORM_TYPE_DEALER?(e(),s(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o!=null&&o.State.Edit&&z.value?(e(),s(m,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===c(E).FORM_TYPE_BADGE?(e(),s(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o!=null&&o.State.Edit&&Y.value?(e(),s(m,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):(o==null?void 0:o.Type)===c(E).FORM_TYPE_ADDITIONAL?(e(),s(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o!=null&&o.State.Edit&&U.value?(e(),s(m,{key:0,size:"small",variant:"flat",color:"success",class:"ml-2"},{default:t(()=>[n(" Open form ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):y("",!0)])],64))),128)),((P=l.value)==null?void 0:P.Submissions.length)>0?(e(),i(d,{key:3},[Nt,Mt],64)):y("",!0),(e(!0),i(d,null,G((O=l.value)==null?void 0:O.Submissions,(o,L)=>{var W,ue,ce,de,me;return e(),i(d,{key:o.SubmissionUUID},[o.Form?(e(),i(d,{key:0},[o.Form?(e(),i("dt",$t,T(o.Form.Heading),1)):y("",!0),o.Form?(e(),i("dd",Lt,[r(At,{modelValue:$.value[L],"onUpdate:modelValue":D=>$.value[L]=D},{activator:t(({props:D})=>[r(m,ne(D,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs",onClick:ea=>$.value[L]=!$.value[L]}),null,16,["onClick"])]),default:t(()=>[o.Status===c(F).SUBMISSION_STATUS_NULL?(e(),i(d,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):o.Status===c(F).SUBMISSION_STATUS_INCOMPLETE?(e(),i(d,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):o.Status===c(F).SUBMISSION_STATUS_OPEN?(e(),i(d,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===c(F).SUBMISSION_STATUS_OPEN_2?(e(),i(d,{key:3},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):o.Status===c(F).SUBMISSION_STATUS_LOCKED?(e(),i(d,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===c(F).SUBMISSION_STATUS_LOCKED_2?(e(),i(d,{key:5},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===c(F).SUBMISSION_STATUS_ACCEPTED?(e(),i(d,{key:6},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):o.Status===c(F).SUBMISSION_STATUS_COMPLETED?(e(),i(d,{key:7},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):o.Status===c(F).SUBMISSION_STATUS_REJECTED?(e(),i(d,{key:8},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):o.Status===c(F).SUBMISSION_STATUS_INVALID?(e(),i(d,{key:9},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):o.Status===c(F).SUBMISSION_STATUS_CANCELLED?(e(),i(d,{key:10},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),i(d,{key:11},[n(" Please contact the registration team for support. ")],64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),n(" "+T(c(Ne)(o.Status))+" ",1),((W=o.Form)==null?void 0:W.Type)===c(E).FORM_TYPE_REGISTRATION?(e(),s(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&x.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ue=o.Form)==null?void 0:ue.Type)===c(E).FORM_TYPE_ACCOMMODATION?(e(),s(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&j.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((ce=o.Form)==null?void 0:ce.Type)===c(E).FORM_TYPE_DEALER?(e(),s(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&z.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((de=o.Form)==null?void 0:de.Type)===c(E).FORM_TYPE_BADGE?(e(),s(f,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&Y.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((me=o.Form)==null?void 0:me.Type)===c(E).FORM_TYPE_ADDITIONAL?(e(),s(f,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>{var D;return[(D=o.Form)!=null&&D.State.Edit&&U.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):y("",!0)])):y("",!0)],64)):y("",!0)],64)}),128)),((V=l.value)==null?void 0:V.Submissions.length)>=1?(e(!0),i(d,{key:4},G(a.forms,o=>{var L;return e(),i(d,{key:o.FormUUID},[!((L=l.value)!=null&&L.Submissions.find(W=>W.FormUUID===o.FormUUID))&&!o.State.Independent?(e(),i(d,{key:0},[v("dt",Yt,T(o.Heading),1),v("dd",xt,[n(" Requires Completion "),o.Type===c(E).FORM_TYPE_REGISTRATION?(e(),s(f,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/registration`},{default:t(()=>[o.State.Edit&&x.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_ACCOMMODATION?(e(),s(f,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`},{default:t(()=>[o.State.Edit&&j.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_DEALER?(e(),s(f,{key:2,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`},{default:t(()=>[o.State.Edit&&z.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_BADGE?(e(),s(f,{key:3,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`},{default:t(()=>[o.State.Edit&&Y.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):o.Type===c(E).FORM_TYPE_ADDITIONAL?(e(),s(f,{key:4,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`},{default:t(()=>[o.State.Edit&&U.value?(e(),s(m,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),s(m,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):y("",!0)])],64)):y("",!0)],64)}),128)):y("",!0)])):y("",!0),l.value&&l.value.Submissions.length>=1&&a.forms.filter(o=>{var L;return!o.State.Independent&&!((L=l.value)!=null&&L.Submissions.find(W=>W.FormUUID==o.FormUUID))}).length>0?(e(),i("div",zt,Gt)):y("",!0)]}),_:1}),S.value.length>0?(e(),i(d,{key:0},[r(ee,{class:"pb-0"},{default:t(()=>[n("Allocated Accommodation")]),_:1}),r(ge,{class:"text-wrap"},{default:t(()=>[n("The following accommodation has been allocated to your registration. In some cases this may not have been your first choice.")]),_:1}),r(oe,null,{default:t(()=>[r(Xe,{density:"compact"},{default:t(()=>[(e(!0),i(d,null,G(S.value,P=>(e(),s(Ze,{key:P.name},{default:t(()=>[r(et,null,{default:t(()=>[n(T(P.name),1)]),_:2},1024),(e(!0),i(d,null,G(P.periods,O=>(e(),s(tt,{key:O.start},{default:t(()=>[n(" ("+T(c(pe)(O.start))+" - "+T(c(pe)(O.end))+")",1),Ht]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})],64)):y("",!0),C.value&&l.value?(e(),i(d,{key:1},[r(ee,{class:"pb-4"},{default:t(()=>[n("Payment Information")]),_:1}),r(oe,null,{default:t(()=>[r(Et,{"payment-transactions":k.value,registration:l.value},null,8,["payment-transactions","registration"])]),_:1})],64)):y("",!0),r(Je,null,{default:t(()=>{var P,O;return[a.convention.DetailLink?(e(),s(m,{key:0,color:"warning",href:a.convention.DetailLink,variant:"flat"},{default:t(()=>[n(T(c(ae).buttonDetails),1)]),_:1},8,["href"])):y("",!0),r(Se),x.value?(e(),i(d,{key:1},[(P=l.value)!=null&&P.Submissions.find(V=>{var o;return((o=V.Form)==null?void 0:o.Type)===c(E).FORM_TYPE_REGISTRATION})?(e(),s(R,{key:1,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[r(m,{color:"primary",variant:"flat"},{default:t(()=>[n(T(c(ae).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),i(d,{key:0},[(O=a.forms.find(V=>V.Type===c(E).FORM_TYPE_REGISTRATION))!=null&&O.State.New?(e(),s(R,{key:0,to:`/register/${a.convention.Slug||a.convention.ConventionUUID}`},{default:t(()=>[r(m,{color:"success",variant:"flat"},{default:t(()=>[n(T(c(ae).buttonRegister),1)]),_:1})]),_:1},8,["to"])):y("",!0)],64))],64)):C.value&&l.value&&l.value.Total>l.value.Paid?(e(),i(d,{key:2},[r(m,{color:"success",variant:"elevated",onClick:p[0]||(p[0]=V=>N.value=!0)},{default:t(()=>[n(" Make Payment ")]),_:1}),l.value?(e(),s(ut,{key:0,"payment-transactions":k.value,registration:l.value,modelValue:N.value,"onUpdate:modelValue":p[1]||(p[1]=V=>N.value=V)},null,8,["payment-transactions","registration","modelValue"])):y("",!0)],64)):y("",!0)]}),_:1})]),_:1})}}}),qt=_e(jt,[["__scopeId","data-v-6b476c77"]]),Wt=v("h3",{class:"font-weight-regular px-4"}," Convention Sticker Collection ",-1),Kt=K({__name:"Conventions",setup(u){const I=ie(),w=ye(),b=A([]),g=A([]),l=A([]);return I.getOpenConventionsList().then(_=>{_&&(g.value=[...g.value,..._],I.getAvailableConventionForms(g.value.map(S=>S.ConventionUUID)).then(S=>{l.value=[...l.value,...S]}).catch(S=>{console.error(S)}),I.getAttendedConventions().then(S=>{b.value=S}))}),(_,S)=>(e(),i(d,null,[r(te,null,{default:t(()=>[r(q,{class:"justify-center"},{default:t(()=>[(e(!0),i(d,null,G(g.value,k=>(e(),s(H,{key:k.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[r(qt,{convention:k,forms:l.value.filter(N=>N.ConventionUUID===k.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}),b.value.length>0?(e(),s(te,{key:0,fluid:"",class:"px-0"},{default:t(()=>[r(q,{class:"bg-blue-darken-4"},{default:t(()=>[r(H,null,{default:t(()=>[Wt]),_:1})]),_:1}),r(q,{class:"justify-center"},{default:t(()=>[(e(!0),i(d,null,G(b.value,k=>(e(),s(H,{key:k.ConventionUUID,cols:"8",sm:"6",md:"4",lg:"3",xl:"2"},{default:t(()=>[r(Te,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[r(he,{class:"flex-1-1 align-content-start"},{default:t(()=>[r(ke,{src:c(w).GetConventionLogoURL(k.ConventionUUID),title:k.Name,class:"logo text-center"},null,8,["src","title"]),k.Name?(e(),s(ee,{key:0,class:"text-center text-wrap"},{default:t(()=>[n(T(k.Name),1)]),_:2},1024)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):y("",!0)],64))}}),Jt={};function Qt(u,I){return e(),i("div")}const Xt=_e(Jt,[["render",Qt]]),Zt=K({__name:"MainView",emits:["pageTitle"],setup(u,{emit:I}){I("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const g=localStorage.getItem("gjt_token"),l=localStorage.getItem("ajt_token");g?(localStorage.removeItem("gjt_token"),location.href=g):l&&(localStorage.removeItem("ajt_token"),location.href=l);const _=A(re());return(S,k)=>{const N=se("router-link");return e(),i(d,null,[_.value&&(!_.value.Additional||!_.value.Additional.Email)?(e(),s(te,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),r(N,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):y("",!0),r(Kt),r(Xt)],64)}}}),Ca=K({__name:"Home",props:{loggedIn:{type:Boolean}},emits:["pageTitle"],setup(u,{emit:I}){const w=re(),b=I;return b("pageTitle","Telegram Login"),(g,l)=>(e(),i("div",null,[g.loggedIn&&c(w)?(e(),s(Zt,{key:0,onPageTitle:l[0]||(l[0]=_=>b("pageTitle",_))})):(e(),s(Fe,{key:1}))]))}});export{Ca as default};
