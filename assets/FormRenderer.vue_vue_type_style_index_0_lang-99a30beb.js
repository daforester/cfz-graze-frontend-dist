import{p as Me,an as al,n as we,ae as vl,r as R,s as Ce,u as Te,e as ae,w as G,E as Se,v as i,H as x,x as se,N as Y,aA as ml,ah as fl,y as pl,k as gl,f as hl,j as Ul,ax as nl,aa as Je,ad as yl,aB as Vl,ay as Il,m as bl,I as Ue,a1 as oe,a2 as ye,a5 as Ye,K as r,R as $,U as X,O as K,M as v,Z as le,L as b,Q as P,S as f,a3 as Ie,P as ol,ar as Ne,$ as ul,Y as Dl,ac as je,a as Cl,J as kl,aC as Ze}from"./index-358e21fe.js";import{F as de}from"./form-aee596e2.js";import{a as Tl}from"./submission-56c4c4f1.js";import{V as he,u as ze}from"./VCheckbox-a37409f6.js";import{s as Ee}from"./index-71069b21.js";import{f as Sl,V as ve,a as ne,e as be,d as ke,c as il}from"./VList-336f0769.js";import{a as re,V as H}from"./VRow-6e91ea1f.js";import{m as El,u as Al,a as Rl,b as xl,V as He}from"./VSelect-778fa87f.js";import{d as Ol,u as $l,e as Be,T as Ll,s as Qe}from"./filter-98292388.js";import{C as Ml,a as Pe,l as Ae,G as wl,V as ce,n as Pl}from"./VContainer-76f61da9.js";import{c as _l}from"./copyToClipboard-54de8978.js";import{a as Fl,e as ql,_ as We}from"./VChip-3b56a21c.js";import{k as Nl,l as Bl,j as sl,V as De,m as rl,e as Gl,u as Hl,f as Le,g as Yl,h as zl,i as Kl,n as Xl}from"./VTextField-b350d9db.js";import{m as Jl,I as jl}from"./index-d03f7181.js";import{V as Zl,m as Ql,a as dl,b as Wl,c as et}from"./VCheckboxBtn-5e6f3b41.js";import{G as lt}from"./userData-fc96ebc1.js";import{v as Ge}from"./v4-a960c1f4.js";import{e as tt,V as at,a as nt,c as ot}from"./VCard-7ba32c8b.js";import{V as ut}from"./VForm-63e5b20c.js";const el=(e,I,d)=>{if(d>=e.length){let L=d-e.length+1;for(;L--;)e.push(void 0)}e.splice(d,0,e.splice(I,1)[0])};var ee=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(ee||{});const na=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function it(e,I,d){if(I==null)return e;if(Array.isArray(I))throw new Error("Multiple matches is not implemented");return typeof I=="number"&&~I?i(x,null,[i("span",{class:"v-autocomplete__unmask"},[e.substr(0,I)]),i("span",{class:"v-autocomplete__mask"},[e.substr(I,d)]),i("span",{class:"v-autocomplete__unmask"},[e.substr(I+d)])]):e}const st=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...Ol({filterKeys:["title"]}),...El(),...al(Nl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Jl({transition:!1})},"VAutocomplete"),ll=we()({name:"VAutocomplete",props:st(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:d}=I;const{t:L}=vl(),U=R(),p=Ce(!1),D=Ce(!0),h=R(!1),g=R(),M=Te(e,"menu"),l=ae({get:()=>M.value,set:y=>{var N;M.value&&!y&&((N=g.value)!=null&&N.Î¨openChildren)||(M.value=y)}}),m=Ce(-1),c=ae(()=>{var y;return(y=U.value)==null?void 0:y.color}),{items:o,transformIn:s,transformOut:a}=Sl(e),{textColorClasses:t,textColorStyles:n}=Ml(c),u=Te(e,"search",""),S=Te(e,"modelValue",[],y=>s(y===null?[null]:fl(y)),y=>{const N=a(y);return e.multiple?N:N[0]??null}),C=Bl(),{filteredItems:V,getMatches:j}=$l(e,o,()=>D.value?"":u.value),E=ae(()=>S.value.map(y=>o.value.find(N=>e.valueComparator(N.value,y.value))||y)),O=ae(()=>e.hideSelected?V.value.filter(y=>!E.value.some(N=>N.value===y.value)):V.value),B=ae(()=>E.value.map(y=>y.props.value)),Z=ae(()=>E.value[m.value]),w=ae(()=>{var N;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&u.value===((N=O.value[0])==null?void 0:N.title))&&O.value.length>0&&!D.value&&!h.value}),J=ae(()=>e.hideNoData&&!o.value.length||e.readonly||(C==null?void 0:C.isReadonly.value)),q=R(),{onListScroll:T,onListKeydown:A}=Al(q,U);function k(y){e.openOnClear&&(l.value=!0),u.value=""}function _(){J.value||(l.value=!0)}function Q(y){J.value||(p.value&&(y.preventDefault(),y.stopPropagation()),l.value=!l.value)}function fe(y){var Ve,F,te;if(e.readonly||C!=null&&C.isReadonly.value)return;const N=U.value.selectionStart,W=B.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(y.key))&&y.preventDefault(),["Enter","ArrowDown"].includes(y.key)&&(l.value=!0),["Escape"].includes(y.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(y.key)&&(w.value&&["Enter","Tab"].includes(y.key)&&me(V.value[0]),D.value=!0),y.key==="ArrowDown"&&w.value&&((Ve=q.value)==null||Ve.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(y.key)){if(m.value<0){y.key==="Backspace"&&!u.value&&(m.value=W-1);return}const z=m.value;Z.value&&me(Z.value),m.value=z>=W-1?W-2:z}if(y.key==="ArrowLeft"){if(m.value<0&&N>0)return;const z=m.value>-1?m.value-1:W-1;E.value[z]?m.value=z:(m.value=-1,U.value.setSelectionRange((F=u.value)==null?void 0:F.length,(te=u.value)==null?void 0:te.length))}if(y.key==="ArrowRight"){if(m.value<0)return;const z=m.value+1;E.value[z]?m.value=z:(m.value=-1,U.value.setSelectionRange(0,0))}}}function Re(y){u.value=y.target.value}function _e(){var y;p.value&&(D.value=!0,(y=U.value)==null||y.focus())}function Fe(y){p.value=!0,setTimeout(()=>{h.value=!0})}function qe(y){h.value=!1}function xe(y){(y==null||y===""&&!e.multiple)&&(S.value=[])}const pe=Ce(!1);function me(y){if(e.multiple){const N=B.value.findIndex(W=>e.valueComparator(W,y.value));if(N===-1)S.value=[...S.value,y];else{const W=[...S.value];W.splice(N,1),S.value=W}}else S.value=[y],pe.value=!0,u.value=y.title,l.value=!1,D.value=!0,Se(()=>pe.value=!1)}return G(p,(y,N)=>{var W;y!==N&&(y?(pe.value=!0,u.value=e.multiple?"":String(((W=E.value.at(-1))==null?void 0:W.props.title)??""),D.value=!0,Se(()=>pe.value=!1)):(!e.multiple&&!u.value?S.value=[]:w.value&&!h.value&&!E.value.some(Ve=>{let{value:F}=Ve;return F===O.value[0].value})&&me(O.value[0]),l.value=!1,u.value="",m.value=-1))}),G(u,y=>{!p.value||pe.value||(y&&(l.value=!0),D.value=!y)}),Pe(()=>{const y=!!(e.chips||d.chip),N=!!(!e.hideNoData||O.value.length||d["prepend-item"]||d["append-item"]||d["no-data"]),W=S.value.length>0,[Ve]=De.filterProps(e);return i(De,se({ref:U},Ve,{modelValue:u.value,"onUpdate:modelValue":xe,focused:p.value,"onUpdate:focused":F=>p.value=F,validationValue:S.externalValue,dirty:W,onInput:Re,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!d.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:W?void 0:e.placeholder,"onClick:clear":k,"onMousedown:control":_,onKeydown:fe}),{...d,default:()=>i(x,null,[i(Rl,se({ref:g,modelValue:l.value,"onUpdate:modelValue":F=>l.value=F,activator:"parent",contentClass:"v-autocomplete__content",disabled:J.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:_e},e.menuProps),{default:()=>[N&&i(ve,{ref:q,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:F=>F.preventDefault(),onKeydown:A,onFocusin:Fe,onFocusout:qe,onScrollPassive:T,tabindex:"-1"},{default:()=>{var F,te,z;return[(F=d["prepend-item"])==null?void 0:F.call(d),!O.value.length&&!e.hideNoData&&(((te=d["no-data"])==null?void 0:te.call(d))??i(ne,{title:L(e.noDataText)},null)),i(xl,{renderless:!0,items:O.value},{default:ge=>{var Xe;let{item:ue,index:ie,itemRef:cl}=ge;const Ke=se(ue.props,{ref:cl,key:ie,active:w.value&&ie===0?!0:void 0,onClick:()=>me(ue)});return((Xe=d.item)==null?void 0:Xe.call(d,{item:ue,index:ie,props:Ke}))??i(ne,Ke,{prepend:Oe=>{let{isSelected:$e}=Oe;return i(x,null,[e.multiple&&!e.hideSelected?i(Zl,{key:ue.value,modelValue:$e,ripple:!1,tabindex:"-1"},null):void 0,ue.props.prependIcon&&i(Ae,{icon:ue.props.prependIcon},null)])},title:()=>{var Oe,$e;return D.value?ue.title:it(ue.title,(Oe=j(ue))==null?void 0:Oe.title,(($e=u.value)==null?void 0:$e.length)??0)}})}}),(z=d["append-item"])==null?void 0:z.call(d)]}})]}),E.value.map((F,te)=>{var ue;function z(ie){ie.stopPropagation(),ie.preventDefault(),me(F)}const ge={"onClick:close":z,onMousedown(ie){ie.preventDefault(),ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return i("div",{key:F.value,class:["v-autocomplete__selection",te===m.value&&["v-autocomplete__selection--selected",t.value]],style:te===m.value?n.value:{}},[y?d.chip?i(wl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:F.title}}},{default:()=>{var ie;return[(ie=d.chip)==null?void 0:ie.call(d,{item:F,index:te,props:ge})]}}):i(Fl,se({key:"chip",closable:e.closableChips,size:"small",text:F.title},ge),null):((ue=d.selection)==null?void 0:ue.call(d,{item:F,index:te}))??i("span",{class:"v-autocomplete__selection-text"},[F.title,e.multiple&&te<E.value.length-1&&i("span",{class:"v-autocomplete__selection-comma"},[Y(",")])])])})]),"append-inner":function(){var ge;for(var F=arguments.length,te=new Array(F),z=0;z<F;z++)te[z]=arguments[z];return i(x,null,[(ge=d["append-inner"])==null?void 0:ge.call(d,...te),e.menuIcon?i(Ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Q,onClick:ml},null):void 0])}})}),sl({isFocused:p,isPristine:D,menu:l,search:u,filteredItems:V,select:me},U)}});const rt=Me({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...rl(),...Gl()},"VTextarea"),dt=we()({name:"VTextarea",directives:{Intersect:jl},inheritAttrs:!1,props:rt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,I){let{attrs:d,emit:L,slots:U}=I;const p=Te(e,"modelValue"),{isFocused:D,focus:h,blur:g}=Hl(e),M=ae(()=>typeof e.counterValue=="function"?e.counterValue(p.value):(p.value||"").toString().length),l=ae(()=>{if(d.maxlength)return d.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function m(w,J){var q,T;!e.autofocus||!w||(T=(q=J[0].target)==null?void 0:q.focus)==null||T.call(q)}const c=R(),o=R(),s=Ce(""),a=R(),t=ae(()=>e.persistentPlaceholder||D.value||e.active);function n(){var w;a.value!==document.activeElement&&((w=a.value)==null||w.focus()),D.value||h()}function u(w){n(),L("click:control",w)}function S(w){L("mousedown:control",w)}function C(w){w.stopPropagation(),n(),Se(()=>{p.value="",Il(e["onClick:clear"],w)})}function V(w){var q;const J=w.target;if(p.value=J.value,(q=e.modelModifiers)!=null&&q.trim){const T=[J.selectionStart,J.selectionEnd];Se(()=>{J.selectionStart=T[0],J.selectionEnd=T[1]})}}const j=R(),E=R(+e.rows),O=ae(()=>["plain","underlined"].includes(e.variant));pl(()=>{e.autoGrow||(E.value=+e.rows)});function B(){e.autoGrow&&Se(()=>{if(!j.value||!o.value)return;const w=getComputedStyle(j.value),J=getComputedStyle(o.value.$el),q=parseFloat(w.getPropertyValue("--v-field-padding-top"))+parseFloat(w.getPropertyValue("--v-input-padding-top"))+parseFloat(w.getPropertyValue("--v-field-padding-bottom")),T=j.value.scrollHeight,A=parseFloat(w.lineHeight),k=Math.max(parseFloat(e.rows)*A+q,parseFloat(J.getPropertyValue("--v-input-control-height"))),_=parseFloat(e.maxRows)*A+q||1/0,Q=bl(T??0,k,_);E.value=Math.floor((Q-q)/A),s.value=Ul(Q)})}gl(B),G(p,B),G(()=>e.rows,B),G(()=>e.maxRows,B),G(()=>e.density,B);let Z;return G(j,w=>{w?(Z=new ResizeObserver(B),Z.observe(j.value)):Z==null||Z.disconnect()}),hl(()=>{Z==null||Z.disconnect()}),Pe(()=>{const w=!!(U.counter||e.counter||e.counterValue),J=!!(w||U.details),[q,T]=nl(d),[{modelValue:A,...k}]=Le.filterProps(e),[_]=Yl(e);return i(Le,se({ref:c,modelValue:p.value,"onUpdate:modelValue":Q=>p.value=Q,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":O.value},e.class],style:e.style},q,k,{centerAffix:E.value===1&&!O.value,focused:D.value}),{...U,default:Q=>{let{isDisabled:fe,isDirty:Re,isReadonly:_e,isValid:Fe}=Q;return i(zl,se({ref:o,style:{"--v-textarea-control-height":s.value},onClick:u,onMousedown:S,"onClick:clear":C,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},_,{active:t.value||Re.value,centerAffix:E.value===1&&!O.value,dirty:Re.value||e.dirty,disabled:fe.value,focused:D.value,error:Fe.value===!1}),{...U,default:qe=>{let{props:{class:xe,...pe}}=qe;return i(x,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),Je(i("textarea",se({ref:a,class:xe,value:p.value,onInput:V,autofocus:e.autofocus,readonly:_e.value,disabled:fe.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:n,onBlur:g},pe,T),null),[[yl("intersect"),{handler:m},null,{once:!0}]]),e.autoGrow&&Je(i("textarea",{class:[xe,"v-textarea__sizer"],"onUpdate:modelValue":me=>p.value=me,ref:j,readonly:!0,"aria-hidden":"true"},null),[[Vl,p.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:J?Q=>{var fe;return i(x,null,[(fe=U.details)==null?void 0:fe.call(U,Q),w&&i(x,null,[i("span",null,null),i(Kl,{active:e.persistentCounter||D.value,value:M.value,max:l.value},U.counter)])])}:void 0})}),sl({},c,o,a)}}),ct={class:"extrasList"},vt=Ue({__name:"Extras",props:oe({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:oe(["change"],["update:modelValue"]),setup(e,{emit:I}){const d=e,{convention:L,disabled:U=!1}=d,p=ye(e,"modelValue"),D=Ye.getInstance(),h=R({});try{h.value=JSON.parse(p.value)}catch{}const g=R([]),M=R([]);G(d,()=>{m()}),G(h.value,o=>{for(const s in o)if(o[s].checked){const a=g.value.map(t=>{var n;return(n=t.Options)==null?void 0:n.find(u=>u.OptionUUID===s)});if(a&&a.length>0)try{const t=a[0];o[s].choiceId===""&&t&&t.Choices&&t.Choices.length>0&&(o[s].choiceId=t.Choices[0].TagUUID),o[s].price=t==null?void 0:t.Price}catch{}}else o[s].choiceId="",o[s].price=0;p.value=JSON.stringify(o),c()});const l=ae({get:()=>g.value.map(o=>o.ExtraUUID),set:()=>{}}),m=()=>{var s;const o=((s=d.items.find(a=>a.Title==="SelectedExtras"))==null?void 0:s.Value)||"[]";try{const a=JSON.parse(o);g.value=M.value.filter(t=>a.find(n=>n===t.ExtraUUID))||[],l.value=[...g.value.map(t=>t.ExtraUUID)],g.value.forEach(t=>{var n;(n=t.Options)==null||n.forEach(u=>{h.value[u.OptionUUID]||(h.value[u.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in L&&(D==null||D.getAvailableConventionExtras(L.ConventionUUID).then(o=>{o&&(M.value=o,m())}));const c=(o=void 0)=>{setTimeout(()=>I("change",o),100)};return(o,s)=>(r(),$("div",ct,[X("h4",null,K(o.label),1),i(ve,{opened:l.value,"onUpdate:opened":s[0]||(s[0]=a=>l.value=a)},{default:v(()=>[(r(!0),$(x,null,le(g.value,a=>(r(),b(il,{key:a.ExtraUUID,value:a.ExtraUUID},{activator:v(({props:t})=>[i(ne,se({"prepend-icon":"mdi:mdi-group","append-icon":""},t),{default:v(()=>[a.Name?(r(),b(be,{key:0},{default:v(()=>[X("strong",null,K(a.Name),1)]),_:2},1024)):P("",!0),a.Description?(r(),b(ke,{key:1,class:"mt-2"},{default:v(()=>[Y(K(a.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:v(()=>[a.Options?(r(!0),$(x,{key:0},le(a.Options,t=>(r(),b(ne,{key:t.OptionUUID,class:"override-pl"},{default:v(()=>[i(re,null,{default:v(()=>[i(H,{cols:"12",sm:"6"},{default:v(()=>[i(he,{label:`${t.Name} ${t.Price&&t.Price!==0?`(${f(Ee).currencySymbol}${t.Price})`:""}`,modelValue:h.value[t.OptionUUID].checked,"onUpdate:modelValue":n=>h.value[t.OptionUUID].checked=n,disabled:f(U),"hide-details":"",onChange:c},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),t.Choices&&t.Choices.length>1&&h.value[t.OptionUUID].checked?(r(),b(H,{key:0,cols:"12",sm:"6"},{default:v(()=>[i(He,{items:t.Choices.map(n=>({value:n.TagUUID,title:n.Title})),modelValue:h.value[t.OptionUUID].choiceId,"onUpdate:modelValue":n=>h.value[t.OptionUUID].choiceId=n,"item-value":"value","item-title":"title",variant:"outlined",disabled:f(U),"hide-details":"",onChange:c},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const mt={class:"interestList"},ft=Ue({__name:"Interests",props:oe({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:oe(["change"],["update:modelValue"]),setup(e,{emit:I}){const d=e,{convention:L,disabled:U=!1}=d,p=ye(e,"modelValue"),D=Ye.getInstance(),h=R({});try{h.value=JSON.parse(p.value)}catch{}const g=R([]),M=R([]);G(h.value,o=>{p.value=JSON.stringify(o)});const l=R([]),m=()=>{var s;const o=((s=d.items.find(a=>a.Title==="SelectedInterests"))==null?void 0:s.Value)||"[]";try{const a=JSON.parse(o);g.value=M.value.filter(t=>a.find(n=>n===t.InterestUUID))||[],l.value=[...g.value.map(t=>t.InterestUUID)]}catch{}};"ConventionUUID"in L&&(D==null||D.getConventionInterests(L.ConventionUUID).then(o=>{o&&(M.value=o,m())})),G(d,()=>{m()});const c=(o=void 0)=>{setTimeout(()=>I("change",o),100)};return(o,s)=>(r(),$("div",mt,[X("h4",null,K(o.label),1),i(ve,{opened:l.value,"onUpdate:opened":s[0]||(s[0]=a=>l.value=a)},{default:v(()=>[(r(!0),$(x,null,le(g.value,a=>(r(),b(ne,{key:a.InterestUUID},{default:v(()=>[i(re,null,{default:v(()=>[i(H,null,{default:v(()=>[i(he,{label:`${a.Name} ${a.Price&&a.Price>0?`(${f(Ee).currencySymbol}${a.Price})`:""}`,modelValue:h.value[a.InterestUUID],"onUpdate:modelValue":t=>h.value[a.InterestUUID]=t,disabled:f(U),messages:a.Description,onChange:c},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const pt={class:"ticketList"},gt={key:0,class:"text-orange-darken-1"},ht=Ue({__name:"Tickets",props:oe({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:oe(["change"],["update:modelValue"]),setup(e,{emit:I}){const d=e,{admin:L=!1,convention:U,disabled:p=!1}=d,D=ye(e,"modelValue"),h=Ye.getInstance(),g=R({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{g.value=JSON.parse(D.value),"ticket"in g.value&&(g.value.Ticket=g.value.ticket),"addonsChecked"in g.value&&(g.value.AddonsChecked=g.value.addonsChecked),"componentsChecked"in g.value&&(g.value.ComponentsChecked=g.value.componentsChecked)}catch{}const M=R([]),l=R([]);G(g.value,n=>{D.value=JSON.stringify(n)});const m=R([]),c=R({required:(n,u=void 0)=>()=>{if(u==null){if(g.value.Ticket.length===0&&d.required)return"Must select at least one ticket option.";if(n&&n.ComponentsRequired>0&&g.value.Ticket.includes(n.TicketUUID||"")){let S=0;if(n.TicketComponents.forEach(C=>{g.value.ComponentsChecked.forEach(V=>{C.TicketUUID===V&&(S+=1)})}),S<n.ComponentsRequired)return`Must select ticket ${n.ComponentsRequired} component${n.ComponentsRequired===1?"":"s"}`}}return!0}}),o=()=>{var u;const n=((u=d.items.find(S=>S.Title==="SelectedTickets"))==null?void 0:u.Value)||"[]";try{const S=JSON.parse(n);M.value=l.value.filter(C=>C.Type==="TICKET_TYPE_GROUP"&&S.find(V=>V===C.TicketUUID))||[],m.value=[...M.value.filter(C=>C.Type==="TICKET_TYPE_GROUP").map(C=>C.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(L)h==null||h.getConventionTickets(U.ConventionUUID).then(n=>{n&&(l.value=n,o())});else{const n=d.items.find(u=>u.Title==="SelectedTickets");n&&(h==null||h.getFieldTickets(n.FieldUUID).then(u=>{u&&(l.value=u,o())}))}G(d,()=>{o()});const s=n=>{g.value.Ticket.length>1&&g.value.Ticket.shift(),g.value.ComponentsChecked=[];const u=[];M.value.forEach(S=>{(g.value.Ticket.includes(S.TicketUUID)||g.value.ComponentsChecked.includes(S.TicketUUID))&&u.push(...S.AddonTickets.map(C=>C.TicketUUID))}),g.value.AddonsChecked=g.value.AddonsChecked.filter(S=>u.includes(S)),t(n)},a=n=>{const u=l.value.find(S=>S.TicketUUID===g.value.Ticket[0]);if(u)for(;g.value.ComponentsChecked.length>u.ComponentsRequired;)g.value.ComponentsChecked.shift();t(n)},t=(n=void 0)=>{setTimeout(()=>I("change",n),100)};return(n,u)=>{var S;return r(),$("div",pt,[X("h4",null,[Y(K(n.label)+" ",1),(S=n.registrationGroup)!=null&&S.Registration.Leader?P("",!0):(r(),$("small",gt,"(controlled by group leader)"))]),i(ve,{opened:m.value,"onUpdate:opened":u[4]||(u[4]=C=>m.value=C)},{default:v(()=>[(r(!0),$(x,null,le(f(Be)(M.value.filter(C=>C.Type===f(Ll).TICKET_TYPE_GROUP)),C=>(r(),$(x,{key:C.TicketUUID},[C.Tickets.length>0?(r(),b(il,{key:0,value:C.TicketUUID},{activator:v(({props:V})=>[i(ne,se(V,{"prepend-icon":"mdi:mdi-group"}),{default:v(()=>[i(be,null,{default:v(()=>[X("strong",null,K(C.Name),1)]),_:2},1024),i(ke,null,{default:v(()=>[Y(K(C.Description),1)]),_:2},1024)]),_:2},1040)]),default:v(()=>[(r(!0),$(x,null,le(C.Tickets,V=>(r(),b(ne,{key:V.TicketUUID,class:"override-pl"},{default:v(()=>{var j;return[i(ke,null,{default:v(()=>[Y(K(V.Description),1)]),_:2},1024),i(he,{modelValue:g.value.Ticket,"onUpdate:modelValue":u[0]||(u[0]=E=>g.value.Ticket=E),value:V.TicketUUID,onChange:s,rules:[c.value.required(V)],"validate-on":"submit",disabled:f(p)||!((j=n.registrationGroup)!=null&&j.Registration.Leader)},{label:v(()=>[i(Ae,{icon:V.RequiresAccommodation?"mdi:mdi-home":V.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${V.Name} ${V.Price>0?`(${f(Ee).currencySymbol}${V.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),g.value.Ticket.length>0&&V.TicketUUID===g.value.Ticket[0]?(r(),$(x,{key:0},[V.AddonTickets.length?(r(),b(ve,{key:0},{default:v(()=>[(r(!0),$(x,null,le(f(Be)(V.AddonTickets),E=>(r(),$(x,{key:E==null?void 0:E.TicketUUID},[E?(r(),b(ne,{key:0},{default:v(()=>[i(be,null,{default:v(()=>{var O;return[i(he,{modelValue:g.value.AddonsChecked,"onUpdate:modelValue":u[1]||(u[1]=B=>g.value.AddonsChecked=B),value:E.TicketUUID,onChange:u[2]||(u[2]=B=>{g.value.ComponentsChecked=[],t(B)}),disabled:f(p)||!((O=n.registrationGroup)!=null&&O.Registration.Leader)},{label:v(()=>[i(Ae,{icon:E.RequiresAccommodation?"mdi:mdi-home-plus":E.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${E.Name} ${E.Price>0?`(${f(Ee).currencySymbol}${E.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),i(ke,null,{default:v(()=>[Y(K(E.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),V.TicketComponents.length?(r(),b(ve,{key:1},{default:v(()=>[(r(!0),$(x,null,le(f(Be)(V.TicketComponents),E=>(r(),$(x,{key:E==null?void 0:E.TicketUUID},[E?(r(),b(ne,{key:0},{default:v(()=>[i(be,null,{default:v(()=>{var O;return[i(he,{modelValue:g.value.ComponentsChecked,"onUpdate:modelValue":u[3]||(u[3]=B=>g.value.ComponentsChecked=B),value:E.TicketUUID,onChange:a,rules:[c.value.required(V,E)],"validate-on":"submit",disabled:f(p)||!((O=n.registrationGroup)!=null&&O.Registration.Leader)},{label:v(()=>[i(Ae,{icon:E.RequiresAccommodation?"mdi:mdi-home-plus":E.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),Y(" "+K(`${E.Name} ${E.Price>0?`(${f(Ee).currencySymbol}${E.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),i(ke,null,{default:v(()=>[Y(K(E.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const Ut={key:0},yt=X("strong",null,"Your Sharing Group",-1),Vt=["href","onClick"],It=X("br",null,null,-1),bt=X("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),Dt=X("strong",null,"Your Groups Accommodation",-1),Ct=X("br",null,null,-1),kt=X("small",null,"(in order of preference, controlled by group leader)",-1),Tt=X("strong",null,"Accommodation Options",-1),St=X("br",null,null,-1),Et=X("strong",null,"Your Chosen Accommodation",-1),At=X("small",null,"(in order of preference)",-1),Rt=Ue({__name:"Accommodation",props:oe({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:oe(["change","update:items"],["update:modelValue"]),setup(e,{emit:I}){const d=e,{admin:L=!1,convention:U,disabled:p}=d,D=ye(e,"modelValue"),h=ze(d,I,void 0,void 0,"items"),g=ul(),M=Dl.getInstance(),l=R(Ie(D.value)),m=R([]),c=R(),o=R({sharing:!1}),s=()=>{try{const T=JSON.parse(d.data);T&&(o.value=T)}catch{}};s(),G(d,()=>{s(),d.registrationGroup&&(m.value=d.registrationGroup.Members,c.value=d.registrationGroup.Registration)}),G(l,T=>{D.value=Ie(T)},{deep:!0});const a=R(""),t=R(!1),n=()=>{var T;(T=c.value)!=null&&T.Leader&&g.getRegistrationInvite(U.ConventionUUID).then(A=>{if(A){const k=new URL(location.href);k.searchParams.set("token",A),a.value=k.toString()}})},u=()=>{_l(a.value),n(),t.value=!0,setTimeout(()=>t.value=!1,2200)},S=()=>{M.emit("registration.group.leave")},C=T=>{M.emit("registration.group.remove.member",T)},V=R([]);G(h,()=>{j()});const j=()=>{L?g.getConventionAccommodation(U.ConventionUUID).then(T=>{V.value=T.filter(A=>!!(h!=null&&h.value.find(k=>k.Value===A.AccommodationUUID)))||[]}):h.value.length>0&&g.getFieldAccommodation(h.value[0].FieldUUID).then(T=>{V.value=T.filter(A=>!!(h!=null&&h.value.find(k=>k.Value===A.AccommodationUUID)))||[]})};j(),(()=>{var T;if(d.registrationGroup)if(m.value=d.registrationGroup.Members,c.value=d.registrationGroup.Registration,(T=c.value)!=null&&T.Leader)n();else try{l.value=JSON.parse(d.registrationGroup.AccommodationData)}catch{}})();const O=R({column:0,id:""}),B=()=>{!p&&!l.value.includes(O.value.id)&&(O.value.column===0&&O.value.id!==""&&l.value.push(O.value.id),q())},Z=()=>{const T=l.value.findIndex(A=>A===O.value.id);!p&&T>=0&&(l.value.splice(T,1),q())},w=()=>{if(p||O.value.column!==1)return;const T=l.value.findIndex(A=>A===O.value.id);T<=0||(el(l.value,T,T-1),q())},J=()=>{if(p||O.value.column!==1)return;const T=l.value.findIndex(A=>A===O.value.id);T>=l.value.length-1||(el(l.value,T,T+1),q())},q=(T=void 0)=>{setTimeout(()=>I("change",T),100)};return(T,A)=>(r(),$(x,null,[X("h4",null,K(T.label),1),i(re,null,{default:v(()=>[i(H,{cols:"12"},{default:v(()=>{var k;return[m.value&&c.value&&o.value.sharing?(r(),$("div",Ut,[yt,!f(p)&&((k=m.value.find(_=>_.IsLeader))==null?void 0:k.UUID)!==c.value.RegistrationUUID?(r(),b(ce,{key:0,color:"red",variant:"text",onClick:S},{default:v(()=>[Y("(leave group)")]),_:1})):P("",!0),i(ve,null,{default:v(()=>[i(ne,null,{default:v(()=>{var _;return[i(be,{class:"float-left pr-2 font-weight-bold"},{default:v(()=>[Y(" Leader: ")]),_:1}),Y(" "+K((_=m.value.find(Q=>Q.IsLeader))==null?void 0:_.Name),1)]}),_:1}),(r(!0),$(x,null,le(m.value,_=>(r(),$(x,{key:_.UUID},[_.IsLeader?P("",!0):(r(),b(ne,{key:0},{append:v(()=>[c.value.Leader?(r(),b(ce,{key:0,icon:"mdi:mdi-close-circle",size:"xs",color:"red",title:"Remove Member",onClick:Q=>C(_.UUID),disabled:f(p)},null,8,["onClick","disabled"])):P("",!0)]),default:v(()=>[i(be,{class:"float-left pr-2"},{default:v(()=>[Y(" Member: ")]),_:1}),Y(" "+K(_.Name),1)]),_:2},1024))],64))),128))]),_:1}),i(ql,{modelValue:t.value,"onUpdate:modelValue":A[0]||(A[0]=_=>t.value=_),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),a.value&&c.value.Leader&&!f(p)?(r(),$(x,{key:1},[i(ce,{color:"blue"},{default:v(()=>[X("a",{href:a.value,onClick:ol(u,["prevent"]),class:"text-white text-decoration-none"}," Get Invite Link ",8,Vt)]),_:1}),It,bt],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),c.value&&!c.value.Leader?(r(),b(re,{key:0},{default:v(()=>[i(H,{cols:"10",md:"5"},{default:v(()=>[Dt,Ct,kt,i(ve,null,{default:v(()=>[(r(!0),$(x,null,le(l.value.map(k=>V.value.find(_=>_.AccommodationUUID==k)).filter(k=>k!==void 0),(k,_)=>(r(),$(x,null,[k?(r(),b(ne,{key:k.AccommodationUUID,title:`${_+1}. ${k.Name}`,class:Ne(O.value.column===1&&O.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(r(),b(re,{key:1},{default:v(()=>[i(H,{cols:"12",md:"5"},{default:v(()=>[Tt,St,i(ve,null,{default:v(()=>[(r(!0),$(x,null,le(V.value,k=>(r(),b(ne,{key:k.AccommodationUUID,title:k.Name,class:Ne(O.value.column===0&&O.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:_=>O.value={column:0,id:k.AccommodationUUID},"append-icon":f(p)?"":"mdi:mdi-gesture-tap",onDblclick:A[1]||(A[1]=_=>B())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),f(p)?P("",!0):(r(),b(H,{key:0,cols:"12",md:"1"},{default:v(()=>[i(re,{class:"d-md-none"},{default:v(()=>[i(H,{cols:"12",class:"text-center"},{default:v(()=>[i(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:A[2]||(A[2]=k=>B()),color:"primary",title:"Select"}),Y(" Â  "),i(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:A[3]||(A[3]=k=>Z()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),i(re,{class:"d-none d-md-flex h-100 align-content-center"},{default:v(()=>[i(H,{cols:"12"},{default:v(()=>[i(ce,{icon:"mdi:mdi-arrow-right",size:"small",onClick:A[4]||(A[4]=k=>B()),color:"primary",title:"Select"})]),_:1}),i(H,{cols:"12"},{default:v(()=>[i(ce,{icon:"mdi:mdi-arrow-left",size:"small",onClick:A[5]||(A[5]=k=>Z()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),i(H,{cols:"10",md:"5"},{default:v(()=>[Et,i(ve,null,{default:v(()=>[(r(!0),$(x,null,le(l.value.map(k=>V.value.find(_=>_.AccommodationUUID==k)).filter(k=>k!==void 0),(k,_)=>(r(),$(x,null,[k?(r(),b(ne,{key:k.AccommodationUUID,title:`${_+1}. ${k.Name}`,class:Ne(O.value.column===1&&O.value.id===k.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Q=>O.value={column:1,id:(k==null?void 0:k.AccommodationUUID)||""},"append-icon":f(p)?"":"mdi:mdi-gesture-tap",onDblclick:A[6]||(A[6]=Q=>Z())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),At]),_:1}),f(p)?P("",!0):(r(),b(H,{key:1,cols:"2",md:"1"},{default:v(()=>[i(re,{class:"d-flex h-100 align-content-center mt-3"},{default:v(()=>[i(H,{cols:"12"},{default:v(()=>[i(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:A[7]||(A[7]=k=>w()),color:"primary",title:"Higher Priority"})]),_:1}),i(H,{cols:"12"},{default:v(()=>[i(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:A[8]||(A[8]=k=>J()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1}))],64))}}),xt=Ue({__name:"AgeCheck",props:oe({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:oe(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:I}){const d=e,L=ze(d,I,void 0,void 0,"items"),U=ye(e,"modelValue"),p=R({required:l=>!d.required||!!l||"Required.",min:l=>{var u,S;const m=new Date,c=m.getFullYear(),o=(m.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),s=m.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),a=((u=L.value.find(C=>C.Title=="MIN_AGE"))==null?void 0:u.Value)||"18",t=((S=L.value.find(C=>C.Title=="BEFORE_DATE"))==null?void 0:S.Value)||`${c}-${o}-${s}`,n=g(t);return h(l,t,parseInt(a))||`You must be at least ${a} years old by ${n.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),D=()=>(I("blur"),!(p.value.min(U.value||"")!==!0||p.value.required(U.value||"")!==!0)),h=(l,m,c)=>{if(l>=m)return!1;const o=g(l),a=g(m).getTime()-o.getTime(),t=1e3*60*60*24*365.25;return a/t>=c},g=l=>{const[m,c,o]=l.split("-");return new Date(parseInt(m),parseInt(c)-1,parseInt(o))},M=(l=void 0)=>{setTimeout(()=>I("change",l),100)};return(l,m)=>(r(),b(De,{modelValue:U.value,"onUpdate:modelValue":m[0]||(m[0]=c=>U.value=c),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[p.value.required,p.value.min],onBlur:D,onChange:M},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ot=Me({...Ql({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),$t=we()({name:"VRadio",props:Ot(),setup(e,I){let{slots:d}=I;return Pe(()=>i(dl,se(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),d)),{}}});const Lt=Me({height:{type:[Number,String],default:"auto"},...rl(),...al(Wl(),["multiple"]),trueIcon:{type:je,default:"$radioOn"},falseIcon:{type:je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Mt=we()({name:"VRadioGroup",inheritAttrs:!1,props:Lt(),emits:{"update:modelValue":e=>!0},setup(e,I){let{attrs:d,slots:L}=I;const U=Cl(),p=ae(()=>e.id||`radio-group-${U}`),D=Te(e,"modelValue");return Pe(()=>{const[h,g]=nl(d),[M,l]=Le.filterProps(e),[m,c]=dl.filterProps(e),o=L.label?L.label({label:e.label,props:{for:p.value}}):e.label;return i(Le,se({class:["v-radio-group",e.class],style:e.style},h,M,{modelValue:D.value,"onUpdate:modelValue":s=>D.value=s,id:p.value}),{...L,default:s=>{let{id:a,messagesId:t,isDisabled:n,isReadonly:u}=s;return i(x,null,[o&&i(Xl,{id:a.value},{default:()=>[o]}),i(et,se(m,{id:a.value,"aria-describedby":t.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:n.value,readonly:u.value,"aria-labelledby":o?a.value:void 0,multiple:!1},g,{modelValue:D.value,"onUpdate:modelValue":S=>D.value=S}),L)])}})}),{}}}),tl=Ue({__name:"FormField",props:oe({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:oe(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:I}){const d=e,{admin:L=!1,disabled:U=!1,persistentHint:p=!1,required:D=!1}=d,h=R(""),g=ye(e,"modelValue"),M=ze(d,I,void 0,void 0,"field"),l=R(Ie(M.value)),m=R({maxlength:t=>!d.maxLength||t.length<=d.maxLength||`Maximum length is ${d.maxLength} characters. (Current length: ${t.length})`,minlength:t=>!d.minLength||t.length>=d.minLength||`Minimum length is ${d.minLength} characters. (Current length: ${t.length})`,required:t=>!d.required||!!t||"Required field."}),c=R(!1),o=R([]),s=R("");try{const t=JSON.parse(g.value);Array.isArray(t)?o.value=t:typeof t=="boolean"?c.value=t:s.value=g.value}catch{c.value=!1,o.value=[],s.value=g.value}G(c,()=>{g.value=JSON.stringify(c.value),I("input")}),G(o,()=>{g.value=JSON.stringify(o.value),I("input"),l.value.Type===ee.SELECT&&I("change")},{deep:!0}),G(s,()=>{g.value=s.value,I("input"),l.value.Type===ee.SELECT&&I("change")}),G(M.value,()=>{l.value.Type!==M.value.Type?(l.value=Ie(M.value),c.value=!1,o.value=[],s.value=""):l.value=Ie(M.value)});const a=(t=void 0)=>{I("change",t)};return(t,n)=>l.value.Type===f(ee).TEXT?(r(),b(De,{key:0,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:`${l.value.Label}${f(D)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:a},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(ee).DATE?(r(),b(De,{key:1,modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=u=>s.value=u),type:"date",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:a},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(ee).NUMBER?(r(),b(De,{key:2,modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=u=>s.value=u),type:"number",name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:a},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(ee).TEXTAREA?(r(),b(dt,{key:3,modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.maxlength,m.value.minlength,m.value.required],onChange:a},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(ee).CHECKBOX?(r(),$(x,{key:4},[l.value.Multiple?(r(!0),$(x,{key:0},le(l.value.Values,u=>(r(),b(he,{key:u.ID,modelValue:o.value,"onUpdate:modelValue":n[4]||(n[4]=S=>o.value=S),name:t.name,hint:l.value.Hint,label:u.Title,value:u.Value,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,rules:[m.value.required],onChange:a},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(r(),b(he,{key:1,modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=u=>c.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,required:f(D),rules:[u=>!f(D)||!!u||"You must tick to continue!"],onChange:a},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===f(ee).SELECT?(r(),$(x,{key:5},[!l.value.Autofill&&l.value.Multiple?(r(),b(He,{key:0,modelValue:o.value,"onUpdate:modelValue":n[6]||(n[6]=u=>o.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(r(),b(ll,{key:1,modelValue:o.value,"onUpdate:modelValue":n[7]||(n[7]=u=>o.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(r(),b(ll,{key:3,modelValue:s.value,"onUpdate:modelValue":n[9]||(n[9]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(r(),b(He,{key:2,modelValue:s.value,"onUpdate:modelValue":n[8]||(n[8]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:f(U)||!1,"persistent-hint":f(p)||!1,"error-messages":h.value,rules:[m.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===f(ee).RADIO?(r(),b(Mt,{key:6,modelValue:s.value,"onUpdate:modelValue":n[10]||(n[10]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,rules:[m.value.required],onChange:a},{default:v(()=>[(r(!0),$(x,null,le(l.value.Values,u=>(r(),b($t,{key:u.Value,label:u.Title,value:u.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===f(ee).ACCOMMODATION?(r(),b(Rt,{key:7,modelValue:o.value,"onUpdate:modelValue":n[11]||(n[11]=u=>o.value=u),name:t.name,admin:f(L),convention:t.convention,"registration-group":t.registrationGroup,data:t.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,onChange:a},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===f(ee).AGE?(r(),b(xt,{key:8,modelValue:s.value,"onUpdate:modelValue":n[12]||(n[12]=u=>s.value=u),name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,onChange:a},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===f(ee).EXTRAS?(r(),b(vt,{key:9,modelValue:s.value,"onUpdate:modelValue":n[13]||(n[13]=u=>s.value=u),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,required:f(D),onChange:a},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===f(ee).INTERESTS?(r(),b(ft,{key:10,modelValue:s.value,"onUpdate:modelValue":n[14]||(n[14]=u=>s.value=u),convention:t.convention,name:t.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,required:f(D),onChange:a},null,8,["modelValue","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===f(ee).TICKET?(r(),b(ht,{key:11,modelValue:s.value,"onUpdate:modelValue":n[15]||(n[15]=u=>s.value=u),admin:f(L),convention:t.convention,name:t.name,"registration-group":t.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:f(U)||!1,"persistent-hint":f(p),"error-messages":h.value,required:f(D),onChange:a},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}),wt={key:0,class:"my-2 text-white text-center"},Pt=["innerHTML"],_t=["innerHTML"],oa=Ue({__name:"FormRenderer",props:oe({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const I=ye(e,"modelValue");Qe(I.value.Sections),I.value.Sections.forEach(c=>{c.Fields&&Qe(c.Fields)});const d=R(),L=lt(),U=ul(),p=R(!1),D=R((()=>{if(e.data!==void 0){const o=Ie(e.data);return I.value.Sections.forEach(s=>{s.Fields&&s.Fields.forEach(a=>{const t=e.data.Data.find(n=>n.SectionFieldUUID===a.SectionFieldUUID&&n.SectionFieldUUID==a.SectionFieldUUID);if(t)a.Value=t.Data;else{const n={ID:0,SubmissionDataUUID:Ge(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:s.ID,SectionUUID:s.SectionUUID,SectionFieldID:a.ID,SectionFieldUUID:a.SectionFieldUUID,Data:a.Value};o.Data.push(n)}})}),o}const c={ID:0,SubmissionUUID:Ge(),FormID:I.value.ID,FormUUID:I.value.FormUUID,UserID:(L==null?void 0:L.ID)||0,UserUUID:(L==null?void 0:L.UserUUID)||"",Data:[],Status:Tl.SUBMISSION_STATUS_OPEN};return c.Data=I.value.Sections.map(o=>o.Fields?o.Fields.map(s=>({ID:0,SubmissionDataUUID:Ge(),SubmissionID:c.ID,SubmissionUUID:c.SubmissionUUID,SectionID:o.ID,SectionUUID:o.SectionUUID,SectionFieldID:s.ID,SectionFieldUUID:s.SectionFieldUUID,Data:s.Value})):[]).flat(),c})()),h=(c,o,s)=>{const a=D.value.Data.find(t=>t.SectionUUID===c&&t.SectionFieldUUID===o);a&&(a.Data=s)},g=(c,o,s,a)=>c&&c.Type===de.FORM_TYPE_REGISTRATION?o?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:s?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:a?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:"/":c&&c.Type===de.FORM_TYPE_ACCOMMODATION?s?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:a?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":c&&c.Type===de.FORM_TYPE_DEALER?a?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:"/":(c&&c.Type===de.FORM_TYPE_BADGE,"/"),M=({callback:c})=>{U.getRegistrationByConvention(e.convention.ConventionUUID).then(o=>{c&&c("Loading"),U.getAvailableConventionForms(e.convention.ConventionUUID).then(s=>{o.Submissions.forEach((C,V)=>{C.Form||(o.Submissions[V].Form=s.find(j=>j.FormUUID===C.FormUUID))});const a=o.Submissions.find(C=>C.FormUUID===D.value.FormUUID),t=o.Submissions.find(C=>{var V;return((V=C.Form)==null?void 0:V.Type)===de.FORM_TYPE_ACCOMMODATION}),n=o.Submissions.find(C=>{var V;return((V=C.Form)==null?void 0:V.Type)===de.FORM_TYPE_DEALER}),u=o.Submissions.find(C=>{var V;return((V=C.Form)==null?void 0:V.Type)===de.FORM_TYPE_BADGE}),S=g(a==null?void 0:a.Form,t==null?void 0:t.Form,n==null?void 0:n.Form,u==null?void 0:u.Form);Ze.push(S)})})},l=({callback:c})=>{var o;(o=d.value)==null||o.validate().then(s=>{s.valid?U.saveSubmission(D.value).then(a=>{a?setTimeout(()=>{m(a,c,1)},1e3):c&&c("Failed to process request")}).catch(()=>{c&&c("Failed to process request")}):c&&c("Errors in form detected, please review and try again.")})},m=(c,o,s=1)=>{U.checkSubmission(c).then(a=>{if(a)if(a.Ready&&a.Submission){if(p.value=!1,D.value=a.Submission,o&&o("Saved"),a.Forms&&a.Forms.length>0){const t=a.Forms.find(V=>V.FormUUID===D.value.FormUUID),n=a.Forms.find(V=>V.Type===de.FORM_TYPE_ACCOMMODATION),u=a.Forms.find(V=>V.Type===de.FORM_TYPE_DEALER),S=a.Forms.find(V=>V.Type===de.FORM_TYPE_BADGE),C=g(t,n,u,S);Ze.push(C)}}else{if(s>5&&(p.value=!0),s>60){o&&(p.value=!1,o("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{m(c,o,s+1)},1e3*s)}else o&&(p.value=!1,o("A problem was encountered during saving, please check form and try again."))}).catch(()=>{o&&(p.value=!1,o("A problem was encountered during saving, please check form and try again."))})};return(c,o)=>{const s=kl("router-link");return r(),b(Pl,null,{default:v(()=>[i(ut,{ref_key:"formValidator",ref:d,onSubmit:o[0]||(o[0]=ol(()=>{},["prevent"]))},{default:v(()=>[I.value.Heading?(r(),$("h1",wt,K(I.value.Heading),1)):P("",!0),I.value.Description?(r(),$("div",{key:1,class:"my-2 form-description-container pa-5 border rounded-lg",innerHTML:I.value.Description},null,8,Pt)):P("",!0),(r(!0),$(x,null,le(I.value.Sections,a=>(r(),b(tt,{key:`section_${I.value.ID}.${a.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:v(()=>[a.Heading?(r(),b(at,{key:0},{default:v(()=>[Y(K(a.Heading),1)]),_:2},1024)):P("",!0),a.Description?(r(),b(nt,{key:1,class:"text-wrap"},{default:v(()=>[X("div",{innerHTML:a.Description},null,8,_t)]),_:2},1024)):P("",!0),a.Fields?(r(),b(ot,{key:2},{default:v(()=>[(r(!0),$(x,null,le(a.Fields,t=>(r(),$(x,{key:`field_${I.value.ID}.${a.ID}.${t.ID}`},[t.Field?(r(),b(re,{key:0},{default:v(()=>[i(H,null,{default:v(()=>[c.editable?(r(),b(tl,{key:0,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":n=>t.Value=n,admin:c.admin,convention:c.convention,"registration-group":c.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,onChange:n=>h(a.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(r(),b(tl,{key:1,field:t.Field,modelValue:t.Value,"onUpdate:modelValue":n=>t.Value=n,admin:c.admin,convention:c.convention,"registration-group":c.registrationGroup,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:"",onChange:n=>h(a.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),c.preview?P("",!0):(r(),$(x,{key:2},[i(re,null,{default:v(()=>[i(H,{class:"text-right"},{default:v(()=>[i(s,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:v(()=>[i(ce,{color:"red"},{default:v(()=>[Y("Cancel")]),_:1})]),_:1})]),_:1}),c.editable?(r(),b(H,{key:0,class:"text-left"},{default:v(()=>[i(We,{onClick:l,type:"submit"})]),_:1})):(r(),b(H,{key:1,class:"text-left"},{default:v(()=>[i(We,{onClick:M,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),p.value?(r(),b(re,{key:0},{default:v(()=>[i(H,{class:"bg-red-accent-4 border rounded-lg text-center"},{default:v(()=>[Y(" Your request is currently queued for processing, please do not refresh or close the page. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{na as F,ll as V,tl as _,dt as a,ee as b,oa as c};
