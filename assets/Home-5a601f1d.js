import{I as Y,a0 as ie,a1 as le,J as re,r as w,w as K,M as e,N as l,O as t,v as c,P as n,R as ue,Q as I,S as T,a2 as ce,X as y,a3 as J,K as ee,V as r,H as _,a4 as H,W as v,p as de,a5 as me,n as ve,u as fe,a as pe,e as R,x as q,L as W,Y as _e,Z as ye,_ as ne}from"./index-75ee82f9.js";import{G as Q}from"./userData-31dee82f.js";import{_ as ge}from"./LoginView.vue_vue_type_script_setup_true_lang-4468bea8.js";import{s as j}from"./index-26b71cef.js";import{F as A}from"./form-29fd1dbb.js";import{S as D,a as Se}from"./submission-2c955912.js";import{V as se,u as Te,a as he}from"./scopeId-436e665b.js";import{c as G}from"./canEditForm-1bd557fa.js";import{s as ke}from"./sortSubmissions-8ed80f07.js";import{P as L,a as Ie,f as Ue,u as Ee}from"./useDisplayTransactions-ce162844.js";import{V as Ae,l as we}from"./VAlert-41bc2ae5.js";import{_ as Ce}from"./ModelDialog.vue_vue_type_script_setup_true_lang-dbe64ef1.js";import{V as Pe}from"./VForm-d70523f5.js";import{V as B,a as x}from"./VRow-1e755210.js";import{V as p,a as be}from"./VBtn-5e93baf3.js";import{j as X,u as Oe}from"./VContainer-ea866894.js";import{V as De,m as Re,a as te}from"./SaveButton.vue_vue_type_script_setup_true_lang-1b3ecce8.js";import{V as Ve}from"./VAvatar-1e8d45eb.js";import{V as oe,a as Ne,b as Me,c as ae,d as Fe,e as $e}from"./VCard-0c2aec5a.js";import{f as xe}from"./forwardRefs-d7611f96.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-deaa923c.js";import"./createSimpleFunctional-a87a7772.js";import"./VDialog-6046317b.js";import"./VToolbar-2fbb7b0a.js";const Ye=y("p",{class:"my-4"},[n(" Payments are non-refundable, please check our "),y("a",{target:"_blank",href:"https://www.scotiacon.org.uk/policies"},"policies"),n(" for further information. ")],-1),Le=y("p",{class:"my-4"}," You must be over 18 to attend the convention and be able to produce valid ID matching the details on your registration. ",-1),Be=y("p",{class:"my-4"}," If you are unable to provide valid ID when asked at the convention you will not be issued your attendee badge. ",-1),ze=y("p",{class:"my-4"}," Payments should be made by the authorised card holder only. ",-1),Ge=y("p",{class:"my-4"},[n(" Please contact "),y("a",{href:"mailto:registration@scotiacon.org.uk"},"registration@scotiacon.org.uk"),n(" if you need any further assistance. ")],-1),He=y("div",{id:"link-authentication-element"},null,-1),je=y("div",{id:"payment-element"},null,-1),qe=Y({__name:"StripePayment",props:ie({paymentTransactions:{},registration:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(i){const g=le(i,"modelValue"),h=J(),k=Q(),m=re(),a=w(),f=w(),U=w((k==null?void 0:k.Additional.Email)||""),C=w(!1),$=w("");let V;const M=w(!1);K(g,u=>{u&&h.stripePublicKey().then(async d=>{d&&(f.value=await we(d),await o(f.value))})});const F=u=>{$.value=u,C.value=!0};async function o(u){var N;if(!u)return;const d=await h.stripePaymentIntent(((N=i.registration)==null?void 0:N.RegistrationUUID)||""),S={theme:"stripe"};m.current.value.dark&&(S.theme="night"),V=u.elements({clientSecret:d,appearance:S});const b=V.create("linkAuthentication",{defaultValues:{email:U.value}});b.mount("#link-authentication-element"),b.on("change",z=>{U.value=z.value.email});const s={layout:"tabs"};V.create("payment",s).mount("#payment-element")}async function E(u,d){if(!d)return;u.preventDefault(),M.value=!0;const S=new URL(location.href);S.pathname+="payment/stripe/processing";const{error:b}=await d.confirmPayment({elements:V,confirmParams:{return_url:S.toString(),receipt_email:U.value}});b.type==="card_error"||b.type==="validation_error"?F(b.message):F("An unexpected error occurred."),M.value=!1}return(u,d)=>(e(),l(Ce,{modelValue:g.value,"onUpdate:modelValue":d[4]||(d[4]=S=>g.value=S),title:"Make a Payment",color:"blue-darken-4",fullscreen:"",persistent:""},{default:t(()=>[c(X,{class:"pa-0"},{default:t(()=>[c(Ae,{class:"mb-2",closable:!0},{title:t(()=>[n(" Payment Information ")]),text:t(()=>[Ye,Le,Be,ze,Ge]),_:1}),c(Pe,{ref_key:"paymentForm",ref:a,id:"payment-form",onSubmit:d[1]||(d[1]=ue(S=>E(S,f.value),["prevent"]))},{default:t(()=>[c(B,null,{default:t(()=>[c(x,null,{default:t(()=>[He]),_:1})]),_:1}),c(B,null,{default:t(()=>[c(x,null,{default:t(()=>[je]),_:1})]),_:1}),c(B,null,{default:t(()=>[u.registration?(e(),l(x,{key:0,class:"font-weight-bold text-right"},{default:t(()=>[n(" Payment Amount: £"+I(u.registration.Total-u.registration.Paid),1)]),_:1})):T("",!0)]),_:1}),c(B,null,{default:t(()=>[c(x,{class:"text-right",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(p,{color:"error",class:"w-100",onClick:d[0]||(d[0]=S=>g.value=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1}),c(se),c(x,{class:"text-left",cols:"12",sm:"3",md:"2",lg:"2",xl:"1"},{default:t(()=>[c(p,{type:"submit",color:"success",class:"w-100"},ce({default:t(()=>[n(" Pay Now ")]),_:2},[M.value?{name:"prepend",fn:t(()=>[c(be,{size:"20",indeterminate:""})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1},512)]),_:1}),c(De,{modelValue:C.value,"onUpdate:modelValue":d[3]||(d[3]=S=>C.value=S)},{actions:t(()=>[c(p,{variant:"text",onClick:d[2]||(d[2]=S=>C.value=!1)},{default:t(()=>[n(" Close ")]),_:1})]),default:t(()=>[n(I($.value)+" ",1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}}),We={key:0},Ke={key:1,class:"v-row"},Je={key:0,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},Qe={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},Xe={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},Ze={key:1,class:"v-col v-col-10 py-1 v-row mx-0 pl-0"},et={class:"v-col v-col-12 v-col-sm-4 v-col-md-3 font-weight-bold pb-0 pr-0"},tt={class:"v-col v-col-12 v-col-sm-8 v-col-md-9 font-italic pt-0 pt-sm-3 pb-sm-0 pl-sm-0"},ot={class:"v-col v-col-2 align-self-end text-right py-1 text-no-wrap"},at=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Total Charges ",-1),nt={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},st=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold"}," Current Payments ",-1),it={class:"v-col v-col-3 align-self-end text-right py-1 text-no-wrap"},lt=y("dt",{class:"v-col v-col-9 py-1 font-weight-bold totals"}," Balance Due ",-1),rt={class:"v-col v-col-3 align-self-end text-right py-1 totals text-no-wrap"},ut=Y({__name:"AttendeeTransactionList",props:{paymentTransactions:{},registration:{}},setup(i){const g=i,h=w(ee(g.paymentTransactions));K(g,()=>{h.value=ee(g.paymentTransactions)});const k=(m,a)=>m.Type===L.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type!==L.PAYMENT_TRANSACTION_TYPE_CHARGE?-1:m.Type!==L.PAYMENT_TRANSACTION_TYPE_CHARGE&&a.Type===L.PAYMENT_TRANSACTION_TYPE_CHARGE||(m.UpdatedAt||0)>(a.UpdatedAt||0)?1:m.UpdatedAt===a.UpdatedAt?0:-1;return(m,a)=>m.registration.Total==0?(e(),r("p",We," Your registration is currently being processed, payment information will appear here when ready. ")):(e(),r("dl",Ke,[(e(!0),r(_,null,H(h.value.sort(k),f=>{var U;return e(),r(_,{key:f.PaymentTransactionUUID},[f.Type===v(L).PAYMENT_TRANSACTION_TYPE_CHARGE?(e(),r("dt",Je,[y("div",Qe,I(f.Description.split(":")[0]),1),y("div",Xe,I(f.Description.split(":")[1]),1)])):(e(),r("dt",Ze,[y("div",et,I((U=v(Ie).find(C=>C.value===f.Type))==null?void 0:U.title),1),y("div",tt," [ "+I(v(Ue)(f.UpdatedAt||""))+" ] "+I(f.Description),1)])),y("dd",ot," £"+I(f.Amount),1)],64)}),128)),at,y("dd",nt," £"+I(m.registration.Total),1),st,y("dd",it," £"+I(m.registration.Paid),1),lt,y("dd",rt," £"+I(m.registration.Total-m.registration.Paid),1)]))}});const ct=de({id:String,text:String,...me(Re({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),dt=ve()({name:"VTooltip",props:ct(),emits:{"update:modelValue":i=>!0},setup(i,g){let{slots:h}=g;const k=fe(i,"modelValue"),{scopeId:m}=Te(),a=pe(),f=R(()=>i.id||`v-tooltip-${a}`),U=w(),C=R(()=>i.location.split(" ").length>1?i.location:i.location+" center"),$=R(()=>i.origin==="auto"||i.origin==="overlap"||i.origin.split(" ").length>1||i.location.split(" ").length>1?i.origin:i.origin+" center"),V=R(()=>i.transition?i.transition:k.value?"scale-transition":"fade-transition"),M=R(()=>q({"aria-describedby":f.value},i.activatorProps));return Oe(()=>{const[F]=te.filterProps(i);return c(te,q({ref:U,class:["v-tooltip",i.class],style:i.style,id:f.value},F,{modelValue:k.value,"onUpdate:modelValue":o=>k.value=o,transition:V.value,absolute:!0,location:C.value,origin:$.value,persistent:!0,role:"tooltip",activatorProps:M.value,_disableGlobalStack:!0},m),{activator:h.activator,default:function(){var d;for(var o=arguments.length,E=new Array(o),u=0;u<o;u++)E[u]=arguments[u];return((d=h.default)==null?void 0:d.call(h,...E))??i.text}})}),xe({},U)}}),mt=i=>(_e("data-v-1cdf9242"),i=i(),ye(),i),vt=["innerHTML"],ft={key:0},pt={key:0,class:"font-weight-bold float-left pt-1 w-50"},_t={key:1,class:"pa-1"},yt={key:0,class:"font-weight-bold float-left pt-1 w-50"},gt={key:1},St={class:"font-weight-bold float-left pt-1 w-50"},Tt={class:"text-red-darken-4"},ht={key:1,class:"text-red-darken-4 mt-4"},kt=mt(()=>y("strong",null,"There are forms above that require completion, please edit and save them.",-1)),It=[kt],Ut=Y({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(i){const g=he(),h=J(),{getPaymentTransactions:k}=Ee(),m=w(g.GetConventionLogoURL(i.convention.ConventionUUID)),a=w(),f=w([]),U=w(!1),C=R(()=>{var o;return G(i.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_REGISTRATION)}),$=R(()=>{var o;return G(i.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_DEALER)}),V=R(()=>{var o;return G(i.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_ACCOMMODATION)}),M=R(()=>{var o;return G(i.forms,((o=a.value)==null?void 0:o.Submissions)||[],A.FORM_TYPE_ADDITIONAL)}),F=R(()=>{var o,E;return a.value&&((o=a.value)!=null&&o.Submissions)?!!((E=a.value)!=null&&E.Submissions.find(u=>{var d;return((d=u.Form)==null?void 0:d.Type)==A.FORM_TYPE_REGISTRATION&&(u.Status==D.SUBMISSION_STATUS_ACCEPTED||u.Status==D.SUBMISSION_STATUS_COMPLETED)})):!1});return K(()=>i.forms,()=>{h.getRegistrationByConvention(i.convention.ConventionUUID).then(o=>{var E;o&&(o.Submissions?(o.Submissions.forEach((u,d)=>{u.Form||(o.Submissions[d].Form=i.forms.find(S=>S.FormUUID===u.FormUUID))}),ke(o.Submissions)):o.Submissions=[],a.value=o,F.value&&k(((E=a.value)==null?void 0:E.RegistrationUUID)||"").then(u=>{f.value=u}))})}),(o,E)=>{const u=W("router-link"),d=W("RouterLink");return e(),l($e,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:t(()=>[c(Me,{class:"flex-1-1 align-content-start"},{default:t(()=>[m.value?(e(),l(Ve,{key:0,src:m.value,title:o.convention.Name,class:"logo text-center"},null,8,["src","title"])):T("",!0),o.convention.Name?(e(),l(oe,{key:1,class:"text-center"},{default:t(()=>[n(I(o.convention.Name),1)]),_:1})):T("",!0),o.convention.Description?(e(),l(Ne,{key:2,class:"text-wrap subtitle"},{default:t(()=>[y("div",{innerHTML:o.convention.Description},null,8,vt)]),_:1})):T("",!0)]),_:1}),c(ae,null,{default:t(()=>{var S,b;return[a.value?(e(),r("dl",ft,[a.value.Reference?(e(),r("dt",pt," Badge No: ")):T("",!0),a.value.Reference?(e(),r("dd",_t," #"+I(a.value.Reference),1)):T("",!0),(e(!0),r(_,null,H((S=a.value)==null?void 0:S.Submissions,s=>{var O,N,z,Z;return e(),r(_,{key:s.SubmissionUUID},[s.Form?(e(),r(_,{key:0},[s.Form?(e(),r("dt",yt,I(s.Form.Heading),1)):T("",!0),s.Form?(e(),r("dd",gt,[c(dt,null,{activator:t(({props:P})=>[c(p,q(P,{color:"blue-darken-2",icon:"mdi:mdi-information",variant:"text",size:"xs"}),null,16)]),default:t(()=>[s.Status===v(D).SUBMISSION_STATUS_NULL?(e(),r(_,{key:0},[n(" There is an error with your submission, please contact the registration team for support. ")],64)):s.Status===v(D).SUBMISSION_STATUS_INCOMPLETE?(e(),r(_,{key:1},[n(" Something is missing on your submission which requires completing to be able to process your request. Please contact the registration team for further advice. ")],64)):s.Status===v(D).SUBMISSION_STATUS_OPEN?(e(),r(_,{key:2},[n(" Your submission has been received by our system but you may still make changes before the registration team begins processing it. ")],64)):s.Status===v(D).SUBMISSION_STATUS_LOCKED?(e(),r(_,{key:3},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(D).SUBMISSION_STATUS_ACCEPTED?(e(),r(_,{key:4},[n(" We have locked your submission to prevent further changes whilst we process it. If you need to change something please get in touch. ")],64)):s.Status===v(D).SUBMISSION_STATUS_COMPLETED?(e(),r(_,{key:5},[n(" Congratulations everything is complete. If you need to make changes please get in touch. ")],64)):s.Status===v(D).SUBMISSION_STATUS_REJECTED?(e(),r(_,{key:6},[n(" Your request has been rejected. The registration team will provide an explanation. ")],64)):s.Status===v(D).SUBMISSION_STATUS_INVALID?(e(),r(_,{key:7},[n(" Your request has been identified as having errors or being incomplete. Please contact the registration team for additional support. ")],64)):s.Status===v(D).SUBMISSION_STATUS_CANCELLED?(e(),r(_,{key:8},[n(" Your submission has been cancelled. This may be at your request or another reason. The registration team will be able to provide further details. ")],64)):(e(),r(_,{key:9},[n(" Please contact the registration team for support. ")],64))]),_:2},1024),n(" "+I(v(Se)(s.Status))+" ",1),((O=s.Form)==null?void 0:O.Type)===v(A).FORM_TYPE_REGISTRATION?(e(),l(u,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&C.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((N=s.Form)==null?void 0:N.Type)===v(A).FORM_TYPE_ACCOMMODATION?(e(),l(u,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&V.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((z=s.Form)==null?void 0:z.Type)===v(A).FORM_TYPE_DEALER?(e(),l(u,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&$.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):((Z=s.Form)==null?void 0:Z.Type)===v(A).FORM_TYPE_ADDITIONAL?(e(),l(u,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>{var P;return[(P=s.Form)!=null&&P.State.Edit&&M.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]}),_:2},1032,["to"])):T("",!0)])):T("",!0)],64)):T("",!0)],64)}),128)),((b=a.value)==null?void 0:b.Submissions.length)>=1?(e(!0),r(_,{key:2},H(o.forms,s=>{var O;return e(),r(_,{key:s.FormUUID},[(O=a.value)!=null&&O.Submissions.find(N=>N.FormUUID===s.FormUUID)?T("",!0):(e(),r(_,{key:0},[y("dt",St,I(s.Heading),1),y("dd",Tt,[n(" Requires Completion "),s.Type===v(A).FORM_TYPE_REGISTRATION?(e(),l(u,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/registration`},{default:t(()=>[s.State.Edit&&C.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_ACCOMMODATION?(e(),l(u,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/accommodation`},{default:t(()=>[s.State.Edit&&V.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_DEALER?(e(),l(u,{key:2,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/dealer`},{default:t(()=>[s.State.Edit&&$.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):s.Type===v(A).FORM_TYPE_ADDITIONAL?(e(),l(u,{key:3,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}/additional`},{default:t(()=>[s.State.Edit&&M.value?(e(),l(p,{key:0,size:"small",variant:"text",color:"success"},{default:t(()=>[n(" Edit ")]),_:1})):(e(),l(p,{key:1,size:"small",variant:"text",color:"warning"},{default:t(()=>[n("View")]),_:1}))]),_:2},1032,["to"])):T("",!0)])],64))],64)}),128)):T("",!0)])):T("",!0),a.value&&a.value.Submissions.length>=1&&o.forms.filter(s=>{var O;return!((O=a.value)!=null&&O.Submissions.find(N=>N.FormUUID==s.FormUUID))}).length?(e(),r("div",ht,It)):T("",!0)]}),_:1}),F.value&&a.value?(e(),r(_,{key:0},[c(oe,{class:"pb-4 text-center"},{default:t(()=>[n("Payment Information")]),_:1}),c(ae,null,{default:t(()=>[c(ut,{"payment-transactions":f.value,registration:a.value},null,8,["payment-transactions","registration"])]),_:1})],64)):T("",!0),c(Fe,null,{default:t(()=>{var S,b;return[o.convention.DetailLink?(e(),l(p,{key:0,color:"orange",href:o.convention.DetailLink},{default:t(()=>[n(I(v(j).buttonDetails),1)]),_:1},8,["href"])):T("",!0),c(se),C.value?(e(),r(_,{key:1},[(S=a.value)!=null&&S.Submissions.find(s=>{var O;return((O=s.Form)==null?void 0:O.Type)===v(A).FORM_TYPE_REGISTRATION})?(e(),l(d,{key:1,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(p,{color:"primary"},{default:t(()=>[n(I(v(j).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(e(),r(_,{key:0},[(b=o.forms.find(s=>s.Type===v(A).FORM_TYPE_REGISTRATION))!=null&&b.State.New?(e(),l(d,{key:0,to:`/register/${o.convention.Slug||o.convention.ConventionUUID}`},{default:t(()=>[c(p,{color:"primary"},{default:t(()=>[n(I(v(j).buttonRegister),1)]),_:1})]),_:1},8,["to"])):T("",!0)],64))],64)):F.value&&a.value&&a.value.Total>a.value.Paid?(e(),r(_,{key:2},[c(p,{color:"success",variant:"elevated",onClick:E[0]||(E[0]=s=>U.value=!0)},{default:t(()=>[n("Make Payment")]),_:1}),a.value?(e(),l(qe,{key:0,"payment-transactions":f.value,registration:a.value,modelValue:U.value,"onUpdate:modelValue":E[1]||(E[1]=s=>U.value=s)},null,8,["payment-transactions","registration","modelValue"])):T("",!0)],64)):T("",!0)]}),_:1})]),_:1})}}});const Et=ne(Ut,[["__scopeId","data-v-1cdf9242"]]),At=Y({__name:"Conventions",setup(i){const g=J(),h=w([]),k=w([]);return g.getOpenConventionsList().then(m=>{m&&(h.value=[...h.value,...m],g.getAvailableConventionForms(h.value.map(a=>a.ConventionUUID)).then(a=>{k.value=[...k.value,...a]}).catch(a=>{console.error(a)}))}),(m,a)=>(e(),l(X,null,{default:t(()=>[c(B,{class:"justify-center"},{default:t(()=>[(e(!0),r(_,null,H(h.value,f=>(e(),l(x,{key:f.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:t(()=>[c(Et,{convention:f,forms:k.value.filter(U=>U.ConventionUUID===f.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),wt={};function Ct(i,g){return e(),r("div")}const Pt=ne(wt,[["render",Ct]]),bt=Y({__name:"MainView",emits:["pageTitle"],setup(i,{emit:g}){g("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500));const k=localStorage.getItem("gjt_token"),m=localStorage.getItem("ajt_token");k?(localStorage.removeItem("gjt_token"),location.href=k):m&&(localStorage.removeItem("ajt_token"),location.href=m);const a=w(Q());return(f,U)=>{const C=W("router-link");return e(),r(_,null,[a.value&&!a.value.Additional.Email?(e(),l(X,{key:0,class:"bg-red-darken-4 text-center",fluid:!0},{default:t(()=>[n(" Please enter a Contact Email on the "),c(C,{to:"/profile",class:"text-white font-weight-bold"},{default:t(()=>[n("manage account page")]),_:1}),n(" to ensure we can contact you. ")]),_:1})):T("",!0),c(At),c(Pt)],64)}}}),oo=Y({__name:"Home",emits:["pageTitle"],setup(i,{emit:g}){const h=Q();return g("pageTitle","Telegram Login"),(k,m)=>(e(),r("div",null,[v(h)?(e(),l(bt,{key:0,onPageTitle:m[0]||(m[0]=a=>g("pageTitle",a))})):(e(),l(ge,{key:1}))]))}});export{oo as default};
