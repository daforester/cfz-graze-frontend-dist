import{p as Me,r as E,e as de,W as m,y as yl,ao as ol,as as Fe,a5 as ul,n as Be,ah as bl,s as Ve,u as Re,w as ae,E as je,au as Il,v as u,H as B,x as pe,P as K,aB as Ul,aC as ze,I as ye,a0 as te,a1 as be,a8 as Ye,M as s,V as F,X as H,Q,O as i,a4 as ne,N as k,S as P,K as Te,R as sl,ac as $e,a3 as Ge,U as Dl,f as Tl,aD as kl,_ as Cl,ag as Qe,a as Vl,aE as Sl,L as El,aF as Ze}from"./index-ea7c22e1.js";import{F as re}from"./form-29fd1dbb.js";import{S as wl}from"./submission-6136b51d.js";import{a as Al,V as De,u as Ke,m as _l,b as il,c as Ol,d as Rl}from"./VCheckbox-e35eb7e9.js";import{s as Ee}from"./index-26b71cef.js";import{e as Ll,V as he,a as fe,c as Le,d as Se,b as rl}from"./VList-213a65dc.js";import{V as J,a as Y}from"./VRow-ea32f96b.js";import{m as Ml,u as $l,a as xl,b as Pl,V as qe,c as Fl}from"./copyToClipboard-49ec7639.js";import{q as ql,u as He,V as we,A as Nl,j as Bl}from"./VContainer-97c9cf83.js";import{d as Yl,_ as el}from"./SaveButton.vue_vue_type_script_setup_true_lang-99988617.js";import{a as dl}from"./scopeId-9129f934.js";import{m as Gl,V as ke,a as Ne,b as Kl,c as Hl}from"./VTextField-abf852f0.js";import{V as ce,a as Xl}from"./VBtn-64b4c448.js";import{m as Wl,V as ll}from"./VAvatar-a6f6332c.js";import{V as cl}from"./VForm-3451141b.js";import{V as Jl}from"./VFileInput-c440e4e3.js";import{V as jl}from"./VTextarea-530bc3d6.js";import{u as zl,f as Ql}from"./forwardRefs-a89641dd.js";import{a as Zl}from"./VChip-77e293e5.js";import{G as et}from"./userData-b12f6925.js";import{v as xe}from"./v4-a960c1f4.js";import{e as lt,V as tt,a as at,c as nt}from"./VCard-62939e09.js";var ie=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(ie||{});const Ua=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var vl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(vl||{});const Da=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Ae=e=>{e.sort((p,l)=>(p.Order?p.Order:0)-(l.Order?l.Order:0)),e.forEach((p,l)=>{p.Order=l})},Ta=(e,p)=>{const l=p.indexOf(e);if(l===0)return;const M=e.Order;e.Order=p[l-1].Order,p[l-1].Order=M,Ae(p)},ka=(e,p)=>{const l=p.indexOf(e);if(l>=p.length-1)return;const M=e.Order;e.Order=p[l+1].Order,p[l+1].Order=M,Ae(p)};const ot=(e,p,l)=>e==null||p==null?-1:e.toString().toLocaleLowerCase().indexOf(p.toString().toLocaleLowerCase()),ut=Me({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,p,l){var U;const M=[],g=(l==null?void 0:l.default)??ot,h=l!=null&&l.filterKeys?ol(l.filterKeys):!1,A=Object.keys((l==null?void 0:l.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return M;e:for(let w=0;w<e.length;w++){const f=e[w],t={},v={};let a=-1;if(p&&!(l!=null&&l.noFilter)){if(typeof f=="object"){const I=h||Object.keys(f);for(const o of I){const n=Fe(f,o,f),y=(U=l==null?void 0:l.customKeyFilter)==null?void 0:U[o];if(a=y?y(n,p,f):g(n,p,f),a!==-1&&a!==!1)y?t[o]=a:v[o]=a;else if((l==null?void 0:l.filterMode)==="every")continue e}}else a=g(f,p,f),a!==-1&&a!==!1&&(v.title=a);const C=Object.keys(v).length,r=Object.keys(t).length;if(!C&&!r||(l==null?void 0:l.filterMode)==="union"&&r!==A&&!C||(l==null?void 0:l.filterMode)==="intersection"&&(r!==A||!C))continue}M.push({index:w,matches:{...v,...t}})}return M}function it(e,p,l,M){const g=E([]),h=E(new Map),A=de(()=>M!=null&&M.transform?m(p).map(M==null?void 0:M.transform):m(p));yl(()=>{const w=typeof l=="function"?l():m(l),f=typeof w!="string"&&typeof w!="number"?"":String(w),t=st(A.value,f,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),v=m(p),a=[],C=new Map;t.forEach(r=>{let{index:I,matches:o}=r;const n=v[I];a.push(n),C.set(n.value,o)}),g.value=a,h.value=C});function U(w){return h.value.get(w.value)}return{filteredItems:g,filteredMatches:h,getMatches:U}}function rt(e,p,l){if(p==null)return e;if(Array.isArray(p))throw new Error("Multiple matches is not implemented");return typeof p=="number"&&~p?u(B,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,p)]),u("span",{class:"v-autocomplete__mask"},[e.substr(p,l)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(p+l)])]):e}const dt=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ml(),...ul(Gl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Wl({transition:!1})},"VAutocomplete"),tl=Be()({name:"VAutocomplete",props:dt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,p){let{slots:l}=p;const{t:M}=bl(),g=E(),h=Ve(!1),A=Ve(!0),U=Ve(!1),w=E(),f=E(),t=Re(e,"menu"),v=de({get:()=>t.value,set:S=>{var G;t.value&&!S&&((G=w.value)!=null&&G.Î¨openChildren)||(t.value=S)}}),a=Ve(-1),C=de(()=>{var S;return(S=g.value)==null?void 0:S.color}),r=de(()=>v.value?e.closeText:e.openText),{items:I,transformIn:o,transformOut:n}=Ll(e),{textColorClasses:y,textColorStyles:d}=ql(C),L=Re(e,"search",""),q=Re(e,"modelValue",[],S=>o(S===null?[null]:ol(S)),S=>{const G=n(S);return e.multiple?G:G[0]??null}),N=zl(),{filteredItems:O,getMatches:b}=it(e,I,()=>A.value?"":L.value),_=de(()=>q.value.map(S=>I.value.find(G=>{const z=Fe(G.raw,e.itemValue),ge=Fe(S.raw,e.itemValue);return z===void 0||ge===void 0?!1:e.returnObject?e.valueComparator(z,ge):e.valueComparator(G.value,S.value)})||S)),D=de(()=>e.hideSelected?O.value.filter(S=>!_.value.some(G=>G.value===S.value)):O.value),x=de(()=>_.value.map(S=>S.props.value)),R=de(()=>_.value[a.value]),X=de(()=>{var G;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&L.value===((G=D.value[0])==null?void 0:G.title))&&D.value.length>0&&!A.value&&!U.value}),le=de(()=>e.hideNoData&&!I.value.length||e.readonly||(N==null?void 0:N.isReadonly.value)),oe=E(),{onListScroll:T,onListKeydown:c}=$l(oe,g);function V(S){e.openOnClear&&(v.value=!0),L.value=""}function j(){le.value||(v.value=!0)}function $(S){le.value||(h.value&&(S.preventDefault(),S.stopPropagation()),v.value=!v.value)}function ue(S){var ge,W,se;if(e.readonly||N!=null&&N.isReadonly.value)return;const G=g.value.selectionStart,z=x.value.length;if((a.value>-1||["Enter","ArrowDown","ArrowUp"].includes(S.key))&&S.preventDefault(),["Enter","ArrowDown"].includes(S.key)&&(v.value=!0),["Escape"].includes(S.key)&&(v.value=!1),X.value&&["Enter","Tab"].includes(S.key)&&Ie(D.value[0]),S.key==="ArrowDown"&&X.value&&((ge=oe.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(S.key)){if(a.value<0){S.key==="Backspace"&&!L.value&&(a.value=z-1);return}const Z=a.value;R.value&&Ie(R.value),a.value=Z>=z-1?z-2:Z}if(S.key==="ArrowLeft"){if(a.value<0&&G>0)return;const Z=a.value>-1?a.value-1:z-1;_.value[Z]?a.value=Z:(a.value=-1,g.value.setSelectionRange((W=L.value)==null?void 0:W.length,(se=L.value)==null?void 0:se.length))}if(S.key==="ArrowRight"){if(a.value<0)return;const Z=a.value+1;_.value[Z]?a.value=Z:(a.value=-1,g.value.setSelectionRange(0,0))}}}function ee(S){L.value=S.target.value}function Xe(S){if(ze(g.value,":autofill")||ze(g.value,":-webkit-autofill")){const G=I.value.find(z=>z.title===S.target.value);G&&Ie(G)}}function ml(){var S;h.value&&(A.value=!0,(S=g.value)==null||S.focus())}function fl(S){h.value=!0,setTimeout(()=>{U.value=!0})}function gl(S){U.value=!1}function pl(S){(S==null||S===""&&!e.multiple)&&(q.value=[])}const Ce=Ve(!1);function Ie(S){if(e.multiple){const G=x.value.findIndex(z=>e.valueComparator(z,S.value));if(G===-1)q.value=[...q.value,S];else{const z=[...q.value];z.splice(G,1),q.value=z}}else q.value=[S],Ce.value=!0,L.value=S.title,v.value=!1,A.value=!0,je(()=>Ce.value=!1)}return ae(h,(S,G)=>{var z;S!==G&&(S?(Ce.value=!0,L.value=e.multiple?"":String(((z=_.value.at(-1))==null?void 0:z.props.title)??""),A.value=!0,je(()=>Ce.value=!1)):(!e.multiple&&!L.value?q.value=[]:X.value&&!U.value&&!_.value.some(ge=>{let{value:W}=ge;return W===D.value[0].value})&&Ie(D.value[0]),v.value=!1,L.value="",a.value=-1))}),ae(L,S=>{!h.value||Ce.value||(S&&(v.value=!0),A.value=!S)}),ae(v,()=>{if(!e.hideSelected&&v.value&&_.value.length){const S=D.value.findIndex(G=>_.value.some(z=>G.value===z.value));Il&&window.requestAnimationFrame(()=>{var G;S>=0&&((G=f.value)==null||G.scrollToIndex(S))})}}),He(()=>{const S=!!(e.chips||l.chip),G=!!(!e.hideNoData||D.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),z=q.value.length>0,[ge]=ke.filterProps(e);return u(ke,pe({ref:g},ge,{modelValue:L.value,"onUpdate:modelValue":pl,focused:h.value,"onUpdate:focused":W=>h.value=W,validationValue:q.externalValue,dirty:z,onInput:ee,onChange:Xe,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":v.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!l.selection,"v-autocomplete--selecting-index":a.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:z?void 0:e.placeholder,"onClick:clear":V,"onMousedown:control":j,onKeydown:ue}),{...l,default:()=>u(B,null,[u(xl,pe({ref:w,modelValue:v.value,"onUpdate:modelValue":W=>v.value=W,activator:"parent",contentClass:"v-autocomplete__content",disabled:le.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ml},e.menuProps),{default:()=>[G&&u(he,{ref:oe,selected:x.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:W=>W.preventDefault(),onKeydown:c,onFocusin:fl,onFocusout:gl,onScrollPassive:T,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var W,se,Z;return[(W=l["prepend-item"])==null?void 0:W.call(l),!D.value.length&&!e.hideNoData&&(((se=l["no-data"])==null?void 0:se.call(l))??u(fe,{title:M(e.noDataText)},null)),u(Pl,{ref:f,renderless:!0,items:D.value},{default:Ue=>{var Je;let{item:ve,index:me,itemRef:hl}=Ue;const We=pe(ve.props,{ref:hl,key:me,active:X.value&&me===0?!0:void 0,onClick:()=>Ie(ve)});return((Je=l.item)==null?void 0:Je.call(l,{item:ve,index:me,props:We}))??u(fe,We,{prepend:_e=>{let{isSelected:Oe}=_e;return u(B,null,[e.multiple&&!e.hideSelected?u(Al,{key:ve.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ve.props.prependIcon&&u(we,{icon:ve.props.prependIcon},null)])},title:()=>{var _e,Oe;return A.value?ve.title:rt(ve.title,(_e=b(ve))==null?void 0:_e.title,((Oe=L.value)==null?void 0:Oe.length)??0)}})}}),(Z=l["append-item"])==null?void 0:Z.call(l)]}})]}),_.value.map((W,se)=>{var ve;function Z(me){me.stopPropagation(),me.preventDefault(),Ie(W)}const Ue={"onClick:close":Z,onMousedown(me){me.preventDefault(),me.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:W.value,class:["v-autocomplete__selection",se===a.value&&["v-autocomplete__selection--selected",y.value]],style:se===a.value?d.value:{}},[S?l.chip?u(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:W.title}}},{default:()=>{var me;return[(me=l.chip)==null?void 0:me.call(l,{item:W,index:se,props:Ue})]}}):u(Zl,pe({key:"chip",closable:e.closableChips,size:"small",text:W.title},Ue),null):((ve=l.selection)==null?void 0:ve.call(l,{item:W,index:se}))??u("span",{class:"v-autocomplete__selection-text"},[W.title,e.multiple&&se<_.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[K(",")])])])})]),"append-inner":function(){var Ue;for(var W=arguments.length,se=new Array(W),Z=0;Z<W;Z++)se[Z]=arguments[Z];return u(B,null,[(Ue=l["append-inner"])==null?void 0:Ue.call(l,...se),e.menuIcon?u(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:$,onClick:Ul,"aria-label":M(r.value),title:M(r.value)},null):void 0])}})}),Ql({isFocused:h,isPristine:A,menu:v,search:L,filteredItems:O,select:Ie},g)}}),ct={class:"extrasList"},vt=ye({__name:"Extras",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:p}){const l=e,{admin:M=!1,convention:g,disabled:h=!1}=l,A=be(e,"modelValue"),U=Ye.getInstance(),w=E({});try{w.value=JSON.parse(A.value)}catch{}const f=E([]),t=E([]);ae(l,()=>{a()}),ae(w.value,r=>{for(const I in r)if(r[I].checked){const o=f.value.map(n=>{var y;return(y=n.Options)==null?void 0:y.find(d=>d.OptionUUID===I)});if(o&&o.length>0)try{const n=o[0];r[I].choiceId===""&&n&&n.Choices&&n.Choices.length>0&&(r[I].choiceId=n.Choices[0].TagUUID),r[I].price=n==null?void 0:n.Price}catch{}}else r[I].choiceId="",r[I].price=0;A.value=JSON.stringify(r),C()});const v=de({get:()=>f.value.map(r=>r.ExtraUUID),set:()=>{}}),a=()=>{var I;const r=((I=l.items.find(o=>o.Title==="SelectedExtras"))==null?void 0:I.Value)||"[]";try{const o=JSON.parse(r);f.value=t.value.filter(n=>o.find(y=>y===n.ExtraUUID))||[],v.value=[...f.value.map(n=>n.ExtraUUID)],f.value.forEach(n=>{var y;(y=n.Options)==null||y.forEach(d=>{w.value[d.OptionUUID]||(w.value[d.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in g&&g.Extras.length?(t.value=g.Extras,a()):"ConventionUUID"in g&&(M?U==null||U.getConventionExtras(g.ConventionUUID).then(r=>{r&&(t.value=r,a())}):U==null||U.getAvailableConventionExtras(g.ConventionUUID).then(r=>{r&&(t.value=r,a())}));const C=(r=void 0)=>{setTimeout(()=>p("change",r),100)};return(r,I)=>(s(),F("div",ct,[H("h4",null,Q(r.label),1),u(he,{opened:v.value,"onUpdate:opened":I[0]||(I[0]=o=>v.value=o)},{default:i(()=>[(s(!0),F(B,null,ne(f.value,o=>(s(),k(rl,{key:o.ExtraUUID,value:o.ExtraUUID},{activator:i(({props:n})=>[u(fe,pe({"prepend-icon":"mdi:mdi-group","append-icon":""},n),{default:i(()=>[o.Name?(s(),k(Le,{key:0},{default:i(()=>[H("strong",null,Q(o.Name),1)]),_:2},1024)):P("",!0),o.Description?(s(),k(Se,{key:1,class:"mt-2 d-inline"},{default:i(()=>[K(Q(o.Description),1)]),_:2},1024)):P("",!0)]),_:2},1040)]),default:i(()=>[o.Options?(s(!0),F(B,{key:0},ne(o.Options,n=>(s(),k(fe,{key:n.OptionUUID,class:"override-pl"},{default:i(()=>[u(J,null,{default:i(()=>[u(Y,{cols:"12",sm:"6"},{default:i(()=>[u(De,{label:`${n.Name} ${n.Price&&n.Price!==0?`(${m(Ee).currencySymbol}${n.Price})`:""}`,modelValue:w.value[n.OptionUUID].checked,"onUpdate:modelValue":y=>w.value[n.OptionUUID].checked=y,disabled:m(h),"hide-details":"",onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n.Choices&&n.Choices.length>1&&w.value[n.OptionUUID].checked?(s(),k(Y,{key:0,cols:"12",sm:"6"},{default:i(()=>[u(qe,{items:n.Choices.sort((y,d)=>y.Title.localeCompare(d.Title)).map(y=>({value:y.TagUUID,title:y.Title})),modelValue:w.value[n.OptionUUID].choiceId,"onUpdate:modelValue":y=>w.value[n.OptionUUID].choiceId=y,"item-value":"value","item-title":"title",variant:"outlined",disabled:m(h),"hide-details":"",onChange:C},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):P("",!0)]),_:2},1024)]),_:2},1024))),128)):P("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const mt={class:"interestList"},ft=ye({__name:"Interests",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:p}){const l=e,{admin:M=!1,convention:g,disabled:h=!1}=l,A=be(e,"modelValue"),U=Ye.getInstance(),w=E({});try{w.value=JSON.parse(A.value)}catch{}const f=E([]),t=E([]);ae(w.value,r=>{A.value=JSON.stringify(r)});const v=E([]),a=()=>{var I;const r=((I=l.items.find(o=>o.Title==="SelectedInterests"))==null?void 0:I.Value)||"[]";try{const o=JSON.parse(r);f.value=t.value.filter(n=>o.find(y=>y===n.InterestUUID))||[],v.value=[...f.value.map(n=>n.InterestUUID)]}catch{}};"ConventionUUID"in g&&(M?U==null||U.getConventionInterests(g.ConventionUUID).then(r=>{r&&(t.value=r,a())}):U==null||U.getConventionInterests(g.ConventionUUID).then(r=>{r&&(t.value=r,a())})),ae(l,()=>{a()});const C=(r=void 0)=>{setTimeout(()=>p("change",r),100)};return(r,I)=>(s(),F("div",mt,[H("h4",null,Q(r.label),1),u(he,{opened:v.value,"onUpdate:opened":I[0]||(I[0]=o=>v.value=o)},{default:i(()=>[(s(!0),F(B,null,ne(f.value.sort((o,n)=>o.Order>n.Order?1:o.Order==n.Order?0:-1),o=>(s(),k(fe,{key:o.InterestUUID},{default:i(()=>[u(J,null,{default:i(()=>[u(Y,null,{default:i(()=>[u(De,{label:`${o.Name} ${o.Price&&o.Price>0?`(${m(Ee).currencySymbol}${o.Price})`:""}`,modelValue:w.value[o.InterestUUID],"onUpdate:modelValue":n=>w.value[o.InterestUUID]=n,disabled:m(h),messages:o.Description,onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const al=(e,p,l)=>{if(l>=e.length){let M=l-e.length+1;for(;M--;)e.push(void 0)}e.splice(l,0,e.splice(p,1)[0])},Pe=e=>(Ae(e),e),Ca=e=>(p,l)=>p[e]<l[e]?-1:p[e]>l[e]?1:0,gt={class:"ticketList"},pt={key:0,class:"text-orange-darken-1"},ht=ye({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:p}){const l=e,{admin:M=!1,convention:g,disabled:h=!1,registrationGroup:A=void 0}=l,U=be(e,"modelValue"),w=Ye.getInstance(),f=E({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{f.value=JSON.parse(U.value),"ticket"in f.value&&(f.value.Ticket=f.value.ticket),"addonsChecked"in f.value&&(f.value.AddonsChecked=f.value.addonsChecked),"componentsChecked"in f.value&&(f.value.ComponentsChecked=f.value.componentsChecked)}catch{}const t=E([]),v=E([]),a=E([]),C=E({required:(y,d=void 0)=>()=>{if(h||!(A!=null&&A.Registration.Leader))return!0;if(d==null){if(f.value.Ticket.length===0&&l.required)return"Must select at least one ticket option.";if(y&&y.ComponentsRequired>0&&f.value.Ticket.includes(y.TicketUUID||"")){let L=0;if(y.TicketComponents.forEach(q=>{f.value.ComponentsChecked.forEach(N=>{q.TicketUUID===N&&(L+=1)})}),L<y.ComponentsRequired)return`Must select ticket ${y.ComponentsRequired} component${y.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var d;const y=((d=l.items.find(L=>L.Title==="SelectedTickets"))==null?void 0:d.Value)||"[]";try{const L=JSON.parse(y);t.value=v.value.filter(q=>q.Type==="TICKET_TYPE_GROUP"&&L.find(N=>N===q.TicketUUID))||[],a.value=[...t.value.filter(q=>q.Type==="TICKET_TYPE_GROUP").map(q=>q.TicketUUID)]}catch{}};if("ConventionUUID"in g)if(M)w==null||w.getConventionTickets(g.ConventionUUID).then(y=>{y&&(v.value=y,r())});else{const y=l.items.find(d=>d.Title==="SelectedTickets");y&&(w==null||w.getFieldTickets(y.FieldUUID).then(d=>{d&&(v.value=d,r())}))}ae(l,()=>{r()});const I=y=>{f.value.Ticket.length>1&&f.value.Ticket.shift(),f.value.ComponentsChecked=[];const d=[];t.value.forEach(L=>{(f.value.Ticket.includes(L.TicketUUID)||f.value.ComponentsChecked.includes(L.TicketUUID))&&d.push(...L.AddonTickets.map(q=>q.TicketUUID))}),f.value.AddonsChecked=f.value.AddonsChecked.filter(L=>d.includes(L)),n(y)},o=y=>{const d=v.value.find(L=>L.TicketUUID===f.value.Ticket[0]);if(d)for(;f.value.ComponentsChecked.length>d.ComponentsRequired;)f.value.ComponentsChecked.shift();n(y)},n=(y=void 0)=>{U.value=JSON.stringify(f.value),setTimeout(()=>p("change",y),100)};try{A!=null&&A.TicketData&&(f.value=JSON.parse(A.TicketData),"ticket"in f.value&&(f.value.Ticket=f.value.ticket),"addonsChecked"in f.value&&(f.value.AddonsChecked=f.value.addonsChecked),"componentsChecked"in f.value&&(f.value.ComponentsChecked=f.value.componentsChecked),n())}catch{}return(y,d)=>{var L;return s(),F("div",gt,[H("h4",null,[K(Q(y.label)+" ",1),(L=m(A))!=null&&L.Registration.Leader?P("",!0):(s(),F("small",pt,"(controlled by group leader)"))]),u(he,{opened:a.value,"onUpdate:opened":d[4]||(d[4]=q=>a.value=q)},{default:i(()=>[(s(!0),F(B,null,ne(m(Pe)(t.value.filter(q=>q.Type===m(vl).TICKET_TYPE_GROUP)),q=>(s(),F(B,{key:q.TicketUUID},[q.Tickets.length>0?(s(),k(rl,{key:0,value:q.TicketUUID},{activator:i(({props:N})=>[u(fe,pe(N,{"prepend-icon":"mdi:mdi-group"}),{default:i(()=>[u(Le,null,{default:i(()=>[H("strong",null,Q(q.Name),1)]),_:2},1024),u(Se,{class:"d-inline"},{default:i(()=>[K(Q(q.Description),1)]),_:2},1024)]),_:2},1040)]),default:i(()=>[(s(!0),F(B,null,ne(q.Tickets,N=>(s(),k(fe,{key:N.TicketUUID,class:"override-pl"},{default:i(()=>{var O;return[u(Se,{class:"d-inline"},{default:i(()=>[K(Q(N.Description),1)]),_:2},1024),u(De,{modelValue:f.value.Ticket,"onUpdate:modelValue":d[0]||(d[0]=b=>f.value.Ticket=b),value:N.TicketUUID,onChange:I,rules:[C.value.required(N)],"validate-on":"submit",disabled:m(h)||!((O=m(A))!=null&&O.Registration.Leader)},{label:i(()=>[u(we,{icon:N.RequiresAccommodation?"mdi:mdi-home":N.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${N.Name} ${N.Price>0?`(${m(Ee).currencySymbol}${N.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),f.value.Ticket.length>0&&N.TicketUUID===f.value.Ticket[0]?(s(),F(B,{key:0},[N.AddonTickets.length?(s(),k(he,{key:0},{default:i(()=>[(s(!0),F(B,null,ne(m(Pe)(N.AddonTickets),b=>(s(),F(B,{key:b==null?void 0:b.TicketUUID},[b?(s(),k(fe,{key:0},{default:i(()=>[u(Le,null,{default:i(()=>{var _;return[u(De,{modelValue:f.value.AddonsChecked,"onUpdate:modelValue":d[1]||(d[1]=D=>f.value.AddonsChecked=D),value:b.TicketUUID,onChange:d[2]||(d[2]=D=>{f.value.ComponentsChecked=[],n(D)}),disabled:m(h)||!((_=m(A))!=null&&_.Registration.Leader)},{label:i(()=>[u(we,{icon:b.RequiresAccommodation?"mdi:mdi-home-plus":b.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${b.Name} ${b.Price>0?`(${m(Ee).currencySymbol}${b.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),u(Se,{class:"d-inline"},{default:i(()=>[K(Q(b.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0),N.TicketComponents.length?(s(),k(he,{key:1},{default:i(()=>[(s(!0),F(B,null,ne(m(Pe)(N.TicketComponents),b=>(s(),F(B,{key:b==null?void 0:b.TicketUUID},[b?(s(),k(fe,{key:0},{default:i(()=>[u(Le,null,{default:i(()=>{var _;return[u(De,{modelValue:f.value.ComponentsChecked,"onUpdate:modelValue":d[3]||(d[3]=D=>f.value.ComponentsChecked=D),value:b.TicketUUID,onChange:o,rules:[C.value.required(N,b)],"validate-on":"submit",disabled:m(h)||!((_=m(A))!=null&&_.Registration.Leader)},{label:i(()=>[u(we,{icon:b.RequiresAccommodation?"mdi:mdi-home-plus":b.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),K(" "+Q(`${b.Name} ${b.Price>0?`(${m(Ee).currencySymbol}${b.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),u(Se,null,{default:i(()=>[K(Q(b.Description),1)]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)],64)):P("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):P("",!0)],64))),128))]),_:1},8,["opened"])])}}});const yt={key:0},bt=H("strong",null,"Your Sharing Group",-1),It={class:"d-flex flex-wrap my-2"},Ut=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Dt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Tt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},kt=H("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Ct={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Vt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},St=["href","onClick"],Et=H("br",null,null,-1),wt=H("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),At=H("strong",null,"Your Groups Accommodation",-1),_t=H("br",null,null,-1),Ot=H("small",null,"(in order of preference, controlled by group leader)",-1),Rt=H("strong",null,"Accommodation Options",-1),Lt=H("br",null,null,-1),Mt=H("strong",null,"Your Chosen Accommodation",-1),$t=H("small",null,"(in order of preference)",-1),xt=ye({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:p}){const l=e,{admin:M=!1,convention:g,disabled:h}=l,A=be(e,"modelValue"),U=Ke(l,p,void 0,void 0,"items"),w=Ge(),f=dl(),t=Dl.getInstance(),v=E(Te(A.value)),a=E([]),C=E(),r=E({sharing:!1}),I=()=>{try{const c=JSON.parse(l.data);c&&(r.value=c)}catch{}};I(),ae(l,()=>{I(),l.registrationGroup&&(a.value=l.registrationGroup.Members,C.value=l.registrationGroup.Registration)}),ae(v,c=>{A.value=Te(c)},{deep:!0});const o=E(""),n=E(!1),y=()=>{var c;(c=C.value)!=null&&c.Leader&&w.getRegistrationInvite(g.ConventionUUID).then(V=>{if(V){const j=new URL(location.href);j.searchParams.set("token",V),o.value=j.toString()}})},d=()=>{Fl(o.value),y(),n.value=!0,setTimeout(()=>n.value=!1,2200)},L=(c=void 0)=>{setTimeout(()=>p("change",c),100)},q=E({required:c=>!l.required||c.length>0||"Selections Required"}),N=c=>c?`${c.Reference?`#${c.Reference}`:"(not registered)"} ${c.Name}`:"",O=()=>{var c;t.emit("registration.group.leave",(c=C.value)==null?void 0:c.RegistrationUUID)},b=c=>{t.emit("registration.group.remove.member",c)},_=E([]);ae(U,()=>{D()});const D=()=>{M?w.getConventionAccommodation(g.ConventionUUID).then(c=>{_.value=c.filter(V=>!!(U!=null&&U.value.find(j=>j.Value===V.AccommodationUUID)))||[]}):U.value.length>0&&w.getFieldAccommodation(U.value[0].FieldUUID).then(c=>{_.value=c.filter(V=>!!(U!=null&&U.value.find(j=>j.Value===V.AccommodationUUID)))||[]})};D(),(()=>{var c;if(l.registrationGroup)if(a.value=l.registrationGroup.Members,C.value=l.registrationGroup.Registration,(c=C.value)!=null&&c.Leader)y();else try{v.value=JSON.parse(l.registrationGroup.AccommodationData),L()}catch{}})();const R=E({column:0,id:""}),X=()=>{!h&&!v.value.includes(R.value.id)&&(R.value.column===0&&R.value.id!==""&&v.value.push(R.value.id),L())},le=()=>{const c=v.value.findIndex(V=>V===R.value.id);!h&&c>=0&&(v.value.splice(c,1),L())},oe=()=>{if(h||R.value.column!==1)return;const c=v.value.findIndex(V=>V===R.value.id);c<=0||(al(v.value,c,c-1),L())},T=()=>{if(h||R.value.column!==1)return;const c=v.value.findIndex(V=>V===R.value.id);c>=v.value.length-1||(al(v.value,c,c+1),L())};return(c,V)=>{var j;return s(),F(B,null,[H("h4",null,Q(c.label),1),u(J,null,{default:i(()=>[u(Y,{cols:"12"},{default:i(()=>{var $,ue;return[a.value&&C.value&&r.value.sharing?(s(),F("div",yt,[bt,!m(h)&&(($=a.value.find(ee=>ee.IsLeader))==null?void 0:$.UUID)!==C.value.RegistrationUUID?(s(),k(ce,{key:0,color:"red",variant:"text",onClick:O},{default:i(()=>[K("(leave group)")]),_:1})):P("",!0),H("dl",It,[Ut,H("dd",Dt,[u(ll,{class:"rounded-circle d-inline-block",src:m(f).GetProfileImageURL(((ue=a.value.find(ee=>ee.IsLeader))==null?void 0:ue.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),H("div",Tt,Q(N(a.value.find(ee=>ee.IsLeader))),1)]),(s(!0),F(B,null,ne(a.value,ee=>(s(),F(B,{key:ee.UUID},[ee.IsLeader?P("",!0):(s(),F(B,{key:0},[kt,H("dd",Ct,[u(ll,{class:"rounded-circle d-inline-block",src:m(f).GetProfileImageURL(ee.UserUUID),height:"32",width:"32"},null,8,["src"]),H("div",Vt,[K(Q(N(ee))+" ",1),C.value.Leader?(s(),k(ce,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:Xe=>b(ee.UUID),disabled:m(h)},null,8,["onClick","disabled"])):P("",!0)])])],64))],64))),128))]),u(Yl,{modelValue:n.value,"onUpdate:modelValue":V[0]||(V[0]=ee=>n.value=ee),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),o.value&&C.value.Leader&&!m(h)?(s(),F(B,{key:1},[H("a",{href:o.value,onClick:sl(d,["prevent"]),class:"text-white text-decoration-none"},[u(ce,{color:"blue",class:"mb-2"},{default:i(()=>[K("Get Invite Link")]),_:1})],8,St),Et,wt],64)):P("",!0)])):P("",!0)]}),_:1})]),_:1}),C.value&&!C.value.Leader?(s(),k(J,{key:0},{default:i(()=>[u(Y,{cols:"10",md:"5"},{default:i(()=>[At,_t,Ot,u(he,null,{default:i(()=>[(s(!0),F(B,null,ne(v.value.map($=>_.value.find(ue=>ue.AccommodationUUID==$)).filter($=>$!==void 0),($,ue)=>(s(),F(B,null,[$?(s(),k(fe,{key:$.AccommodationUUID,title:`${ue+1}. ${$.Name}`,class:$e(R.value.column===1&&R.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):P("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(s(),k(J,{key:1},{default:i(()=>[u(Y,{cols:"12",md:"5"},{default:i(()=>[Rt,Lt,u(he,null,{default:i(()=>[(s(!0),F(B,null,ne(_.value,$=>(s(),k(fe,{key:$.AccommodationUUID,title:$.Name,class:$e(R.value.column===0&&R.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ue=>R.value={column:0,id:$.AccommodationUUID},"append-icon":m(h)?"":"mdi:mdi-gesture-tap",onDblclick:V[1]||(V[1]=ue=>X())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),m(h)?P("",!0):(s(),k(Y,{key:0,cols:"12",md:"1"},{default:i(()=>[u(J,{class:"d-md-none"},{default:i(()=>[u(Y,{cols:"12",class:"text-center"},{default:i(()=>[u(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:V[2]||(V[2]=$=>X()),color:"primary",title:"Select"}),K(" Â  "),u(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:V[3]||(V[3]=$=>le()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),u(J,{class:"d-none d-md-flex h-100 align-content-center"},{default:i(()=>[u(Y,{cols:"12"},{default:i(()=>[u(ce,{icon:"mdi:mdi-arrow-right",size:"small",onClick:V[4]||(V[4]=$=>X()),color:"primary",title:"Select"})]),_:1}),u(Y,{cols:"12"},{default:i(()=>[u(ce,{icon:"mdi:mdi-arrow-left",size:"small",onClick:V[5]||(V[5]=$=>le()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),u(Y,{cols:"10",md:"5"},{default:i(()=>[Mt,u(he,null,{default:i(()=>[(s(!0),F(B,null,ne(v.value.map($=>_.value.find(ue=>ue.AccommodationUUID==$)).filter($=>$!==void 0),($,ue)=>(s(),F(B,null,[$?(s(),k(fe,{key:$.AccommodationUUID,title:`${ue+1}. ${$.Name}`,class:$e(R.value.column===1&&R.value.id===$.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ee=>R.value={column:1,id:($==null?void 0:$.AccommodationUUID)||""},"append-icon":m(h)?"":"mdi:mdi-gesture-tap",onDblclick:V[6]||(V[6]=ee=>le())},null,8,["title","class","onClick","append-icon"])):P("",!0)],64))),256))]),_:1}),$t]),_:1}),m(h)?P("",!0):(s(),k(Y,{key:1,cols:"2",md:"1"},{default:i(()=>[u(J,{class:"d-flex h-100 align-content-center mt-3"},{default:i(()=>[u(Y,{cols:"12"},{default:i(()=>[u(ce,{icon:"mdi:mdi-arrow-up",size:"small",onClick:V[7]||(V[7]=$=>oe()),color:"primary",title:"Higher Priority"})]),_:1}),u(Y,{cols:"12"},{default:i(()=>[u(ce,{icon:"mdi:mdi-arrow-down",size:"small",onClick:V[8]||(V[8]=$=>T()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(j=C.value)!=null&&j.Leader?(s(),k(Ne,{key:2,modelValue:A.value,"onUpdate:modelValue":V[9]||(V[9]=$=>A.value=$),disabled:m(h)||!1,"persistent-hint":c.persistentHint||!1,"error-messages":c.errorMessages||"",rules:[q.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):P("",!0)],64)}}});const Pt=ye({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:p}){const l=e,M=Ke(l,p,void 0,void 0,"items"),g=be(e,"modelValue"),h=E({required:t=>!l.required||!!t||"Required.",min:t=>{var y,d;const v=new Date,a=v.getFullYear(),C=(v.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=v.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),I=((y=M.value.find(L=>L.Title=="MIN_AGE"))==null?void 0:y.Value)||"18",o=((d=M.value.find(L=>L.Title=="BEFORE_DATE"))==null?void 0:d.Value)||`${a}-${C}-${r}`,n=w(o);return U(t,o,parseInt(I))||`You must be at least ${I} years old by ${n.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),A=()=>(p("blur"),!(h.value.min(g.value||"")!==!0||h.value.required(g.value||"")!==!0)),U=(t,v,a)=>{if(t>=v)return!1;const C=w(t),I=w(v).getTime()-C.getTime(),o=1e3*60*60*24*365.25;return I/o>=a},w=t=>{const[v,a,C]=t.split("-");return new Date(parseInt(v),parseInt(a)-1,parseInt(C))},f=(t=void 0)=>{setTimeout(()=>p("change",t),100)};return(t,v)=>(s(),k(ke,{modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=a=>g.value=a),type:"date",hint:t.hint||"",label:t.label||"",name:t.name||"",variant:"outlined",disabled:t.disabled||!1,"persistent-hint":t.persistentHint||!1,"error-messages":t.errorMessages||"",rules:[h.value.required,h.value.min],onBlur:A,onChange:f},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ft={class:"text-center"},qt={key:0},Nt={key:0,class:"image-progress my-auto mx-auto"},Bt=["src"],Yt=ye({__name:"BadgeImage",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:p}){const l=e,M=be(e,"modelValue"),g=E({}),h=()=>{g.value.left=parseInt(getComputedStyle(a.value).left),g.value.top=parseInt(getComputedStyle(a.value).top),g.value.height=a.value.height,g.value.width=a.value.width,M.value=JSON.stringify(g.value)},A=Ge(),U=dl(),w=E(),f=E(""),t=E(!0),v=E(),a=E(),C=E(""),r=E(!1),I=E(0),o=E(),n=E({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),y=E(280),d=E(280);l.items.find(T=>{if(T.Title==="TargetWidth")return d.value=parseInt(T.Value,10)||280,!0}),l.items.find(T=>{if(T.Title==="TargetHeight")return y.value=parseInt(T.Value,10)||280,!0});const L=de(()=>({"--preview-width":`${d.value}px`,"--preview-height":`${y.value}px`})),q=E(!1);try{g.value=JSON.parse(M.value||"{}"),g.value.fileUUID&&(C.value=U.GetBadgeImageURL(g.value.fileUUID))}catch{}l.registration&&A.getConBadgeDisplayName(l.registration.RegistrationUUID).then(T=>{T&&(f.value=T)}).catch(()=>{});const N=E({required:T=>!l.required||!!T||"Required.",saved:()=>!t.value||"File not uploaded."}),O=()=>(p("blur"),N.value.required(M.value||"")!==!0),b=(T=void 0)=>{D().then(()=>{_(),setTimeout(()=>p("change",T),100)})},_=()=>{v.value.files.length>0&&(C.value=URL.createObjectURL(v.value.files[0]))},D=async()=>{var c;const T=new FormData((c=w.value)==null?void 0:c.$el);t.value=!1,r.value=!0,U.SaveFormFile(T).then(V=>{V.Saved&&(r.value=!1,t.value=!0,g.value.fileUUID=V.FileUUID,q.value=!0)}).catch(()=>{})},x=()=>{a.value.style.left="0px",a.value.style.top="0px",a.value.width>a.value.height?a.value.width=d.value*(a.value.width/a.value.height):a.value.width=d.value,a.value.classList.remove("d-none")},R=(T,c=0,V=void 0)=>{if(V&&V.type)switch(V.type){case"touchstart":case"touchend":V.preventDefault();break}let j=500;if(!I.value)I.value=Date.now();else{const $=Date.now()-I.value;$>=3e3?j=1:$>=2500?j=2:$>=2e3?j=5:$>=1500?j=12:$>=1e3?j=25:$>=500?j=50:$>=250&&(j=100)}switch(c!==j&&(clearInterval(o.value),o.value=setInterval(()=>{R(T,j)},j)),T){case 0:I.value=0,clearInterval(o.value),h();break;case 6:a.value.width-=1;break;case 5:a.value.width+=1;break;case 1:a.value.style.top=`${(parseInt(getComputedStyle(a.value).top)||0)-1}px`;break;case 2:a.value.style.left=`${(parseInt(getComputedStyle(a.value).left)||0)+1}px`;break;case 3:a.value.style.top=`${(parseInt(getComputedStyle(a.value).top)||0)+1}px`;break;case 4:a.value.style.left=`${(parseInt(getComputedStyle(a.value).left)||0)-1}px`;break}le()},X=T=>{switch(T.type){case"touchstart":T.preventDefault(),n.value.imageX=parseInt(getComputedStyle(a.value).left),n.value.imageY=parseInt(getComputedStyle(a.value).top),n.value.mouseX=T.touches[0].clientX,n.value.mouseY=T.touches[0].clientY,n.value.mouseDown=!0;break;case"mousedown":n.value.imageX=parseInt(getComputedStyle(a.value).left),n.value.imageY=parseInt(getComputedStyle(a.value).top),n.value.mouseX=T.clientX,n.value.mouseY=T.clientY,n.value.mouseDown=!0;break;case"touchend":T.preventDefault();case"mouseup":n.value.mouseDown=!1,h();break;case"touchmove":if(!n.value.mouseDown)return;a.value.style.left=`${n.value.imageX+(T.touches[0].clientX-n.value.mouseX)}px`,a.value.style.top=`${n.value.imageY+(T.touches[0].clientY-n.value.mouseY)}px`;break;case"mousemove":if(!n.value.mouseDown)return;a.value.style.left=`${n.value.imageX+(T.clientX-n.value.mouseX)}px`,a.value.style.top=`${n.value.imageY+(T.clientY-n.value.mouseY)}px`;break;case"dragstart":T.preventDefault();break;case"keydown":switch(T.key){case"ArrowUp":T.preventDefault(),R(1);break;case"ArrowRight":T.preventDefault(),R(2);break;case"ArrowDown":T.preventDefault(),R(3);break;case"ArrowLeft":T.preventDefault(),R(4);break;case"+":T.preventDefault(),R(5);break;case"-":T.preventDefault(),R(6);break}break;case"keyup":R(0),h();break}le()},le=()=>{if(a.value.width<d.value&&(a.value.width=d.value),a.value.height<y.value){const T=y.value-a.value.height,c=a.value.width/a.value.height;a.value.width+=Math.ceil(T*c)}(parseInt(getComputedStyle(a.value).left)||0)>0&&(a.value.style.left="0px"),(parseInt(getComputedStyle(a.value).top)||0)>0&&(a.value.style.top="0px"),(parseInt(getComputedStyle(a.value).left)||0)<0-(a.value.width-d.value)&&(a.value.style.left=`${0-(a.value.width-d.value)}px`),(parseInt(getComputedStyle(a.value).top)||0)<0-(a.value.height-y.value)&&(a.value.style.top=`${0-(a.value.height-y.value)}px`)},oe=()=>{try{clearInterval(o.value)}catch{}n.value.mouseDown=!1,I.value=0,h()};return window.addEventListener("mouseup",oe),window.addEventListener("mousemove",X),window.addEventListener("touchend",oe),window.addEventListener("touchmove",X),Tl(()=>{window.removeEventListener("mouseup",oe),window.removeEventListener("mousemove",X),window.removeEventListener("touchend",oe),window.removeEventListener("touchmove",X)}),(T,c)=>(s(),F("div",{style:kl(L.value)},[u(cl,{ref_key:"badgeImageForm",ref:w,enctype:"multipart/form-data"},{default:i(()=>[u(J,null,{default:i(()=>[u(Y,null,{default:i(()=>[u(Jl,{label:T.label||"",name:T.name||"",hint:T.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:v,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[N.value.required],"error-messages":T.errorMessages||"","persistent-hint":T.persistentHint||!1,disabled:!t.value||T.disabled||!1,"hide-details":"",onChange:b,onBlur:O},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),H("p",Ft,[t.value?P("",!0):(s(),F("small",qt,"File Uploading"))])]),_:1})]),_:1}),u(J,null,{default:i(()=>[u(Y,{class:"text-center"},{default:i(()=>[K(" Preview "),r.value?(s(),F("div",Nt,[u(Xl,{indeterminate:"",color:"primary",size:128,width:10},{default:i(()=>[K("Uploading")]),_:1})])):(s(),F(B,{key:1},[H("div",{class:"image-preview my-auto mx-auto",onMousemove:X,onMousedown:X,onMouseup:X,onTouchstart:X,onTouchmove:X,onTouchend:X},[H("img",{src:C.value,ref_key:"imageDisplay",ref:a,alt:"Your badge image",onLoad:x,onDragstart:X,onKeydown:X,onKeyup:X,tabindex:"0",class:"d-none"},null,40,Bt)],32),H("h3",null,Q(f.value),1)],64))]),_:1})]),_:1}),q.value?(s(),k(J,{key:0,class:"my-auto mx-auto",style:{"max-width":"280px"}},{default:i(()=>[u(Y,null,{default:i(()=>[u(ce,{icon:"mdi:mdi-plus",color:"primary",onMousedown:c[0]||(c[0]=V=>R(5,0,V)),onMouseup:c[1]||(c[1]=V=>R(0,0,V)),onTouchstart:c[2]||(c[2]=V=>R(5,0,V)),onTouchend:c[3]||(c[3]=V=>R(0,0,V))})]),_:1}),u(Y,{class:"text-right"},{default:i(()=>[u(ce,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:c[4]||(c[4]=V=>R(6,0,V)),onMouseup:c[5]||(c[5]=V=>R(0,0,V)),onTouchstart:c[6]||(c[6]=V=>R(6,0,V)),onTouchend:c[7]||(c[7]=V=>R(0,0,V))})]),_:1})]),_:1})):P("",!0)]),_:1},512)],4))}});const Gt=Cl(Yt,[["__scopeId","data-v-7f8d136c"]]),Kt=Me({..._l({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ht=Be()({name:"VRadio",props:Kt(),setup(e,p){let{slots:l}=p;return He(()=>u(il,pe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),l)),{}}});const Xt=Me({height:{type:[Number,String],default:"auto"},...Kl(),...ul(Ol(),["multiple"]),trueIcon:{type:Qe,default:"$radioOn"},falseIcon:{type:Qe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Wt=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,p){let{attrs:l,slots:M}=p;const g=Vl(),h=de(()=>e.id||`radio-group-${g}`),A=Re(e,"modelValue");return He(()=>{const[U,w]=Sl(l),[f,t]=Ne.filterProps(e),[v,a]=il.filterProps(e),C=M.label?M.label({label:e.label,props:{for:h.value}}):e.label;return u(Ne,pe({class:["v-radio-group",e.class],style:e.style},U,f,{modelValue:A.value,"onUpdate:modelValue":r=>A.value=r,id:h.value}),{...M,default:r=>{let{id:I,messagesId:o,isDisabled:n,isReadonly:y}=r;return u(B,null,[C&&u(Hl,{id:I.value},{default:()=>[C]}),u(Rl,pe(v,{id:I.value,"aria-describedby":o.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:n.value,readonly:y.value,"aria-labelledby":C?I.value:void 0,multiple:!1},w,{modelValue:A.value,"onUpdate:modelValue":d=>A.value=d}),M)])}})}),{}}}),nl=ye({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:p}){const l=e,{admin:M=!1,disabled:g=!1,persistentHint:h=!1,required:A=!1}=l,U=E(""),w=be(e,"modelValue"),f=Ke(l,p,void 0,void 0,"field"),t=E(Te(f.value)),v=E({maxlength:o=>!l.maxLength||o.length<=l.maxLength||`Maximum length is ${l.maxLength} characters. (Current length: ${o.length})`,minlength:o=>!l.minLength||o.length>=l.minLength||`Minimum length is ${l.minLength} characters. (Current length: ${o.length})`,required:o=>!l.required||!!o.replace(/\s/g,"")||"Required field."}),a=E(!1),C=E([]),r=E("");try{const o=JSON.parse(w.value);Array.isArray(o)?C.value=o:typeof o=="boolean"?a.value=o:r.value=w.value}catch{a.value=!1,C.value=[],r.value=w.value}ae(a,()=>{w.value=JSON.stringify(a.value),p("input"),p("change")}),ae(C,()=>{w.value=JSON.stringify(C.value),p("input"),p("change")},{deep:!0}),ae(r,()=>{w.value=r.value,p("input"),p("change")}),ae(f.value,()=>{t.value.Type!==f.value.Type?(t.value=Te(f.value),a.value=!1,C.value=[],r.value=""):t.value=Te(f.value)});const I=(o=void 0)=>{p("change",o)};return(o,n)=>{var y;return t.value.Type===m(ie).TEXT?(s(),k(ke,{key:0,modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=d=>r.value=d),name:o.name||"",hint:t.value.Hint,label:`${t.value.Label}${m(A)?"*":""}`,placeholder:t.value.Placeholder,variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===m(ie).DATE?(s(),k(ke,{key:1,modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=d=>r.value=d),type:"date",name:o.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===m(ie).NUMBER?(s(),k(ke,{key:2,modelValue:r.value,"onUpdate:modelValue":n[2]||(n[2]=d=>r.value=d),type:"number",name:o.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===m(ie).TEXTAREA?(s(),k(jl,{key:3,modelValue:r.value,"onUpdate:modelValue":n[3]||(n[3]=d=>r.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,placeholder:t.value.Placeholder,variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.maxlength,v.value.minlength,v.value.required],onChange:I,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):t.value.Type===m(ie).CHECKBOX?(s(),F(B,{key:4},[t.value.Multiple?(s(!0),F(B,{key:0},ne(t.value.Values,d=>(s(),k(De,{key:d.ID,modelValue:C.value,"onUpdate:modelValue":n[4]||(n[4]=L=>C.value=L),name:o.name||"",hint:t.value.Hint,label:d.Title,value:d.Value,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,rules:[v.value.required],onChange:I},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(s(),k(De,{key:1,modelValue:a.value,"onUpdate:modelValue":n[5]||(n[5]=d=>a.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,required:m(A),rules:[d=>!m(A)||!!d||"You must tick to continue!"],onChange:I},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):t.value.Type===m(ie).SELECT?(s(),F(B,{key:5},[!t.value.Autofill&&t.value.Multiple?(s(),k(qe,{key:0,modelValue:C.value,"onUpdate:modelValue":n[6]||(n[6]=d=>C.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill&&t.value.Multiple?(s(),k(tl,{key:1,modelValue:C.value,"onUpdate:modelValue":n[7]||(n[7]=d=>C.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,multiple:"",items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):t.value.Autofill?t.value.Autofill?(s(),k(tl,{key:3,modelValue:r.value,"onUpdate:modelValue":n[9]||(n[9]=d=>r.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):P("",!0):(s(),k(qe,{key:2,modelValue:r.value,"onUpdate:modelValue":n[8]||(n[8]=d=>r.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,items:t.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:m(g)||!1,"persistent-hint":m(h)||!1,"error-messages":U.value,rules:[v.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):t.value.Type===m(ie).RADIO?(s(),k(Wt,{key:6,modelValue:r.value,"onUpdate:modelValue":n[10]||(n[10]=d=>r.value=d),name:o.name||"",hint:t.value.Hint,label:t.value.Label,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,rules:[v.value.required],onChange:I},{default:i(()=>[(s(!0),F(B,null,ne(t.value.Values,d=>(s(),k(Ht,{key:d.Value,label:d.Title,value:d.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):t.value.Type===m(ie).ACCOMMODATION?(s(),k(xt,{key:7,modelValue:C.value,"onUpdate:modelValue":n[11]||(n[11]=d=>C.value=d),name:o.name,admin:m(M),convention:o.convention,"registration-group":o.registrationGroup,data:o.field.Data,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,required:m(A),onChange:I},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===m(ie).AGE?(s(),k(Pt,{key:8,modelValue:r.value,"onUpdate:modelValue":n[12]||(n[12]=d=>r.value=d),name:o.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,onChange:I},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===m(ie).BADGE_IMAGE?(s(),k(Gt,{key:9,modelValue:r.value,"onUpdate:modelValue":n[13]||(n[13]=d=>r.value=d),name:o.name,registration:(y=o.registrationGroup)==null?void 0:y.Registration,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,onChange:I},null,8,["modelValue","name","registration","hint","label","items","disabled","persistent-hint","error-messages"])):t.value.Type===m(ie).EXTRAS?(s(),k(vt,{key:10,modelValue:r.value,"onUpdate:modelValue":n[14]||(n[14]=d=>r.value=d),admin:m(M),convention:o.convention,name:o.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,required:m(A),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===m(ie).INTERESTS?(s(),k(ft,{key:11,modelValue:r.value,"onUpdate:modelValue":n[15]||(n[15]=d=>r.value=d),admin:m(M),convention:o.convention,name:o.name,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,required:m(A),onChange:I},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):t.value.Type===m(ie).TICKET?(s(),k(ht,{key:12,modelValue:r.value,"onUpdate:modelValue":n[16]||(n[16]=d=>r.value=d),admin:m(M),convention:o.convention,name:o.name,"registration-group":o.registrationGroup,hint:t.value.Hint,label:t.value.Label,items:t.value.Values,disabled:m(g)||!1,"persistent-hint":m(h),"error-messages":U.value,required:m(A),onChange:I},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):P("",!0)}}}),Jt={key:0,class:"my-2 text-white text-center"},jt={key:1,class:"admin-header my-2 text-white text-center"},zt=["innerHTML"],Qt=["innerHTML"],Va=ye({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:te(["close"],["update:modelValue"]),setup(e,{emit:p}){const l=be(e,"modelValue");Ae(l.value.Sections),l.value.Sections.forEach(O=>{O.Fields&&Ae(O.Fields)});const M=E(),g=et(),h=Ge(),A=E(!1),U=E(!1),w=E(!1),f=E(!1),t=E(!1),v=E(!1),a=E(!1),C=E(!1),r=E(!1),I=E(!1),o=E(!1),n=E((()=>{if(e.data!==void 0){const b=Te(e.data);return l.value.Sections.forEach(_=>{_.Fields&&_.Fields.forEach(D=>{const x=e.data.Data.find(R=>R.SectionFieldUUID===D.SectionFieldUUID&&R.SectionFieldUUID==D.SectionFieldUUID);if(x)D.Value=x.Data;else{const R={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:_.ID,SectionUUID:_.SectionUUID,SectionFieldID:D.ID,SectionFieldUUID:D.SectionFieldUUID,Data:D.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};b.Data.push(R),D.Value=""}})}),b}const O={ID:0,SubmissionUUID:xe(),FormID:l.value.ID,FormUUID:l.value.FormUUID,UserID:(g==null?void 0:g.ID)||0,UserUUID:(g==null?void 0:g.UserUUID)||"",Data:[],Status:wl.SUBMISSION_STATUS_OPEN};return O.Data=l.value.Sections.map(b=>b.Fields?b.Fields.map(_=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:O.ID,SubmissionUUID:O.SubmissionUUID,SectionID:b.ID,SectionUUID:b.SectionUUID,SectionFieldID:_.ID,SectionFieldUUID:_.SectionFieldUUID,Data:""})):[]).flat(),O})()),y=(O,b,_)=>{const D=n.value.Data.find(x=>x.SectionUUID===O&&x.SectionFieldUUID===b);D&&(D.Data=_)},d=(O,b,_,D,x)=>O&&O.Type===re.FORM_TYPE_REGISTRATION?b?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:D?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:x?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":O&&O.Type===re.FORM_TYPE_ACCOMMODATION?_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:D?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:x?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":O&&O.Type===re.FORM_TYPE_DEALER?D?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:x?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":O&&O.Type===re.FORM_TYPE_BADGE?x?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(O&&O.Type===re.FORM_TYPE_ADDITIONAL,"/"),L=({callback:O})=>{h.getRegistrationByConvention(e.convention.ConventionUUID).then(b=>{O&&O("Loading"),h.getAvailableConventionForms(e.convention.ConventionUUID).then(_=>{b.Submissions.forEach((T,c)=>{T.Form||(b.Submissions[c].Form=_.find(V=>V.FormUUID===T.FormUUID))});const D=b.Submissions.find(T=>T.FormUUID===n.value.FormUUID),x=b.Submissions.find(T=>{var c;return((c=T.Form)==null?void 0:c.Type)===re.FORM_TYPE_ACCOMMODATION}),R=b.Submissions.find(T=>{var c;return((c=T.Form)==null?void 0:c.Type)===re.FORM_TYPE_ADDITIONAL}),X=b.Submissions.find(T=>{var c;return((c=T.Form)==null?void 0:c.Type)===re.FORM_TYPE_DEALER}),le=b.Submissions.find(T=>{var c;return((c=T.Form)==null?void 0:c.Type)===re.FORM_TYPE_BADGE}),oe=d(D==null?void 0:D.Form,x==null?void 0:x.Form,X==null?void 0:X.Form,le==null?void 0:le.Form,R==null?void 0:R.Form);Ze.push(oe)})})},q=({callback:O})=>{var b;(b=M.value)==null||b.validate().then(_=>{_.valid?h.saveSubmission(n.value).then(D=>{D?setTimeout(()=>{N(D,O,1)},1e3):O&&O("Failed to process request")}).catch(()=>{O&&O("Failed to process request")}):O&&O("Errors in form detected, please review and try again.")})},N=(O,b,_=1)=>{h.checkSubmission(O).then(D=>{if(D)if(D.Ready&&D.Submission){if(A.value=!1,n.value=D.Submission,b&&b("Saved"),e.admin)p("close");else if(D.Forms&&D.Forms.length>0){const x=D.Forms.find(c=>c.FormUUID===n.value.FormUUID),R=D.Forms.find(c=>c.Type===re.FORM_TYPE_ACCOMMODATION),X=D.Forms.find(c=>c.Type===re.FORM_TYPE_DEALER),le=D.Forms.find(c=>c.Type===re.FORM_TYPE_BADGE),oe=D.Forms.find(c=>c.Type===re.FORM_TYPE_ADDITIONAL),T=d(x,R,X,le,oe);Ze.push(T)}}else{if(_>5&&(A.value=!0),_>10&&(U.value=!0),_>20&&(w.value=!0),_>30&&(f.value=!0),_>40&&(t.value=!0),_>50&&(v.value=!0),_>60&&(a.value=!0),_>70&&(C.value=!0),_>80&&(r.value=!0),_>90&&(I.value=!0),_>100&&(o.value=!0),_>200){b&&(A.value=!1,U.value=!1,w.value=!1,f.value=!1,t.value=!1,v.value=!1,a.value=!1,C.value=!1,r.value=!1,I.value=!1,o.value=!1,b("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{N(O,b,_+1)},_<20?1e3*_:2e4)}else b&&(A.value=!1,U.value=!1,w.value=!1,f.value=!1,t.value=!1,v.value=!1,a.value=!1,C.value=!1,r.value=!1,I.value=!1,o.value=!1,b("A problem was encountered during saving, please check form and try again."))}).catch(()=>{b&&(A.value=!1,U.value=!1,w.value=!1,f.value=!1,t.value=!1,v.value=!1,a.value=!1,C.value=!1,r.value=!1,I.value=!1,o.value=!1,b("A problem was encountered during saving, please check form and try again."))})};return(O,b)=>{const _=El("router-link");return s(),k(Bl,null,{default:i(()=>[u(cl,{ref_key:"formValidator",ref:M,autocomplete:"off",onSubmit:b[1]||(b[1]=sl(()=>{},["prevent"]))},{default:i(()=>[l.value.Heading?(s(),F("h1",Jt,Q(l.value.Heading),1)):P("",!0),O.admin?(s(),F("h2",jt," (Admin Mode) ")):P("",!0),l.value.Description?(s(),F("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:l.value.Description},null,8,zt)):P("",!0),(s(!0),F(B,null,ne(l.value.Sections,D=>(s(),k(lt,{key:`section_${l.value.ID}.${D.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:i(()=>[D.Heading?(s(),k(tt,{key:0},{default:i(()=>[K(Q(D.Heading),1)]),_:2},1024)):P("",!0),D.Description?(s(),k(at,{key:1,class:"text-wrap"},{default:i(()=>[H("div",{innerHTML:D.Description},null,8,Qt)]),_:2},1024)):P("",!0),D.Fields?(s(),k(nt,{key:2},{default:i(()=>[(s(!0),F(B,null,ne(D.Fields,x=>(s(),F(B,{key:`field_${l.value.ID}.${D.ID}.${x.ID}`},[x.Field?(s(),k(J,{key:0},{default:i(()=>[u(Y,null,{default:i(()=>[O.editable?(s(),k(nl,{key:0,name:x.SectionFieldUUID,field:x.Field,modelValue:x.Value,"onUpdate:modelValue":R=>x.Value=R,admin:O.admin,convention:O.convention,"registration-group":O.registrationGroup,required:x.Required,"min-length":x.MinLength,"max-length":x.MaxLength,"persistent-hint":!0,onChange:R=>y(D.SectionUUID,x.SectionFieldUUID,x.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(s(),k(nl,{key:1,name:x.SectionFieldUUID,field:x.Field,modelValue:x.Value,"onUpdate:modelValue":R=>x.Value=R,admin:O.admin,convention:O.convention,"registration-group":O.registrationGroup,required:x.Required,"min-length":x.MinLength,"max-length":x.MaxLength,"persistent-hint":!0,disabled:"",onChange:R=>y(D.SectionUUID,x.SectionFieldUUID,x.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):P("",!0)],64))),128))]),_:2},1024)):P("",!0)]),_:2},1024))),128)),O.preview?P("",!0):(s(),F(B,{key:3},[u(J,null,{default:i(()=>[O.admin?(s(),k(Y,{key:1,class:"text-right"},{default:i(()=>[u(ce,{color:"red",onClick:b[0]||(b[0]=D=>p("close"))},{default:i(()=>[K("Cancel")]),_:1})]),_:1})):(s(),k(Y,{key:0,class:"text-right"},{default:i(()=>[u(_,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:i(()=>[u(ce,{color:"red"},{default:i(()=>[K("Close")]),_:1})]),_:1})]),_:1})),O.admin||O.editable?(s(),k(Y,{key:2,class:"text-left"},{default:i(()=>[u(el,{onClick:q,type:"submit"})]),_:1})):(s(),k(Y,{key:3,class:"text-left"},{default:i(()=>[u(el,{onClick:L,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),A.value?(s(),k(J,{key:0},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):P("",!0),U.value?(s(),k(J,{key:1},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):P("",!0),w.value?(s(),k(J,{key:2},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):P("",!0),f.value?(s(),k(J,{key:3},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Reticulating splines ")]),_:1})]),_:1})):P("",!0),t.value?(s(),k(J,{key:4},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):P("",!0),v.value?(s(),k(J,{key:5},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):P("",!0),a.value?(s(),k(J,{key:6},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):P("",!0),C.value?(s(),k(J,{key:7},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):P("",!0),r.value?(s(),k(J,{key:8},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):P("",!0),I.value?(s(),k(J,{key:9},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):P("",!0),o.value?(s(),k(J,{key:10},{default:i(()=>[u(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[K(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):P("",!0)],64))]),_:1},512)]),_:1})}}});export{Ua as F,vl as T,tl as V,nl as _,ka as a,Da as b,ie as c,Va as d,Ca as e,ut as f,Ta as m,Ae as s,it as u};
