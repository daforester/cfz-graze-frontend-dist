import{s as N}from"./index-ba0d422e.js";import{d as B,X as F,Y as K,y as b,R as Q,o as f,b as h,w as n,c as e,e as I,L as C,K as S,h as O,N as U,F as E,O as j,G as R,f as M,H as ie,m as pe,V as ul,D as kl,M as sl,k as ue,$ as ye,Z as Pe,a0 as dl,z as ze,p as Ie,a1 as Dl,a as he,s as G,a2 as el,u as rl,v as El,a3 as Sl,a4 as xl,I as $l,x as Pl,t as re,B as Ol,i as Be,a5 as cl,n as Rl,q as Fl,a6 as Nl,a7 as wl,a8 as ml,a9 as Al,aa as Ll,ab as ql,W as Ml,ac as zl}from"./index-b32d0632.js";import{u as J}from"./useGrazeAPI-87ce7f3a.js";import{_ as Ce,N as ll}from"./SelectTags.vue_vue_type_script_setup_true_lang-ca10c54f.js";import{_ as _e}from"./SaveButton.vue_vue_type_script_setup_true_lang-216cfed7.js";import{e as ce,c as Ve}from"./VCard-90d591b1.js";import{V as k,a as X,m as Bl,b as Yl,c as vl,d as Kl,e as Gl,f as Hl,g as jl}from"./VBtn-10f35354.js";import{V as me,b as se}from"./VToolbar-1f53d858.js";import{V as de}from"./VSpacer-592d841d.js";import{V as Te}from"./VSheet-3052b4fb.js";import{V as ne}from"./VContainer-06a40627.js";import{V as q,a as Xl,s as Wl}from"./VTextField-9e75a076.js";import{V as be}from"./VDialog-5f6dc991.js";import{V as Re,d as te,a as oe,e as Ye,b as Jl}from"./VList-a021241e.js";import{a as Y,V as _}from"./VRow-590b9d1d.js";import{v as H}from"./v4-a960c1f4.js";import{V as Ue,a as ke,b as De,c as Ee}from"./VExpansionPanel-4bec7d8e.js";import{V as fl}from"./VImg-08ced8e6.js";import{V as Zl}from"./VForm-e5f1920e.js";import{V as Ql}from"./VFileInput-1d82706a.js";import{V as Ge}from"./VTextarea-6864b1a2.js";import{T as $,a as et}from"./ticket-b671e8ba.js";import{V as lt}from"./VAutocomplete-e0a818d6.js";import{V as He}from"./VSelect-b8e4dddb.js";import{V as tt,a as nt}from"./VChip-75dc3639.js";import{_ as at}from"./VenuesEditorView.vue_vue_type_script_setup_true_lang-7a5c8a76.js";import{_ as ot}from"./AccommodationEditorView.vue_vue_type_script_setup_true_lang-b9fd8fc5.js";import{R as it}from"./Registrations-6f31742c.js";import{_ as pl,a as ut,V as st,b as dt}from"./FieldEditor.vue_vue_type_script_setup_true_lang-e0ba509f.js";import{u as Oe,F as rt,V as Ke,_ as ct}from"./FormField.vue_vue_type_script_setup_true_lang-388c61e8.js";import{_ as mt}from"./FormRenderer.vue_vue_type_script_setup_true_lang-9313f93f.js";import{V as vt,a as tl}from"./index-7d42c917.js";import{i as ft,u as Se,m as je,d as Xe,j as nl,f as pt}from"./rounded-e5358215.js";import{m as Vt,u as Tt}from"./VOverlay-f821b06a.js";import{u as gt}from"./ssrBoot-c72ba85e.js";import{M as yt}from"./index-e2b2a832.js";import"./scopeId-caff2636.js";import"./createSimpleFunctional-b06f3b34.js";import"./VAvatar-da72e72e.js";import"./VTable-3a613a03.js";var Vl=(t=>(t.FORM_TYPE_ACCOMMODATION="ACCOMMODATION",t.FORM_TYPE_BADGE="BADGE",t.FORM_TYPE_DEALER="DEALER",t.FORM_TYPE_REGISTRATION="REGISTRATION",t.FORM_TYPE_UNSPECIFIED="UNSPECIFIED",t))(Vl||{});const Ct=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Badge",value:"BADGE"},{title:"Dealer",value:"DEALER"},{title:"Registration",value:"REGISTRATION"},{title:"Unspecified",value:"UNSPECIFIED"}],Fe=t=>{t.sort((o,l)=>(o.Order?o.Order:0)-(l.Order?l.Order:0)),t.forEach((o,l)=>{o.Order=l})},Ne=(t,o)=>{const l=o.indexOf(t);if(l===0)return;const a=t.Order;t.Order=o[l-1].Order,o[l-1].Order=a,Fe(o)},we=(t,o)=>{const l=o.indexOf(t);if(l>=o.length-1)return;const a=t.Order;t.Order=o[l+1].Order,o[l+1].Order=a,Fe(o)},It=B({__name:"EditConventionExtraOptions",props:F({convention:{}},{modelValue:{}}),emits:F(["close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=b(Q(l.value)),v=()=>{l.value=a.value,o("close")};return(r,d)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[e(k,{icon:"",dark:"",onClick:d[0]||(d[0]=s=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:n(()=>[I("Edit Option Choice")]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:v},{default:n(()=>[I(" Apply ")]),_:1})]),_:1})]),_:1}),e(Ve,{class:"pa-0"},{default:n(()=>[e(ne,null,{default:n(()=>[e(q,{label:C(N).formLabelName,type:"text",variant:"outlined",modelValue:a.value.Name,"onUpdate:modelValue":d[1]||(d[1]=s=>a.value.Name=s)},null,8,["label","modelValue"]),e(q,{label:C(N).formLabelDescription,type:"text",variant:"outlined",modelValue:a.value.Description,"onUpdate:modelValue":d[2]||(d[2]=s=>a.value.Description=s)},null,8,["label","modelValue"]),e(q,{label:C(N).formLabelPrice,type:"text",variant:"outlined","prepend-icon":C(N).currencyIcon,modelValue:a.value.Price,"onUpdate:modelValue":d[3]||(d[3]=s=>a.value.Price=s),modelModifiers:{number:!0},hint:"Adds additional charges for selecting this option"},null,8,["label","prepend-icon","modelValue"]),a.value.Choices?(f(),h(Ce,{key:0,modelValue:a.value.Choices,"onUpdate:modelValue":d[4]||(d[4]=s=>a.value.Choices=s),convention:r.convention,hint:"Sub-options (tags) that a user may choose from."},null,8,["modelValue","convention"])):S("",!0)]),_:1})]),_:1})]),_:1}))}}),ht=M("h3",null,"Options",-1),_t=B({__name:"EditConventionExtra",props:F({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=b(Q(o.value)),a=b(!1),v=b(0),r=J(),d=b([""]),s=b([]),u=b([]);t.convention&&(r.getConventionTags(t.convention.ConventionUUID).then(V=>{u.value=V.sort((T,g)=>T.Title.localeCompare(g.Title))}),r.getOrganisationTags(t.convention.OrganisationUUID).then(V=>{s.value=V.sort((T,g)=>T.Title.localeCompare(g.Title))}));const i=O(()=>[...s.value,...u.value]),m=({callback:V})=>{r.saveExtra(l.value).then(T=>{T?(o.value=T,V&&V("Extra Saved")):V&&V("Failed to Save Extra")}).catch(()=>{V&&V("Failed to Save Extra")})},c=V=>{var T;V.Options||(V.Options=[]),V.Options.push({ID:0,OptionUUID:H(),ExtraID:V.ID,ExtraUUID:V.ExtraUUID,Order:((T=V.Options)==null?void 0:T.length)+1,Name:"",Description:"",Price:0,Choices:[]})},p=(V,T)=>{V.Options&&V.Options.splice(T,1)},y=V=>{if(V.Choices&&V.Choices.length>0)return V.Choices.map(T=>{const g=i.value.find(w=>w.TagUUID===T.TagUUID);if(g)return g.Title}).join(", ")};return(V,T)=>(f(),U(E,null,[e(ne,{class:"px-0"},{default:n(()=>[e(q,{label:C(N).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":T[0]||(T[0]=g=>l.value.Name=g)},null,8,["label","modelValue"]),e(q,{label:C(N).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":T[1]||(T[1]=g=>l.value.Description=g)},null,8,["label","modelValue"]),e(Ce,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":T[2]||(T[2]=g=>l.value.AppliesTags=g),convention:V.convention,organisation:V.convention.OrganisationUUID,hint:"Tags a user acquires by selecting any option within this addon purchase."},null,8,["modelValue","convention","organisation"]),ht,e(Re,{opened:d.value,"onUpdate:opened":T[3]||(T[3]=g=>d.value=g)},{default:n(()=>[(f(!0),U(E,null,j(l.value.Options,(g,w)=>(f(),U(E,{key:g.ID},[g?(f(),h(oe,{key:0,"prepend-icon":"mdi:mdi-ticket-percent",title:`${g.Name} ${g.Price&&g.Price>0?`(${C(N).currencySymbol}${g.Price})`:""}`},{append:n(()=>[e(k,{color:"red",icon:"mdi:mdi-close",size:"x-small",class:"mr-1",onClick:A=>p(l.value,w)},null,8,["onClick"]),e(k,{color:"primary",icon:"mdi:mdi-pencil",size:"x-small",onClick:A=>{a.value=!0,v.value=w}},null,8,["onClick"])]),default:n(()=>[g.Choices&&g.Choices.length>0?(f(),h(te,{key:0},{default:n(()=>[I(" Options: "+R(y(g)),1)]),_:2},1024)):S("",!0)]),_:2},1032,["title"])):S("",!0)],64))),128))]),_:1},8,["opened"]),e(k,{color:"primary",onClick:T[4]||(T[4]=g=>c(l.value))},{default:n(()=>[I("Add Option")]),_:1}),e(Y,null,{default:n(()=>[e(_,{class:"text-right"},{default:n(()=>[e(_e,{onClick:m})]),_:1})]),_:1})]),_:1}),e(be,{modelValue:a.value,"onUpdate:modelValue":T[7]||(T[7]=g=>a.value=g),scrollable:""},{default:n(()=>[e(It,{modelValue:l.value.Options[v.value],"onUpdate:modelValue":T[5]||(T[5]=g=>l.value.Options[v.value]=g),convention:V.convention,onClose:T[6]||(T[6]=g=>a.value=!1)},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),bt=B({__name:"EditConventionExtras",props:F({convention:{}},{modelValue:{required:!0}}),emits:F(["close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=J(),v=()=>{const s={ID:0,ExtraUUID:H(),ConventionID:t.convention.ID,ConventionUUID:t.convention.ConventionUUID,Order:l.value.length+1,Name:"New Extra",Description:"",AppliesTags:[],Options:[]};a.saveExtra(s).then(u=>{u&&l.value.push(u)})},r=s=>{a.deleteExtra(l.value[s].ExtraUUID).then(u=>{u&&l.value.splice(s,1)})},d=(...s)=>{s.forEach(u=>{u>=0&&u<l.value.length&&a.saveExtra(l.value[u])})};return(s,u)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[e(k,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:n(()=>[I("Edit Extras")]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:v},{default:n(()=>[I(" Add ")]),_:1})]),_:1})]),_:1}),e(Ve,{class:"pa-0"},{default:n(()=>[e(Ue,null,{default:n(()=>[(f(!0),U(E,null,j(l.value,(i,m)=>(f(),h(ke,{key:i.ID,class:"mt-0"},{default:n(()=>[e(De,null,{actions:n(({expanded:c})=>[e(k,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:p=>r(m)},null,8,["onClick"]),e(X,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(c=>{C(Ne)(i,l.value),d(m,m-1)},["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(c=>{C(we)(i,l.value),d(m,m+1)},["stop"])},null,8,["onClick"]),I(" "+R(i.Name)+" ",1)]),_:2},1024),e(Ee,{class:"px-0"},{default:n(()=>[e(_t,{convention:s.convention,modelValue:l.value[m],"onUpdate:modelValue":c=>l.value[m]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Ut=M("h3",null,"Additional Purchases",-1),kt=M("p",null,"These are global ticket addons that are not tied to any particular ticket type.",-1),Dt=B({__name:"Extras",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=b([]),a=J(),v=b([""]),r=b(!1),d=u=>{if(u.Choices&&u.Choices.length>0)return u.Choices.map(i=>i.Title).join(", ")},s=()=>{r.value=!1};return a==null||a.getConventionExtras(o.value.ConventionUUID||"").then(u=>{u&&(l.value=u)}),(u,i)=>(f(),U(E,null,[e(ne,{fluid:!0,class:"px-0"},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[Ut]),_:1}),e(_,{class:"text-right"},{default:n(()=>[e(k,{color:"primary",onClick:i[0]||(i[0]=m=>r.value=!0)},{default:n(()=>[I("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),kt,e(Re,{opened:v.value,"onUpdate:opened":i[1]||(i[1]=m=>v.value=m)},{default:n(()=>[(f(!0),U(E,null,j(l.value,m=>(f(),h(Ye,{key:m.ID,value:m.ID},{activator:n(({props:c})=>[e(oe,pe(c,{"prepend-icon":"mdi:mdi-group",title:m.Name}),null,16,["title"])]),default:n(()=>[m.Options?(f(!0),U(E,{key:0},j(m.Options,c=>(f(),h(oe,{key:c.ID,"prepend-icon":"mdi:mdi-ticket-percent",title:`${c.Name} ${c.Price&&c.Price>0?`(${C(N).currencySymbol}${c.Price})`:""}`},{default:n(()=>[c.Choices&&c.Choices.length>0?(f(),h(te,{key:0},{default:n(()=>[I(" Options: "+R(d(c)),1)]),_:2},1024)):S("",!0)]),_:2},1032,["title"]))),128)):S("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=m=>r.value=m),scrollable:!0},{default:n(()=>[e(bt,{modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=m=>l.value=m),convention:o.value,onClose:s},null,8,["modelValue","convention"])]),_:1},8,["modelValue"])],64))}}),Et=B({__name:"EditConventionGeneral",props:{modelValue:{required:!0}},emits:F(["close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=b(Q(l.value)),v=b(),r=b([]),d=O(()=>{const V=r.value;return V[0]?URL.createObjectURL(V[0]):a.value.Logo}),s=J(),u=sl(),i=ul(),m=kl(),c=()=>{a.value=JSON.parse(JSON.stringify(l.value))},p=async()=>{var T;const V=new FormData((T=v.value)==null?void 0:T.$el);if(V.get("Image")&&V.get("Image").size>0)return V.set("ConventionUUID",a.value.ConventionUUID),await u.SaveConventionLogo(V)},y=()=>{p(),s.saveConvention(a.value).then(()=>{const V=l.value.Slug,T=a.value.Slug;l.value=a.value,V!==T&&m.push(`/dashboard/admin/${i.params.organisation.toString()}/convention/${a.value.Slug}`),o("close")})};return(V,T)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[e(k,{icon:"",dark:"",onClick:T[0]||(T[0]=g=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:n(()=>[I("Convention Settings")]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:c},{default:n(()=>[I(" Reset ")]),_:1}),e(k,{variant:"text",onClick:y},{default:n(()=>[I(" Save ")]),_:1})]),_:1})]),_:1}),e(Ve,null,{default:n(()=>[e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(fl,{class:"imgLogo",src:d.value},null,8,["src"])]),_:1})]),_:1}),e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(q,{label:C(N).formLabelName,name:"Name",variant:"outlined",modelValue:a.value.Name,"onUpdate:modelValue":T[1]||(T[1]=g=>a.value.Name=g)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(q,{label:C(N).formLabelDescription,name:"Description",variant:"outlined",multiline:"true",modelValue:a.value.Description,"onUpdate:modelValue":T[2]||(T[2]=g=>a.value.Description=g)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(q,{label:C(N).formLabelDetailLink,name:"DetailLink",variant:"outlined",multiline:"true",modelValue:a.value.DetailLink,"onUpdate:modelValue":T[3]||(T[3]=g=>a.value.DetailLink=g)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(q,{label:C(N).formLabelSlug,name:"Slug",variant:"outlined",multiline:"true",modelValue:a.value.Slug,"onUpdate:modelValue":T[4]||(T[4]=g=>a.value.Slug=g)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[e(Zl,{ref_key:"conventionImageForm",ref:v,enctype:"multipart/form-data"},{default:n(()=>[e(Ql,{label:C(N).formLabelLogo,name:"Image",variant:"outlined",accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp","hide-details":""},null,8,["label"])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}});const St=M("h3",null,"General Details",-1),xt=["href"],$t=B({__name:"General",props:{modelValue:{required:!0}},emits:F(["refresh"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=sl(),v=O(()=>l.value.ConventionUUID?a.GetConventionLogoURL(l.value.ConventionUUID):""),r=b(!1),d=()=>{r.value=!1,o("refresh")};return(s,u)=>(f(),U(E,null,[e(ne,{fluid:!0,class:"px-0"},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[St]),_:1}),e(_,{class:"text-right"},{default:n(()=>[e(k,{color:"primary",onClick:u[0]||(u[0]=i=>r.value=!0)},{default:n(()=>[I("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),M("p",null,[v.value?(f(),h(fl,{key:0,src:v.value,title:l.value.Name},null,8,["src","title"])):S("",!0)]),M("h3",null,R(l.value.Name),1),M("p",null,R(l.value.Description),1),M("p",null,[l.value.DetailLink?(f(),U("a",{key:0,href:l.value.DetailLink},"More Details",8,xt)):S("",!0)]),e(be,{modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=i=>r.value=i),scrollable:!0},{default:n(()=>[e(Et,{onClose:d,modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=i=>l.value=i)},null,8,["modelValue"])]),_:1},8,["modelValue"])],64))}}),Pt=B({__name:"EditConventionInterest",props:F({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=b(Q(o.value)),a=J(),v=({callback:r})=>{a.saveInterest(l.value).then(d=>{d?(o.value=d,r&&r("Interest Saved")):r&&r("Failed to Save Interest")}).catch(()=>{r&&r("Failed to Save Interest")})};return(r,d)=>(f(),h(ne,{class:"px-0"},{default:n(()=>[e(q,{label:C(N).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":d[0]||(d[0]=s=>l.value.Name=s)},null,8,["label","modelValue"]),e(Ge,{label:C(N).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":d[1]||(d[1]=s=>l.value.Description=s)},null,8,["label","modelValue"]),S("",!0),e(Ce,{modelValue:l.value.AppliesTags,"onUpdate:modelValue":d[3]||(d[3]=s=>l.value.AppliesTags=s),convention:r.convention,organisation:r.convention.OrganisationUUID,hint:"Tags that a user acquires by selecting this interest."},null,8,["modelValue","convention","organisation"]),e(Y,null,{default:n(()=>[e(_,{class:"text-right"},{default:n(()=>[e(_e,{onClick:v})]),_:1})]),_:1})]),_:1}))}}),Ot=B({__name:"EditConventionInterests",props:F({convention:{}},{modelValue:{required:!0}}),emits:F(["close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=J(),v=()=>{const s={ID:0,InterestUUID:H(),ConventionID:t.convention.ID,ConventionUUID:t.convention.ConventionUUID,Order:l.value.length+1,Name:"New Interest",Description:"",Price:0,AppliesTags:[]};a.saveInterest(s).then(u=>{u&&l.value.push(u)})},r=s=>{a.deleteInterest(l.value[s].InterestUUID).then(u=>{u&&l.value.splice(s,1)})},d=(...s)=>{s.forEach(u=>{u>=0&&u<l.value.length&&a.saveInterest(l.value[u])})};return(s,u)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[e(k,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:n(()=>[I("Edit Interests")]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:v},{default:n(()=>[I(" Add ")]),_:1})]),_:1})]),_:1}),e(Ve,{class:"pa-0"},{default:n(()=>[e(Ue,null,{default:n(()=>[(f(!0),U(E,null,j(l.value,(i,m)=>(f(),h(ke,{key:i.ID,class:"mt-0"},{default:n(()=>[e(De,null,{actions:n(({expanded:c})=>[e(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>r(m)},null,8,["onClick"]),e(X,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(c=>{C(Ne)(i,l.value),d(m,m-1)},["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(c=>{C(we)(i,l.value),d(m,m+1)},["stop"])},null,8,["onClick"]),I(" "+R(i.Name)+" ",1)]),_:2},1024),e(Ee,{class:"px-0"},{default:n(()=>[e(Pt,{convention:s.convention,modelValue:l.value[m],"onUpdate:modelValue":c=>l.value[m]=c},null,8,["convention","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Rt=M("h3",null,"Interests",-1),Ft=M("p",null,"Attendees can tag themselves for particular things.",-1),Nt=B({__name:"Interests",props:{modelValue:{required:!0}},emits:F(["refresh"],["update:modelValue"]),setup(t){const o=K(t,"modelValue"),l=J(),a=b([]);l.getConventionInterests(o.value.ConventionUUID).then(d=>{Fe(d),a.value=d});const v=b([""]),r=b(!1);return(d,s)=>(f(),U(E,null,[e(ne,{fluid:!0,class:"px-0"},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[Rt]),_:1}),e(_,{class:"text-right"},{default:n(()=>[e(k,{color:"primary",onClick:s[0]||(s[0]=u=>r.value=!0)},{default:n(()=>[I("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Ft,e(Re,{opened:v.value,"onUpdate:opened":s[1]||(s[1]=u=>v.value=u)},{default:n(()=>[(f(!0),U(E,null,j(a.value,u=>(f(),h(oe,{key:u.ID,"prepend-icon":"mdi:mdi-checkbox-marked-outline",title:`${u.Name} ${u.Price&&u.Price>0?`(${C(N).currencySymbol}${u.Price})`:""}`},{default:n(()=>[u.Description?(f(),h(te,{key:0},{default:n(()=>[I(R(u.Description),1)]),_:2},1024)):S("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=u=>r.value=u),scrollable:!0},{default:n(()=>[e(Ot,{onClose:s[2]||(s[2]=u=>r.value=!1),convention:o.value,modelValue:a.value,"onUpdate:modelValue":s[3]||(s[3]=u=>a.value=u)},null,8,["convention","modelValue"])]),_:1},8,["modelValue"])],64))}}),$e=B({__name:"SelectTickets",props:F({chips:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},hint:{default:"Tickets that belong to this group."},label:{default:"Tickets"},persistentHint:{type:Boolean,default:!1},tickets:{default:()=>[]},variant:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=v=>v.Type===$.TICKET_TYPE_GROUP?"mdi:mdi-group":v.Type===$.TICKET_TYPE_TICKET?v.RequiresAccommodation?"mdi:mdi-home":v.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":v.Type===$.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":v.Type===$.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help",a=O(()=>t.tickets.map(v=>({title:v.Name,value:o.value.find(r=>r&&r.TicketUUID===v.TicketUUID)||v,props:{appendIcon:l(v)}})));return(v,r)=>(f(),U("div",null,[e(lt,{label:v.label,variant:v.variant||"filled",items:a.value,"item-title":"title","item-value":"value","item-props":"props",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=d=>o.value=d),hint:v.hint,chips:v.chips,clearable:v.clearable,multiple:"","persistent-hint":v.persistentHint},null,8,["label","variant","items","modelValue","hint","chips","clearable","persistent-hint"])]))}}),wt=M("p",{title:"Automatically calculated",class:"text-grey-lighten-1"},"Applicable Accommodation:",-1),At=B({__name:"EditConventionTicket",props:F({accommodation:{default:()=>[]},convention:{},tickets:{default:()=>[]}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=b(Q(o.value)),a=J(),v=O(()=>t.tickets.filter(i=>i.Type===$.TICKET_TYPE_TICKET)),r=O(()=>t.tickets.filter(i=>i.Type===$.TICKET_TYPE_ADD_ON)),d=O(()=>t.tickets.filter(i=>i.Type===$.TICKET_TYPE_TICKET_COMPONENT)),s=i=>t.accommodation.filter(m=>m.Costs.find(c=>c.DateStart===i.DateStart&&c.DateEnd===i.DateEnd)),u=({callback:i})=>{a.saveTicket(l.value).then(m=>{m?(l.value.ID=m.ID,l.value.TicketUUID=m.TicketUUID,o.value=l.value,i&&i("Ticket Saved")):i&&i("Failed to Save Ticket")}).catch(()=>{i&&i("Failed to Save Ticket")})};return(i,m)=>(f(),h(ne,{class:"px-0",fluid:""},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,{cols:"12"},{default:n(()=>[e(He,{label:"Ticket Type",variant:"outlined",modelValue:l.value.Type,"onUpdate:modelValue":m[0]||(m[0]=c=>l.value.Type=c),items:C(et),"item-title":"title","item-value":"value","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(q,{label:C(N).formLabelName,type:"text",variant:"outlined",modelValue:l.value.Name,"onUpdate:modelValue":m[1]||(m[1]=c=>l.value.Name=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(q,{label:C(N).formLabelDescription,type:"text",variant:"outlined",modelValue:l.value.Description,"onUpdate:modelValue":m[2]||(m[2]=c=>l.value.Description=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),l.value.Type!==C($).TICKET_TYPE_GROUP?(f(),U(E,{key:0},[e(_,{cols:"12"},{default:n(()=>[e(q,{label:C(N).formLabelDateStart,type:"date",variant:"outlined",modelValue:l.value.DateStart,"onUpdate:modelValue":m[3]||(m[3]=c=>l.value.DateStart=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(q,{label:C(N).formLabelDateEnd,type:"date",variant:"outlined",modelValue:l.value.DateEnd,"onUpdate:modelValue":m[4]||(m[4]=c=>l.value.DateEnd=c),"hide-details":""},null,8,["label","modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(q,{label:C(N).formLabelPrice,type:"text",variant:"outlined","prepend-inner-icon":C(N).currencyIcon,modelValue:l.value.Price,"onUpdate:modelValue":m[5]||(m[5]=c=>l.value.Price=c),"persistent-hint":"",hint:"Adds additional charges for selecting this ticket"},null,8,["label","prepend-inner-icon","modelValue"])]),_:1})],64)):(f(),h(_,{key:1,cols:"12"},{default:n(()=>[e($e,{label:"Tickets",variant:"outlined",tickets:v.value,modelValue:l.value.Tickets,"onUpdate:modelValue":m[6]||(m[6]=c=>l.value.Tickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that belong to this group."},null,8,["tickets","modelValue"])]),_:1})),e(_,{cols:"12"},{default:n(()=>[e(Ce,{label:"Applied Tags",variant:"outlined",modelValue:l.value.AppliesTags,"onUpdate:modelValue":m[7]||(m[7]=c=>l.value.AppliesTags=c),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user acquires by selecting this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(Ce,{label:"Required Tags",variant:"outlined",modelValue:l.value.RequiredTags,"onUpdate:modelValue":m[8]||(m[8]=c=>l.value.RequiredTags=c),convention:i.convention,organisation:i.convention.OrganisationUUID,chips:"",clearable:"",hint:"Tags that a user must have to see this ticket."},null,8,["modelValue","convention","organisation"])]),_:1}),l.value.Type===C($).TICKET_TYPE_TICKET?(f(),U(E,{key:2},[e(_,{cols:"12"},{default:n(()=>[e(q,{label:"Components Required",type:"number",variant:"outlined",modelValue:l.value.ComponentsRequired,"onUpdate:modelValue":m[9]||(m[9]=c=>l.value.ComponentsRequired=c),"persistent-hint":"",hint:"How many components must be selected."},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e($e,{label:"Components",variant:"outlined",tickets:d.value,modelValue:l.value.TicketComponents,"onUpdate:modelValue":m[10]||(m[10]=c=>l.value.TicketComponents=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Components that are part of this ticket (and others)."},null,8,["tickets","modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e($e,{label:"Addons",variant:"outlined",tickets:r.value,modelValue:l.value.AddonTickets,"onUpdate:modelValue":m[11]||(m[11]=c=>l.value.AddonTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Optional ticket addons that apply for this ticket."},null,8,["tickets","modelValue"])]),_:1})],64)):S("",!0),e(_,{cols:"12"},{default:n(()=>[e($e,{label:"Disables Tickets",variant:"outlined",tickets:i.tickets,modelValue:l.value.DisablesTickets,"onUpdate:modelValue":m[12]||(m[12]=c=>l.value.DisablesTickets=c),chips:"",clearable:"",multiple:"","persistent-hint":"",hint:"Tickets that are mutually exclusive and can't be selected if this one is."},null,8,["tickets","modelValue"])]),_:1})]),_:1}),s(l.value).length?(f(),h(Y,{key:0,class:"align-center",dense:!0},{default:n(()=>[e(_,{class:"flex-grow-0 flex-shrink-1 text-no-wrap font-italic"},{default:n(()=>[wt]),_:1}),e(_,{class:"flex-grow-1"},{default:n(()=>[e(tt,null,{default:n(()=>[(f(!0),U(E,null,j(s(l.value),c=>(f(),h(nt,{key:c.ID,title:"Automatically calculated",disabled:!0},{default:n(()=>[I(R(c.Name),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):S("",!0),e(Y,null,{default:n(()=>[e(_,{class:"text-right"},{default:n(()=>[e(_e,{onClick:u})]),_:1})]),_:1})]),_:1}))}}),Lt={class:"pr-2"},qt={class:"mb-2"},Mt={key:0,class:"text-grey-darken-1 font-italic"},zt={key:1,class:"text-red"},Bt={key:0,class:"text-grey-darken-1 font-italic"},Yt={key:1,class:"text-red"},Kt={key:0,class:"text-grey-darken-1 font-italic"},Gt={key:1,class:"text-red"},Ht={class:"text-grey-darken-1"},jt=B({__name:"EditConventionTickets",props:F({accommodation:{default:()=>[]},convention:{}},{modelValue:{default:[]}}),emits:F(["close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=J(),v=()=>{l.value.push({ID:0,TicketUUID:H(),ConventionID:t.convention.ID,ConventionUUID:t.convention.ConventionUUID,Order:l.value.length+1,Name:"New Ticket",Type:$.TICKET_TYPE_GROUP,Description:"",DateStart:"",DateEnd:"",Price:0,Tickets:[],RequiresAccommodation:!1,AppliesTags:[],RequiredTags:[],RequiredGroupMemberships:[],TicketComponents:[],ComponentsRequired:0,AddonTickets:[],DisablesTickets:[]})},r=s=>{a.deleteTicket(l.value[s].TicketUUID).then(u=>{u&&l.value.splice(s,1)})},d=s=>s.Type===$.TICKET_TYPE_GROUP?"mdi:mdi-group":s.Type===$.TICKET_TYPE_TICKET?s.RequiresAccommodation?"mdi:mdi-home":s.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket":s.Type===$.TICKET_TYPE_TICKET_COMPONENT?"mdi:mdi-cog-outline":s.Type===$.TICKET_TYPE_ADD_ON?"mdi:mdi-home-plus":"mdi:mdi-help";return(s,u)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[e(k,{icon:"",dark:"",onClick:u[0]||(u[0]=i=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1}),e(me,null,{default:n(()=>[I("Edit Tickets")]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:v},{default:n(()=>[I(" Add Ticket ")]),_:1})]),_:1})]),_:1}),e(Ve,{class:"pa-0"},{default:n(()=>[e(Ue,null,{default:n(()=>[(f(!0),U(E,null,j(l.value,(i,m)=>(f(),h(ke,{key:i.ID,class:"mt-0"},{default:n(()=>[e(De,{class:"py-2"},{actions:n(({expanded:c})=>[e(_e,{class:"mr-1",color:"red",icon:"mdi:mdi-close",size:"x-small",onClick:p=>r(m)},null,8,["onClick"]),e(X,{class:"align-self-center text-h5",icon:c?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(c=>C(Ne)(i,l.value),["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(c=>C(we)(i,l.value),["stop"])},null,8,["onClick"]),M("div",Lt,[e(X,{icon:d(i)},null,8,["icon"])]),M("div",null,[M("p",qt,[I(R(i.Name)+" ",1),i.Type===C($).TICKET_TYPE_TICKET?(f(),U(E,{key:0},[l.value.find(c=>c.Type===C($).TICKET_TYPE_GROUP&&c.Tickets.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),U("span",Mt," ("+R(l.value.filter(c=>c.Type===C($).TICKET_TYPE_GROUP&&c.Tickets.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(f(),U("span",zt," (Ticket does not belong to any categories.) "))],64)):S("",!0),i.Type===C($).TICKET_TYPE_ADD_ON?(f(),U(E,{key:1},[l.value.find(c=>c.Type===C($).TICKET_TYPE_TICKET&&c.AddonTickets.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),U("span",Bt," ("+R(l.value.filter(c=>c.Type===C($).TICKET_TYPE_TICKET&&c.AddonTickets.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(f(),U("span",Yt," (Ticket addon must be associated to at least one ticket.) "))],64)):S("",!0),i.Type===C($).TICKET_TYPE_TICKET_COMPONENT?(f(),U(E,{key:2},[l.value.find(c=>c.Type===C($).TICKET_TYPE_TICKET&&c.TicketComponents.find(p=>p&&p.TicketUUID===i.TicketUUID))?(f(),U("span",Kt," ("+R(l.value.filter(c=>c.Type===C($).TICKET_TYPE_TICKET&&c.TicketComponents.find(p=>p&&p.TicketUUID===i.TicketUUID)).map(c=>c.Name).join(", "))+") ",1)):(f(),U("span",Gt," (Component has not been assigned to any tickets.) "))],64)):S("",!0)]),M("p",Ht,[i.Type===C($).TICKET_TYPE_GROUP?(f(),U(E,{key:0},[I("Category")],64)):i.Type===C($).TICKET_TYPE_TICKET?(f(),U(E,{key:1},[I(" Ticket "),i.ComponentsRequired>0?(f(),U(E,{key:0},[I(" ("+R(i.ComponentsRequired)+" component"+R(i.ComponentsRequired>1?"s":"")+" required) ",1)],64)):S("",!0)],64)):S("",!0),i.Type===C($).TICKET_TYPE_TICKET_COMPONENT?(f(),U(E,{key:2},[I("Component")],64)):S("",!0),i.Type===C($).TICKET_TYPE_ADD_ON?(f(),U(E,{key:3},[I("Addon")],64)):S("",!0)])])]),_:2},1024),e(Ee,{class:"px-0"},{default:n(()=>[e(At,{accommodation:s.accommodation,convention:s.convention,tickets:l.value,modelValue:l.value[m],"onUpdate:modelValue":c=>l.value[m]=c},null,8,["accommodation","convention","tickets","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}}),Xt=M("h3",null,"Tickets",-1),Wt=M("p",null,"Ticket options, along with all sub-types and options applicable to them.",-1),Jt=B({__name:"Tickets",props:{modelValue:{required:!0}},emits:F(["refresh"],["update:modelValue"]),setup(t){var c;const o=K(t,"modelValue"),l=J(),a=b([]),v=b([]);l.getConventionTickets(((c=o.value)==null?void 0:c.ConventionUUID)||"").then(p=>{Fe(p),a.value=p});const r=b([""]),d=b(!1),s=p=>p.AddonTickets&&p.AddonTickets.map(y=>a.value&&a.value.find(V=>V.ID===y.ID)),u=p=>p.TicketComponents&&p.TicketComponents.map(y=>a.value&&a.value.find(V=>V.ID===y.ID)),i=p=>"",m=p=>v.value.filter(y=>y.Costs.find(V=>V.DateStart===p.DateStart&&V.DateEnd===p.DateEnd)).map(y=>y.Name).join(", ");return(p,y)=>(f(),U(E,null,[e(ne,{fluid:!0,class:"px-0"},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,null,{default:n(()=>[Xt]),_:1}),e(_,{class:"text-right"},{default:n(()=>[e(k,{color:"primary",onClick:y[0]||(y[0]=V=>d.value=!0)},{default:n(()=>[I("Edit")]),_:1})]),_:1})]),_:1})]),_:1}),Wt,e(Re,{opened:r.value,"onUpdate:opened":y[1]||(y[1]=V=>r.value=V)},{default:n(()=>[(f(!0),U(E,null,j(a.value.filter(V=>V.Type===C($).TICKET_TYPE_GROUP),V=>(f(),h(Ye,{key:V.ID,value:V.ID},{activator:n(({props:T})=>[e(oe,pe(T,{"prepend-icon":"mdi:mdi-group",title:V.Name}),null,16,["title"])]),default:n(()=>[(f(!0),U(E,null,j(a.value.filter(T=>V.Tickets.find(g=>g&&T&&g.TicketUUID===T.TicketUUID)),T=>(f(),U(E,{key:T.ID},[T.AddonTickets&&T.AddonTickets.length?(f(),h(Ye,{key:0,value:T.ID},{activator:n(({props:g})=>[e(oe,pe(g,{"prepend-icon":T.RequiresAccommodation?"mdi:mdi-home":T.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${T.Name} ${T.Price>0?`(${C(N).currencySymbol}${T.Price})`:""}`}),{default:n(()=>[T.ComponentsRequired>0?(f(),h(te,{key:0},{default:n(()=>[I(" Options: "+R(u(T).map(w=>w&&w.Name).join(", ")),1)]),_:2},1024)):S("",!0),T.RequiresAccommodation&&m(T)?(f(),h(te,{key:1},{default:n(()=>[I(" Accommodation: "+R(m(T)),1)]),_:2},1024)):S("",!0)]),_:2},1040,["prepend-icon","title"])]),default:n(()=>[(f(!0),U(E,null,j(s(T),g=>(f(),U(E,{key:g},[g?(f(),h(oe,{key:0,title:`${g.Name} ${g.Price>0?`(${C(N).currencySymbol}${g.Price})`:""}`,"prepend-icon":"mdi:mdi-home-plus"},{default:n(()=>[g.RequiredTags&&g.RequiredTags.length>0?(f(),h(te,{key:0},{default:n(()=>[I(" Required Tags: "+R(g.RequiredTags.join(", ")),1)]),_:2},1024)):S("",!0),g.RequiredGroupMemberships&&g.RequiredGroupMemberships.length>0?(f(),h(te,{key:1},{default:n(()=>[I(" Required Groups: "+R(i(g.RequiredGroupMemberships)),1)]),_:2},1024)):S("",!0),m(g)?(f(),h(te,{key:2},{default:n(()=>[I(" Accommodation: "+R(m(g)),1)]),_:2},1024)):S("",!0)]),_:2},1032,["title"])):S("",!0)],64))),128))]),_:2},1032,["value"])):(f(),h(oe,{key:1,"prepend-icon":T.RequiresAccommodation?"mdi:mdi-home":T.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",title:`${T.Name} ${T.Price>0?`(${C(N).currencySymbol}${T.Price})`:""}`},{default:n(()=>[T.ComponentsRequired>0?(f(),h(te,{key:0},{default:n(()=>[I(" Options: "+R(u(T).map(g=>g&&g.Name).join(", ")),1)]),_:2},1024)):S("",!0)]),_:2},1032,["prepend-icon","title"]))],64))),128))]),_:2},1032,["value"]))),128))]),_:1},8,["opened"]),e(be,{modelValue:d.value,"onUpdate:modelValue":y[4]||(y[4]=V=>d.value=V),scrollable:!0},{default:n(()=>[e(jt,{onClose:y[2]||(y[2]=V=>d.value=!1),modelValue:a.value,"onUpdate:modelValue":y[3]||(y[3]=V=>a.value=V),accommodation:v.value,convention:o.value},null,8,["modelValue","accommodation","convention"])]),_:1},8,["modelValue"])],64))}}),Zt=(t,o)=>{const l=Oe(t,o),a=Oe(t,o,void 0,void 0,"item"),v=b(Q(a.value));return ue(a,()=>{v.value=Q(a.value)}),{state:l,model:a,close:()=>{l.value=!1},reset:()=>{a.value=Q(v.value)},save:()=>{o("save")}}},Qt=B({__name:"EditItemDialog",props:{item:{},modelValue:{type:Boolean},title:{},cardClass:{}},emits:["update:modelValue","update:item","save"],setup(t,{emit:o}){const l=t,{state:a,model:v,close:r,reset:d,save:s}=Zt(l,o);return(u,i)=>(f(),h(pl,{modelValue:C(a),"onUpdate:modelValue":i[0]||(i[0]=m=>Pe(a)?a.value=m:null),onReset:C(d),onSave:C(s),title:u.title,color:"primary","card-class":u.cardClass},{toolbarButtons:n(()=>[ye(u.$slots,"toolbarButtons")]),actions:n(()=>[e(k,{color:"blue-darken-1",variant:"text",onClick:C(r)},{default:n(()=>[I(" Cancel ")]),_:1},8,["onClick"]),e(k,{color:"blue-darken-1",variant:"text",onClick:C(d)},{default:n(()=>[I(" Reset ")]),_:1},8,["onClick"]),e(de),e(k,{color:"blue-darken-1",variant:"text",onClick:C(s)},{default:n(()=>[I(" Save ")]),_:1},8,["onClick"])]),default:n(()=>[ye(u.$slots,"default")]),_:3},8,["modelValue","onReset","onSave","title","card-class"]))}}),Tl=B({__name:"EditOrderedItems",props:F({closeable:{type:Boolean,default:!1},newItem:{type:Function},label:{default:"Name"},labelParent:{default:""},title:{default:"Edit Ordered Items"},showSave:{type:Boolean,default:!1},slotNamePrefix:{default:"item"}},{modelValue:{required:!0}}),emits:F(["save","close"],["update:modelValue"]),setup(t,{emit:o}){const l=K(t,"modelValue"),a=()=>{o("save"),o("close")},v=()=>{if(t.newItem){const i=t.newItem();i.Order=l.value.length+1,l.value.push(i)}else l.value.push({Order:l.value.length+1})},r=i=>{l.value.splice(i,1)},d=i=>{we(i,l.value)},s=i=>{Ne(i,l.value)},u=i=>t.labelParent&&i[t.labelParent]?i[t.labelParent][t.label]:i[t.label];return(i,m)=>(f(),h(ce,null,{default:n(()=>[e(se,{dark:"",color:"primary"},{default:n(()=>[i.closeable?(f(),h(k,{key:0,icon:"",dark:"",onClick:m[0]||(m[0]=c=>o("close"))},{default:n(()=>[e(X,null,{default:n(()=>[I("mdi:mdi-close")]),_:1})]),_:1})):S("",!0),e(me,null,{default:n(()=>[I(R(i.title),1)]),_:1}),e(de),e(Te,null,{default:n(()=>[e(k,{variant:"text",onClick:v},{default:n(()=>[I(" Add ")]),_:1}),i.showSave?(f(),h(k,{key:0,variant:"text",onClick:a},{default:n(()=>[I(" Save ")]),_:1})):S("",!0)]),_:1})]),_:1}),e(Ve,{class:"pa-0"},{default:n(()=>[e(Ue,null,{default:n(()=>[(f(!0),U(E,null,j(l.value,(c,p)=>(f(),h(ke,{key:c.Order,class:"mt-0"},{default:n(()=>[e(De,null,{actions:n(({expanded:y})=>[e(k,{icon:"mdi:mdi-close",size:"x-small",color:"red",class:"mr-1",onClick:V=>r(p)},null,8,["onClick"]),e(X,{class:"align-self-center text-h5",icon:y?"mdi:mdi-chevron-up":"mdi:mdi-chevron-down",variant:"flat",size:"x-small"},null,8,["icon"])]),default:n(()=>[e(k,{icon:"mdi:mdi-menu-up",size:"x-small",color:"primary",class:"mr-1",onClick:ie(y=>s(c),["stop"])},null,8,["onClick"]),e(k,{icon:"mdi:mdi-menu-down",size:"x-small",color:"secondary",class:"mr-4",onClick:ie(y=>d(c),["stop"])},null,8,["onClick"]),ye(i.$slots,`${i.slotNamePrefix}_${p}_title`,{},()=>[I(R(u(c)),1)])]),_:2},1024),e(Ee,{class:"px-0"},{default:n(()=>[ye(i.$slots,`${i.slotNamePrefix}_${p}`)]),_:2},1024)]),_:2},1024))),128))]),_:3})]),_:3})]),_:3}))}}),en={class:"pa-0 border-0 ma-0"},ln=M("legend",{class:"mb-2"},"Field Settings",-1),tn={class:"pa-0 border-0 ma-0"},nn=M("legend",{class:"text-blue-accent-2 mb-2"},"Field Preview",-1),an=B({__name:"EditFormField",props:F({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=J(),a=b([]),v=b([]),r=b(""),d=s=>{var u;o.value.Field=(u=v.value.find(i=>i.value===s))==null?void 0:u.field};return l.getConventionFields(t.convention.ConventionUUID).then(s=>{s&&(a.value=s,v.value=s.map(u=>({title:`${u.Label} (${(rt.find(i=>i.value===u.Type)||{title:""}).title})`,value:u.FieldUUID,field:u})),d(o.value.FieldUUID))}),(s,u)=>(f(),h(Y,null,{default:n(()=>[e(_,{cols:"12",md:"6"},{default:n(()=>[M("fieldset",en,[ln,e(Y,null,{default:n(()=>[e(_,{cols:"12"},{default:n(()=>[e(He,{modelValue:o.value.FieldUUID,"onUpdate:modelValue":[u[0]||(u[0]=i=>o.value.FieldUUID=i),d],items:v.value,"item-title":"title","item-value":"value",label:"Field",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"6",sm:"4"},{default:n(()=>[e(q,{modelValue:o.value.MinLength,"onUpdate:modelValue":u[1]||(u[1]=i=>o.value.MinLength=i),modelModifiers:{number:!0},label:"Min Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"6",sm:"4"},{default:n(()=>[e(q,{modelValue:o.value.MaxLength,"onUpdate:modelValue":u[2]||(u[2]=i=>o.value.MaxLength=i),modelModifiers:{number:!0},label:"Max Length",type:"number",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"4"},{default:n(()=>[e(Ke,{modelValue:o.value.Required,"onUpdate:modelValue":u[3]||(u[3]=i=>o.value.Required=i),modelModifiers:{boolean:!0},label:"Required","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),o.value.FieldUUID&&o.value.Field?(f(),h(_,{key:0,cols:"12",md:"6"},{default:n(()=>[M("fieldset",tn,[nn,o.value.Field?(f(),h(ct,{key:0,field:o.value.Field,"persistent-hint":!0,required:o.value.Required,convention:s.convention,modelValue:r.value,"onUpdate:modelValue":u[4]||(u[4]=i=>r.value=i)},null,8,["field","required","convention","modelValue"])):S("",!0)])]),_:1})):S("",!0)]),_:1}))}}),on={class:"d-none d-sm-block"},un=B({__name:"EditFormSectionFields",props:F({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=()=>({ID:0,SectionFieldUUID:H(),SectionID:o.value.ID,SectionUUID:o.value.SectionUUID,FieldID:0,FieldUUID:"",Order:0,MinLength:0,MaxLength:0,Required:!1,Value:""});return(a,v)=>o.value.Fields!==void 0?(f(),h(Tl,{key:0,modelValue:o.value.Fields,"onUpdate:modelValue":v[0]||(v[0]=r=>o.value.Fields=r),closeable:!1,title:"Fields","new-defaults":l,class:"mt-4",label:"name","label-parent":"Field","slot-name-prefix":"field"},dl({_:2},[j(o.value.Fields,(r,d)=>({name:`field_${d}_title`,fn:n(()=>[r.Field?(f(),U(E,{key:0},[I(R(r.Field.Label)+" ("+R(r.Field.Name)+") ",1),M("template",on,[I(" Â ["+R(r.Field.Type)+"] ",1)])],64)):(f(),U(E,{key:1},[I("New Field")],64))])})),j(o.value.Fields,(r,d)=>({name:`field_${d}`,fn:n(()=>[e(an,{modelValue:o.value.Fields[d],"onUpdate:modelValue":s=>o.value.Fields[d]=s,convention:a.convention,style:{margin:"0 -24px"}},null,8,["modelValue","onUpdate:modelValue","convention"])])}))]),1032,["modelValue"])):S("",!0)}}),sn=B({__name:"EditFormSections",props:F({convention:{}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(t){const o=K(t,"modelValue"),l=()=>{const a={ID:0,SectionUUID:H(),FormID:o.value.ID,FormUUID:o.value.FormUUID,Order:0,Name:"New Section",Heading:"",Description:"",Fields:[],DefaultValue:"",State:{ID:0,SectionStateUUID:H(),SectionID:0,SectionUUID:"",Edit:!0}};return a.State.SectionID=a.ID,a.State.SectionUUID=a.SectionUUID,a};return(a,v)=>(f(),h(Tl,{modelValue:o.value.Sections,"onUpdate:modelValue":v[0]||(v[0]=r=>o.value.Sections=r),closeable:!1,title:"Sections","new-defaults":l,"slot-name-prefix":"section"},dl({_:2},[j(o.value.Sections,(r,d)=>({name:`section_${d}`,fn:n(()=>[e(Y,null,{default:n(()=>[e(_,{cols:"12",sm:"6"},{default:n(()=>[e(q,{modelValue:r.Name,"onUpdate:modelValue":s=>r.Name=s,label:"Internal Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(_,{cols:"12",sm:"6"},{default:n(()=>[e(q,{modelValue:r.Heading,"onUpdate:modelValue":s=>r.Heading=s,label:"Section Heading",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(Y,null,{default:n(()=>[e(_,{cols:"12"},{default:n(()=>[e(Ge,{modelValue:r.Description,"onUpdate:modelValue":s=>r.Description=s,label:"Section Text",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),r.Fields?(f(),h(un,{key:0,modelValue:o.value.Sections[d],"onUpdate:modelValue":s=>o.value.Sections[d]=s,convention:a.convention},null,8,["modelValue","onUpdate:modelValue","convention"])):S("",!0)])}))]),1032,["modelValue"]))}}),dn=B({__name:"FormRendererPopup",props:F({convention:{},form:{},title:{},cardClass:{}},{modelValue:{type:Boolean,required:!0}}),emits:F(["update:form"],["update:modelValue"]),setup(t,{emit:o}){const l=t,{convention:a,title:v="",cardClass:r=""}=l,d=K(t,"modelValue"),s=Oe(l,o,void 0,void 0,"form"),u=b(Q(s.value));ue(s,()=>{u.value=Q(s.value)});const i=()=>{d.value=!1};return(m,c)=>(f(),h(pl,{modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=p=>d.value=p),title:C(v),color:"primary","card-class":C(r)},{toolbarButtons:n(()=>[ye(m.$slots,"toolbarButtons")]),actions:n(()=>[e(k,{color:"blue-darken-1",variant:"text",onClick:i},{default:n(()=>[I(" Close ")]),_:1})]),default:n(()=>[e(mt,{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=p=>u.value=p),convention:C(a)},null,8,["modelValue","convention"])]),_:3},8,["modelValue","title","card-class"]))}}),rn=M("template",{class:"d-none d-sm-inline"},[I("Preview")],-1),cn=B({__name:"EditFormDialog",props:F({convention:{},form:{}},{modelValue:{type:Boolean,required:!0}}),emits:F(["update:form"],["update:modelValue"]),setup(t,{emit:o}){const l=t,{convention:a}=l,v=K(t,"modelValue"),r=J(),d=Oe(l,o,void 0,void 0,"form"),s=b(!1),u=b(Q(d.value));ue(d,()=>{u.value=Q(d.value)});const i=()=>{r.saveForm(u.value).then(c=>{c&&(d.value=c,v.value=!1)})},m=()=>{s.value=!0};return(c,p)=>(f(),h(Qt,{modelValue:v.value,"onUpdate:modelValue":p[10]||(p[10]=y=>v.value=y),item:u.value,"onUpdate:item":p[11]||(p[11]=y=>u.value=y),onSave:i,"card-class":"pa-0"},{toolbarButtons:n(()=>[e(vt,null,{default:n(()=>[e(k,{"prepend-icon":"mdi:mdi-developer-board",onClick:m},{default:n(()=>[rn]),_:1})]),_:1})]),default:n(()=>[e(Ue,null,{default:n(()=>[e(ke,{class:"mt-0"},{default:n(()=>[e(De,null,{default:n(()=>[I("General Settings")]),_:1}),e(Ee,null,{default:n(()=>[e(Y,null,{default:n(()=>[e(_,{cols:"12"},{default:n(()=>[e(ne,{class:"pa-0",fluid:!0},{default:n(()=>[e(Y,null,{default:n(()=>[e(_,{cols:"12",sm:"6"},{default:n(()=>[e(q,{modelValue:u.value.Name,"onUpdate:modelValue":p[0]||(p[0]=y=>u.value.Name=y),label:"Internal name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:n(()=>[e(q,{modelValue:u.value.Heading,"onUpdate:modelValue":p[1]||(p[1]=y=>u.value.Heading=y),label:"Form Heading",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:n(()=>[e(Ge,{modelValue:u.value.Description,"onUpdate:modelValue":p[2]||(p[2]=y=>u.value.Description=y),label:"Pre-form Text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:n(()=>[e(He,{modelValue:u.value.Type,"onUpdate:modelValue":p[3]||(p[3]=y=>u.value.Type=y),label:"Type",variant:"outlined",items:C(Ct),"hide-details":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"12",sm:"6"},{default:n(()=>[e(q,{modelValue:u.value.State.Stage,"onUpdate:modelValue":p[4]||(p[4]=y=>u.value.State.Stage=y),modelModifiers:{number:!0},label:"Stage",variant:"outlined","hide-details":"",type:"number"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:n(()=>[e(Ke,{modelValue:u.value.State.New,"onUpdate:modelValue":p[5]||(p[5]=y=>u.value.State.New=y),label:"Allow New Entries"},null,8,["modelValue"])]),_:1}),e(_,{cols:"6"},{default:n(()=>[e(Ke,{modelValue:u.value.State.Edit,"onUpdate:modelValue":p[6]||(p[6]=y=>u.value.State.Edit=y),label:"Allow Editing Submissions"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(sn,{modelValue:u.value,"onUpdate:modelValue":p[7]||(p[7]=y=>u.value=y),convention:C(a),style:{"border-radius":"0"}},null,8,["modelValue","convention"]),s.value?(f(),h(dn,{key:0,modelValue:s.value,"onUpdate:modelValue":p[8]||(p[8]=y=>s.value=y),form:u.value,"onUpdate:form":p[9]||(p[9]=y=>u.value=y),convention:C(a),title:"Form Preview","card-class":"pa-0"},null,8,["modelValue","form","convention"])):S("",!0)]),_:1},8,["modelValue","item"]))}}),mn=(t,o)=>{const l=b(!1),a=b(!1),v=b(t),r=b(-1),d=b(o),s=b(o),u=O(()=>r.value===-1?"New Form":"Edit Form"),i=()=>{v.value=t},m=g=>{r.value=v.value.indexOf(g),d.value=Object.assign({},g),l.value=!0},c=g=>{r.value=v.value.indexOf(g),d.value=Object.assign({},g),a.value=!0},p=()=>{a.value=!1,ze(()=>{d.value=Object.assign({},s.value),r.value=-1}).then()},y=()=>{v.value.splice(r.value,1),p()},V=()=>{l.value=!1,ze(()=>{d.value=Object.assign({},s.value),r.value=-1}).then()},T=()=>{r.value>-1?Object.assign(v.value[r.value],d.value):v.value.push(d.value),V()};return ue(l,g=>{g||V()}),ue(a,g=>{g||p()}),{collection:v,defaultItem:s,dialog:l,dialogDelete:a,editedItem:d,formTitle:u,reset:i,editItem:m,deleteItem:c,deleteItemConfirm:y,close:V,save:T}},vn=B({__name:"FormEditor",props:{modelValue:{required:!0}},emits:F(["refresh"],["update:modelValue"]),setup(t){const o=K(t,"modelValue"),l=J(),a=b([{key:"Name",title:"Form Name",align:"start",sortable:!0},{key:"Type",title:"Type",align:"start",sortable:!0},{key:"actions",title:"Actions",sortable:!1}]),v=b([]),r=b([]);l.getConventionFields(o.value.ConventionUUID).then(w=>{v.value=w}),l.getConventionForms(o.value.ConventionUUID).then(w=>{r.value=w});const d={ID:0,FormUUID:H(),ConventionID:o.value.ID,ConventionUUID:o.value.ConventionUUID,ParentID:0,ParentUUID:ll,Name:"",Heading:"",Description:"",Type:Vl.FORM_TYPE_UNSPECIFIED,Sections:[],State:{ID:0,FormStateUUID:H(),FormID:0,FormUUID:ll,New:!1,Edit:!1,Stage:0}};d.State.FormUUID=d.FormUUID;const{collection:s,defaultItem:u,dialog:i,dialogDelete:m,editedItem:c,formTitle:p,editItem:y,deleteItem:V,deleteItemConfirm:T,save:g}=mn(r,d);return s.value.forEach(w=>{w.Sections.forEach(A=>{var L;(L=A.Fields)==null||L.forEach(x=>{x.Field=v.value.find(z=>z.ID===x.FieldID)})})}),(w,A)=>(f(),h(C(st),{headers:a.value,items:C(s),"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1"},{top:n(()=>[e(se,{color:"primary"},{default:n(()=>[e(me,null,{default:n(()=>[I("Form Editor")]),_:1}),e(Jl,{class:"mx-4",inset:!0,vertical:!0}),e(de),e(k,{dark:"",class:"mb-2","prepend-icon":"mdi:mdi-pencil",onClick:A[0]||(A[0]=L=>{c.value=Object.assign({},C(u)),i.value=!0})},{default:n(()=>[I(" New Item ")]),_:1}),e(ut,{modelValue:C(m),"onUpdate:modelValue":A[1]||(A[1]=L=>Pe(m)?m.value=L:null),onDelete:C(T)},null,8,["modelValue","onDelete"])]),_:1}),C(i)?(f(),h(cn,{key:0,modelValue:C(i),"onUpdate:modelValue":A[2]||(A[2]=L=>Pe(i)?i.value=L:null),form:C(c),"onUpdate:form":[A[3]||(A[3]=L=>Pe(c)?c.value=L:null),C(g)],convention:o.value},null,8,["modelValue","form","onUpdate:form","convention"])):S("",!0)]),"item.actions":n(({item:L})=>[e(X,{size:"small",class:"me-2",onClick:x=>C(y)(L.raw)},{default:n(()=>[I(" mdi:mdi-pencil ")]),_:2},1032,["onClick"]),e(X,{size:"small",onClick:x=>C(V)(L.raw)},{default:n(()=>[I(" mdi:mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"]))}});const gl=Symbol.for("vuetify:v-tabs"),fn=Ie({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Dl(Bl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yl=he()({name:"VTab",props:fn(),setup(t,o){let{slots:l,attrs:a}=o;const{textColorClasses:v,textColorStyles:r}=ft(t,"sliderColor"),d=O(()=>t.direction==="horizontal"),s=G(!1),u=b(),i=b();function m(c){var y,V;let{value:p}=c;if(s.value=p,p){const T=(V=(y=u.value)==null?void 0:y.$el.parentElement)==null?void 0:V.querySelector(".v-tab--selected .v-tab__slider"),g=i.value;if(!T||!g)return;const w=getComputedStyle(T).color,A=T.getBoundingClientRect(),L=g.getBoundingClientRect(),x=d.value?"x":"y",z=d.value?"X":"Y",W=d.value?"right":"bottom",ee=d.value?"width":"height",ve=A[x],Ae=L[x],ae=ve>Ae?A[W]-L[W]:A[x]-L[x],Le=Math.sign(ae)>0?d.value?"right":"bottom":Math.sign(ae)<0?d.value?"left":"top":"center",Z=(Math.abs(ae)+(Math.sign(ae)<0?A[ee]:L[ee]))/Math.max(A[ee],L[ee]),ge=A[ee]/L[ee],xe=1.5;Xl(g,{backgroundColor:[w,""],transform:[`translate${z}(${ae}px) scale${z}(${ge})`,`translate${z}(${ae/xe}px) scale${z}(${(Z-1)/xe+1})`,""],transformOrigin:Array(3).fill(Le)},{duration:225,easing:Wl})}}return Se(()=>{const[c]=k.filterProps(t);return e(k,pe({symbol:gl,ref:u,class:["v-tab",t.class],style:t.style,tabindex:s.value?0:-1,role:"tab","aria-selected":String(s.value),active:!1,block:t.fixed,maxWidth:t.fixed?300:void 0,rounded:0},c,a,{"onGroup:selected":m}),{default:()=>{var p;return[((p=l.default)==null?void 0:p.call(l))??t.text,!t.hideSlider&&e("div",{ref:i,class:["v-tab__slider",v.value],style:r.value},null)]}})}),{}}});function al(t){const l=Math.abs(t);return Math.sign(t)*(l/((1/.501-2)*(1-l)+1))}function ol(t){let{selectedElement:o,containerSize:l,contentSize:a,isRtl:v,currentScrollOffset:r,isHorizontal:d}=t;const s=d?o.clientWidth:o.clientHeight,u=d?o.offsetLeft:o.offsetTop,i=v&&d?a-u-s:u,m=l+r,c=s+i,p=s*.4;return i<=r?r=Math.max(i-p,0):m<=c&&(r=Math.min(r-(m-c-p),a-l)),r}function pn(t){let{selectedElement:o,containerSize:l,contentSize:a,isRtl:v,isHorizontal:r}=t;const d=r?o.clientWidth:o.clientHeight,s=r?o.offsetLeft:o.offsetTop,u=v&&r?a-s-d/2-l/2:s+d/2-l/2;return Math.min(a-l,Math.max(0,u))}const Vn=Symbol.for("vuetify:v-slide-group"),Cl=Ie({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:Vn},nextIcon:{type:el,default:"$next"},prevIcon:{type:el,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...je(),...Xe(),...Yl({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),il=he()({name:"VSlideGroup",props:Cl(),emits:{"update:modelValue":t=>!0},setup(t,o){let{slots:l}=o;const{isRtl:a}=rl(),{mobile:v}=El(),r=vl(t,t.symbol),d=G(!1),s=G(0),u=G(0),i=G(0),m=O(()=>t.direction==="horizontal"),{resizeRef:c,contentRect:p}=nl(),{resizeRef:y,contentRect:V}=nl(),T=O(()=>r.selected.value.length?r.items.value.findIndex(D=>D.id===r.selected.value[0]):-1),g=O(()=>r.selected.value.length?r.items.value.findIndex(D=>D.id===r.selected.value[r.selected.value.length-1]):-1);if(Sl){let D=-1;ue(()=>[r.selected.value,p.value,V.value,m.value],()=>{cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(p.value&&V.value){const P=m.value?"width":"height";u.value=p.value[P],i.value=V.value[P],d.value=u.value+1<i.value}if(T.value>=0&&y.value){const P=y.value.children[g.value];T.value===0||!d.value?s.value=0:t.centerActive?s.value=pn({selectedElement:P,containerSize:u.value,contentSize:i.value,isRtl:a.value,isHorizontal:m.value}):d.value&&(s.value=ol({selectedElement:P,containerSize:u.value,contentSize:i.value,isRtl:a.value,currentScrollOffset:s.value,isHorizontal:m.value}))}})})}const w=G(!1);let A=0,L=0;function x(D){const P=m.value?"clientX":"clientY";L=(a.value&&m.value?-1:1)*s.value,A=D.touches[0][P],w.value=!0}function z(D){if(!d.value)return;const P=m.value?"clientX":"clientY",le=a.value&&m.value?-1:1;s.value=le*(L+A-D.touches[0][P])}function W(D){const P=i.value-u.value;s.value<0||!d.value?s.value=0:s.value>=P&&(s.value=P),w.value=!1}function ee(){c.value&&(c.value[m.value?"scrollLeft":"scrollTop"]=0)}const ve=G(!1);function Ae(D){if(ve.value=!0,!(!d.value||!y.value)){for(const P of D.composedPath())for(const le of y.value.children)if(le===P){s.value=ol({selectedElement:le,containerSize:u.value,contentSize:i.value,isRtl:a.value,currentScrollOffset:s.value,isHorizontal:m.value});return}}}function ae(D){ve.value=!1}function Le(D){var P;!ve.value&&!(D.relatedTarget&&((P=y.value)!=null&&P.contains(D.relatedTarget)))&&Z()}function We(D){y.value&&(m.value?D.key==="ArrowRight"?Z(a.value?"prev":"next"):D.key==="ArrowLeft"&&Z(a.value?"next":"prev"):D.key==="ArrowDown"?Z("next"):D.key==="ArrowUp"&&Z("prev"),D.key==="Home"?Z("first"):D.key==="End"&&Z("last"))}function Z(D){var P,le,Je,Ze,Qe;if(y.value)if(!D)(P=xl(y.value)[0])==null||P.focus();else if(D==="next"){const fe=(le=y.value.querySelector(":focus"))==null?void 0:le.nextElementSibling;fe?fe.focus():Z("first")}else if(D==="prev"){const fe=(Je=y.value.querySelector(":focus"))==null?void 0:Je.previousElementSibling;fe?fe.focus():Z("last")}else D==="first"?(Ze=y.value.firstElementChild)==null||Ze.focus():D==="last"&&((Qe=y.value.lastElementChild)==null||Qe.focus())}function ge(D){const P=s.value+(D==="prev"?-1:1)*u.value;s.value=$l(P,0,i.value-u.value)}const xe=O(()=>{let D=s.value>i.value-u.value?-(i.value-u.value)+al(i.value-u.value-s.value):-s.value;s.value<=0&&(D=al(-s.value));const P=a.value&&m.value?-1:1;return{transform:`translate${m.value?"X":"Y"}(${P*D}px)`,transition:w.value?"none":"",willChange:w.value?"transform":""}}),qe=O(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),Me=O(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!v.value;case!0:return d.value||Math.abs(s.value)>0;case"mobile":return v.value||d.value||Math.abs(s.value)>0;default:return!v.value&&(d.value||Math.abs(s.value)>0)}}),bl=O(()=>Math.abs(s.value)>0),Ul=O(()=>i.value>Math.abs(s.value)+u.value);return Se(()=>e(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!m.value,"v-slide-group--has-affixes":Me.value,"v-slide-group--is-overflowing":d.value},t.class],style:t.style,tabindex:ve.value||r.selected.value.length?-1:0,onFocus:Le},{default:()=>{var D,P,le;return[Me.value&&e("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!bl.value}],onClick:()=>ge("prev")},[((D=l.prev)==null?void 0:D.call(l,qe.value))??e(tl,null,{default:()=>[e(X,{icon:a.value?t.nextIcon:t.prevIcon},null)]})]),e("div",{key:"container",ref:c,class:"v-slide-group__container",onScroll:ee},[e("div",{ref:y,class:"v-slide-group__content",style:xe.value,onTouchstartPassive:x,onTouchmovePassive:z,onTouchendPassive:W,onFocusin:Ae,onFocusout:ae,onKeydown:We},[(P=l.default)==null?void 0:P.call(l,qe.value)])]),Me.value&&e("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ul.value}],onClick:()=>ge("next")},[((le=l.next)==null?void 0:le.call(l,qe.value))??e(tl,null,{default:()=>[e(X,{icon:a.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:r.selected,scrollTo:ge,scrollOffset:s,focus:Z}}});function Tn(t){return t?t.map(o=>typeof o=="string"?{title:o,value:o}:o):[]}const gn=Ie({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Cl({mandatory:"force"}),...Kl(),...Xe()},"VTabs"),yn=he()({name:"VTabs",props:gn(),emits:{"update:modelValue":t=>!0},setup(t,o){let{slots:l}=o;const a=Pl(t,"modelValue"),v=O(()=>Tn(t.items)),{densityClasses:r}=Gl(t),{backgroundColorClasses:d,backgroundColorStyles:s}=pt(re(t,"bgColor"));return Ol({VTab:{color:re(t,"color"),direction:re(t,"direction"),stacked:re(t,"stacked"),fixed:re(t,"fixedTabs"),sliderColor:re(t,"sliderColor"),hideSlider:re(t,"hideSlider")}}),Se(()=>{const[u]=il.filterProps(t);return e(il,pe(u,{modelValue:a.value,"onUpdate:modelValue":i=>a.value=i,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},r.value,d.value,t.class],style:[{"--v-tabs-height":Be(t.height)},s.value,t.style],role:"tablist",symbol:gl}),{default:()=>[l.default?l.default():v.value.map(i=>e(yl,pe(i,{key:i.title}),null))]})}),{}}});const Cn=t=>{const{touchstartX:o,touchendX:l,touchstartY:a,touchendY:v}=t,r=.5,d=16;t.offsetX=l-o,t.offsetY=v-a,Math.abs(t.offsetY)<r*Math.abs(t.offsetX)&&(t.left&&l<o-d&&t.left(t),t.right&&l>o+d&&t.right(t)),Math.abs(t.offsetX)<r*Math.abs(t.offsetY)&&(t.up&&v<a-d&&t.up(t),t.down&&v>a+d&&t.down(t))};function In(t,o){var a;const l=t.changedTouches[0];o.touchstartX=l.clientX,o.touchstartY=l.clientY,(a=o.start)==null||a.call(o,{originalEvent:t,...o})}function hn(t,o){var a;const l=t.changedTouches[0];o.touchendX=l.clientX,o.touchendY=l.clientY,(a=o.end)==null||a.call(o,{originalEvent:t,...o}),Cn(o)}function _n(t,o){var a;const l=t.changedTouches[0];o.touchmoveX=l.clientX,o.touchmoveY=l.clientY,(a=o.move)==null||a.call(o,{originalEvent:t,...o})}function bn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:l=>In(l,o),touchend:l=>hn(l,o),touchmove:l=>_n(l,o)}}function Un(t,o){var s;const l=o.value,a=l!=null&&l.parent?t.parentElement:t,v=(l==null?void 0:l.options)??{passive:!0},r=(s=o.instance)==null?void 0:s.$.uid;if(!a||!r)return;const d=bn(o.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[r]=d,cl(d).forEach(u=>{a.addEventListener(u,d[u],v)})}function kn(t,o){var r,d;const l=(r=o.value)!=null&&r.parent?t.parentElement:t,a=(d=o.instance)==null?void 0:d.$.uid;if(!(l!=null&&l._touchHandlers)||!a)return;const v=l._touchHandlers[a];cl(v).forEach(s=>{l.removeEventListener(s,v[s])}),delete l._touchHandlers[a]}const Il={mounted:Un,unmounted:kn},Dn=Il,hl=Symbol.for("vuetify:v-window"),_l=Symbol.for("vuetify:v-window-group"),En=Ie({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...je(),...Xe(),...Rl()},"VWindow"),Sn=he()({name:"VWindow",directives:{Touch:Il},props:En(),emits:{"update:modelValue":t=>!0},setup(t,o){let{slots:l}=o;const{themeClasses:a}=Fl(t),{isRtl:v}=rl(),{t:r}=Nl(),d=vl(t,_l),s=b(),u=O(()=>v.value?!t.reverse:t.reverse),i=G(!1),m=O(()=>{const x=t.direction==="vertical"?"y":"x",W=(u.value?!i.value:i.value)?"-reverse":"";return`v-window-${x}${W}-transition`}),c=G(0),p=b(void 0),y=O(()=>d.items.value.findIndex(x=>d.selected.value.includes(x.id)));ue(y,(x,z)=>{const W=d.items.value.length,ee=W-1;W<=2?i.value=x<z:x===ee&&z===0?i.value=!0:x===0&&z===ee?i.value=!1:i.value=x<z}),wl(hl,{transition:m,isReversed:i,transitionCount:c,transitionHeight:p,rootRef:s});const V=O(()=>t.continuous||y.value!==0),T=O(()=>t.continuous||y.value!==d.items.value.length-1);function g(){V.value&&d.prev()}function w(){T.value&&d.next()}const A=O(()=>{const x=[],z={icon:v.value?t.nextIcon:t.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:d.prev,ariaLabel:r("$vuetify.carousel.prev")};x.push(V.value?l.prev?l.prev({props:z}):e(k,z,null):e("div",null,null));const W={icon:v.value?t.prevIcon:t.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:d.next,ariaLabel:r("$vuetify.carousel.next")};return x.push(T.value?l.next?l.next({props:W}):e(k,W,null):e("div",null,null)),x}),L=O(()=>t.touch===!1?t.touch:{...{left:()=>{u.value?g():w()},right:()=>{u.value?w():g()},start:z=>{let{originalEvent:W}=z;W.stopPropagation()}},...t.touch===!0?{}:t.touch});return Se(()=>ml(e(t.tag,{ref:s,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},a.value,t.class],style:t.style},{default:()=>{var x,z;return[e("div",{class:"v-window__container",style:{height:p.value}},[(x=l.default)==null?void 0:x.call(l,{group:d}),t.showArrows!==!1&&e("div",{class:"v-window__controls"},[A.value])]),(z=l.additional)==null?void 0:z.call(l,{group:d})]}}),[[Al("touch"),L.value]])),{group:d}}}),xn=Ie({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...je(),...Hl(),...Vt()},"VWindowItem"),$n=he()({name:"VWindowItem",directives:{Touch:Dn},props:xn(),emits:{"group:selected":t=>!0},setup(t,o){let{slots:l}=o;const a=Ll(hl),v=jl(t,_l),{isBooted:r}=gt();if(!a||!v)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=G(!1),s=O(()=>r.value&&(a.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function u(){!d.value||!a||(d.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function i(){var V;d.value||!a||(d.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=Be((V=a.rootRef.value)==null?void 0:V.clientHeight)),a.transitionCount.value+=1)}function m(){u()}function c(V){d.value&&ze(()=>{!s.value||!d.value||!a||(a.transitionHeight.value=Be(V.clientHeight))})}const p=O(()=>{const V=a.isReversed.value?t.reverseTransition:t.transition;return s.value?{name:typeof V!="string"?a.transition.value:V,onBeforeEnter:i,onAfterEnter:u,onEnterCancelled:m,onBeforeLeave:i,onAfterLeave:u,onLeaveCancelled:m,onEnter:c}:!1}),{hasContent:y}=Tt(t,v.isSelected);return Se(()=>e(yt,{transition:p.value,disabled:!r.value},{default:()=>{var V;return[ml(e("div",{class:["v-window-item",v.selectedClass.value,t.class],style:t.style},[y.value&&((V=l.default)==null?void 0:V.call(l))]),[[ql,v.isSelected.value]])]}})),{}}}),ga=B({__name:"ConventionEditorView",emits:["pageTitle","refresh"],setup(t,{emit:o}){const l=ul(),a=Ml.getInstance(),v=b({ID:0,ConventionUUID:"",Accommodation:[],Description:"",DetailLink:"",Extras:[],Interests:[],Logo:"",Name:"",OrganisationID:0,OrganisationUUID:"",Slug:"",Tickets:[]}),r=b(),d=b([]);ue(r,()=>{d.value.find(i=>i.id===r.value&&i.title==="General")&&s()});const s=()=>{a==null||a.getConvention(l.params.convention.toString()).then(u=>{u?(v.value=u,o("pageTitle",`Convention Editor - ${v.value.Name}`)):o("pageTitle","Convention Editor - New Convention")})};return d.value=[{id:H(),title:"General",component:G($t),model:v},{id:H(),title:"Accommodation",component:G(ot),model:v},{id:H(),title:"Additional Purchases",component:G(Dt),model:v},{id:H(),title:"Fields",component:G(dt),model:v},{id:H(),title:"Forms",component:G(vn),model:v},{id:H(),title:"Interests",component:G(Nt),model:v},{id:H(),title:"Registrations",component:G(it),model:v},{id:H(),title:"Tickets",component:G(Jt),model:v},{id:H(),title:"Venues",component:G(at),model:v}],o("pageTitle","Convention Editor"),s(),(u,i)=>v.value?(f(),U(E,{key:0},[e(se,{color:"blue-darken-4"},{default:n(()=>[e(yn,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=m=>r.value=m),"show-arrows":""},{default:n(()=>[(f(!0),U(E,null,j(d.value,m=>(f(),h(yl,{key:m.id,value:m.id},{default:n(()=>[I(R(m.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(Sn,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=m=>r.value=m)},{default:n(()=>[(f(!0),U(E,null,j(d.value,m=>(f(),h($n,{key:m.id,value:m.id},{default:n(()=>[m.id===r.value?(f(),h(ce,{key:0,class:"pa-2"},{default:n(()=>[(f(),h(zl(m.component),{modelValue:m.model,"onUpdate:modelValue":c=>m.model=c},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)):S("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64)):(f(),U(E,{key:1},[I(" Convention Not Found ")],64))}});export{ga as default};
