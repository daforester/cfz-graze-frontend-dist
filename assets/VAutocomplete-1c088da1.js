import{e as Ce,u as _e,f as Ie,g as Ee,a as Fe}from"./VSelect-f8a615c2.js";import{i as ke,j as Pe,V as q,g as Ve}from"./VTextField-745142c2.js";import{i as Ke,u as pe,V as Me}from"./rounded-a088577e.js";import{p as ue,y as D,h as V,M as j,K as we,ae as ne,an as Se,a2 as xe,a as be,a7 as Ae,s as B,x as J,k as ee,c as o,F as G,m as z,e as De,as as Oe,z as te}from"./index-162d4367.js";import{u as Le,V as Re,a as le}from"./VList-acae746e.js";import{m as Ne}from"./index-fd59b42a.js";import{a as ae}from"./VBtn-92d1bfca.js";import{a as Ye}from"./VChip-ad88dbeb.js";var Ue=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(Ue||{});const lt=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}];const je=(e,n,t)=>e==null||n==null?-1:e.toString().toLocaleLowerCase().indexOf(n.toString().toLocaleLowerCase()),Be=ue({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ze(e,n,t){var k;const C=[],f=(t==null?void 0:t.default)??je,d=t!=null&&t.filterKeys?ne(t.filterKeys):!1,m=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return C;e:for(let T=0;T<e.length;T++){const h=e[T],c={},a={};let g=-1;if(n&&!(t!=null&&t.noFilter)){if(typeof h=="object"){const O=d||Object.keys(h);for(const K of O){const M=Se(h,K,h),s=(k=t==null?void 0:t.customKeyFilter)==null?void 0:k[K];if(g=s?s(M,n,h):f(M,n,h),g!==-1&&g!==!1)s?c[K]=g:a[K]=g;else if((t==null?void 0:t.filterMode)==="every")continue e}}else g=f(h,n,h),g!==-1&&g!==!1&&(a.title=g);const E=Object.keys(a).length,p=Object.keys(c).length;if(!E&&!p||(t==null?void 0:t.filterMode)==="union"&&p!==m&&!E||(t==null?void 0:t.filterMode)==="intersection"&&(p!==m||!E))continue}C.push({index:T,matches:{...a,...c}})}return C}function Ge(e,n,t,C){const f=D([]),d=D(new Map),m=V(()=>C!=null&&C.transform?j(n).map(C==null?void 0:C.transform):j(n));we(()=>{const T=typeof t=="function"?t():j(t),h=typeof T!="string"&&typeof T!="number"?"":String(T),c=ze(m.value,h,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),a=j(n),g=[],E=new Map;c.forEach(p=>{let{index:O,matches:K}=p;const M=a[O];g.push(M),E.set(M.value,K)}),f.value=g,d.value=E});function k(T){return d.value.get(T.value)}return{filteredItems:f,filteredMatches:d,getMatches:k}}function He(e,n,t){if(n==null)return e;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?o(G,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,n)]),o("span",{class:"v-autocomplete__mask"},[e.substr(n,t)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(n+t)])]):e}const $e=ue({autoSelectFirst:{type:[Boolean,String]},search:String,...Be({filterKeys:["title"]}),...Ce(),...xe(ke({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Ne({transition:!1})},"VAutocomplete"),at=be()({name:"VAutocomplete",props:$e(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,n){let{slots:t}=n;const{t:C}=Ae(),f=D(),d=B(!1),m=B(!0),k=D(!1),T=D(),h=J(e,"menu"),c=V({get:()=>h.value,set:l=>{var r;h.value&&!l&&((r=T.value)!=null&&r.Î¨openChildren)||(h.value=l)}}),a=B(-1),g=V(()=>{var l;return(l=f.value)==null?void 0:l.color}),{items:E,transformIn:p,transformOut:O}=Le(e),{textColorClasses:K,textColorStyles:M}=Ke(g),s=J(e,"search",""),F=J(e,"modelValue",[],l=>p(l===null?[null]:ne(l)),l=>{const r=O(l);return e.multiple?r:r[0]??null}),x=Pe(),{filteredItems:R,getMatches:re}=Ge(e,E,()=>m.value?"":s.value),P=V(()=>F.value.map(l=>E.value.find(r=>e.valueComparator(r.value,l.value))||l)),w=V(()=>e.hideSelected?R.value.filter(l=>!P.value.some(r=>r.value===l.value)):R.value),H=V(()=>P.value.map(l=>l.props.value)),W=V(()=>P.value[a.value]),N=V(()=>{var r;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&s.value===((r=w.value[0])==null?void 0:r.title))&&w.value.length>0&&!m.value&&!k.value}),$=V(()=>e.hideNoData&&!E.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),Q=D(),{onListScroll:oe,onListKeydown:ce}=_e(Q,f);function se(l){e.openOnClear&&(c.value=!0),s.value=""}function ie(){$.value||(c.value=!0)}function ve(l){$.value||(d.value&&(l.preventDefault(),l.stopPropagation()),c.value=!c.value)}function fe(l){var A,u,y;if(e.readonly||x!=null&&x.isReadonly.value)return;const r=f.value.selectionStart,v=H.value.length;if((a.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(c.value=!0),["Escape"].includes(l.key)&&(c.value=!1),["Enter","Escape","Tab"].includes(l.key)&&(N.value&&["Enter","Tab"].includes(l.key)&&b(R.value[0]),m.value=!0),l.key==="ArrowDown"&&N.value&&((A=Q.value)==null||A.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(l.key)){if(a.value<0){l.key==="Backspace"&&!s.value&&(a.value=v-1);return}const i=a.value;W.value&&b(W.value),a.value=i>=v-1?v-2:i}if(l.key==="ArrowLeft"){if(a.value<0&&r>0)return;const i=a.value>-1?a.value-1:v-1;P.value[i]?a.value=i:(a.value=-1,f.value.setSelectionRange((u=s.value)==null?void 0:u.length,(y=s.value)==null?void 0:y.length))}if(l.key==="ArrowRight"){if(a.value<0)return;const i=a.value+1;P.value[i]?a.value=i:(a.value=-1,f.value.setSelectionRange(0,0))}}}function de(l){s.value=l.target.value}function me(){var l;d.value&&(m.value=!0,(l=f.value)==null||l.focus())}function he(l){d.value=!0,setTimeout(()=>{k.value=!0})}function ge(l){k.value=!1}function ye(l){(l==null||l===""&&!e.multiple)&&(F.value=[])}const L=B(!1);function b(l){if(e.multiple){const r=H.value.findIndex(v=>e.valueComparator(v,l.value));if(r===-1)F.value=[...F.value,l];else{const v=[...F.value];v.splice(r,1),F.value=v}}else F.value=[l],L.value=!0,s.value=l.title,c.value=!1,m.value=!0,te(()=>L.value=!1)}return ee(d,(l,r)=>{var v;l!==r&&(l?(L.value=!0,s.value=e.multiple?"":String(((v=P.value.at(-1))==null?void 0:v.props.title)??""),m.value=!0,te(()=>L.value=!1)):(!e.multiple&&!s.value?F.value=[]:N.value&&!k.value&&!P.value.some(A=>{let{value:u}=A;return u===w.value[0].value})&&b(w.value[0]),c.value=!1,s.value="",a.value=-1))}),ee(s,l=>{!d.value||L.value||(l&&(c.value=!0),m.value=!l)}),pe(()=>{const l=!!(e.chips||t.chip),r=!!(!e.hideNoData||w.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),v=F.value.length>0,[A]=q.filterProps(e);return o(q,z({ref:f},A,{modelValue:s.value,"onUpdate:modelValue":ye,focused:d.value,"onUpdate:focused":u=>d.value=u,validationValue:F.externalValue,dirty:v,onInput:de,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":c.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":a.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:v?void 0:e.placeholder,"onClick:clear":se,"onMousedown:control":ie,onKeydown:fe}),{...t,default:()=>o(G,null,[o(Ie,z({ref:T,modelValue:c.value,"onUpdate:modelValue":u=>c.value=u,activator:"parent",contentClass:"v-autocomplete__content",disabled:$.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:me},e.menuProps),{default:()=>[r&&o(Re,{ref:Q,selected:H.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:ce,onFocusin:he,onFocusout:ge,onScrollPassive:oe,tabindex:"-1"},{default:()=>{var u,y,i;return[(u=t["prepend-item"])==null?void 0:u.call(t),!w.value.length&&!e.hideNoData&&(((y=t["no-data"])==null?void 0:y.call(t))??o(le,{title:C(e.noDataText)},null)),o(Ee,{renderless:!0,items:w.value},{default:S=>{var Z;let{item:_,index:I,itemRef:Te}=S;const X=z(_.props,{ref:Te,key:I,active:N.value&&I===0?!0:void 0,onClick:()=>b(_)});return((Z=t.item)==null?void 0:Z.call(t,{item:_,index:I,props:X}))??o(le,X,{prepend:Y=>{let{isSelected:U}=Y;return o(G,null,[e.multiple&&!e.hideSelected?o(Fe,{key:_.value,modelValue:U,ripple:!1,tabindex:"-1"},null):void 0,_.props.prependIcon&&o(ae,{icon:_.props.prependIcon},null)])},title:()=>{var Y,U;return m.value?_.title:He(_.title,(Y=re(_))==null?void 0:Y.title,((U=s.value)==null?void 0:U.length)??0)}})}}),(i=t["append-item"])==null?void 0:i.call(t)]}})]}),P.value.map((u,y)=>{var _;function i(I){I.stopPropagation(),I.preventDefault(),b(u)}const S={"onClick:close":i,onMousedown(I){I.preventDefault(),I.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:u.value,class:["v-autocomplete__selection",y===a.value&&["v-autocomplete__selection--selected",K.value]],style:y===a.value?M.value:{}},[l?t.chip?o(Me,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>{var I;return[(I=t.chip)==null?void 0:I.call(t,{item:u,index:y,props:S})]}}):o(Ye,z({key:"chip",closable:e.closableChips,size:"small",text:u.title},S),null):((_=t.selection)==null?void 0:_.call(t,{item:u,index:y}))??o("span",{class:"v-autocomplete__selection-text"},[u.title,e.multiple&&y<P.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[De(",")])])])})]),"append-inner":function(){var S;for(var u=arguments.length,y=new Array(u),i=0;i<u;i++)y[i]=arguments[i];return o(G,null,[(S=t["append-inner"])==null?void 0:S.call(t,...y),e.menuIcon?o(ae,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:ve,onClick:Oe},null):void 0])}})}),Ve({isFocused:d,isPristine:m,menu:c,search:s,filteredItems:R,select:b},f)}});export{Ue as T,at as V,lt as a,Be as m,Ge as u};
