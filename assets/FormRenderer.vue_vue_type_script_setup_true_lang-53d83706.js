import{p as Pe,an as We,n as $e,ae as ol,r as A,s as be,u as Ie,e as G,w as $,E as De,v as u,H as S,x as Z,N as ne,aA as il,ah as sl,y as rl,k as dl,f as cl,j as vl,ax as el,aa as Xe,ad as ml,aB as fl,ay as pl,m as hl,I as me,a0 as J,a1 as fe,a4 as Ne,K as f,R as x,U as ve,O as K,M as I,Z as z,L as E,S as d,Q as O,ar as ze,ac as Je,a as gl,a2 as we,P as Vl,$ as Ul}from"./index-4b048e5a.js";import{V as ce,u as _e}from"./VCheckbox-f09f1807.js";import{s as Ce}from"./index-71069b21.js";import{f as yl,V as ie,a as le,c as ll,d as xe,e as Ye}from"./VList-9c97bf48.js";import{a as oe,V as _}from"./VRow-9bb8d02c.js";import{m as bl,u as Il,a as Dl,b as Cl,V as He}from"./VSelect-8f7f6f50.js";import{d as kl,u as Tl,e as Be,T as Sl,s as je}from"./filter-82077033.js";import{C as El,a as Oe,l as ke,G as Al,V as ge,n as xl}from"./VContainer-e3d76a37.js";import{k as wl,l as Rl,j as al,V as Ve,m as tl,e as Pl,u as $l,f as Re,g as Nl,h as Ol,i as Fl,n as Ml}from"./VTextField-b5ed3798.js";import{m as ql,I as Bl}from"./index-0b213796.js";import{V as Ll,m as Hl,a as nl,b as _l,c as Gl}from"./VCheckboxBtn-e8f21805.js";import{a as Kl,_ as Xl}from"./VChip-20429996.js";import{G as zl}from"./userData-713a4a5a.js";import{v as Le}from"./v4-a960c1f4.js";import{V as Jl}from"./VForm-d352388e.js";const Ze=(e,b,i)=>{if(i>=e.length){let T=i-e.length+1;for(;T--;)e.push(void 0)}e.splice(i,0,e.splice(b,1)[0])};var X=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(X||{});const xa=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];function Yl(e,b,i){if(b==null)return e;if(Array.isArray(b))throw new Error("Multiple matches is not implemented");return typeof b=="number"&&~b?u(S,null,[u("span",{class:"v-autocomplete__unmask"},[e.substr(0,b)]),u("span",{class:"v-autocomplete__mask"},[e.substr(b,i)]),u("span",{class:"v-autocomplete__unmask"},[e.substr(b+i)])]):e}const jl=Pe({autoSelectFirst:{type:[Boolean,String]},search:String,...kl({filterKeys:["title"]}),...bl(),...We(wl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ql({transition:!1})},"VAutocomplete"),Qe=$e()({name:"VAutocomplete",props:jl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,b){let{slots:i}=b;const{t:T}=ol(),U=A(),g=be(!1),D=be(!0),h=A(!1),o=A(),y=Ie(e,"menu"),l=G({get:()=>y.value,set:V=>{var P;y.value&&!V&&((P=o.value)!=null&&P.Î¨openChildren)||(y.value=V)}}),t=be(-1),C=G(()=>{var V;return(V=U.value)==null?void 0:V.color}),{items:s,transformIn:c,transformOut:v}=yl(e),{textColorClasses:r,textColorStyles:n}=El(C),a=Ie(e,"search",""),p=Ie(e,"modelValue",[],V=>c(V===null?[null]:sl(V)),V=>{const P=v(V);return e.multiple?P:P[0]??null}),m=Rl(),{filteredItems:k,getMatches:M}=Tl(e,s,()=>D.value?"":a.value),L=G(()=>p.value.map(V=>s.value.find(P=>e.valueComparator(P.value,V.value))||V)),Q=G(()=>e.hideSelected?k.value.filter(V=>!L.value.some(P=>P.value===V.value)):k.value),ae=G(()=>L.value.map(V=>V.props.value)),W=G(()=>L.value[t.value]),w=G(()=>{var P;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&a.value===((P=Q.value[0])==null?void 0:P.title))&&Q.value.length>0&&!D.value&&!h.value}),q=G(()=>e.hideNoData&&!s.value.length||e.readonly||(m==null?void 0:m.isReadonly.value)),F=A(),{onListScroll:ee,onListKeydown:pe}=Il(F,U);function Ue(V){e.openOnClear&&(l.value=!0),a.value=""}function ye(){q.value||(l.value=!0)}function te(V){q.value||(g.value&&(V.preventDefault(),V.stopPropagation()),l.value=!l.value)}function se(V){var he,R,H;if(e.readonly||m!=null&&m.isReadonly.value)return;const P=U.value.selectionStart,B=ae.value.length;if((t.value>-1||["Enter","ArrowDown","ArrowUp"].includes(V.key))&&V.preventDefault(),["Enter","ArrowDown"].includes(V.key)&&(l.value=!0),["Escape"].includes(V.key)&&(l.value=!1),["Enter","Escape","Tab"].includes(V.key)&&(w.value&&["Enter","Tab"].includes(V.key)&&ue(k.value[0]),D.value=!0),V.key==="ArrowDown"&&w.value&&((he=F.value)==null||he.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(V.key)){if(t.value<0){V.key==="Backspace"&&!a.value&&(t.value=B-1);return}const N=t.value;W.value&&ue(W.value),t.value=N>=B-1?B-2:N}if(V.key==="ArrowLeft"){if(t.value<0&&P>0)return;const N=t.value>-1?t.value-1:B-1;L.value[N]?t.value=N:(t.value=-1,U.value.setSelectionRange((R=a.value)==null?void 0:R.length,(H=a.value)==null?void 0:H.length))}if(V.key==="ArrowRight"){if(t.value<0)return;const N=t.value+1;L.value[N]?t.value=N:(t.value=-1,U.value.setSelectionRange(0,0))}}}function Te(V){a.value=V.target.value}function Fe(){var V;g.value&&(D.value=!0,(V=U.value)==null||V.focus())}function Me(V){g.value=!0,setTimeout(()=>{h.value=!0})}function qe(V){h.value=!1}function Se(V){(V==null||V===""&&!e.multiple)&&(p.value=[])}const re=be(!1);function ue(V){if(e.multiple){const P=ae.value.findIndex(B=>e.valueComparator(B,V.value));if(P===-1)p.value=[...p.value,V];else{const B=[...p.value];B.splice(P,1),p.value=B}}else p.value=[V],re.value=!0,a.value=V.title,l.value=!1,D.value=!0,De(()=>re.value=!1)}return $(g,(V,P)=>{var B;V!==P&&(V?(re.value=!0,a.value=e.multiple?"":String(((B=L.value.at(-1))==null?void 0:B.props.title)??""),D.value=!0,De(()=>re.value=!1)):(!e.multiple&&!a.value?p.value=[]:w.value&&!h.value&&!L.value.some(he=>{let{value:R}=he;return R===Q.value[0].value})&&ue(Q.value[0]),l.value=!1,a.value="",t.value=-1))}),$(a,V=>{!g.value||re.value||(V&&(l.value=!0),D.value=!V)}),Oe(()=>{const V=!!(e.chips||i.chip),P=!!(!e.hideNoData||Q.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),B=p.value.length>0,[he]=Ve.filterProps(e);return u(Ve,Z({ref:U},he,{modelValue:a.value,"onUpdate:modelValue":Se,focused:g.value,"onUpdate:focused":R=>g.value=R,validationValue:p.externalValue,dirty:B,onInput:Te,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":l.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!i.selection,"v-autocomplete--selecting-index":t.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:B?void 0:e.placeholder,"onClick:clear":Ue,"onMousedown:control":ye,onKeydown:se}),{...i,default:()=>u(S,null,[u(Dl,Z({ref:o,modelValue:l.value,"onUpdate:modelValue":R=>l.value=R,activator:"parent",contentClass:"v-autocomplete__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Fe},e.menuProps),{default:()=>[P&&u(ie,{ref:F,selected:ae.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:R=>R.preventDefault(),onKeydown:pe,onFocusin:Me,onFocusout:qe,onScrollPassive:ee,tabindex:"-1"},{default:()=>{var R,H,N;return[(R=i["prepend-item"])==null?void 0:R.call(i),!Q.value.length&&!e.hideNoData&&(((H=i["no-data"])==null?void 0:H.call(i))??u(le,{title:T(e.noDataText)},null)),u(Cl,{renderless:!0,items:Q.value},{default:de=>{var Ke;let{item:Y,index:j,itemRef:ul}=de;const Ge=Z(Y.props,{ref:ul,key:j,active:w.value&&j===0?!0:void 0,onClick:()=>ue(Y)});return((Ke=i.item)==null?void 0:Ke.call(i,{item:Y,index:j,props:Ge}))??u(le,Ge,{prepend:Ee=>{let{isSelected:Ae}=Ee;return u(S,null,[e.multiple&&!e.hideSelected?u(Ll,{key:Y.value,modelValue:Ae,ripple:!1,tabindex:"-1"},null):void 0,Y.props.prependIcon&&u(ke,{icon:Y.props.prependIcon},null)])},title:()=>{var Ee,Ae;return D.value?Y.title:Yl(Y.title,(Ee=M(Y))==null?void 0:Ee.title,((Ae=a.value)==null?void 0:Ae.length)??0)}})}}),(N=i["append-item"])==null?void 0:N.call(i)]}})]}),L.value.map((R,H)=>{var Y;function N(j){j.stopPropagation(),j.preventDefault(),ue(R)}const de={"onClick:close":N,onMousedown(j){j.preventDefault(),j.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return u("div",{key:R.value,class:["v-autocomplete__selection",H===t.value&&["v-autocomplete__selection--selected",r.value]],style:H===t.value?n.value:{}},[V?i.chip?u(Al,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:R.title}}},{default:()=>{var j;return[(j=i.chip)==null?void 0:j.call(i,{item:R,index:H,props:de})]}}):u(Kl,Z({key:"chip",closable:e.closableChips,size:"small",text:R.title},de),null):((Y=i.selection)==null?void 0:Y.call(i,{item:R,index:H}))??u("span",{class:"v-autocomplete__selection-text"},[R.title,e.multiple&&H<L.value.length-1&&u("span",{class:"v-autocomplete__selection-comma"},[ne(",")])])])})]),"append-inner":function(){var de;for(var R=arguments.length,H=new Array(R),N=0;N<R;N++)H[N]=arguments[N];return u(S,null,[(de=i["append-inner"])==null?void 0:de.call(i,...H),e.menuIcon?u(ke,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:te,onClick:il},null):void 0])}})}),al({isFocused:g,isPristine:D,menu:l,search:a,filteredItems:k,select:ue},U)}});const Zl=Pe({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...tl(),...Pl()},"VTextarea"),Ql=$e()({name:"VTextarea",directives:{Intersect:Bl},inheritAttrs:!1,props:Zl(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,b){let{attrs:i,emit:T,slots:U}=b;const g=Ie(e,"modelValue"),{isFocused:D,focus:h,blur:o}=$l(e),y=G(()=>typeof e.counterValue=="function"?e.counterValue(g.value):(g.value||"").toString().length),l=G(()=>{if(i.maxlength)return i.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function t(w,q){var F,ee;!e.autofocus||!w||(ee=(F=q[0].target)==null?void 0:F.focus)==null||ee.call(F)}const C=A(),s=A(),c=be(""),v=A(),r=G(()=>e.persistentPlaceholder||D.value||e.active);function n(){var w;v.value!==document.activeElement&&((w=v.value)==null||w.focus()),D.value||h()}function a(w){n(),T("click:control",w)}function p(w){T("mousedown:control",w)}function m(w){w.stopPropagation(),n(),De(()=>{g.value="",pl(e["onClick:clear"],w)})}function k(w){var F;const q=w.target;if(g.value=q.value,(F=e.modelModifiers)!=null&&F.trim){const ee=[q.selectionStart,q.selectionEnd];De(()=>{q.selectionStart=ee[0],q.selectionEnd=ee[1]})}}const M=A(),L=A(+e.rows),Q=G(()=>["plain","underlined"].includes(e.variant));rl(()=>{e.autoGrow||(L.value=+e.rows)});function ae(){e.autoGrow&&De(()=>{if(!M.value||!s.value)return;const w=getComputedStyle(M.value),q=getComputedStyle(s.value.$el),F=parseFloat(w.getPropertyValue("--v-field-padding-top"))+parseFloat(w.getPropertyValue("--v-input-padding-top"))+parseFloat(w.getPropertyValue("--v-field-padding-bottom")),ee=M.value.scrollHeight,pe=parseFloat(w.lineHeight),Ue=Math.max(parseFloat(e.rows)*pe+F,parseFloat(q.getPropertyValue("--v-input-control-height"))),ye=parseFloat(e.maxRows)*pe+F||1/0,te=hl(ee??0,Ue,ye);L.value=Math.floor((te-F)/pe),c.value=vl(te)})}dl(ae),$(g,ae),$(()=>e.rows,ae),$(()=>e.maxRows,ae),$(()=>e.density,ae);let W;return $(M,w=>{w?(W=new ResizeObserver(ae),W.observe(M.value)):W==null||W.disconnect()}),cl(()=>{W==null||W.disconnect()}),Oe(()=>{const w=!!(U.counter||e.counter||e.counterValue),q=!!(w||U.details),[F,ee]=el(i),[{modelValue:pe,...Ue}]=Re.filterProps(e),[ye]=Nl(e);return u(Re,Z({ref:C,modelValue:g.value,"onUpdate:modelValue":te=>g.value=te,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":Q.value},e.class],style:e.style},F,Ue,{centerAffix:L.value===1&&!Q.value,focused:D.value}),{...U,default:te=>{let{isDisabled:se,isDirty:Te,isReadonly:Fe,isValid:Me}=te;return u(Ol,Z({ref:s,style:{"--v-textarea-control-height":c.value},onClick:a,onMousedown:p,"onClick:clear":m,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},ye,{active:r.value||Te.value,centerAffix:L.value===1&&!Q.value,dirty:Te.value||e.dirty,disabled:se.value,focused:D.value,error:Me.value===!1}),{...U,default:qe=>{let{props:{class:Se,...re}}=qe;return u(S,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),Xe(u("textarea",Z({ref:v,class:Se,value:g.value,onInput:k,autofocus:e.autofocus,readonly:Fe.value,disabled:se.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:n,onBlur:o},re,ee),null),[[ml("intersect"),{handler:t},null,{once:!0}]]),e.autoGrow&&Xe(u("textarea",{class:[Se,"v-textarea__sizer"],"onUpdate:modelValue":ue=>g.value=ue,ref:M,readonly:!0,"aria-hidden":"true"},null),[[fl,g.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:q?te=>{var se;return u(S,null,[(se=U.details)==null?void 0:se.call(U,te),w&&u(S,null,[u("span",null,null),u(Fl,{active:e.persistentCounter||D.value,value:y.value,max:l.value},U.counter)])])}:void 0})}),al({},C,s,v)}}),Wl=me({__name:"Extras",props:J({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:J(["change"],["update:modelValue"]),setup(e,{emit:b}){const i=e,{convention:T,disabled:U=!1}=i,g=fe(e,"modelValue"),D=Ne.getInstance(),h=A({});try{h.value=JSON.parse(g.value)}catch{}const o=A([]),y=A([]);$(i,()=>{t()}),$(h.value,s=>{for(const c in s)if(s[c].checked){const v=o.value.map(r=>{var n;return(n=r.Options)==null?void 0:n.find(a=>a.OptionUUID===c)});if(v&&v.length>0)try{const r=v[0];s[c].choiceId===""&&r&&r.Choices&&r.Choices.length>0&&(s[c].choiceId=r.Choices[0].TagUUID),s[c].price=r==null?void 0:r.Price}catch{}}else s[c].choiceId="",s[c].price=0;g.value=JSON.stringify(s),C()});const l=G({get:()=>o.value.map(s=>s.ExtraUUID),set:()=>{}}),t=()=>{var c;const s=((c=i.items.find(v=>v.Title==="SelectedExtras"))==null?void 0:c.Value)||"[]";try{const v=JSON.parse(s);o.value=y.value.filter(r=>v.find(n=>n===r.ExtraUUID))||[],l.value=[...o.value.map(r=>r.ExtraUUID)],o.value.forEach(r=>{var n;(n=r.Options)==null||n.forEach(a=>{h.value[a.OptionUUID]||(h.value[a.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"ConventionUUID"in T&&(D==null||D.getConventionExtras(T.ConventionUUID).then(s=>{s&&(y.value=s,t())}));const C=(s=void 0)=>{setTimeout(()=>b("change",s),100)};return(s,c)=>(f(),x(S,null,[ve("h4",null,K(s.label),1),u(ie,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=v=>l.value=v)},{default:I(()=>[(f(!0),x(S,null,z(o.value,v=>(f(),E(ll,{key:v.ExtraUUID,value:v.ExtraUUID},{activator:I(({props:r})=>[u(le,Z({"prepend-icon":"mdi:mdi-group","append-icon":"",title:v.Name},r),null,16,["title"])]),default:I(()=>[v.Options?(f(!0),x(S,{key:0},z(v.Options,r=>(f(),E(le,{key:r.OptionUUID},{default:I(()=>[u(oe,null,{default:I(()=>[u(_,{cols:"12",sm:"6"},{default:I(()=>[u(ce,{label:`${r.Name} ${r.Price&&r.Price>0?`(${d(Ce).currencySymbol}${r.Price})`:""}`,modelValue:h.value[r.OptionUUID].checked,"onUpdate:modelValue":n=>h.value[r.OptionUUID].checked=n,disabled:d(U),"hide-details":"",onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),r.Choices&&r.Choices.length>1&&h.value[r.OptionUUID].checked?(f(),E(_,{key:0,cols:"12",sm:"6"},{default:I(()=>[u(He,{items:r.Choices.map(n=>({value:n.TagUUID,title:n.Title})),modelValue:h.value[r.OptionUUID].choiceId,"onUpdate:modelValue":n=>h.value[r.OptionUUID].choiceId=n,"item-value":"value","item-title":"title",variant:"outlined",disabled:d(U),"hide-details":"",onChange:C},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):O("",!0)]),_:2},1024)]),_:2},1024))),128)):O("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])],64))}}),ea=me({__name:"Interests",props:J({convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:J(["change"],["update:modelValue"]),setup(e,{emit:b}){const i=e,{convention:T,disabled:U=!1}=i,g=fe(e,"modelValue"),D=Ne.getInstance(),h=A({});try{h.value=JSON.parse(g.value)}catch{}const o=A([]),y=A([]);$(h.value,s=>{g.value=JSON.stringify(s)});const l=A([]),t=()=>{var c;const s=((c=i.items.find(v=>v.Title==="SelectedInterests"))==null?void 0:c.Value)||"[]";try{const v=JSON.parse(s);o.value=y.value.filter(r=>v.find(n=>n===r.InterestUUID))||[],l.value=[...o.value.map(r=>r.InterestUUID)]}catch{}};"ConventionUUID"in T&&(D==null||D.getConventionInterests(T.ConventionUUID).then(s=>{s&&(y.value=s,t())})),$(i,()=>{t()});const C=(s=void 0)=>{setTimeout(()=>b("change",s),100)};return(s,c)=>(f(),x(S,null,[ve("h4",null,K(s.label),1),u(ie,{opened:l.value,"onUpdate:opened":c[0]||(c[0]=v=>l.value=v)},{default:I(()=>[(f(!0),x(S,null,z(o.value,v=>(f(),E(le,{key:v.InterestUUID},{default:I(()=>[u(oe,null,{default:I(()=>[u(_,null,{default:I(()=>[u(ce,{label:`${v.Name} ${v.Price&&v.Price>0?`(${d(Ce).currencySymbol}${v.Price})`:""}`,modelValue:h.value[v.InterestUUID],"onUpdate:modelValue":r=>h.value[v.InterestUUID]=r,disabled:d(U),"hide-details":"",onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])],64))}}),la=me({__name:"Tickets",props:J({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:J(["change"],["update:modelValue"]),setup(e,{emit:b}){const i=e,{admin:T=!1,convention:U,disabled:g=!1}=i,D=fe(e,"modelValue"),h=Ne.getInstance(),o=A({ticket:[],addonsChecked:[],componentsChecked:[]});try{o.value=JSON.parse(D.value)}catch{}const y=A([]),l=A([]);$(o.value,n=>{D.value=JSON.stringify(n)});const t=A([]),C=A({required:(n,a=void 0)=>()=>{if(a==null){if(o.value.ticket.length===0&&i.required)return"Must select at least one ticket option.";if(n&&n.ComponentsRequired>0&&o.value.ticket.includes(n.TicketUUID||"")){let p=0;if(n.TicketComponents.forEach(m=>{o.value.componentsChecked.forEach(k=>{m.TicketUUID===k&&(p+=1)})}),p<n.ComponentsRequired)return`Must select ticket ${n.ComponentsRequired} component${n.ComponentsRequired===1?"":"s"}`}}return!0}}),s=()=>{var a;const n=((a=i.items.find(p=>p.Title==="SelectedTickets"))==null?void 0:a.Value)||"[]";try{const p=JSON.parse(n);y.value=l.value.filter(m=>m.Type==="TICKET_TYPE_GROUP"&&p.find(k=>k===m.TicketUUID))||[],t.value=[...y.value.filter(m=>m.Type==="TICKET_TYPE_GROUP").map(m=>m.TicketUUID)]}catch{}};if("ConventionUUID"in U)if(T)h==null||h.getConventionTickets(U.ConventionUUID).then(n=>{n&&(l.value=n,s())});else{const n=i.items.find(a=>a.Title==="SelectedTickets");n&&(h==null||h.getFieldTickets(n.FieldUUID).then(a=>{a&&(l.value=a,s())}))}$(i,()=>{s()});const c=n=>{o.value.ticket.length>1&&o.value.ticket.shift(),o.value.componentsChecked=[],r(n)},v=n=>{const a=l.value.find(p=>p.TicketUUID===o.value.ticket[0]);if(a)for(;o.value.componentsChecked.length>a.ComponentsRequired;)o.value.componentsChecked.shift();r(n)},r=(n=void 0)=>{setTimeout(()=>b("change",n),100)};return(n,a)=>(f(),x(S,null,[ve("h4",null,K(n.label),1),u(ie,{opened:t.value,"onUpdate:opened":a[3]||(a[3]=p=>t.value=p)},{default:I(()=>[(f(!0),x(S,null,z(d(Be)(y.value.filter(p=>p.Type===d(Sl).TICKET_TYPE_GROUP)),p=>(f(),x(S,{key:p.TicketUUID},[p.Tickets.length>0?(f(),E(ll,{key:0,value:p.TicketUUID},{activator:I(({props:m})=>[u(le,Z(m,{"prepend-icon":"mdi:mdi-group",title:p.Name}),{default:I(()=>[u(xe,{title:p.Description},null,8,["title"])]),_:2},1040,["title"])]),default:I(()=>[(f(!0),x(S,null,z(p.Tickets,m=>(f(),E(le,{key:m.TicketUUID},{default:I(()=>[u(xe,null,{default:I(()=>[ne(K(m.Description),1)]),_:2},1024),u(ce,{modelValue:o.value.ticket,"onUpdate:modelValue":k=>o.value.ticket=k,value:m.TicketUUID,onChange:c,rules:[C.value.required(m)],"validate-on":"submit",disabled:d(g)},{label:I(()=>[u(ke,{icon:m.RequiresAccommodation?"mdi:mdi-home":m.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),ne(" "+K(`${m.Name} ${m.Price>0?`(${d(Ce).currencySymbol}${m.Price})`:""}`),1)]),_:2},1032,["modelValue","onUpdate:modelValue","value","rules","disabled"]),o.value.ticket.length>0&&m.TicketUUID===o.value.ticket[0]?(f(),x(S,{key:0},[m.AddonTickets.length?(f(),E(ie,{key:0},{default:I(()=>[(f(!0),x(S,null,z(d(Be)(m.AddonTickets),k=>(f(),x(S,{key:k==null?void 0:k.TicketUUID},[k?(f(),E(le,{key:0},{default:I(()=>[u(Ye,null,{default:I(()=>[u(ce,{modelValue:o.value.addonsChecked,"onUpdate:modelValue":a[0]||(a[0]=M=>o.value.addonsChecked=M),value:k.TicketUUID,onChange:a[1]||(a[1]=M=>{o.value.componentsChecked=[],r(M)}),disabled:d(g)},{label:I(()=>[u(ke,{icon:"mdi:mdi-home-plus",class:"mx-2"}),ne(" "+K(`${k.Name} ${k.Price>0?`(${d(Ce).currencySymbol}${k.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024),u(xe,null,{default:I(()=>[ne(K(k.Description),1)]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128))]),_:2},1024)):O("",!0),m.TicketComponents.length?(f(),E(ie,{key:1},{default:I(()=>[(f(!0),x(S,null,z(d(Be)(m.TicketComponents),k=>(f(),x(S,{key:k==null?void 0:k.TicketUUID},[k?(f(),E(le,{key:0},{default:I(()=>[u(Ye,null,{default:I(()=>[u(ce,{modelValue:o.value.componentsChecked,"onUpdate:modelValue":a[2]||(a[2]=M=>o.value.componentsChecked=M),value:k.TicketUUID,onChange:v,rules:[C.value.required(m,k)],"validate-on":"submit",disabled:d(g)},{label:I(()=>[u(ke,{icon:"mdi:mdi-home-plus",class:"mx-2"}),ne(" "+K(`${k.Name} ${k.Price>0?`(${d(Ce).currencySymbol}${k.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]),_:2},1024),u(xe,null,{default:I(()=>[ne(K(k.Description),1)]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128))]),_:2},1024)):O("",!0)],64)):O("",!0)]),_:2},1024))),128))]),_:2},1032,["value"])):O("",!0)],64))),128))]),_:1},8,["opened"])],64))}}),aa=ve("strong",null,"Accommodation Options",-1),ta=ve("strong",null,[ne("Your Chosen Accommodation"),ve("br"),ne("(in order of preference)")],-1),na=me({__name:"Accommodation",props:J({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:J(["change","update:items"],["update:modelValue"]),setup(e,{emit:b}){const i=e,{admin:T=!1,convention:U,label:g=""}=i,D=fe(e,"modelValue"),h=_e(i,b,void 0,void 0,"items"),o=Ne.getInstance(),y=A([]);$(y,a=>{D.value=JSON.stringify(a)},{deep:!0});const l=A({column:0,id:""});try{const a=JSON.parse(D.value);Array.isArray(a)&&(y.value=a)}catch{}const t=A([]);$(h,()=>{C()});const C=()=>{"ConventionUUID"in U&&(T?o==null||o.getConventionAccommodation(U.ConventionUUID).then(a=>{t.value=a.filter(p=>!!(h!=null&&h.value.find(m=>m.Value===p.AccommodationUUID)))||[]}):h.value.length>0&&(o==null||o.getFieldAccommodation(h.value[0].FieldUUID).then(a=>{t.value=a.filter(p=>!!(h!=null&&h.value.find(m=>m.Value===p.AccommodationUUID)))||[]})))};C();const s=()=>{y.value.includes(l.value.id)||(l.value.column===0&&l.value.id!==""&&y.value.push(l.value.id),n())},c=()=>{const a=y.value.findIndex(p=>p===l.value.id);a>=0&&y.value.splice(a,1)},v=()=>{if(l.value.column!==1)return;const a=y.value.findIndex(p=>p===l.value.id);a<=0||(Ze(y.value,a,a-1),n())},r=()=>{if(l.value.column!==1)return;const a=y.value.findIndex(p=>p===l.value.id);a>=y.value.length-1||(Ze(y.value,a,a+1),n())},n=(a=void 0)=>{setTimeout(()=>b("change",a),100)};return(a,p)=>(f(),x(S,null,[ve("h4",null,K(d(g)),1),u(oe,null,{default:I(()=>[u(_,{cols:"12",md:"5"},{default:I(()=>[aa,u(ie,null,{default:I(()=>[(f(!0),x(S,null,z(t.value,m=>(f(),E(le,{key:m.AccommodationUUID,title:m.Name,class:ze(l.value.column===0&&l.value.id===m.AccommodationUUID?"bg-blue-accent-3":""),onClick:k=>l.value={column:0,id:m.AccommodationUUID}},null,8,["title","class","onClick"]))),128))]),_:1})]),_:1}),u(_,{cols:"12",md:"1"},{default:I(()=>[u(oe,{class:"d-md-none"},{default:I(()=>[u(_,{cols:"12"},{default:I(()=>[u(ge,{icon:"mdi:mdi-arrow-down",size:"small",onClick:p[0]||(p[0]=m=>s()),color:"primary"}),ne(" Â  "),u(ge,{icon:"mdi:mdi-arrow-up",size:"small",onClick:p[1]||(p[1]=m=>c()),color:"secondary"})]),_:1})]),_:1}),u(oe,{class:"d-none d-md-flex h-100 align-content-center"},{default:I(()=>[u(_,{cols:"12"},{default:I(()=>[u(ge,{icon:"mdi:mdi-arrow-right",size:"small",onClick:p[2]||(p[2]=m=>s()),color:"primary"})]),_:1}),u(_,{cols:"12"},{default:I(()=>[u(ge,{icon:"mdi:mdi-arrow-left",size:"small",onClick:p[3]||(p[3]=m=>c()),color:"secondary"})]),_:1})]),_:1})]),_:1}),u(_,{cols:"10",md:"5"},{default:I(()=>[ta,u(ie,null,{default:I(()=>[(f(!0),x(S,null,z(y.value.map(m=>t.value.find(k=>k.AccommodationUUID==m)).filter(m=>m!==void 0),(m,k)=>(f(),x(S,null,[m?(f(),E(le,{key:m.AccommodationUUID,title:`${k+1}. ${m.Name}`,class:ze(l.value.column===1&&l.value.id===m.AccommodationUUID?"bg-blue-accent-3":""),onClick:M=>l.value={column:1,id:(m==null?void 0:m.AccommodationUUID)||""}},null,8,["title","class","onClick"])):O("",!0)],64))),256))]),_:1})]),_:1}),u(_,{cols:"2",md:"1",class:"align-center"},{default:I(()=>[u(oe,{class:"h-100 align-content-center"},{default:I(()=>[u(_,{cols:"12"},{default:I(()=>[u(ge,{icon:"mdi:mdi-arrow-up",size:"small",onClick:p[4]||(p[4]=m=>v()),color:"primary"})]),_:1}),u(_,{cols:"12"},{default:I(()=>[u(ge,{icon:"mdi:mdi-arrow-down",size:"small",onClick:p[5]||(p[5]=m=>r()),color:"secondary"})]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),ua=me({__name:"AgeCheck",props:J({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:J(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:b}){const i=e,T=_e(i,b,void 0,void 0,"items"),U=fe(e,"modelValue"),g=A({required:l=>!i.required||!!l||"Required.",min:l=>{var a,p;const t=new Date,C=t.getFullYear(),s=(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),c=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),v=((a=T.value.find(m=>m.Title=="MIN_AGE"))==null?void 0:a.Value)||"18",r=((p=T.value.find(m=>m.Title=="BEFORE_DATE"))==null?void 0:p.Value)||`${C}-${s}-${c}`,n=o(r);return h(l,r,parseInt(v))||`You must be at least ${v} years old by ${n.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),D=()=>(b("blur"),!(g.value.min(U.value||"")!==!0||g.value.required(U.value||"")!==!0)),h=(l,t,C)=>{if(l>=t)return!1;const s=o(l),v=o(t).getTime()-s.getTime(),r=1e3*60*60*24*365.25;return v/r>=C},o=l=>{const[t,C,s]=l.split("-");return new Date(parseInt(t),parseInt(C)-1,parseInt(s))},y=(l=void 0)=>{setTimeout(()=>b("change",l),100)};return(l,t)=>(f(),E(Ve,{modelValue:U.value,"onUpdate:modelValue":t[0]||(t[0]=C=>U.value=C),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[g.value.required,g.value.min],onBlur:D,onChange:y},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),oa=Pe({...Hl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),ia=$e()({name:"VRadio",props:oa(),setup(e,b){let{slots:i}=b;return Oe(()=>u(nl,Z(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),i)),{}}});const sa=Pe({height:{type:[Number,String],default:"auto"},...tl(),...We(_l(),["multiple"]),trueIcon:{type:Je,default:"$radioOn"},falseIcon:{type:Je,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ra=$e()({name:"VRadioGroup",inheritAttrs:!1,props:sa(),emits:{"update:modelValue":e=>!0},setup(e,b){let{attrs:i,slots:T}=b;const U=gl(),g=G(()=>e.id||`radio-group-${U}`),D=Ie(e,"modelValue");return Oe(()=>{const[h,o]=el(i),[y,l]=Re.filterProps(e),[t,C]=nl.filterProps(e),s=T.label?T.label({label:e.label,props:{for:g.value}}):e.label;return u(Re,Z({class:["v-radio-group",e.class],style:e.style},h,y,{modelValue:D.value,"onUpdate:modelValue":c=>D.value=c,id:g.value}),{...T,default:c=>{let{id:v,messagesId:r,isDisabled:n,isReadonly:a}=c;return u(S,null,[s&&u(Ml,{id:v.value},{default:()=>[s]}),u(Gl,Z(t,{id:v.value,"aria-describedby":r.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:n.value,readonly:a.value,"aria-labelledby":s?v.value:void 0,multiple:!1},o,{modelValue:D.value,"onUpdate:modelValue":p=>D.value=p}),T)])}})}),{}}}),da=me({__name:"FormField",props:J({admin:{type:Boolean},convention:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},required:{type:Boolean}},{modelValue:{required:!0}}),emits:J(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:b}){const i=e,{admin:T=!1,disabled:U=!1,persistentHint:g=!1,required:D=!1}=i,h=A(""),o=fe(e,"modelValue"),y=_e(i,b,void 0,void 0,"field"),l=A(we(y.value)),t=A({maxlength:r=>!i.maxLength||r.length<=i.maxLength||`Maximum length is ${i.maxLength} characters. (Current length: ${r.length})`,minlength:r=>!i.minLength||r.length>=i.minLength||`Minimum length is ${i.minLength} characters. (Current length: ${r.length})`,required:r=>!i.required||!!r||"Required field."}),C=A(!1),s=A([]),c=A("");try{const r=JSON.parse(o.value);Array.isArray(r)?s.value=r:typeof r=="boolean"?C.value=r:c.value=o.value}catch{C.value=!1,s.value=[],c.value=o.value}$(C,()=>{o.value=JSON.stringify(C.value),b("input")}),$(s,()=>{o.value=JSON.stringify(s.value),b("input")},{deep:!0}),$(c,()=>{o.value=c.value,b("input")}),$(y.value,()=>{l.value.Type!==y.value.Type?(l.value=we(y.value),C.value=!1,s.value=[],c.value=""):l.value=we(y.value)});const v=(r=void 0)=>{b("change",r)};return(r,n)=>l.value.Type===d(X).TEXT?(f(),E(Ve,{key:0,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=a=>c.value=a),hint:l.value.Hint,label:`${l.value.Label}${d(D)?"*":""}`,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===d(X).DATE?(f(),E(Ve,{key:1,modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=a=>c.value=a),type:"date",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===d(X).NUMBER?(f(),E(Ve,{key:2,modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=a=>c.value=a),type:"number",hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===d(X).TEXTAREA?(f(),E(Ql,{key:3,modelValue:c.value,"onUpdate:modelValue":n[3]||(n[3]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,placeholder:l.value.Placeholder,variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.maxlength,t.value.minlength,t.value.required],onChange:v},null,8,["modelValue","hint","label","name","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===d(X).CHECKBOX?(f(),x(S,{key:4},[l.value.Multiple?(f(!0),x(S,{key:0},z(l.value.Values,a=>(f(),E(ce,{key:a.ID,modelValue:s.value,"onUpdate:modelValue":n[4]||(n[4]=p=>s.value=p),hint:l.value.Hint,label:a.Title,value:a.Value,name:l.value.Name,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,rules:[t.value.required],onChange:v},null,8,["modelValue","hint","label","value","name","disabled","persistent-hint","error-messages","rules"]))),128)):(f(),E(ce,{key:1,modelValue:C.value,"onUpdate:modelValue":n[5]||(n[5]=a=>C.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,required:d(D),rules:[a=>!d(D)||!!a||"You must tick to continue!"],onChange:v},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===d(X).SELECT?(f(),x(S,{key:5},[!l.value.Autofill&&l.value.Multiple?(f(),E(He,{key:0,modelValue:s.value,"onUpdate:modelValue":n[6]||(n[6]=a=>s.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:v},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(f(),E(Qe,{key:1,modelValue:s.value,"onUpdate:modelValue":n[7]||(n[7]=a=>s.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:v},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(f(),E(Qe,{key:3,modelValue:c.value,"onUpdate:modelValue":n[9]||(n[9]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:v},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"])):O("",!0):(f(),E(He,{key:2,modelValue:c.value,"onUpdate:modelValue":n[8]||(n[8]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:d(U)||!1,"persistent-hint":d(g)||!1,"error-messages":h.value,rules:[t.value.required],onChange:v},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===d(X).RADIO?(f(),E(ra,{key:6,modelValue:c.value,"onUpdate:modelValue":n[10]||(n[10]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,rules:[t.value.required],onChange:v},{default:I(()=>[(f(!0),x(S,null,z(l.value.Values,a=>(f(),E(ia,{key:a.Value,label:a.Title,value:a.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"])):l.value.Type===d(X).ACCOMMODATION?(f(),E(na,{key:7,modelValue:c.value,"onUpdate:modelValue":n[11]||(n[11]=a=>c.value=a),admin:d(T),convention:r.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,onChange:v},null,8,["modelValue","admin","convention","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===d(X).AGE?(f(),E(ua,{key:8,modelValue:c.value,"onUpdate:modelValue":n[12]||(n[12]=a=>c.value=a),hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,onChange:v},null,8,["modelValue","hint","label","name","items","disabled","persistent-hint","error-messages"])):l.value.Type===d(X).EXTRAS?(f(),E(Wl,{key:9,modelValue:c.value,"onUpdate:modelValue":n[13]||(n[13]=a=>c.value=a),convention:r.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,required:d(D),onChange:v},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===d(X).INTERESTS?(f(),E(ea,{key:10,modelValue:c.value,"onUpdate:modelValue":n[14]||(n[14]=a=>c.value=a),convention:r.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,required:d(D),onChange:v},null,8,["modelValue","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===d(X).TICKET?(f(),E(la,{key:11,modelValue:c.value,"onUpdate:modelValue":n[15]||(n[15]=a=>c.value=a),admin:d(T),convention:r.convention,hint:l.value.Hint,label:l.value.Label,name:l.value.Name,items:l.value.Values,disabled:d(U)||!1,"persistent-hint":d(g),"error-messages":h.value,required:d(D),onChange:v},null,8,["modelValue","admin","convention","hint","label","name","items","disabled","persistent-hint","error-messages","required"])):O("",!0)}}),ca={key:0,class:"my-2"},va={key:1,class:"my-2"},ma={key:0,class:"my-2"},fa={key:1,class:"my-2"},wa=me({__name:"FormRenderer",props:J({admin:{type:Boolean,default:!1},convention:{},data:{},editable:{type:Boolean,default:!0},preview:{type:Boolean,default:!1}},{modelValue:{required:!0}}),emits:["update:modelValue"],setup(e){const b=fe(e,"modelValue");je(b.value.Sections),b.value.Sections.forEach(o=>{o.Fields&&je(o.Fields)});const i=A(),T=zl(),U=Ul(),g=A((()=>{if(e.data!==void 0){const y=we(e.data);return b.value.Sections.forEach(l=>{l.Fields&&l.Fields.forEach(t=>{const C=e.data.Data.find(s=>s.SectionFieldUUID===t.SectionFieldUUID&&s.SectionFieldUUID==t.SectionFieldUUID);if(C)t.Value=C.Data;else{const s={ID:0,SubmissionDataUUID:Le(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:l.ID,SectionUUID:l.SectionUUID,SectionFieldID:t.ID,SectionFieldUUID:t.SectionFieldUUID,Data:t.Value};y.Data.push(s)}})}),y}const o={ID:0,SubmissionUUID:Le(),FormID:b.value.ID,FormUUID:b.value.FormUUID,UserID:(T==null?void 0:T.ID)||0,UserUUID:(T==null?void 0:T.UserUUID)||"",Data:[]};return o.Data=b.value.Sections.map(y=>y.Fields?y.Fields.map(l=>({ID:0,SubmissionDataUUID:Le(),SubmissionID:o.ID,SubmissionUUID:o.SubmissionUUID,SectionID:y.ID,SectionUUID:y.SectionUUID,SectionFieldID:l.ID,SectionFieldUUID:l.SectionFieldUUID,Data:l.Value})):[]).flat(),o})()),D=(o,y,l)=>{const t=g.value.Data.find(C=>C.SectionUUID===o&&C.SectionFieldUUID===y);t&&(t.Data=l)},h=({callback:o})=>{var y;(y=i.value)==null||y.validate().then(l=>{l.valid?U.saveSubmission(g.value).then(t=>{t?(g.value=t,o&&o("Saved")):o&&o("Failed to process request")}).catch(()=>{o&&o("Failed to process request")}):o&&o("Errors in form detected, please review and try again.")})};return(o,y)=>(f(),E(xl,null,{default:I(()=>[u(Jl,{ref_key:"formValidator",ref:i,onSubmit:y[0]||(y[0]=Vl(()=>{},["prevent"]))},{default:I(()=>[b.value.Heading?(f(),x("h2",ca,K(b.value.Heading),1)):O("",!0),b.value.Description?(f(),x("p",va,K(b.value.Description),1)):O("",!0),(f(!0),x(S,null,z(b.value.Sections,l=>(f(),x(S,{key:`section_${b.value.ID}.${l.ID}`},[l.Heading?(f(),x("h3",ma,K(l.Heading),1)):O("",!0),l.Description?(f(),x("p",fa,K(l.Description),1)):O("",!0),l.Fields?(f(!0),x(S,{key:2},z(l.Fields,t=>(f(),x(S,{key:`field_${b.value.ID}.${l.ID}.${t.ID}`},[t.Field?(f(),E(oe,{key:0},{default:I(()=>[u(_,null,{default:I(()=>[u(da,{field:t.Field,modelValue:t.Value,"onUpdate:modelValue":C=>t.Value=C,admin:o.admin,convention:o.convention,required:t.Required,"min-length":t.MinLength,"max-length":t.MaxLength,"persistent-hint":!0,disabled:!o.editable,onChange:C=>D(l.SectionUUID,t.SectionFieldUUID,t.Value)},null,8,["field","modelValue","onUpdate:modelValue","admin","convention","required","min-length","max-length","disabled","onChange"])]),_:2},1024)]),_:2},1024)):O("",!0)],64))),128)):O("",!0)],64))),128)),o.editable&&!o.preview?(f(),E(oe,{key:2},{default:I(()=>[u(_,null,{default:I(()=>[u(Xl,{onClick:h,type:"submit"})]),_:1})]),_:1})):O("",!0)]),_:1},512)]),_:1}))}});export{xa as F,Qe as V,da as _,Ql as a,X as b,wa as c};
