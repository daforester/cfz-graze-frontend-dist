import{p as We,n as Qe,e as ne,t as Ue,c as Xe,G as Ze,v as l,H as g,x as be,I as de,a1 as pe,a2 as He,r as S,a3 as ce,K as n,L as $,M as s,$ as ye,S as X,a8 as Ne,Z as H,Q as K,w as Fe,U as N,O as M,R as _,N as Y,_ as qe,a4 as xe,a0 as et}from"./index-c74f4fe8.js";import{e as tt,T as at,d as ot,c as lt}from"./FormRenderer.vue_vue_type_style_index_0_lang-8a562012.js";import{a as nt,F as se}from"./form-29fd1dbb.js";import{_ as je}from"./ModelDialog.vue_vue_type_script_setup_true_lang-51efa7d5.js";import{m as it,j as st,k as ut,l as rt,n as dt,o as mt,p as At,u as _t,q as Ut,r as ct,s as Tt,t as Et,v as vt,w as St,x as Rt,y as $e,z as we,A as Ge,_ as Dt,e as Be,f as It,g as Ot,h as ft,i as pt}from"./VWindowItem-a4b55b9a.js";import{a as le,V as j}from"./VRow-29f81933.js";import{V as Ee}from"./VTextField-aabb54a7.js";import{V as re}from"./copyToClipboard-dffc318f.js";import{u as Ct,j as ve}from"./VContainer-35e521ae.js";import{V as yt,u as Mt}from"./VCheckbox-99950567.js";import{v as Se}from"./v4-a960c1f4.js";import{_ as gt}from"./VChip-648566d7.js";import{V as Le,a as ke}from"./VList-2f763dca.js";import{V as Ce}from"./VBtn-59876448.js";import{S as ht}from"./submission-830079be.js";import{V as bt}from"./VAvatar-ba1d130c.js";import{c as Lt,e as Je}from"./VCard-f5fa4482.js";import{V as kt}from"./VDialog-cda77fa7.js";import{s as Oe}from"./sortSubmissions-8ed80f07.js";import{u as Nt}from"./useStoreAPI-af58c435.js";import{u as Ft,V as Vt}from"./VToolbar-897496cf.js";import{V as Pt}from"./VSpacer-3f2bd978.js";import{V as Ye,a as $t}from"./VTable-62ea4e9a.js";import"./index-26b71cef.js";import"./VTextarea-4ff7a6a9.js";import"./userData-156fa833.js";import"./VForm-a0bd42d1.js";import"./VToolbarItems-d0a8f08b.js";import"./scopeId-068f1884.js";import"./VDivider-e6eae63b.js";var Ke=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(Ke||{});const wt=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var Re=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(Re||{});const Gt=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var P=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(P||{});const Bt=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var G=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(G||{});const Yt=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],Ht=We({itemsLength:{type:[Number,String],required:!0},...it(),...st(),...ut()},"VDataTableServer"),qt=Qe()({name:"VDataTableServer",props:Ht(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,w)=>!0},setup(e,w){let{emit:c,slots:a}=w;const{groupBy:r}=rt(e),{sortBy:u,multiSort:p,mustSort:I}=dt(e),{page:k,itemsPerPage:h}=mt(e),t=ne(()=>parseInt(e.itemsLength,10)),{columns:E,headers:o}=At(e,{groupBy:r,showSelect:Ue(e,"showSelect"),showExpand:Ue(e,"showExpand")}),{items:L}=_t(e,E),{toggleSort:v}=Ut({sortBy:u,multiSort:p,mustSort:I,page:k}),{opened:Q,isGroupOpen:F,toggleGroup:ee,extractRows:z}=ct({groupBy:r,sortBy:u}),{pageCount:Z,setItemsPerPage:ie}=Tt({page:k,itemsPerPage:h,itemsLength:t}),{flatItems:ue}=Et(L,r,Q),{isSelected:me,select:O,selectAll:T,toggleSelect:d,someSelected:D,allSelected:f}=vt(e,{allItems:L,currentPage:L}),{isExpanded:V,toggleExpand:te}=St(e),ae=ne(()=>z(L.value));Rt({page:k,itemsPerPage:h,sortBy:u,groupBy:r,search:Ue(e,"search")}),Xe("v-data-table",{toggleSort:v,sortBy:u}),Ze({VDataTableRows:{hideNoData:Ue(e,"hideNoData"),noDataText:Ue(e,"noDataText"),loading:Ue(e,"loading"),loadingText:Ue(e,"loadingText")}});const x=ne(()=>({page:k.value,itemsPerPage:h.value,sortBy:u.value,pageCount:Z.value,toggleSort:v,setItemsPerPage:ie,someSelected:D.value,allSelected:f.value,isSelected:me,select:O,selectAll:T,toggleSelect:d,isExpanded:V,toggleExpand:te,isGroupOpen:F,toggleGroup:ee,items:ae.value,groupedItems:ue.value,columns:E.value,headers:o.value}));Ct(()=>{const[Me]=$e.filterProps(e),[ge]=we.filterProps(e),[De]=Ge.filterProps(e),[i]=Ye.filterProps(e);return l(Ye,be({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},i),{top:()=>{var m;return(m=a.top)==null?void 0:m.call(a,x.value)},default:()=>{var m,A,U,W;return a.default?a.default(x.value):l(g,null,[(m=a.colgroup)==null?void 0:m.call(a,x.value),l("thead",{class:"v-data-table__thead",role:"rowgroup"},[l(we,be(ge,{sticky:e.fixedHeader}),a)]),(A=a.thead)==null?void 0:A.call(a,x.value),l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a.body?a.body(x.value):l(Ge,be(De,{items:ue.value}),a)]),(U=a.tbody)==null?void 0:U.call(a,x.value),(W=a.tfoot)==null?void 0:W.call(a,x.value)])},bottom:()=>a.bottom?a.bottom(x.value):l($e,Me,{prepend:a["footer.prepend"]})})})}}),jt=de({__name:"EditAdminLayout",props:pe({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:pe(["save"],["update:modelValue"]),setup(e,{emit:w}){const c=He(e,"modelValue"),a=S(ce(e.layout)),r=S([]),u=ye(),p=({callback:t})=>{const E=()=>{t&&t("Failed to Save Layout")},o=()=>{t&&t("Layout Saved")};u.saveAdminLayout(a.value).then(L=>{L?(o(),w("save",L)):E()}).catch(()=>{E()})},I=()=>({ID:0,LayoutPanelUUID:Se(),AdminLayoutID:a.value.ID,AdminLayoutUUID:a.value.AdminLayoutUUID,Name:"",Order:a.value.Panels.length+1,Items:[],RequiredFormType:se.FORM_TYPE_NIL,RequiredGroupMemberships:[]}),k=t=>()=>({ID:0,LayoutItemUUID:Se(),LayoutPanelID:t.ID,LayoutPanelUUID:t.LayoutPanelUUID,Label:"",SourceType:Re.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:t.Items.length+1,DefaultSort:!1}),h=t=>{const E=r.value.find(o=>o.value===t.SectionFieldUUID);E&&(t.SectionFieldID=E.object.ID,t.SectionField=E.object)};return u.getConventionForms(e.layout.ConventionUUID).then(t=>{t.forEach(E=>E.Sections.forEach(o=>o.Fields&&r.value.push(...o.Fields.map(L=>{var Q;return{title:`${E.Name} - ${o.Name} - ${(Q=L.Field)==null?void 0:Q.Name}`,value:L.SectionFieldUUID,object:L}})))),r.value.sort(tt("title"))}),(t,E)=>(n(),$(je,{modelValue:c.value,"onUpdate:modelValue":E[3]||(E[3]=o=>c.value=o),onSave:p,title:t.title,color:"primary"},{default:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(le,null,{default:s(()=>[l(j,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:a.value.Name,"onUpdate:modelValue":E[0]||(E[0]=o=>a.value.Name=o),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),l(j,{cols:"12",sm:"6"},{default:s(()=>[l(re,{modelValue:a.value.Type,"onUpdate:modelValue":E[1]||(E[1]=o=>a.value.Type=o),label:"Layout Type",items:X(wt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(Be,{modelValue:a.value.Panels,"onUpdate:modelValue":E[2]||(E[2]=o=>a.value.Panels=o),"new-item":I,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Ne({_:2},[H(a.value.Panels,(o,L)=>({name:`panel_${L}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(le,null,{default:s(()=>[l(j,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:o.Name,"onUpdate:modelValue":v=>o.Name=v,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(j,{cols:"12",sm:"6"},{default:s(()=>[l(re,{modelValue:o.RequiredFormType,"onUpdate:modelValue":v=>o.RequiredFormType=v,items:X(nt),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),l(le,null,{default:s(()=>[l(j,{cols:"12"},{default:s(()=>[l(Dt,{label:"Required Groups",variant:"outlined",modelValue:o.RequiredGroupMemberships,"onUpdate:modelValue":v=>o.RequiredGroupMemberships=v,convention:a.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(Be,{modelValue:o.Items,"onUpdate:modelValue":v=>o.Items=v,"new-item":k(o),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Ne({_:2},[H(o.Items,(v,Q)=>({name:`item_${Q}`,fn:s(()=>[l(ve,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[l(le,null,{default:s(()=>[l(j,{cols:"12",sm:"6"},{default:s(()=>[l(Ee,{modelValue:v.Label,"onUpdate:modelValue":F=>v.Label=F,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(le,null,{default:s(()=>[l(j,{cols:"12",sm:"6"},{default:s(()=>[l(re,{modelValue:v.SourceType,"onUpdate:modelValue":F=>v.SourceType=F,label:"Source Type",items:X(Gt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(j,{cols:"12",sm:"6"},{default:s(()=>[v.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(n(),$(re,{key:0,modelValue:v.SectionFieldUUID,"onUpdate:modelValue":F=>v.SectionFieldUUID=F,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:F=>h(v)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):v.SourceType==="LAYOUT_ITEM_SOURCE_META"?(n(),$(re,{key:1,modelValue:v.MetaField,"onUpdate:modelValue":F=>v.MetaField=F,label:"Miscellaneous Data",items:X(Bt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):v.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(n(),$(re,{key:2,modelValue:v.UserField,"onUpdate:modelValue":F=>v.UserField=F,label:"User Profile Data",items:X(Yt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):K("",!0)]),_:2},1024)]),_:2},1024),l(le,null,{default:s(()=>[l(j,null,{default:s(()=>[l(yt,{modelValue:v.DefaultSort,"onUpdate:modelValue":F=>v.DefaultSort=F,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),fe=e=>(typeof e=="string"&&(e=new Date(e)),`${e.toLocaleString("default",{weekday:"long"})} ${e.getDate()}${Jt(e.getDate())} ${e.toLocaleString("default",{month:"long"})}`),Jt=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},Kt=N("br",null,null,-1),zt=N("h3",null,"Assigned Accommodation",-1),Wt=N("br",null,null,-1),Qt=N("br",null,null,-1),Xt=N("h3",null,"Accommodation Preferences",-1),Zt=N("h3",null,"Selected Tickets",-1),xt=N("br",null,null,-1),ea=de({__name:"EditAccommodationAssignmentDialog",props:pe({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:pe(["update:field"],["update:modelValue"]),setup(e,{emit:w}){const c=e,{convention:a,registration:r,title:u=""}=c,p=ye(),I=He(e,"modelValue"),k=S({capacity:{max:O=>{var D;const T=Z.value.find(f=>f.room.RoomUUID===O);return!T||T.room.MaximumCapacity===0?!0:(((D=o.value)==null?void 0:D.Members.length)||0)<=T.room.MaximumCapacity||"Too many people in the group for this room"},min:O=>{var D;const T=Z.value.find(f=>f.room.RoomUUID===O);return!T||T.room.MinimumCapacity===0?!0:(((D=o.value)==null?void 0:D.Members.length)||0)>=T.room.MinimumCapacity||"Not enough people in the group for this room"}}}),h=S([]),t=Mt(c,w,void 0,void 0,"field"),E=S(ce(t.value));Fe(t,()=>{E.value=ce(t.value)});const o=S(),L=S(""),v=S(""),Q=S([]),F=S({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),ee=async()=>{var D;const O=await p.getConventionAvailableAccommodation(a.ConventionUUID);O&&(h.value=O);const T=await p.getRegistrationGroup(r.RegistrationUUID||"");T&&(o.value=T);const d=await p.getConventionTickets(a.ConventionUUID);d&&(Q.value=d);try{F.value=JSON.parse(((D=o.value)==null?void 0:D.TicketData)||"")}catch{}};Fe(L,()=>{v.value=Z.value.length>0?Z.value[0].value:""});const z=ne(()=>{const O=ie.value;return h.value.map(T=>{let d;return O.forEach(D=>{T.Costs.forEach(f=>{f.DateStart===(D==null?void 0:D.DateStart)&&f.DateEnd===D.DateEnd&&(d===void 0||d>f.Availability)&&(d=f.Availability)})}),{label:`${T.Name}`,title:`${T.Name} (${d} Available)`,value:T.AccommodationUUID}})}),Z=ne(()=>{const O=ie.value,T=h.value.find(d=>d.AccommodationUUID===L.value);return(T==null?void 0:T.Pool.map(d=>{var f,V;let D;return O.forEach(te=>{d.Costs.forEach(ae=>{ae.DateStart===(te==null?void 0:te.DateStart)&&ae.DateEnd===te.DateEnd&&(D===void 0||D>ae.Availability)&&(D=ae.Availability)})}),{label:`${(f=d.Venue)==null?void 0:f.Name} - ${d.Name}`,title:`${(V=d.Venue)==null?void 0:V.Name} - ${d.Name} (${D} Available)`,value:d.RoomUUID,room:d}}))||[]}),ie=ne(()=>[...F.value.Ticket,...F.value.AddonsChecked,...F.value.ComponentsChecked].map(O=>Q.value.find(T=>T.TicketUUID===O)).filter(O=>O!==void 0&&O.RequiresAccommodation)),ue=({callback:O})=>{var T;p.assignAccommodation(((T=o.value)==null?void 0:T.Registration.RegistrationUUID)||"",L.value,v.value,!1).then(d=>{d?(ee(),O&&O("Room Assigned")):O&&O("Room not assigned")}).catch(()=>{O&&O("Room not assigned")})},me=O=>{var d,D;const T=(d=h.value.find(f=>f.AccommodationUUID===O.AccommodationUUID))==null?void 0:d.Pool;if(T){const f=T.find(V=>V.RoomUUID===O.RoomUUID);if(f)return`${(D=f.Venue)==null?void 0:D.Name} - ${f.Name}`}return""};return ee(),(O,T)=>(n(),$(je,{modelValue:I.value,"onUpdate:modelValue":T[2]||(T[2]=d=>I.value=d),title:X(u),color:"primary","show-close-action":!0},{default:s(()=>[l(ve,{class:"pa-0",fluid:!0},{default:s(()=>[l(le,null,{default:s(()=>{var d;return[l(j,{cols:"12",md:"6"},{default:s(()=>{var D,f;return[N("h3",null,"Group Members ("+M((D=o.value)==null?void 0:D.Members.length)+")",1),(n(!0),_(g,null,H((f=o.value)==null?void 0:f.Members,V=>(n(),_(g,{key:V.UUID},[Y(" #"+M(V.Reference)+" "+M(V.Name),1),Kt],64))),128))]}),_:1}),(d=o.value)!=null&&d.Registration.Allocation?(n(),$(j,{key:0,cols:"12",md:"6"},{default:s(()=>[zt,l(Le,null,{default:s(()=>{var D;return[(n(!0),_(g,null,H((D=o.value)==null?void 0:D.Registration.Allocation.Periods,f=>(n(),$(ke,{key:f.AllocationPeriodUUID},{default:s(()=>{var V;return[Y(M((V=h.value.find(te=>te.AccommodationUUID===f.AccommodationUUID))==null?void 0:V.Name)+" ",1),Wt,Y(" "+M(me(f))+" ",1),Qt,N("small",null,"("+M(X(fe)(f.DateStart))+" - "+M(X(fe)(f.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):K("",!0)]}),_:1}),l(le,null,{default:s(()=>[l(j,{cols:"12",md:"6"},{default:s(()=>[O.selectedAccommodation.length?(n(),_(g,{key:0},[Xt,l(Le,null,{default:s(()=>[(n(!0),_(g,null,H(O.selectedAccommodation,(d,D)=>(n(),$(ke,{key:d.AccommodationUUID},{default:s(()=>[Y(M(D+1)+". "+M(d.Name),1)]),_:2},1024))),128))]),_:1})],64)):K("",!0)]),_:1}),l(j,{cosl:"12",md:"6"},{default:s(()=>[Zt,l(Le,null,{default:s(()=>[(n(!0),_(g,null,H(ie.value,d=>(n(),$(ke,{key:d==null?void 0:d.TicketUUID},{default:s(()=>[Y(M(d.Name)+" ",1),xt,N("small",null,"("+M(X(fe)(d.DateStart))+" - "+M(X(fe)(d.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),l(le,null,{default:s(()=>[l(j,{cols:"12",md:"6"},{default:s(()=>[l(re,{modelValue:L.value,"onUpdate:modelValue":T[0]||(T[0]=d=>L.value=d),items:z.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),l(j,{cols:"12",md:"6"},{default:s(()=>[l(re,{modelValue:v.value,"onUpdate:modelValue":T[1]||(T[1]=d=>v.value=d),items:Z.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[k.value.capacity.min,k.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),actions:s(()=>[l(gt,{color:"success",onClick:ue,disabled:!v.value,label:"Assign Room"},null,8,["disabled"])]),_:1},8,["modelValue","title"]))}}),ta={key:0,class:"accommodationList"},aa={key:0,class:"text-orange-darken-2"},oa=de({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},registration:{},value:{default:""},venues:{}},setup(e){const w=S(!1),c=ne(()=>{if(!e.value)return[];const a=JSON.parse(e.value),r=e.accommodations.filter(u=>a.includes(u.AccommodationUUID)).sort((u,p)=>{const I=a.findIndex(h=>h===u.AccommodationUUID),k=a.findIndex(h=>h===p.AccommodationUUID);return I>k?1:-1});return ce(r)});return(a,r)=>(n(),_(g,null,[a.value?(n(),_("ol",ta,[(n(!0),_(g,null,H(c.value,u=>(n(),_("li",{key:u.AccommodationUUID},[a.registration&&a.registration.Allocation&&a.registration.Allocation.Periods.find(p=>p.AccommodationUUID===u.AccommodationUUID)?(n(),_("strong",aa,M(u.Name),1)):(n(),_(g,{key:1},[Y(M(u.Name),1)],64))]))),128))])):K("",!0),l(Ce,{onClick:r[0]||(r[0]=u=>w.value=!0),variant:"flat",color:"success"},{default:s(()=>[Y("Assign Accommodation")]),_:1}),a.convention&&w.value?(n(),$(ea,{key:1,modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=u=>w.value=u),title:"Accommodation Allocation",convention:a.convention,registration:a.registration,"selected-accommodation":c.value},null,8,["modelValue","convention","registration","selected-accommodation"])):K("",!0)],64))}});const la=qe(oa,[["__scopeId","data-v-c426aacc"]]),na={key:0,class:"addonList"},ia={key:0},sa={key:0},ua=de({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const w=ne(()=>{if(!e.value)return;const c=JSON.parse(e.value),a=Object.keys(c),r=ce(e.extras);return r.forEach(u=>{u.Options=u.Options.filter(p=>a.includes(p.OptionUUID)?(p.Choices=p.Choices.filter(I=>I.TagUUID===c[p.OptionUUID].choiceId),c[p.OptionUUID].checked):!1)}),r.filter(u=>u.Options.length>0),r});return(c,a)=>c.value?(n(),_("ul",na,[(n(!0),_(g,null,H(w.value,r=>(n(),_(g,{key:r.ExtraUUID},[r.Options.length?(n(),_("li",ia,[N("strong",null,M(r.Name),1),N("ul",null,[(n(!0),_(g,null,H(r.Options,u=>(n(),_("li",{key:u.OptionUUID},[Y(M(u.Name)+" ",1),u.Choices.length==1?(n(),_("small",sa,"("+M(u.Choices[0].Title)+")",1)):K("",!0)]))),128))])])):K("",!0)],64))),128))])):K("",!0)}});const ra=qe(ua,[["__scopeId","data-v-55786e01"]]),da={key:0},ma=de({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const w=ne(()=>{if(!e.value)return;const c=JSON.parse(e.value);return Object.entries(c).filter(([,a])=>a).map(([a,r])=>e.interests.find(u=>u.InterestUUID===a)).filter(a=>a!==void 0)});return(c,a)=>c.value?(n(),_("ul",da,[(n(!0),_(g,null,H(w.value,r=>(n(),_("li",{key:r.InterestUUID},M(r.Name),1))),128))])):K("",!0)}}),Aa=N("br",null,null,-1),_a=N("small",null,"Options:",-1),Ua=N("br",null,null,-1),ca=N("small",null,"Addons:",-1),Ta=de({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const w=ne(()=>{if(!e.value)return;let c={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{c=JSON.parse(e.value),"ticket"in c&&(c.Ticket=c.ticket),"addonsChecked"in c&&(c.AddonsChecked=c.addonsChecked),"componentsChecked"in c&&(c.ComponentsChecked=c.componentsChecked)}catch{}return c.Ticket.filter(a=>{const r=e.tickets.find(u=>u.TicketUUID===a);return!(!r||r.Type!==at.TICKET_TYPE_TICKET)}).map(a=>{const r=e.tickets.find(p=>p.TicketUUID===a),u=ce(r);return u.TicketComponents=r.TicketComponents.filter(p=>c.ComponentsChecked.includes(p.TicketUUID)),u.AddonTickets=r.AddonTickets.filter(p=>c.AddonsChecked.includes(p.TicketUUID)),u})});return(c,a)=>c.value?(n(!0),_(g,{key:0},H(w.value,r=>(n(),_("div",{key:r.TicketUUID},[N("strong",null,M(r.Name),1),r.TicketComponents.length>0?(n(),_(g,{key:0},[Aa,_a,Y("  "),(n(!0),_(g,null,H(r.TicketComponents,u=>(n(),_(g,{key:u.TicketUUID},[N("small",null,M(u.Name),1),Y("  ")],64))),128))],64)):K("",!0),r.AddonTickets.length>0?(n(),_(g,{key:1},[Ua,ca,Y("  "),(n(!0),_(g,null,H(r.AddonTickets,u=>(n(),_("small",{key:u.TicketUUID},[Y("("),N("em",null,M(u.Name),1),Y(")")]))),128))],64)):K("",!0)]))),128)):K("",!0)}}),Ea={key:0},va={key:0},Sa=N("strong",null,"Total:",-1),Ra=de({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},item:{},interests:{},tickets:{},venues:{}},emits:["reload"],setup(e,{emit:w}){const c=ye(),a=S(),r=S(),u=S(),p=S(),I=S(!1),k=t=>{console.log(t)},h=(t,E,o)=>{r.value=t,c.getRegistrationGroup(o.RegistrationUUID||"").then(L=>{u.value=L,a.value=E,p.value=o,I.value=!0})};return(t,E)=>(n(),_(g,null,[t.header.key=="actions"?(n(),$(Ce,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:E[0]||(E[0]=o=>k(t.item.raw))})):t.header.type==="ACCOMMODATION"&&t.accommodations.length>0&&t.item.raw[t.header.key]?(n(),$(la,{key:1,value:t.item.raw[t.header.key].Data,accommodations:t.accommodations,convention:t.convention,venues:t.venues,registration:t.item.raw[t.header.key].Registration},null,8,["value","accommodations","convention","venues","registration"])):t.header.type==="EXTRAS"&&t.extras.length>0?(n(),$(ra,{key:2,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(n(),$(ma,{key:3,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(n(),$(Ta,{key:4,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(n(!0),_(g,{key:5},H(t.item.raw[t.header.key],o=>(n(),_("ul",{key:o.Heading},[N("li",null,[N("strong",null,M(o.Heading)+":",1),Y(" "+M(X(ht)(o.Submission.Status))+" ",1),l(Ce,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:L=>h(o.Registration,o.Form,o.Submission)},null,8,["onClick"])])]))),128)):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(n(),$(bt,{key:6,class:"rounded-circle",src:t.item.raw[t.header.key],height:"32",width:"32"},null,8,["src"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(n(),_(g,{key:7},[t.item.raw[t.header.key].length===1?(n(),_("em",Ea," Not in a group ")):(n(),_(g,{key:1},[N("ul",null,[(n(!0),_(g,null,H(t.item.raw[t.header.key],o=>(n(),_("li",{key:o.UUID,class:"ml-0"},[Y(" #"+M(o.Reference)+" : "+M(o.Name)+" ",1),o.IsLeader?(n(),_("strong",va,"(Leader)")):K("",!0)]))),128))]),Sa,Y(" "+M(t.item.raw[t.header.key].length),1)],64))],64)):(n(),_(g,{key:8},[Y(M(t.item.raw[t.header.key]),1)],64)),I.value&&p.value&&a.value?(n(),$(kt,{key:9,modelValue:I.value,"onUpdate:modelValue":E[3]||(E[3]=o=>I.value=o),scrollable:!0},{default:s(()=>[l(Je,{class:"bg-red-darken-4"},{default:s(()=>[l(Lt,null,{default:s(()=>[l(ot,{modelValue:a.value,"onUpdate:modelValue":E[1]||(E[1]=o=>a.value=o),admin:!0,convention:t.convention,data:p.value,editable:!0,"registration-group":u.value,onClose:E[2]||(E[2]=o=>{I.value=!1,w("reload")})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):K("",!0)],64))}}),Xa=de({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:w}){var De;const c=Nt();w("pageTitle","Registration Manager");const a=xe(),r=et(),u=S(!0);let p=((De=a.params.convention)==null?void 0:De.toString())||"";const I=S({ID:0,ConventionUUID:Se(),OrganisationID:0,OrganisationUUID:Ft,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),k=ye(),h=S({ID:0,AdminLayoutUUID:Se(),ConventionID:I.value.ID,ConventionUUID:I.value.ConventionUUID,Name:"Registration Table",Type:Ke.ADMIN_LAYOUT_TABLE,Panels:[]}),t=S([]),E=S([]),o=S([]),L=S(1),v=S(10),Q=S([]),F=S(0),ee=S(!1),z=S(""),Z=S(""),ie=S(""),ue=S(""),me=S([]),O=S([]),T=S([]),d=S([]),D=S([]),f=S([]),V=S(0);Fe(V,i=>{i===7&&x()});const te=()=>{t.value=[],E.value=[],o.value=[];try{k.getConventionAdminLayoutByName(I.value.ConventionUUID,"Registration Table").then(i=>{V.value+=1,i?h.value=i:(h.value.ConventionID=I.value.ID,h.value.ConventionUUID=I.value.ConventionUUID)})}catch{h.value.ConventionID=I.value.ID,h.value.ConventionUUID=I.value.ConventionUUID}try{k.getConventionForms(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(t.value=i)})}catch{}try{k.getConventionAccommodation(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(O.value=i)})}catch{}try{k.getConventionVenues(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(f.value=i)})}catch{}try{k.getConventionExtras(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(T.value=i)})}catch{}try{k.getConventionInterests(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(d.value=i)})}catch{}try{k.getConventionTickets(I.value.ConventionUUID).then(i=>{V.value+=1,i&&(D.value=i)})}catch{}},ae=({page:i,itemsPerPage:m,sortBy:A})=>{L.value=i,Q.value=A;const U=o.value.find(q=>q.uuid==z.value),W=U==null?void 0:U.layout.Items;let J="",Ve="";if(A&&W&&A.length>=1){const q=W.find(Te=>Te.LayoutItemUUID==A[0].key);switch(Ve=A[0].order,q==null?void 0:q.MetaField){case P.META_DATA_SOURCE_ACCOMMODATION_FORM:J="submission.status";break;case P.META_DATA_SOURCE_BADGE_FORM:J="submission.status";break;case P.META_DATA_SOURCE_DEALER_FORM:J="submission.status";break;case P.META_DATA_SOURCE_REGISTRATION_FORM:J="submission.status";break;case P.META_DATA_SOURCE_REGISTRATION_REFERENCE:J="reference";break;case P.META_DATA_SOURCE_SUBMISSION_DATE:J="created";break;case P.META_DATA_SOURCE_SUBMISSION_STATUS:J="submission.status";break}switch(q==null?void 0:q.UserField){case G.USER_DATA_SOURCE_DISPLAY_NAME:J="user.display_name";break;case G.USER_DATA_SOURCE_EMAIL:J="user.email";break;case G.USER_DATA_SOURCE_FIRST_NAME:J="user.firstname";break;case G.USER_DATA_SOURCE_HANDLE:J="user.handle";break;case G.USER_DATA_SOURCE_LAST_NAME:J="user.lastname";break}}try{const q={Direction:Ve,Limit:m,Offset:(i-1)*m,Order:J};(U==null?void 0:U.layout.RequiredFormType)===se.FORM_TYPE_ACCOMMODATION&&(q.Accommodation=!0),(U==null?void 0:U.layout.RequiredFormType)===se.FORM_TYPE_BADGE&&(q.Badge=!0),(U==null?void 0:U.layout.RequiredFormType)===se.FORM_TYPE_DEALER&&(q.Dealer=!0),(U==null?void 0:U.layout.RequiredFormType)===se.FORM_TYPE_REGISTRATION&&(q.Registration=!0),q.Email=ue.value,q.Reference=ie.value,k.searchConventionRegistrations(I.value.ConventionUUID,q).then(Te=>{Te&&(F.value=Te.Total,E.value=Te.Registrations,o.value.forEach(he=>{const ze=he.layout;he.items=E.value.map(b=>{const B={};return he.headers.forEach(Pe=>{const y=ze.Items.find(Ae=>Ae.LayoutItemUUID===Pe.key);if(y){if(y.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&y.SectionField)b.Submissions.forEach(Ae=>{const oe=Ae.Data.find(Ie=>Ie.SectionFieldUUID===y.SectionFieldUUID);if(oe){Pe.type===lt.ACCOMMODATION?B[y.LayoutItemUUID]={Data:oe.Data,Registration:b}:B[y.LayoutItemUUID]=oe.Data;return}});else if(y.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&y.UserField)switch(y.UserField){case G.USER_DATA_SOURCE_AVATAR:B[y.LayoutItemUUID]=c.GetProfileImageURL(b.UserUUID);break;case G.USER_DATA_SOURCE_DISPLAY_NAME:B[y.LayoutItemUUID]=b.User.DisplayName;break;case G.USER_DATA_SOURCE_EMAIL:B[y.LayoutItemUUID]=b.User.Additional.Email;break;case G.USER_DATA_SOURCE_HANDLE:B[y.LayoutItemUUID]=b.User.Handle;break;case G.USER_DATA_SOURCE_DATE_OF_BIRTH:B[y.LayoutItemUUID]=b.User.Additional.DOB;break;case G.USER_DATA_SOURCE_FIRST_NAME:B[y.LayoutItemUUID]=b.User.Additional.FirstName;break;case G.USER_DATA_SOURCE_LAST_NAME:B[y.LayoutItemUUID]=b.User.Additional.LastName;break;case G.USER_DATA_SOURCE_TELEGRAM:B[y.LayoutItemUUID]="";break}else if(y.SourceType==="LAYOUT_ITEM_SOURCE_META"&&y.MetaField){const Ae=[];let oe;const Ie=b.Submissions.find(R=>{var C;return((C=R.Form)==null?void 0:C.Type)===se.FORM_TYPE_REGISTRATION});switch(y.MetaField){case P.META_DATA_SOURCE_REGISTRATION_GROUP:b.Leader?oe=b:oe=b.Primary,Ae.push({Name:oe.User.DisplayName,UUID:oe.UserUUID,IsLeader:!0,Reference:oe.Reference}),Ae.push(...oe.Members.map(R=>({Name:R.User.DisplayName,UUID:R.UserUUID,IsLeader:!1,Reference:R.Reference}))),B[y.LayoutItemUUID]=Ae;break;case P.META_DATA_SOURCE_REGISTRATION_REFERENCE:B[y.LayoutItemUUID]=b.Reference;break;case P.META_DATA_SOURCE_SUBMISSION_DATE:if(Ie){const R=new Date(Ie.CreatedAt||"");B[y.LayoutItemUUID]=`${R.getFullYear()}-${(R.getMonth()+1).toString().padStart(2,"0")}-${R.getDate().toString().padStart(2,"0")} ${R.getHours().toString().padStart(2,"0")}:${R.getMinutes().toString().padStart(2,"0")}:${R.getSeconds().toString().padStart(2,"0")}`}else{const R=new Date(b.CreatedAt||"");B[y.LayoutItemUUID]=`${R.getFullYear()}-${(R.getMonth()+1).toString().padStart(2,"0")}-${R.getDate().toString().padStart(2,"0")} ${R.getHours().toString().padStart(2,"0")}:${R.getMinutes().toString().padStart(2,"0")}:${R.getSeconds().toString().padStart(2,"0")}`}break;case P.META_DATA_SOURCE_ACCOMMODATION_FORM:Oe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(R=>{const C=t.value.find(_e=>_e.FormUUID===R.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:R,Registration:b}}).filter(R=>{var C;return((C=R.Form)==null?void 0:C.Type)===se.FORM_TYPE_ACCOMMODATION});break;case P.META_DATA_SOURCE_BADGE_FORM:Oe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(R=>{const C=t.value.find(_e=>_e.FormUUID===R.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:R,Registration:b}}).filter(R=>{var C;return((C=R.Form)==null?void 0:C.Type)===se.FORM_TYPE_BADGE});break;case P.META_DATA_SOURCE_DEALER_FORM:Oe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(R=>{const C=t.value.find(_e=>_e.FormUUID===R.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:R,Registration:b}}).filter(R=>{var C;return((C=R.Form)==null?void 0:C.Type)===se.FORM_TYPE_DEALER});break;case P.META_DATA_SOURCE_SUBMISSION_STATUS:Oe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(R=>{const C=t.value.find(_e=>_e.FormUUID===R.FormUUID);return{Heading:C==null?void 0:C.Heading,Form:C,Submission:R,Registration:b}});break}}}}),B})}),u.value=!1)})}catch{}},x=()=>{h.value.Panels.forEach(i=>{i.Items.forEach(m=>{(m.SectionField==null||m.SectionField.Field==null)&&t.value.find(A=>{A.Sections.find(U=>{if(U.Fields){const W=U.Fields.find(J=>J.SectionFieldUUID===m.SectionFieldUUID);if(W)return m.SectionField=W,!0}})})})}),h.value.Panels.length>0&&(o.value=[],h.value.Panels.forEach(i=>{const m={uuid:Se(),order:i.Order,name:i.Name,headers:[],items:[],layout:i};i.Items.sort((A,U)=>A.Order>U.Order?1:A.Order==U.Order?0:-1),m.headers=i.Items.map(A=>{var U,W;return A.DefaultSort&&me.value.push({key:A.LayoutItemUUID,order:"asc"}),{key:A.LayoutItemUUID,title:A.Label||((W=(U=A.SectionField)==null?void 0:U.Field)==null?void 0:W.Label)||"",align:A.Align==="end"?"end":"start",sortable:ge(A),type:Me(A)}}),o.value.push(m)})),(z.value==null||z.value=="")&&o.value.length>0&&(z.value=o.value[0].uuid)};p?k.getConvention(p).then(i=>{i&&(I.value=i,te())}).catch(()=>{r.push("/")}):r.push("/");const Me=i=>{var m,A;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_META)return`${i.SourceType}.${i.MetaField}`;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_FORM)return(A=(m=i.SectionField)==null?void 0:m.Field)==null?void 0:A.Type;if(i.SourceType===Re.LAYOUT_ITEM_SOURCE_USER)return`${i.SourceType}.${i.UserField}`},ge=i=>{const m=[P.META_DATA_SOURCE_ACCOMMODATION_FORM,P.META_DATA_SOURCE_BADGE_FORM,P.META_DATA_SOURCE_DEALER_FORM,P.META_DATA_SOURCE_REGISTRATION_FORM,P.META_DATA_SOURCE_REGISTRATION_REFERENCE,P.META_DATA_SOURCE_SUBMISSION_DATE,P.META_DATA_SOURCE_SUBMISSION_STATUS],A=[G.USER_DATA_SOURCE_DISPLAY_NAME,G.USER_DATA_SOURCE_EMAIL,G.USER_DATA_SOURCE_HANDLE,G.USER_DATA_SOURCE_DATE_OF_BIRTH,G.USER_DATA_SOURCE_FIRST_NAME,G.USER_DATA_SOURCE_LAST_NAME];return m.includes(i.MetaField)||A.includes(i.UserField)};return(i,m)=>(n(),$($t,null,{default:s(()=>[l(Vt,{color:"blue-darken-4"},{default:s(()=>[l(It,{modelValue:z.value,"onUpdate:modelValue":m[0]||(m[0]=A=>z.value=A),"show-arrows":""},{default:s(()=>[(n(!0),_(g,null,H(o.value,A=>(n(),$(Ot,{key:A.uuid,value:A.uuid},{default:s(()=>[Y(M(A.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(Pt),l(Ce,{icon:"mdi:mdi-cog-outline",onClick:m[1]||(m[1]=A=>ee.value=!0)})]),_:1}),l(pt,{modelValue:z.value,"onUpdate:modelValue":m[9]||(m[9]=A=>z.value=A),disabled:!0},{default:s(()=>[(n(!0),_(g,null,H(o.value,A=>(n(),$(ft,{key:A.uuid,value:A.uuid},{default:s(()=>[A.uuid===z.value?(n(),$(Je,{key:0,class:"pa-2"},{default:s(()=>[l(X(qt),{"items-per-page":v.value,"onUpdate:itemsPerPage":m[7]||(m[7]=U=>v.value=U),"sort-by":me.value,"onUpdate:sortBy":m[8]||(m[8]=U=>me.value=U),headers:A.headers,"items-length":F.value,items:A.items,"item-value":"LayoutItemUUID",loading:u.value,search:Z.value,"onUpdate:options":ae},Ne({top:s(()=>[l(ve,null,{default:s(()=>[l(le,null,{default:s(()=>[l(j,null,{default:s(()=>[l(Ee,{modelValue:ie.value,"onUpdate:modelValue":m[2]||(m[2]=U=>ie.value=U),label:"Search by Badge",onInput:m[3]||(m[3]=U=>Z.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),l(j,null,{default:s(()=>[l(Ee,{modelValue:ue.value,"onUpdate:modelValue":m[4]||(m[4]=U=>ue.value=U),label:"Search By Email",onInput:m[5]||(m[5]=U=>Z.value=Date.now().toString())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:2},[H(A.headers,U=>({name:`item.${U.key}`,fn:s(({item:W})=>[l(Ra,{header:U,item:W,accommodations:O.value,convention:I.value,extras:T.value,interests:d.value,tickets:D.value,venues:f.value,onReload:m[6]||(m[6]=J=>ae({page:L.value,itemsPerPage:v.value,sortBy:Q.value}))},null,8,["header","item","accommodations","convention","extras","interests","tickets","venues"])])}))]),1032,["items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):K("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),ee.value?(n(),$(jt,{key:0,title:"Edit Layout",modelValue:ee.value,"onUpdate:modelValue":m[10]||(m[10]=A=>ee.value=A),layout:h.value,onSave:m[11]||(m[11]=A=>{ee.value=!1,x()})},null,8,["modelValue","layout"])):K("",!0)]),_:1}))}});export{Xa as default};
