import{p as Le,r as E,e as re,W as v,y as yl,ao as nl,as as Fe,a5 as ul,n as Be,ah as bl,s as Ce,u as Re,w as ae,E as Je,au as Il,v as s,H as G,x as pe,P as H,aB as Ul,aC as je,I as ye,a0 as te,a1 as be,a8 as Ge,M as i,V as x,X,Q as ee,O as r,a4 as ne,N as k,S as L,K as Te,R as ol,ac as $e,a3 as sl,U as Dl,f as Tl,aD as kl,_ as Vl,ag as ze,a as Cl,aE as Sl,L as El,aF as Qe}from"./index-cd383e18.js";import{F as ie}from"./form-29fd1dbb.js";import{S as wl}from"./submission-6136b51d.js";import{a as _l,V as De,u as Ye,m as Al,b as il,c as Ol,d as Rl}from"./VCheckbox-7d855848.js";import{s as Ee}from"./index-26b71cef.js";import{e as Ml,V as he,a as me,c as Me,d as Se,b as rl}from"./VList-c7217fda.js";import{V as z,a as B}from"./VRow-c0a1c3bf.js";import{m as Ll,u as $l,a as xl,b as Pl,V as qe,c as Fl}from"./copyToClipboard-5f33789b.js";import{q as ql,u as Ke,V as we,A as Nl,j as Bl}from"./VContainer-8685a99a.js";import{d as Gl,_ as Ze}from"./SaveButton.vue_vue_type_script_setup_true_lang-2c03727f.js";import{a as dl}from"./scopeId-7b720ea7.js";import{m as Yl,V as ke,a as Ne,b as Kl,c as Hl}from"./VTextField-ae7a65f9.js";import{V as de}from"./VBtn-c3667f22.js";import{m as Xl,V as el}from"./VAvatar-65db0b77.js";import{V as cl}from"./VForm-93cbdeaa.js";import{V as Wl}from"./VFileInput-5f30efd5.js";import{V as Jl}from"./VTextarea-8cc0aa04.js";import{u as jl,f as zl}from"./forwardRefs-a7644821.js";import{a as Ql}from"./VChip-7a5813fd.js";import{G as Zl}from"./userData-c2f22cc3.js";import{v as xe}from"./v4-a960c1f4.js";import{e as et,V as lt,a as tt,c as at}from"./VCard-d99fad77.js";var se=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(se||{});const ba=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var vl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(vl||{});const Ia=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],_e=e=>{e.sort((g,t)=>(g.Order?g.Order:0)-(t.Order?t.Order:0)),e.forEach((g,t)=>{g.Order=t})},Ua=(e,g)=>{const t=g.indexOf(e);if(t===0)return;const O=e.Order;e.Order=g[t-1].Order,g[t-1].Order=O,_e(g)},Da=(e,g)=>{const t=g.indexOf(e);if(t>=g.length-1)return;const O=e.Order;e.Order=g[t+1].Order,g[t+1].Order=O,_e(g)};const nt=(e,g,t)=>e==null||g==null?-1:e.toString().toLocaleLowerCase().indexOf(g.toString().toLocaleLowerCase()),ut=Le({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ot(e,g,t){var D;const O=[],f=(t==null?void 0:t.default)??nt,p=t!=null&&t.filterKeys?nl(t.filterKeys):!1,S=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return O;e:for(let V=0;V<e.length;V++){const c=e[V],l={},d={};let m=-1;if(g&&!(t!=null&&t.noFilter)){if(typeof c=="object"){const U=p||Object.keys(c);for(const a of U){const u=Fe(c,a,c),o=(D=t==null?void 0:t.customKeyFilter)==null?void 0:D[a];if(m=o?o(u,g,c):f(u,g,c),m!==-1&&m!==!1)o?l[a]=m:d[a]=m;else if((t==null?void 0:t.filterMode)==="every")continue e}}else m=f(c,g,c),m!==-1&&m!==!1&&(d.title=m);const T=Object.keys(d).length,n=Object.keys(l).length;if(!T&&!n||(t==null?void 0:t.filterMode)==="union"&&n!==S&&!T||(t==null?void 0:t.filterMode)==="intersection"&&(n!==S||!T))continue}O.push({index:V,matches:{...d,...l}})}return O}function st(e,g,t,O){const f=E([]),p=E(new Map),S=re(()=>O!=null&&O.transform?v(g).map(O==null?void 0:O.transform):v(g));yl(()=>{const V=typeof t=="function"?t():v(t),c=typeof V!="string"&&typeof V!="number"?"":String(V),l=ot(S.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=v(g),m=[],T=new Map;l.forEach(n=>{let{index:U,matches:a}=n;const u=d[U];m.push(u),T.set(u.value,a)}),f.value=m,p.value=T});function D(V){return p.value.get(V.value)}return{filteredItems:f,filteredMatches:p,getMatches:D}}function it(e,g,t){if(g==null)return e;if(Array.isArray(g))throw new Error("Multiple matches is not implemented");return typeof g=="number"&&~g?s(G,null,[s("span",{class:"v-autocomplete__unmask"},[e.substr(0,g)]),s("span",{class:"v-autocomplete__mask"},[e.substr(g,t)]),s("span",{class:"v-autocomplete__unmask"},[e.substr(g+t)])]):e}const rt=Le({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ll(),...ul(Yl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Xl({transition:!1})},"VAutocomplete"),ll=Be()({name:"VAutocomplete",props:rt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,g){let{slots:t}=g;const{t:O}=bl(),f=E(),p=Ce(!1),S=Ce(!0),D=Ce(!1),V=E(),c=E(),l=Re(e,"menu"),d=re({get:()=>l.value,set:C=>{var Y;l.value&&!C&&((Y=V.value)!=null&&Y.ΨopenChildren)||(l.value=C)}}),m=Ce(-1),T=re(()=>{var C;return(C=f.value)==null?void 0:C.color}),n=re(()=>d.value?e.closeText:e.openText),{items:U,transformIn:a,transformOut:u}=Ml(e),{textColorClasses:o,textColorStyles:A}=ql(T),R=Re(e,"search",""),P=Re(e,"modelValue",[],C=>a(C===null?[null]:nl(C)),C=>{const Y=u(C);return e.multiple?Y:Y[0]??null}),N=jl(),{filteredItems:w,getMatches:b}=st(e,U,()=>S.value?"":R.value),y=re(()=>P.value.map(C=>U.value.find(Y=>{const Q=Fe(Y.raw,e.itemValue),ge=Fe(C.raw,e.itemValue);return Q===void 0||ge===void 0?!1:e.returnObject?e.valueComparator(Q,ge):e.valueComparator(Y.value,C.value)})||C)),h=re(()=>e.hideSelected?w.value.filter(C=>!y.value.some(Y=>Y.value===C.value)):w.value),M=re(()=>y.value.map(C=>C.props.value)),$=re(()=>y.value[m.value]),_=re(()=>{var Y;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&R.value===((Y=h.value[0])==null?void 0:Y.title))&&h.value.length>0&&!S.value&&!D.value}),K=re(()=>e.hideNoData&&!U.value.length||e.readonly||(N==null?void 0:N.isReadonly.value)),W=E(),{onListScroll:J,onListKeydown:I}=$l(W,f);function F(C){e.openOnClear&&(d.value=!0),R.value=""}function fe(){K.value||(d.value=!0)}function q(C){K.value||(p.value&&(C.preventDefault(),C.stopPropagation()),d.value=!d.value)}function ue(C){var ge,j,oe;if(e.readonly||N!=null&&N.isReadonly.value)return;const Y=f.value.selectionStart,Q=M.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(C.key))&&C.preventDefault(),["Enter","ArrowDown"].includes(C.key)&&(d.value=!0),["Escape"].includes(C.key)&&(d.value=!1),_.value&&["Enter","Tab"].includes(C.key)&&Ie(h.value[0]),C.key==="ArrowDown"&&_.value&&((ge=W.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(C.key)){if(m.value<0){C.key==="Backspace"&&!R.value&&(m.value=Q-1);return}const Z=m.value;$.value&&Ie($.value),m.value=Z>=Q-1?Q-2:Z}if(C.key==="ArrowLeft"){if(m.value<0&&Y>0)return;const Z=m.value>-1?m.value-1:Q-1;y.value[Z]?m.value=Z:(m.value=-1,f.value.setSelectionRange((j=R.value)==null?void 0:j.length,(oe=R.value)==null?void 0:oe.length))}if(C.key==="ArrowRight"){if(m.value<0)return;const Z=m.value+1;y.value[Z]?m.value=Z:(m.value=-1,f.value.setSelectionRange(0,0))}}}function le(C){R.value=C.target.value}function He(C){if(je(f.value,":autofill")||je(f.value,":-webkit-autofill")){const Y=U.value.find(Q=>Q.title===C.target.value);Y&&Ie(Y)}}function ml(){var C;p.value&&(S.value=!0,(C=f.value)==null||C.focus())}function fl(C){p.value=!0,setTimeout(()=>{D.value=!0})}function gl(C){D.value=!1}function pl(C){(C==null||C===""&&!e.multiple)&&(P.value=[])}const Ve=Ce(!1);function Ie(C){if(e.multiple){const Y=M.value.findIndex(Q=>e.valueComparator(Q,C.value));if(Y===-1)P.value=[...P.value,C];else{const Q=[...P.value];Q.splice(Y,1),P.value=Q}}else P.value=[C],Ve.value=!0,R.value=C.title,d.value=!1,S.value=!0,Je(()=>Ve.value=!1)}return ae(p,(C,Y)=>{var Q;C!==Y&&(C?(Ve.value=!0,R.value=e.multiple?"":String(((Q=y.value.at(-1))==null?void 0:Q.props.title)??""),S.value=!0,Je(()=>Ve.value=!1)):(!e.multiple&&!R.value?P.value=[]:_.value&&!D.value&&!y.value.some(ge=>{let{value:j}=ge;return j===h.value[0].value})&&Ie(h.value[0]),d.value=!1,R.value="",m.value=-1))}),ae(R,C=>{!p.value||Ve.value||(C&&(d.value=!0),S.value=!C)}),ae(d,()=>{if(!e.hideSelected&&d.value&&y.value.length){const C=h.value.findIndex(Y=>y.value.some(Q=>Y.value===Q.value));Il&&window.requestAnimationFrame(()=>{var Y;C>=0&&((Y=c.value)==null||Y.scrollToIndex(C))})}}),Ke(()=>{const C=!!(e.chips||t.chip),Y=!!(!e.hideNoData||h.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),Q=P.value.length>0,[ge]=ke.filterProps(e);return s(ke,pe({ref:f},ge,{modelValue:R.value,"onUpdate:modelValue":pl,focused:p.value,"onUpdate:focused":j=>p.value=j,validationValue:P.externalValue,dirty:Q,onInput:le,onChange:He,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":m.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:Q?void 0:e.placeholder,"onClick:clear":F,"onMousedown:control":fe,onKeydown:ue}),{...t,default:()=>s(G,null,[s(xl,pe({ref:V,modelValue:d.value,"onUpdate:modelValue":j=>d.value=j,activator:"parent",contentClass:"v-autocomplete__content",disabled:K.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ml},e.menuProps),{default:()=>[Y&&s(he,{ref:W,selected:M.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:I,onFocusin:fl,onFocusout:gl,onScrollPassive:J,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var j,oe,Z;return[(j=t["prepend-item"])==null?void 0:j.call(t),!h.value.length&&!e.hideNoData&&(((oe=t["no-data"])==null?void 0:oe.call(t))??s(me,{title:O(e.noDataText)},null)),s(Pl,{ref:c,renderless:!0,items:h.value},{default:Ue=>{var We;let{item:ce,index:ve,itemRef:hl}=Ue;const Xe=pe(ce.props,{ref:hl,key:ve,active:_.value&&ve===0?!0:void 0,onClick:()=>Ie(ce)});return((We=t.item)==null?void 0:We.call(t,{item:ce,index:ve,props:Xe}))??s(me,Xe,{prepend:Ae=>{let{isSelected:Oe}=Ae;return s(G,null,[e.multiple&&!e.hideSelected?s(_l,{key:ce.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependIcon&&s(we,{icon:ce.props.prependIcon},null)])},title:()=>{var Ae,Oe;return S.value?ce.title:it(ce.title,(Ae=b(ce))==null?void 0:Ae.title,((Oe=R.value)==null?void 0:Oe.length)??0)}})}}),(Z=t["append-item"])==null?void 0:Z.call(t)]}})]}),y.value.map((j,oe)=>{var ce;function Z(ve){ve.stopPropagation(),ve.preventDefault(),Ie(j)}const Ue={"onClick:close":Z,onMousedown(ve){ve.preventDefault(),ve.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:j.value,class:["v-autocomplete__selection",oe===m.value&&["v-autocomplete__selection--selected",o.value]],style:oe===m.value?A.value:{}},[C?t.chip?s(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:j.title}}},{default:()=>{var ve;return[(ve=t.chip)==null?void 0:ve.call(t,{item:j,index:oe,props:Ue})]}}):s(Ql,pe({key:"chip",closable:e.closableChips,size:"small",text:j.title},Ue),null):((ce=t.selection)==null?void 0:ce.call(t,{item:j,index:oe}))??s("span",{class:"v-autocomplete__selection-text"},[j.title,e.multiple&&oe<y.value.length-1&&s("span",{class:"v-autocomplete__selection-comma"},[H(",")])])])})]),"append-inner":function(){var Ue;for(var j=arguments.length,oe=new Array(j),Z=0;Z<j;Z++)oe[Z]=arguments[Z];return s(G,null,[(Ue=t["append-inner"])==null?void 0:Ue.call(t,...oe),e.menuIcon?s(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:q,onClick:Ul,"aria-label":O(n.value),title:O(n.value)},null):void 0])}})}),zl({isFocused:p,isPristine:S,menu:d,search:R,filteredItems:w,select:Ie},f)}}),dt={class:"extrasList"},ct=ye({__name:"Extras",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:g}){const t=e,{admin:O=!1,convention:f,disabled:p=!1}=t,S=be(e,"modelValue"),D=Ge.getInstance(),V=E({});try{V.value=JSON.parse(S.value)}catch{}const c=E([]),l=E([]);ae(t,()=>{m()}),ae(V.value,n=>{for(const U in n)if(n[U].checked){const a=c.value.map(u=>{var o;return(o=u.Options)==null?void 0:o.find(A=>A.OptionUUID===U)});if(a&&a.length>0)try{const u=a[0];n[U].choiceId===""&&u&&u.Choices&&u.Choices.length>0&&(n[U].choiceId=u.Choices[0].TagUUID),n[U].price=u==null?void 0:u.Price}catch{}}else n[U].choiceId="",n[U].price=0;S.value=JSON.stringify(n),T()});const d=re({get:()=>c.value.map(n=>n.ExtraUUID),set:()=>{}}),m=()=>{var U;const n=((U=t.items.find(a=>a.Title==="SelectedExtras"))==null?void 0:U.Value)||"[]";try{const a=JSON.parse(n);c.value=l.value.filter(u=>a.find(o=>o===u.ExtraUUID))||[],d.value=[...c.value.map(u=>u.ExtraUUID)],c.value.forEach(u=>{var o;(o=u.Options)==null||o.forEach(A=>{V.value[A.OptionUUID]||(V.value[A.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in f&&f.Extras.length?(l.value=f.Extras,m()):"ConventionUUID"in f&&(O?D==null||D.getConventionExtras(f.ConventionUUID).then(n=>{n&&(l.value=n,m())}):D==null||D.getAvailableConventionExtras(f.ConventionUUID).then(n=>{n&&(l.value=n,m())}));const T=(n=void 0)=>{setTimeout(()=>g("change",n),100)};return(n,U)=>(i(),x("div",dt,[X("h4",null,ee(n.label),1),s(he,{opened:d.value,"onUpdate:opened":U[0]||(U[0]=a=>d.value=a)},{default:r(()=>[(i(!0),x(G,null,ne(c.value,a=>(i(),k(rl,{key:a.ExtraUUID,value:a.ExtraUUID},{activator:r(({props:u})=>[s(me,pe({"prepend-icon":"mdi:mdi-group","append-icon":""},u),{default:r(()=>[a.Name?(i(),k(Me,{key:0},{default:r(()=>[X("strong",null,ee(a.Name),1)]),_:2},1024)):L("",!0),a.Description?(i(),k(Se,{key:1,class:"mt-2 d-inline"},{default:r(()=>[H(ee(a.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:r(()=>[a.Options?(i(!0),x(G,{key:0},ne(a.Options,u=>(i(),k(me,{key:u.OptionUUID,class:"override-pl"},{default:r(()=>[s(z,null,{default:r(()=>[s(B,{cols:"12",sm:"6"},{default:r(()=>[s(De,{label:`${u.Name} ${u.Price&&u.Price!==0?`(${v(Ee).currencySymbol}${u.Price})`:""}`,modelValue:V.value[u.OptionUUID].checked,"onUpdate:modelValue":o=>V.value[u.OptionUUID].checked=o,disabled:v(p),"hide-details":"",onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),u.Choices&&u.Choices.length>1&&V.value[u.OptionUUID].checked?(i(),k(B,{key:0,cols:"12",sm:"6"},{default:r(()=>[s(qe,{items:u.Choices.sort((o,A)=>o.Title.localeCompare(A.Title)).map(o=>({value:o.TagUUID,title:o.Title})),modelValue:V.value[u.OptionUUID].choiceId,"onUpdate:modelValue":o=>V.value[u.OptionUUID].choiceId=o,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(p),"hide-details":"",onChange:T},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const vt={class:"interestList"},mt=ye({__name:"Interests",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:g}){const t=e,{admin:O=!1,convention:f,disabled:p=!1}=t,S=be(e,"modelValue"),D=Ge.getInstance(),V=E({});try{V.value=JSON.parse(S.value)}catch{}const c=E([]),l=E([]);ae(V.value,n=>{S.value=JSON.stringify(n)});const d=E([]),m=()=>{var U;const n=((U=t.items.find(a=>a.Title==="SelectedInterests"))==null?void 0:U.Value)||"[]";try{const a=JSON.parse(n);c.value=l.value.filter(u=>a.find(o=>o===u.InterestUUID))||[],d.value=[...c.value.map(u=>u.InterestUUID)]}catch{}};"ConventionUUID"in f&&(O?D==null||D.getConventionInterests(f.ConventionUUID).then(n=>{n&&(l.value=n,m())}):D==null||D.getConventionInterests(f.ConventionUUID).then(n=>{n&&(l.value=n,m())})),ae(t,()=>{m()});const T=(n=void 0)=>{setTimeout(()=>g("change",n),100)};return(n,U)=>(i(),x("div",vt,[X("h4",null,ee(n.label),1),s(he,{opened:d.value,"onUpdate:opened":U[0]||(U[0]=a=>d.value=a)},{default:r(()=>[(i(!0),x(G,null,ne(c.value.sort((a,u)=>a.Order>u.Order?1:a.Order==u.Order?0:-1),a=>(i(),k(me,{key:a.InterestUUID},{default:r(()=>[s(z,null,{default:r(()=>[s(B,null,{default:r(()=>[s(De,{label:`${a.Name} ${a.Price&&a.Price>0?`(${v(Ee).currencySymbol}${a.Price})`:""}`,modelValue:V.value[a.InterestUUID],"onUpdate:modelValue":u=>V.value[a.InterestUUID]=u,disabled:v(p),messages:a.Description,onChange:T},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const tl=(e,g,t)=>{if(t>=e.length){let O=t-e.length+1;for(;O--;)e.push(void 0)}e.splice(t,0,e.splice(g,1)[0])},Pe=e=>(_e(e),e),Ta=e=>(g,t)=>g[e]<t[e]?-1:g[e]>t[e]?1:0,ft={class:"ticketList"},gt={key:0,class:"text-orange-darken-1"},pt=ye({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:g}){const t=e,{admin:O=!1,convention:f,disabled:p=!1,registrationGroup:S=void 0}=t,D=be(e,"modelValue"),V=Ge.getInstance(),c=E({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(D.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const l=E([]),d=E([]),m=E([]),T=E({required:(o,A=void 0)=>()=>{if(p||!(S!=null&&S.Registration.Leader))return!0;if(A==null){if(c.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(o&&o.ComponentsRequired>0&&c.value.Ticket.includes(o.TicketUUID||"")){let R=0;if(o.TicketComponents.forEach(P=>{c.value.ComponentsChecked.forEach(N=>{P.TicketUUID===N&&(R+=1)})}),R<o.ComponentsRequired)return`Must select ticket ${o.ComponentsRequired} component${o.ComponentsRequired===1?"":"s"}`}}return!0}}),n=()=>{var A;const o=((A=t.items.find(R=>R.Title==="SelectedTickets"))==null?void 0:A.Value)||"[]";try{const R=JSON.parse(o);l.value=d.value.filter(P=>P.Type==="TICKET_TYPE_GROUP"&&R.find(N=>N===P.TicketUUID))||[],m.value=[...l.value.filter(P=>P.Type==="TICKET_TYPE_GROUP").map(P=>P.TicketUUID)]}catch{}};if("ConventionUUID"in f)if(O)V==null||V.getConventionTickets(f.ConventionUUID).then(o=>{o&&(d.value=o,n())});else{const o=t.items.find(A=>A.Title==="SelectedTickets");o&&(V==null||V.getFieldTickets(o.FieldUUID).then(A=>{A&&(d.value=A,n())}))}ae(t,()=>{n()});const U=o=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const A=[];l.value.forEach(R=>{(c.value.Ticket.includes(R.TicketUUID)||c.value.ComponentsChecked.includes(R.TicketUUID))&&A.push(...R.AddonTickets.map(P=>P.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(R=>A.includes(R)),u(o)},a=o=>{const A=d.value.find(R=>R.TicketUUID===c.value.Ticket[0]);if(A)for(;c.value.ComponentsChecked.length>A.ComponentsRequired;)c.value.ComponentsChecked.shift();u(o)},u=(o=void 0)=>{D.value=JSON.stringify(c.value),setTimeout(()=>g("change",o),100)};try{S!=null&&S.TicketData&&(c.value=JSON.parse(S.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),u())}catch{}return(o,A)=>{var R;return i(),x("div",ft,[X("h4",null,[H(ee(o.label)+" ",1),(R=v(S))!=null&&R.Registration.Leader?L("",!0):(i(),x("small",gt,"(controlled by group leader)"))]),s(he,{opened:m.value,"onUpdate:opened":A[4]||(A[4]=P=>m.value=P)},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(l.value.filter(P=>P.Type===v(vl).TICKET_TYPE_GROUP)),P=>(i(),x(G,{key:P.TicketUUID},[P.Tickets.length>0?(i(),k(rl,{key:0,value:P.TicketUUID},{activator:r(({props:N})=>[s(me,pe(N,{"prepend-icon":"mdi:mdi-group"}),{default:r(()=>[s(Me,null,{default:r(()=>[X("strong",null,ee(P.Name),1)]),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[H(ee(P.Description),1)]),_:2},1024)]),_:2},1040)]),default:r(()=>[(i(!0),x(G,null,ne(P.Tickets,N=>(i(),k(me,{key:N.TicketUUID,class:"override-pl"},{default:r(()=>{var w;return[s(Se,{class:"d-inline"},{default:r(()=>[H(ee(N.Description),1)]),_:2},1024),s(De,{modelValue:c.value.Ticket,"onUpdate:modelValue":A[0]||(A[0]=b=>c.value.Ticket=b),value:N.TicketUUID,onChange:U,rules:[T.value.required(N)],"validate-on":"submit",disabled:v(p)||!((w=v(S))!=null&&w.Registration.Leader)},{label:r(()=>[s(we,{icon:N.RequiresAccommodation?"mdi:mdi-home":N.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+ee(`${N.Name} ${N.Price>0?`(${v(Ee).currencySymbol}${N.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&N.TicketUUID===c.value.Ticket[0]?(i(),x(G,{key:0},[N.AddonTickets.length?(i(),k(he,{key:0},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(N.AddonTickets),b=>(i(),x(G,{key:b==null?void 0:b.TicketUUID},[b?(i(),k(me,{key:0},{default:r(()=>[s(Me,null,{default:r(()=>{var y;return[s(De,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":A[1]||(A[1]=h=>c.value.AddonsChecked=h),value:b.TicketUUID,onChange:A[2]||(A[2]=h=>{c.value.ComponentsChecked=[],u(h)}),disabled:v(p)||!((y=v(S))!=null&&y.Registration.Leader)},{label:r(()=>[s(we,{icon:b.RequiresAccommodation?"mdi:mdi-home-plus":b.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+ee(`${b.Name} ${b.Price>0?`(${v(Ee).currencySymbol}${b.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),s(Se,{class:"d-inline"},{default:r(()=>[H(ee(b.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),N.TicketComponents.length?(i(),k(he,{key:1},{default:r(()=>[(i(!0),x(G,null,ne(v(Pe)(N.TicketComponents),b=>(i(),x(G,{key:b==null?void 0:b.TicketUUID},[b?(i(),k(me,{key:0},{default:r(()=>[s(Me,null,{default:r(()=>{var y;return[s(De,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":A[3]||(A[3]=h=>c.value.ComponentsChecked=h),value:b.TicketUUID,onChange:a,rules:[T.value.required(N,b)],"validate-on":"submit",disabled:v(p)||!((y=v(S))!=null&&y.Registration.Leader)},{label:r(()=>[s(we,{icon:b.RequiresAccommodation?"mdi:mdi-home-plus":b.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),H(" "+ee(`${b.Name} ${b.Price>0?`(${v(Ee).currencySymbol}${b.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),s(Se,null,{default:r(()=>[H(ee(b.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}});const ht={key:0},yt=X("strong",null,"Your Sharing Group",-1),bt={class:"d-flex flex-wrap my-2"},It=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Ut={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Dt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Tt=X("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),kt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Vt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Ct=["href","onClick"],St=X("br",null,null,-1),Et=X("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),wt=X("strong",null,"Your Groups Accommodation",-1),_t=X("br",null,null,-1),At=X("small",null,"(in order of preference, controlled by group leader)",-1),Ot=X("strong",null,"Accommodation Options",-1),Rt=X("br",null,null,-1),Mt=X("strong",null,"Your Chosen Accommodation",-1),Lt=X("small",null,"(in order of preference)",-1),$t=ye({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const t=e,{admin:O=!1,convention:f,disabled:p}=t,S=be(e,"modelValue"),D=Ye(t,g,void 0,void 0,"items"),V=sl(),c=dl(),l=Dl.getInstance(),d=E(Te(S.value)),m=E([]),T=E(),n=E({sharing:!1}),U=()=>{try{const I=JSON.parse(t.data);I&&(n.value=I)}catch{}};U(),ae(t,()=>{U(),t.registrationGroup&&(m.value=t.registrationGroup.Members,T.value=t.registrationGroup.Registration)}),ae(d,I=>{S.value=Te(I)},{deep:!0});const a=E(""),u=E(!1),o=()=>{var I;(I=T.value)!=null&&I.Leader&&V.getRegistrationInvite(f.ConventionUUID).then(F=>{if(F){const fe=new URL(location.href);fe.searchParams.set("token",F),a.value=fe.toString()}})},A=()=>{Fl(a.value),o(),u.value=!0,setTimeout(()=>u.value=!1,2200)},R=(I=void 0)=>{setTimeout(()=>g("change",I),100)},P=E({required:I=>!t.required||I.length>0||"Selections Required"}),N=I=>I?`${I.Reference?`#${I.Reference}`:"(not registered)"} ${I.Name}`:"",w=()=>{var I;l.emit("registration.group.leave",(I=T.value)==null?void 0:I.RegistrationUUID)},b=I=>{l.emit("registration.group.remove.member",I)},y=E([]);ae(D,()=>{h()});const h=()=>{O?V.getConventionAccommodation(f.ConventionUUID).then(I=>{y.value=I.filter(F=>!!(D!=null&&D.value.find(fe=>fe.Value===F.AccommodationUUID)))||[]}):D.value.length>0&&V.getFieldAccommodation(D.value[0].FieldUUID).then(I=>{y.value=I.filter(F=>!!(D!=null&&D.value.find(fe=>fe.Value===F.AccommodationUUID)))||[]})};h(),(()=>{var I;if(t.registrationGroup)if(m.value=t.registrationGroup.Members,T.value=t.registrationGroup.Registration,(I=T.value)!=null&&I.Leader)o();else try{d.value=JSON.parse(t.registrationGroup.AccommodationData),R()}catch{}})();const $=E({column:0,id:""}),_=()=>{!p&&!d.value.includes($.value.id)&&($.value.column===0&&$.value.id!==""&&d.value.push($.value.id),R())},K=()=>{const I=d.value.findIndex(F=>F===$.value.id);!p&&I>=0&&(d.value.splice(I,1),R())},W=()=>{if(p||$.value.column!==1)return;const I=d.value.findIndex(F=>F===$.value.id);I<=0||(tl(d.value,I,I-1),R())},J=()=>{if(p||$.value.column!==1)return;const I=d.value.findIndex(F=>F===$.value.id);I>=d.value.length-1||(tl(d.value,I,I+1),R())};return(I,F)=>{var fe;return i(),x(G,null,[X("h4",null,ee(I.label),1),s(z,null,{default:r(()=>[s(B,{cols:"12"},{default:r(()=>{var q,ue;return[m.value&&T.value&&n.value.sharing?(i(),x("div",ht,[yt,!v(p)&&((q=m.value.find(le=>le.IsLeader))==null?void 0:q.UUID)!==T.value.RegistrationUUID?(i(),k(de,{key:0,color:"red",variant:"text",onClick:w},{default:r(()=>[H("(leave group)")]),_:1})):L("",!0),X("dl",bt,[It,X("dd",Ut,[s(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((ue=m.value.find(le=>le.IsLeader))==null?void 0:ue.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),X("div",Dt,ee(N(m.value.find(le=>le.IsLeader))),1)]),(i(!0),x(G,null,ne(m.value,le=>(i(),x(G,{key:le.UUID},[le.IsLeader?L("",!0):(i(),x(G,{key:0},[Tt,X("dd",kt,[s(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(le.UserUUID),height:"32",width:"32"},null,8,["src"]),X("div",Vt,[H(ee(N(le))+" ",1),T.value.Leader?(i(),k(de,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:He=>b(le.UUID),disabled:v(p)},null,8,["onClick","disabled"])):L("",!0)])])],64))],64))),128))]),s(Gl,{modelValue:u.value,"onUpdate:modelValue":F[0]||(F[0]=le=>u.value=le),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),a.value&&T.value.Leader&&!v(p)?(i(),x(G,{key:1},[X("a",{href:a.value,onClick:ol(A,["prevent"]),class:"text-white text-decoration-none"},[s(de,{color:"blue",class:"mb-2"},{default:r(()=>[H("Get Invite Link")]),_:1})],8,Ct),St,Et],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),T.value&&!T.value.Leader?(i(),k(z,{key:0},{default:r(()=>[s(B,{cols:"10",md:"5"},{default:r(()=>[wt,_t,At,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(d.value.map(q=>y.value.find(ue=>ue.AccommodationUUID==q)).filter(q=>q!==void 0),(q,ue)=>(i(),x(G,null,[q?(i(),k(me,{key:q.AccommodationUUID,title:`${ue+1}. ${q.Name}`,class:$e($.value.column===1&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(i(),k(z,{key:1},{default:r(()=>[s(B,{cols:"12",md:"5"},{default:r(()=>[Ot,Rt,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(y.value,q=>(i(),k(me,{key:q.AccommodationUUID,title:q.Name,class:$e($.value.column===0&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ue=>$.value={column:0,id:q.AccommodationUUID},"append-icon":v(p)?"":"mdi:mdi-gesture-tap",onDblclick:F[1]||(F[1]=ue=>_())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(p)?L("",!0):(i(),k(B,{key:0,cols:"12",md:"1"},{default:r(()=>[s(z,{class:"d-md-none"},{default:r(()=>[s(B,{cols:"12",class:"text-center"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:F[2]||(F[2]=q=>_()),color:"primary",title:"Select"}),H("   "),s(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:F[3]||(F[3]=q=>K()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),s(z,{class:"d-none d-md-flex h-100 align-content-center"},{default:r(()=>[s(B,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-right",size:"small",onClick:F[4]||(F[4]=q=>_()),color:"primary",title:"Select"})]),_:1}),s(B,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-left",size:"small",onClick:F[5]||(F[5]=q=>K()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),s(B,{cols:"10",md:"5"},{default:r(()=>[Mt,s(he,null,{default:r(()=>[(i(!0),x(G,null,ne(d.value.map(q=>y.value.find(ue=>ue.AccommodationUUID==q)).filter(q=>q!==void 0),(q,ue)=>(i(),x(G,null,[q?(i(),k(me,{key:q.AccommodationUUID,title:`${ue+1}. ${q.Name}`,class:$e($.value.column===1&&$.value.id===q.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>$.value={column:1,id:(q==null?void 0:q.AccommodationUUID)||""},"append-icon":v(p)?"":"mdi:mdi-gesture-tap",onDblclick:F[6]||(F[6]=le=>K())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),Lt]),_:1}),v(p)?L("",!0):(i(),k(B,{key:1,cols:"2",md:"1"},{default:r(()=>[s(z,{class:"d-flex h-100 align-content-center mt-3"},{default:r(()=>[s(B,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:F[7]||(F[7]=q=>W()),color:"primary",title:"Higher Priority"})]),_:1}),s(B,{cols:"12"},{default:r(()=>[s(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:F[8]||(F[8]=q=>J()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(fe=T.value)!=null&&fe.Leader?(i(),k(Ne,{key:2,modelValue:S.value,"onUpdate:modelValue":F[9]||(F[9]=q=>S.value=q),disabled:v(p)||!1,"persistent-hint":I.persistentHint||!1,"error-messages":I.errorMessages||"",rules:[P.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):L("",!0)],64)}}});const xt=ye({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const t=e,O=Ye(t,g,void 0,void 0,"items"),f=be(e,"modelValue"),p=E({required:l=>!t.required||!!l||"Required.",min:l=>{var o,A;const d=new Date,m=d.getFullYear(),T=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),n=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),U=((o=O.value.find(R=>R.Title=="MIN_AGE"))==null?void 0:o.Value)||"18",a=((A=O.value.find(R=>R.Title=="BEFORE_DATE"))==null?void 0:A.Value)||`${m}-${T}-${n}`,u=V(a);return D(l,a,parseInt(U))||`You must be at least ${U} years old by ${u.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),S=()=>(g("blur"),!(p.value.min(f.value||"")!==!0||p.value.required(f.value||"")!==!0)),D=(l,d,m)=>{if(l>=d)return!1;const T=V(l),U=V(d).getTime()-T.getTime(),a=1e3*60*60*24*365.25;return U/a>=m},V=l=>{const[d,m,T]=l.split("-");return new Date(parseInt(d),parseInt(m)-1,parseInt(T))},c=(l=void 0)=>{setTimeout(()=>g("change",l),100)};return(l,d)=>(i(),k(ke,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=m=>f.value=m),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[p.value.required,p.value.min],onBlur:S,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Pt={class:"text-center"},Ft={key:0},qt=["src"],Nt=ye({__name:"BadgeImage",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:g}){const t=e,O=be(e,"modelValue"),f=E({}),p=()=>{f.value.left=parseInt(getComputedStyle(l.value).left),f.value.top=parseInt(getComputedStyle(l.value).top),f.value.height=l.value.height,f.value.width=l.value.width,O.value=JSON.stringify(f.value)},S=dl(),D=E(),V=E(!0),c=E(),l=E(),d=E(""),m=E(0),T=E(),n=E({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),U=E(280),a=E(280);t.items.find(_=>{if(_.Title==="TargetWidth")return a.value=parseInt(_.Value,10)||280,!0}),t.items.find(_=>{if(_.Title==="TargetHeight")return U.value=parseInt(_.Value,10)||280,!0});const u=re(()=>({"--preview-width":`${a.value}px`,"--preview-height":`${U.value}px`})),o=E(!1);try{f.value=JSON.parse(O.value||"{}"),f.value.fileUUID&&(d.value=S.GetBadgeImageURL(f.value.fileUUID))}catch{}const A=E({required:_=>!t.required||!!_||"Required.",saved:()=>!V.value||"File not uploaded."}),R=()=>(g("blur"),A.value.required(O.value||"")!==!0),P=(_=void 0)=>{w().then(()=>{N(),setTimeout(()=>g("change",_),100)})},N=()=>{c.value.files.length>0&&(d.value=URL.createObjectURL(c.value.files[0]))},w=async()=>{var K;const _=new FormData((K=D.value)==null?void 0:K.$el);V.value=!1,S.SaveFormFile(_).then(W=>{W.Saved&&(V.value=!0,f.value.fileUUID=W.FileUUID)}).catch(()=>{})},b=()=>{l.value.style.left="0px",l.value.style.top="0px",l.value.width>l.value.height?l.value.width=a.value*(l.value.width/l.value.height):l.value.width=a.value,l.value.classList.remove("d-none"),o.value=!0},y=(_,K=void 0)=>{let W=500;if(!m.value)m.value=Date.now();else{const J=(Date.now()-m.value)/1e3;J>=3.5?W=1:J>=3?W=2:J>=2.5?W=5:J>=2?W=12:J>=1.5?W=25:J>=1?W=50:J>=.5&&(W=100)}switch(K!==W&&(clearInterval(T.value),T.value=setInterval(()=>{y(_,W)},W)),_){case 0:m.value=0,clearInterval(T.value),p();break;case 6:l.value.width-=1;break;case 5:l.value.width+=1;break;case 1:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)-1}px`;break;case 2:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)+1}px`;break;case 3:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)+1}px`;break;case 4:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)-1}px`;break}M()},h=_=>{switch(_.type){case"mousedown":n.value.imageX=parseInt(getComputedStyle(l.value).left),n.value.imageY=parseInt(getComputedStyle(l.value).top),n.value.mouseX=_.clientX,n.value.mouseY=_.clientY,n.value.mouseDown=!0;break;case"mouseup":n.value.mouseDown=!1,p();break;case"mousemove":if(!n.value.mouseDown)return;l.value.style.left=`${n.value.imageX+(_.clientX-n.value.mouseX)}px`,l.value.style.top=`${n.value.imageY+(_.clientY-n.value.mouseY)}px`;break;case"dragstart":_.preventDefault();break;case"keydown":switch(_.key){case"ArrowUp":_.preventDefault(),y(1);break;case"ArrowRight":_.preventDefault(),y(2);break;case"ArrowDown":_.preventDefault(),y(3);break;case"ArrowLeft":_.preventDefault(),y(4);break;case"+":_.preventDefault(),y(5);break;case"-":_.preventDefault(),y(6);break}break;case"keyup":y(0),p();break}M()},M=()=>{if(l.value.width<a.value&&(l.value.width=a.value),l.value.height<U.value){const _=U.value-l.value.height,K=l.value.width/l.value.height;l.value.width+=Math.ceil(_*K)}(parseInt(getComputedStyle(l.value).left)||0)>0&&(l.value.style.left="0px"),(parseInt(getComputedStyle(l.value).top)||0)>0&&(l.value.style.top="0px"),(parseInt(getComputedStyle(l.value).left)||0)<0-(l.value.width-a.value)&&(l.value.style.left=`${0-(l.value.width-a.value)}px`),(parseInt(getComputedStyle(l.value).top)||0)<0-(l.value.height-U.value)&&(l.value.style.top=`${0-(l.value.height-U.value)}px`)},$=()=>{try{clearInterval(T.value)}catch{}n.value.mouseDown=!1,m.value=0,p()};return window.addEventListener("mouseup",$),window.addEventListener("mousemove",h),Tl(()=>{window.removeEventListener("mouseup",$),window.removeEventListener("mousemove",h)}),(_,K)=>(i(),x("div",{style:kl(u.value)},[s(cl,{ref_key:"badgeImageForm",ref:D,enctype:"multipart/form-data"},{default:r(()=>[s(z,null,{default:r(()=>[s(B,null,{default:r(()=>[s(Wl,{label:_.label||"",name:_.name||"",hint:_.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:c,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[A.value.required],"error-messages":_.errorMessages||"","persistent-hint":_.persistentHint||!1,disabled:!V.value||_.disabled||!1,"hide-details":"",onChange:P,onBlur:R},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),X("p",Pt,[V.value?L("",!0):(i(),x("small",Ft,"File Uploading"))])]),_:1})]),_:1}),s(z,null,{default:r(()=>[s(B,{class:"text-center"},{default:r(()=>[H(" Preview "),X("div",{class:"image-preview my-auto mx-auto",onMousemove:h,onMousedown:h,onMouseup:h},[X("img",{src:d.value,ref_key:"imageDisplay",ref:l,alt:"Your badge image",onLoad:b,onDragstart:h,onKeydown:h,onKeyup:h,tabindex:"0",class:"d-none"},null,40,qt)],32)]),_:1})]),_:1}),o.value?(i(),k(z,{key:0,class:"my-auto mx-auto",style:{"max-width":"280px"}},{default:r(()=>[s(B,null,{default:r(()=>[s(de,{icon:"mdi:mdi-plus",color:"primary",onMousedown:K[0]||(K[0]=W=>y(5)),onMouseup:K[1]||(K[1]=W=>y(0))})]),_:1}),s(B,{class:"text-right"},{default:r(()=>[s(de,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:K[2]||(K[2]=W=>y(6)),onMouseup:K[3]||(K[3]=W=>y(0))})]),_:1})]),_:1})):L("",!0)]),_:1},512)],4))}});const Bt=Vl(Nt,[["__scopeId","data-v-7957366b"]]),Gt=Le({...Al({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Yt=Be()({name:"VRadio",props:Gt(),setup(e,g){let{slots:t}=g;return Ke(()=>s(il,pe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}});const Kt=Le({height:{type:[Number,String],default:"auto"},...Kl(),...ul(Ol(),["multiple"]),trueIcon:{type:ze,default:"$radioOn"},falseIcon:{type:ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ht=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Kt(),emits:{"update:modelValue":e=>!0},setup(e,g){let{attrs:t,slots:O}=g;const f=Cl(),p=re(()=>e.id||`radio-group-${f}`),S=Re(e,"modelValue");return Ke(()=>{const[D,V]=Sl(t),[c,l]=Ne.filterProps(e),[d,m]=il.filterProps(e),T=O.label?O.label({label:e.label,props:{for:p.value}}):e.label;return s(Ne,pe({class:["v-radio-group",e.class],style:e.style},D,c,{modelValue:S.value,"onUpdate:modelValue":n=>S.value=n,id:p.value}),{...O,default:n=>{let{id:U,messagesId:a,isDisabled:u,isReadonly:o}=n;return s(G,null,[T&&s(Hl,{id:U.value},{default:()=>[T]}),s(Rl,pe(d,{id:U.value,"aria-describedby":a.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:u.value,readonly:o.value,"aria-labelledby":T?U.value:void 0,multiple:!1},V,{modelValue:S.value,"onUpdate:modelValue":A=>S.value=A}),O)])}})}),{}}}),al=ye({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:g}){const t=e,{admin:O=!1,disabled:f=!1,persistentHint:p=!1,required:S=!1}=t,D=E(""),V=be(e,"modelValue"),c=Ye(t,g,void 0,void 0,"field"),l=E(Te(c.value)),d=E({maxlength:a=>!t.maxLength||a.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${a.length})`,minlength:a=>!t.minLength||a.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${a.length})`,required:a=>!t.required||!!a.replace(/\s/g,"")||"Required field."}),m=E(!1),T=E([]),n=E("");try{const a=JSON.parse(V.value);Array.isArray(a)?T.value=a:typeof a=="boolean"?m.value=a:n.value=V.value}catch{m.value=!1,T.value=[],n.value=V.value}ae(m,()=>{V.value=JSON.stringify(m.value),g("input"),g("change")}),ae(T,()=>{V.value=JSON.stringify(T.value),g("input"),g("change")},{deep:!0}),ae(n,()=>{V.value=n.value,g("input"),g("change")}),ae(c.value,()=>{l.value.Type!==c.value.Type?(l.value=Te(c.value),m.value=!1,T.value=[],n.value=""):l.value=Te(c.value)});const U=(a=void 0)=>{g("change",a)};return(a,u)=>l.value.Type===v(se).TEXT?(i(),k(ke,{key:0,modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=o=>n.value=o),name:a.name||"",hint:l.value.Hint,label:`${l.value.Label}${v(S)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).DATE?(i(),k(ke,{key:1,modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=o=>n.value=o),type:"date",name:a.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).NUMBER?(i(),k(ke,{key:2,modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=o=>n.value=o),type:"number",name:a.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).TEXTAREA?(i(),k(Jl,{key:3,modelValue:n.value,"onUpdate:modelValue":u[3]||(u[3]=o=>n.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:U,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).CHECKBOX?(i(),x(G,{key:4},[l.value.Multiple?(i(!0),x(G,{key:0},ne(l.value.Values,o=>(i(),k(De,{key:o.ID,modelValue:T.value,"onUpdate:modelValue":u[4]||(u[4]=A=>T.value=A),name:a.name||"",hint:l.value.Hint,label:o.Title,value:o.Value,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,rules:[d.value.required],onChange:U},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(i(),k(De,{key:1,modelValue:m.value,"onUpdate:modelValue":u[5]||(u[5]=o=>m.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,required:v(S),rules:[o=>!v(S)||!!o||"You must tick to continue!"],onChange:U},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===v(se).SELECT?(i(),x(G,{key:5},[!l.value.Autofill&&l.value.Multiple?(i(),k(qe,{key:0,modelValue:T.value,"onUpdate:modelValue":u[6]||(u[6]=o=>T.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(i(),k(ll,{key:1,modelValue:T.value,"onUpdate:modelValue":u[7]||(u[7]=o=>T.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(i(),k(ll,{key:3,modelValue:n.value,"onUpdate:modelValue":u[9]||(u[9]=o=>n.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(i(),k(qe,{key:2,modelValue:n.value,"onUpdate:modelValue":u[8]||(u[8]=o=>n.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(f)||!1,"persistent-hint":v(p)||!1,"error-messages":D.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===v(se).RADIO?(i(),k(Ht,{key:6,modelValue:n.value,"onUpdate:modelValue":u[10]||(u[10]=o=>n.value=o),name:a.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,rules:[d.value.required],onChange:U},{default:r(()=>[(i(!0),x(G,null,ne(l.value.Values,o=>(i(),k(Yt,{key:o.Value,label:o.Title,value:o.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).ACCOMMODATION?(i(),k($t,{key:7,modelValue:T.value,"onUpdate:modelValue":u[11]||(u[11]=o=>T.value=o),name:a.name,admin:v(O),convention:a.convention,"registration-group":a.registrationGroup,data:a.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).AGE?(i(),k(xt,{key:8,modelValue:n.value,"onUpdate:modelValue":u[12]||(u[12]=o=>n.value=o),name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,onChange:U},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).BADGE_IMAGE?(i(),k(Bt,{key:9,modelValue:n.value,"onUpdate:modelValue":u[13]||(u[13]=o=>n.value=o),name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,onChange:U},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).EXTRAS?(i(),k(ct,{key:10,modelValue:n.value,"onUpdate:modelValue":u[14]||(u[14]=o=>n.value=o),admin:v(O),convention:a.convention,name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).INTERESTS?(i(),k(mt,{key:11,modelValue:n.value,"onUpdate:modelValue":u[15]||(u[15]=o=>n.value=o),admin:v(O),convention:a.convention,name:a.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).TICKET?(i(),k(pt,{key:12,modelValue:n.value,"onUpdate:modelValue":u[16]||(u[16]=o=>n.value=o),admin:v(O),convention:a.convention,name:a.name,"registration-group":a.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(f)||!1,"persistent-hint":v(p),"error-messages":D.value,required:v(S),onChange:U},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):L("",!0)}}),Xt={key:0,class:"my-2 text-white text-center"},Wt={key:1,class:"admin-header my-2 text-white text-center"},Jt=["innerHTML"],jt=["innerHTML"],ka=ye({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:te(["close"],["update:modelValue"]),setup(e,{emit:g}){const t=be(e,"modelValue");_e(t.value.Sections),t.value.Sections.forEach(w=>{w.Fields&&_e(w.Fields)});const O=E(),f=Zl(),p=sl(),S=E(!1),D=E(!1),V=E(!1),c=E(!1),l=E(!1),d=E(!1),m=E(!1),T=E(!1),n=E(!1),U=E(!1),a=E(!1),u=E((()=>{if(e.data!==void 0){const b=Te(e.data);return t.value.Sections.forEach(y=>{y.Fields&&y.Fields.forEach(h=>{const M=e.data.Data.find($=>$.SectionFieldUUID===h.SectionFieldUUID&&$.SectionFieldUUID==h.SectionFieldUUID);if(M)h.Value=M.Data;else{const $={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:y.ID,SectionUUID:y.SectionUUID,SectionFieldID:h.ID,SectionFieldUUID:h.SectionFieldUUID,Data:h.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};b.Data.push($),h.Value=""}})}),b}const w={ID:0,SubmissionUUID:xe(),FormID:t.value.ID,FormUUID:t.value.FormUUID,UserID:(f==null?void 0:f.ID)||0,UserUUID:(f==null?void 0:f.UserUUID)||"",Data:[],Status:wl.SUBMISSION_STATUS_OPEN};return w.Data=t.value.Sections.map(b=>b.Fields?b.Fields.map(y=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:w.ID,SubmissionUUID:w.SubmissionUUID,SectionID:b.ID,SectionUUID:b.SectionUUID,SectionFieldID:y.ID,SectionFieldUUID:y.SectionFieldUUID,Data:""})):[]).flat(),w})()),o=(w,b,y)=>{const h=u.value.Data.find(M=>M.SectionUUID===w&&M.SectionFieldUUID===b);h&&(h.Data=y)},A=(w,b,y,h,M)=>w&&w.Type===ie.FORM_TYPE_REGISTRATION?b?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:y?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:h?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_ACCOMMODATION?y?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:h?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_DEALER?h?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_BADGE?M?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(w&&w.Type===ie.FORM_TYPE_ADDITIONAL,"/"),R=({callback:w})=>{p.getRegistrationByConvention(e.convention.ConventionUUID).then(b=>{w&&w("Loading"),p.getAvailableConventionForms(e.convention.ConventionUUID).then(y=>{b.Submissions.forEach((J,I)=>{J.Form||(b.Submissions[I].Form=y.find(F=>F.FormUUID===J.FormUUID))});const h=b.Submissions.find(J=>J.FormUUID===u.value.FormUUID),M=b.Submissions.find(J=>{var I;return((I=J.Form)==null?void 0:I.Type)===ie.FORM_TYPE_ACCOMMODATION}),$=b.Submissions.find(J=>{var I;return((I=J.Form)==null?void 0:I.Type)===ie.FORM_TYPE_ADDITIONAL}),_=b.Submissions.find(J=>{var I;return((I=J.Form)==null?void 0:I.Type)===ie.FORM_TYPE_DEALER}),K=b.Submissions.find(J=>{var I;return((I=J.Form)==null?void 0:I.Type)===ie.FORM_TYPE_BADGE}),W=A(h==null?void 0:h.Form,M==null?void 0:M.Form,_==null?void 0:_.Form,K==null?void 0:K.Form,$==null?void 0:$.Form);Qe.push(W)})})},P=({callback:w})=>{var b;(b=O.value)==null||b.validate().then(y=>{y.valid?p.saveSubmission(u.value).then(h=>{h?setTimeout(()=>{N(h,w,1)},1e3):w&&w("Failed to process request")}).catch(()=>{w&&w("Failed to process request")}):w&&w("Errors in form detected, please review and try again.")})},N=(w,b,y=1)=>{p.checkSubmission(w).then(h=>{if(h)if(h.Ready&&h.Submission){if(S.value=!1,u.value=h.Submission,b&&b("Saved"),e.admin)g("close");else if(h.Forms&&h.Forms.length>0){const M=h.Forms.find(I=>I.FormUUID===u.value.FormUUID),$=h.Forms.find(I=>I.Type===ie.FORM_TYPE_ACCOMMODATION),_=h.Forms.find(I=>I.Type===ie.FORM_TYPE_DEALER),K=h.Forms.find(I=>I.Type===ie.FORM_TYPE_BADGE),W=h.Forms.find(I=>I.Type===ie.FORM_TYPE_ADDITIONAL),J=A(M,$,_,K,W);Qe.push(J)}}else{if(y>5&&(S.value=!0),y>10&&(D.value=!0),y>20&&(V.value=!0),y>30&&(c.value=!0),y>40&&(l.value=!0),y>50&&(d.value=!0),y>60&&(m.value=!0),y>70&&(T.value=!0),y>80&&(n.value=!0),y>90&&(U.value=!0),y>100&&(a.value=!0),y>200){b&&(S.value=!1,D.value=!1,V.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,n.value=!1,U.value=!1,a.value=!1,b("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{N(w,b,y+1)},y<20?1e3*y:2e4)}else b&&(S.value=!1,D.value=!1,V.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,n.value=!1,U.value=!1,a.value=!1,b("A problem was encountered during saving, please check form and try again."))}).catch(()=>{b&&(S.value=!1,D.value=!1,V.value=!1,c.value=!1,l.value=!1,d.value=!1,m.value=!1,T.value=!1,n.value=!1,U.value=!1,a.value=!1,b("A problem was encountered during saving, please check form and try again."))})};return(w,b)=>{const y=El("router-link");return i(),k(Bl,null,{default:r(()=>[s(cl,{ref_key:"formValidator",ref:O,autocomplete:"off",onSubmit:b[1]||(b[1]=ol(()=>{},["prevent"]))},{default:r(()=>[t.value.Heading?(i(),x("h1",Xt,ee(t.value.Heading),1)):L("",!0),w.admin?(i(),x("h2",Wt," (Admin Mode) ")):L("",!0),t.value.Description?(i(),x("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:t.value.Description},null,8,Jt)):L("",!0),(i(!0),x(G,null,ne(t.value.Sections,h=>(i(),k(et,{key:`section_${t.value.ID}.${h.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:r(()=>[h.Heading?(i(),k(lt,{key:0},{default:r(()=>[H(ee(h.Heading),1)]),_:2},1024)):L("",!0),h.Description?(i(),k(tt,{key:1,class:"text-wrap"},{default:r(()=>[X("div",{innerHTML:h.Description},null,8,jt)]),_:2},1024)):L("",!0),h.Fields?(i(),k(at,{key:2},{default:r(()=>[(i(!0),x(G,null,ne(h.Fields,M=>(i(),x(G,{key:`field_${t.value.ID}.${h.ID}.${M.ID}`},[M.Field?(i(),k(z,{key:0},{default:r(()=>[s(B,null,{default:r(()=>[w.editable?(i(),k(al,{key:0,name:M.SectionFieldUUID,field:M.Field,modelValue:M.Value,"onUpdate:modelValue":$=>M.Value=$,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:M.Required,"min-length":M.MinLength,"max-length":M.MaxLength,"persistent-hint":!0,onChange:$=>o(h.SectionUUID,M.SectionFieldUUID,M.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(i(),k(al,{key:1,name:M.SectionFieldUUID,field:M.Field,modelValue:M.Value,"onUpdate:modelValue":$=>M.Value=$,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:M.Required,"min-length":M.MinLength,"max-length":M.MaxLength,"persistent-hint":!0,disabled:"",onChange:$=>o(h.SectionUUID,M.SectionFieldUUID,M.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),w.preview?L("",!0):(i(),x(G,{key:3},[s(z,null,{default:r(()=>[w.admin?(i(),k(B,{key:1,class:"text-right"},{default:r(()=>[s(de,{color:"red",onClick:b[0]||(b[0]=h=>g("close"))},{default:r(()=>[H("Cancel")]),_:1})]),_:1})):(i(),k(B,{key:0,class:"text-right"},{default:r(()=>[s(y,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:r(()=>[s(de,{color:"red"},{default:r(()=>[H("Close")]),_:1})]),_:1})]),_:1})),w.admin||w.editable?(i(),k(B,{key:2,class:"text-left"},{default:r(()=>[s(Ze,{onClick:P,type:"submit"})]),_:1})):(i(),k(B,{key:3,class:"text-left"},{default:r(()=>[s(Ze,{onClick:R,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),S.value?(i(),k(z,{key:0},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),D.value?(i(),k(z,{key:1},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),V.value?(i(),k(z,{key:2},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):L("",!0),c.value?(i(),k(z,{key:3},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Reticulating splines ")]),_:1})]),_:1})):L("",!0),l.value?(i(),k(z,{key:4},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):L("",!0),d.value?(i(),k(z,{key:5},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):L("",!0),m.value?(i(),k(z,{key:6},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):L("",!0),T.value?(i(),k(z,{key:7},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Let's have a race, see if you can inflate a Puffy Paws pool toy by mouth before we finish. ")]),_:1})]),_:1})):L("",!0),n.value?(i(),k(z,{key:8},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):L("",!0),U.value?(i(),k(z,{key:9},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):L("",!0),a.value?(i(),k(z,{key:10},{default:r(()=>[s(B,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:r(()=>[H(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{ba as F,vl as T,ll as V,al as _,Da as a,Ia as b,se as c,ka as d,Ta as e,ut as f,Ua as m,_e as s,st as u};
