import{I as V,r as O,e as D,w as z,J as L,K as t,L as n,M as o,v as p,Q as u,N as i,O as T,U as b,R as s,Z as P,H as S,S as f,$,_ as x}from"./index-4f5d8caf.js";import{G}from"./userData-74c9686e.js";import{_ as B}from"./LoginView.vue_vue_type_script_setup_true_lang-3f9e1c9e.js";import{s as h}from"./index-26b71cef.js";import{F as _}from"./form-29fd1dbb.js";import{S as H}from"./submission-56c4c4f1.js";import{u as j}from"./useStoreAPI-deac32fc.js";import{c as E}from"./canEditForm-52ba80b9.js";import{s as J}from"./sortSubmissions-8ed80f07.js";import{V as K}from"./VAvatar-810dec4f.js";import{V as Q,a as Z,b as q,c as W,d as X,e as ee}from"./VCard-a7b6884d.js";import{V as d}from"./VBtn-f35f5ea5.js";import{V as te}from"./VSpacer-e507c4fe.js";import{V as oe,a as ne}from"./VRow-23fcc6e5.js";import{j as ae}from"./VContainer-31f0b3d6.js";import"./emailFormVariant-e5e0aad4.js";import"./LoginButton-5238cf56.js";const re=["innerHTML"],ie={key:0,class:"font-weight-bold float-left pt-1 w-50"},se={key:1,class:"pa-1"},le={key:0,class:"font-weight-bold float-left pt-1 w-50"},ue={key:1},ce=V({__name:"OpenConvention",props:{convention:{},forms:{default:()=>[]}},setup(l){const v=j(),g=$(),y=O(v.GetConventionLogoURL(l.convention.ConventionUUID)),a=O(),c=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_REGISTRATION)}),C=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_DEALER)}),A=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_ACCOMMODATION)}),Y=D(()=>{var e;return E(l.forms,((e=a.value)==null?void 0:e.Submissions)||[],_.FORM_TYPE_ADDITIONAL)});return z(()=>l.forms,()=>{g.getRegistrationByConvention(l.convention.ConventionUUID).then(e=>{e&&(e.Submissions?(e.Submissions.forEach((w,k)=>{w.Form||(e.Submissions[k].Form=l.forms.find(U=>U.FormUUID===w.FormUUID))}),J(e.Submissions)):e.Submissions=[],a.value=e)})}),(e,w)=>{const k=L("router-link"),U=L("RouterLink");return t(),n(ee,{class:"elevation-5 flex-1-0 d-flex flex-column"},{default:o(()=>[p(q,{class:"flex-1-1 align-content-start"},{default:o(()=>[y.value?(t(),n(K,{key:0,src:y.value,title:e.convention.Name,class:"logo text-center"},null,8,["src","title"])):u("",!0),e.convention.Name?(t(),n(Q,{key:1,class:"text-center"},{default:o(()=>[i(T(e.convention.Name),1)]),_:1})):u("",!0),e.convention.Description?(t(),n(Z,{key:2,class:"text-wrap text-black subtitle"},{default:o(()=>[b("div",{innerHTML:e.convention.Description},null,8,re)]),_:1})):u("",!0)]),_:1}),p(W,null,{default:o(()=>{var F;return[b("dl",null,[a.value&&a.value.Reference?(t(),s("dt",ie," Badge No: ")):u("",!0),a.value&&a.value.Reference?(t(),s("dd",se," #"+T(a.value.Reference),1)):u("",!0),(t(!0),s(S,null,P((F=a.value)==null?void 0:F.Submissions,r=>{var I,R,M,N;return t(),s(S,{key:r.SubmissionUUID},[r.Form?(t(),s(S,{key:0},[r.Form?(t(),s("dt",le,T(r.Form.Heading),1)):u("",!0),r.Form?(t(),s("dd",ue,[i(T(f(H)(r.Status))+" ",1),((I=r.Form)==null?void 0:I.Type)===f(_).FORM_TYPE_REGISTRATION?(t(),n(k,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/registration`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&c.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((R=r.Form)==null?void 0:R.Type)===f(_).FORM_TYPE_ACCOMMODATION?(t(),n(k,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&A.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((M=r.Form)==null?void 0:M.Type)===f(_).FORM_TYPE_DEALER?(t(),n(k,{key:2,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&C.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):((N=r.Form)==null?void 0:N.Type)===f(_).FORM_TYPE_ADDITIONAL?(t(),n(k,{key:3,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`},{default:o(()=>{var m;return[(m=r.Form)!=null&&m.State.Edit&&Y.value?(t(),n(d,{key:0,size:"small",variant:"text",color:"success"},{default:o(()=>[i(" Edit ")]),_:1})):(t(),n(d,{key:1,size:"small",variant:"text",color:"warning"},{default:o(()=>[i("View")]),_:1}))]}),_:2},1032,["to"])):u("",!0)])):u("",!0)],64)):u("",!0)],64)}),128))])]}),_:1}),p(X,null,{default:o(()=>{var F,r;return[e.convention.DetailLink?(t(),n(d,{key:0,color:"orange",href:e.convention.DetailLink},{default:o(()=>[i(T(f(h).buttonDetails),1)]),_:1},8,["href"])):u("",!0),p(te),c.value?(t(),s(S,{key:1},[(F=a.value)!=null&&F.Submissions.find(I=>{var R;return((R=I.Form)==null?void 0:R.Type)===f(_).FORM_TYPE_REGISTRATION})?(t(),n(U,{key:1,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(T(f(h).buttonViewRegistration),1)]),_:1})]),_:1},8,["to"])):(t(),s(S,{key:0},[(r=e.forms.find(I=>I.Type===f(_).FORM_TYPE_REGISTRATION))!=null&&r.State.New?(t(),n(U,{key:0,to:`/register/${e.convention.Slug||e.convention.ConventionUUID}`},{default:o(()=>[p(d,{color:"primary"},{default:o(()=>[i(T(f(h).buttonRegister),1)]),_:1})]),_:1},8,["to"])):u("",!0)],64))],64)):u("",!0)]}),_:1})]),_:1})}}});const me=x(ce,[["__scopeId","data-v-dce42484"]]),de=V({__name:"Conventions",setup(l){const v=$(),g=O([]),y=O([]);return v.getOpenConventionsList().then(a=>{a&&(g.value=[...g.value,...a],v.getAvailableConventionForms(g.value.map(c=>c.ConventionUUID)).then(c=>{y.value=[...y.value,...c]}).catch(c=>{console.error(c)}))}),(a,c)=>(t(),n(ae,null,{default:o(()=>[p(ne,{class:"justify-center"},{default:o(()=>[(t(!0),s(S,null,P(g.value,C=>(t(),n(oe,{key:C.ConventionUUID,cols:"12",sm:"11",md:"11",lg:"8",xl:"6",class:"d-flex flex-column"},{default:o(()=>[p(me,{convention:C,forms:y.value.filter(A=>A.ConventionUUID===C.ConventionUUID)},null,8,["convention","forms"])]),_:2},1024))),128))]),_:1})]),_:1}))}}),fe={};function ve(l,v){return t(),s("div")}const _e=x(fe,[["render",ve]]),pe=V({__name:"MainView",emits:["pageTitle"],setup(l,{emit:v}){return v("pageTitle","Scotiacon Registration System"),sessionStorage.getItem("reload")==="true"&&(sessionStorage.removeItem("reload"),setTimeout(()=>{location.reload()},500)),(y,a)=>(t(),s(S,null,[p(de),p(_e)],64))}}),Me=V({__name:"Home",emits:["pageTitle"],setup(l,{emit:v}){const g=G();return v("pageTitle","Telegram Login"),(y,a)=>(t(),s("div",null,[f(g)?(t(),n(pe,{key:0,onPageTitle:a[0]||(a[0]=c=>v("pageTitle",c))})):(t(),n(B,{key:1}))]))}});export{Me as default};
