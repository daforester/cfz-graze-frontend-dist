import{p as et,n as tt,e as oe,t as ce,c as at,G as ot,v as o,H as h,x as Fe,I as me,a2 as Ce,a3 as ze,r as v,J as Te,L as n,M as $,N as s,a0 as Me,V as Z,a8 as Pe,$ as W,R as X,w as ye,W as F,P as M,U as c,O as J,_ as Ke,a4 as lt,a1 as nt}from"./index-2206dc63.js";import{e as it,T as st,d as ut,c as rt}from"./FormRenderer.vue_vue_type_style_index_0_lang-bca8efae.js";import{a as dt,F as ne}from"./form-29fd1dbb.js";import{_ as Xe}from"./ModelDialog.vue_vue_type_script_setup_true_lang-b9d9203b.js";import{m as mt,j as At,k as Ut,l as _t,n as ct,o as Tt,p as vt,u as Et,q as St,r as Rt,s as Dt,t as It,v as Ot,w as ft,x as pt,y as Ye,z as He,A as qe,_ as Ct,e as je,f as yt,g as gt,h as Mt,i as ht}from"./VWindowItem-e9db4740.js";import{a as ae,V as j}from"./VRow-6445de4b.js";import{V as Ee}from"./VTextField-d9e76137.js";import{V as ie}from"./copyToClipboard-b28e21b6.js";import{u as Lt,j as Se}from"./VContainer-1434f350.js";import{V as bt,u as Nt}from"./VCheckbox-9e6e1eef.js";import{v as Re}from"./v4-a960c1f4.js";import{V as ke,a as Ve}from"./VList-dfb47257.js";import{V as ge}from"./VBtn-adb1822a.js";import{S as Ft}from"./submission-830079be.js";import{V as kt}from"./VAvatar-a14c10cd.js";import{c as Vt,e as Qe}from"./VCard-ad59744c.js";import{V as Pt}from"./VDialog-34c0b76b.js";import{s as fe}from"./sortSubmissions-8ed80f07.js";import{V as $t,u as wt}from"./VSpacer-aa77d192.js";import{u as Je,V as Gt}from"./VToolbar-c0a384fa.js";import{V as We,a as Bt}from"./VTable-a104dd7b.js";import"./index-26b71cef.js";import"./VChip-3747b833.js";import"./scopeId-833146e8.js";import"./VTextarea-4ec7eeb6.js";import"./userData-8310a3bc.js";import"./VForm-01ab41f6.js";import"./VToolbarItems-e69e4f91.js";import"./VDivider-a9ef3d7b.js";var Ze=(e=>(e.ADMIN_LAYOUT_PANELS="ADMIN_LAYOUT_PANELS",e.ADMIN_LAYOUT_TABLE="ADMIN_LAYOUT_TABLE",e))(Ze||{});const Yt=[{title:"Panel Layout",value:"ADMIN_LAYOUT_PANELS"},{title:"Table Layout",value:"ADMIN_LAYOUT_TABLE"}];var De=(e=>(e.LAYOUT_ITEM_SOURCE_FORM="LAYOUT_ITEM_SOURCE_FORM",e.LAYOUT_ITEM_SOURCE_META="LAYOUT_ITEM_SOURCE_META",e.LAYOUT_ITEM_SOURCE_USER="LAYOUT_ITEM_SOURCE_USER",e))(De||{});const Ht=[{title:"Form Field Submission Data",value:"LAYOUT_ITEM_SOURCE_FORM"},{title:"Miscellaneous Data",value:"LAYOUT_ITEM_SOURCE_META"},{title:"User Profile Data",value:"LAYOUT_ITEM_SOURCE_USER"}];var P=(e=>(e.META_DATA_SOURCE_ACCOMMODATION_ALLOCATION="META_DATA_SOURCE_ACCOMMODATION_ALLOCATION",e.META_DATA_SOURCE_ACCOMMODATION_FORM="META_DATA_SOURCE_ACCOMMODATION_FORM",e.META_DATA_SOURCE_BADGE_FORM="META_DATA_SOURCE_BADGE_FORM",e.META_DATA_SOURCE_DEALER_FORM="META_DATA_SOURCE_DEALER_FORM",e.META_DATA_SOURCE_REGISTRATION_FORM="META_DATA_SOURCE_REGISTRATION_FORM",e.META_DATA_SOURCE_REGISTRATION_GROUP="META_DATA_SOURCE_REGISTRATION_GROUP",e.META_DATA_SOURCE_REGISTRATION_REFERENCE="META_DATA_SOURCE_REGISTRATION_REFERENCE",e.META_DATA_SOURCE_SUBMISSION_DATE="META_DATA_SOURCE_SUBMISSION_DATE",e.META_DATA_SOURCE_SUBMISSION_STATUS="META_DATA_SOURCE_SUBMISSION_STATUS",e))(P||{});const qt=[{title:"Accommodation Allocation",value:"META_DATA_SOURCE_ACCOMMODATION_ALLOCATION"},{title:"Accommodation Form",value:"META_DATA_SOURCE_ACCOMMODATION_FORM"},{title:"Badge Form",value:"META_DATA_SOURCE_BADGE_FORM"},{title:"Dealer Form",value:"META_DATA_SOURCE_DEALER_FORM"},{title:"Registration Group",value:"META_DATA_SOURCE_REGISTRATION_GROUP"},{title:"Registration Reference",value:"META_DATA_SOURCE_REGISTRATION_REFERENCE"},{title:"Registration Form",value:"META_DATA_SOURCE_REGISTRATION_FORM"},{title:"Submission Date",value:"META_DATA_SOURCE_SUBMISSION_DATE"},{title:"Submission Status",value:"META_DATA_SOURCE_SUBMISSION_STATUS"}];var G=(e=>(e.USER_DATA_SOURCE_NULL="",e.USER_DATA_SOURCE_DISPLAY_NAME="USER_DATA_SOURCE_DISPLAY_NAME",e.USER_DATA_SOURCE_HANDLE="USER_DATA_SOURCE_HANDLE",e.USER_DATA_SOURCE_AVATAR="USER_DATA_SOURCE_AVATAR",e.USER_DATA_SOURCE_FIRST_NAME="USER_DATA_SOURCE_FIRST_NAME",e.USER_DATA_SOURCE_LAST_NAME="USER_DATA_SOURCE_LAST_NAME",e.USER_DATA_SOURCE_DATE_OF_BIRTH="USER_DATA_SOURCE_DATE_OF_BIRTH",e.USER_DATA_SOURCE_EMAIL="USER_DATA_SOURCE_EMAIL",e.USER_DATA_SOURCE_TELEGRAM="USER_DATA_SOURCE_TELEGRAM",e))(G||{});const jt=[{title:"Display Name",value:"USER_DATA_SOURCE_DISPLAY_NAME"},{title:"Handle",value:"USER_DATA_SOURCE_HANDLE"},{title:"Avatar",value:"USER_DATA_SOURCE_AVATAR"},{title:"First Name",value:"USER_DATA_SOURCE_FIRST_NAME"},{title:"Last Name",value:"USER_DATA_SOURCE_LAST_NAME"},{title:"Date of Birth",value:"USER_DATA_SOURCE_DATE_OF_BIRTH"},{title:"Email Address",value:"USER_DATA_SOURCE_EMAIL"},{title:"Telegram Username",value:"USER_DATA_SOURCE_TELEGRAM"}],Jt=et({itemsLength:{type:[Number,String],required:!0},...mt(),...At(),...Ut()},"VDataTableServer"),Wt=tt()({name:"VDataTableServer",props:Jt(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0,"click:row":(e,w)=>!0},setup(e,w){let{emit:E,slots:a}=w;const{groupBy:r}=_t(e),{sortBy:u,multiSort:f,mustSort:O}=ct(e),{page:N,itemsPerPage:L}=Tt(e),t=oe(()=>parseInt(e.itemsLength,10)),{columns:R,headers:l}=vt(e,{groupBy:r,showSelect:ce(e,"showSelect"),showExpand:ce(e,"showExpand")}),{items:p}=Et(e,R),{toggleSort:D}=St({sortBy:u,multiSort:f,mustSort:O,page:N}),{opened:Q,isGroupOpen:k,toggleGroup:se,extractRows:le}=Rt({groupBy:r,sortBy:u}),{pageCount:z,setItemsPerPage:ee}=Dt({page:N,itemsPerPage:L,itemsLength:t}),{flatItems:ue}=It(p,r,Q),{isSelected:Ae,select:re,selectAll:U,toggleSelect:_,someSelected:I,allSelected:d}=Ot(e,{allItems:p,currentPage:p}),{isExpanded:C,toggleExpand:Y}=ft(e),V=oe(()=>le(p.value));pt({page:N,itemsPerPage:L,sortBy:u,groupBy:r,search:ce(e,"search")}),at("v-data-table",{toggleSort:D,sortBy:u}),ot({VDataTableRows:{hideNoData:ce(e,"hideNoData"),noDataText:ce(e,"noDataText"),loading:ce(e,"loading"),loadingText:ce(e,"loadingText")}});const H=oe(()=>({page:N.value,itemsPerPage:L.value,sortBy:u.value,pageCount:z.value,toggleSort:D,setItemsPerPage:ee,someSelected:I.value,allSelected:d.value,isSelected:Ae,select:re,selectAll:U,toggleSelect:_,isExpanded:C,toggleExpand:Y,isGroupOpen:k,toggleGroup:se,items:V.value,groupedItems:ue.value,columns:R.value,headers:l.value}));Lt(()=>{const[Ie]=Ye.filterProps(e),[Oe]=He.filterProps(e),[he]=qe.filterProps(e),[Le]=We.filterProps(e);return o(We,Fe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Le),{top:()=>{var de;return(de=a.top)==null?void 0:de.call(a,H.value)},default:()=>{var de,i,A,m;return a.default?a.default(H.value):o(h,null,[(de=a.colgroup)==null?void 0:de.call(a,H.value),o("thead",{class:"v-data-table__thead",role:"rowgroup"},[o(He,Fe(Oe,{sticky:e.fixedHeader}),a)]),(i=a.thead)==null?void 0:i.call(a,H.value),o("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[a.body?a.body(H.value):o(qe,Fe(he,{items:ue.value}),a)]),(A=a.tbody)==null?void 0:A.call(a,H.value),(m=a.tfoot)==null?void 0:m.call(a,H.value)])},bottom:()=>a.bottom?a.bottom(H.value):o(Ye,Ie,{prepend:a["footer.prepend"]})})})}}),zt=me({__name:"EditAdminLayout",props:Ce({title:{default:""},layout:{}},{modelValue:{type:Boolean,required:!0}}),emits:Ce(["save"],["update:modelValue"]),setup(e,{emit:w}){const E=ze(e,"modelValue"),a=v(Te(e.layout)),r=v([]),u=Me(),f=({callback:t})=>{const R=()=>{t&&t("Failed to Save Layout")},l=()=>{t&&t("Layout Saved")};u.saveAdminLayout(a.value).then(p=>{p?(l(),w("save",p)):R()}).catch(()=>{R()})},O=()=>({ID:0,LayoutPanelUUID:Re(),AdminLayoutID:a.value.ID,AdminLayoutUUID:a.value.AdminLayoutUUID,Name:"",Order:a.value.Panels.length+1,Items:[],RequiredFormType:ne.FORM_TYPE_NIL,RequiredGroupMemberships:[]}),N=t=>()=>({ID:0,LayoutItemUUID:Re(),LayoutPanelID:t.ID,LayoutPanelUUID:t.LayoutPanelUUID,Label:"",SourceType:De.LAYOUT_ITEM_SOURCE_FORM,SectionFieldID:void 0,SectionFieldUUID:void 0,SectionField:void 0,MetaField:void 0,UserField:void 0,Align:"",Order:t.Items.length+1,DefaultSort:!1}),L=t=>{const R=r.value.find(l=>l.value===t.SectionFieldUUID);R&&(t.SectionFieldID=R.object.ID,t.SectionField=R.object)};return u.getConventionForms(e.layout.ConventionUUID).then(t=>{t.forEach(R=>R.Sections.forEach(l=>l.Fields&&r.value.push(...l.Fields.map(p=>{var Q;return{title:`${R.Name} - ${l.Name} - ${(Q=p.Field)==null?void 0:Q.Name}`,value:p.SectionFieldUUID,object:p}})))),r.value.sort(it("title"))}),(t,R)=>(n(),$(Xe,{modelValue:E.value,"onUpdate:modelValue":R[3]||(R[3]=l=>E.value=l),onSave:f,title:t.title,color:"primary"},{default:s(()=>[o(Se,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[o(ae,null,{default:s(()=>[o(j,{cols:"12",sm:"6"},{default:s(()=>[o(Ee,{modelValue:a.value.Name,"onUpdate:modelValue":R[0]||(R[0]=l=>a.value.Name=l),label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(j,{cols:"12",sm:"6"},{default:s(()=>[o(ie,{modelValue:a.value.Type,"onUpdate:modelValue":R[1]||(R[1]=l=>a.value.Type=l),label:"Layout Type",items:Z(Yt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),o(je,{modelValue:a.value.Panels,"onUpdate:modelValue":R[2]||(R[2]=l=>a.value.Panels=l),"new-item":O,closeable:!1,title:"Panels",label:"Name","slot-name-prefix":"panel"},Pe({_:2},[W(a.value.Panels,(l,p)=>({name:`panel_${p}`,fn:s(()=>[o(Se,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[o(ae,null,{default:s(()=>[o(j,{cols:"12",sm:"6"},{default:s(()=>[o(Ee,{modelValue:l.Name,"onUpdate:modelValue":D=>l.Name=D,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(j,{cols:"12",sm:"6"},{default:s(()=>[o(ie,{modelValue:l.RequiredFormType,"onUpdate:modelValue":D=>l.RequiredFormType=D,items:Z(dt),clearable:!0,label:"Required Form",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),o(ae,null,{default:s(()=>[o(j,{cols:"12"},{default:s(()=>[o(Ct,{label:"Required Groups",variant:"outlined",modelValue:l.RequiredGroupMemberships,"onUpdate:modelValue":D=>l.RequiredGroupMemberships=D,convention:a.value.ConventionUUID,chips:"",clearable:"",hint:"Groups that a user must be in to see this form. (Any one)"},null,8,["modelValue","onUpdate:modelValue","convention"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(je,{modelValue:l.Items,"onUpdate:modelValue":D=>l.Items=D,"new-item":N(l),closeable:!1,title:"Items",label:"Label","slot-name-prefix":"item"},Pe({_:2},[W(l.Items,(D,Q)=>({name:`item_${Q}`,fn:s(()=>[o(Se,{class:"px-0 mx-0",fluid:!0},{default:s(()=>[o(ae,null,{default:s(()=>[o(j,{cols:"12",sm:"6"},{default:s(()=>[o(Ee,{modelValue:D.Label,"onUpdate:modelValue":k=>D.Label=k,label:"Name",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),o(ae,null,{default:s(()=>[o(j,{cols:"12",sm:"6"},{default:s(()=>[o(ie,{modelValue:D.SourceType,"onUpdate:modelValue":k=>D.SourceType=k,label:"Source Type",items:Z(Ht),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),o(j,{cols:"12",sm:"6"},{default:s(()=>[D.SourceType==="LAYOUT_ITEM_SOURCE_FORM"?(n(),$(ie,{key:0,modelValue:D.SectionFieldUUID,"onUpdate:modelValue":k=>D.SectionFieldUUID=k,label:"Form Data",items:r.value,"item-title":"title","item-value":"value",variant:"outlined","hide-details":"",onBlur:k=>L(D)},null,8,["modelValue","onUpdate:modelValue","items","onBlur"])):D.SourceType==="LAYOUT_ITEM_SOURCE_META"?(n(),$(ie,{key:1,modelValue:D.MetaField,"onUpdate:modelValue":k=>D.MetaField=k,label:"Miscellaneous Data",items:Z(qt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):D.SourceType==="LAYOUT_ITEM_SOURCE_USER"?(n(),$(ie,{key:2,modelValue:D.UserField,"onUpdate:modelValue":k=>D.UserField=k,label:"User Profile Data",items:Z(jt),"item-title":"title","item-value":"value",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items"])):X("",!0)]),_:2},1024)]),_:2},1024),o(ae,null,{default:s(()=>[o(j,null,{default:s(()=>[o(bt,{modelValue:D.DefaultSort,"onUpdate:modelValue":k=>D.DefaultSort=k,label:"Default Sort","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])}))]),1032,["modelValue","onUpdate:modelValue","new-item"])])}))]),1032,["modelValue"])]),_:1},8,["modelValue","title"]))}}),pe=e=>(typeof e=="string"&&(e=new Date(e)),`${e.toLocaleString("default",{weekday:"long"})} ${e.getDate()}${Kt(e.getDate())} ${e.toLocaleString("default",{month:"long"})}`),Kt=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},Xt=F("br",null,null,-1),Qt=F("h3",null,"Assigned Accommodation",-1),Zt=F("br",null,null,-1),xt=F("br",null,null,-1),ea=F("h3",null,"Accommodation Preferences",-1),ta=F("h3",null,"Selected Tickets",-1),aa=F("br",null,null,-1),oa=me({__name:"EditAccommodationAssignmentDialog",props:Ce({convention:{},registration:{},selectedAccommodation:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:Ce(["update:field"],["update:modelValue"]),setup(e,{emit:w}){const E=e,{convention:a,registration:r,title:u=""}=E,f=Me(),O=ze(e,"modelValue"),N=v({capacity:{max:U=>{var d;const _=z.value.find(C=>C.room.RoomUUID===U);return!_||_.room.MaximumCapacity===0?!0:(((d=l.value)==null?void 0:d.Members.length)||0)<=_.room.MaximumCapacity||"Too many people in the group for this room"},min:U=>{var d;const _=z.value.find(C=>C.room.RoomUUID===U);return!_||_.room.MinimumCapacity===0?!0:(((d=l.value)==null?void 0:d.Members.length)||0)>=_.room.MinimumCapacity||"Not enough people in the group for this room"}}}),L=v([]),t=Nt(E,w,void 0,void 0,"field"),R=v(Te(t.value));ye(t,()=>{R.value=Te(t.value)});const l=v(),p=v(""),D=v(""),Q=v([]),k=v({Ticket:[],AddonsChecked:[],ComponentsChecked:[]}),se=async()=>{var d;const U=await f.getConventionAvailableAccommodation(a.ConventionUUID);U&&(L.value=U);const _=await f.getRegistrationGroup(r.RegistrationUUID||"");_&&(l.value=_);const I=await f.getConventionTickets(a.ConventionUUID);I&&(Q.value=I);try{k.value=JSON.parse(((d=l.value)==null?void 0:d.TicketData)||"")}catch{}};ye(p,()=>{D.value=z.value.length>0?z.value[0].value:""});const le=oe(()=>{const U=ee.value;return L.value.map(_=>{let I;return U.forEach(d=>{_.Costs.forEach(C=>{C.DateStart===(d==null?void 0:d.DateStart)&&C.DateEnd===d.DateEnd&&(I===void 0||I>C.Availability)&&(I=C.Availability)})}),{label:`${_.Name}`,title:`${_.Name} (${I} Available)`,value:_.AccommodationUUID}})}),z=oe(()=>{const U=ee.value,_=L.value.find(I=>I.AccommodationUUID===p.value);return(_==null?void 0:_.Pool.map(I=>{var C,Y;let d;return U.forEach(V=>{I.Costs.forEach(H=>{H.DateStart===(V==null?void 0:V.DateStart)&&H.DateEnd===V.DateEnd&&(d===void 0||d>H.Availability)&&(d=H.Availability)})}),{label:`${(C=I.Venue)==null?void 0:C.Name} - ${I.Name}`,title:`${(Y=I.Venue)==null?void 0:Y.Name} - ${I.Name} (${d} Available)`,value:I.RoomUUID,room:I}}))||[]}),ee=oe(()=>[...k.value.Ticket,...k.value.AddonsChecked,...k.value.ComponentsChecked].map(U=>Q.value.find(_=>_.TicketUUID===U)).filter(U=>U!==void 0&&U.RequiresAccommodation)),ue=U=>{var _;f.assignAccommodation(((_=l.value)==null?void 0:_.Registration.RegistrationUUID)||"",p.value,D.value,!1).then(I=>{I?(se(),U&&U("Room Assigned")):U&&U("Room not assigned")}).catch(()=>{U&&U("Room not assigned")})},Ae=U=>{var _,I;(_=l.value)!=null&&_.Registration.AllocationUUID?f.deleteAllocation(((I=l.value)==null?void 0:I.Registration.AllocationUUID)||"").then(d=>{d?(se(),U&&U("Allocation Deleted")):U&&U("Allocation not deleted")}).catch(()=>{U&&U("Allocation not deleted")}):U&&U("Nothing to Delete")},re=U=>{var I,d;const _=(I=L.value.find(C=>C.AccommodationUUID===U.AccommodationUUID))==null?void 0:I.Pool;if(_){const C=_.find(Y=>Y.RoomUUID===U.RoomUUID);if(C)return`${(d=C.Venue)==null?void 0:d.Name} - ${C.Name}`}return""};return se(),(U,_)=>{var I;return n(),$(Xe,{modelValue:O.value,"onUpdate:modelValue":_[2]||(_[2]=d=>O.value=d),title:Z(u),color:"primary","show-close-action":!0,"show-delete-action":!!((I=l.value)!=null&&I.Registration.Allocation),"show-save-action":!!D.value,"save-button-label":"Assign Room",onDelete:Ae,onSave:ue},{default:s(()=>[o(Se,{class:"pa-0",fluid:!0},{default:s(()=>[o(ae,null,{default:s(()=>{var d;return[o(j,{cols:"12",md:"6"},{default:s(()=>{var C,Y;return[F("h3",null,"Group Members ("+M((C=l.value)==null?void 0:C.Members.length)+")",1),(n(!0),c(h,null,W((Y=l.value)==null?void 0:Y.Members,V=>(n(),c(h,{key:V.UUID},[J(" #"+M(V.Reference)+" "+M(V.Name),1),Xt],64))),128))]}),_:1}),(d=l.value)!=null&&d.Registration.Allocation?(n(),$(j,{key:0,cols:"12",md:"6"},{default:s(()=>[Qt,o(ke,null,{default:s(()=>{var C;return[(n(!0),c(h,null,W((C=l.value)==null?void 0:C.Registration.Allocation.Periods,Y=>(n(),$(Ve,{key:Y.AllocationPeriodUUID},{default:s(()=>{var V;return[J(M((V=L.value.find(H=>H.AccommodationUUID===Y.AccommodationUUID))==null?void 0:V.Name)+" ",1),Zt,J(" "+M(re(Y))+" ",1),xt,F("small",null,"("+M(Z(pe)(Y.DateStart))+" - "+M(Z(pe)(Y.DateEnd))+")",1)]}),_:2},1024))),128))]}),_:1})]),_:1})):X("",!0)]}),_:1}),o(ae,null,{default:s(()=>[o(j,{cols:"12",md:"6"},{default:s(()=>[U.selectedAccommodation.length?(n(),c(h,{key:0},[ea,o(ke,null,{default:s(()=>[(n(!0),c(h,null,W(U.selectedAccommodation,(d,C)=>(n(),$(Ve,{key:d.AccommodationUUID},{default:s(()=>[J(M(C+1)+". "+M(d.Name),1)]),_:2},1024))),128))]),_:1})],64)):X("",!0)]),_:1}),o(j,{cosl:"12",md:"6"},{default:s(()=>[ta,o(ke,null,{default:s(()=>[(n(!0),c(h,null,W(ee.value,d=>(n(),$(Ve,{key:d==null?void 0:d.TicketUUID},{default:s(()=>[J(M(d.Name)+" ",1),aa,F("small",null,"("+M(Z(pe)(d.DateStart))+" - "+M(Z(pe)(d.DateEnd))+")",1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),o(ae,null,{default:s(()=>[o(j,{cols:"12",md:"6"},{default:s(()=>[o(ie,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=d=>p.value=d),items:le.value,"item-title":"title","item-value":"value",label:"Accommodation"},null,8,["modelValue","items"])]),_:1}),o(j,{cols:"12",md:"6"},{default:s(()=>[o(ie,{modelValue:D.value,"onUpdate:modelValue":_[1]||(_[1]=d=>D.value=d),items:z.value,"item-title":"title","item-value":"value",label:"Room Pool",rules:[N.value.capacity.min,N.value.capacity.max]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title","show-delete-action","show-save-action"])}}}),la={key:0,class:"accommodationList"},na={key:0,class:"text-orange-darken-2"},ia=me({__name:"DataTableItemAccommodation",props:{accommodations:{default:()=>[]},convention:{},registration:{},value:{default:""},venues:{}},setup(e){const w=v(!1),E=oe(()=>{if(!e.value)return[];const a=JSON.parse(e.value),r=e.accommodations.filter(u=>a.includes(u.AccommodationUUID)).sort((u,f)=>{const O=a.findIndex(L=>L===u.AccommodationUUID),N=a.findIndex(L=>L===f.AccommodationUUID);return O>N?1:-1});return Te(r)});return(a,r)=>(n(),c(h,null,[a.value?(n(),c("ol",la,[(n(!0),c(h,null,W(E.value,u=>(n(),c("li",{key:u.AccommodationUUID},[a.registration&&a.registration.Allocation&&a.registration.Allocation.Periods.find(f=>f.AccommodationUUID===u.AccommodationUUID)?(n(),c("strong",na,M(u.Name),1)):(n(),c(h,{key:1},[J(M(u.Name),1)],64))]))),128))])):X("",!0),o(ge,{onClick:r[0]||(r[0]=u=>w.value=!0),variant:"flat",color:"success"},{default:s(()=>[J("Assign Accommodation")]),_:1}),a.convention&&w.value?(n(),$(oa,{key:1,modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=u=>w.value=u),title:"Accommodation Allocation",convention:a.convention,registration:a.registration,"selected-accommodation":E.value},null,8,["modelValue","convention","registration","selected-accommodation"])):X("",!0)],64))}});const sa=Ke(ia,[["__scopeId","data-v-c426aacc"]]),ua={key:0,class:"addonList"},ra={key:0},da={key:0},ma=me({__name:"DataTableItemExtras",props:{extras:{default:()=>[]},value:{default:""}},setup(e){const w=oe(()=>{if(!e.value)return;const E=JSON.parse(e.value),a=Object.keys(E),r=Te(e.extras);return r.forEach(u=>{u.Options=u.Options.filter(f=>a.includes(f.OptionUUID)?(f.Choices=f.Choices.filter(O=>O.TagUUID===E[f.OptionUUID].choiceId),E[f.OptionUUID].checked):!1)}),r.filter(u=>u.Options.length>0),r});return(E,a)=>E.value?(n(),c("ul",ua,[(n(!0),c(h,null,W(w.value,r=>(n(),c(h,{key:r.ExtraUUID},[r.Options.length?(n(),c("li",ra,[F("strong",null,M(r.Name),1),F("ul",null,[(n(!0),c(h,null,W(r.Options,u=>(n(),c("li",{key:u.OptionUUID},[J(M(u.Name)+" ",1),u.Choices.length==1?(n(),c("small",da,"("+M(u.Choices[0].Title)+")",1)):X("",!0)]))),128))])])):X("",!0)],64))),128))])):X("",!0)}});const Aa=Ke(ma,[["__scopeId","data-v-55786e01"]]),Ua={key:0},_a=me({__name:"DataTableItemInterests",props:{interests:{default:()=>[]},value:{default:""}},setup(e){const w=oe(()=>{if(!e.value)return;const E=JSON.parse(e.value);return Object.entries(E).filter(([,a])=>a).map(([a,r])=>e.interests.find(u=>u.InterestUUID===a)).filter(a=>a!==void 0)});return(E,a)=>E.value?(n(),c("ul",Ua,[(n(!0),c(h,null,W(w.value,r=>(n(),c("li",{key:r.InterestUUID},M(r.Name),1))),128))])):X("",!0)}}),ca=F("br",null,null,-1),Ta=F("small",null,"Options:",-1),va=F("br",null,null,-1),Ea=F("small",null,"Addons:",-1),Sa=me({__name:"DataTableItemTicket",props:{tickets:{default:()=>[]},value:{default:""}},setup(e){const w=oe(()=>{if(!e.value)return;let E={Ticket:[],AddonsChecked:[],ComponentsChecked:[]};try{E=JSON.parse(e.value),"ticket"in E&&(E.Ticket=E.ticket),"addonsChecked"in E&&(E.AddonsChecked=E.addonsChecked),"componentsChecked"in E&&(E.ComponentsChecked=E.componentsChecked)}catch{}return E.Ticket.filter(a=>{const r=e.tickets.find(u=>u.TicketUUID===a);return!(!r||r.Type!==st.TICKET_TYPE_TICKET)}).map(a=>{const r=e.tickets.find(f=>f.TicketUUID===a),u=Te(r);return u.TicketComponents=r.TicketComponents.filter(f=>E.ComponentsChecked.includes(f.TicketUUID)),u.AddonTickets=r.AddonTickets.filter(f=>E.AddonsChecked.includes(f.TicketUUID)),u})});return(E,a)=>E.value?(n(!0),c(h,{key:0},W(w.value,r=>(n(),c("div",{key:r.TicketUUID},[F("strong",null,M(r.Name),1),r.TicketComponents.length>0?(n(),c(h,{key:0},[ca,Ta,J("  "),(n(!0),c(h,null,W(r.TicketComponents,u=>(n(),c(h,{key:u.TicketUUID},[F("small",null,M(u.Name),1),J("  ")],64))),128))],64)):X("",!0),r.AddonTickets.length>0?(n(),c(h,{key:1},[va,Ea,J("  "),(n(!0),c(h,null,W(r.AddonTickets,u=>(n(),c("small",{key:u.TicketUUID},[J("("),F("em",null,M(u.Name),1),J(")")]))),128))],64)):X("",!0)]))),128)):X("",!0)}}),Ra={key:0},Da={key:0},Ia=F("strong",null,"Total:",-1),Oa=me({__name:"RegListRow",props:{header:{},accommodations:{},convention:{},extras:{},item:{},interests:{},tickets:{},venues:{}},emits:["reload"],setup(e,{emit:w}){const E=Me(),a=v(),r=v(),u=v(),f=v(),O=v(!1),N=t=>{console.log(t)},L=(t,R,l)=>{r.value=t,E.getRegistrationGroup(l.RegistrationUUID||"").then(p=>{u.value=p,a.value=R,f.value=l,O.value=!0})};return(t,R)=>(n(),c(h,null,[t.header.key=="actions"?(n(),$(ge,{key:0,size:"small",class:"me-2",icon:"mdi:mdi-pencil",variant:"plain",onClick:R[0]||(R[0]=l=>N(t.item.raw))})):t.header.type==="ACCOMMODATION"&&t.accommodations.length>0&&t.item.raw[t.header.key]?(n(),$(sa,{key:1,value:t.item.raw[t.header.key].Data,accommodations:t.accommodations,convention:t.convention,venues:t.venues,registration:t.item.raw[t.header.key].Registration},null,8,["value","accommodations","convention","venues","registration"])):t.header.type==="EXTRAS"&&t.extras.length>0?(n(),$(Aa,{key:2,value:t.item.raw[t.header.key],extras:t.extras},null,8,["value","extras"])):t.header.type==="INTERESTS"&&t.interests.length>0?(n(),$(_a,{key:3,value:t.item.raw[t.header.key],interests:t.interests},null,8,["value","interests"])):t.header.type==="TICKET"&&t.tickets.length>0?(n(),$(Sa,{key:4,value:t.item.raw[t.header.key],tickets:t.tickets},null,8,["value","tickets"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_SUBMISSION_STATUS"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_ACCOMMODATION_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_DEALER_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_BADGE_FORM"||t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_FORM"?(n(!0),c(h,{key:5},W(t.item.raw[t.header.key],l=>(n(),c("ul",{key:l.Heading},[F("li",null,[F("strong",null,M(l.Heading)+":",1),J(" "+M(Z(Ft)(l.Submission.Status))+" ",1),o(ge,{icon:"mdi:mdi-form-select",title:"Edit Submitted Data",variant:"flat",onClick:p=>L(l.Registration,l.Form,l.Submission)},null,8,["onClick"])])]))),128)):t.header.type==="LAYOUT_ITEM_SOURCE_USER.USER_DATA_SOURCE_AVATAR"?(n(),$(kt,{key:6,class:"rounded-circle",src:t.item.raw[t.header.key],height:"32",width:"32"},null,8,["src"])):t.header.type==="LAYOUT_ITEM_SOURCE_META.META_DATA_SOURCE_REGISTRATION_GROUP"?(n(),c(h,{key:7},[t.item.raw[t.header.key].length===1?(n(),c("em",Ra," Not in a group ")):(n(),c(h,{key:1},[F("ul",null,[(n(!0),c(h,null,W(t.item.raw[t.header.key],l=>(n(),c("li",{key:l.UUID,class:"ml-0"},[J(" #"+M(l.Reference)+" : "+M(l.Name)+" ",1),l.IsLeader?(n(),c("strong",Da,"(Leader)")):X("",!0)]))),128))]),Ia,J(" "+M(t.item.raw[t.header.key].length),1)],64))],64)):(n(),c(h,{key:8},[J(M(t.item.raw[t.header.key]),1)],64)),O.value&&f.value&&a.value?(n(),$(Pt,{key:9,modelValue:O.value,"onUpdate:modelValue":R[3]||(R[3]=l=>O.value=l),scrollable:!0},{default:s(()=>[o(Qe,{class:"bg-red-darken-4"},{default:s(()=>[o(Vt,null,{default:s(()=>[o(ut,{modelValue:a.value,"onUpdate:modelValue":R[1]||(R[1]=l=>a.value=l),admin:!0,convention:t.convention,data:f.value,editable:!0,"registration-group":u.value,onClose:R[2]||(R[2]=l=>{O.value=!1,w("reload")})},null,8,["modelValue","convention","data","registration-group"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):X("",!0)],64))}}),xa=me({__name:"RegistrationsView",emits:["pageTitle"],setup(e,{emit:w}){var de;const E=wt();w("pageTitle","Registration Manager");const a=lt(),r=nt(),u=v(!0);let f=((de=a.params.convention)==null?void 0:de.toString())||"";const O=v({ID:0,ConventionUUID:Re(),OrganisationID:0,OrganisationUUID:Je,Name:"New Convention",Description:"",DetailLink:"",Logo:"",Slug:"",Accommodation:[],Tickets:[],Extras:[],Interests:[],Visible:!1}),N=Me(),L=v({ID:0,AdminLayoutUUID:Re(),ConventionID:O.value.ID,ConventionUUID:O.value.ConventionUUID,Name:"Registration Table",Type:Ze.ADMIN_LAYOUT_TABLE,Panels:[]}),t=v([]),R=v([]),l=v([]),p=v([]),D=v(1),Q=v(10),k=v([]),se=v(0),le=v(!1),z=v(""),ee=v(""),ue=v(""),Ae=v(""),re=v(""),U=v([]),_=v([]),I=v([]),d=v([]),C=v([]),Y=v([]),V=v(0);ye(V,i=>{i===7&&Oe()}),ye(re,()=>{ee.value=Date.now().toString()});const H=()=>{t.value=[],l.value=[],p.value=[];try{N.getConventionAdminLayoutByName(O.value.ConventionUUID,"Registration Table").then(i=>{V.value+=1,i?L.value=i:(L.value.ConventionID=O.value.ID,L.value.ConventionUUID=O.value.ConventionUUID)})}catch{L.value.ConventionID=O.value.ID,L.value.ConventionUUID=O.value.ConventionUUID}try{N.getConventionForms(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(t.value=i)})}catch{}try{N.getConventionAccommodation(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(_.value=i)})}catch{}try{N.getConventionVenues(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(Y.value=i)})}catch{}try{N.getConventionExtras(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(I.value=i)})}catch{}try{N.getConventionInterests(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(d.value=i)})}catch{}try{N.getConventionTickets(O.value.ConventionUUID).then(i=>{V.value+=1,i&&(C.value=i)})}catch{}try{N.getConventionGroups(O.value.ConventionUUID).then(i=>{i&&(R.value=i)})}catch{}},Ie=({page:i,itemsPerPage:A,sortBy:m})=>{D.value=i,k.value=m;const S=p.value.find(q=>q.uuid==z.value),te=S==null?void 0:S.layout.Items;let K="",$e="";if(m&&te&&m.length>=1){const q=te.find(ve=>ve.LayoutItemUUID==m[0].key);switch($e=m[0].order,q==null?void 0:q.MetaField){case P.META_DATA_SOURCE_ACCOMMODATION_FORM:K="submission.status";break;case P.META_DATA_SOURCE_BADGE_FORM:K="submission.status";break;case P.META_DATA_SOURCE_DEALER_FORM:K="submission.status";break;case P.META_DATA_SOURCE_REGISTRATION_FORM:K="submission.status";break;case P.META_DATA_SOURCE_REGISTRATION_REFERENCE:K="reference";break;case P.META_DATA_SOURCE_SUBMISSION_DATE:K="created";break;case P.META_DATA_SOURCE_SUBMISSION_STATUS:K="submission.status";break}switch(q==null?void 0:q.UserField){case G.USER_DATA_SOURCE_DISPLAY_NAME:K="user.display_name";break;case G.USER_DATA_SOURCE_EMAIL:K="user.email";break;case G.USER_DATA_SOURCE_FIRST_NAME:K="user.firstname";break;case G.USER_DATA_SOURCE_HANDLE:K="user.handle";break;case G.USER_DATA_SOURCE_LAST_NAME:K="user.lastname";break}}try{const q={Direction:$e,Limit:A,Offset:(i-1)*A,Order:K};(S==null?void 0:S.layout.RequiredFormType)===ne.FORM_TYPE_ACCOMMODATION&&(q.Accommodation=!0),(S==null?void 0:S.layout.RequiredFormType)===ne.FORM_TYPE_BADGE&&(q.Badge=!0),(S==null?void 0:S.layout.RequiredFormType)===ne.FORM_TYPE_DEALER&&(q.Dealer=!0),(S==null?void 0:S.layout.RequiredFormType)===ne.FORM_TYPE_REGISTRATION&&(q.Registration=!0),q.GroupUUID=re.value||Je,q.Email=Ae.value,q.Reference=ue.value,N.searchConventionRegistrations(O.value.ConventionUUID,q).then(ve=>{ve&&(se.value=ve.Total,l.value=ve.Registrations,p.value.forEach(be=>{const xe=be.layout;be.items=l.value.map(b=>{const B={};return be.headers.forEach(we=>{var Ge;const y=xe.Items.find(Ue=>Ue.LayoutItemUUID===we.key);if(y){if(y.SourceType==="LAYOUT_ITEM_SOURCE_FORM"&&y.SectionField)b.Submissions.forEach(Ue=>{const x=Ue.Data.find(Ne=>Ne.SectionFieldUUID===y.SectionFieldUUID);if(x){we.type===rt.ACCOMMODATION?B[y.LayoutItemUUID]={Data:x.Data,Registration:b}:B[y.LayoutItemUUID]=x.Data;return}});else if(y.SourceType==="LAYOUT_ITEM_SOURCE_USER"&&y.UserField)switch(y.UserField){case G.USER_DATA_SOURCE_AVATAR:B[y.LayoutItemUUID]=E.GetProfileImageURL(b.UserUUID);break;case G.USER_DATA_SOURCE_DISPLAY_NAME:B[y.LayoutItemUUID]=b.User.DisplayName;break;case G.USER_DATA_SOURCE_EMAIL:B[y.LayoutItemUUID]=b.User.Additional.Email;break;case G.USER_DATA_SOURCE_HANDLE:B[y.LayoutItemUUID]=b.User.Handle;break;case G.USER_DATA_SOURCE_DATE_OF_BIRTH:B[y.LayoutItemUUID]=b.User.Additional.DOB;break;case G.USER_DATA_SOURCE_FIRST_NAME:B[y.LayoutItemUUID]=b.User.Additional.FirstName;break;case G.USER_DATA_SOURCE_LAST_NAME:B[y.LayoutItemUUID]=b.User.Additional.LastName;break;case G.USER_DATA_SOURCE_TELEGRAM:B[y.LayoutItemUUID]="";break}else if(y.SourceType==="LAYOUT_ITEM_SOURCE_META"&&y.MetaField){const Ue=[];let x;const Ne=(Ge=t.value.find(T=>T.Type===ne.FORM_TYPE_REGISTRATION))==null?void 0:Ge.FormUUID,Be=b.Submissions.find(T=>T.FormUUID===Ne);switch(y.MetaField){case P.META_DATA_SOURCE_REGISTRATION_GROUP:b.Leader?x=b:x=b.Primary,Ue.push({Name:x.User.DisplayName,UUID:x.UserUUID,UserUUID:x.User.UserUUID,IsLeader:!0,Reference:x.Reference}),Ue.push(...x.Members.map(T=>({Name:T.User.DisplayName,UUID:T.UserUUID,UserUUID:T.User.UserUUID,IsLeader:!1,Reference:T.Reference}))),B[y.LayoutItemUUID]=Ue;break;case P.META_DATA_SOURCE_REGISTRATION_REFERENCE:B[y.LayoutItemUUID]=b.Reference;break;case P.META_DATA_SOURCE_SUBMISSION_DATE:if(Be){const T=new Date(Be.CreatedAt||"");B[y.LayoutItemUUID]=`${T.getFullYear()}-${(T.getMonth()+1).toString().padStart(2,"0")}-${T.getDate().toString().padStart(2,"0")} ${T.getHours().toString().padStart(2,"0")}:${T.getMinutes().toString().padStart(2,"0")}:${T.getSeconds().toString().padStart(2,"0")}`}else{const T=new Date(b.CreatedAt||"");B[y.LayoutItemUUID]=`${T.getFullYear()}-${(T.getMonth()+1).toString().padStart(2,"0")}-${T.getDate().toString().padStart(2,"0")} ${T.getHours().toString().padStart(2,"0")}:${T.getMinutes().toString().padStart(2,"0")}:${T.getSeconds().toString().padStart(2,"0")}`}break;case P.META_DATA_SOURCE_ACCOMMODATION_FORM:fe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(T=>{const g=t.value.find(_e=>_e.FormUUID===T.FormUUID);return{Heading:g==null?void 0:g.Heading,Form:g,Submission:T,Registration:b}}).filter(T=>{var g;return((g=T.Form)==null?void 0:g.Type)===ne.FORM_TYPE_ACCOMMODATION});break;case P.META_DATA_SOURCE_BADGE_FORM:fe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(T=>{const g=t.value.find(_e=>_e.FormUUID===T.FormUUID);return{Heading:g==null?void 0:g.Heading,Form:g,Submission:T,Registration:b}}).filter(T=>{var g;return((g=T.Form)==null?void 0:g.Type)===ne.FORM_TYPE_BADGE});break;case P.META_DATA_SOURCE_DEALER_FORM:fe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(T=>{const g=t.value.find(_e=>_e.FormUUID===T.FormUUID);return{Heading:g==null?void 0:g.Heading,Form:g,Submission:T,Registration:b}}).filter(T=>{var g;return((g=T.Form)==null?void 0:g.Type)===ne.FORM_TYPE_DEALER});break;case P.META_DATA_SOURCE_SUBMISSION_STATUS:fe(b.Submissions,t.value),B[y.LayoutItemUUID]=b.Submissions.map(T=>{const g=t.value.find(_e=>_e.FormUUID===T.FormUUID);return{Heading:g==null?void 0:g.Heading,Form:g,Submission:T,Registration:b}});break}}}}),B})}),u.value=!1)})}catch{}},Oe=()=>{L.value.Panels.forEach(i=>{i.Items.forEach(A=>{(A.SectionField==null||A.SectionField.Field==null)&&t.value.find(m=>{m.Sections.find(S=>{if(S.Fields){const te=S.Fields.find(K=>K.SectionFieldUUID===A.SectionFieldUUID);if(te)return A.SectionField=te,!0}})})})}),L.value.Panels.length>0&&(p.value=[],L.value.Panels.forEach(i=>{const A={uuid:Re(),order:i.Order,name:i.Name,headers:[],items:[],layout:i};i.Items.sort((m,S)=>m.Order>S.Order?1:m.Order==S.Order?0:-1),A.headers=i.Items.map(m=>{var S,te;return m.DefaultSort&&U.value.push({key:m.LayoutItemUUID,order:"asc"}),{key:m.LayoutItemUUID,title:m.Label||((te=(S=m.SectionField)==null?void 0:S.Field)==null?void 0:te.Label)||"",align:m.Align==="end"?"end":"start",sortable:Le(m),type:he(m)}}),p.value.push(A)})),(z.value==null||z.value=="")&&p.value.length>0&&(z.value=p.value[0].uuid)};f?N.getConvention(f).then(i=>{i&&(O.value=i,H())}).catch(()=>{r.push("/")}):r.push("/");const he=i=>{var A,m;if(i.SourceType===De.LAYOUT_ITEM_SOURCE_META)return`${i.SourceType}.${i.MetaField}`;if(i.SourceType===De.LAYOUT_ITEM_SOURCE_FORM)return(m=(A=i.SectionField)==null?void 0:A.Field)==null?void 0:m.Type;if(i.SourceType===De.LAYOUT_ITEM_SOURCE_USER)return`${i.SourceType}.${i.UserField}`},Le=i=>{const A=[P.META_DATA_SOURCE_ACCOMMODATION_FORM,P.META_DATA_SOURCE_BADGE_FORM,P.META_DATA_SOURCE_DEALER_FORM,P.META_DATA_SOURCE_REGISTRATION_FORM,P.META_DATA_SOURCE_REGISTRATION_REFERENCE,P.META_DATA_SOURCE_SUBMISSION_DATE,P.META_DATA_SOURCE_SUBMISSION_STATUS],m=[G.USER_DATA_SOURCE_DISPLAY_NAME,G.USER_DATA_SOURCE_EMAIL,G.USER_DATA_SOURCE_HANDLE,G.USER_DATA_SOURCE_DATE_OF_BIRTH,G.USER_DATA_SOURCE_FIRST_NAME,G.USER_DATA_SOURCE_LAST_NAME];return A.includes(i.MetaField)||m.includes(i.UserField)};return(i,A)=>(n(),$(Bt,null,{default:s(()=>[o(Gt,{color:"blue-darken-4"},{default:s(()=>[o(yt,{modelValue:z.value,"onUpdate:modelValue":A[0]||(A[0]=m=>z.value=m),"show-arrows":""},{default:s(()=>[(n(!0),c(h,null,W(p.value,m=>(n(),$(gt,{key:m.uuid,value:m.uuid},{default:s(()=>[J(M(m.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o($t),o(ge,{icon:"mdi:mdi-cog-outline",onClick:A[1]||(A[1]=m=>le.value=!0)})]),_:1}),o(ht,{modelValue:z.value,"onUpdate:modelValue":A[10]||(A[10]=m=>z.value=m),disabled:!0},{default:s(()=>[(n(!0),c(h,null,W(p.value,m=>(n(),$(Mt,{key:m.uuid,value:m.uuid},{default:s(()=>[m.uuid===z.value?(n(),$(Qe,{key:0,class:"pa-2"},{default:s(()=>[o(Z(Wt),{"items-per-page":Q.value,"onUpdate:itemsPerPage":A[8]||(A[8]=S=>Q.value=S),"sort-by":U.value,"onUpdate:sortBy":A[9]||(A[9]=S=>U.value=S),headers:m.headers,"items-length":se.value,items:m.items,"item-value":"LayoutItemUUID",loading:u.value,search:ee.value,"onUpdate:options":Ie},Pe({top:s(()=>[o(Se,null,{default:s(()=>[o(ae,null,{default:s(()=>[o(j,{cols:"12",sm:"6",md:"4"},{default:s(()=>[o(Ee,{modelValue:ue.value,"onUpdate:modelValue":A[2]||(A[2]=S=>ue.value=S),label:"Search by Badge",clearable:!0,"hide-details":"",onInput:A[3]||(A[3]=S=>ee.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),o(j,{cols:"12",sm:"6",md:"4"},{default:s(()=>[o(Ee,{modelValue:Ae.value,"onUpdate:modelValue":A[4]||(A[4]=S=>Ae.value=S),label:"Search By Email",clearable:!0,"hide-details":"",onInput:A[5]||(A[5]=S=>ee.value=Date.now().toString())},null,8,["modelValue"])]),_:1}),o(j,{cols:"12",sm:"6",md:"4"},{default:s(()=>[o(ie,{modelValue:re.value,"onUpdate:modelValue":A[6]||(A[6]=S=>re.value=S),label:"Search By Group",clearable:!0,"hide-details":"",items:R.value,"item-value":"GroupUUID","item-title":"Name"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:2},[W(m.headers,S=>({name:`item.${S.key}`,fn:s(({item:te})=>[o(Oa,{header:S,item:te,accommodations:_.value,convention:O.value,extras:I.value,interests:d.value,tickets:C.value,venues:Y.value,onReload:A[7]||(A[7]=K=>Ie({page:D.value,itemsPerPage:Q.value,sortBy:k.value}))},null,8,["header","item","accommodations","convention","extras","interests","tickets","venues"])])}))]),1032,["items-per-page","sort-by","headers","items-length","items","loading","search"])]),_:2},1024)):X("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),le.value?(n(),$(zt,{key:0,title:"Edit Layout",modelValue:le.value,"onUpdate:modelValue":A[11]||(A[11]=m=>le.value=m),layout:L.value,onSave:A[12]||(A[12]=m=>{le.value=!1,Oe()})},null,8,["modelValue","layout"])):X("",!0)]),_:1}))}});export{xa as default};
