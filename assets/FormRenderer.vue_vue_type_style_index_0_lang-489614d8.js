import{p as Me,r as S,e as re,W as v,y as yl,ao as nl,as as Fe,a5 as ol,n as Be,ah as bl,s as Ve,u as Re,w as ae,E as Je,au as Il,v as o,H as G,x as pe,P as X,aB as Ul,aC as je,I as ye,a0 as te,a1 as be,a8 as Ye,M as u,V as P,X as W,Q as ee,O as i,a4 as ne,N as T,S as $,K as Te,R as ul,ac as $e,a3 as sl,U as Dl,f as Tl,aD as kl,_ as Cl,ag as ze,a as Vl,aE as Sl,L as El,aF as Qe}from"./index-9e3e7471.js";import{F as ie}from"./form-29fd1dbb.js";import{S as wl}from"./submission-6136b51d.js";import{a as Al,V as De,u as Ge,m as _l,b as il,c as Ol,d as Rl}from"./VCheckbox-2bcc7662.js";import{s as Ee}from"./index-26b71cef.js";import{e as Ll,V as he,a as me,c as Le,d as Se,b as rl}from"./VList-f10934a4.js";import{V as j,a as Y}from"./VRow-faaa8f8f.js";import{m as Ml,u as $l,a as xl,b as Pl,V as qe,c as Fl}from"./copyToClipboard-ab6220ad.js";import{q as ql,u as Ke,V as we,A as Nl,j as Bl}from"./VContainer-7d03d6aa.js";import{d as Yl,_ as Ze}from"./SaveButton.vue_vue_type_script_setup_true_lang-223a27f4.js";import{a as dl}from"./scopeId-dd09bf07.js";import{m as Gl,V as ke,a as Ne,b as Kl,c as Hl}from"./VTextField-0319d6ca.js";import{V as de,a as Xl}from"./VBtn-f825ccf4.js";import{m as Wl,V as el}from"./VAvatar-a487376c.js";import{V as cl}from"./VForm-fb15eda4.js";import{V as Jl}from"./VFileInput-e82fcb11.js";import{V as jl}from"./VTextarea-71185deb.js";import{u as zl,f as Ql}from"./forwardRefs-78473663.js";import{a as Zl}from"./VChip-2692a8b3.js";import{G as et}from"./userData-d483a7f4.js";import{v as xe}from"./v4-a960c1f4.js";import{e as lt,V as tt,a as at,c as nt}from"./VCard-3eb05181.js";var se=(e=>(e.ACCOMMODATION="ACCOMMODATION",e.AGE="AGE",e.BADGE_IMAGE="BADGE_IMAGE",e.CHECKBOX="CHECKBOX",e.DATE="DATE",e.EXTRAS="EXTRAS",e.INTERESTS="INTERESTS",e.RADIO="RADIO",e.SELECT="SELECT",e.TEXT="TEXT",e.TEXTAREA="TEXTAREA",e.TICKET="TICKET",e.NUMBER="NUMBER",e))(se||{});const Ua=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}];var vl=(e=>(e.TICKET_TYPE_ADD_ON="TICKET_TYPE_ADD_ON",e.TICKET_TYPE_GROUP="TICKET_TYPE_GROUP",e.TICKET_TYPE_TICKET="TICKET_TYPE_TICKET",e.TICKET_TYPE_TICKET_COMPONENT="TICKET_TYPE_TICKET_COMPONENT",e))(vl||{});const Da=[{title:"Add on",value:"TICKET_TYPE_ADD_ON"},{title:"Category",value:"TICKET_TYPE_GROUP"},{title:"Ticket",value:"TICKET_TYPE_TICKET"},{title:"Component",value:"TICKET_TYPE_TICKET_COMPONENT"}],Ae=e=>{e.sort((y,t)=>(y.Order?y.Order:0)-(t.Order?t.Order:0)),e.forEach((y,t)=>{y.Order=t})},Ta=(e,y)=>{const t=y.indexOf(e);if(t===0)return;const R=e.Order;e.Order=y[t-1].Order,y[t-1].Order=R,Ae(y)},ka=(e,y)=>{const t=y.indexOf(e);if(t>=y.length-1)return;const R=e.Order;e.Order=y[t+1].Order,y[t+1].Order=R,Ae(y)};const ot=(e,y,t)=>e==null||y==null?-1:e.toString().toLocaleLowerCase().indexOf(y.toString().toLocaleLowerCase()),ut=Me({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function st(e,y,t){var U;const R=[],h=(t==null?void 0:t.default)??ot,b=t!=null&&t.filterKeys?nl(t.filterKeys):!1,V=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return R;e:for(let k=0;k<e.length;k++){const c=e[k],l={},d={};let p=-1;if(y&&!(t!=null&&t.noFilter)){if(typeof c=="object"){const m=b||Object.keys(c);for(const n of m){const a=Fe(c,n,c),s=(U=t==null?void 0:t.customKeyFilter)==null?void 0:U[n];if(p=s?s(a,y,c):h(a,y,c),p!==-1&&p!==!1)s?l[n]=p:d[n]=p;else if((t==null?void 0:t.filterMode)==="every")continue e}}else p=h(c,y,c),p!==-1&&p!==!1&&(d.title=p);const D=Object.keys(d).length,r=Object.keys(l).length;if(!D&&!r||(t==null?void 0:t.filterMode)==="union"&&r!==V&&!D||(t==null?void 0:t.filterMode)==="intersection"&&(r!==V||!D))continue}R.push({index:k,matches:{...d,...l}})}return R}function it(e,y,t,R){const h=S([]),b=S(new Map),V=re(()=>R!=null&&R.transform?v(y).map(R==null?void 0:R.transform):v(y));yl(()=>{const k=typeof t=="function"?t():v(t),c=typeof k!="string"&&typeof k!="number"?"":String(k),l=st(V.value,c,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=v(y),p=[],D=new Map;l.forEach(r=>{let{index:m,matches:n}=r;const a=d[m];p.push(a),D.set(a.value,n)}),h.value=p,b.value=D});function U(k){return b.value.get(k.value)}return{filteredItems:h,filteredMatches:b,getMatches:U}}function rt(e,y,t){if(y==null)return e;if(Array.isArray(y))throw new Error("Multiple matches is not implemented");return typeof y=="number"&&~y?o(G,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,y)]),o("span",{class:"v-autocomplete__mask"},[e.substr(y,t)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(y+t)])]):e}const dt=Me({autoSelectFirst:{type:[Boolean,String]},search:String,...ut({filterKeys:["title"]}),...Ml(),...ol(Gl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Wl({transition:!1})},"VAutocomplete"),ll=Be()({name:"VAutocomplete",props:dt(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,y){let{slots:t}=y;const{t:R}=bl(),h=S(),b=Ve(!1),V=Ve(!0),U=Ve(!1),k=S(),c=S(),l=Re(e,"menu"),d=re({get:()=>l.value,set:C=>{var H;l.value&&!C&&((H=k.value)!=null&&H.Î¨openChildren)||(l.value=C)}}),p=Ve(-1),D=re(()=>{var C;return(C=h.value)==null?void 0:C.color}),r=re(()=>d.value?e.closeText:e.openText),{items:m,transformIn:n,transformOut:a}=Ll(e),{textColorClasses:s,textColorStyles:O}=ql(D),L=Re(e,"search",""),q=Re(e,"modelValue",[],C=>n(C===null?[null]:nl(C)),C=>{const H=a(C);return e.multiple?H:H[0]??null}),B=zl(),{filteredItems:w,getMatches:I}=it(e,m,()=>V.value?"":L.value),E=re(()=>q.value.map(C=>m.value.find(H=>{const z=Fe(H.raw,e.itemValue),ge=Fe(C.raw,e.itemValue);return z===void 0||ge===void 0?!1:e.returnObject?e.valueComparator(z,ge):e.valueComparator(H.value,C.value)})||C)),f=re(()=>e.hideSelected?w.value.filter(C=>!E.value.some(H=>H.value===C.value)):w.value),_=re(()=>E.value.map(C=>C.props.value)),F=re(()=>E.value[p.value]),Q=re(()=>{var H;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&L.value===((H=f.value[0])==null?void 0:H.title))&&f.value.length>0&&!V.value&&!U.value}),A=re(()=>e.hideNoData&&!m.value.length||e.readonly||(B==null?void 0:B.isReadonly.value)),K=S(),{onListScroll:x,onListKeydown:g}=$l(K,h);function M(C){e.openOnClear&&(d.value=!0),L.value=""}function fe(){A.value||(d.value=!0)}function N(C){A.value||(b.value&&(C.preventDefault(),C.stopPropagation()),d.value=!d.value)}function oe(C){var ge,J,ue;if(e.readonly||B!=null&&B.isReadonly.value)return;const H=h.value.selectionStart,z=_.value.length;if((p.value>-1||["Enter","ArrowDown","ArrowUp"].includes(C.key))&&C.preventDefault(),["Enter","ArrowDown"].includes(C.key)&&(d.value=!0),["Escape"].includes(C.key)&&(d.value=!1),Q.value&&["Enter","Tab"].includes(C.key)&&Ie(f.value[0]),C.key==="ArrowDown"&&Q.value&&((ge=K.value)==null||ge.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(C.key)){if(p.value<0){C.key==="Backspace"&&!L.value&&(p.value=z-1);return}const Z=p.value;F.value&&Ie(F.value),p.value=Z>=z-1?z-2:Z}if(C.key==="ArrowLeft"){if(p.value<0&&H>0)return;const Z=p.value>-1?p.value-1:z-1;E.value[Z]?p.value=Z:(p.value=-1,h.value.setSelectionRange((J=L.value)==null?void 0:J.length,(ue=L.value)==null?void 0:ue.length))}if(C.key==="ArrowRight"){if(p.value<0)return;const Z=p.value+1;E.value[Z]?p.value=Z:(p.value=-1,h.value.setSelectionRange(0,0))}}}function le(C){L.value=C.target.value}function He(C){if(je(h.value,":autofill")||je(h.value,":-webkit-autofill")){const H=m.value.find(z=>z.title===C.target.value);H&&Ie(H)}}function ml(){var C;b.value&&(V.value=!0,(C=h.value)==null||C.focus())}function fl(C){b.value=!0,setTimeout(()=>{U.value=!0})}function gl(C){U.value=!1}function pl(C){(C==null||C===""&&!e.multiple)&&(q.value=[])}const Ce=Ve(!1);function Ie(C){if(e.multiple){const H=_.value.findIndex(z=>e.valueComparator(z,C.value));if(H===-1)q.value=[...q.value,C];else{const z=[...q.value];z.splice(H,1),q.value=z}}else q.value=[C],Ce.value=!0,L.value=C.title,d.value=!1,V.value=!0,Je(()=>Ce.value=!1)}return ae(b,(C,H)=>{var z;C!==H&&(C?(Ce.value=!0,L.value=e.multiple?"":String(((z=E.value.at(-1))==null?void 0:z.props.title)??""),V.value=!0,Je(()=>Ce.value=!1)):(!e.multiple&&!L.value?q.value=[]:Q.value&&!U.value&&!E.value.some(ge=>{let{value:J}=ge;return J===f.value[0].value})&&Ie(f.value[0]),d.value=!1,L.value="",p.value=-1))}),ae(L,C=>{!b.value||Ce.value||(C&&(d.value=!0),V.value=!C)}),ae(d,()=>{if(!e.hideSelected&&d.value&&E.value.length){const C=f.value.findIndex(H=>E.value.some(z=>H.value===z.value));Il&&window.requestAnimationFrame(()=>{var H;C>=0&&((H=c.value)==null||H.scrollToIndex(C))})}}),Ke(()=>{const C=!!(e.chips||t.chip),H=!!(!e.hideNoData||f.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),z=q.value.length>0,[ge]=ke.filterProps(e);return o(ke,pe({ref:h},ge,{modelValue:L.value,"onUpdate:modelValue":pl,focused:b.value,"onUpdate:focused":J=>b.value=J,validationValue:q.externalValue,dirty:z,onInput:le,onChange:He,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!t.selection,"v-autocomplete--selecting-index":p.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:z?void 0:e.placeholder,"onClick:clear":M,"onMousedown:control":fe,onKeydown:oe}),{...t,default:()=>o(G,null,[o(xl,pe({ref:k,modelValue:d.value,"onUpdate:modelValue":J=>d.value=J,activator:"parent",contentClass:"v-autocomplete__content",disabled:A.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ml},e.menuProps),{default:()=>[H&&o(he,{ref:K,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:J=>J.preventDefault(),onKeydown:g,onFocusin:fl,onFocusout:gl,onScrollPassive:x,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var J,ue,Z;return[(J=t["prepend-item"])==null?void 0:J.call(t),!f.value.length&&!e.hideNoData&&(((ue=t["no-data"])==null?void 0:ue.call(t))??o(me,{title:R(e.noDataText)},null)),o(Pl,{ref:c,renderless:!0,items:f.value},{default:Ue=>{var We;let{item:ce,index:ve,itemRef:hl}=Ue;const Xe=pe(ce.props,{ref:hl,key:ve,active:Q.value&&ve===0?!0:void 0,onClick:()=>Ie(ce)});return((We=t.item)==null?void 0:We.call(t,{item:ce,index:ve,props:Xe}))??o(me,Xe,{prepend:_e=>{let{isSelected:Oe}=_e;return o(G,null,[e.multiple&&!e.hideSelected?o(Al,{key:ce.value,modelValue:Oe,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependIcon&&o(we,{icon:ce.props.prependIcon},null)])},title:()=>{var _e,Oe;return V.value?ce.title:rt(ce.title,(_e=I(ce))==null?void 0:_e.title,((Oe=L.value)==null?void 0:Oe.length)??0)}})}}),(Z=t["append-item"])==null?void 0:Z.call(t)]}})]}),E.value.map((J,ue)=>{var ce;function Z(ve){ve.stopPropagation(),ve.preventDefault(),Ie(J)}const Ue={"onClick:close":Z,onMousedown(ve){ve.preventDefault(),ve.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:J.value,class:["v-autocomplete__selection",ue===p.value&&["v-autocomplete__selection--selected",s.value]],style:ue===p.value?O.value:{}},[C?t.chip?o(Nl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:J.title}}},{default:()=>{var ve;return[(ve=t.chip)==null?void 0:ve.call(t,{item:J,index:ue,props:Ue})]}}):o(Zl,pe({key:"chip",closable:e.closableChips,size:"small",text:J.title},Ue),null):((ce=t.selection)==null?void 0:ce.call(t,{item:J,index:ue}))??o("span",{class:"v-autocomplete__selection-text"},[J.title,e.multiple&&ue<E.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[X(",")])])])})]),"append-inner":function(){var Ue;for(var J=arguments.length,ue=new Array(J),Z=0;Z<J;Z++)ue[Z]=arguments[Z];return o(G,null,[(Ue=t["append-inner"])==null?void 0:Ue.call(t,...ue),e.menuIcon?o(we,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:N,onClick:Ul,"aria-label":R(r.value),title:R(r.value)},null):void 0])}})}),Ql({isFocused:b,isPristine:V,menu:d,search:L,filteredItems:w,select:Ie},h)}}),ct={class:"extrasList"},vt=ye({__name:"Extras",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:R=!1,convention:h,disabled:b=!1}=t,V=be(e,"modelValue"),U=Ye.getInstance(),k=S({});try{k.value=JSON.parse(V.value)}catch{}const c=S([]),l=S([]);ae(t,()=>{p()}),ae(k.value,r=>{for(const m in r)if(r[m].checked){const n=c.value.map(a=>{var s;return(s=a.Options)==null?void 0:s.find(O=>O.OptionUUID===m)});if(n&&n.length>0)try{const a=n[0];r[m].choiceId===""&&a&&a.Choices&&a.Choices.length>0&&(r[m].choiceId=a.Choices[0].TagUUID),r[m].price=a==null?void 0:a.Price}catch{}}else r[m].choiceId="",r[m].price=0;V.value=JSON.stringify(r),D()});const d=re({get:()=>c.value.map(r=>r.ExtraUUID),set:()=>{}}),p=()=>{var m;const r=((m=t.items.find(n=>n.Title==="SelectedExtras"))==null?void 0:m.Value)||"[]";try{const n=JSON.parse(r);c.value=l.value.filter(a=>n.find(s=>s===a.ExtraUUID))||[],d.value=[...c.value.map(a=>a.ExtraUUID)],c.value.forEach(a=>{var s;(s=a.Options)==null||s.forEach(O=>{k.value[O.OptionUUID]||(k.value[O.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in h&&h.Extras.length?(l.value=h.Extras,p()):"ConventionUUID"in h&&(R?U==null||U.getConventionExtras(h.ConventionUUID).then(r=>{r&&(l.value=r,p())}):U==null||U.getAvailableConventionExtras(h.ConventionUUID).then(r=>{r&&(l.value=r,p())}));const D=(r=void 0)=>{setTimeout(()=>y("change",r),100)};return(r,m)=>(u(),P("div",ct,[W("h4",null,ee(r.label),1),o(he,{opened:d.value,"onUpdate:opened":m[0]||(m[0]=n=>d.value=n)},{default:i(()=>[(u(!0),P(G,null,ne(c.value,n=>(u(),T(rl,{key:n.ExtraUUID,value:n.ExtraUUID},{activator:i(({props:a})=>[o(me,pe({"prepend-icon":"mdi:mdi-group","append-icon":""},a),{default:i(()=>[n.Name?(u(),T(Le,{key:0},{default:i(()=>[W("strong",null,ee(n.Name),1)]),_:2},1024)):$("",!0),n.Description?(u(),T(Se,{key:1,class:"mt-2 d-inline"},{default:i(()=>[X(ee(n.Description),1)]),_:2},1024)):$("",!0)]),_:2},1040)]),default:i(()=>[n.Options?(u(!0),P(G,{key:0},ne(n.Options,a=>(u(),T(me,{key:a.OptionUUID,class:"override-pl"},{default:i(()=>[o(j,null,{default:i(()=>[o(Y,{cols:"12",sm:"6"},{default:i(()=>[o(De,{label:`${a.Name} ${a.Price&&a.Price!==0?`(${v(Ee).currencySymbol}${a.Price})`:""}`,modelValue:k.value[a.OptionUUID].checked,"onUpdate:modelValue":s=>k.value[a.OptionUUID].checked=s,disabled:v(b),"hide-details":"",onChange:D},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),a.Choices&&a.Choices.length>1&&k.value[a.OptionUUID].checked?(u(),T(Y,{key:0,cols:"12",sm:"6"},{default:i(()=>[o(qe,{items:a.Choices.sort((s,O)=>s.Title.localeCompare(O.Title)).map(s=>({value:s.TagUUID,title:s.Title})),modelValue:k.value[a.OptionUUID].choiceId,"onUpdate:modelValue":s=>k.value[a.OptionUUID].choiceId=s,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(b),"hide-details":"",onChange:D},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):$("",!0)]),_:2},1024)]),_:2},1024))),128)):$("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}});const mt={class:"interestList"},ft=ye({__name:"Interests",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:R=!1,convention:h,disabled:b=!1}=t,V=be(e,"modelValue"),U=Ye.getInstance(),k=S({});try{k.value=JSON.parse(V.value)}catch{}const c=S([]),l=S([]);ae(k.value,r=>{V.value=JSON.stringify(r)});const d=S([]),p=()=>{var m;const r=((m=t.items.find(n=>n.Title==="SelectedInterests"))==null?void 0:m.Value)||"[]";try{const n=JSON.parse(r);c.value=l.value.filter(a=>n.find(s=>s===a.InterestUUID))||[],d.value=[...c.value.map(a=>a.InterestUUID)]}catch{}};"ConventionUUID"in h&&(R?U==null||U.getConventionInterests(h.ConventionUUID).then(r=>{r&&(l.value=r,p())}):U==null||U.getConventionInterests(h.ConventionUUID).then(r=>{r&&(l.value=r,p())})),ae(t,()=>{p()});const D=(r=void 0)=>{setTimeout(()=>y("change",r),100)};return(r,m)=>(u(),P("div",mt,[W("h4",null,ee(r.label),1),o(he,{opened:d.value,"onUpdate:opened":m[0]||(m[0]=n=>d.value=n)},{default:i(()=>[(u(!0),P(G,null,ne(c.value.sort((n,a)=>n.Order>a.Order?1:n.Order==a.Order?0:-1),n=>(u(),T(me,{key:n.InterestUUID},{default:i(()=>[o(j,null,{default:i(()=>[o(Y,null,{default:i(()=>[o(De,{label:`${n.Name} ${n.Price&&n.Price>0?`(${v(Ee).currencySymbol}${n.Price})`:""}`,modelValue:k.value[n.InterestUUID],"onUpdate:modelValue":a=>k.value[n.InterestUUID]=a,disabled:v(b),messages:n.Description,onChange:D},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}});const tl=(e,y,t)=>{if(t>=e.length){let R=t-e.length+1;for(;R--;)e.push(void 0)}e.splice(t,0,e.splice(y,1)[0])},Pe=e=>(Ae(e),e),Ca=e=>(y,t)=>y[e]<t[e]?-1:y[e]>t[e]?1:0,gt={class:"ticketList"},pt={key:0,class:"text-orange-darken-1"},ht=ye({__name:"Tickets",props:te({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:R=!1,convention:h,disabled:b=!1,registrationGroup:V=void 0}=t,U=be(e,"modelValue"),k=Ye.getInstance(),c=S({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(U.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const l=S([]),d=S([]),p=S([]),D=S({required:(s,O=void 0)=>()=>{if(b||!(V!=null&&V.Registration.Leader))return!0;if(O==null){if(c.value.Ticket.length===0&&t.required)return"Must select at least one ticket option.";if(s&&s.ComponentsRequired>0&&c.value.Ticket.includes(s.TicketUUID||"")){let L=0;if(s.TicketComponents.forEach(q=>{c.value.ComponentsChecked.forEach(B=>{q.TicketUUID===B&&(L+=1)})}),L<s.ComponentsRequired)return`Must select ticket ${s.ComponentsRequired} component${s.ComponentsRequired===1?"":"s"}`}}return!0}}),r=()=>{var O;const s=((O=t.items.find(L=>L.Title==="SelectedTickets"))==null?void 0:O.Value)||"[]";try{const L=JSON.parse(s);l.value=d.value.filter(q=>q.Type==="TICKET_TYPE_GROUP"&&L.find(B=>B===q.TicketUUID))||[],p.value=[...l.value.filter(q=>q.Type==="TICKET_TYPE_GROUP").map(q=>q.TicketUUID)]}catch{}};if("ConventionUUID"in h)if(R)k==null||k.getConventionTickets(h.ConventionUUID).then(s=>{s&&(d.value=s,r())});else{const s=t.items.find(O=>O.Title==="SelectedTickets");s&&(k==null||k.getFieldTickets(s.FieldUUID).then(O=>{O&&(d.value=O,r())}))}ae(t,()=>{r()});const m=s=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const O=[];l.value.forEach(L=>{(c.value.Ticket.includes(L.TicketUUID)||c.value.ComponentsChecked.includes(L.TicketUUID))&&O.push(...L.AddonTickets.map(q=>q.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(L=>O.includes(L)),a(s)},n=s=>{const O=d.value.find(L=>L.TicketUUID===c.value.Ticket[0]);if(O)for(;c.value.ComponentsChecked.length>O.ComponentsRequired;)c.value.ComponentsChecked.shift();a(s)},a=(s=void 0)=>{U.value=JSON.stringify(c.value),setTimeout(()=>y("change",s),100)};try{V!=null&&V.TicketData&&(c.value=JSON.parse(V.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),a())}catch{}return(s,O)=>{var L;return u(),P("div",gt,[W("h4",null,[X(ee(s.label)+" ",1),(L=v(V))!=null&&L.Registration.Leader?$("",!0):(u(),P("small",pt,"(controlled by group leader)"))]),o(he,{opened:p.value,"onUpdate:opened":O[4]||(O[4]=q=>p.value=q)},{default:i(()=>[(u(!0),P(G,null,ne(v(Pe)(l.value.filter(q=>q.Type===v(vl).TICKET_TYPE_GROUP)),q=>(u(),P(G,{key:q.TicketUUID},[q.Tickets.length>0?(u(),T(rl,{key:0,value:q.TicketUUID},{activator:i(({props:B})=>[o(me,pe(B,{"prepend-icon":"mdi:mdi-group"}),{default:i(()=>[o(Le,null,{default:i(()=>[W("strong",null,ee(q.Name),1)]),_:2},1024),o(Se,{class:"d-inline"},{default:i(()=>[X(ee(q.Description),1)]),_:2},1024)]),_:2},1040)]),default:i(()=>[(u(!0),P(G,null,ne(q.Tickets,B=>(u(),T(me,{key:B.TicketUUID,class:"override-pl"},{default:i(()=>{var w;return[o(Se,{class:"d-inline"},{default:i(()=>[X(ee(B.Description),1)]),_:2},1024),o(De,{modelValue:c.value.Ticket,"onUpdate:modelValue":O[0]||(O[0]=I=>c.value.Ticket=I),value:B.TicketUUID,onChange:m,rules:[D.value.required(B)],"validate-on":"submit",disabled:v(b)||!((w=v(V))!=null&&w.Registration.Leader)},{label:i(()=>[o(we,{icon:B.RequiresAccommodation?"mdi:mdi-home":B.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+ee(`${B.Name} ${B.Price>0?`(${v(Ee).currencySymbol}${B.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&B.TicketUUID===c.value.Ticket[0]?(u(),P(G,{key:0},[B.AddonTickets.length?(u(),T(he,{key:0},{default:i(()=>[(u(!0),P(G,null,ne(v(Pe)(B.AddonTickets),I=>(u(),P(G,{key:I==null?void 0:I.TicketUUID},[I?(u(),T(me,{key:0},{default:i(()=>[o(Le,null,{default:i(()=>{var E;return[o(De,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":O[1]||(O[1]=f=>c.value.AddonsChecked=f),value:I.TicketUUID,onChange:O[2]||(O[2]=f=>{c.value.ComponentsChecked=[],a(f)}),disabled:v(b)||!((E=v(V))!=null&&E.Registration.Leader)},{label:i(()=>[o(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+ee(`${I.Name} ${I.Price>0?`(${v(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),o(Se,{class:"d-inline"},{default:i(()=>[X(ee(I.Description),1)]),_:2},1024)]),_:2},1024)):$("",!0)],64))),128))]),_:2},1024)):$("",!0),B.TicketComponents.length?(u(),T(he,{key:1},{default:i(()=>[(u(!0),P(G,null,ne(v(Pe)(B.TicketComponents),I=>(u(),P(G,{key:I==null?void 0:I.TicketUUID},[I?(u(),T(me,{key:0},{default:i(()=>[o(Le,null,{default:i(()=>{var E;return[o(De,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":O[3]||(O[3]=f=>c.value.ComponentsChecked=f),value:I.TicketUUID,onChange:n,rules:[D.value.required(B,I)],"validate-on":"submit",disabled:v(b)||!((E=v(V))!=null&&E.Registration.Leader)},{label:i(()=>[o(we,{icon:I.RequiresAccommodation?"mdi:mdi-home-plus":I.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+ee(`${I.Name} ${I.Price>0?`(${v(Ee).currencySymbol}${I.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),o(Se,null,{default:i(()=>[X(ee(I.Description),1)]),_:2},1024)]),_:2},1024)):$("",!0)],64))),128))]),_:2},1024)):$("",!0)],64)):$("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):$("",!0)],64))),128))]),_:1},8,["opened"])])}}});const yt={key:0},bt=W("strong",null,"Your Sharing Group",-1),It={class:"d-flex flex-wrap my-2"},Ut=W("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Dt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},Tt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},kt=W("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Ct={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},Vt={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},St=["href","onClick"],Et=W("br",null,null,-1),wt=W("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),At=W("strong",null,"Your Groups Accommodation",-1),_t=W("br",null,null,-1),Ot=W("small",null,"(in order of preference, controlled by group leader)",-1),Rt=W("strong",null,"Accommodation Options",-1),Lt=W("br",null,null,-1),Mt=W("strong",null,"Your Chosen Accommodation",-1),$t=W("small",null,"(in order of preference)",-1),xt=ye({__name:"Accommodation",props:te({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:R=!1,convention:h,disabled:b}=t,V=be(e,"modelValue"),U=Ge(t,y,void 0,void 0,"items"),k=sl(),c=dl(),l=Dl.getInstance(),d=S(Te(V.value)),p=S([]),D=S(),r=S({sharing:!1}),m=()=>{try{const g=JSON.parse(t.data);g&&(r.value=g)}catch{}};m(),ae(t,()=>{m(),t.registrationGroup&&(p.value=t.registrationGroup.Members,D.value=t.registrationGroup.Registration)}),ae(d,g=>{V.value=Te(g)},{deep:!0});const n=S(""),a=S(!1),s=()=>{var g;(g=D.value)!=null&&g.Leader&&k.getRegistrationInvite(h.ConventionUUID).then(M=>{if(M){const fe=new URL(location.href);fe.searchParams.set("token",M),n.value=fe.toString()}})},O=()=>{Fl(n.value),s(),a.value=!0,setTimeout(()=>a.value=!1,2200)},L=(g=void 0)=>{setTimeout(()=>y("change",g),100)},q=S({required:g=>!t.required||g.length>0||"Selections Required"}),B=g=>g?`${g.Reference?`#${g.Reference}`:"(not registered)"} ${g.Name}`:"",w=()=>{var g;l.emit("registration.group.leave",(g=D.value)==null?void 0:g.RegistrationUUID)},I=g=>{l.emit("registration.group.remove.member",g)},E=S([]);ae(U,()=>{f()});const f=()=>{R?k.getConventionAccommodation(h.ConventionUUID).then(g=>{E.value=g.filter(M=>!!(U!=null&&U.value.find(fe=>fe.Value===M.AccommodationUUID)))||[]}):U.value.length>0&&k.getFieldAccommodation(U.value[0].FieldUUID).then(g=>{E.value=g.filter(M=>!!(U!=null&&U.value.find(fe=>fe.Value===M.AccommodationUUID)))||[]})};f(),(()=>{var g;if(t.registrationGroup)if(p.value=t.registrationGroup.Members,D.value=t.registrationGroup.Registration,(g=D.value)!=null&&g.Leader)s();else try{d.value=JSON.parse(t.registrationGroup.AccommodationData),L()}catch{}})();const F=S({column:0,id:""}),Q=()=>{!b&&!d.value.includes(F.value.id)&&(F.value.column===0&&F.value.id!==""&&d.value.push(F.value.id),L())},A=()=>{const g=d.value.findIndex(M=>M===F.value.id);!b&&g>=0&&(d.value.splice(g,1),L())},K=()=>{if(b||F.value.column!==1)return;const g=d.value.findIndex(M=>M===F.value.id);g<=0||(tl(d.value,g,g-1),L())},x=()=>{if(b||F.value.column!==1)return;const g=d.value.findIndex(M=>M===F.value.id);g>=d.value.length-1||(tl(d.value,g,g+1),L())};return(g,M)=>{var fe;return u(),P(G,null,[W("h4",null,ee(g.label),1),o(j,null,{default:i(()=>[o(Y,{cols:"12"},{default:i(()=>{var N,oe;return[p.value&&D.value&&r.value.sharing?(u(),P("div",yt,[bt,!v(b)&&((N=p.value.find(le=>le.IsLeader))==null?void 0:N.UUID)!==D.value.RegistrationUUID?(u(),T(de,{key:0,color:"red",variant:"text",onClick:w},{default:i(()=>[X("(leave group)")]),_:1})):$("",!0),W("dl",It,[Ut,W("dd",Dt,[o(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((oe=p.value.find(le=>le.IsLeader))==null?void 0:oe.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),W("div",Tt,ee(B(p.value.find(le=>le.IsLeader))),1)]),(u(!0),P(G,null,ne(p.value,le=>(u(),P(G,{key:le.UUID},[le.IsLeader?$("",!0):(u(),P(G,{key:0},[kt,W("dd",Ct,[o(el,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(le.UserUUID),height:"32",width:"32"},null,8,["src"]),W("div",Vt,[X(ee(B(le))+" ",1),D.value.Leader?(u(),T(de,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:He=>I(le.UUID),disabled:v(b)},null,8,["onClick","disabled"])):$("",!0)])])],64))],64))),128))]),o(Yl,{modelValue:a.value,"onUpdate:modelValue":M[0]||(M[0]=le=>a.value=le),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),n.value&&D.value.Leader&&!v(b)?(u(),P(G,{key:1},[W("a",{href:n.value,onClick:ul(O,["prevent"]),class:"text-white text-decoration-none"},[o(de,{color:"blue",class:"mb-2"},{default:i(()=>[X("Get Invite Link")]),_:1})],8,St),Et,wt],64)):$("",!0)])):$("",!0)]}),_:1})]),_:1}),D.value&&!D.value.Leader?(u(),T(j,{key:0},{default:i(()=>[o(Y,{cols:"10",md:"5"},{default:i(()=>[At,_t,Ot,o(he,null,{default:i(()=>[(u(!0),P(G,null,ne(d.value.map(N=>E.value.find(oe=>oe.AccommodationUUID==N)).filter(N=>N!==void 0),(N,oe)=>(u(),P(G,null,[N?(u(),T(me,{key:N.AccommodationUUID,title:`${oe+1}. ${N.Name}`,class:$e(F.value.column===1&&F.value.id===N.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):$("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(u(),T(j,{key:1},{default:i(()=>[o(Y,{cols:"12",md:"5"},{default:i(()=>[Rt,Lt,o(he,null,{default:i(()=>[(u(!0),P(G,null,ne(E.value,N=>(u(),T(me,{key:N.AccommodationUUID,title:N.Name,class:$e(F.value.column===0&&F.value.id===N.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:oe=>F.value={column:0,id:N.AccommodationUUID},"append-icon":v(b)?"":"mdi:mdi-gesture-tap",onDblclick:M[1]||(M[1]=oe=>Q())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(b)?$("",!0):(u(),T(Y,{key:0,cols:"12",md:"1"},{default:i(()=>[o(j,{class:"d-md-none"},{default:i(()=>[o(Y,{cols:"12",class:"text-center"},{default:i(()=>[o(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[2]||(M[2]=N=>Q()),color:"primary",title:"Select"}),X(" Â  "),o(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[3]||(M[3]=N=>A()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),o(j,{class:"d-none d-md-flex h-100 align-content-center"},{default:i(()=>[o(Y,{cols:"12"},{default:i(()=>[o(de,{icon:"mdi:mdi-arrow-right",size:"small",onClick:M[4]||(M[4]=N=>Q()),color:"primary",title:"Select"})]),_:1}),o(Y,{cols:"12"},{default:i(()=>[o(de,{icon:"mdi:mdi-arrow-left",size:"small",onClick:M[5]||(M[5]=N=>A()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),o(Y,{cols:"10",md:"5"},{default:i(()=>[Mt,o(he,null,{default:i(()=>[(u(!0),P(G,null,ne(d.value.map(N=>E.value.find(oe=>oe.AccommodationUUID==N)).filter(N=>N!==void 0),(N,oe)=>(u(),P(G,null,[N?(u(),T(me,{key:N.AccommodationUUID,title:`${oe+1}. ${N.Name}`,class:$e(F.value.column===1&&F.value.id===N.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:le=>F.value={column:1,id:(N==null?void 0:N.AccommodationUUID)||""},"append-icon":v(b)?"":"mdi:mdi-gesture-tap",onDblclick:M[6]||(M[6]=le=>A())},null,8,["title","class","onClick","append-icon"])):$("",!0)],64))),256))]),_:1}),$t]),_:1}),v(b)?$("",!0):(u(),T(Y,{key:1,cols:"2",md:"1"},{default:i(()=>[o(j,{class:"d-flex h-100 align-content-center mt-3"},{default:i(()=>[o(Y,{cols:"12"},{default:i(()=>[o(de,{icon:"mdi:mdi-arrow-up",size:"small",onClick:M[7]||(M[7]=N=>K()),color:"primary",title:"Higher Priority"})]),_:1}),o(Y,{cols:"12"},{default:i(()=>[o(de,{icon:"mdi:mdi-arrow-down",size:"small",onClick:M[8]||(M[8]=N=>x()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(fe=D.value)!=null&&fe.Leader?(u(),T(Ne,{key:2,modelValue:V.value,"onUpdate:modelValue":M[9]||(M[9]=N=>V.value=N),disabled:v(b)||!1,"persistent-hint":g.persistentHint||!1,"error-messages":g.errorMessages||"",rules:[q.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):$("",!0)],64)}}});const Pt=ye({__name:"AgeCheck",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,R=Ge(t,y,void 0,void 0,"items"),h=be(e,"modelValue"),b=S({required:l=>!t.required||!!l||"Required.",min:l=>{var s,O;const d=new Date,p=d.getFullYear(),D=(d.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),r=d.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),m=((s=R.value.find(L=>L.Title=="MIN_AGE"))==null?void 0:s.Value)||"18",n=((O=R.value.find(L=>L.Title=="BEFORE_DATE"))==null?void 0:O.Value)||`${p}-${D}-${r}`,a=k(n);return U(l,n,parseInt(m))||`You must be at least ${m} years old by ${a.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),V=()=>(y("blur"),!(b.value.min(h.value||"")!==!0||b.value.required(h.value||"")!==!0)),U=(l,d,p)=>{if(l>=d)return!1;const D=k(l),m=k(d).getTime()-D.getTime(),n=1e3*60*60*24*365.25;return m/n>=p},k=l=>{const[d,p,D]=l.split("-");return new Date(parseInt(d),parseInt(p)-1,parseInt(D))},c=(l=void 0)=>{setTimeout(()=>y("change",l),100)};return(l,d)=>(u(),T(ke,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=p=>h.value=p),type:"date",hint:l.hint||"",label:l.label||"",name:l.name||"",variant:"outlined",disabled:l.disabled||!1,"persistent-hint":l.persistentHint||!1,"error-messages":l.errorMessages||"",rules:[b.value.required,b.value.min],onBlur:V,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Ft={class:"text-center"},qt={key:0},Nt={key:0,class:"image-progress my-auto mx-auto"},Bt=["src"],Yt=ye({__name:"BadgeImage",props:te({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0}}),emits:te(["blur","change","update:items"],["update:modelValue"]),setup(e,{emit:y}){const t=e,R=be(e,"modelValue"),h=S({}),b=()=>{h.value.left=parseInt(getComputedStyle(l.value).left),h.value.top=parseInt(getComputedStyle(l.value).top),h.value.height=l.value.height,h.value.width=l.value.width,R.value=JSON.stringify(h.value)},V=dl(),U=S(),k=S(!0),c=S(),l=S(),d=S(""),p=S(!1),D=S(0),r=S(),m=S({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),n=S(280),a=S(280);t.items.find(A=>{if(A.Title==="TargetWidth")return a.value=parseInt(A.Value,10)||280,!0}),t.items.find(A=>{if(A.Title==="TargetHeight")return n.value=parseInt(A.Value,10)||280,!0});const s=re(()=>({"--preview-width":`${a.value}px`,"--preview-height":`${n.value}px`})),O=S(!1);try{h.value=JSON.parse(R.value||"{}"),h.value.fileUUID&&(d.value=V.GetBadgeImageURL(h.value.fileUUID))}catch{}const L=S({required:A=>!t.required||!!A||"Required.",saved:()=>!k.value||"File not uploaded."}),q=()=>(y("blur"),L.value.required(R.value||"")!==!0),B=(A=void 0)=>{I().then(()=>{w(),setTimeout(()=>y("change",A),100)})},w=()=>{c.value.files.length>0&&(d.value=URL.createObjectURL(c.value.files[0]))},I=async()=>{var K;const A=new FormData((K=U.value)==null?void 0:K.$el);k.value=!1,p.value=!0,V.SaveFormFile(A).then(x=>{x.Saved&&(p.value=!1,k.value=!0,h.value.fileUUID=x.FileUUID,O.value=!0)}).catch(()=>{})},E=()=>{l.value.style.left="0px",l.value.style.top="0px",l.value.width>l.value.height?l.value.width=a.value*(l.value.width/l.value.height):l.value.width=a.value,l.value.classList.remove("d-none")},f=(A,K=0,x=void 0)=>{if(x&&x.type)switch(x.type){case"touchstart":case"touchend":x.preventDefault();break}let g=500;if(!D.value)D.value=Date.now();else{const M=Date.now()-D.value;M>=3e3?g=1:M>=2500?g=2:M>=2e3?g=5:M>=1500?g=12:M>=1e3?g=25:M>=500?g=50:M>=250&&(g=100)}switch(K!==g&&(clearInterval(r.value),r.value=setInterval(()=>{f(A,g)},g)),A){case 0:D.value=0,clearInterval(r.value),b();break;case 6:l.value.width-=1;break;case 5:l.value.width+=1;break;case 1:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)-1}px`;break;case 2:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)+1}px`;break;case 3:l.value.style.top=`${(parseInt(getComputedStyle(l.value).top)||0)+1}px`;break;case 4:l.value.style.left=`${(parseInt(getComputedStyle(l.value).left)||0)-1}px`;break}F()},_=A=>{switch(A.type){case"touchstart":A.preventDefault(),m.value.imageX=parseInt(getComputedStyle(l.value).left),m.value.imageY=parseInt(getComputedStyle(l.value).top),m.value.mouseX=A.touches[0].clientX,m.value.mouseY=A.touches[0].clientY,m.value.mouseDown=!0;break;case"mousedown":m.value.imageX=parseInt(getComputedStyle(l.value).left),m.value.imageY=parseInt(getComputedStyle(l.value).top),m.value.mouseX=A.clientX,m.value.mouseY=A.clientY,m.value.mouseDown=!0;break;case"touchend":A.preventDefault();case"mouseup":m.value.mouseDown=!1,b();break;case"touchmove":if(!m.value.mouseDown)return;l.value.style.left=`${m.value.imageX+(A.touches[0].clientX-m.value.mouseX)}px`,l.value.style.top=`${m.value.imageY+(A.touches[0].clientY-m.value.mouseY)}px`;break;case"mousemove":if(!m.value.mouseDown)return;l.value.style.left=`${m.value.imageX+(A.clientX-m.value.mouseX)}px`,l.value.style.top=`${m.value.imageY+(A.clientY-m.value.mouseY)}px`;break;case"dragstart":A.preventDefault();break;case"keydown":switch(A.key){case"ArrowUp":A.preventDefault(),f(1);break;case"ArrowRight":A.preventDefault(),f(2);break;case"ArrowDown":A.preventDefault(),f(3);break;case"ArrowLeft":A.preventDefault(),f(4);break;case"+":A.preventDefault(),f(5);break;case"-":A.preventDefault(),f(6);break}break;case"keyup":f(0),b();break}F()},F=()=>{if(l.value.width<a.value&&(l.value.width=a.value),l.value.height<n.value){const A=n.value-l.value.height,K=l.value.width/l.value.height;l.value.width+=Math.ceil(A*K)}(parseInt(getComputedStyle(l.value).left)||0)>0&&(l.value.style.left="0px"),(parseInt(getComputedStyle(l.value).top)||0)>0&&(l.value.style.top="0px"),(parseInt(getComputedStyle(l.value).left)||0)<0-(l.value.width-a.value)&&(l.value.style.left=`${0-(l.value.width-a.value)}px`),(parseInt(getComputedStyle(l.value).top)||0)<0-(l.value.height-n.value)&&(l.value.style.top=`${0-(l.value.height-n.value)}px`)},Q=()=>{try{clearInterval(r.value)}catch{}m.value.mouseDown=!1,D.value=0,b()};return window.addEventListener("mouseup",Q),window.addEventListener("mousemove",_),window.addEventListener("touchend",Q),window.addEventListener("touchmove",_),Tl(()=>{window.removeEventListener("mouseup",Q),window.removeEventListener("mousemove",_),window.removeEventListener("touchend",Q),window.removeEventListener("touchmove",_)}),(A,K)=>(u(),P("div",{style:kl(s.value)},[o(cl,{ref_key:"badgeImageForm",ref:U,enctype:"multipart/form-data"},{default:i(()=>[o(j,null,{default:i(()=>[o(Y,null,{default:i(()=>[o(Jl,{label:A.label||"",name:A.name||"",hint:A.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:c,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[L.value.required],"error-messages":A.errorMessages||"","persistent-hint":A.persistentHint||!1,disabled:!k.value||A.disabled||!1,"hide-details":"",onChange:B,onBlur:q},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),W("p",Ft,[k.value?$("",!0):(u(),P("small",qt,"File Uploading"))])]),_:1})]),_:1}),o(j,null,{default:i(()=>[o(Y,{class:"text-center"},{default:i(()=>[X(" Preview "),p.value?(u(),P("div",Nt,[o(Xl,{indeterminate:"",color:"primary",size:128,width:10},{default:i(()=>[X("Uploading")]),_:1})])):(u(),P("div",{key:1,class:"image-preview my-auto mx-auto",onMousemove:_,onMousedown:_,onMouseup:_,onTouchstart:_,onTouchmove:_,onTouchend:_},[W("img",{src:d.value,ref_key:"imageDisplay",ref:l,alt:"Your badge image",onLoad:E,onDragstart:_,onKeydown:_,onKeyup:_,tabindex:"0",class:"d-none"},null,40,Bt)],32))]),_:1})]),_:1}),O.value?(u(),T(j,{key:0,class:"my-auto mx-auto",style:{"max-width":"280px"}},{default:i(()=>[o(Y,null,{default:i(()=>[o(de,{icon:"mdi:mdi-plus",color:"primary",onMousedown:K[0]||(K[0]=x=>f(5,0,x)),onMouseup:K[1]||(K[1]=x=>f(0,0,x)),onTouchstart:K[2]||(K[2]=x=>f(5,0,x)),onTouchend:K[3]||(K[3]=x=>f(0,0,x))})]),_:1}),o(Y,{class:"text-right"},{default:i(()=>[o(de,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:K[4]||(K[4]=x=>f(6,0,x)),onMouseup:K[5]||(K[5]=x=>f(0,0,x)),onTouchstart:K[6]||(K[6]=x=>f(6,0,x)),onTouchend:K[7]||(K[7]=x=>f(0,0,x))})]),_:1})]),_:1})):$("",!0)]),_:1},512)],4))}});const Gt=Cl(Yt,[["__scopeId","data-v-245aa7bc"]]),Kt=Me({..._l({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Ht=Be()({name:"VRadio",props:Kt(),setup(e,y){let{slots:t}=y;return Ke(()=>o(il,pe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}});const Xt=Me({height:{type:[Number,String],default:"auto"},...Kl(),...ol(Ol(),["multiple"]),trueIcon:{type:ze,default:"$radioOn"},falseIcon:{type:ze,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Wt=Be()({name:"VRadioGroup",inheritAttrs:!1,props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,y){let{attrs:t,slots:R}=y;const h=Vl(),b=re(()=>e.id||`radio-group-${h}`),V=Re(e,"modelValue");return Ke(()=>{const[U,k]=Sl(t),[c,l]=Ne.filterProps(e),[d,p]=il.filterProps(e),D=R.label?R.label({label:e.label,props:{for:b.value}}):e.label;return o(Ne,pe({class:["v-radio-group",e.class],style:e.style},U,c,{modelValue:V.value,"onUpdate:modelValue":r=>V.value=r,id:b.value}),{...R,default:r=>{let{id:m,messagesId:n,isDisabled:a,isReadonly:s}=r;return o(G,null,[D&&o(Hl,{id:m.value},{default:()=>[D]}),o(Rl,pe(d,{id:m.value,"aria-describedby":n.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:a.value,readonly:s.value,"aria-labelledby":D?m.value:void 0,multiple:!1},k,{modelValue:V.value,"onUpdate:modelValue":O=>V.value=O}),R)])}})}),{}}}),al=ye({__name:"FormField",props:te({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0}}),emits:te(["change","input","update:field"],["update:modelValue"]),setup(e,{emit:y}){const t=e,{admin:R=!1,disabled:h=!1,persistentHint:b=!1,required:V=!1}=t,U=S(""),k=be(e,"modelValue"),c=Ge(t,y,void 0,void 0,"field"),l=S(Te(c.value)),d=S({maxlength:n=>!t.maxLength||n.length<=t.maxLength||`Maximum length is ${t.maxLength} characters. (Current length: ${n.length})`,minlength:n=>!t.minLength||n.length>=t.minLength||`Minimum length is ${t.minLength} characters. (Current length: ${n.length})`,required:n=>!t.required||!!n.replace(/\s/g,"")||"Required field."}),p=S(!1),D=S([]),r=S("");try{const n=JSON.parse(k.value);Array.isArray(n)?D.value=n:typeof n=="boolean"?p.value=n:r.value=k.value}catch{p.value=!1,D.value=[],r.value=k.value}ae(p,()=>{k.value=JSON.stringify(p.value),y("input"),y("change")}),ae(D,()=>{k.value=JSON.stringify(D.value),y("input"),y("change")},{deep:!0}),ae(r,()=>{k.value=r.value,y("input"),y("change")}),ae(c.value,()=>{l.value.Type!==c.value.Type?(l.value=Te(c.value),p.value=!1,D.value=[],r.value=""):l.value=Te(c.value)});const m=(n=void 0)=>{y("change",n)};return(n,a)=>l.value.Type===v(se).TEXT?(u(),T(ke,{key:0,modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=s=>r.value=s),name:n.name||"",hint:l.value.Hint,label:`${l.value.Label}${v(V)?"*":""}`,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).DATE?(u(),T(ke,{key:1,modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=s=>r.value=s),type:"date",name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).NUMBER?(u(),T(ke,{key:2,modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=s=>r.value=s),type:"number",name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).TEXTAREA?(u(),T(jl,{key:3,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=s=>r.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,placeholder:l.value.Placeholder,variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.maxlength,d.value.minlength,d.value.required],onChange:m,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).CHECKBOX?(u(),P(G,{key:4},[l.value.Multiple?(u(!0),P(G,{key:0},ne(l.value.Values,s=>(u(),T(De,{key:s.ID,modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=O=>D.value=O),name:n.name||"",hint:l.value.Hint,label:s.Title,value:s.Value,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,rules:[d.value.required],onChange:m},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(u(),T(De,{key:1,modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=s=>p.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,required:v(V),rules:[s=>!v(V)||!!s||"You must tick to continue!"],onChange:m},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):l.value.Type===v(se).SELECT?(u(),P(G,{key:5},[!l.value.Autofill&&l.value.Multiple?(u(),T(qe,{key:0,modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=s=>D.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill&&l.value.Multiple?(u(),T(ll,{key:1,modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=s=>D.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,multiple:"",items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):l.value.Autofill?l.value.Autofill?(u(),T(ll,{key:3,modelValue:r.value,"onUpdate:modelValue":a[9]||(a[9]=s=>r.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):$("",!0):(u(),T(qe,{key:2,modelValue:r.value,"onUpdate:modelValue":a[8]||(a[8]=s=>r.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,items:l.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(h)||!1,"persistent-hint":v(b)||!1,"error-messages":U.value,rules:[d.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):l.value.Type===v(se).RADIO?(u(),T(Wt,{key:6,modelValue:r.value,"onUpdate:modelValue":a[10]||(a[10]=s=>r.value=s),name:n.name||"",hint:l.value.Hint,label:l.value.Label,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,rules:[d.value.required],onChange:m},{default:i(()=>[(u(!0),P(G,null,ne(l.value.Values,s=>(u(),T(Ht,{key:s.Value,label:s.Title,value:s.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):l.value.Type===v(se).ACCOMMODATION?(u(),T(xt,{key:7,modelValue:D.value,"onUpdate:modelValue":a[11]||(a[11]=s=>D.value=s),name:n.name,admin:v(R),convention:n.convention,"registration-group":n.registrationGroup,data:n.field.Data,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,required:v(V),onChange:m},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).AGE?(u(),T(Pt,{key:8,modelValue:r.value,"onUpdate:modelValue":a[12]||(a[12]=s=>r.value=s),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,onChange:m},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).BADGE_IMAGE?(u(),T(Gt,{key:9,modelValue:r.value,"onUpdate:modelValue":a[13]||(a[13]=s=>r.value=s),name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,onChange:m},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):l.value.Type===v(se).EXTRAS?(u(),T(vt,{key:10,modelValue:r.value,"onUpdate:modelValue":a[14]||(a[14]=s=>r.value=s),admin:v(R),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,required:v(V),onChange:m},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).INTERESTS?(u(),T(ft,{key:11,modelValue:r.value,"onUpdate:modelValue":a[15]||(a[15]=s=>r.value=s),admin:v(R),convention:n.convention,name:n.name,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,required:v(V),onChange:m},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):l.value.Type===v(se).TICKET?(u(),T(ht,{key:12,modelValue:r.value,"onUpdate:modelValue":a[16]||(a[16]=s=>r.value=s),admin:v(R),convention:n.convention,name:n.name,"registration-group":n.registrationGroup,hint:l.value.Hint,label:l.value.Label,items:l.value.Values,disabled:v(h)||!1,"persistent-hint":v(b),"error-messages":U.value,required:v(V),onChange:m},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):$("",!0)}}),Jt={key:0,class:"my-2 text-white text-center"},jt={key:1,class:"admin-header my-2 text-white text-center"},zt=["innerHTML"],Qt=["innerHTML"],Va=ye({__name:"FormRenderer",props:te({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0}}),emits:te(["close"],["update:modelValue"]),setup(e,{emit:y}){const t=be(e,"modelValue");Ae(t.value.Sections),t.value.Sections.forEach(w=>{w.Fields&&Ae(w.Fields)});const R=S(),h=et(),b=sl(),V=S(!1),U=S(!1),k=S(!1),c=S(!1),l=S(!1),d=S(!1),p=S(!1),D=S(!1),r=S(!1),m=S(!1),n=S(!1),a=S((()=>{if(e.data!==void 0){const I=Te(e.data);return t.value.Sections.forEach(E=>{E.Fields&&E.Fields.forEach(f=>{const _=e.data.Data.find(F=>F.SectionFieldUUID===f.SectionFieldUUID&&F.SectionFieldUUID==f.SectionFieldUUID);if(_)f.Value=_.Data;else{const F={ID:0,SubmissionDataUUID:xe(),SubmissionID:e.data.ID,SubmissionUUID:e.data.SubmissionUUID,SectionID:E.ID,SectionUUID:E.SectionUUID,SectionFieldID:f.ID,SectionFieldUUID:f.SectionFieldUUID,Data:f.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};I.Data.push(F),f.Value=""}})}),I}const w={ID:0,SubmissionUUID:xe(),FormID:t.value.ID,FormUUID:t.value.FormUUID,UserID:(h==null?void 0:h.ID)||0,UserUUID:(h==null?void 0:h.UserUUID)||"",Data:[],Status:wl.SUBMISSION_STATUS_OPEN};return w.Data=t.value.Sections.map(I=>I.Fields?I.Fields.map(E=>({ID:0,SubmissionDataUUID:xe(),SubmissionID:w.ID,SubmissionUUID:w.SubmissionUUID,SectionID:I.ID,SectionUUID:I.SectionUUID,SectionFieldID:E.ID,SectionFieldUUID:E.SectionFieldUUID,Data:""})):[]).flat(),w})()),s=(w,I,E)=>{const f=a.value.Data.find(_=>_.SectionUUID===w&&_.SectionFieldUUID===I);f&&(f.Data=E)},O=(w,I,E,f,_)=>w&&w.Type===ie.FORM_TYPE_REGISTRATION?I?`/register/${e.convention.Slug||e.convention.ConventionUUID}/accommodation`:E?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badgeForm`:_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_ACCOMMODATION?E?`/register/${e.convention.Slug||e.convention.ConventionUUID}/dealer`:f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_DEALER?f?`/register/${e.convention.Slug||e.convention.ConventionUUID}/badge`:_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":w&&w.Type===ie.FORM_TYPE_BADGE?_?`/register/${e.convention.Slug||e.convention.ConventionUUID}/additional`:"/":(w&&w.Type===ie.FORM_TYPE_ADDITIONAL,"/"),L=({callback:w})=>{b.getRegistrationByConvention(e.convention.ConventionUUID).then(I=>{w&&w("Loading"),b.getAvailableConventionForms(e.convention.ConventionUUID).then(E=>{I.Submissions.forEach((x,g)=>{x.Form||(I.Submissions[g].Form=E.find(M=>M.FormUUID===x.FormUUID))});const f=I.Submissions.find(x=>x.FormUUID===a.value.FormUUID),_=I.Submissions.find(x=>{var g;return((g=x.Form)==null?void 0:g.Type)===ie.FORM_TYPE_ACCOMMODATION}),F=I.Submissions.find(x=>{var g;return((g=x.Form)==null?void 0:g.Type)===ie.FORM_TYPE_ADDITIONAL}),Q=I.Submissions.find(x=>{var g;return((g=x.Form)==null?void 0:g.Type)===ie.FORM_TYPE_DEALER}),A=I.Submissions.find(x=>{var g;return((g=x.Form)==null?void 0:g.Type)===ie.FORM_TYPE_BADGE}),K=O(f==null?void 0:f.Form,_==null?void 0:_.Form,Q==null?void 0:Q.Form,A==null?void 0:A.Form,F==null?void 0:F.Form);Qe.push(K)})})},q=({callback:w})=>{var I;(I=R.value)==null||I.validate().then(E=>{E.valid?b.saveSubmission(a.value).then(f=>{f?setTimeout(()=>{B(f,w,1)},1e3):w&&w("Failed to process request")}).catch(()=>{w&&w("Failed to process request")}):w&&w("Errors in form detected, please review and try again.")})},B=(w,I,E=1)=>{b.checkSubmission(w).then(f=>{if(f)if(f.Ready&&f.Submission){if(V.value=!1,a.value=f.Submission,I&&I("Saved"),e.admin)y("close");else if(f.Forms&&f.Forms.length>0){const _=f.Forms.find(g=>g.FormUUID===a.value.FormUUID),F=f.Forms.find(g=>g.Type===ie.FORM_TYPE_ACCOMMODATION),Q=f.Forms.find(g=>g.Type===ie.FORM_TYPE_DEALER),A=f.Forms.find(g=>g.Type===ie.FORM_TYPE_BADGE),K=f.Forms.find(g=>g.Type===ie.FORM_TYPE_ADDITIONAL),x=O(_,F,Q,A,K);Qe.push(x)}}else{if(E>5&&(V.value=!0),E>10&&(U.value=!0),E>20&&(k.value=!0),E>30&&(c.value=!0),E>40&&(l.value=!0),E>50&&(d.value=!0),E>60&&(p.value=!0),E>70&&(D.value=!0),E>80&&(r.value=!0),E>90&&(m.value=!0),E>100&&(n.value=!0),E>200){I&&(V.value=!1,U.value=!1,k.value=!1,c.value=!1,l.value=!1,d.value=!1,p.value=!1,D.value=!1,r.value=!1,m.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{B(w,I,E+1)},E<20?1e3*E:2e4)}else I&&(V.value=!1,U.value=!1,k.value=!1,c.value=!1,l.value=!1,d.value=!1,p.value=!1,D.value=!1,r.value=!1,m.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."))}).catch(()=>{I&&(V.value=!1,U.value=!1,k.value=!1,c.value=!1,l.value=!1,d.value=!1,p.value=!1,D.value=!1,r.value=!1,m.value=!1,n.value=!1,I("A problem was encountered during saving, please check form and try again."))})};return(w,I)=>{const E=El("router-link");return u(),T(Bl,null,{default:i(()=>[o(cl,{ref_key:"formValidator",ref:R,autocomplete:"off",onSubmit:I[1]||(I[1]=ul(()=>{},["prevent"]))},{default:i(()=>[t.value.Heading?(u(),P("h1",Jt,ee(t.value.Heading),1)):$("",!0),w.admin?(u(),P("h2",jt," (Admin Mode) ")):$("",!0),t.value.Description?(u(),P("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:t.value.Description},null,8,zt)):$("",!0),(u(!0),P(G,null,ne(t.value.Sections,f=>(u(),T(lt,{key:`section_${t.value.ID}.${f.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:i(()=>[f.Heading?(u(),T(tt,{key:0},{default:i(()=>[X(ee(f.Heading),1)]),_:2},1024)):$("",!0),f.Description?(u(),T(at,{key:1,class:"text-wrap"},{default:i(()=>[W("div",{innerHTML:f.Description},null,8,Qt)]),_:2},1024)):$("",!0),f.Fields?(u(),T(nt,{key:2},{default:i(()=>[(u(!0),P(G,null,ne(f.Fields,_=>(u(),P(G,{key:`field_${t.value.ID}.${f.ID}.${_.ID}`},[_.Field?(u(),T(j,{key:0},{default:i(()=>[o(Y,null,{default:i(()=>[w.editable?(u(),T(al,{key:0,name:_.SectionFieldUUID,field:_.Field,modelValue:_.Value,"onUpdate:modelValue":F=>_.Value=F,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:_.Required,"min-length":_.MinLength,"max-length":_.MaxLength,"persistent-hint":!0,onChange:F=>s(f.SectionUUID,_.SectionFieldUUID,_.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(u(),T(al,{key:1,name:_.SectionFieldUUID,field:_.Field,modelValue:_.Value,"onUpdate:modelValue":F=>_.Value=F,admin:w.admin,convention:w.convention,"registration-group":w.registrationGroup,required:_.Required,"min-length":_.MinLength,"max-length":_.MaxLength,"persistent-hint":!0,disabled:"",onChange:F=>s(f.SectionUUID,_.SectionFieldUUID,_.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):$("",!0)],64))),128))]),_:2},1024)):$("",!0)]),_:2},1024))),128)),w.preview?$("",!0):(u(),P(G,{key:3},[o(j,null,{default:i(()=>[w.admin?(u(),T(Y,{key:1,class:"text-right"},{default:i(()=>[o(de,{color:"red",onClick:I[0]||(I[0]=f=>y("close"))},{default:i(()=>[X("Cancel")]),_:1})]),_:1})):(u(),T(Y,{key:0,class:"text-right"},{default:i(()=>[o(E,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:i(()=>[o(de,{color:"red"},{default:i(()=>[X("Close")]),_:1})]),_:1})]),_:1})),w.admin||w.editable?(u(),T(Y,{key:2,class:"text-left"},{default:i(()=>[o(Ze,{onClick:q,type:"submit"})]),_:1})):(u(),T(Y,{key:3,class:"text-left"},{default:i(()=>[o(Ze,{onClick:L,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),V.value?(u(),T(j,{key:0},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):$("",!0),U.value?(u(),T(j,{key:1},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):$("",!0),k.value?(u(),T(j,{key:2},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):$("",!0),c.value?(u(),T(j,{key:3},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Reticulating splines ")]),_:1})]),_:1})):$("",!0),l.value?(u(),T(j,{key:4},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):$("",!0),d.value?(u(),T(j,{key:5},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):$("",!0),p.value?(u(),T(j,{key:6},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):$("",!0),D.value?(u(),T(j,{key:7},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):$("",!0),r.value?(u(),T(j,{key:8},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):$("",!0),m.value?(u(),T(j,{key:9},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):$("",!0),n.value?(u(),T(j,{key:10},{default:i(()=>[o(Y,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:i(()=>[X(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):$("",!0)],64))]),_:1},512)]),_:1})}}});export{Ua as F,vl as T,ll as V,al as _,ka as a,Da as b,se as c,Va as d,Ca as e,ut as f,Ta as m,Ae as s,it as u};
