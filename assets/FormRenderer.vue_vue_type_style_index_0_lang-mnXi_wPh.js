import{i as ie,M as z,N as re,X as Te,r as V,w as le,c as Ve,n,B as N,D as _,y as K,f as m,v as s,F as H,Q as ee,m as fe,q as y,A as L,x as X,C as v,k as me,z as Re,a2 as ye,P as Se,E as Ye,b as Xe,aq as _e,_ as Je,p as qe,d as xe,R as Fe,aa as we,S as We,u as Ke,aM as je,l as ze,aN as Ee}from"./index-QgSUQDwF.js";import{F as te}from"./form-0fJbSFPv.js";import{S as Qe}from"./submission-40fey8Hx.js";import{u as Ce}from"./useModel-V2-00gfl.js";import{s as ce}from"./index-2XRRB2DS.js";import{V as ue,b as Ne,a as se,c as ge,d as ve}from"./VList-7XLu4LXC.js";import{V as J,a as P}from"./VRow-YydxPjZ2.js";import{V as de}from"./VCheckbox-9nV3XZu-.js";import{a as De,V as Ae}from"./VAutocomplete-JcG2FyLd.js";import{T as Ze}from"./ticket-hqexX1_U.js";import{b as Ue,V as j,n as et,u as Pe,c as tt}from"./VContainer-Xrl4l37f.js";import{c as lt}from"./copyToClipboard-aCoRGJiH.js";import{b as at,_ as Oe}from"./SaveButton.vue_vue_type_script_setup_true_lang-jE82jYcn.js";import{u as Be}from"./useStoreAPI-pVq7s2hF.js";import{V as Me}from"./forwardRefs-SADT1Bm6.js";import{a as ke,V as he,m as nt,b as ot}from"./VTextField-KAVWSgOE.js";import{V as st}from"./VFileInput-olwFJ9ve.js";import{V as He}from"./VForm-yiu92J1G.js";import{V as it}from"./VTextarea-sJTnPvvd.js";import{m as ut,a as Ge,b as rt,c as dt}from"./VCheckboxBtn-cpm9H_gm.js";import{G as mt}from"./userData-Bgavvc6T.js";import{v as be}from"./v4-yQnnJER4.js";import{e as vt,a as ct,b as ft,c as pt}from"./VCard-D6lGZoNj.js";var Z=(a=>(a.ACCOMMODATION="ACCOMMODATION",a.AGE="AGE",a.BADGE_IMAGE="BADGE_IMAGE",a.CHECKBOX="CHECKBOX",a.DATE="DATE",a.EXTRAS="EXTRAS",a.HTML="HTML",a.INTERESTS="INTERESTS",a.RADIO="RADIO",a.SELECT="SELECT",a.TEXT="TEXT",a.TEXTAREA="TEXTAREA",a.TICKET="TICKET",a.NUMBER="NUMBER",a))(Z||{});const Al=[{title:"Accommodation",value:"ACCOMMODATION"},{title:"Additional Purchase",value:"EXTRAS"},{title:"Age Check",value:"AGE"},{title:"Badge Image",value:"BADGE_IMAGE"},{title:"Button",value:"RADIO"},{title:"Checkbox",value:"CHECKBOX"},{title:"Date",value:"DATE"},{title:"Dropdown",value:"SELECT"},{title:"HTML",value:"HTML"},{title:"Interests",value:"INTERESTS"},{title:"Text",value:"TEXT"},{title:"Textarea",value:"TEXTAREA"},{title:"Ticket",value:"TICKET"},{title:"Number",value:"NUMBER"}],pe=a=>{a.sort((q,f)=>(q.Order?q.Order:0)-(f.Order?f.Order:0)),a.forEach((q,f)=>{q.Order=f})},Ol=(a,q)=>{const f=q.indexOf(a);if(f===0)return;const A=a.Order;a.Order=q[f-1].Order,q[f-1].Order=A,pe(q)},Ml=(a,q)=>{const f=q.indexOf(a);if(f>=q.length-1)return;const A=a.Order;a.Order=q[f+1].Order,q[f+1].Order=A,pe(q)},gt={class:"extrasList"},ht=ie({__name:"Extras",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:q}){const f=a,{admin:A=!1,convention:E,disabled:U=!1}=f,M=re(a,"modelValue"),x=q,$=Te.getInstance(),O=V({});try{O.value=JSON.parse(M.value)}catch{}const c=V([]),e=V([]);le(f,()=>{i()}),le(O.value,d=>{for(const k in d)if(d[k].checked){const o=c.value.map(l=>{var D;return(D=l.Options)==null?void 0:D.find(u=>u.OptionUUID===k)});if(o&&o.length>0)try{const l=o[0];d[k].choiceId===""&&l&&l.Choices&&l.Choices.length>0&&(d[k].choiceId=l.Choices[0].TagUUID),d[k].price=l==null?void 0:l.Price}catch{}}else d[k].choiceId="",d[k].price=0;M.value=JSON.stringify(d),C()});const p=Ve({get:()=>c.value.map(d=>d.ExtraUUID),set:()=>{}}),i=()=>{var k;const d=((k=f.items.find(o=>o.Title==="SelectedExtras"))==null?void 0:k.Value)||"[]";try{const o=JSON.parse(d);c.value=e.value.filter(l=>o.find(D=>D===l.ExtraUUID))||[],p.value=[...c.value.map(l=>l.ExtraUUID)],c.value.forEach(l=>{var D;(D=l.Options)==null||D.forEach(u=>{O.value[u.OptionUUID]||(O.value[u.OptionUUID]={choiceId:"",checked:!1})})})}catch{}};"Extras"in E&&E.Extras.length?(e.value=E.Extras,i()):"ConventionUUID"in E&&(A?$==null||$.getConventionExtras(E.ConventionUUID).then(d=>{d&&(e.value=d,i())}):$==null||$.getAvailableConventionExtras(E.ConventionUUID).then(d=>{d&&(e.value=d,i())}));const C=(d=void 0)=>{setTimeout(()=>x("change",d),100)};return(d,k)=>(n(),N("div",gt,[_("h4",null,K(d.label),1),m(ue,{opened:p.value,"onUpdate:opened":k[0]||(k[0]=o=>p.value=o)},{default:s(()=>[(n(!0),N(H,null,ee(c.value,o=>(n(),y(Ne,{key:o.ExtraUUID,value:o.ExtraUUID},{activator:s(({props:l})=>[m(se,fe({"prepend-icon":"mdi:mdi-group","append-icon":""},l),{default:s(()=>[o.Name?(n(),y(ge,{key:0},{default:s(()=>[_("strong",null,K(o.Name),1)]),_:2},1024)):L("",!0),o.Description?(n(),y(ve,{key:1,class:"mt-2 d-inline"},{default:s(()=>[X(K(o.Description),1)]),_:2},1024)):L("",!0)]),_:2},1040)]),default:s(()=>[o.Options?(n(!0),N(H,{key:0},ee(o.Options,l=>(n(),y(se,{key:l.OptionUUID,class:"override-pl"},{default:s(()=>[m(J,null,{default:s(()=>[m(P,{cols:"12",sm:"6"},{default:s(()=>[m(de,{label:`${l.Name} ${l.Price&&l.Price!==0?`(${v(ce).currencySymbol}${l.Price})`:""}`,modelValue:O.value[l.OptionUUID].checked,"onUpdate:modelValue":D=>O.value[l.OptionUUID].checked=D,disabled:v(U),"hide-details":"",onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),l.Choices&&l.Choices.length>1&&O.value[l.OptionUUID].checked?(n(),y(P,{key:0,cols:"12",sm:"6"},{default:s(()=>[m(De,{items:l.Choices.sort((D,u)=>D.Title.localeCompare(u.Title)).map(D=>({value:D.TagUUID,title:D.Title})),modelValue:O.value[l.OptionUUID].choiceId,"onUpdate:modelValue":D=>O.value[l.OptionUUID].choiceId=D,"item-value":"value","item-title":"title",variant:"outlined",disabled:v(U),"hide-details":"",onChange:C},null,8,["items","modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024))),128)):L("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["opened"])]))}}),yt=["innerHTML"],Ut=ie({__name:"HTML",props:{data:{}},setup(a){const q=a,f=V({html:""}),A=()=>{try{const E=JSON.parse(q.data);E&&(f.value=E)}catch{}};return A(),le(q,()=>{A()}),(E,U)=>(n(),N("div",{innerHTML:f.value.html},null,8,yt))}}),bt={class:"interestList"},It=ie({__name:"Interests",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:q}){const f=a,{admin:A=!1,convention:E,disabled:U=!1}=f,M=re(a,"modelValue"),x=q,$=Te.getInstance(),O=V({});try{O.value=JSON.parse(M.value)}catch{}const c=V([]),e=V([]);le(O.value,d=>{M.value=JSON.stringify(d)});const p=V([]),i=()=>{var k;const d=((k=f.items.find(o=>o.Title==="SelectedInterests"))==null?void 0:k.Value)||"[]";try{const o=JSON.parse(d);c.value=e.value.filter(l=>o.find(D=>D===l.InterestUUID))||[],p.value=[...c.value.map(l=>l.InterestUUID)]}catch{}};"ConventionUUID"in E&&(A?$==null||$.getConventionInterests(E.ConventionUUID).then(d=>{d&&(e.value=d,i())}):$==null||$.getConventionInterests(E.ConventionUUID).then(d=>{d&&(e.value=d,i())})),le(f,()=>{i()});const C=(d=void 0)=>{setTimeout(()=>x("change",d),100)};return(d,k)=>(n(),N("div",bt,[_("h4",null,K(d.label),1),m(ue,{opened:p.value,"onUpdate:opened":k[0]||(k[0]=o=>p.value=o)},{default:s(()=>[(n(!0),N(H,null,ee(c.value.sort((o,l)=>o.Order>l.Order?1:o.Order==l.Order?0:-1),o=>(n(),y(se,{key:o.InterestUUID},{default:s(()=>[m(J,null,{default:s(()=>[m(P,null,{default:s(()=>[m(de,{label:`${o.Name} ${o.Price&&o.Price>0?`(${v(ce).currencySymbol}${o.Price})`:""}`,modelValue:O.value[o.InterestUUID],"onUpdate:modelValue":l=>O.value[o.InterestUUID]=l,disabled:v(U),messages:o.Description,onChange:C},null,8,["label","modelValue","onUpdate:modelValue","disabled","messages"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["opened"])]))}}),$e=(a,q,f)=>{if(f>=a.length){let A=f-a.length+1;for(;A--;)a.push(void 0)}a.splice(f,0,a.splice(q,1)[0])},Ie=a=>(pe(a),a),$l=a=>(q,f)=>q[a]<f[a]?-1:q[a]>f[a]?1:0,Dt={class:"ticketList"},kt={key:0,class:"text-orange-darken-1"},Tt=ie({__name:"Tickets",props:z({admin:{type:Boolean},convention:{},disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change"],["update:modelValue"]),setup(a,{emit:q}){const f=a,{admin:A=!1,convention:E,disabled:U=!1,registrationGroup:M=void 0}=f,x=re(a,"modelValue"),$=q,O=Te.getInstance(),c=V({Ticket:[],AddonsChecked:[],ComponentsChecked:[]});try{c.value=JSON.parse(x.value),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked)}catch{}const e=V([]),p=V([]),i=V([]),C=V({required:(D,u=void 0)=>()=>{if(U||!(M!=null&&M.Registration.Leader))return!0;if(u==null){if(c.value.Ticket.length===0&&f.required)return"Must select at least one ticket option.";if(D&&D.ComponentsRequired>0&&c.value.Ticket.includes(D.TicketUUID||"")){let B=0;if(D.TicketComponents.forEach(Y=>{c.value.ComponentsChecked.forEach(G=>{Y.TicketUUID===G&&(B+=1)})}),B<D.ComponentsRequired)return`Must select ticket ${D.ComponentsRequired} component${D.ComponentsRequired===1?"":"s"}`}}return!0}}),d=()=>{var u;const D=((u=f.items.find(B=>B.Title==="SelectedTickets"))==null?void 0:u.Value)||"[]";try{const B=JSON.parse(D);e.value=p.value.filter(Y=>Y.Type==="TICKET_TYPE_GROUP"&&B.find(G=>G===Y.TicketUUID))||[],i.value=[...e.value.filter(Y=>Y.Type==="TICKET_TYPE_GROUP").map(Y=>Y.TicketUUID)]}catch{}};if("ConventionUUID"in E)if(A)O==null||O.getConventionTickets(E.ConventionUUID).then(D=>{D&&(p.value=D,d())});else{const D=f.items.find(u=>u.Title==="SelectedTickets");D&&(O==null||O.getFieldTickets(D.FieldUUID).then(u=>{u&&(p.value=u,d())}))}le(f,()=>{d()});const k=D=>{c.value.Ticket.length>1&&c.value.Ticket.shift(),c.value.ComponentsChecked=[];const u=[];e.value.forEach(B=>{(c.value.Ticket.includes(B.TicketUUID)||c.value.ComponentsChecked.includes(B.TicketUUID))&&u.push(...B.AddonTickets.map(Y=>Y.TicketUUID))}),c.value.AddonsChecked=c.value.AddonsChecked.filter(B=>u.includes(B)),l(D)},o=D=>{const u=p.value.find(B=>B.TicketUUID===c.value.Ticket[0]);if(u)for(;c.value.ComponentsChecked.length>u.ComponentsRequired;)c.value.ComponentsChecked.shift();l(D)},l=(D=void 0)=>{x.value=JSON.stringify(c.value),setTimeout(()=>$("change",D),100)};try{M!=null&&M.TicketData&&(c.value=JSON.parse(M.TicketData),"ticket"in c.value&&(c.value.Ticket=c.value.ticket),"addonsChecked"in c.value&&(c.value.AddonsChecked=c.value.addonsChecked),"componentsChecked"in c.value&&(c.value.ComponentsChecked=c.value.componentsChecked),l())}catch{}return(D,u)=>{var B;return n(),N("div",Dt,[_("h4",null,[X(K(D.label)+" ",1),(B=v(M))!=null&&B.Registration.Leader?L("",!0):(n(),N("small",kt,"(controlled by group leader)"))]),m(ue,{opened:i.value,"onUpdate:opened":u[4]||(u[4]=Y=>i.value=Y)},{default:s(()=>[(n(!0),N(H,null,ee(v(Ie)(e.value.filter(Y=>Y.Type===v(Ze).TICKET_TYPE_GROUP)),Y=>(n(),N(H,{key:Y.TicketUUID},[Y.Tickets.length>0?(n(),y(Ne,{key:0,value:Y.TicketUUID},{activator:s(({props:G})=>[m(se,fe(G,{"prepend-icon":"mdi:mdi-group"}),{default:s(()=>[m(ge,null,{default:s(()=>[_("strong",null,K(Y.Name),1)]),_:2},1024),m(ve,{class:"d-inline"},{default:s(()=>[X(K(Y.Description),1)]),_:2},1024)]),_:2},1040)]),default:s(()=>[(n(!0),N(H,null,ee(Y.Tickets,G=>(n(),y(se,{key:G.TicketUUID,class:"override-pl"},{default:s(()=>{var T;return[m(ve,{class:"d-inline"},{default:s(()=>[X(K(G.Description),1)]),_:2},1024),m(de,{modelValue:c.value.Ticket,"onUpdate:modelValue":u[0]||(u[0]=g=>c.value.Ticket=g),value:G.TicketUUID,onChange:k,rules:[C.value.required(G)],"validate-on":"submit",disabled:v(U)||!((T=v(M))!=null&&T.Registration.Leader)},{label:s(()=>[m(Ue,{icon:G.RequiresAccommodation?"mdi:mdi-home":G.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+K(`${G.Name} ${G.Price>0?`(${v(ce).currencySymbol}${G.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"]),c.value.Ticket.length>0&&G.TicketUUID===c.value.Ticket[0]?(n(),N(H,{key:0},[G.AddonTickets.length?(n(),y(ue,{key:0},{default:s(()=>[(n(!0),N(H,null,ee(v(Ie)(G.AddonTickets),g=>(n(),N(H,{key:g==null?void 0:g.TicketUUID},[g?(n(),y(se,{key:0},{default:s(()=>[m(ge,null,{default:s(()=>{var S;return[m(de,{modelValue:c.value.AddonsChecked,"onUpdate:modelValue":u[1]||(u[1]=b=>c.value.AddonsChecked=b),value:g.TicketUUID,onChange:u[2]||(u[2]=b=>{c.value.ComponentsChecked=[],l(b)}),disabled:v(U)||!((S=v(M))!=null&&S.Registration.Leader)},{label:s(()=>[m(Ue,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+K(`${g.Name} ${g.Price>0?`(${v(ce).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","disabled"])]}),_:2},1024),m(ve,{class:"d-inline"},{default:s(()=>[X(K(g.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0),G.TicketComponents.length?(n(),y(ue,{key:1},{default:s(()=>[(n(!0),N(H,null,ee(v(Ie)(G.TicketComponents),g=>(n(),N(H,{key:g==null?void 0:g.TicketUUID},[g?(n(),y(se,{key:0},{default:s(()=>[m(ge,null,{default:s(()=>{var S;return[m(de,{modelValue:c.value.ComponentsChecked,"onUpdate:modelValue":u[3]||(u[3]=b=>c.value.ComponentsChecked=b),value:g.TicketUUID,onChange:o,rules:[C.value.required(G,g)],"validate-on":"submit",disabled:v(U)||!((S=v(M))!=null&&S.Registration.Leader)},{label:s(()=>[m(Ue,{icon:g.RequiresAccommodation?"mdi:mdi-home-plus":g.ComponentsRequired>0?"mdi:mdi-ticket-confirmation":"mdi:mdi-ticket",class:"mx-2"},null,8,["icon"]),X(" "+K(`${g.Name} ${g.Price>0?`(${v(ce).currencySymbol}${g.Price})`:""}`),1)]),_:2},1032,["modelValue","value","rules","disabled"])]}),_:2},1024),m(ve,null,{default:s(()=>[X(K(g.Description),1)]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)],64)):L("",!0)]}),_:2},1024))),128))]),_:2},1032,["value"])):L("",!0)],64))),128))]),_:1},8,["opened"])])}}}),Vt={key:0},St=_("strong",null,"Your Sharing Group",-1),Ct={class:"d-flex flex-wrap my-2"},wt=_("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 font-weight-bold pa-1 pt-4"}," Leader: ",-1),Et={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1 align-content-center"},At={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Ot=_("dt",{class:"v-col-12 v-col-sm-2 v-col-md-1 pa-1 pt-4"}," Member: ",-1),Mt={class:"v-col-12 v-col-sm-10 v-col-md-11 pa-1"},$t={class:"d-inline-block position-relative ml-4",style:{top:"-5px"}},Lt=["href"],Rt=_("br",null,null,-1),qt=_("small",null,"Link will be copied to clipboard for you to paste (ctrl+v) in to message or email",-1),xt=_("strong",null,"Your Groups Accommodation",-1),Nt=_("br",null,null,-1),Pt=_("small",null,"(in order of preference, controlled by group leader)",-1),Bt=_("strong",null,"Accommodation Options",-1),Ht=_("br",null,null,-1),Gt=_("strong",null,"Your Chosen Accommodation",-1),Yt=_("small",null,"(in order of preference)",-1),Xt=ie({__name:"Accommodation",props:z({admin:{type:Boolean},convention:{},data:{},disabled:{type:Boolean},hint:{},items:{},label:{},name:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change","update:items"],["update:modelValue"]),setup(a,{emit:q}){const f=a,{admin:A=!1,convention:E,disabled:U}=f,M=q,x=re(a,"modelValue"),$=Ce(f,M,void 0,void 0,"items"),O=Se(),c=Be(),e=Ye.getInstance(),p=V(me(x.value)),i=V([]),C=V(),d=V({sharing:!1}),k=()=>{try{const t=JSON.parse(f.data);t&&(d.value=t)}catch{}};k(),le(f,()=>{k(),f.registrationGroup&&(i.value=f.registrationGroup.Members,C.value=f.registrationGroup.Registration)}),le(p,t=>{x.value=me(t)},{deep:!0});const o=V(""),l=V(!1),D=()=>{var t;(t=C.value)!=null&&t.Leader&&O.getRegistrationInvite(E.ConventionUUID).then(r=>{if(r){const W=new URL(location.href);W.searchParams.set("token",r),o.value=W.toString()}})},u=()=>{lt(o.value),D(),l.value=!0,setTimeout(()=>l.value=!1,2200)},B=(t=void 0)=>{setTimeout(()=>M("change",t),100)},Y=V({required:t=>!f.required||t.length>0||"Selections Required"}),G=t=>t?`${t.Reference?`#${t.Reference}`:"(not registered)"} ${t.Name}`:"",T=()=>{var t;e.emit("registration.group.leave",(t=C.value)==null?void 0:t.RegistrationUUID)},g=t=>{e.emit("registration.group.remove.member",t)},S=V([]);le($,()=>{b()});const b=()=>{A?O.getConventionAccommodation(E.ConventionUUID).then(t=>{S.value=t.filter(r=>!!($!=null&&$.value.find(W=>W.Value===r.AccommodationUUID)))||[]}):$.value.length>0&&O.getFieldAccommodation($.value[0].FieldUUID).then(t=>{S.value=t.filter(r=>!!($!=null&&$.value.find(W=>W.Value===r.AccommodationUUID)))||[]})};b(),(()=>{var t;if(f.registrationGroup)if(i.value=f.registrationGroup.Members,C.value=f.registrationGroup.Registration,(t=C.value)!=null&&t.Leader)D();else try{p.value=JSON.parse(f.registrationGroup.AccommodationData),B()}catch{}})();const h=V({column:0,id:""}),F=()=>{!U&&!p.value.includes(h.value.id)&&(h.value.column===0&&h.value.id!==""&&p.value.push(h.value.id),B())},ae=()=>{const t=p.value.findIndex(r=>r===h.value.id);!U&&t>=0&&(p.value.splice(t,1),B())},oe=()=>{if(U||h.value.column!==1)return;const t=p.value.findIndex(r=>r===h.value.id);t<=0||($e(p.value,t,t-1),B())},I=()=>{if(U||h.value.column!==1)return;const t=p.value.findIndex(r=>r===h.value.id);t>=p.value.length-1||($e(p.value,t,t+1),B())};return(t,r)=>{var W;return n(),N(H,null,[_("h4",null,K(t.label),1),m(J,null,{default:s(()=>[m(P,{cols:"12"},{default:s(()=>{var R,ne;return[i.value&&C.value&&d.value.sharing?(n(),N("div",Vt,[St,!v(U)&&((R=i.value.find(Q=>Q.IsLeader))==null?void 0:R.UUID)!==C.value.RegistrationUUID?(n(),y(j,{key:0,color:"red",variant:"text",onClick:T},{default:s(()=>[X("(leave group)")]),_:1})):L("",!0),_("dl",Ct,[wt,_("dd",Et,[m(Me,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(((ne=i.value.find(Q=>Q.IsLeader))==null?void 0:ne.UserUUID)||""),height:"32",width:"32"},null,8,["src"]),_("div",At,K(G(i.value.find(Q=>Q.IsLeader))),1)]),(n(!0),N(H,null,ee(i.value,Q=>(n(),N(H,{key:Q.UUID},[Q.IsLeader?L("",!0):(n(),N(H,{key:0},[Ot,_("dd",Mt,[m(Me,{class:"rounded-circle d-inline-block",src:v(c).GetProfileImageURL(Q.UserUUID),height:"32",width:"32"},null,8,["src"]),_("div",$t,[X(K(G(Q))+" ",1),C.value.Leader?(n(),y(j,{key:0,variant:"text",class:"ml-4",icon:"mdi:mdi-close-circle",color:"red",size:"xs",title:"Remove Member",onClick:sl=>g(Q.UUID),disabled:v(U)},null,8,["onClick","disabled"])):L("",!0)])])],64))],64))),128))]),m(at,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=Q=>l.value=Q),message:"Invite Link Copied",timeout:2e3},null,8,["modelValue"]),o.value&&C.value.Leader&&!v(U)?(n(),N(H,{key:1},[_("a",{href:o.value,onClick:Re(u,["prevent"]),class:"text-white text-decoration-none"},[m(j,{color:"blue",class:"mb-2"},{default:s(()=>[X("Get Invite Link")]),_:1})],8,Lt),Rt,qt],64)):L("",!0)])):L("",!0)]}),_:1})]),_:1}),C.value&&!C.value.Leader?(n(),y(J,{key:0},{default:s(()=>[m(P,{cols:"10",md:"5"},{default:s(()=>[xt,Nt,Pt,m(ue,null,{default:s(()=>[(n(!0),N(H,null,ee(p.value.map(R=>S.value.find(ne=>ne.AccommodationUUID==R)).filter(R=>R!==void 0),(R,ne)=>(n(),N(H,null,[R?(n(),y(se,{key:R.AccommodationUUID,title:`${ne+1}. ${R.Name}`,class:ye(h.value.column===1&&h.value.id===R.AccommodationUUID?"bg-blue-accent-3":"border-dashed border")},null,8,["title","class"])):L("",!0)],64))),256))]),_:1})]),_:1})]),_:1})):(n(),y(J,{key:1},{default:s(()=>[m(P,{cols:"12",md:"5"},{default:s(()=>[Bt,Ht,m(ue,null,{default:s(()=>[(n(!0),N(H,null,ee(S.value,R=>(n(),y(se,{key:R.AccommodationUUID,title:R.Name,class:ye(h.value.column===0&&h.value.id===R.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:ne=>h.value={column:0,id:R.AccommodationUUID},"append-icon":v(U)?"":"mdi:mdi-gesture-tap",onDblclick:r[1]||(r[1]=ne=>F())},null,8,["title","class","onClick","append-icon"]))),128))]),_:1})]),_:1}),v(U)?L("",!0):(n(),y(P,{key:0,cols:"12",md:"1"},{default:s(()=>[m(J,{class:"d-md-none"},{default:s(()=>[m(P,{cols:"12",class:"text-center"},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-down",size:"small",onClick:r[2]||(r[2]=R=>F()),color:"primary",title:"Select"}),X(" Â  "),m(j,{icon:"mdi:mdi-arrow-up",size:"small",onClick:r[3]||(r[3]=R=>ae()),color:"secondary",title:"Remove"})]),_:1})]),_:1}),m(J,{class:"d-none d-md-flex h-100 align-content-center"},{default:s(()=>[m(P,{cols:"12"},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-right",size:"small",onClick:r[4]||(r[4]=R=>F()),color:"primary",title:"Select"})]),_:1}),m(P,{cols:"12"},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-left",size:"small",onClick:r[5]||(r[5]=R=>ae()),color:"secondary",title:"Remove"})]),_:1})]),_:1})]),_:1})),m(P,{cols:"10",md:"5"},{default:s(()=>[Gt,m(ue,null,{default:s(()=>[(n(!0),N(H,null,ee(p.value.map(R=>S.value.find(ne=>ne.AccommodationUUID==R)).filter(R=>R!==void 0),(R,ne)=>(n(),N(H,null,[R?(n(),y(se,{key:R.AccommodationUUID,title:`${ne+1}. ${R.Name}`,class:ye(h.value.column===1&&h.value.id===R.AccommodationUUID?"bg-blue-accent-3":"border-dashed border"),onClick:Q=>h.value={column:1,id:(R==null?void 0:R.AccommodationUUID)||""},"append-icon":v(U)?"":"mdi:mdi-gesture-tap",onDblclick:r[6]||(r[6]=Q=>ae())},null,8,["title","class","onClick","append-icon"])):L("",!0)],64))),256))]),_:1}),Yt]),_:1}),v(U)?L("",!0):(n(),y(P,{key:1,cols:"2",md:"1"},{default:s(()=>[m(J,{class:"d-flex h-100 align-content-center mt-3"},{default:s(()=>[m(P,{cols:"12"},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-up",size:"small",onClick:r[7]||(r[7]=R=>oe()),color:"primary",title:"Higher Priority"})]),_:1}),m(P,{cols:"12"},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-down",size:"small",onClick:r[8]||(r[8]=R=>I()),color:"secondary",title:"Lower Priority"})]),_:1})]),_:1})]),_:1}))]),_:1})),(W=C.value)!=null&&W.Leader?(n(),y(ke,{key:2,modelValue:x.value,"onUpdate:modelValue":r[9]||(r[9]=R=>x.value=R),disabled:v(U)||!1,"persistent-hint":t.persistentHint||!1,"error-messages":t.errorMessages||"",rules:[Y.value.required],class:"accommodation-field-warning"},null,8,["modelValue","disabled","persistent-hint","error-messages","rules"])):L("",!0)],64)}}}),_t=ie({__name:"AgeCheck",props:z({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["blur","change","update:items"],["update:modelValue"]),setup(a,{emit:q}){const f=q,A=a,E=Ce(A,f,void 0,void 0,"items"),U=re(a,"modelValue"),M=V({required:e=>!A.required||!!e||"Required.",min:e=>{var D,u;const p=new Date,i=p.getFullYear(),C=(p.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2}),d=p.getDate().toLocaleString("en-US",{minimumIntegerDigits:2}),k=((D=E.value.find(B=>B.Title=="MIN_AGE"))==null?void 0:D.Value)||"18",o=((u=E.value.find(B=>B.Title=="BEFORE_DATE"))==null?void 0:u.Value)||`${i}-${C}-${d}`,l=O(o);return $(e,o,parseInt(k))||`You must be at least ${k} years old by ${l.toLocaleDateString(navigator.language,{timeZone:"UTC"})}.`}}),x=()=>(f("blur"),!(M.value.min(U.value||"")!==!0||M.value.required(U.value||"")!==!0)),$=(e,p,i)=>{if(e>=p)return!1;const C=O(e),k=O(p).getTime()-C.getTime(),o=1e3*60*60*24*365.25;return k/o>=i},O=e=>{const[p,i,C]=e.split("-");return new Date(parseInt(p),parseInt(i)-1,parseInt(C))},c=(e=void 0)=>{setTimeout(()=>f("change",e),100)};return(e,p)=>(n(),y(he,{modelValue:U.value,"onUpdate:modelValue":p[0]||(p[0]=i=>U.value=i),type:"date",hint:e.hint||"",label:e.label||"",name:e.name||"",variant:"outlined",disabled:e.disabled||!1,"persistent-hint":e.persistentHint||!1,"error-messages":e.errorMessages||"",rules:[M.value.required,M.value.min],onBlur:x,onChange:c},null,8,["modelValue","hint","label","name","disabled","persistent-hint","error-messages","rules"]))}}),Jt={class:"text-center"},Ft={key:0},Wt={key:0,class:"image-progress my-auto mx-auto"},Kt=["src"],jt=ie({__name:"BadgeImage",props:z({disabled:{type:Boolean},hint:{},label:{},name:{},items:{},persistentHint:{type:Boolean},registration:{},required:{type:Boolean},errorMessages:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["blur","change","update:items"],["update:modelValue"]),setup(a,{emit:q}){const f=q,A=a,E=re(a,"modelValue"),U=V({}),M=()=>{U.value.left=parseInt(getComputedStyle(i.value).left),U.value.top=parseInt(getComputedStyle(i.value).top),U.value.height=i.value.height,U.value.width=i.value.width,E.value=JSON.stringify(U.value)},x=Se(),$=Be(),O=V(),c=V(""),e=V(!0),p=V(),i=V(),C=V(""),d=V(!1),k=V(0),o=V(),l=V({imageX:0,imageY:0,mouseDown:!1,mouseX:0,mouseY:0}),D=V(280),u=V(280);A.items.find(I=>{if(I.Title==="TargetWidth")return u.value=parseInt(I.Value,10)||280,!0}),A.items.find(I=>{if(I.Title==="TargetHeight")return D.value=parseInt(I.Value,10)||280,!0});const B=Ve(()=>({"--preview-width":`${u.value}px`,"--preview-height":`${D.value}px`})),Y=V(!1);try{U.value=JSON.parse(E.value||"{}"),U.value.fileUUID&&(C.value=$.GetBadgeImageURL(U.value.fileUUID))}catch{}A.registration&&x.getConBadgeDisplayName(A.registration.RegistrationUUID).then(I=>{I&&(c.value=I)}).catch(()=>{});const G=V({required:I=>!A.required||!!I||"Required.",saved:()=>!e.value||"File not uploaded."}),T=()=>(f("blur"),G.value.required(E.value||"")!==!0),g=(I=void 0)=>{b().then(()=>{S(),setTimeout(()=>f("change",I),100)})},S=()=>{p.value.files.length>0&&(C.value=URL.createObjectURL(p.value.files[0]))},b=async()=>{var t;const I=new FormData((t=O.value)==null?void 0:t.$el);e.value=!1,d.value=!0,$.SaveFormFile(I).then(r=>{r.Saved&&(d.value=!1,e.value=!0,U.value.fileUUID=r.FileUUID,Y.value=!0)}).catch(()=>{})},w=()=>{i.value.style.left="0px",i.value.style.top="0px",i.value.width>i.value.height?i.value.width=u.value*(i.value.width/i.value.height):i.value.width=u.value,i.value.classList.remove("d-none")},h=(I,t=0,r=void 0)=>{if(r&&r.type)switch(r.type){case"touchstart":case"touchend":r.preventDefault();break}let W=500;if(!k.value)k.value=Date.now();else{const R=Date.now()-k.value;R>=3e3?W=1:R>=2500?W=2:R>=2e3?W=5:R>=1500?W=12:R>=1e3?W=25:R>=500?W=50:R>=250&&(W=100)}switch(t!==W&&(clearInterval(o.value),o.value=setInterval(()=>{h(I,W)},W)),I){case 0:k.value=0,clearInterval(o.value),M();break;case 6:i.value.width-=1;break;case 5:i.value.width+=1;break;case 1:i.value.style.top=`${(parseInt(getComputedStyle(i.value).top)||0)-1}px`;break;case 2:i.value.style.left=`${(parseInt(getComputedStyle(i.value).left)||0)+1}px`;break;case 3:i.value.style.top=`${(parseInt(getComputedStyle(i.value).top)||0)+1}px`;break;case 4:i.value.style.left=`${(parseInt(getComputedStyle(i.value).left)||0)-1}px`;break}ae()},F=I=>{switch(I.type){case"touchstart":I.preventDefault(),l.value.imageX=parseInt(getComputedStyle(i.value).left),l.value.imageY=parseInt(getComputedStyle(i.value).top),l.value.mouseX=I.touches[0].clientX,l.value.mouseY=I.touches[0].clientY,l.value.mouseDown=!0;break;case"mousedown":l.value.imageX=parseInt(getComputedStyle(i.value).left),l.value.imageY=parseInt(getComputedStyle(i.value).top),l.value.mouseX=I.clientX,l.value.mouseY=I.clientY,l.value.mouseDown=!0;break;case"touchend":I.preventDefault();case"mouseup":l.value.mouseDown=!1,M();break;case"touchmove":if(!l.value.mouseDown)return;i.value.style.left=`${l.value.imageX+(I.touches[0].clientX-l.value.mouseX)}px`,i.value.style.top=`${l.value.imageY+(I.touches[0].clientY-l.value.mouseY)}px`;break;case"mousemove":if(!l.value.mouseDown)return;i.value.style.left=`${l.value.imageX+(I.clientX-l.value.mouseX)}px`,i.value.style.top=`${l.value.imageY+(I.clientY-l.value.mouseY)}px`;break;case"dragstart":I.preventDefault();break;case"keydown":switch(I.key){case"ArrowUp":I.preventDefault(),h(1);break;case"ArrowRight":I.preventDefault(),h(2);break;case"ArrowDown":I.preventDefault(),h(3);break;case"ArrowLeft":I.preventDefault(),h(4);break;case"+":I.preventDefault(),h(5);break;case"-":I.preventDefault(),h(6);break}break;case"keyup":h(0),M();break}ae()},ae=()=>{if(i.value.width<u.value&&(i.value.width=u.value),i.value.height<D.value){const I=D.value-i.value.height,t=i.value.width/i.value.height;i.value.width+=Math.ceil(I*t)}(parseInt(getComputedStyle(i.value).left)||0)>0&&(i.value.style.left="0px"),(parseInt(getComputedStyle(i.value).top)||0)>0&&(i.value.style.top="0px"),(parseInt(getComputedStyle(i.value).left)||0)<0-(i.value.width-u.value)&&(i.value.style.left=`${0-(i.value.width-u.value)}px`),(parseInt(getComputedStyle(i.value).top)||0)<0-(i.value.height-D.value)&&(i.value.style.top=`${0-(i.value.height-D.value)}px`)},oe=()=>{try{clearInterval(o.value)}catch{}l.value.mouseDown=!1,k.value=0,M()};return window.addEventListener("mouseup",oe),window.addEventListener("mousemove",F),window.addEventListener("touchend",oe),window.addEventListener("touchmove",F),Xe(()=>{window.removeEventListener("mouseup",oe),window.removeEventListener("mousemove",F),window.removeEventListener("touchend",oe),window.removeEventListener("touchmove",F)}),(I,t)=>(n(),N("div",{style:_e(B.value)},[m(He,{ref_key:"badgeImageForm",ref:O,enctype:"multipart/form-data"},{default:s(()=>[m(J,null,{default:s(()=>[m(P,null,{default:s(()=>[m(st,{label:I.label||"",name:I.name||"",hint:I.hint||"",variant:"outlined",ref_key:"imageFileInput",ref:p,accept:"image/avif, image/bmp, image/gif, image/jpeg, image/png, image/webp",rules:[G.value.required],"error-messages":I.errorMessages||"","persistent-hint":I.persistentHint||!1,disabled:!e.value||I.disabled||!1,"hide-details":"",onChange:g,onBlur:T},null,8,["label","name","hint","rules","error-messages","persistent-hint","disabled"]),_("p",Jt,[e.value?L("",!0):(n(),N("small",Ft,"File Uploading"))])]),_:1})]),_:1}),m(J,{class:"justify-center scale-down"},{default:s(()=>[m(P,{cols:"12",class:"text-center"},{default:s(()=>[X(" Preview "),d.value?(n(),N("div",Wt,[m(et,{indeterminate:"",color:"primary",size:128,width:10},{default:s(()=>[X("Uploading")]),_:1})])):(n(),N(H,{key:1},[_("div",{class:"image-preview my-auto mx-auto",onMousemove:F,onMousedown:F,onMouseup:F,onTouchstart:F,onTouchmove:F,onTouchend:F},[_("img",{src:C.value,ref_key:"imageDisplay",ref:i,alt:"Your badge image",onLoad:w,onDragstart:F,onKeydown:F,onKeyup:F,tabindex:"0",class:"d-none"},null,40,Kt)],32),_("h3",null,K(c.value),1)],64))]),_:1}),Y.value?(n(),y(P,{key:0,cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:s(()=>[m(j,{icon:"mdi:mdi-arrow-left",color:"primary",onMousedown:t[0]||(t[0]=r=>h(4,0,r)),onMouseup:t[1]||(t[1]=r=>h(0,0,r)),onTouchstart:t[2]||(t[2]=r=>h(4,0,r)),onTouchend:t[3]||(t[3]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-up",color:"secondary",onMousedown:t[4]||(t[4]=r=>h(1,0,r)),onMouseup:t[5]||(t[5]=r=>h(0,0,r)),onTouchstart:t[6]||(t[6]=r=>h(1,0,r)),onTouchend:t[7]||(t[7]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-down",color:"secondary",onMousedown:t[8]||(t[8]=r=>h(3,0,r)),onMouseup:t[9]||(t[9]=r=>h(0,0,r)),onTouchstart:t[10]||(t[10]=r=>h(3,0,r)),onTouchend:t[11]||(t[11]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-arrow-right",color:"primary",onMousedown:t[12]||(t[12]=r=>h(2,0,r)),onMouseup:t[13]||(t[13]=r=>h(0,0,r)),onTouchstart:t[14]||(t[14]=r=>h(2,0,r)),onTouchend:t[15]||(t[15]=r=>h(0,0,r))})]),_:1})):L("",!0)]),_:1}),Y.value?(n(),y(J,{key:0,class:"justify-center scale-down"},{default:s(()=>[m(P,{cols:"12",class:"d-flex justify-space-between",style:{"max-width":"280px"}},{default:s(()=>[m(j,{icon:"mdi:mdi-plus",color:"primary",onMousedown:t[16]||(t[16]=r=>h(5,0,r)),onMouseup:t[17]||(t[17]=r=>h(0,0,r)),onTouchstart:t[18]||(t[18]=r=>h(5,0,r)),onTouchend:t[19]||(t[19]=r=>h(0,0,r))}),m(j,{icon:"mdi:mdi-minus",color:"secondary",onMousedown:t[20]||(t[20]=r=>h(6,0,r)),onMouseup:t[21]||(t[21]=r=>h(0,0,r)),onTouchstart:t[22]||(t[22]=r=>h(6,0,r)),onTouchend:t[23]||(t[23]=r=>h(0,0,r))})]),_:1})]),_:1})):L("",!0)]),_:1},512)],4))}}),zt=Je(jt,[["__scopeId","data-v-991696f4"]]),Qt=qe({...ut({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Zt=xe()({name:"VRadio",props:Qt(),setup(a,q){let{slots:f}=q;return Pe(()=>m(Ge,fe(a,{class:["v-radio",a.class],style:a.style,type:"radio"}),f)),{}}}),el=qe({height:{type:[Number,String],default:"auto"},...nt(),...Fe(rt(),["multiple"]),trueIcon:{type:we,default:"$radioOn"},falseIcon:{type:we,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),tl=xe()({name:"VRadioGroup",inheritAttrs:!1,props:el(),emits:{"update:modelValue":a=>!0},setup(a,q){let{attrs:f,slots:A}=q;const E=We(),U=Ve(()=>a.id||`radio-group-${E}`),M=Ke(a,"modelValue");return Pe(()=>{const[x,$]=je(f),O=ke.filterProps(a),c=Ge.filterProps(a),e=A.label?A.label({label:a.label,props:{for:U.value}}):a.label;return m(ke,fe({class:["v-radio-group",a.class],style:a.style},x,O,{modelValue:M.value,"onUpdate:modelValue":p=>M.value=p,id:U.value}),{...A,default:p=>{let{id:i,messagesId:C,isDisabled:d,isReadonly:k}=p;return m(H,null,[e&&m(ot,{id:i.value},{default:()=>[e]}),m(dt,fe(c,{id:i.value,"aria-describedby":C.value,defaultsTarget:"VRadio",trueIcon:a.trueIcon,falseIcon:a.falseIcon,type:a.type,disabled:d.value,readonly:k.value,"aria-labelledby":e?i.value:void 0,multiple:!1},$,{modelValue:M.value,"onUpdate:modelValue":o=>M.value=o}),A)])}})}),{}}}),Le=ie({__name:"FormField",props:z({admin:{type:Boolean},convention:{},name:{},field:{},disabled:{type:Boolean},maxLength:{},minLength:{},persistentHint:{type:Boolean},registrationGroup:{},required:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["change","input","update:field"],["update:modelValue"]),setup(a,{emit:q}){const f=a,{admin:A=!1,disabled:E=!1,persistentHint:U=!1,required:M=!1}=f,x=V(""),$=re(a,"modelValue"),O=q,c=Ce(f,O,void 0,void 0,"field"),e=V(me(c.value)),p=V({maxlength:o=>!f.maxLength||o.length<=f.maxLength||`Maximum length is ${f.maxLength} characters. (Current length: ${o.length})`,minlength:o=>!f.minLength||o.length>=f.minLength||`Minimum length is ${f.minLength} characters. (Current length: ${o.length})`,required:o=>!f.required||!!o.replace(/\s/g,"")||"Required field."}),i=V(!1),C=V([]),d=V("");try{const o=JSON.parse($.value);Array.isArray(o)?C.value=o:typeof o=="boolean"?i.value=o:d.value=$.value}catch{i.value=!1,C.value=[],d.value=$.value}le(i,()=>{$.value=JSON.stringify(i.value),O("input"),O("change")}),le(C,()=>{$.value=JSON.stringify(C.value),O("input"),O("change")},{deep:!0}),le(d,()=>{$.value=d.value,O("input"),O("change")}),le(c.value,()=>{e.value.Type!==c.value.Type?(e.value=me(c.value),i.value=!1,C.value=[],d.value=""):e.value=me(c.value)});const k=(o=void 0)=>{O("change",o)};return(o,l)=>{var D;return e.value.Type===v(Z).TEXT?(n(),y(he,{key:0,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=u=>d.value=u),name:o.name||"",hint:e.value.Hint,label:`${e.value.Label}${v(M)?"*":""}`,placeholder:e.value.Placeholder,variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.maxlength,p.value.minlength,p.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===v(Z).DATE?(n(),y(he,{key:1,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=u=>d.value=u),type:"date",name:o.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.maxlength,p.value.minlength,p.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===v(Z).NUMBER?(n(),y(he,{key:2,modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=u=>d.value=u),type:"number",name:o.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.maxlength,p.value.minlength,p.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===v(Z).TEXTAREA?(n(),y(it,{key:3,modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=u=>d.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,placeholder:e.value.Placeholder,variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.maxlength,p.value.minlength,p.value.required],onChange:k,autocomplete:"off"},null,8,["modelValue","name","hint","label","placeholder","disabled","persistent-hint","error-messages","rules"])):e.value.Type===v(Z).CHECKBOX?(n(),N(H,{key:4},[e.value.Multiple?(n(!0),N(H,{key:0},ee(e.value.Values,u=>(n(),y(de,{key:u.ID,modelValue:C.value,"onUpdate:modelValue":l[4]||(l[4]=B=>C.value=B),name:o.name||"",hint:e.value.Hint,label:u.Title,value:u.Value,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,rules:[p.value.required],onChange:k},null,8,["modelValue","name","hint","label","value","disabled","persistent-hint","error-messages","rules"]))),128)):(n(),y(de,{key:1,modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=u=>i.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,required:v(M),rules:[u=>!v(M)||!!u||"You must tick to continue!"],onChange:k},null,8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","required","rules"]))],64)):e.value.Type===v(Z).SELECT?(n(),N(H,{key:5},[!e.value.Autofill&&e.value.Multiple?(n(),y(De,{key:0,modelValue:C.value,"onUpdate:modelValue":l[6]||(l[6]=u=>C.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill&&e.value.Multiple?(n(),y(Ae,{key:1,modelValue:C.value,"onUpdate:modelValue":l[7]||(l[7]=u=>C.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,multiple:"",items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):e.value.Autofill?e.value.Autofill?(n(),y(Ae,{key:3,modelValue:d.value,"onUpdate:modelValue":l[9]||(l[9]=u=>d.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"])):L("",!0):(n(),y(De,{key:2,modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=u=>d.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,items:e.value.Values,"item-title":"Title","item-value":"Value",variant:"outlined",disabled:v(E)||!1,"persistent-hint":v(U)||!1,"error-messages":x.value,rules:[p.value.required]},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages","rules"]))],64)):e.value.Type===v(Z).RADIO?(n(),y(tl,{key:6,modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=u=>d.value=u),name:o.name||"",hint:e.value.Hint,label:e.value.Label,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,rules:[p.value.required],onChange:k},{default:s(()=>[(n(!0),N(H,null,ee(e.value.Values,u=>(n(),y(Zt,{key:u.Value,label:u.Title,value:u.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","name","hint","label","disabled","persistent-hint","error-messages","rules"])):e.value.Type===v(Z).ACCOMMODATION?(n(),y(Xt,{key:7,modelValue:C.value,"onUpdate:modelValue":l[11]||(l[11]=u=>C.value=u),name:o.name,admin:v(A),convention:o.convention,"registration-group":o.registrationGroup,data:o.field.Data,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,required:v(M),onChange:k},null,8,["modelValue","name","admin","convention","registration-group","data","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===v(Z).AGE?(n(),y(_t,{key:8,modelValue:d.value,"onUpdate:modelValue":l[12]||(l[12]=u=>d.value=u),name:o.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,onChange:k},null,8,["modelValue","name","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===v(Z).BADGE_IMAGE?(n(),y(zt,{key:9,modelValue:d.value,"onUpdate:modelValue":l[13]||(l[13]=u=>d.value=u),name:o.name,registration:(D=o.registrationGroup)==null?void 0:D.Registration,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,onChange:k},null,8,["modelValue","name","registration","hint","label","items","disabled","persistent-hint","error-messages"])):e.value.Type===v(Z).EXTRAS?(n(),y(ht,{key:10,modelValue:d.value,"onUpdate:modelValue":l[14]||(l[14]=u=>d.value=u),admin:v(A),convention:o.convention,name:o.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,required:v(M),onChange:k},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===v(Z).INTERESTS?(n(),y(It,{key:11,modelValue:d.value,"onUpdate:modelValue":l[15]||(l[15]=u=>d.value=u),admin:v(A),convention:o.convention,name:o.name,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,required:v(M),onChange:k},null,8,["modelValue","admin","convention","name","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===v(Z).TICKET?(n(),y(Tt,{key:12,modelValue:d.value,"onUpdate:modelValue":l[16]||(l[16]=u=>d.value=u),admin:v(A),convention:o.convention,name:o.name,"registration-group":o.registrationGroup,hint:e.value.Hint,label:e.value.Label,items:e.value.Values,disabled:v(E)||!1,"persistent-hint":v(U),"error-messages":x.value,required:v(M),onChange:k},null,8,["modelValue","admin","convention","name","registration-group","hint","label","items","disabled","persistent-hint","error-messages","required"])):e.value.Type===v(Z).HTML?(n(),y(Ut,{key:13,data:o.field.Data},null,8,["data"])):L("",!0)}}}),ll={key:0,class:"my-2 text-white text-center"},al={key:1,class:"admin-header my-2 text-white text-center"},nl=["innerHTML"],ol=["innerHTML"],Ll=ie({__name:"FormRenderer",props:z({admin:{type:Boolean},convention:{},data:{},editable:{type:Boolean},preview:{type:Boolean},registrationGroup:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:z(["close"],["update:modelValue"]),setup(a,{emit:q}){const f=q,A=re(a,"modelValue");pe(A.value.Sections),A.value.Sections.forEach(T=>{T.Fields&&pe(T.Fields)});const E=V(),U=mt(),M=Se(),x=V(!1),$=V(!1),O=V(!1),c=V(!1),e=V(!1),p=V(!1),i=V(!1),C=V(!1),d=V(!1),k=V(!1),o=V(!1),l=V((()=>{if(a.data!==void 0){const g=me(a.data);return A.value.Sections.forEach(S=>{S.Fields&&S.Fields.forEach(b=>{const w=a.data.Data.find(h=>h.SectionFieldUUID===b.SectionFieldUUID&&h.SectionFieldUUID==b.SectionFieldUUID);if(w)b.Value=w.Data;else{const h={ID:0,SubmissionDataUUID:be(),SubmissionID:a.data.ID,SubmissionUUID:a.data.SubmissionUUID,SectionID:S.ID,SectionUUID:S.SectionUUID,SectionFieldID:b.ID,SectionFieldUUID:b.SectionFieldUUID,Data:b.Value,CreatedAt:"",DeletedAt:"",UpdatedAt:""};g.Data.push(h),b.Value=""}})}),g}const T={ID:0,SubmissionUUID:be(),FormID:A.value.ID,FormUUID:A.value.FormUUID,UserID:(U==null?void 0:U.ID)||0,UserUUID:(U==null?void 0:U.UserUUID)||"",Data:[],Status:Qe.SUBMISSION_STATUS_OPEN};return T.Data=A.value.Sections.map(g=>g.Fields?g.Fields.map(S=>({ID:0,SubmissionDataUUID:be(),SubmissionID:T.ID,SubmissionUUID:T.SubmissionUUID,SectionID:g.ID,SectionUUID:g.SectionUUID,SectionFieldID:S.ID,SectionFieldUUID:S.SectionFieldUUID,Data:""})):[]).flat(),T})()),D=(T,g,S)=>{const b=l.value.Data.find(w=>w.SectionUUID===T&&w.SectionFieldUUID===g);b&&(b.Data=S)},u=(T,g,S,b,w)=>T!=null&&T.State.Independent?"/":T&&T.Type===te.FORM_TYPE_REGISTRATION?g&&!g.State.Independent&&(g.State.New||g.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/accommodation`:S&&!S.State.Independent&&(S.State.New||S.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`:b&&!b.State.Independent&&(b.State.New||b.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`:w&&!w.State.Independent&&(w.State.New||w.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===te.FORM_TYPE_ACCOMMODATION?S&&!S.State.Independent&&(S.State.New||S.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/dealer`:b&&!b.State.Independent&&(b.State.New||b.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`:w&&!w.State.Independent&&(w.State.New||w.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===te.FORM_TYPE_DEALER?b&&!b.State.Independent&&(b.State.New||b.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/badge`:w&&!w.State.Independent&&(w.State.New||w.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":T&&T.Type===te.FORM_TYPE_BADGE?w&&!w.State.Independent&&(w.State.New||w.State.Edit)?`/register/${a.convention.Slug||a.convention.ConventionUUID}/additional`:"/":(T&&T.Type===te.FORM_TYPE_ADDITIONAL,"/"),B=({callback:T})=>{M.getRegistrationByConvention(a.convention.ConventionUUID).then(g=>{T&&T("Loading"),M.getAvailableConventionForms(a.convention.ConventionUUID).then(S=>{g.Submissions.forEach((I,t)=>{I.Form||(g.Submissions[t].Form=S.find(r=>r.FormUUID===I.FormUUID))});const b=g.Submissions.find(I=>I.FormUUID===l.value.FormUUID),w=g.Submissions.find(I=>{var t;return((t=I.Form)==null?void 0:t.Type)===te.FORM_TYPE_ACCOMMODATION}),h=g.Submissions.find(I=>{var t;return((t=I.Form)==null?void 0:t.Type)===te.FORM_TYPE_ADDITIONAL}),F=g.Submissions.find(I=>{var t;return((t=I.Form)==null?void 0:t.Type)===te.FORM_TYPE_DEALER}),ae=g.Submissions.find(I=>{var t;return((t=I.Form)==null?void 0:t.Type)===te.FORM_TYPE_BADGE}),oe=u(b==null?void 0:b.Form,w==null?void 0:w.Form,F==null?void 0:F.Form,ae==null?void 0:ae.Form,h==null?void 0:h.Form);console.info(oe),Ee.push(oe)})})},Y=({callback:T})=>{var g;(g=E.value)==null||g.validate().then(S=>{S.valid?M.saveSubmission(l.value).then(b=>{b?setTimeout(()=>{G(b,T,1)},1e3):T&&T("Failed to process request")}).catch(()=>{T&&T("Failed to process request")}):T&&T("Errors in form detected, please review and try again.")})},G=(T,g,S=1)=>{M.checkSubmission(T).then(b=>{if(b)if(b.Ready&&b.Submission){if(x.value=!1,l.value=b.Submission,g&&g("Saved"),a.admin)f("close");else if(b.Forms&&b.Forms.length>0){const w=b.Forms.find(t=>t.FormUUID===l.value.FormUUID),h=b.Forms.find(t=>t.Type===te.FORM_TYPE_ACCOMMODATION),F=b.Forms.find(t=>t.Type===te.FORM_TYPE_DEALER),ae=b.Forms.find(t=>t.Type===te.FORM_TYPE_BADGE),oe=b.Forms.find(t=>t.Type===te.FORM_TYPE_ADDITIONAL),I=u(w,h,F,ae,oe);console.info(I),Ee.push(I)}}else{if(S>5&&(x.value=!0),S>10&&($.value=!0),S>20&&(O.value=!0),S>30&&(c.value=!0),S>40&&(e.value=!0),S>50&&(p.value=!0),S>60&&(i.value=!0),S>70&&(C.value=!0),S>80&&(d.value=!0),S>90&&(k.value=!0),S>100&&(o.value=!0),S>200){g&&(x.value=!1,$.value=!1,O.value=!1,c.value=!1,e.value=!1,p.value=!1,i.value=!1,C.value=!1,d.value=!1,k.value=!1,o.value=!1,g("A problem was encountered during saving, please check form and try again."));return}setTimeout(()=>{G(T,g,S+1)},S<20?1e3*S:2e4)}else g&&(x.value=!1,$.value=!1,O.value=!1,c.value=!1,e.value=!1,p.value=!1,i.value=!1,C.value=!1,d.value=!1,k.value=!1,o.value=!1,g("A problem was encountered during saving, please check form and try again."))}).catch(()=>{g&&(x.value=!1,$.value=!1,O.value=!1,c.value=!1,e.value=!1,p.value=!1,i.value=!1,C.value=!1,d.value=!1,k.value=!1,o.value=!1,g("A problem was encountered during saving, please check form and try again."))})};return(T,g)=>{const S=ze("router-link");return n(),y(tt,null,{default:s(()=>[m(He,{ref_key:"formValidator",ref:E,autocomplete:"off",onSubmit:g[1]||(g[1]=Re(()=>{},["prevent"]))},{default:s(()=>[A.value.Heading?(n(),N("h1",ll,K(A.value.Heading),1)):L("",!0),T.admin?(n(),N("h2",al," (Admin Mode) ")):L("",!0),A.value.Description?(n(),N("div",{key:2,class:"my-2 form-description-container pa-5 border rounded-lg text-black",innerHTML:A.value.Description},null,8,nl)):L("",!0),(n(!0),N(H,null,ee(A.value.Sections,b=>(n(),y(vt,{key:`section_${A.value.ID}.${b.ID}`,class:"my-4 section-container rounded-lg",elevation:"4"},{default:s(()=>[b.Heading?(n(),y(ct,{key:0},{default:s(()=>[X(K(b.Heading),1)]),_:2},1024)):L("",!0),b.Description?(n(),y(ft,{key:1,class:"text-wrap"},{default:s(()=>[_("div",{innerHTML:b.Description},null,8,ol)]),_:2},1024)):L("",!0),b.Fields?(n(),y(pt,{key:2},{default:s(()=>[(n(!0),N(H,null,ee(b.Fields,w=>(n(),N(H,{key:`field_${A.value.ID}.${b.ID}.${w.ID}`},[w.Field?(n(),y(J,{key:0},{default:s(()=>[m(P,null,{default:s(()=>[T.editable?(n(),y(Le,{key:0,name:w.SectionFieldUUID,field:w.Field,modelValue:w.Value,"onUpdate:modelValue":h=>w.Value=h,admin:T.admin,convention:T.convention,"registration-group":T.registrationGroup,required:w.Required,"min-length":w.MinLength,"max-length":w.MaxLength,"persistent-hint":!0,onChange:h=>D(b.SectionUUID,w.SectionFieldUUID,w.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"])):(n(),y(Le,{key:1,name:w.SectionFieldUUID,field:w.Field,modelValue:w.Value,"onUpdate:modelValue":h=>w.Value=h,admin:T.admin,convention:T.convention,"registration-group":T.registrationGroup,required:w.Required,"min-length":w.MinLength,"max-length":w.MaxLength,"persistent-hint":!0,disabled:"",onChange:h=>D(b.SectionUUID,w.SectionFieldUUID,w.Value)},null,8,["name","field","modelValue","onUpdate:modelValue","admin","convention","registration-group","required","min-length","max-length","onChange"]))]),_:2},1024)]),_:2},1024)):L("",!0)],64))),128))]),_:2},1024)):L("",!0)]),_:2},1024))),128)),T.preview?L("",!0):(n(),N(H,{key:3},[m(J,null,{default:s(()=>[T.admin?(n(),y(P,{key:1,class:"text-right"},{default:s(()=>[m(j,{color:"red",onClick:g[0]||(g[0]=b=>f("close"))},{default:s(()=>[X("Cancel")]),_:1})]),_:1})):(n(),y(P,{key:0,class:"text-right"},{default:s(()=>[m(S,{to:{name:"Home"},class:"text-decoration-none text-white"},{default:s(()=>[m(j,{color:"red"},{default:s(()=>[X("Close")]),_:1})]),_:1})]),_:1})),T.admin||T.editable?(n(),y(P,{key:2,class:"text-left"},{default:s(()=>[m(Oe,{onClick:Y,type:"submit"})]),_:1})):(n(),y(P,{key:3,class:"text-left"},{default:s(()=>[m(Oe,{onClick:B,type:"submit",label:"Next",color:"green"})]),_:1}))]),_:1}),x.value?(n(),y(J,{key:0},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Your request is currently queued for processing. We have received your data, you do not need to resubmit it or refresh. The next page will load once the system has processed your details. Please be patient as this may take a while. ")]),_:1})]),_:1})):L("",!0),$.value?(n(),y(J,{key:1},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Honestly! It really is being handled by our systems, the web browser window will continue, to monitor progress whilst it remains open. ")]),_:1})]),_:1})):L("",!0),O.value?(n(),y(J,{key:2},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" There seems to be a bit of Jam, don't worry because we have a fine selection of Jams at breakfast. Keep holding on in there, we'll get you on your way soon. ")]),_:1})]),_:1})):L("",!0),c.value?(n(),y(J,{key:3},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Reticulating splines ")]),_:1})]),_:1})):L("",!0),e.value?(n(),y(J,{key:4},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Downloading more RAM to process your registration. ")]),_:1})]),_:1})):L("",!0),p.value?(n(),y(J,{key:5},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Ever seen a loading screen with a jump scare? ")]),_:1})]),_:1})):L("",!0),i.value?(n(),y(J,{key:6},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" We are not liable for any broken screens as a result of waiting. ")]),_:1})]),_:1})):L("",!0),C.value?(n(),y(J,{key:7},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Let's have a race, see if you can inflate a pool toy by mouth before we finish. NB. Inflating your toys in this fashion is not recommended for many reasons. ")]),_:1})]),_:1})):L("",!0),d.value?(n(),y(J,{key:8},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Apparently there were just under 1,000 of you at Scotiacon 2023, so where did the other 4,000 appear from? ")]),_:1})]),_:1})):L("",!0),k.value?(n(),y(J,{key:9},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" Jesus titty fucking christ! Why are there so many of you, this is ridiculous. We're still working on your request, please don't panic. ")]),_:1})]),_:1})):L("",!0),o.value?(n(),y(J,{key:10},{default:s(()=>[m(P,{class:"bg-red-accent-4 border rounded-lg text-center mb-2"},{default:s(()=>[X(" We've run out of silly things to say, but if the save button is still spinning then the registration request is still queued for processing. ")]),_:1})]),_:1})):L("",!0)],64))]),_:1},512)]),_:1})}}});export{Al as F,Le as _,Ml as a,Z as b,Ll as c,$l as d,Ol as m,pe as s};
